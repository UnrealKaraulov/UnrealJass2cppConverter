globalsinteger array Iinteger array Ointeger array Ainteger array Binteger array Cinteger array Dinteger array Einteger array Finteger array Ginteger array Hinteger array Zinteger array Vinteger array Winteger array Xinteger array Yinteger array Jinteger array Kreal array Ltimer M=nullreal N=0integer array Tboolean array Rinteger array Pinteger array Qinteger array I0boolean O0=falseboolean array A0boolean B0=falsestring array C0boolean array D0timer array E0timer array F0integer array G0integer H0=0integer Z0=0integer array V0integer array W0boolean X0=falseboolean Y0=falseboolean J0=falseboolean K0=falseboolean L0=falsemultiboard M0=nullunit N0=nullboolean array S0integer T0=0boolean R0=falseboolean P0=falseboolean Q0=falselocation U0=nulllocation II=nulllocation BI=nulllocation CI=nulllocation DI=nullboolean EI=falseboolean FI=falseboolean GI=falseboolean HI=falseboolean ZI=falseboolean VI=falseboolean WI=falseboolean XI=falseboolean YI=falseboolean JI=falseboolean KI=falseboolean LI=falseinteger NI=0integer SI=0location TI=nulllocation RI=nulllocation PI=nulllocation QI=nulllocation UI=nulllocation I1=nulllocation O1=nulllocation A1=nulllocation B1=nulllocation C1=nulllocation D1=nulllocation E1=nulllocation F1=nulllocation G1=nullinteger array H1integer array Z1integer array V1integer array W1integer X1=0integer array Y1integer array J1unit array K1integer L1=0integer M1=0player array N1player array S1integer array T1integer array R1integer array P1integer array Q1unit array U1integer array IOforce OO=nullforce AO=nullplayer array BOplayer array COplayer DO=nullplayer EO=nullboolean FO=falseleaderboard array GOinteger HO=0integer ZO=0integer array VOplayer WO=nullunit XO=nullinteger YO=0real JO=0item array KOitem array LOitem array NOitem array TOitem array POitem array QOboolean UO=falseinteger I2=0location array O2unit A2=nullgroup B2=nullboolean C2=falseboolean D2=falseboolean E2=falseboolean F2=falseboolean G2=falseboolean H2=falseboolean Z2=falseboolean V2=falsestring W2=""timer X2=nullboolean Y2=falseboolean J2=falseitem K2=nullplayer L2=nullstring array M2boolean N2=falseboolean array S2integer array T2integer R2=0force P2=nullboolean Q2=falsereal U2=0boolean I3=falseboolean O3=falseboolean A3=falseboolean B3=falseboolean array C3string D3=""boolean array E3boolean array F3boolean G3=falseboolean H3=falseweathereffect Z3=nullweathereffect V3=nullboolean W3=falselocation X3=nullreal Y3=0string J3=""string array K3rect L3=nullrect M3=nullrect N3=nullrect S3=nullrect T3=nullrect R3=nullrect P3=nullrect Q3=nullrect U3=nullrect I4=nullrect O4=nullrect A4=nullrect B4=nullrect C4=nullrect D4=nullrect E4=nullrect F4=nullrect G4=nullrect H4=nullrect Z4=nullrect V4=nullrect W4=nullrect X4=nullrect Y4=nullrect J4=nullrect K4=nullrect L4=nullrect M4=nullrect N4=nullrect S4=nullrect T4=nullrect R4=nullrect P4=nullrect Q4=nullrect U4=nullrect I5=nullrect O5=nullrect A5=nullrect B5=nullrect C5=nullrect D5=nullrect E5=nullrect F5=nullrect G5=nullrect H5=nullrect Z5=nullrect V5=nullrect W5=nullrect X5=nullrect Y5=nullrect J5=nullrect K5=nullrect L5=nullrect M5=nullrect N5=nullrect S5=nullrect T5=nullrect R5=nullrect P5=nullrect Q5=nullrect U5=nullrect I6=nullrect O6=nullrect A6=nullrect B6=nullrect C6=nullrect D6=nullrect E6=nullrect F6=nullrect G6=nullrect H6=nullrect Z6=nullrect V6=nullrect W6=nullrect X6=nullrect Y6=nullrect J6=nullrect K6=nullrect L6=nullrect M6=nullrect N6=nullrect S6=nullrect T6=nullrect R6=nullrect P6=nullrect Q6=nullrect U6=nullrect I7=nullrect O7=nullrect A7=nullrect B7=nullrect C7=nullrect D7=nullrect E7=nullrect F7=nullrect G7=nullrect H7=nullrect Z7=nullrect V7=nullrect W7=nullrect X7=nullrect Y7=nullrect J7=nullrect K7=nullrect L7=nullrect M7=nullrect N7=nullrect S7=nullrect T7=nullrect R7=nullrect P7=nullrect Q7=nullrect U7=nullrect I8=nullrect O8=nullrect A8=nullrect B8=nullrect C8=nullrect D8=nullrect E8=nullrect F8=nullrect G8=nullrect H8=nullrect Z8=nullrect V8=nullrect W8=nullrect X8=nullrect Y8=nullrect J8=nullrect K8=nullrect L8=nullrect M8=nullrect N8=nullrect S8=nullrect T8=nullrect R8=nullrect P8=nullrect Q8=nullrect U8=nullrect I9=nullrect O9=nullrect A9=nullrect B9=nullrect C9=nullrect D9=nullrect E9=nullrect F9=nullrect G9=nullrect H9=nullrect Z9=nullrect V9=nullrect W9=nullrect X9=nullrect Y9=nullrect J9=nullrect K9=nullrect L9=nullrect M9=nullrect N9=nullrect S9=nullrect T9=nullrect R9=nullrect P9=nullrect Q9=nullrect U9=nullrect IA=nullrect OA=nullrect BA=nullrect CA=nullrect DA=nullrect EA=nullrect FA=nullrect GA=nullrect HA=nullrect ZA=nullrect VA=nullrect WA=nullrect XA=nullrect YA=nullrect JA=nullrect KA=nullrect LA=nullrect MA=nullrect NA=nullrect SA=nullrect TA=nullrect RA=nullrect PA=nullrect QA=nullrect UA=nullrect IB=nullrect OB=nullrect AB=nullrect BB=nullrect CB=nullrect DB=nullrect EB=nullrect FB=nullrect GB=nullrect HB=nullrect ZB=nullrect VB=nullrect WB=nullrect XB=nullrect YB=nullrect JB=nullrect KB=nullrect LB=nullrect MB=nullrect SB=nullrect TB=nullrect RB=nullrect PB=nullrect QB=nullrect IC=nullrect OC=nullrect AC=nullsound BC=nullsound CC=nullsound DC=nullsound EC=nullsound FC=nullsound GC=nullsound HC=nullsound ZC=nullsound VC=nullsound WC=nullsound XC=nullsound YC=nullsound JC=nullstring KC="Sound\\Music\\mp3Music\\Human1.mp3"string LC="Sound\\Music\\mp3Music\\Human2.mp3"string MC="Sound\\Music\\mp3Music\\Human3.mp3"sound NC=nullsound TC=nullsound RC=nullsound PC=nullsound QC=nullsound UC=nullsound OD=nullstring AD="Sound\\Music\\mp3Music\\NightElf1.mp3"string BD="Sound\\Music\\mp3Music\\NightElf2.mp3"string DD="Sound\\Music\\mp3Music\\NightElf3.mp3"sound ED=nullstring FD="Sound\\Music\\mp3Music\\Orc1.mp3"string GD="Sound\\Music\\mp3Music\\Orc2.mp3"string HD="Sound\\Music\\mp3Music\\Orc3.mp3"string ZD="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"string VD="Sound\\Music\\mp3Music\\DarkAgents.mp3"string WD="Sound\\Music\\mp3Music\\TragicConfrontation.mp3"string XD="Sound\\Music\\mp3Music\\SadMystery.mp3"string YD="Sound\\Music\\mp3Music\\IllidansTheme.mp3"sound JD=nullsound KD=nullsound LD=nullsound MD=nullsound ND=nullsound TD=nullsound PD=nullsound QD=nullsound UD=nullsound IE=nullsound OE=nullsound AE=nullstring BE="Sound\\Music\\mp3Music\\Undead1.mp3"string CE="Sound\\Music\\mp3Music\\Undead2.mp3"string DE="Sound\\Music\\mp3Music\\Undead3.mp3"sound EE=nullsound FE=nullsound GE=nullsound HE=nullsound ZE=nullsound VE=nullsound WE=nullsound XE=nullsound YE=nullsound JE=nullsound KE=nullsound LE=nullsound ME=nullsound NE=nullsound SE=nullsound TE=nullsound RE=nullsound PE=nullsound QE=nullsound UE=nullsound IF=nullsound OF=nullsound AF=nullsound BF=nullsound CF=nullsound DF=nullsound EF=nullsound FF=nullstring GF="Sound\\Music\\mp3Music\\Tension.mp3"string HF="Sound\\Music\\mp3Music\\ArthasTheme.mp3"string ZF="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"string VF="Sound\\Music\\mp3Music\\NightElfVictory.mp3"sound WF=nullsound XF=nullsound YF=nullsound JF=nullsound KF=nullsound LF=nullsound MF=nullsound NF=nullsound SF=nullsound TF=nullsound RF=nullsound PF=nullsound QF=nullsound UF=nullsound IG=nullsound OG=nullsound AG=nullsound BG=nulltrigger CG=nulltrigger DG=nulltrigger EG=nulltrigger FG=nulltrigger GG=nulltrigger HG=nulltrigger ZG=nulltrigger VG=nulltrigger WG=nulltrigger XG=nulltrigger YG=nulltrigger JG=nulltrigger KG=nulltrigger LG=nulltrigger MG=nulltrigger NG=nulltrigger SG=nulltrigger TG=nulltrigger RG=nulltrigger PG=nulltrigger QG=nulltrigger UG=nulltrigger IH=nulltrigger OH=nulltrigger BH=nulltrigger CH=nulltrigger DH=nulltrigger EH=nulltrigger FH=nulltrigger GH=nulltrigger HH=nulltrigger ZH=nulltrigger VH=nulltrigger WH=nulltrigger XH=nulltrigger YH=nulltrigger JH=nulltrigger KH=nulltrigger LH=nulltrigger MH=nulltrigger NH=nulltrigger TH=nulltrigger RH=nulltrigger PH=nulltrigger QH=nullunit UH=nullunit IZ=nullunit OZ=nullunit AZ=nullunit BZ=nullunit CZ=nullunit DZ=nullunit EZ=nullunit FZ=nullunit GZ=nullunit HZ=nullunit ZZ=nullunit VZ=nullunit WZ=nullunit XZ=nullunit YZ=nullunit JZ=nullunit KZ=nullunit LZ=nullunit MZ=nullunit NZ=nullunit SZ=nullunit TZ=nullunit RZ=nullunit PZ=nullunit QZ=nullunit UZ=nullunit IV=nullunit OV=nullunit AV=nullunit BV=nullunit CV=nullunit DV=nullunit EV=nullunit FV=nullunit GV=nullunit HV=nullunit ZV=nullunit VV=nullunit WV=nullunit XV=nullunit YV=nullunit JV=nullunit KV=nullunit LV=nullunit MV=nullunit NV=nullunit SV=nullunit TV=nullunit PV=nullunit QV=nullunit UV=nullunit IW=nullunit OW=nullunit AW=nullunit BW=nullunit CW=nullunit DW=nullunit EW=nullunit FW=nullunit GW=nullunit HW=nullunit ZW=nullunit VW=nullunit WW=nullunit XW=nullunit YW=nullunit JW=nullunit KW=nullunit LW=nullunit MW=nullunit SW=nullunit TW=nullunit RW=nullunit PW=nullunit QW=nullunit UW=nullunit IX=nullunit OX=nullunit AX=nullunit BX=nullunit CX=nullunit DX=nullunit EX=nullunit GX=nullunit HX=nullunit ZX=nullunit VX=nullunit WX=nullunit XX=nullunit YX=nullunit JX=nullunit KX=nullunit LX=nullunit MX=nullunit NX=nullunit SX=nullunit TX=nullunit RX=nullunit PX=nullunit QX=nullunit UX=nullunit IY=nullunit OY=nullunit AY=nullunit BY=nullunit CY=nullunit DY=nullunit EY=nullunit FY=nullunit GY=nullunit HY=nullunit ZY=nullunit VY=nullunit WY=nullunit XY=nullunit YY=nullunit JY=nullunit KY=nullhashtable LYstring MY=""unit array NYunit array SYunit array TYinteger RY=0destructable array PYdestructable array QYdestructable array UYinteger IJ=0group array OJboolean array AJinteger BJinteger CJboolean DJ=falsetrigger array EJreal array FJinteger GJ=0boolean array HJreal array ZJinteger array VJinteger array WJinteger XJ=0string array YJinteger array JJinteger KJ=0string LJreal MJinteger NJ=0sound SJunit TJreal RJreal PJreal QJinteger UJinteger IKinteger OKreal AKreal BKreal CKreal DKreal EKreal FKunit GKunit HKunit ZKitem VKtrigger WKgroup XKgroup YKplayer JKboolean KKstring LKimage MK=nullunit NK=nullinteger SKboolean TK=truetrigger RKtrigger PKregion QKinteger UK=1boolean IL=falsetimer OLboolean AL=falseinteger BL=90boolean CL=falseboolean DL=falsestring EL="No Mode"boolean FL=falseboolean GL=trueboolean HL=falseboolean ZL=falseboolean VL=falseboolean WL=falseinteger YLboolean JL=falseinteger array KLboolean array LLinteger ML=0integer array SLinteger array TLinteger array RLinteger array PLinteger array QLinteger array ULinteger array IMinteger array AMinteger array BMinteger array FMboolean array GMboolean array HMboolean array VMboolean array WMunit XM=nullunit YM=nullboolean JM=falseplayer KM=nullplayer SM=nullboolean array TMinteger RMplayer QMtrigger UM=nullboolean IN=falseinteger ONinteger ANboolean BN=falseboolean CN=falsetrigger DNboolean EN=falseinteger FN=1093742670integer GN=1093686064integer HN=1093742671integer ZN=1093742672boolean VN=falseinteger array WNregion XNregion YNregion JNregion KNregion LNregion MNconstant real NN=150integer array SNinteger TN=0integer array RNinteger array PNinteger array QNinteger array UNinteger IS=0gamecache OSinteger array BSinteger array CSinteger array DSinteger array ESinteger array FStrigger HSinteger array ZSinteger array VSinteger array WSboolean array XSinteger array YSreal array JSweathereffect KSweathereffect LSrect MSboolean SS=falseconstant playercolor TS=ConvertPlayerColor(0)constant playercolor PS=ConvertPlayerColor(12)real QS=-7360real US=-6688real IT=-6592real OT=-6464real AT=-7392real BT=-6240real CT=-7392real DT=-6432real ET=-6592real FT=-6720real GT=-6816real HT=-5984real ZT=-6944real VT=-5920real WT=-7072real XT=-5920real YT=-7200real JT=-5920real KT=-7328real LT=-5984real MT=-7328real ST=-5984real RT=-5632real PT=-5952real QT=-6112real UT=1504real IR=-1504real OR=-1824real BR=4960real CR=-6752real DR=-6112real GR=-1312real HR=-3488real ZR=-3296real WR=-544real XR=-6688real YR=-6496real JR=-4832real KR=-4576real LR=-4832real SR=-4512real RR=-6752real PR=-5920real QR=-5984real UR=-5664real IP=-6240real OP=-6400real BP=-4224real DP=-4288real EP=-4992real FP=-3776real GP=-6720real ZP=-5952real VP=-4160real WP=-4800real YP=-4608real JP=-3776real KP=-6272real LP=-7136real MP=-4640real TP=-6496real RP=-5536real PP=-5088real QP=-5280real UP=-5920real IQ=-4640real OQ=-4832real AQ=-4384real BQ=-4128real CQ=-5024real DQ=-5216real EQ=-6816real FQ=-4192real GQ=-7456real HQ=-4192real ZQ=-6176real VQ=-5664real WQ=-3872real XQ=-5664real YQ=-3872real JQ=-5440real KQ=-4800real LQ=-3840real MQ=-5184real NQ=-5440real SQ=-4800real TQ=-3840real RQ=-5184unit PQunit QQunit UQunit I00unit II0unit I10unit IO0unit I20unit I30unit I40unit I50unit I60unit I70unit I80unit I90unit IA0unit IB0unit IC0unit ID0unit IE0unit IF0unit IG0unit IH0unit IZ0unit IV0unit IW0unit IX0unit IY0unit IJ0unit IK0unit IL0unit IM0unit IN0unit IS0unit IT0unit IR0unit IP0unit IQ0unit IU0unit O00unit OI0unit O10unit OO0unit O20constant playercolor O30=ConvertPlayerColor(6)constant playercolor O40=ConvertPlayerColor(12)real O50=6272real O60=5504real O70=6464real O80=5120real O90=5952real OA0=5568real OB0=6080real OC0=5568real OD0=6464real OE0=4736real OF0=5696real OG0=5120real OH0=5568real OZ0=5248real OV0=5568real OW0=5376real OX0=5696real OY0=5504real OJ0=5568real OK0=5696real OL0=5568real OM0=5696real ON0=4992real OS0=4544real OT0=-4704real OR0=5920real OP0=1056real OQ0=-160real OU0=6048real A00=-2080real AI0=32real A10=5856real AO0=2400real A20=1696real A30=6112real A40=-96real A50=3168real A60=5920real A70=3616real A80=3296real A90=6048real AA0=2784real AB0=4640real AC0=4576real AD0=5088real AE0=4192real AF0=3776real AG0=5888real AH0=4096real AZ0=3392real AV0=6208real AW0=3264real AX0=3520real AY0=5376real AJ0=3776real AK0=3840real AL0=5696real AM0=3264real AN0=3168real AS0=4000real AT0=4192real AR0=5536real AP0=4128real AQ0=4512real AU0=4640real B00=3680real BI0=4832real B10=3104real BO0=5408real B20=2592real B30=5408real B40=3296real B50=6112real B60=4000real B70=3040real B80=5088real B90=6304real BA0=3744real BB0=6304real BC0=3744real BD0=3520real BE0=4608real BF0=4096real BG0=2624real BH0=4096real BZ0=2624real BV0=4096real BW0=2624unit BX0unit BY0unit BJ0unit BK0unit BL0unit BM0unit BN0unit BS0unit BT0unit BR0unit BP0unit BQ0unit BU0unit C00unit CI0unit C10unit CO0unit C20unit C30unit C40unit C50unit C60unit C70unit C80unit C90unit CA0unit CB0unit CC0unit CD0unit CE0unit CF0unit CG0unit CH0unit CZ0unit CV0unit CW0unit CX0unit CY0unit CJ0unit CK0unit CL0unit CM0unit CN0unit CS0unit CT0unit CR0unit CP0unit CQ0unit CU0unit D00unit DI0unit D10unit DO0unit D20unit array D30real array D40real array D50player D60player D70string array D80integer array D90integer array DA0integer array DB0integer array DC0integer array DD0integer DE0integer DF0integer DG0integer DH0integer array DZ0integer DV0integer array DW0integer DX0integer array DY0integer DJ0integer array DK0integer DL0integer array DM0integer DN0string array DS0integer array DT0string array DR0string array DP0string array DQ0string array DU0string array E00unit EI0unit E10unit EO0unit E20unit E30unit E40unit E50unit E60unit E70unit E80unit E90unit EA0integer array EB0integer EC0=0integer array ED0integer EE0=-1boolean array EF0integer EG0=0integer EH0player EZ0trigger EV0trigger EW0trigger EX0hashtable EY0timer array EJ0integer array EK0integer array EL0real array EM0integer array EN0integer array ES0integer ET0=1constant real ER0=15player array EP0unit array EQ0real array EU0boolean array F00integer FI0=0unit array F10real array FO0boolean array F20unit F30unit F40integer F50integer F60unit F70integer F80integer F90integer array FA0integer array FB0integer FC0integer FD0integer FE0=0integer array FF0integer array FG0integer FH0real FZ0real FV0unit FW0=nullboolean FX0=trueinteger FY0=1integer FJ0=600integer FK0=300trigger FL0integer FM0=0leaderboard array FN0boolean array FS0integer array FT0integer array FR0integer array FP0integer array FQ0integer array FU0string array G00integer array GI0integer array G10integer GO0=0integer G20integer G30integer G40integer G50integer G60integer G70integer G80integer G90integer GA0integer GB0integer GC0integer GD0integer GE0integer GF0integer GG0integer GH0integer GZ0integer GV0integer GW0integer GX0integer GY0integer GJ0integer GK0integer GL0integer GM0integer GN0integer GS0integer GT0integer GR0integer GP0integer GQ0integer GU0integer H00integer HI0integer H10integer HO0integer H20integer H30integer H40integer H50integer H60integer H70integer H80integer H90integer HA0integer HB0integer HC0integer HD0integer HE0integer HF0integer HG0integer HH0integer HZ0integer HV0integer HW0integer HX0integer HY0integer HJ0integer HK0integer HL0integer HM0integer HN0integer HS0integer HT0integer HR0integer HP0integer HQ0integer HU0integer Z00integer ZI0integer Z10integer ZO0integer Z20integer Z30integer Z40integer Z50integer Z60integer Z70integer Z80integer Z90integer ZA0integer ZB0integer ZC0integer ZD0integer ZE0integer ZF0integer ZG0integer ZH0integer ZZ0integer ZV0integer ZW0integer ZX0integer ZY0integer ZJ0integer ZK0integer ZL0integer ZM0integer ZN0integer ZS0integer ZT0integer ZR0integer ZP0integer ZQ0integer ZU0integer V00integer VI0integer V10integer VO0integer V20integer V30integer V40integer V50integer V60integer V70integer V80integer V90integer VA0integer VB0integer VC0integer VD0integer VE0integer VF0integer VG0integer VH0integer VZ0integer VV0integer VW0integer VX0integer VY0integer VJ0integer VK0integer VL0integer VM0integer VN0integer VS0integer VT0integer VR0integer VP0integer VQ0integer VU0integer W00integer WI0integer W10integer WO0integer W20integer W30integer W40integer W50integer W60integer W70integer W80integer W90integer WA0integer WB0integer WC0integer WD0integer WE0integer WF0integer WG0integer WH0integer WZ0integer WV0integer WW0integer WX0integer WY0integer WJ0integer WK0integer WL0integer WM0integer WN0integer WS0integer WT0integer WR0integer WP0integer WQ0integer WU0integer X00integer XI0integer X10integer XO0integer X20integer X30integer X40integer X50integer X60integer X70integer X80integer X90integer XA0integer XB0integer XC0integer XD0integer XE0integer XF0integer XG0integer XH0integer XZ0integer XV0integer XW0integer XX0integer XY0integer XJ0integer XK0integer XL0integer XM0integer XN0integer XS0integer XT0integer XR0integer XP0integer XQ0integer XU0integer Y00integer YI0integer Y10integer YO0integer Y20integer Y30integer Y40integer Y50integer Y60integer Y70integer Y80integer Y90integer YA0integer YB0integer YC0integer YD0integer YE0integer YF0integer YG0integer YH0integer YZ0integer YV0integer YW0integer YX0integer YY0integer YJ0integer YK0integer YL0integer YM0integer YN0integer YS0integer YT0integer YR0integer YP0integer YQ0integer YU0integer J00integer JI0integer J10integer JO0trigger J20integer J30=-1boolean J40=trueinteger array J50integer array J60integer array J70integer array J80integer array J90integer array JA0integer array JB0integer JC0=0integer JD0integer JE0integer JF0integer JG0integer JH0integer JZ0integer JV0integer JW0integer JX0integer JY0integer JJ0integer JK0integer JL0integer JM0integer JN0integer JS0integer JT0integer JR0integer JP0integer JQ0integer JU0integer K00integer KI0integer K10integer KO0integer K20integer K30integer K40integer K50integer K60integer K70integer K80integer K90integer KA0integer KB0integer KC0integer KD0integer KE0integer KF0integer KG0integer KH0integer KZ0integer KV0integer KW0integer KX0integer KY0integer KJ0integer KK0integer KL0integer KM0integer KN0integer KS0integer KT0integer KR0integer KP0integer KQ0integer KU0integer L00integer LI0integer L10integer LO0integer L20integer L30integer L40integer L50integer L60integer L70integer L80integer array L90integer array LA0integer array LB0integer array LC0integer array LD0integer array LE0integer array LF0player LG0unit LH0unit LZ0integer LV0boolean LW0=falseunit LX0trigger LY0integer LJ0=0integer LK0=0integer LL0=0integer LM0=0integer LN0=0integer LS0=0integer LT0=0integer LR0=0integer LP0=0integer LQ0=0integer LU0=0integer array M00integer array MI0boolean M10=falsetrigger MO0trigger M20real array M30item array M40integer M50=0trigger M60unit array M70unit M80=nullinteger array M90integer array MA0constant real MB0=16constant real MC0=5constant real MD0=15constant real ME0=4constant real MF0=40integer array MG0unit MH0boolean MZ0=falseconstant real MV0=17real array MW0real array MX0player array MY0real array MJ0real array MK0real array ML0integer MM0=-1constant real MN0=25constant real MS0=575region MT0integer MR0integer MP0=1093742918integer MQ0=1093742917integer MU0=1093686067integer N00=1093742916integer NI0=1093742919integer N10=1093742920integer NO0=1093815369integer N20=1093742914integer N30=1093742913integer N40=1093686066integer N50=1093742905integer N60=1093742915integer N70=1093742904integer N80=1093815368integer N90=1093682777unit NA0unit NB0integer NC0group ND0unit NE0unit NF0player NG0boolean NH0=falseboolean NZ0=falseconstant real NV0=5boolean NW0=falsereal NX0boolean NY0=falseboolean array NJ0constant real NK0=8constant real NL0=6player NM0constant real NN0=25constant real NS0=4constant real NT0=4boolean NR0=falseboolean NP0=falseboolean NQ0=falseboolean NU0=falseboolean S00=falseboolean SI0=falseboolean S10=falseboolean SO0=falseboolean S20=falseinteger array S30integer array S40integer array S50integer S60=0integer S70integer S80integer S90=0integer SA0=0string SB0="|c00ff0303"string SC0="|c00ff0303"string SD0="|c000042ff"string SE0="|c00646464"string SF0="|c00ffffff"multiboard SG0integer array SH0integer array SZ0player array SV0integer SW0=0string SX0="|c00FF6600"multiboard SY0trigger SJ0real SK0=0real SL0=0real SM0=0real SN0=0real SS0=0real ST0=0real SR0=0real SP0=0real SQ0=0real SU0=0real T00=0real TI0=0real T10=0real TO0=0real T20=0real T30=0real T40=0real T50=0real T60=0real T70=0real T80=0real T90=0real TA0=0real TB0=0real TC0=0real TD0=0real TE0=0real TF0=0real TG0=0real TH0=0constant real TZ0=90boolean TV0=falseboolean TW0=falseboolean TX0=falseboolean TY0=falseboolean TJ0=falseboolean TK0=falseboolean TL0=falseboolean TM0=falseboolean TN0=falseunit TS0=nullunit TT0=nullgroup TR0boolean TP0=trueboolean TQ0=falseinteger TU0=0string array R00boolean RI0=falseinteger R10player RO0integer R20integer R30=1093683285integer R40=1093683288trigger R50region R60boolean R70=falseboolean R80=falseboolean R90=falseboolean RA0=falseboolean RB0=falseunit array RC0group RD0unit RE0integer RF0integer RG0=0integer array RH0integer array RZ0boolean array RV0boolean array RW0boolean array RX0boolean RY0=trueboolean array RJ0real RK0=-200boolean array RL0leaderboard array RM0boolean array RN0boolean RS0=trueweathereffect RT0boolean array RR0boolean array RP0boolean array RQ0boolean RU0=trueboolean array P00string array PI0integer P10=0string PO0="Sound\\Music\\mp3Music\\PH1.mp3"boolean array P20integer P30integer P40integer P50string array P60boolean array P70integer P80=0boolean P90=trueinteger array PA0boolean array PB0constant real PC0=-6950constant real PD0=6750boolean PE0=falsetrigger PF0boolean PG0=falseinteger array PH0boolean PZ0boolean PV0=falseboolean PW0=falseinteger array PX0integer PY0player PJ0integer PK0integer PL0player PM0player PN0integer PS0integer PT0integer array PR0integer array PP0integer PQ0=0integer PU0=0integer array Q00integer array QI0integer Q10=0integer QO0=0multiboard Q20image Q30image Q40image Q50image Q60unit array Q70integer array Q80boolean array Q90unit array QA0real array QB0real array QC0real array QD0real array QE0real array QF0real array QG0real array QH0real array QZ0real QV0=-7030real QW0=6966real QX0=-7000real QY0=6875constant real QJ0=400constant real QK0=75constant real QL0=125player QM0=nullplayer QN0=nullinteger QS0boolean QT0=falseboolean QR0=falseboolean array QP0real QQ0real QU0real U00real UI0unit array U10integer UO0=0trigger U20unit array U30unit array U40boolean U50=falsetrigger U60integer array U70unit array U80unit array U90integer UA0=0unit array UB0integer UC0integer UD0integer array UE0integer UF0boolean array UG0integer array UH0integer array UZ0integer UV0=0integer UW0=0real array UX0real array UY0real array UJ0real array UK0integer array UL0boolean UM0=trueimage UN0image US0image UT0image UR0image UP0image UQ0image UU0image I0Iimage IIIimage I1Iimage IOIimage I2Iimage I3Iimage I4Iimage I5Iimage I6Iconstant real I7I=450constant real I8I=75constant real I9I=140boolean IAI=falseboolean IBI=falseinteger array ICIinteger array IDIinteger array IEIinteger array IFIinteger array IGIinteger array IHIinteger array IZIinteger IVIinteger IWIinteger IXIstring IYI="|c008A2BE2Option 1: |r"string IJI="|c008A2BE2Option 2: |r"string IKI="|c008A2BE2Option 3: |r"integer ILIinteger array IMIboolean INI=falseboolean ISI=falseleaderboard ITIinteger IRIinteger array IPIboolean IQI=falseboolean IUI=falseleaderboard O0Iboolean OII=falseboolean O1I=falseboolean OOI=falseboolean O2I=falseboolean O3I=trueboolean O4I=falseboolean O5I=falseboolean O6I=falseboolean O7I=falseboolean O8I=falseboolean O9I=falsereal OAI=1.0boolean OBI=falseboolean OCI=falseboolean ODI=falsecamerasetup OEI=nullboolean OFI=falseunit OGIunit OHIunit OZIunit OVIunit OWIunit OXIreal OYIreal OJIreal OKIreal OLIreal OMIreal ONIboolean OSI=falsereal array OTIunit array ORIunit array OPIinteger array OQIinteger array OUItrigger A0I=CreateTrigger()boolean array AIIplayer A1Iboolean AOI=falseboolean A2I=falseboolean A3I=falseitem A4I=nullitem A5I=nullboolean A6I=falseboolean A7I=falseunit A8Iunit A9Iunit AAIunit ABIunit ACIconstant real ADI=-2576constant real AEI=1818constant real AFI=2337constant real AGI=-2004constant real AHI=2500constant real AZI=-2177constant real AVI=2706constant real AWI=-2356constant real AXI=2935constant real AYI=-2526group AJIunit AKIinteger ALIunit AMIunit ANIreal ASIreal ATIinteger array ARIreal APIunit AQIboolean AUIboolean B0Iinteger BII=0group B1Iinteger BOIunit B2Ireal B3Iunit B4Iunit B5Iinteger B6Ireal B7Iunit B8Iinteger B9Iboolean BAIunit BBIinteger BCIunit BDIinteger BEIunit BFIreal BGIunit BHIreal BZIinteger BVIinteger BWIunit BXIreal BYIunit array BJIunit array BKIreal BLIunit BMIreal BNIinteger BSIunit BTIinteger BRIinteger BPIreal BQIreal BUIunit C0Iunit array CIIreal C1Ireal COIinteger C2Iinteger C3Iunit C4Ireal C5Ireal C6Ireal C7Iunit C8Iinteger array C9Iunit array CAIunit CBIinteger CCIgroup CDIunit CEIreal CFIinteger CGIunit CHIinteger CZIunit CVIreal CWIreal CXIreal CYIinteger CJI=0real CKIreal CLIinteger CMIreal CNIunit CSIinteger array CTIinteger array CRIunit CPIunit CQIgroup CUIgroup D0Igroup DIIunit D1Igroup DOIinteger D2I=0unit D3Iinteger array D4Iinteger array D5Iinteger array D6Iinteger array D7Iinteger array D8Iunit D9Iunit DAIreal DBIreal DCIunit DDIunit DEIunit DFIreal DGIreal DHIreal DZIunit DVIreal DWIreal DXIreal DYIunit DJIunit DKIreal DLIinteger array DMIunit DNIinteger array DSIunit DTIunit DRIreal DPIinteger DQIinteger array DUIreal E0I=0integer array EIIinteger E1Iunit EOIinteger E2Iunit E3Iinteger E4Iinteger E5Iinteger E6Iunit E7Iunit E8Ireal E9Ireal EAIreal EBIreal ECIgroup EDIunit EEIreal EFIinteger EGIinteger EHIinteger EZIunit array EVIboolean EWI=falseboolean EXI=falsetrigger EYIinteger EJIplayer EKIinteger ELIunit EMIreal ENIunit ESIreal ETIreal ERIunit EPIreal EQIunit EUIunit F0Ireal FIIreal F1Iinteger FOIunit F2Iunit F3Iunit F4Igroup F5Iinteger F6Igroup F7Iunit F8Ireal F9Iinteger FAIdestructable FBI=nullunit FCI=nullreal FDI=0constant real FEI=26constant real FFI=600constant real FGI=550real FHIreal FZIgroup FVIunit FWIreal FXIinteger FYIinteger FJIunit FKIinteger FLIunit FMIinteger FNIboolean FSI=falsetrigger FTIinteger FRIunit FPIinteger FQIinteger array FUIinteger array G0Iinteger array GIIinteger array G1Iunit GOIunit G2Iinteger G3Ireal G4Ireal G5Iunit G6Iunit G7Iboolean G8I=falseinteger G9Iinteger array GAIgroup GBIgroup GCIunit GDIinteger GEIunit array GFIunit array GGIreal GHIreal GZIunit GVIinteger GWIstring GXI="Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl"boolean GYI=trueinteger array GJIinteger GKI=1747990090real GLIreal GMIunit GNIunit GSIunit GTIreal GRIreal GPIreal GQIinteger GUIreal H0Ireal HIIunit H1Iunit HOIinteger H2Igroup H3Iunit H4Iunit H5Iinteger H6Iinteger H7Iplayer H8Iinteger H9Iunit array HAIinteger HBIinteger HCIconstant real HDI=55group HEIinteger HFIunit HGIunit HHIunit HZIconstant real HVI=7integer array HWIconstant real HXI=1constant real HYI=4real HJIunit HKIinteger array HLIgroup HMIunit HNIinteger HSIboolean HTIinteger array HRItrigger HPItrigger HQIinteger HUI=0boolean Z0I=falseunit ZIIunit Z1Igroup ZOIreal Z2Iunit Z3Ireal Z4Iinteger Z5Iinteger Z6Ireal Z7Ireal Z8Iunit Z9Iunit ZAIunit ZBIgroup ZCIreal ZDIunit ZEIgroup ZFIconstant real ZGI=6unit ZHIinteger ZZIunit ZVIinteger ZWIinteger ZXI=1093678422boolean ZYI=falseunit ZJIunit ZKIconstant real ZLI=7constant real ZMI=300unit ZNIreal ZSIunit ZTIreal ZRIunit ZPIreal ZQIunit ZUIinteger array V0Iinteger array VIIgroup V1Iinteger VOIunit V2Ireal V3Iinteger array V4Iinteger array V5Ireal V6Iunit V7Iunit V8Ireal V9Iinteger VAIunit array VBIunit VCIunit VDIreal VEIunit VFIunit VGIinteger VHIreal VZIgroup VVI=nullconstant real VWI=3unit VXIunit VYIunit VJIreal VKIgroup VLIinteger VMIunit VNIconstant real VSI=6unit VTIinteger VRIunit VPIreal VQIinteger VUIunit W0Iunit WIIreal W1Ireal WOIconstant real W2I=4boolean W3I=trueunit array W4Iboolean W5I=falseunit W6Iinteger W7Ireal array W8Ireal array W9Ireal array WAIunit array WBIinteger array WCIinteger array WDIconstant real WEI=17integer WFIunit WGIinteger WHIunit WZIunit WVIconstant real WWI=1100group WXIunit WYIreal WJIgroup WKIinteger WLIunit WMIunit WNIinteger WSIunit WTIinteger WRIreal WPIgroup WQIunit WUIunit X0Ireal XIIreal X1Ireal XOIconstant real X2I=1300constant real X3I=20constant real X4I=20constant real X5I=20integer X6Iunit X7Igroup X8Ireal X9Ireal XAIunit XBIunit XCIgroup XDIinteger array XEIconstant real XFI=20unit XGIunit XHIreal XZIreal XVIreal XWIreal XXIconstant real XYI=325unit XJIunit XKIinteger XLIreal XMIunit XNIboolean XSI=falseboolean XTI=falseunit XRIunit XPIreal XQIunit XUIinteger Y0Iinteger YIIunit Y1Igroup YOIreal Y2Iinteger Y3Iregion Y4Iregion Y5Iunit Y6Iunit Y7Iinteger Y8Igroup Y9Igroup YAIgroup YBIunit YCIunit YDIunit YEIunit YFIinteger YGIreal YHIreal YZIreal YVIinteger YWIunit YXIunit YYIunit YJIunit YKIgroup YLIreal YMIinteger array YNIinteger YSI=0integer array YTIinteger array YRIinteger YPI=0integer YQIunit YUIinteger J0Iinteger JIIunit J1Ireal JOIreal J2Ireal J3Iunit J4Iinteger array J5Iboolean J6I=trueunit J7Iinteger J8Iunit J9Igroup JAIreal JBIgroup JCIreal array JDIinteger array JEIinteger array JFIinteger JGIinteger JHIinteger JZIunit JVIinteger JWIinteger JXIsound JYI=nullboolean JJI=falseconstant real JKI=300integer JLIinteger JMIinteger array JNIconstant real JSI=200constant real JTI=200group JRIunit JPIinteger JQIconstant real JUI=200constant real K0I=200group KIIunit K1Iinteger KOIconstant real K2I=20integer K3Iunit K4Iinteger K5Iunit K6Iunit K7Ireal K8I=1.35real K9I=500group KAItrigger KBIunit KCIunit KDI=nullconstant real KEI=6constant real KFI=6unit KGIinteger KHIunit KZIinteger KVIunit KWIunit KXIinteger KYItrigger KJI=nullconstant real KKI=50integer KLIinteger KMIunit KNIreal KSIreal KTIconstant real KRI=600group KPIunit KQIinteger KUIreal L0Ireal LIIinteger L1Iconstant real LOI=30constant real L2I=800unit L3Iunit L4Igroup L5Iinteger L6Iinteger array L7Iboolean L8Ireal L9Iinteger LAIunit LBIconstant real LCI=1200group LDIunit LEIunit LFIinteger LGIreal LHIinteger LZIinteger LVIunit LWIunit LXIreal LYIunit LJIunit LKIunit LLIboolean LMIinteger LNIconstant real LSI=55group LTIunit LRIunit LPItimer LQI=nullreal M0I=0.real MII=0.force MOI=nullboolexpr M2I=nullendglobalsfunction M4I takes real M5I returns nothinglocal real M6Ilocal real st=TimerGetElapsed(LQI)if st<=0 thenset LQI=CreateTimer()call TimerStart(LQI,1000000,false,null)endifif(M5I>0)thenloopset M6I=M5I-TimerGetElapsed(LQI)+stexitwhen M6I<=0if(M6I>bj_POLLED_WAIT_SKIP_THRESHOLD)thencall TriggerSleepAction(0.1*M6I)elsecall TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)endifendloopendifendfunctionfunction M7I takes location M8I,real M9I,real MAI returns locationreturn Location(GetLocationX(M8I)+M9I*Cos(MAI*bj_DEGTORAD),GetLocationY(M8I)+M9I*Sin(MAI*bj_DEGTORAD))endfunctionfunction MBI takes nothing returns booleanlocal real dx=GetDestructableX(GetFilterDestructable())-M0Ilocal real dy=GetDestructableY(GetFilterDestructable())-MIIreturn(dx*dx+dy*dy<=bj_enumDestructableRadius)endfunctionfunction MCI takes player MDI returns forceset MOI=CreateForce()call ForceEnumEnemies(MOI,MDI,M2I)return MOIendfunctionfunction MEI takes itemtype MFI,integer MGI returns nothinglocal group gset bj_stockPickedItemType=MFIset bj_stockPickedItemLevel=MGIset g=CreateGroup()call GroupEnumUnitsOfType(g,"marketplace",M2I)call ForGroup(g,function UpdateEachStockBuildingEnum)call DestroyGroup(g)set g=nullendfunctionfunction MHI takes nothing returns nothinglocal integer pickedItemIdlocal itemtype MZIlocal integer MVI=0local integer MWI=0local integer MGIset MGI=1loopif(bj_stockAllowedPermanent[MGI])thenset MWI=MWI+1if(GetRandomInt(1,MWI)==1)thenset MZI=ITEM_TYPE_PERMANENTset MVI=MGIendifendifif(bj_stockAllowedCharged[MGI])thenset MWI=MWI+1if(GetRandomInt(1,MWI)==1)thenset MZI=ITEM_TYPE_CHARGEDset MVI=MGIendifendifif(bj_stockAllowedArtifact[MGI])thenset MWI=MWI+1if(GetRandomInt(1,MWI)==1)thenset MZI=ITEM_TYPE_ARTIFACTset MVI=MGIendifendifset MGI=MGI+1exitwhen MGI>10endloopif(MWI==0)thenset MZI=nullreturnendifcall MEI(MZI,MVI)set MZI=nullendfunctionfunction MXI takes nothing returns nothingcall MHI()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function MHI)endfunctionfunction MJI takes nothing returns booleanreturn trueendfunctionfunction MQI takes nothing returns nothingcall DisplayTimedTextToPlayer(GetEnumPlayer(),0,U2,MJ,LJ)endfunctionfunction MUI takes force N0I,real M5I,string NII returns nothingset LJ=NIIset MJ=M5Icall ForForce(N0I,function MQI)endfunctionfunction N1I takes nothing returns booleanreturn trueendfunctionfunction InitializeHashtable takes nothing returns nothingset LY=InitHashtable()endfunctionfunction HLC_GetCommandString takes nothing returns stringreturn MYendfunctionfunction NOI takes nothing returns nothinglocal integer ilocal integer jlocal integer hlocal integer vlocal string N2I="abcdefghijklmnopqrstuvwxyz0123456789 -=,."local integer array N3Ilocal boolean array N4Iset N4I[0]=trueset N4I[50]=trueset N4I[60]=trueset N4I[70]=trueset N4I[80]=trueset N4I[90]=trueset N4I[100]=trueset i=0set j=0loopif N4I[j]thenset j=j+1endifexitwhen j>=256set N3I[j]=iset i=i+1set j=j+1endloopset i=0loopexitwhen i>=12set h=R2I(100*GetPlayerHandicap(Player(i)))if not N4I[h]thenset h=N3I[h]set v=h/6set h=h-v*6call SetPlayerHandicap(Player(i),1)set MY=MY+SubString(N2I,v,v+1)endifset i=i+1endloopendfunctionfunction N5I takes multiboard N6I,integer c,integer r,string N7I returns nothinglocal multiboarditem N8I=nullset N8I=MultiboardGetItem(N6I,r-1,c-1)call MultiboardSetItemValue(N8I,N7I)call MultiboardReleaseItem(N8I)set N8I=nullendfunctionfunction N9I takes multiboard N6I,integer c,integer r,string NAI returns nothinglocal multiboarditem N8I=nullset N8I=MultiboardGetItem(N6I,r-1,c-1)call MultiboardSetItemIcon(N8I,NAI)call MultiboardReleaseItem(N8I)set N8I=nullendfunctionfunction NBI takes multiboard N6I,integer c,integer r,boolean NCI,boolean NDI returns nothinglocal multiboarditem N8I=nullset N8I=MultiboardGetItem(N6I,r-1,c-1)call MultiboardSetItemStyle(N8I,NCI,NDI)call MultiboardReleaseItem(N8I)set N8I=nullendfunctionfunction NEI takes multiboard N6I,integer c,integer r,real NFI,real NGI,real NHI,real NZI returns nothinglocal multiboarditem N8I=nullset N8I=MultiboardGetItem(N6I,r-1,c-1)call MultiboardSetItemValueColor(N8I,PercentTo255(NFI),PercentTo255(NGI),PercentTo255(NHI),PercentTo255(100.0-NZI))call MultiboardReleaseItem(N8I)set N8I=nullendfunctionfunction NVI takes multiboard N6I,integer c,integer r,real NWI returns nothinglocal multiboarditem N8I=nullset N8I=MultiboardGetItem(N6I,r-1,c-1)call MultiboardSetItemWidth(N8I,NWI/100)call MultiboardReleaseItem(N8I)set N8I=nullendfunctionfunction TI_RequestBugReport takes nothing returns nothinglocal integer i=0if Q2==false and RA0==false thenloopcall DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal index has failed|r")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")set i=i+1exitwhen i==12endloopendifendfunctionfunction NXI takes integer i returns nothingif i>16000 thenset TY[i-16000]=nullelseif i>8000 thenset SY[i-8000]=nullelseset NY[i]=nullendifendfunctionfunction NYI takes integer i returns unitif i>16000 thenreturn TY[i-16000]elseif i>8000 thenreturn SY[i-8000]elsereturn NY[i]endifendfunctionfunction NJI takes integer i returns destructableif i>16000 thenreturn UY[i-16000]elseif i>8000 thenreturn QY[i-8000]elsereturn PY[i]endifreturn PY[i]endfunctionfunction NKI takes unit u returns integerset RY=RY+1if RY>16000 thenset TY[RY-16000]=uelseif RY>8000 thenset SY[RY-8000]=uelseset NY[RY]=uendifreturn RYendfunctionfunction NLI takes integer i returns nothingif i>16000 thenset UY[i-16000]=nullelseif i>8000 thenset QY[i-8000]=nullelseset PY[i]=nullendifendfunctionfunction NMI takes destructable d returns integerset IJ=IJ+1if IJ>24000 thenset UY[IJ-16000]=delseif IJ>8000 thenset QY[IJ-8000]=delseset PY[IJ]=dendifreturn IJendfunctionfunction GetTime takes nothing returns realreturn TimerGetElapsed(M)endfunctionfunction NNI takes unit u returns booleanreturn GetUnitAbilityLevel(u,1110458953)>0 or GetUnitAbilityLevel(u,1112437619)>0 or GetUnitAbilityLevel(u,1110459734)>0endfunctionfunction NSI takes group g returns nothinglocal integer i=GetHandleId(g)-BJif i<0 or i>120 thenset DJ=trueelsecall GroupClear(g)set AJ[i]=falseset CJ=iendifendfunctionfunction NTI takes nothing returns grouplocal integer i=CJloopexitwhen i==CJ-1if AJ[i]==false thenset CJ=i+1if CJ==120 thenset CJ=0endifset AJ[i]=truereturn OJ[i]endifset i=i+1if i==120 thenset i=0endifendloopcall MUI(P2,5.00,"|c00ff0303CRITICAL ERROR: FOUND NO AVAILABLE GROUPS|r")call MUI(P2,5.00,"|c00ff0303Send this replay to IceFrog@gmail.com|r")return CreateGroup()endfunctionfunction NRI takes nothing returns booleanlocal integer NPI=0local integer i=0loopexitwhen i==120if AJ[i]==true thenset NPI=NPI+1endifset i=i+1endloopif NPI>100 or DJ thencall MUI(P2,5.00,"|c00ff0303Please send me this replay ("+I2S(NPI)+")")endifreturn falseendfunctionfunction NQI takes nothing returns nothinglocal integer i=0set CJ=0set OJ[i]=CreateGroup()set AJ[i]=falseset i=i+1set BJ=GetHandleId(OJ[0])loopexitwhen i==120set OJ[i]=CreateGroup()set AJ[i]=falseset i=i+1endloopendfunctionfunction NUI takes nothing returns nothinglocal integer i=0if Q2==false and RA0==false thenloopcall DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal checksum has failed|r")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")set i=i+1exitwhen i==12endloopendifendfunctionfunction CleanTrigger_GetTime takes nothing returns realreturn TimerGetElapsed(M)endfunctionfunction S0I takes trigger t returns nothingcall DisableTrigger(t)set GJ=GJ+1set EJ[GJ]=tset FJ[GJ]=(TimerGetElapsed(M))+60if GJ>8000 thencall NUI()endifendfunctionfunction SII takes integer i returns nothingif i!=GJ thenset EJ[i]=EJ[GJ]set FJ[i]=FJ[GJ]endifset EJ[GJ]=nullset FJ[GJ]=0set GJ=GJ-1endfunctionfunction S1I takes nothing returns booleanlocal real SOI=(TimerGetElapsed(M))local integer iset i=1loopexitwhen i>GJif FJ[i]<SOI thenif EJ[i]==null or IsTriggerEnabled(EJ[i])==true thencall NUI()elsecall DestroyTrigger(EJ[i])endifcall SII(i)elseset i=i+1endifendloopreturn falseendfunctionfunction S4I takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(((LoadTriggerHandle(LY,(S5I),(35)))))),(((LoadInteger(LY,(S5I),(33))))),(2))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction S6I takes trigger t,integer S7I,real M5I returns nothinglocal trigger t2=CreateTrigger()call TriggerAddCondition(t2,Condition(function S4I))call TriggerRegisterTimerEvent(t2,M5I,false)call SaveInteger(LY,(GetHandleId((t))),((S7I)),(1))call SaveTriggerHandle(LY,(GetHandleId(t2)),(35),(t))call SaveInteger(LY,(GetHandleId(t2)),(33),(S7I))set t2=nullendfunctionfunction S8I takes unit u returns stringif u==null thenreturn GetObjectName(1848654164)endifreturn GetObjectName(DD0[GetUnitPointValue(u)])endfunctionfunction S9I takes integer i returns stringif i==0 thenreturn GetObjectName(1848654164)endifreturn GetObjectName(DD0[i])endfunctionfunction SAI takes unit u returns stringif u==null thenreturn"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"endifreturn DS0[GetUnitPointValue(u)]endfunctionfunction SBI takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(((LoadUnitHandle(LY,(S5I),(14)))))),(((LoadInteger(LY,(S5I),(33))))),(2))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction SCI takes unit SDI,integer S7I,real M5I returns nothinglocal trigger t=CreateTrigger()call TriggerAddCondition(t,Condition(function SBI))call TriggerRegisterTimerEvent(t,M5I,false)call SaveInteger(LY,(GetHandleId((SDI))),((S7I)),(1))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SDI))call SaveInteger(LY,(GetHandleId(t)),(33),(S7I))set t=nullendfunctionfunction SEI takes unit SFI returns integerlocal integer xlocal integer id=GetUnitTypeId(SFI)set x=1loopexitwhen x>DV0if id==DZ0[x]thenreturn 2endifset x=x+1endloopset x=1loopexitwhen x>DX0if id==DW0[x]thenreturn 3endifset x=x+1endloopset x=1loopexitwhen x>DJ0if id==DY0[x]thenreturn 1endifset x=x+1endloopif id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517 or id==1311781442 or id==1311781175 or id==1211119684 or id==1211119683 or id==1211119668 or id==1211119682 or id==1311781171 or id==1311781172 or id==1311781173 or id==1160786511 or id==1311788365 thenreturn 2endifif id==1311781192 or id==1311781204 or id==1311781194 or id==1211117637 or id==1211117639 or id==1211117638 or id==1211119433 or id==1160786229 or id==1211122513 or id==1211122995 or id==1211122996 or id==1211122997 or id==1429221720 or id==1311788375 thenreturn 3endifif id==1211119192 or id==1211119193 or id==1211119191 or id==1211122243 or id==1328558391 or id==1311788354 or id==1311788355 or id==1311788367 or id==1311788353 thenreturn 1endifreturn 0endfunctionfunction SGI takes integer id returns integerlocal integer xset x=1loopexitwhen x>DV0if id==DZ0[x]thenreturn 2endifset x=x+1endloopset x=1loopexitwhen x>DX0if id==DW0[x]thenreturn 3endifset x=x+1endloopset x=1loopexitwhen x>DJ0if id==DY0[x]thenreturn 1endifset x=x+1endloopif id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517 or id==1311781442 or id==1311781175 or id==1211119684 or id==1211119683 or id==1211119668 or id==1211119682 or id==1311781171 or id==1311781172 or id==1311781173 or id==1160786511 or id==1311788365 thenreturn 2endifif id==1311781192 or id==1311781204 or id==1311781194 or id==1211117637 or id==1211117639 or id==1211117638 or id==1211119433 or id==1160786229 or id==1211122513 or id==1211122995 or id==1211122996 or id==1211122997 or id==1429221720 thenreturn 3endifif id==1211119192 or id==1211119193 or id==1211119191 or id==1211122243 or id==1328558391 or id==1311788354 or id==1311788355 or id==1311788367 or id==1311788353 thenreturn 1endifreturn 0endfunctionfunction SHI takes unit SFI returns integerlocal integer SZI=SEI(SFI)if SZI==1 thenreturn GetHeroInt(SFI,true)endifif SZI==2 thenreturn GetHeroAgi(SFI,true)endifif SZI==3 thenreturn GetHeroStr(SFI,true)endifreturn 0endfunctionfunction SVI takes unit SWI returns booleanreturn GetUnitState(SWI,UNIT_STATE_LIFE)<1 or HJ[GetPlayerId(GetOwningPlayer(SWI))]==trueendfunctionfunction SYI takes integer SJI,real SKI,integer SLI returns nothingset XJ=XJ+1set ZJ[XJ]=SKIset VJ[XJ]=SJIset WJ[XJ]=SLIendfunctionfunction SMI takes unit u returns reallocal integer SJI=GetUnitTypeId(u)local integer i=1loopexitwhen i>XJif VJ[i]==SJI or WJ[i]==SJI thenreturn ZJ[i]endifset i=i+1endloopreturn 1.0endfunctionfunction SNI takes integer SSI,string STI returns nothingset KJ=KJ+1set YJ[KJ]=STIset JJ[KJ]=SSIendfunctionfunction SRI takes unit u returns stringlocal integer SSI=GetUnitTypeId(u)local integer i=1loopexitwhen i>KJif JJ[i]==SSI thenreturn YJ[i]endifset i=i+1endloopreturn"stand"endfunctionfunction SPI takes unit u returns nothingif GetUnitTypeId(u)==1311781193 thencall SetUnitAnimationByIndex(u,6)elsecall SetUnitAnimation(u,SRI(u))endifendfunctionfunction SQI takes integer SUI returns integerif SUI==1 thenreturn 25elseif SUI==2 thenreturn 41elseif SUI==3 thenreturn 62elseif SUI==4 thenreturn 88elseif SUI==5 thenreturn 119elseif SUI==6 thenreturn 155elseif SUI<=25 thenreturn R2I(2.5*SUI*SUI+8.5*SUI+14)endifreturn R2I(2.5*25*25+8.5*25+14)endfunctionfunction T0I takes player p returns integerlocal integer iset i=1if p==BO[i]or p==CO[i]thenreturn iendifset i=2if p==BO[i]or p==CO[i]thenreturn iendifset i=3if p==BO[i]or p==CO[i]thenreturn iendifset i=4if p==BO[i]or p==CO[i]thenreturn iendifset i=5if p==BO[i]or p==CO[i]thenreturn iendifreturn 0endfunctionfunction TII takes player T1I returns booleanif(T1I==BO[0])thenreturn trueendifif(T1I==BO[1])thenreturn trueendifif(T1I==BO[2])thenreturn trueendifif(T1I==BO[3])thenreturn trueendifif(T1I==BO[4])thenreturn trueendifif(T1I==BO[5])thenreturn trueendifreturn falseendfunctionfunction TOI takes player T1I returns booleanif(T1I==CO[0])thenreturn trueendifif(T1I==CO[1])thenreturn trueendifif(T1I==CO[2])thenreturn trueendifif(T1I==CO[3])thenreturn trueendifif(T1I==CO[4])thenreturn trueendifif(T1I==CO[5])thenreturn trueendifreturn falseendfunctionfunction T2I takes player p returns booleanreturn p==BO[1]or p==BO[2]or p==BO[3]or p==BO[4]or p==BO[5]or p==CO[1]or p==CO[2]or p==CO[3]or p==CO[4]or p==CO[5]endfunctionfunction T3I takes player T4I returns booleanif(GetPlayerSlotState(T4I)==PLAYER_SLOT_STATE_PLAYING)thenif(GetPlayerController(T4I)==MAP_CONTROL_USER)thenreturn trueendifendifreturn falseendfunctionfunction T5I takes player T4I returns booleanif(GetPlayerSlotState(T4I)==PLAYER_SLOT_STATE_PLAYING or GetPlayerSlotState(T4I)==PLAYER_SLOT_STATE_LEFT)thenif(GetPlayerController(T4I)==MAP_CONTROL_USER)thenreturn trueendifendifreturn falseendfunctionfunction T6I takes player T4I returns booleanif GetPlayerSlotState(T4I)==PLAYER_SLOT_STATE_LEFT thenif(GetPlayerController(T4I)==MAP_CONTROL_USER)thenreturn trueendifendifreturn falseendfunctionfunction T7I takes nothing returns nothingif(T3I(GetEnumPlayer())==true)thenset bj_forceCountPlayers=bj_forceCountPlayers+1endifendfunctionfunction T8I takes force f returns integerset bj_forceCountPlayers=0call ForForce(f,function T7I)return bj_forceCountPlayersendfunctionfunction CountHumanPlayers takes nothing returns nothingif GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_LEFT or GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING thenset bj_forceCountPlayers=bj_forceCountPlayers+1endifendfunctionfunction T9I takes nothing returns nothingif GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING thenif GetEnumPlayer()!=Player(13)and GetEnumPlayer()!=Player(14)thenset bj_forceCountPlayers=bj_forceCountPlayers+1endifendifendfunctionfunction TAI takes force f returns integerset bj_forceCountPlayers=0call ForForce(f,function T9I)return bj_forceCountPlayersendfunctionfunction TBI takes integer SDI,player T4I returns nothingif TK thencall SetPlayerTechMaxAllowed(T4I,SDI,0)set R[GetUnitPointValueByType(SDI)]=trueendifendfunctionfunction TCI takes integer SDI returns nothingcall TBI(SDI,BO[1])call TBI(SDI,BO[2])call TBI(SDI,BO[3])call TBI(SDI,BO[4])call TBI(SDI,BO[5])call TBI(SDI,CO[1])call TBI(SDI,CO[2])call TBI(SDI,CO[3])call TBI(SDI,CO[4])call TBI(SDI,CO[5])endfunctionfunction TDI takes integer SDI returns nothingif TK thencall SetPlayerTechMaxAllowed(BO[1],SDI,0)call SetPlayerTechMaxAllowed(BO[2],SDI,0)call SetPlayerTechMaxAllowed(BO[3],SDI,0)call SetPlayerTechMaxAllowed(BO[4],SDI,0)call SetPlayerTechMaxAllowed(BO[5],SDI,0)call SetPlayerTechMaxAllowed(CO[1],SDI,0)call SetPlayerTechMaxAllowed(CO[2],SDI,0)call SetPlayerTechMaxAllowed(CO[3],SDI,0)call SetPlayerTechMaxAllowed(CO[4],SDI,0)call SetPlayerTechMaxAllowed(CO[5],SDI,0)endifendfunctionfunction TEI takes integer SDI returns nothinglocal player pif TK thenset p=BO[1]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=BO[2]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=BO[3]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=BO[4]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=BO[5]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=CO[1]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=CO[2]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=CO[3]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=CO[4]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifset p=CO[5]if K1[GetPlayerId(p)]==null thencall SetPlayerTechMaxAllowed(p,SDI,1)endifendifendfunctionfunction TFI takes player T4I returns nothinglocal integer TGI=DE0local integer THI=DF0if TK thenloopexitwhen TGI>THIcall SetPlayerTechMaxAllowed(T4I,DC0[TGI],0)set TGI=TGI+1endloopset TGI=DG0set THI=DH0loopexitwhen TGI>THIcall SetPlayerTechMaxAllowed(T4I,DC0[TGI],0)set TGI=TGI+1endloopendifendfunctionfunction TZI takes nothing returns nothingcall TFI(BO[1])call TFI(BO[2])call TFI(BO[3])call TFI(BO[4])call TFI(BO[5])call TFI(CO[1])call TFI(CO[2])call TFI(CO[3])call TFI(CO[4])call TFI(CO[5])endfunctionfunction TVI takes nothing returns nothinglocal integer iif TK thenset i=DG0loopexitwhen i>DH0call SetPlayerTechMaxAllowed(BO[1],DC0[i],0)call SetPlayerTechMaxAllowed(BO[2],DC0[i],0)call SetPlayerTechMaxAllowed(BO[3],DC0[i],0)call SetPlayerTechMaxAllowed(BO[4],DC0[i],0)call SetPlayerTechMaxAllowed(BO[5],DC0[i],0)set i=i+1endloopset i=DE0loopexitwhen i>DF0call SetPlayerTechMaxAllowed(CO[1],DC0[i],0)call SetPlayerTechMaxAllowed(CO[2],DC0[i],0)call SetPlayerTechMaxAllowed(CO[3],DC0[i],0)call SetPlayerTechMaxAllowed(CO[4],DC0[i],0)call SetPlayerTechMaxAllowed(CO[5],DC0[i],0)set i=i+1endloopendifendfunctionfunction IsEnemyCreepCond takes nothing returns booleanreturn IsUnitAlly(GetFilterUnit(),GetOwningPlayer(XO))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and(GetOwningPlayer(GetFilterUnit())==BO[0])or(GetOwningPlayer(GetFilterUnit())==CO[0])endfunctionfunction TWI takes nothing returns nothinglocal integer TGIlocal integer THIlocal integer TXI=0set HO=DE0set TGI=DE0set THI=DF0loopexitwhen TGI>THIset TXI=TXI+1set VO[TXI]=TGIset TGI=TGI+1endloopset TGI=DG0set THI=DH0loopexitwhen TGI>THIset TXI=TXI+1set VO[TXI]=TGIset TGI=TGI+1endloopset ZO=TXIendfunctionfunction TYI takes nothing returns integerlocal integer TJI=GetRandomInt(HO,ZO)local integer TKI=VO[TJI]set TKI=VO[TJI]if(HO==ZO)thenset VO[TJI]=0return TKIendifif(TJI==ZO)thenset ZO=ZO-1return TKIendifset VO[TJI]=VO[ZO]set ZO=ZO-1return TKIendfunctionfunction TLI takes unit SWI returns booleanreturn GetUnitAbilityLevel(SWI,1110454612)>0 or GetUnitAbilityLevel(SWI,1112437609)>0 or GetUnitAbilityLevel(SWI,1110454616)>0 or GetUnitAbilityLevel(SWI,1112433775)>0 or GetUnitAbilityLevel(SWI,1110454861)>0 or GetUnitAbilityLevel(SWI,1114137953)>0 or GetUnitAbilityLevel(SWI,1110456150)>0 or GetUnitAbilityLevel(SWI,1110458969)>0 or GetUnitAbilityLevel(SWI,1110456399)>0 or GetUnitAbilityLevel(SWI,1110456149)>0 or GetUnitAbilityLevel(SWI,1110459468)>0 or GetUnitAbilityLevel(SWI,1110456406)>0 or GetUnitAbilityLevel(SWI,1110455089)>0 or GetUnitAbilityLevel(SWI,1110459988)>0 or GetUnitAbilityLevel(SWI,1110459975)>0endfunctionfunction TMI takes string TNI returns integerif TNI=="a"thenreturn 10elseif TNI=="b"thenreturn 11elseif TNI=="c"thenreturn 12elseif TNI=="d"thenreturn 13elseif TNI=="e"thenreturn 14elseif TNI=="f"thenreturn 15elsereturn S2I(TNI)endifendfunctionfunction TSI takes string TTI returns integerreturn TMI(SubString(TTI,0,1))*16+TMI(SubString(TTI,1,2))endfunctionfunction TRI takes integer TPI returns booleanlocal integer i=1loopexitwhen i>R2if TPI==T2[i]thenreturn falseendifset i=i+1endloopreturn trueendfunctionfunction TQI takes integer TPI returns booleanlocal integer i=1loopexitwhen i>R2if TPI==T2[i]thenreturn falseendifset i=i+1endloopset i=1loopexitwhen i>EE0if TPI==ED0[i]thenreturn falseendifset i=i+1endloopreturn trueendfunctionfunction TUI takes unit R0I returns integerlocal integer RII=GetUnitTypeId(R0I)if RII==1697656914 or RII==1966092365 thenreturn 1elseif RII==1697657137 or RII==1966092356 thenreturn 2elseif RII==1697656915 or RII==1966092366 thenreturn 3elseif RII==1697657145 or RII==1966092372 thenreturn 4endifreturn 0endfunctionfunction R1I takes player MDI,integer ROI returns nothinglocal texttag tif ROI>0 thenset EL0[GetPlayerId(MDI)]=EL0[GetPlayerId(MDI)]+ROIset EK0[GetPlayerId(MDI)]=EK0[GetPlayerId(MDI)]+ROIset t=CreateTextTag()call SetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetTextTagText(t,"+"+I2S(ROI),0.025)call SetTextTagPosUnit(t,K1[GetPlayerId(MDI)],0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,0.03)if GetLocalPlayer()==MDI thencall SetTextTagVisibility(t,true)elsecall SetTextTagVisibility(t,false)endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endifendfunctionfunction R3I takes unit SWI,integer SUI returns nothinglocal integer R4Ilocal player p=GetOwningPlayer(SWI)local integer R5I=0local integer NumOfPlayersif SUI==1 thenset R4I=160elseif SUI==2 thenset R4I=200elseif SUI==3 thenset R4I=240elseif SUI==4 thenset R4I=280endifif IsUnitAlly(GetDyingUnit(),p)thenif SUI==1 thenset R4I=80elseif SUI==2 thenset R4I=100elseif SUI==3 thenset R4I=120elseif SUI==4 thenset R4I=140endifendifif GetOwningPlayer(GetDyingUnit())==CO[0]thencall R1I(BO[1],R4I)call R1I(BO[2],R4I)call R1I(BO[3],R4I)call R1I(BO[4],R4I)call R1I(BO[5],R4I)elsecall R1I(CO[1],R4I)call R1I(CO[2],R4I)call R1I(CO[3],R4I)call R1I(CO[4],R4I)call R1I(CO[5],R4I)endifendfunctionfunction R6I takes unit SWI,integer SUI returns nothinglocal integer R4Ilocal player p=GetOwningPlayer(SWI)local integer R5I=0local integer NumOfPlayersif SUI==1 thenset R4I=100elseif SUI==2 thenset R4I=175endifif GetOwningPlayer(GetDyingUnit())==CO[0]thencall R1I(BO[1],R4I)call R1I(BO[2],R4I)call R1I(BO[3],R4I)call R1I(BO[4],R4I)call R1I(BO[5],R4I)elsecall R1I(CO[1],R4I)call R1I(CO[2],R4I)call R1I(CO[3],R4I)call R1I(CO[4],R4I)call R1I(CO[5],R4I)endifendfunctionfunction R7I takes integer SJI returns booleanlocal integer i=1loopexitwhen i>DJ0if DY0[i]==SJI thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction R8I takes integer SJI returns booleanlocal integer i=1loopexitwhen i>DV0if DZ0[i]==SJI thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction R9I takes integer SJI returns booleanlocal integer i=1loopexitwhen i>DX0if DW0[i]==SJI thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction RAI takes player T4I returns nothinglocal integer RBIlocal integer RCIlocal location RDIlocal integer TJIlocal boolean GotHero=falseset S0[GetPlayerId(T4I)]=trueif TII(T4I)==true thenset RBI=DE0set RCI=DF0set RDI=GetRectCenter(O4)elseset RBI=DG0set RCI=DH0set RDI=GetRectCenter(S3)endifif K0 thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifendifloopset TJI=GetRandomInt(RBI,RCI)exitwhen R[TJI]==false and R7I(DC0[TJI])and DC0[TJI]!=1211117643endloopif F2==false thencall TDI(DC0[TJI])set R[TJI]=trueendifcall CreateUnitAtLoc(T4I,DC0[TJI],RDI,0)call RemoveLocation(RDI)endfunctionfunction REI takes player T4I returns nothinglocal integer RBIlocal integer RCIlocal location RDIlocal integer TJIlocal boolean GotHero=falseset S0[GetPlayerId(T4I)]=trueif TII(T4I)==true thenset RBI=DE0set RCI=DF0set RDI=GetRectCenter(O4)elseset RBI=DG0set RCI=DH0set RDI=GetRectCenter(S3)endifif K0 thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifendifloopset TJI=GetRandomInt(RBI,RCI)exitwhen R[TJI]==false and R9I(DC0[TJI])endloopif F2==false thencall TDI(DC0[TJI])set R[TJI]=trueendifcall CreateUnitAtLoc(T4I,DC0[TJI],RDI,0)call RemoveLocation(RDI)endfunctionfunction RFI takes player T4I returns nothinglocal integer RBIlocal integer RCIlocal location RDIlocal integer TJIlocal boolean GotHero=falseset S0[GetPlayerId(T4I)]=trueif TII(T4I)==true thenset RBI=DE0set RCI=DF0set RDI=GetRectCenter(O4)elseset RBI=DG0set RCI=DH0set RDI=GetRectCenter(S3)endifif K0 thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifendifloopset TJI=GetRandomInt(RBI,RCI)exitwhen R[TJI]==false and R8I(DC0[TJI])endloopif F2==false thencall TDI(DC0[TJI])set R[TJI]=trueendifcall CreateUnitAtLoc(T4I,DC0[TJI],RDI,0)call RemoveLocation(RDI)endfunctionfunction RGI takes player T4I returns nothinglocal integer RBIlocal integer RCIlocal location RDIlocal integer TJIlocal boolean GotHero=falseset S0[GetPlayerId(T4I)]=trueif TII(T4I)==true thenset RBI=DE0set RCI=DF0set RDI=GetRectCenter(O4)elseset RBI=DG0set RCI=DH0set RDI=GetRectCenter(S3)endifif K0 thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifendifloopset TJI=GetRandomInt(RBI,RCI)exitwhen R[TJI]==falseendloopif F2==false thencall TDI(DC0[TJI])set R[TJI]=trueendifcall CreateUnitAtLoc(T4I,DC0[TJI],RDI,0)call RemoveLocation(RDI)endfunctionfunction RHI takes boolean RZI,boolean RVI returns integerlocal integer RBIlocal integer RCIif RZI and RVI thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifelseif RZI thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifreturn GetRandomInt(RBI,RCI)endfunctionfunction RWI takes unit SWI returns booleanreturn GetUnitTypeId(SWI)==1848651849 or GetUnitTypeId(SWI)==1848652338 or GetUnitTypeId(SWI)==1848652337 or GetUnitTypeId(SWI)==1848658777 or GetUnitTypeId(SWI)==1848658778 or GetUnitTypeId(SWI)==1848659013 or GetUnitTypeId(SWI)==1848652339 or GetUnitTypeId(SWI)==1848652340 or GetUnitTypeId(SWI)==1848652341 or GetUnitTypeId(SWI)==1848658992 or GetUnitTypeId(SWI)==1848658993 or GetUnitTypeId(SWI)==1848659252 or GetUnitTypeId(SWI)==1848651853 or GetUnitTypeId(SWI)==1848658006 or GetUnitTypeId(SWI)==1848659027endfunctionfunction RXI takes unit SWI returns booleanreturn GetUnitTypeId(SWI)==1697657160 or GetUnitTypeId(SWI)==1697657178 or GetUnitTypeId(SWI)==1697657426 or GetUnitTypeId(SWI)==1697657428 or GetUnitTypeId(SWI)==1697657427 or GetUnitTypeId(SWI)==1697657648endfunctionfunction RYI takes unit SWI returns booleanreturn RWI(SWI)or RXI(SWI)endfunctionfunction RJI takes destructable d returns booleanreturn GetDestructableTypeId(d)==1314157667 or GetDestructableTypeId(d)==1314157687 or GetDestructableTypeId(d)==1096053874 or GetDestructableTypeId(d)==1110454322 or GetDestructableTypeId(d)==1110454323 or GetDestructableTypeId(d)==1110454325endfunctionfunction RKI takes unit u returns booleanreturn GetUnitAbilityLevel(u,1093686070)>0 or GetUnitAbilityLevel(u,1093744441)>0 or GetUnitAbilityLevel(u,1094937961)>0 or GetUnitAbilityLevel(u,1093686101)>0 or GetUnitAbilityLevel(u,1110454580)>0 or GetUnitAbilityLevel(u,1093683251)>0 or((LoadInteger(LY,(GetHandleId(((u)))),((4252))))==1)endfunctionfunction RLI takes unit RMI returns booleanreturn GetUnitAbilityLevel(RMI,1093678162)>0 and T2I(GetOwningPlayer(RMI))endfunctionfunction RNI takes unit u returns booleanreturn GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 or GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1328558391endfunctionfunction RSI takes real d returns booleanreturn 2<d and d<3000endfunctionfunction RTI takes nothing returns nothinglocal integer TGI=1set WO=BO[1]loopexitwhen T3I(WO)or TGI>5set TGI=TGI+1set WO=BO[TGI]endloopif T3I(WO)==false thenset WO=CO[1]set TGI=1loopexitwhen T3I(WO)or TGI>5set TGI=TGI+1set WO=CO[TGI]endloopendifendfunctionfunction RRI takes unit SFI returns booleanreturn IsUnitType(SFI,UNIT_TYPE_HERO)==true and IsUnitIllusion(SFI)==false and GetUnitTypeId(SFI)!=1211117645 and GetUnitTypeId(SFI)!=1311788365 and GetUnitTypeId(SFI)!=1211117657 and GetUnitTypeId(SFI)!=1211119431 and GetUnitTypeId(SFI)!=1211122232endfunctionfunction RPI takes integer i returns integerlocal integer x=0loopexitwhen x>DH0if DT0[x]==i thenreturn DC0[x]endifset x=x+1endloopreturn-1endfunctionfunction RQI takes integer SJI returns integerlocal integer i=1loopexitwhen i>DH0if SJI==DC0[i]thenreturn iendifset i=i+1endloopreturn 0endfunctionfunction RUI takes unit SFI returns integerlocal integer SUI=GetHeroLevel(SFI)if SUI==1 thenreturn 100elseif SUI==2 thenreturn 120elseif SUI==3 thenreturn 160elseif SUI==4 thenreturn 220elsereturn-200+100*SUIendifreturn 0endfunctionfunction P0I takes player p returns booleanreturn C2 and(D60==p or D70==p)endfunctionfunction PII takes unit u returns booleanreturn GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0endfunctionfunction P1I takes unit u returns booleanreturn((LoadInteger(LY,(GetHandleId((u))),((4400))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4401))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4402))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4403))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4404))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4405))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4406))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4407))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4408))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4409))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4410))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4411))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4412))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4413))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4414))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4415))))==1)endfunctionfunction POI takes integer id returns booleanreturn id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614endfunctionfunction P2I takes unit u returns booleanreturn GetUnitAbilityLevel(u,1112500344)>0 or GetUnitAbilityLevel(u,1110454344)>0endfunctionfunction P3I takes integer RII returns booleanif RII==1852862003 or RII==1852862006 or RII==1848652080 or RII==1848657754 thenreturn trueendifif RII==1852862002 or RII==1852862005 or RII==1848652082 or RII==1848657969 thenreturn trueendifif RII==1852862001 or RII==1852862004 or RII==1848652081 or RII==1848657968 thenreturn trueendifreturn falseendfunctionfunction P4I takes unit u returns realif TII(GetOwningPlayer(u))thenreturn GetRectCenterX(O4)elsereturn GetRectCenterX(S3)endifendfunctionfunction P5I takes unit u returns realif TII(GetOwningPlayer(u))thenreturn GetRectCenterY(O4)elsereturn GetRectCenterY(S3)endifendfunctionfunction P6I takes unit P7I,unit P8I,integer P9I,real PAI returns nothingif P9I==0 thenreturnendifif P9I==1 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)elseif P9I==2 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseif P9I==3 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)elseif P9I==4 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseif P9I==5 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseif P9I==6 thencall SetUnitState(P8I,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(P8I,UNIT_STATE_LIFE)-PAI,1))if GetUnitState(P8I,UNIT_STATE_LIFE)<2 thencall UnitRemoveBuffs(P8I,true,true)call UnitRemoveAbility(P8I,1097167980)call UnitDamageTarget(CreateUnit(GetOwningPlayer(P7I),1697656901,0,0,0),P8I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifelseif P9I==7 thenif GetUnitAbilityLevel(P8I,1097167980)>0 or GetUnitAbilityLevel(P8I,1110454606)>0 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)elsecall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)endifelseif P9I==8 thencall UnitDamageTarget(P7I,P8I,PAI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)endifendfunctionfunction PBI takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer P9I=(LoadInteger(LY,(S5I),(36)))local real PAI=(LoadReal(LY,(S5I),(20)))call P6I(P7I,P8I,P9I,PAI)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction PDI takes unit P7I,unit P8I,integer P9I,real PAI,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveInteger(LY,(S5I),(36),(P9I))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function PBI))set t=nullendfunctionfunction PEI takes player MDI,string PFI returns nothinglocal sound PGI=CreateSound(PFI,false,false,false,10,10,"DefaultEAXON")if(GetLocalPlayer()==MDI)thencall StartSound(PGI)endifcall KillSoundWhenDone(PGI)endfunctionfunction PHI takes player MDI,string PFI returns nothingcall PEI(BO[1],PFI)call PEI(BO[2],PFI)call PEI(BO[3],PFI)call PEI(BO[4],PFI)call PEI(BO[5],PFI)call PEI(CO[1],PFI)call PEI(CO[2],PFI)call PEI(CO[3],PFI)call PEI(CO[4],PFI)call PEI(CO[5],PFI)endfunctionfunction PZI takes player PVI,string N7I returns nothinglocal sound PWI=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)if(GetLocalPlayer()==PVI)thenif(N7I!="")and(N7I!=null)thencall ClearTextMessages()call DisplayTimedTextToPlayer(PVI,0.50,-1.00,2.00,"|cffffcc00"+N7I+"|r")endifcall StartSound(PWI)endifcall KillSoundWhenDone(PWI)endfunctionfunction PXI takes player PVI,string N7I returns nothinglocal sound PWI=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)if(GetLocalPlayer()==PVI)thenif(N7I!="")and(N7I!=null)thencall DisplayTimedTextToPlayer(PVI,0,0,2.00,"|cffffcc00"+N7I+"|r")endifcall StartSound(PWI)endifcall KillSoundWhenDone(PWI)endfunctionfunction PYI takes player PVI,string N7I returns nothinglocal sound PWI=CreateSoundFromLabel("InterfaceError",false,false,false,10,10)if(GetLocalPlayer()==PVI)thenif(N7I!="")and(N7I!=null)thencall DisplayTimedTextToPlayer(PVI,0,0,5.00,"|cffffcc00"+N7I+"|r")endifcall StartSound(PWI)endifcall KillSoundWhenDone(PWI)endfunctionfunction PJI takes unit PKI returns nothingcall PauseUnit(PKI,true)call IssueImmediateOrder(PKI,"stop")call PauseUnit(PKI,false)endfunctionfunction PLI takes nothing returns booleanif(GetTimeOfDay()>6.00 and GetTimeOfDay()<18.00)thenreturn trueelsereturn falseendifendfunctionfunction PMI takes string PNI,boolean PSI returns nothingif PSI thencall ExecuteFunc(PNI)endifendfunctionfunction PTI takes real x returns reallocal real PRI=GetRectMinX(bj_mapInitialPlayableArea)+50if(x<PRI)thenreturn PRIendifset PRI=GetRectMaxX(bj_mapInitialPlayableArea)-50if(x>PRI)thenreturn PRIendifreturn xendfunctionfunction PPI takes real x returns reallocal real PRI=GetRectMinX(bj_mapInitialPlayableArea)+75if(x<PRI)thenreturn PRIendifset PRI=GetRectMaxX(bj_mapInitialPlayableArea)-75if(x>PRI)thenreturn PRIendifreturn xendfunctionfunction PQI takes real x returns reallocal real PRI=GetRectMinX(bj_mapInitialPlayableArea)if(x<PRI)thenreturn PRIendifset PRI=GetRectMaxX(bj_mapInitialPlayableArea)if(x>PRI)thenreturn PRIendifreturn xendfunctionfunction PUI takes real y returns reallocal real PRI=GetRectMinY(bj_mapInitialPlayableArea)+50if(y<PRI)thenreturn PRIendifset PRI=GetRectMaxY(bj_mapInitialPlayableArea)-50if(y>PRI)thenreturn PRIendifreturn yendfunctionfunction Q0I takes real y returns reallocal real PRI=GetRectMinY(bj_mapInitialPlayableArea)+75if(y<PRI)thenreturn PRIendifset PRI=GetRectMaxY(bj_mapInitialPlayableArea)-75if(y>PRI)thenreturn PRIendifreturn yendfunctionfunction QII takes real y returns reallocal real PRI=GetRectMinY(bj_mapInitialPlayableArea)if(y<PRI)thenreturn PRIendifset PRI=GetRectMaxY(bj_mapInitialPlayableArea)if(y>PRI)thenreturn PRIendifreturn yendfunctionfunction Q1I takes integer QOI returns nothinglocal unit u=CreateUnit(Player(15),1211117657,0,0,270)call UnitAddAbility(u,QOI)call UnitRemoveAbility(u,QOI)call RemoveUnit(u)set u=nullendfunctionfunction Q2I takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer QOI=(LoadInteger(LY,(S5I),(37)))call Q1I(QOI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction Q3I takes integer QOI,real Q4I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(37),(QOI))call TriggerRegisterTimerEvent(t,Q4I,false)call TriggerAddCondition(t,Condition(function Q2I))set t=nullendfunctionfunction Tree_Killer takes nothing returns nothingcall KillDestructable(GetEnumDestructable())endfunctionfunction Q5I takes unit SFI returns nothingcall SaveBoolean(LY,(GetHandleId(SFI)),(38),(false))call FlushChildHashtable(LY,(GetHandleId(SFI)))call RemoveUnit(SFI)endfunctionfunction Q6I takes unit SWI,integer Q7I,integer Q8I returns nothingif GetUnitAbilityLevel(SWI,Q7I)==0 thencall UnitAddAbility(SWI,Q7I)endifcall SetUnitAbilityLevel(SWI,Q7I,Q8I)endfunctionfunction Q9I takes integer a,integer b returns integerif(a<b)thenreturn aelsereturn bendifendfunctionfunction QAI takes integer a,integer b returns integerif(a<b)thenreturn belsereturn aendifendfunctionfunction QBI takes integer M8I,integer a,integer b returns integerreturn QAI(Q9I(M8I,b),a)endfunctionfunction QCI takes real a,real b returns realif(a<b)thenreturn aelsereturn bendifendfunctionfunction QDI takes real a,real b returns realif(a<b)thenreturn belsereturn aendifendfunctionfunction QEI takes nothing returns nothinglocal integer S5I=GetHandleId(GetExpiredTimer())local unit SWI=(LoadUnitHandle(LY,(S5I),(26)))call SetUnitState(SWI,UNIT_STATE_LIFE,GetUnitState(SWI,UNIT_STATE_LIFE)+(LoadReal(LY,(S5I),(20))))endfunctionfunction QFI takes unit SWI,real PAI returns nothinglocal timer t=CreateTimer()local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveUnitHandle(LY,(S5I),(26),(SWI))call TimerStart(t,0,false,function QEI)endfunctionfunction QGI takes unit SWI,real PAI returns nothinglocal real QHI=GetUnitState(SWI,UNIT_STATE_MAX_LIFE)local real QZI=GetUnitState(SWI,UNIT_STATE_LIFE)if(GetUnitState(SWI,UNIT_STATE_LIFE)>1)thenif PAI>(QHI-QZI)thenif PAI>=QZI thencall SetUnitState(SWI,UNIT_STATE_LIFE,QHI)call QFI(SWI,PAI-(QHI-QZI))elsecall QFI(SWI,PAI)endifelsecall SetUnitState(SWI,UNIT_STATE_LIFE,GetUnitState(SWI,UNIT_STATE_LIFE)+PAI)endifendifendfunctionfunction QVI takes unit P7I,unit P8I,real QWI returns booleanlocal real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)if((QXI-QJI)*(QXI-QJI)+(QYI-QKI)*(QYI-QKI))<QWI*QWI thenreturn trueelsereturn falseendifreturn falseendfunctionfunction QLI takes unit P7I,unit P8I returns reallocal real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)if P7I==null or P8I==null thenreturn I2R(9999999999)elsereturn SquareRoot((QXI-QJI)*(QXI-QJI)+(QYI-QKI)*(QYI-QKI))endifreturn 1.0endfunctionfunction QMI takes unit P7I,location P8I returns reallocal real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetLocationX(P8I)local real QKI=GetLocationY(P8I)if P7I==null thenreturn I2R(9999999999)elsereturn SquareRoot((QXI-QJI)*(QXI-QJI)+(QYI-QKI)*(QYI-QKI))endifreturn 1.0endfunctionfunction QNI takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))endfunctionfunction QSI takes unit SWI returns nothingcall SetUnitState(SWI,UNIT_STATE_MANA,GetUnitState(SWI,UNIT_STATE_MAX_MANA))endfunctionfunction QTI takes nothing returns nothingcall DisplayTimedTextToPlayer(GetEnumPlayer(),0,U2,MJ,LJ)endfunctionfunction QRI takes force N0I,real M5I,string NII returns nothingset LJ=NIIset MJ=M5Icall ForForce(N0I,function QTI)endfunctionfunction QPI takes nothing returns nothingif GM[GetPlayerId(GetEnumPlayer())]thencall DisplayTimedTextToPlayer(GetEnumPlayer(),0,U2,MJ,LJ)endifendfunctionfunction QQI takes force N0I,real M5I,string NII returns nothingset LJ=NIIset MJ=M5Icall ForForce(N0I,function QPI)endfunctionfunction QUI takes unit SWI,real U0I returns nothingcall SetUnitState(SWI,UNIT_STATE_LIFE,GetUnitState(SWI,UNIT_STATE_LIFE)+U0I)endfunctionfunction UII takes nothing returns nothingcall PauseAllUnitsBJ(true)endfunctionfunction RepeatedPauseAll takes nothing returns nothinglocal timer t=CreateTimer()call TimerStart(t,1,true,function UII)endfunctionfunction U1I takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I((t))set t=nullreturn falseendfunctionfunction UOI takes string U2I,unit SWI,string U3I,real M5I returns nothinglocal effect fx=AddSpecialEffectTarget(U2I,SWI,U3I)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(32),(fx))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function U1I))set fx=nullset t=nullendfunctionfunction U4I takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I((t))set t=nullreturn falseendfunctionfunction U5I takes string U2I,unit SWI,string U3I,real M5I returns nothinglocal effect fx=AddSpecialEffectTarget(U2I,SWI,U3I)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(32),(fx))call TriggerRegisterUnitEvent(t,SWI,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function U4I))set fx=nullset t=nullendfunctionfunction U6I takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I((t))set t=nullreturn falseendfunctionfunction U7I takes string U2I,real x,real y,real M5I returns nothinglocal effect fx=AddSpecialEffect(U2I,x,y)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(32),(fx))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function U6I))set fx=nullset t=nullendfunctionfunction PulseEffectTarget_Child takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local string U2I=(LoadStr(LY,(S5I),(39)))local string U3I=(LoadStr(LY,(S5I),(40)))local integer NPI=(LoadInteger(LY,(S5I),(34)))call U5I(U2I,P8I,U3I,2)if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>NPI thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction U8I takes unit SWI,integer U9I returns itemlocal integer MLI=0local item UAIloopexitwhen MLI==6set UAI=UnitItemInSlot(SWI,MLI)if UAI!=null and GetItemTypeId(UAI)==U9I thenreturn UAIendifset MLI=MLI+1endloopreturn nullendfunctionfunction UBI takes timer t returns nothingcall PauseTimer(t)call FlushChildHashtable(LY,(GetHandleId(t)))call DestroyTimer(t)endfunctionfunction UCI takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))endfunctionfunction UDI takes unit a,unit b returns realreturn bj_RADTODEG*Atan2(GetUnitY(b)-GetUnitY(a),GetUnitX(b)-GetUnitX(a))endfunctionfunction UEI takes real x1,real y1,real x2,real y2 returns realreturn bj_RADTODEG*Atan2(y2-y1,x2-x1)endfunctionfunction UFI takes nothing returns nothingcall DestroyLightning((LoadLightningHandle(LY,(GetHandleId(GetExpiredTimer())),(41))))endfunctionfunction UGI takes string UHI,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real M5I returns nothinglocal timer t=CreateTimer()local lightning UZI=AddLightning(UHI,true,x1,y1,x2,y2)call SetLightningColor(UZI,r,g,b,a)call SaveLightningHandle(LY,(GetHandleId(t)),(41),(UZI))call TimerStart(t,M5I,false,function UFI)endfunctionfunction UVI takes string UWI,unit UXI,integer r,integer g,integer b returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,0.03)call SetTextTagPosUnit(tt,UXI,0)call SetTextTagColor(tt,r,g,b,255)call SetTextTagPermanent(tt,true)set tt=nullendfunctionfunction UYI takes string UWI,real M5I,unit UXI,real UJI,integer r,integer g,integer b,integer a returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,UJI)call SetTextTagPosUnit(tt,UXI,64)call SetTextTagColor(tt,r,g,b,a)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,2)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,M5I)if IsUnitVisible(UXI,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifset tt=nullendfunctionfunction UKI takes player p,string UWI,real M5I,unit UXI,real UJI,integer r,integer g,integer b,integer a returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,UJI)call SetTextTagPosUnit(tt,UXI,64)call SetTextTagColor(tt,r,g,b,a)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,2)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,M5I)if IsPlayerAlly(GetLocalPlayer(),p)==true or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifset tt=nullendfunctionfunction ULI takes nothing returns booleanreturn trueendfunctionfunction UMI takes trigger t,playerunitevent UNI returns nothinglocal integer MLI=0loopcall TriggerRegisterPlayerUnitEvent(t,Player(MLI),UNI,Condition(function ULI))set MLI=MLI+1exitwhen MLI==16endloopendfunctionfunction USI takes trigger t,playerunitevent UNI returns nothinglocal integer i=1loopexitwhen i>5call TriggerRegisterPlayerUnitEvent(t,BO[i],UNI,Condition(function ULI))call TriggerRegisterPlayerUnitEvent(t,CO[i],UNI,Condition(function ULI))set i=i+1endloopendfunctionfunction UTI takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))endfunctionfunction URI takes nothing returns nothingif RJI(GetEnumDestructable())and IsDestructableAliveBJ(GetEnumDestructable())thenset NJ=NJ+1call KillDestructable(GetEnumDestructable())endifendfunctionfunction UPI takes real x,real y,real d returns integerlocal rect r=Rect(x-d,y-d,x+d,y+d)set NJ=0call EnumDestructablesInRect(r,Condition(function N1I),function URI)call RemoveRect(r)set r=nullreturn NJendfunctionfunction UQI takes real x,real y returns booleanif IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)thenreturn falseendifreturn trueendfunctionfunction UUI takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093685817)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendfunctionfunction II1 takes player MDI,sound I11,real x,real y returns nothingcall SetSoundPosition(I11,x,y,0)call SetSoundVolume(I11,127)set bj_lastPlayedSound=I11if(I11!=null)thenif(GetLocalPlayer()==MDI)thencall StartSound(I11)endifendifendfunctionfunction IO1 takes sound I11,real x,real y returns nothingcall SetSoundPosition(I11,x,y,0)call SetSoundVolume(I11,127)set bj_lastPlayedSound=I11if(I11!=null)thencall StartSound(I11)endifendfunctionfunction I21 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset I31=nullreturn falseendfunctionfunction I41 takes player p,real M5I,real x,real y,real r returns nothinglocal trigger t=CreateTrigger()local fogmodifier I31=CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,r,true,true)call FogModifierStart(I31)call SaveFogModifierHandle(LY,(GetHandleId(t)),(42),(I31))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function I21))set I31=nullset t=nullendfunctionfunction GroupCount_Helper takes nothing returns nothingset bj_groupCountUnits=bj_groupCountUnits+1endfunctionfunction I51 takes nothing returns nothingif(RJI(GetEnumDestructable())or GetDestructableTypeId(GetEnumDestructable())==1110454325)and GetDestructableLife(GetEnumDestructable())>0 thenset KK=trueendifendfunctionfunction I61 takes real x,real y,real d returns booleanlocal rect r=Rect(x-d,y-d,x+d,y+d)set KK=falsecall EnumDestructablesInRect(r,Condition(function N1I),function I51)call RemoveRect(r)set r=nullreturn KKendfunctionfunction I71 takes nothing returns nothingcall PauseUnit(GetEnumUnit(),true)endfunctionfunction I81 takes nothing returns booleanlocal group g=NTI()call GroupEnumUnitsInRange(g,0,0,16000,Condition(function ULI))call ForGroup(g,function I71)call NSI(g)set g=nullreturn falseendfunctionfunction I91 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function I81))call TriggerEvaluate(t)set t=nullendfunctionfunction IA1 takes unit SFI,integer IB1 returns nothingcall UnitAddAbility(SFI,IB1)call UnitMakeAbilityPermanent(SFI,true,IB1)endfunctionfunction IC1 takes unit u returns booleanreturn GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD)==trueendfunctionfunction ID1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer IE1=(LoadInteger(LY,(S5I),(43)))local unit P7I=NYI(IE1)local real IF1=(LoadReal(LY,(S5I),(44)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real IH1=IF1*0.03local real IZ1=UEI(x,y,QJI,QKI)local real IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)local real IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)local boolean IX1=(LoadBoolean(LY,(S5I),(698)))local boolean IY1=(LoadBoolean(LY,(S5I),(818)))call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,IZ1)if IC1(P8I)and IX1==false or(((LoadInteger(LY,(GetHandleId((P8I))),((4422))))==1)==true and IY1==true)thencall KillUnit(IG1)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif UTI(QJI,QKI,IV1,IW1)<=IH1 thencall KillUnit(IG1)set GK=P7Iset HK=P8Icall ExecuteFunc((LoadStr(LY,(S5I),(46))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction IJ1 takes unit P7I,unit P8I,integer IK1,string IL1,real IF1,boolean IM1 returns triggerlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real IN1=GetUnitFacing(P7I)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function ID1))call SaveReal(LY,(S5I),(44),((IF1)*1.0))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveStr(LY,(S5I),(46),(IL1))call SaveInteger(LY,(S5I),(43),(NKI(P7I)))call SaveUnitHandle(LY,(S5I),(45),(CreateUnit(GetOwningPlayer(P7I),IK1,QXI,QYI,IN1)))call SaveBoolean(LY,(S5I),(698),(false))call SaveBoolean(LY,(S5I),(818),(IM1))set WK=tset t=nullreturn WKendfunctionfunction MoveProjectileToXY_Move takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real IF1=(LoadReal(LY,(S5I),(44)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real IH1=IF1*0.03local real IZ1=UEI(x,y,QJI,QKI)local real IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)local real IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)if UTI(QJI,QKI,IV1,IW1)<=IH1 thencall KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset IG1=nullreturn falseendfunctionfunction DamageProjectile_Move takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real IF1=(LoadReal(LY,(S5I),(44)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real IH1=IF1*0.03local real IZ1=UEI(x,y,QJI,QKI)local real IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)local real IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,IZ1)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif UTI(QJI,QKI,IV1,IW1)<=IH1 thencall P6I((LoadUnitHandle(LY,(S5I),(2))),P8I,(LoadInteger(LY,(S5I),(36))),(LoadReal(LY,(S5I),(20))))call KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifreturn falseendfunctionfunction DelayedLocust_Helper takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call UnitAddAbility((LoadUnitHandle(LY,(S5I),(26))),1097625443)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction IS1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real IT1=(LoadReal(LY,(S5I),(49)))local real SKI=IT1-(IT1-SMI(SFI))*NPI/40if NPI>40 or IC1(SFI)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitScale(SFI,SKI,SKI,SKI)endifset t=nullset SFI=nullreturn falseendfunctionfunction IR1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real IP1=(LoadReal(LY,(S5I),(50)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function IS1))set S5I=GetHandleId(t)call SaveReal(LY,(S5I),(49),((IP1)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullset SFI=nullreturn falseendfunctionfunction IQ1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real IU1=((LoadReal(LY,(S5I),(51)))-SMI(SFI))*NPI/40local real SKI=SMI(SFI)+IU1if NPI>40 or IC1(SFI)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitScale(SFI,SKI,SKI,SKI)endifset t=nullset SFI=nullreturn falseendfunctionfunction O01 takes unit SFI,real M5I,real SKI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real OI1=SKI*SMI(SFI)local real IP1=OI1call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(50),((IP1)*1.0))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function IR1))if M5I>3 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function IQ1))set S5I=GetHandleId(t)call SaveReal(LY,(S5I),(51),((OI1)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))elsecall SetUnitScale(SFI,IP1,IP1,IP1)endifset t=nullendfunctionfunction O11 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer OO1=(LoadInteger(LY,(S5I),(52)))if SFI!=null thencall UnitRemoveAbility(SFI,OO1)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction O21 takes unit u,integer OO1,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(u,OO1)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function O11))call SaveUnitHandle(LY,(S5I),(14),(u))call SaveInteger(LY,(S5I),(52),(OO1))set t=nullendfunctionfunction O31 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(53)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))call UnitShareVision(u,p,false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset u=nullset p=nullreturn falseendfunctionfunction ShareUnitVisionTimed_Add takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=GetTriggerUnit()local player p=(LoadPlayerHandle(LY,(S5I),(54)))call UnitShareVision(u,p,true)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function O31))call SavePlayerHandle(LY,(S5I),(54),(p))call SaveUnitHandle(LY,(S5I),(53),(u))set t=nullset u=nullset p=nullreturn falseendfunctionfunction O41 takes nothing returns nothingset bj_groupCountUnits=bj_groupCountUnits+1endfunctionfunction O51 takes group g returns integerset bj_groupCountUnits=0call ForGroup(g,function O41)return bj_groupCountUnitsendfunctionfunction O61 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction O71 takes fogmodifier I31,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call FogModifierStart(I31)call SaveFogModifierHandle(LY,(S5I),(42),(I31))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function O61))set t=nullendfunctionfunction O81 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer O91=(LoadInteger(LY,(S5I),(55)))local destructable d=NJI(O91)if d!=null thencall RemoveDestructable(d)endifcall NLI(O91)call FlushChildHashtable(LY,(S5I))call S0I(t)set d=nullset t=nullreturn falseendfunctionfunction OA1 takes destructable d,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function O81))call SaveInteger(LY,(S5I),(55),(NMI(d)))set t=nullendfunctionfunction OB1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer OO1=(LoadInteger(LY,(S5I),(52)))if SFI!=null and GetUnitAbilityLevel(SFI,OO1)>0 thencall UnitRemoveAbility(SFI,OO1)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction OC1 takes unit u,integer OO1,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function OB1))call SaveUnitHandle(LY,(S5I),(14),(u))call SaveInteger(LY,(S5I),(52),(OO1))set t=nullendfunctionfunction OD1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call SetUnitAnimation((LoadUnitHandle(LY,(S5I),(53))),"stand")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction OE1 takes unit u,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(53),(u))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function OD1))set t=nullendfunctionfunction OF1 takes real M5I,boolean OG1,real x,real y,real OH1,real OZ1,real OV1,real OW1,real OX1 returns nothinglocal real OY1local real OJ1local real OK1if(OZ1<=0 or OX1<=0 or OW1<=0)thenreturnendifset OJ1=2.0*M5I/OW1set OY1=2.0*OZ1/OX1set OK1=OH1/OZ1call TerrainDeformRipple(x,y,OZ1,OV1,R2I(M5I*1000),1,OY1,OJ1,OK1,OG1)endfunctionfunction OL1 takes player MDI,unit SWI,integer ROI returns nothinglocal texttag t=CreateTextTag()call SetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetTextTagText(t,"+"+I2S(ROI),0.025)call SetTextTagPosUnit(t,SWI,0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,0.03)if GetLocalPlayer()==MDI thencall SetTextTagVisibility(t,true)elsecall SetTextTagVisibility(t,false)endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endfunctionfunction OM1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call FlushChildHashtable(LY,(GetHandleId((LoadUnitHandle(LY,(S5I),(26))))))call ShowUnit((LoadUnitHandle(LY,(S5I),(26))),false)call RemoveUnit((LoadUnitHandle(LY,(S5I),(26))))call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction ON1 takes unit u,real d returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,d,false)call TriggerAddCondition(t,Condition(function OM1))call SaveUnitHandle(LY,(S5I),(26),(u))set t=nullendfunctionfunction KillUnitTimed_Expire takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call FlushChildHashtable(LY,(GetHandleId((LoadUnitHandle(LY,(S5I),(26))))))call ShowUnit((LoadUnitHandle(LY,(S5I),(26))),false)call KillUnit((LoadUnitHandle(LY,(S5I),(26))))call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction HideUnitTimed_Expire takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call FlushChildHashtable(LY,(GetHandleId((LoadUnitHandle(LY,(S5I),(26))))))call ShowUnit((LoadUnitHandle(LY,(S5I),(26))),false)call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction OS1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call RemoveUnit((LoadUnitHandle(LY,(S5I),(26))))call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction OT1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call KillUnit((LoadUnitHandle(LY,(S5I),(26))))call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction OR1 takes unit u,real d returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,d,false)call TriggerAddCondition(t,Condition(function OT1))call SaveUnitHandle(LY,(S5I),(26),(u))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,d+0.01,false)call TriggerAddCondition(t,Condition(function OS1))call SaveUnitHandle(LY,(S5I),(26),(u))set t=nullendfunctionfunction OP1 takes sound I11 returns nothingif I11!=null and HM[GetPlayerId(GetLocalPlayer())]==false thencall StartSound(I11)endifendfunctionfunction OQ1 takes sound I11,player PVI returns nothingif GetLocalPlayer()==PVI and HM[GetPlayerId(PVI)]==false thencall StartSound(I11)endifendfunctionfunction OU1 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==falseendfunctionfunction A01 takes nothing returns nothingcall OQ1(SJ,GetOwningPlayer(GetEnumUnit()))endfunctionfunction AI1 takes unit P7I,sound I11,real x,real y,real r returns nothinglocal group g=NTI()set GK=P7Iset SJ=I11call GroupEnumUnitsInRange(g,x,y,r,Condition(function OU1))call GroupRemoveUnit(g,P7I)call ForGroup(g,function A01)call NSI(g)set g=nullendfunctionfunction A11 takes unit SWI,item AO1 returns integerlocal integer i=0loopexitwhen i>5if UnitItemInSlot(SWI,i)==AO1 thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction DelayedSetUnitPosition_Helper takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SWI=(LoadUnitHandle(LY,(S5I),(56)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))call SetUnitPosition(SWI,x,y)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SWI=nullreturn falseendfunctionfunction A21 takes real n1,real n2 returns integerif n1/n2-R2I(n1/n2)>=0.5 thenreturn R2I(n1/n2)+1endifreturn R2I(n1/n2)endfunctionfunction A31 takes player p returns nothingif GetLocalPlayer()==p thencall ClearTextMessages()endifendfunctionfunction A41 takes unit u,real d returns nothingcall SetUnitState(u,UNIT_STATE_LIFE,QDI(GetUnitState(u,UNIT_STATE_LIFE)-d,1))endfunctionfunction A51 takes integer A61 returns nothinglocal unit u=CreateUnit(Player(15),A61,0,0,0)call RemoveUnit(u)set u=nullendfunctionfunction A71 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(53)))local real M5I=(LoadReal(LY,(S5I),(57)))local integer A81=(LoadInteger(LY,(S5I),(58)))if GetTriggerEvalCount(t)/10>R2I(M5I)thencall SetUnitVertexColor(u,255,100,255,255)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif IC1(u)==false thencall SetUnitVertexColor(u,255,100,255,A81)endifset t=nullset u=nullreturn falseendfunctionfunction A91 takes unit u,real M5I,integer A81 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function A71))call SaveUnitHandle(LY,(S5I),(53),(u))call SaveReal(LY,(S5I),(57),((M5I)*1.0))call SaveInteger(LY,(S5I),(58),(A81))set t=nullendfunctionfunction AA1 takes player AB1,integer AC1,unit AD1 returns nothinglocal texttag t=CreateTextTag()local string scall SetPlayerState(AB1,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(AB1,PLAYER_STATE_RESOURCE_GOLD)+AC1)call SetTextTagText(t,"+"+I2S(AC1),0.025)call SetTextTagPosUnit(t,AD1,0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,0.03)if GetLocalPlayer()==AB1 thencall SetTextTagVisibility(t,true)set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"elsecall SetTextTagVisibility(t,false)set s=""endifif GetUnitState(AD1,UNIT_STATE_LIFE)>0.5 thencall DestroyEffect(AddSpecialEffectTarget(s,AD1,"overhead"))endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endfunctionfunction AE1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer AF1=(LoadInteger(LY,(S5I),(59)))if UnitRemoveAbility(P8I,AF1)==true or GetUnitAbilityLevel(P8I,AF1)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction AG1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer AF1=(LoadInteger(LY,(S5I),(59)))call FlushChildHashtable(LY,(S5I))call S0I(t)if UnitRemoveAbility(P8I,AF1)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function AE1))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(59),(AF1))endifset t=nullset P8I=nullreturn falseendfunctionfunction AH1 takes unit P8I,integer AF1,integer SUI,real M5I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,AF1)call SetUnitAbilityLevel(P8I,AF1,SUI)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function AG1))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(59),(AF1))set t=nullendfunctionfunction AZ1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer AF1=(LoadInteger(LY,(S5I),(59)))local integer AV1=(LoadInteger(LY,(S5I),(59)))call UnitRemoveAbility(P8I,AV1)if UnitRemoveAbility(P8I,AF1)==true or GetUnitAbilityLevel(P8I,AF1)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction AW1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer AF1=(LoadInteger(LY,(S5I),(59)))local integer AV1=(LoadInteger(LY,(S5I),(60)))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,AV1)if UnitRemoveAbility(P8I,AF1)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function AZ1))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(59),(AF1))call SaveInteger(LY,(S5I),(60),(AV1))endifset t=nullset P8I=nullreturn falseendfunctionfunction AX1 takes unit P8I,integer AF1,integer SUI,real M5I,integer AV1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,AF1)call SetUnitAbilityLevel(P8I,AF1,SUI)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function AW1))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(59),(AF1))call SaveInteger(LY,(S5I),(60),(AV1))set t=nullendfunctionfunction AY1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer AJ1=(LoadInteger(LY,(S5I),(61)))local integer AK1=(LoadInteger(LY,(S5I),(62)))local unit u1=NYI(AJ1)local unit u2=NYI(AK1)local real M5I=(LoadReal(LY,(S5I),(57)))local lightning UZI=(LoadLightningHandle(LY,(S5I),(41)))if I2R(GetTriggerEvalCount(t))*0.025>M5I thencall DestroyLightning(UZI)call NXI(AJ1)call NXI(AK1)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall MoveLightning(UZI,true,GetUnitX(u1),GetUnitY(u1),GetUnitX(u2),GetUnitY(u2))endifset t=nullset u1=nullset u2=nullset UZI=nullreturn falseendfunctionfunction AL1 takes string UHI,unit u1,unit u2,real r,real g,real b,real a,real M5I returns nothinglocal real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local lightning UZI=AddLightning(UHI,true,x1,y1,x2,y2)call SetLightningColor(UZI,r,g,b,a)call SaveLightningHandle(LY,(S5I),(41),(UZI))call SaveInteger(LY,(S5I),(61),(NKI(u1)))call SaveInteger(LY,(S5I),(62),(NKI(u2)))call SaveReal(LY,(S5I),(57),((M5I)*1.0))call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function AY1))set t=nullset UZI=nullendfunctionfunction AM1 takes string AN1 returns nothinglocal sound AS1=CreateSound(AN1,false,false,false,10,10,"")call SetSoundVolume(AS1,0)call StartSound(AS1)call KillSoundWhenDone(AS1)set AS1=nullendfunctionfunction AT1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local ubersplat AR1=(LoadUbersplatHandle(LY,(S5I),(131)))call DestroyUbersplat(AR1)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset AR1=nullreturn falseendfunctionfunction AP1 takes ubersplat AR1,real d returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUbersplatHandle(LY,(S5I),(131),(AR1))call TriggerRegisterTimerEvent(t,d,false)call TriggerAddCondition(t,Condition(function AT1))set t=nullendfunctionfunction AQ1 takes nothing returns nothinglocal real d=QNI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),PJ,QJ)if d<RJ thenset RJ=dset TJ=GetEnumUnit()endifendfunctionfunction AU1 takes group g,real x,real y returns unitset RJ=999999set TJ=nullset PJ=xset QJ=ycall ForGroup(g,function AQ1)return TJendfunctionfunction B01 takes integer IB1 returns nothinglocal integer i=0loopexitwhen i>5call SetPlayerAbilityAvailable(BO[i],IB1,false)call SetPlayerAbilityAvailable(CO[i],IB1,false)set i=i+1endloopendfunctionfunction BI1 takes integer id returns nothinglocal integer i=0loopexitwhen i>12call SetPlayerAbilityAvailable(Player(i),id,false)set i=i+1endloopendfunctionfunction DodgeSystem takes nothing returns nothingcall SCI(GetTriggerUnit(),4422,0.2)endfunctionfunction B11 takes nothing returns booleanif GetSpellAbilityId()==1093678643 or GetSpellAbilityId()==1093677903 or GetSpellAbilityId()==1093681720 or GetSpellAbilityId()==1093752645 or GetSpellAbilityId()==1097425515 or GetSpellAbilityId()==1093813846 or GetSpellAbilityId()==1093684549 thencall SCI(GetTriggerUnit(),4422,0.2)endifreturn falseendfunctionfunction B31 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitPathing(P7I,true)set t=nullset P7I=nullreturn falseendfunctionfunction B41 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,5,false)call TriggerAddCondition(t,Condition(function B31))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SetUnitPathing(P7I,false)set t=nullendfunctionfunction B51 takes nothing returns nothingset YN=CreateRegion()call RegionAddRect(YN,G5)set KN=CreateRegion()call RegionAddRect(KN,H5)set XN=CreateRegion()call RegionAddRect(XN,O6)call RegionAddRect(XN,A6)call RegionAddRect(XN,B6)set JN=CreateRegion()call RegionAddRect(JN,C6)call RegionAddRect(JN,D6)call RegionAddRect(JN,E6)set LN=CreateRegion()call RegionAddRect(LN,F6)call RegionAddRect(LN,G6)call RegionAddRect(LN,H6)call RegionAddRect(LN,Z6)call RegionAddRect(LN,V6)call RegionAddRect(LN,W6)call RegionAddRect(LN,X6)call RegionAddRect(LN,Y6)call RegionAddRect(LN,J6)call RegionAddRect(LN,K6)call RegionAddRect(LN,L6)call RegionAddRect(LN,M6)call RegionAddRect(LN,N6)call RegionAddRect(LN,S6)call RegionAddRect(LN,T6)call RegionAddRect(LN,R6)call RegionAddRect(LN,P6)call RegionAddRect(LN,Q6)call RegionAddRect(LN,U6)call RegionAddRect(LN,I7)call RegionAddRect(LN,O7)call RegionAddRect(LN,A7)call RegionAddRect(LN,B7)call RegionAddRect(LN,C7)call RegionAddRect(LN,D7)call RegionAddRect(LN,E7)call RegionAddRect(LN,F7)call RegionAddRect(LN,G7)call RegionAddRect(LN,H7)call RegionAddRect(LN,Z7)call RegionAddRect(LN,V7)call RegionAddRect(LN,W7)call RegionAddRect(LN,X7)call RegionAddRect(LN,Y7)call RegionAddRect(LN,J7)call RegionAddRect(LN,K7)call RegionAddRect(LN,L7)call RegionAddRect(LN,M7)call RegionAddRect(LN,N7)call RegionAddRect(LN,S7)call RegionAddRect(LN,T7)call RegionAddRect(LN,R7)call RegionAddRect(LN,P7)call RegionAddRect(LN,Q7)call RegionAddRect(LN,U7)call RegionAddRect(LN,I8)call RegionAddRect(LN,O8)call RegionAddRect(LN,A8)call RegionAddRect(LN,B8)call RegionAddRect(LN,C8)call RegionAddRect(LN,D8)call RegionAddRect(LN,E8)call RegionAddRect(LN,F8)call RegionAddRect(LN,G8)call RegionAddRect(LN,H8)call RegionAddRect(LN,Z8)call RegionAddRect(LN,V8)call RegionAddRect(LN,W8)call RegionAddRect(LN,X8)call RegionAddRect(LN,Y8)call RegionAddRect(LN,J8)call RegionAddRect(LN,K8)call RegionAddRect(LN,L8)call RegionAddRect(LN,M8)call RegionAddRect(LN,N8)call RegionAddRect(LN,S8)call RegionAddRect(LN,T8)call RegionAddRect(LN,R8)call RegionAddRect(LN,P8)call RegionAddRect(LN,Q8)call RegionAddRect(LN,U8)call RegionAddRect(LN,I9)call RegionAddRect(LN,O9)call RegionAddRect(LN,A9)call RegionAddRect(LN,B9)call RegionAddRect(LN,C9)call RegionAddRect(LN,D9)call RegionAddRect(LN,E9)call RegionAddRect(LN,F9)call RegionAddRect(LN,G9)call RegionAddRect(LN,H9)call RegionAddRect(LN,Z9)call RegionAddRect(LN,V9)call RegionAddRect(LN,W9)call RegionAddRect(LN,X9)call RegionAddRect(LN,Y9)call RegionAddRect(LN,J9)call RegionAddRect(LN,K9)call RegionAddRect(LN,L9)call RegionAddRect(LN,M9)call RegionAddRect(LN,N9)call RegionAddRect(LN,S9)call RegionAddRect(LN,T9)call RegionAddRect(LN,R9)call RegionAddRect(LN,P9)set MN=CreateRegion()call RegionAddRect(MN,QB)call RegionAddRect(MN,IC)call RegionAddRect(MN,OC)call RegionAddRect(MN,AC)endfunctionfunction InitTrig_Regions takes nothing returns nothingcall B51()endfunctionfunction B61 takes unit B71 returns booleanreturn GetUnitTypeId(B71)==1848651828 or GetUnitTypeId(B71)==1848652088 or GetUnitTypeId(B71)==1848652099 or GetUnitTypeId(B71)==1848652103endfunctionfunction B81 takes integer id returns booleanreturn id==1311780941 or id==1211119431 or id==1211117657 or id==1211122232endfunctionfunction B91 takes player p returns nothinglocal unit SFI=K1[GetPlayerId(p)]local integer i=0local item BA1loopexitwhen i>5set BA1=UnitItemInSlot(SFI,i)call SetItemDroppable(BA1,false)set i=i+1endloopset SFI=nullset BA1=nullendfunctionfunction BB1 takes player p returns nothinglocal unit SFI=K1[GetPlayerId(p)]local integer i=0local item BA1loopexitwhen i>5set BA1=UnitItemInSlot(SFI,i)call SetItemDroppable(BA1,true)set i=i+1endloopset SFI=nullset BA1=nullendfunctionfunction BC1 takes unit u returns booleanreturn GetUnitAbilityLevel(u,1097167980)>0 or GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0 or GetUnitAbilityLevel(u,1110454606)>0endfunctionfunction BD1 takes unit u returns booleanreturn(GetUnitAbilityLevel((u),(1111844210))>0)or(GetUnitAbilityLevel((u),(1110454583))>0)or(GetUnitAbilityLevel((u),(1110459730))>0)endfunctionfunction BE1 takes unit u returns booleanreturn(GetUnitAbilityLevel((u),(1110459185))>0)or(GetUnitAbilityLevel((u),(1111844210))>0)or(GetUnitAbilityLevel((u),(1113943655))>0)or(GetUnitAbilityLevel((u),(1113943649))>0)or(GetUnitAbilityLevel((u),(1110454583))>0)or(GetUnitAbilityLevel((u),(1110456120))>0)or(GetUnitAbilityLevel((u),(1110456390))>0)or(GetUnitAbilityLevel((u),(1110456389))>0)or(GetUnitAbilityLevel((u),(1110459730))>0)or(GetUnitAbilityLevel((u),(1110459982))>0)endfunctionfunction BF1 takes unit u returns nothingcall UnitRemoveAbility(u,1110459185)call UnitRemoveAbility(u,1111844210)call UnitRemoveAbility(u,1113943655)call UnitRemoveAbility(u,1113943649)call UnitRemoveAbility(u,1110454583)call UnitRemoveAbility(u,1110456120)call UnitRemoveAbility(u,1110456390)call UnitRemoveAbility(u,1110456389)call UnitRemoveAbility(u,1110459730)call UnitRemoveAbility(u,1110459982)endfunctionfunction BG1 takes unit u returns booleanreturn(GetUnitAbilityLevel((u),(1110454344))>0)or(GetUnitAbilityLevel((u),(1112500344))>0)or(GetUnitAbilityLevel((u),(1112560453))>0)or(GetUnitAbilityLevel((u),(1110456633))>0)or(GetUnitAbilityLevel((u),(1112757326))>0)or(GetUnitAbilityLevel((u),(1110459206))>0)or(GetUnitAbilityLevel((u),(1110458957))>0)or(GetUnitAbilityLevel((u),(1110455885))>0)or(GetUnitAbilityLevel((u),(1110456142))>0)or(GetUnitAbilityLevel((u),(1110456403))>0)or(GetUnitAbilityLevel((u),(1110454353))>0)or(GetUnitAbilityLevel((u),(1110455382))>0)or(GetUnitAbilityLevel((u),(1110456114))>0)or(GetUnitAbilityLevel((u),(1112891758))>0)or(GetUnitAbilityLevel((u),(1110456629))>0)or(GetUnitAbilityLevel((u),(1110455113))>0)or(GetUnitAbilityLevel((u),(1110458692))>0)or(GetUnitAbilityLevel((u),(1110458693))>0)or(GetUnitAbilityLevel((u),(1110458949))>0)or(GetUnitAbilityLevel((u),(1110458950))>0)or(GetUnitAbilityLevel((u),(1110454328))>0)or(GetUnitAbilityLevel((u),(1110455362))>0)or(GetUnitAbilityLevel((u),(1110454854))>0)or(GetUnitAbilityLevel((u),(1112896368))>0)or(GetUnitAbilityLevel((u),(1112896372))>0)or(GetUnitAbilityLevel((u),(1110459460))>0)or((LoadInteger(LY,(GetHandleId((u))),((4293))))==1)==true or((LoadInteger(LY,(GetHandleId((u))),((4303))))==1)or(GetUnitAbilityLevel((u),(1110459186))>0)or(GetUnitAbilityLevel((u),(1110455891))>0)or(GetUnitAbilityLevel((u),(1110454867))>0)or(GetUnitAbilityLevel((u),(1110456133))>0)endfunctionfunction BH1 takes unit u returns booleanreturn BG1(u)or BE1(u)or IsUnitPaused(u)or PII(u)endfunctionfunction BZ1 takes integer id returns booleanreturn id==1093682265 or id==1093752642 or id==1093677622 or id==1093679446 or id==1095263841 or id==1093684314 or id==1093685582 or id==1093685065 or id==1093817677endfunctionfunction BV1 takes unit u returns booleanreturn BD1(u)or(GetUnitAbilityLevel((u),(1110454606))>0)or GetUnitAbilityLevel(u,1097167980)>0 or GetUnitAbilityLevel(u,1096971630)>0 or(GetUnitAbilityLevel((u),(1110455091))>0)or(GetUnitAbilityLevel((u),(1110460228))>0)endfunctionfunction BW1 takes integer BX1,integer BY1,boolean extraColor returns nothinglocal integer x=0loopexitwhen x>15call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_LUMBER,BX1)call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_FOOD_USED,BY1)set x=x+1endloopendfunctionfunction BJ1 takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return id==1848652343 or id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092599 or id==1966092601 or id==1966092600 or id==1966092609 or id==1966092610 or id==1966092611endfunctionfunction BK1 takes unit u,boolean b returns nothingcall SetUnitInvulnerable(u,b)call SaveBoolean(LY,(GetHandleId(u)),(509),(b))endfunctionfunction BL1 takes unit u returns booleanreturn(LoadBoolean(LY,(GetHandleId(u)),(509)))or GetUnitAbilityLevel(u,1098282348)>0endfunctionfunction BM1 takes unit u returns booleanreturn((LoadInteger(LY,(GetHandleId((u))),((4420))))==1)or((LoadInteger(LY,(GetHandleId((u))),((4421))))==1)endfunctionfunction BN1 takes real x,real y returns locationlocal real IV1local real IW1local integer i=0loopexitwhen i>40set IV1=x+i*20set IW1=y+i*20if IsPointInRegion(LN,IV1,IW1)==false thenreturn Location(IV1,IW1)endifset IV1=x+i*20set IW1=y-i*20if IsPointInRegion(LN,IV1,IW1)==false thenreturn Location(IV1,IW1)endifset IV1=x-i*20set IW1=y+i*20if IsPointInRegion(LN,IV1,IW1)==false thenreturn Location(IV1,IW1)endifset IV1=x-i*20set IW1=y-i*20if IsPointInRegion(LN,IV1,IW1)==false thenreturn Location(IV1,IW1)endifset i=i+1endloopreturn Location(x,y)endfunctionfunction BS1 takes unit u returns nothingcall UnitRemoveAbility(u,1096971630)call SaveInteger(LY,(GetHandleId(u)),(790),(0))endfunctionfunction BT1 takes unit u returns nothinglocal integer S5I=GetHandleId(u)local integer BR1=(LoadInteger(LY,(S5I),(790)))call IA1(u,1096971630)set BR1=BR1+1call SaveInteger(LY,(S5I),(790),(BR1))endfunctionfunction BP1 takes unit u returns nothinglocal integer S5I=GetHandleId(u)local integer BR1=(LoadInteger(LY,(S5I),(790)))set BR1=IMaxBJ(BR1-1,0)call SaveInteger(LY,(S5I),(790),(BR1))if BR1==0 thencall BS1(u)endifendfunctionfunction BQ1 takes unit u returns booleanif u==BU0 thenreturn trueendifif u==C00 thenreturn trueendifif u==CI0 thenreturn trueendifif u==C10 thenreturn trueendifif u==CO0 thenreturn trueendifif u==C20 thenreturn trueendifif u==C30 thenreturn trueendifif u==C40 thenreturn trueendifif u==C50 thenreturn trueendifif u==C60 thenreturn trueendifif u==C70 thenreturn trueendifif u==C80 thenreturn trueendifif u==C90 thenreturn trueendifif u==CA0 thenreturn trueendifif u==CB0 thenreturn trueendifif u==CC0 thenreturn trueendifif u==CD0 thenreturn trueendifif u==I70 thenreturn trueendifif u==I80 thenreturn trueendifif u==I90 thenreturn trueendifif u==IA0 thenreturn trueendifif u==IB0 thenreturn trueendifif u==IC0 thenreturn trueendifif u==ID0 thenreturn trueendifif u==IE0 thenreturn trueendifif u==IF0 thenreturn trueendifif u==IG0 thenreturn trueendifif u==IH0 thenreturn trueendifif u==IZ0 thenreturn trueendifif u==IV0 thenreturn trueendifif u==IW0 thenreturn trueendifif u==IX0 thenreturn trueendifif u==IY0 thenreturn trueendifif u==IJ0 thenreturn trueendifreturn falseendfunctionfunction BU1 takes unit u returns booleanreturn GetUnitAbilityLevel(u,1110455864)>0 or GetUnitAbilityLevel(u,1110456148)>0 or GetUnitAbilityLevel(u,1110456118)>0 or GetUnitAbilityLevel(u,1112504171)>0 or GetUnitAbilityLevel(u,1110455378)>0 or GetUnitAbilityLevel(u,1110458677)>0 or GetUnitAbilityLevel(u,1110454609)>0 or GetUnitAbilityLevel(u,1110454326)>0 or GetUnitAbilityLevel(u,1114205814)>0 or GetUnitAbilityLevel(u,1097886070)>0 or GetUnitAbilityLevel(u,1093677617)>0 or GetUnitAbilityLevel(u,1093684020)>0 or GetUnitAbilityLevel(u,1093687362)>0 or GetUnitAbilityLevel(u,1093687858)>0 or GetUnitAbilityLevel(u,1093748545)>0 or GetUnitAbilityLevel(u,1093748823)>0 or GetUnitAbilityLevel(u,1093748824)>0 or GetUnitAbilityLevel(u,1093677130)>0 or GetUnitAbilityLevel(u,1110456395)>0 or GetUnitAbilityLevel(u,1110456408)>0 or GetUnitAbilityLevel(u,1110455097)>0 or GetUnitAbilityLevel(u,1110454347)>0 or GetUnitAbilityLevel(u,1112041075)>0 or GetUnitAbilityLevel(u,1093743664)>0 or GetUnitAbilityLevel(u,1110454833)>0 or GetUnitAbilityLevel(u,1093687876)>0 or GetUnitAbilityLevel(u,1093684052)>0 or GetUnitAbilityLevel(u,1110460216)>0 or GetUnitAbilityLevel(u,1093817392)>0 or GetUnitAbilityLevel(u,1093817178)>0endfunctionfunction C01 takes unit u,player p returns booleanreturn BU1(u)==false or IsUnitVisible(GetFilterUnit(),p)==trueendfunctionfunction CI1 takes unit SWI returns booleanlocal integer C11=GetUnitTypeId(SWI)return C11==1848651828 or C11==1848652103 or C11==1848652099 or C11==1848652088 or C11==1697656907 or C11==1697656905 or C11==1697656908 or C11==1697657162endfunctionfunction CO1 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==falseendfunctionfunction GenericCondition_BasicsWithSiege takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or(GetUnitTypeId(GetFilterUnit())==1970107511 or GetUnitTypeId(GetFilterUnit())==1966092370 or GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1697657398))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==falseendfunctionfunction C21 takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0endfunctionfunction GenericCondition_BasicsAndVisible takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction GenericCondition_BasicsAndStructure takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==falseendfunctionfunction GenericCondition_Structure takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==falseendfunctionfunction GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructure takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction C31 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructureWithAncient takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)endfunctionfunction GenericCondition_EnemyUnitsExNoInvisAndStructureWithAncient takes nothing returns booleanreturn IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)endfunctionfunction C41 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1970107511)endfunctionfunction C51 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyUnitsVisible takes nothing returns booleanreturn(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction GenericCondition_EnemyUnitsAndVisibleOrWW takes nothing returns booleanreturn(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))or BU1(GetFilterUnit()))endfunctionfunction C61 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction C71 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or(GetUnitTypeId(GetFilterUnit())==1970107511 or GetUnitTypeId(GetFilterUnit())==1966092370 or GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1697657398))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction C81 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction C91 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(BU1(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))==true)endfunctionfunction CA1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyUnitsExHeroesVision takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction CB1 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==trueendfunctionfunction CC1 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyUnitsExHeroesNoDotaInvis takes nothing returns booleanreturn((IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)and BU1(GetFilterUnit())==falseendfunctionfunction GenericCondition_EnemyUnitsExHeroesNoDotaInvis2 takes nothing returns booleanreturn((IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)and(BU1(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))==true)endfunctionfunction GenericCondition_EnemyUnitsExNoHeroes takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==falseendfunctionfunction CD1 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0endfunctionfunction CE1 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CF1 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyUnitsExNoImmuneNoInvisWithAncient takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction GenericCondition_EnemyUnitsExNoImmuneWithAncient takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CG1 takes nothing returns booleanreturn IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CH1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction GenericCondition_EnemyUnitsNoNeutrals takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and GetOwningPlayer(GetFilterUnit())!=DOendfunctionfunction CZ1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CV1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)endfunctionfunction CW1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CX1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CY1 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==falseendfunctionfunction CJ1 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))endfunctionfunction GenericCondition_EnemyUnitsAndStructureWithAncientsEx takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false)endfunctionfunction CK1 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CL1 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CM1 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and T2I(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CN1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and T2I(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CS1 takes nothing returns booleanreturn IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction CT1 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CR1 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_MyUnitsEx takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GK)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_MyUnits takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CP1 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or GetOwningPlayer(GetFilterUnit())==BO[0]or GetOwningPlayer(GetFilterUnit())==CO[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CQ1 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction CU1 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction D01 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction DI1 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))endfunctionfunction D11 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction DO1 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_EnemyHeroesExNoDotAInvis takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)or BU1(GetEnumUnit())endfunctionfunction D21 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==true and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))endfunctionfunction GenericCondition_AllUnits takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction D31 takes nothing returns booleanreturn((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0endfunctionfunction GenericCondition_AllNonNeutrals takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and GetOwningPlayer(GetFilterUnit())!=DOendfunctionfunction D41 takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)endfunctionfunction D51 takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))and GetUnitTypeId(GetFilterUnit())!=1211123027endfunctionfunction D61 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=GetFilterUnit()and IsUnitIllusion(GetFilterUnit())==falseendfunctionfunction GenericCondition_AllHeroesAndIllusions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetFilterUnit())==true)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_Hero takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==trueendfunctionfunction GenericCondition_EnemyUnitsExVisible takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction D71 takes nothing returns booleanreturn((IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK)))and GetUnitTypeId(GetFilterUnit())!=1848657461endfunctionfunction GenericCondition_EnemyUnitsExNoWW takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))or(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))==false and BU1(GetFilterUnit()))==false)endfunctionfunction GenericCondition_EnemyUnitsExVisibleAttackable takes nothing returns booleanreturn((IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK)))and BC1(GetFilterUnit())==falseendfunctionfunction GenericCondition_EnemyUnitsExVisibleAttackableNoZombie takes nothing returns booleanreturn(((IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK)))and BC1(GetFilterUnit())==false)and GetUnitTypeId(GetFilterUnit())!=1848657461endfunctionfunction GenericCondition_RegularUnits takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))endfunctionfunction GenericCondition_RegularUnitsExVisible takes nothing returns booleanreturn((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction D81 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction D91 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(GetFilterUnit())!=1848657461endfunctionfunction GenericCondition_FloatingHeroes takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502 or GetUnitTypeId(GetFilterUnit())==1211122767 or GetUnitTypeId(GetFilterUnit())==1311788343 or GetUnitTypeId(GetFilterUnit())==1311788354 or GetUnitTypeId(GetFilterUnit())==1311788355 or GetUnitTypeId(GetFilterUnit())==1311788367 or GetUnitTypeId(GetFilterUnit())==1311788353 or GetUnitTypeId(GetFilterUnit())==1311788375endfunctionfunction DA1 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GK))==true and TUI(GetFilterUnit())>0endfunctionfunction DB1 takes real DC1 returns integerif DC1>=4.00 thenreturn 24elseif DC1>=3.75 thenreturn 23elseif DC1>=3.5 thenreturn 22elseif DC1>=3.25 thenreturn 21elseif DC1>=3 thenreturn 20elseif DC1>=2.8 thenreturn 19elseif DC1>=2.75 thenreturn 18elseif DC1>=2.6 thenreturn 17elseif DC1>=2.5 thenreturn 16elseif DC1>=2.4 thenreturn 15elseif DC1>=2.25 thenreturn 14elseif DC1>=2.2 thenreturn 13elseif DC1>=2 thenreturn 12elseif DC1>=1.8 thenreturn 11elseif DC1>=1.75 thenreturn 10elseif DC1>=1.65 thenreturn 9elseif DC1>=1.5 thenreturn 8elseif DC1>=1.4 thenreturn 7elseif DC1>=1.25 thenreturn 6elseif DC1>=1.2 thenreturn 5elseif DC1>=1 thenreturn 4elseif DC1>=0.75 thenreturn 3elseif DC1>=0.5 thenreturn 2elseif DC1>=0.25 thenreturn 1endifreturn 1endfunctionfunction DD1 takes unit P7I,unit P8I,real DC1 returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=DB1(DC1)call UnitAddAbility(I01,1093687350)call SetUnitAbilityLevel(I01,1093687350,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendfunctionfunction DE1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer DF1=(LoadInteger(LY,(S5I),(73)))local unit SFI=NYI(DF1)local integer NPI=GetTriggerEvalCount(t)local real y=(NPI-13)*(NPI-13)if NPI<26 thenif RNI(SFI)==false thencall SetUnitFlyHeight(SFI,375-y,0)endifelsecall PauseUnit(SFI,false)if RNI(SFI)==false thencall SetUnitFlyHeight(SFI,GetUnitDefaultFlyHeight(SFI),0)endifcall P6I((LoadUnitHandle(LY,(S5I),(2))),SFI,1,(LoadReal(LY,(S5I),(20))))call DD1((LoadUnitHandle(LY,(S5I),(2))),SFI,(LoadReal(LY,(S5I),(57))))call NXI(DF1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifreturn falseendfunctionfunction DG1 takes unit SFI,unit P7I,real M5I,real DH1,real DZ1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call PauseUnit(SFI,true)if RNI(SFI)==false thencall UnitAddAbility(SFI,1097691750)call UnitRemoveAbility(SFI,1097691750)endifcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl",GetUnitX(SFI),GetUnitY(SFI)))call SaveInteger(LY,(S5I),(73),(NKI(SFI)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(20),((DH1)*1.0))call SaveReal(LY,(S5I),(57),((M5I)*1.0))call TriggerRegisterTimerEvent(t,0.02/0.52*DZ1,true)call TriggerAddCondition(t,Condition(function DE1))endfunctionfunction DV1 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false and RKI(GetEnumUnit())==false and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4253))))==1)==false thencall GroupAddUnit(XK,GetEnumUnit())call DG1(GetEnumUnit(),GK,BK,AK,CK)endifendfunctionfunction DW1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real DH1=(LoadReal(LY,(S5I),(20)))local real M5I=(LoadReal(LY,(S5I),(57)))local real x1=(LoadReal(LY,(S5I),(64)))local real y1=(LoadReal(LY,(S5I),(65)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local real w=(LoadReal(LY,(S5I),(68)))local real DX1=(LoadReal(LY,(S5I),(44)))local real a=Atan2(y2-y1,x2-x1)local group g=(LoadGroupHandle(LY,(S5I),(22)))local group DY1=NTI()local real DJ1=DX1*0.0625local real DK1=(LoadReal(LY,(S5I),(71)))local real DL1=(LoadReal(LY,(S5I),(72)))local real DM1=(LoadReal(LY,(S5I),(70)))local real DN1=(LoadReal(LY,(S5I),(63)))if DJ1>QNI(x1,y1,x2,y2)thenset x1=x2set y1=y2elseset x1=x1+DJ1*Cos(a)set y1=y1+DJ1*Sin(a)endifset GK=P7Iset AK=DH1set BK=M5Iset CK=DN1set XK=gcall GroupEnumUnitsInRange(DY1,x1,y1,w,Condition(function CA1))call ForGroup(DY1,function DV1)call NSI(DY1)if QNI(x1,y1,DK1,DL1)>=DM1 thencall SaveReal(LY,(S5I),(71),((x1)*1.0))call SaveReal(LY,(S5I),(72),((y1)*1.0))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl",x1,y1))endifcall SaveReal(LY,(S5I),(64),((x1)*1.0))call SaveReal(LY,(S5I),(65),((y1)*1.0))if x1==x2 and y1==y2 thenif(LoadBoolean(LY,(S5I),(69)))==true thencall NSI(g)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset g=nullset DY1=nullset P7I=nullset t=nullreturn falseendfunctionfunction DS1 takes unit P7I,unit DT1,real DH1,real M5I,real DN1,real x1,real y1,real x2,real y2,real w,group DR1,boolean DP1,real DX1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QWI=QNI(x1,y1,x2,y2)local integer DQ1=A21(QWI,NN)local real DM1=QWI/DQ1local group gcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(20),((DH1)*1.0))call SaveReal(LY,(S5I),(57),((M5I)*1.0))call SaveReal(LY,(S5I),(63),((DN1)*1.0))call SaveReal(LY,(S5I),(64),((x1)*1.0))call SaveReal(LY,(S5I),(65),((y1)*1.0))call SaveReal(LY,(S5I),(66),((x2)*1.0))call SaveReal(LY,(S5I),(67),((y2)*1.0))call SaveReal(LY,(S5I),(68),((w)*1.0))call SaveReal(LY,(S5I),(44),((DX1)*1.0))if DR1==null thenset g=NTI()if DT1!=null and IsUnitIllusion(DT1)==false thencall GroupAddUnit(g,DT1)endifcall SaveGroupHandle(LY,(S5I),(22),(g))call SaveBoolean(LY,(S5I),(69),(DP1))set g=nullelsecall SaveGroupHandle(LY,(S5I),(22),(DR1))call SaveBoolean(LY,(S5I),(69),(DP1))endifcall SaveReal(LY,(S5I),(70),((DM1)*1.0))call SaveReal(LY,(S5I),(71),((x1)*1.0))call SaveReal(LY,(S5I),(72),((y1)*1.0))call TriggerRegisterTimerEvent(t,0.0625,true)call TriggerAddCondition(t,Condition(function DW1))set t=nullendfunctionfunction DU1 takes unit P7I,integer SUI,integer E01 returns nothinglocal integer iif FUI[1]==0 thenreturnendifset i=1loopexitwhen i>10call UnitRemoveAbility(P7I,FUI[i])set i=i+1endloopset i=1loopexitwhen i>10call UnitRemoveAbility(P7I,G0I[i])set i=i+1endloopset i=1loopexitwhen i>10call UnitRemoveAbility(P7I,GII[i])set i=i+1endloopset i=1loopexitwhen i>10call UnitRemoveAbility(P7I,G1I[i])set i=i+1endloopcall UnitRemoveAbility(P7I,1110458963)if SUI==1 thencall UnitAddAbility(P7I,FUI[E01])elseif SUI==2 thencall UnitAddAbility(P7I,G0I[E01])elseif SUI==3 thencall UnitAddAbility(P7I,GII[E01])elseif SUI==4 thencall UnitAddAbility(P7I,G1I[E01])endifendfunctionfunction EI1 takes integer E11 returns nothingset TN=TN+1set SN[TN]=E11endfunctionfunction EO1 takes unit u returns nothinglocal integer i=1loopexitwhen i>TNcall UnitRemoveAbility(u,SN[i])set i=i+1endloopendfunctionfunction E31 takes integer IB1 returns booleanreturn IB1==1095331943 or IB1==1093677654 or IB1==1094938741 or IB1==1093744708 or IB1==1093750613 or IB1==1095328633 or IB1==1093751617 or IB1==1093817394endfunctionfunction E41 takes unit P8I returns nothingcall UnitRemoveAbility(P8I,1097167980)call UnitRemoveAbility(P8I,1112044643)call UnitRemoveAbility(P8I,1093752627)call UnitRemoveAbility(P8I,1110459471)call UnitRemoveAbility(P8I,1110454869)call DU1(P8I,0,0)endfunctionfunction E51 takes nothing returns booleanif E31(GetSpellAbilityId())thencall E41(GetSpellTargetUnit())endifreturn falseendfunctionfunction E71 takes integer E81 returns integerif G10[E81]==0 thenreturn E81elsereturn G10[E81]endifendfunctionfunction E91 takes integer id returns booleanreturn id==HY0 or id==HW0 or id==HV0 or id==HX0 or id==HZ0 or id==HJ0endfunctionfunction EA1 takes unit SWI,integer U9I returns booleanlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if UAI!=null and GetItemTypeId(UAI)==U9I thenset UAI=nullreturn trueendifset MLI=MLI+1endloopset UAI=nullreturn falseendfunctionfunction EB1 takes item AO1 returns integerlocal integer U9Ilocal integer i=1if AO1==null thenreturn-2endifset U9I=GetItemTypeId(AO1)loopexitwhen i>GO0if FT0[i]==U9I or FR0[i]==U9I or FQ0[i]==U9I thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction EC1 takes item AO1 returns integerlocal integer U9Ilocal integer i=1if AO1==null thenreturn-2endifset U9I=GetItemTypeId(AO1)loopexitwhen i>GO0if FT0[i]==U9I or FR0[i]==U9I thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction ED1 takes unit SWI returns integerlocal integer EE1if SWI==null thenreturn-2endifset EE1=GetUnitTypeId(SWI)if EE1==1214409837 or EE1==1211119192 or EE1==1211119193 or EE1==1211119191 or EE1==1211122243 thenreturn JF0elseif EE1==1211117620 thenreturn JZ0elseif EE1==1430466872 thenreturn JV0elseif EE1==1215130471 thenreturn JJ0elseif EE1==1432580716 or EE1==1429221720 thenreturn KJ0elseif EE1==1211117640 thenreturn JM0elseif EE1==1430466609 thenreturn JN0elseif EE1==1332898670 thenreturn JS0elseif EE1==1215128178 thenreturn JQ0elseif EE1==1214931305 thenreturn JT0elseif EE1==1433168227 thenreturn JH0elseif EE1==1164666213 thenreturn JG0elseif EE1==1164799603 thenreturn JE0elseif EE1==1162032439 thenreturn JR0elseif EE1==1429221445 thenreturn JY0elseif EE1==1160785973 thenreturn JX0elseif EE1==1160786241 thenreturn JP0elseif EE1==1430467634 thenreturn JW0elseif EE1==1315988077 thenreturn K80elseif EE1==1211117652 thenreturn K00elseif EE1==1215723364 thenreturn KI0elseif EE1==1315070563 thenreturn K10elseif EE1==1211117633 thenreturn K20elseif EE1==1432646245 thenreturn K30elseif EE1==1160786000 thenreturn K40elseif EE1==1429221451 thenreturn K50elseif EE1==1211117649 thenreturn K60elseif EE1==1211117653 thenreturn K70elseif EE1==1429221446 thenreturn K90elseif EE1==1311786311 thenreturn KA0elseif EE1==1162032181 thenreturn KB0elseif EE1==1328558154 thenreturn KC0elseif EE1==1332963428 thenreturn KD0elseif EE1==1432642913 thenreturn KE0elseif EE1==1311781207 thenreturn KF0elseif EE1==1211117643 thenreturn KG0elseif EE1==1332766568 thenreturn KH0elseif EE1==1333027688 thenreturn KZ0elseif EE1==1211117650 thenreturn JL0elseif EE1==1211119433 thenreturn JL0elseif EE1==1311780930 thenreturn KV0elseif EE1==1160786243 thenreturn KW0elseif EE1==1160785970 thenreturn KX0elseif EE1==1162032951 thenreturn KY0elseif EE1==1429221456 thenreturn KK0elseif EE1==1164799855 thenreturn KL0elseif EE1==1211117646 thenreturn KM0elseif EE1==1160786510 or EE1==1160786511 thenreturn KN0elseif EE1==1211117641 thenreturn KS0elseif EE1==1211117636 thenreturn KT0elseif EE1==1430468144 thenreturn KR0elseif EE1==1311781185 thenreturn KP0elseif EE1==1311787088 thenreturn KQ0elseif EE1==1214345830 thenreturn KU0elseif EE1==1211122767 thenreturn L00elseif EE1==1433105516 thenreturn LI0elseif EE1==1160786506 thenreturn LO0elseif EE1==1160786520 thenreturn L10elseif EE1==1316252014 thenreturn L20elseif EE1==1160786504 thenreturn L30elseif EE1==1160786738 thenreturn JK0elseif EE1==1160786502 thenreturn L40elseif EE1==1211117617 or EE1==1211122513 thenreturn L50elseif EE1==1328558389 thenreturn L60elseif EE1==1214344551 thenreturn L70elseif EE1==1311788373 or EE1==1311788375 thenreturn L80endifreturn JD0endfunctionfunction EF1 takes unit SWI returns integerlocal integer EE1if SWI==null thenreturn-2endifset EE1=GetUnitTypeId(SWI)if EE1==1214409837 or EE1==1211119192 or EE1==1211119193 or EE1==1211119191 or EE1==1211122243 thenreturn 1093686348elseif EE1==1211117620 thenreturn 1093686352elseif EE1==1430466872 thenreturn 1093686354elseif EE1==1215130471 thenreturn 1093815124elseif EE1==1432580716 or EE1==1429221720 thenreturn 0elseif EE1==1211117640 thenreturn 1093686358elseif EE1==1430466609 thenreturn 1093686360elseif EE1==1332898670 thenreturn 1093686362elseif EE1==1215128178 thenreturn 1093686577elseif EE1==1214931305 thenreturn 1093686579elseif EE1==1433168227 thenreturn 1093686581elseif EE1==1164666213 thenreturn 1093686583elseif EE1==1164799603 thenreturn 1093686585elseif EE1==1162032439 thenreturn 1093686594elseif EE1==1429221445 thenreturn 1093686596elseif EE1==1160785973 thenreturn 1093686598elseif EE1==1160786241 thenreturn 1093686600elseif EE1==1430467634 thenreturn 1093686602elseif EE1==1315988077 thenreturn 1093747269elseif EE1==1211117652 thenreturn 1093747257elseif EE1==1215723364 thenreturn 1093747265elseif EE1==1315070563 thenreturn 1093747266elseif EE1==1211117633 thenreturn 1093747541elseif EE1==1432646245 thenreturn 1093747271elseif EE1==1160786000 thenreturn 1093747274elseif EE1==1429221451 thenreturn 1093747267elseif EE1==1211117649 thenreturn 1093747273elseif EE1==1211117653 thenreturn 1093747268elseif EE1==1429221446 thenreturn 1093747545elseif EE1==1311786311 thenreturn 1093747762elseif EE1==1162032181 thenreturn 1093747761elseif EE1==1328558154 thenreturn 1093747546elseif EE1==1332963428 thenreturn 1093747760elseif EE1==1432642913 thenreturn 1093747763elseif EE1==1311781207 thenreturn 1093747764elseif EE1==1211117643 thenreturn 1093748529elseif EE1==1332766568 thenreturn 1093750100elseif EE1==1333027688 thenreturn 1093750320elseif EE1==1311780930 thenreturn 1093751123elseif EE1==1160786243 thenreturn 1093752148elseif EE1==1160785970 thenreturn 1093752149elseif EE1==1162032951 thenreturn 1093752369elseif EE1==1429221456 thenreturn 1093752409elseif EE1==1164799855 thenreturn 1093752644elseif EE1==1211117646 thenreturn 1093808467elseif EE1==1160786510 or EE1==1160786511 thenreturn 1093808951elseif EE1==1211117641 thenreturn 1093809989elseif EE1==1211117636 thenreturn 1093810241elseif EE1==1430468144 thenreturn 1093814600elseif EE1==1311781185 thenreturn 1093816642elseif EE1==1311787088 thenreturn 1093816646elseif EE1==1214345830 thenreturn 1093817143elseif EE1==1211122767 thenreturn 1093817431elseif EE1==1433105516 thenreturn 1093817434elseif EE1==1160786506 thenreturn 1093817923elseif EE1==1160786520 thenreturn 1093817924elseif EE1==1316252014 thenreturn 1093818180elseif EE1==1160786504 thenreturn 1093818439elseif EE1==1160786738 thenreturn 1093818705elseif EE1==1160786502 thenreturn 1093818708elseif EE1==1211117617 or EE1==1211122513 thenreturn 1093818931elseif EE1==1328558389 thenreturn 1093818951elseif EE1==1214344551 thenreturn 1093873972elseif EE1==1311788373 or EE1==1311788375 thenreturn 1093873998endifreturn 0endfunctionfunction EG1 takes item BA1 returns booleanlocal integer i=1loopexitwhen i>M50if BA1==M40[i]thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction EH1 takes item AO1 returns booleanlocal integer E81=EB1(AO1)if E81==JD0 or E81==JE0 or E81==JF0 or E81==JG0 or E81==JH0 or E81==JZ0 or E81==JV0 or E81==JW0 or E81==JX0 or E81==JY0 or E81==JJ0 or E81==JM0 or E81==JN0 or E81==JS0 or E81==JT0 or E81==JR0 or E81==JP0 or E81==JQ0 or E81==K00 or E81==KI0 or E81==K10 or E81==K20 or E81==K30 or E81==K40 or E81==K50 or E81==K60 or E81==K70 or E81==K90 or E81==KA0 or E81==KB0 or E81==KC0 or E81==KD0 or E81==KE0 or E81==KF0 or E81==KG0 or E81==K80 or E81==KH0 or E81==KZ0 thenreturn trueelseif E81==KV0 or E81==KW0 or E81==KX0 or E81==KY0 or E81==KJ0 or E81==KK0 or E81==KL0 or E81==KM0 or E81==KN0 or E81==KS0 or E81==KT0 or E81==KR0 or E81==KQ0 or E81==KP0 or E81==KU0 or E81==LI0 or E81==L00 or E81==LO0 or E81==L10 or E81==L20 or E81==JK0 or E81==L40 or E81==L50 or E81==L60 or E81==L70 or E81==L80 thenreturn trueendifreturn falseendfunctionfunction EZ1 takes integer E81 returns booleanreturn E81==WJ0 or E81==ZE0 or E81==Z50 or E81==Z70 or E81==Z80 or E81==ZA0 or E81==ZB0 or E81==ZC0 or E81==Z60 or E81==ZH0 or E81==ZZ0 or E81==ZG0endfunctionfunction EV1 takes integer E81 returns booleanreturn E81==X60 or E81==HP0 or E81==V40 or E81==V50 or E81==WM0 or E81==VL0 or E81==HK0 or E81==X10 or E81==HU0endfunctionfunction EW1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer U9I=(LoadInteger(LY,(S5I),(74)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local boolean EX1=(LoadBoolean(LY,(S5I),(75)))local integer EY1=(LoadInteger(LY,(S5I),(76)))local item EJ1=CreateItem(U9I,x,y)call SetItemPlayer(EJ1,p,true)call SetItemUserData(EJ1,0)if EX1 thencall SetItemCharges(EJ1,EY1)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset p=nullreturn falseendfunctionfunction EK1 takes integer U9I,real x,real y,player p,boolean EX1,integer EY1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(74),(U9I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SavePlayerHandle(LY,(S5I),(54),(p))call SaveBoolean(LY,(S5I),(75),(EX1))call SaveInteger(LY,(S5I),(76),(EY1))call TriggerAddCondition(t,Condition(function EW1))call TriggerRegisterTimerEvent(t,0,false)set t=nullendfunctionfunction DisableItemTriggers takes nothing returns nothingcall DisableTrigger(LY0)endfunctionfunction EnableItemTriggers takes nothing returns nothingcall EnableTrigger(LY0)endfunctionfunction EL1 takes item AO1 returns nothingcall DisableTrigger(LY0)call RemoveItem(AO1)call EnableTrigger(LY0)endfunctionfunction EM1 takes unit SWI,integer U9I,item EN1 returns itemlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if UAI!=null and UAI!=EN1 and GetItemTypeId(UAI)==U9I thenset UAI=nullreturn UnitItemInSlot(SWI,MLI)endifset MLI=MLI+1endloopset UAI=nullreturn nullendfunctionfunction ES1 takes unit SWI,integer U9I returns itemlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if(UAI!=null)and(GetItemTypeId(UAI)==U9I)thenset UAI=nullreturn UnitItemInSlot(SWI,MLI)endifset MLI=MLI+1endloopset UAI=nullreturn nullendfunctionfunction ET1 takes player p,unit SWI,integer E81,item EN1 returns itemlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if UAI!=null and UAI!=EN1 and EB1(UAI)==E81 and(GetItemPlayer(UAI)==p or E81==ZA0 or E81==ZB0)thenset UAI=nullreturn UnitItemInSlot(SWI,MLI)endifset MLI=MLI+1endloopset UAI=nullreturn nullendfunctionfunction ER1 takes player p,unit SWI,integer E81 returns itemlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if(UAI!=null)and(EB1(UAI)==E81)and(GetItemPlayer(UAI)==p or E81==ZA0 or E81==ZB0)thenset UAI=nullreturn UnitItemInSlot(SWI,MLI)endifset MLI=MLI+1endloopset UAI=nullreturn nullendfunctionfunction EP1 takes unit SWI,integer E81 returns itemlocal integer MLIlocal item UAIset MLI=0loopexitwhen MLI>5set UAI=UnitItemInSlot(SWI,MLI)if(UAI!=null)and(EB1(UAI)==E81)thenset UAI=nullreturn UnitItemInSlot(SWI,MLI)endifset MLI=MLI+1endloopset UAI=nullreturn nullendfunctionfunction EQ1 takes unit SWI returns integerlocal integer i=0local integer n=0local integer EU1=UnitInventorySize(SWI)-1loopexitwhen i>EU1if UnitItemInSlot(SWI,i)==null thenset n=n+1endifset i=i+1endloopreturn nendfunctionfunction F01 takes item AO1 returns integerlocal integer U9Ilocal integer i=1if AO1==null thenreturn-2endifset U9I=GetItemTypeId(AO1)loopexitwhen i>GO0if FT0[i]==U9I or FR0[i]==U9I thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction FI1 takes item AO1 returns integerlocal integer U9Ilocal integer i=1if AO1==null thenreturn-2endifset U9I=GetItemTypeId(AO1)loopexitwhen i>GO0if FQ0[i]==U9I thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction F11 takes item AO1 returns integerlocal integer U9Ilocal integer i=1if AO1==null thenreturn-2endifset U9I=GetItemTypeId(AO1)loopexitwhen i>GO0if FQ0[i]==U9I thenreturn FR0[i]endifset i=i+1endloopreturn-1endfunctionfunction FO1 takes unit SWI returns integerlocal integer EE1local integer i=0if SWI==null thenreturn-2endifset EE1=GetUnitTypeId(SWI)loopexitwhen i>GO0if FP0[i]==EE1 thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction F21 takes item F31 returns stringif F31==null thenreturn"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"endifreturn G00[EB1(F31)]endfunctionfunction F41 takes item AO1 returns booleanreturn EB1(AO1)==W30 or EB1(AO1)==W40 or EB1(AO1)==GZ0 or EB1(AO1)==GV0endfunctionfunction F51 takes integer E81 returns integerif Z80==E81 thenreturn 4endifif ZA0==E81 or ZB0==E81 or ZF0==E81 or Z60==E81 or ZH0==E81 or ZG0==E81 thenreturn 2endifreturn 1endfunctionfunction F61 takes item AO1 returns booleanreturn GetItemType(AO1)==ITEM_TYPE_POWERUP or GetItemType(AO1)==ITEM_TYPE_PURCHASABLE or GetItemType(AO1)==ITEM_TYPE_MISCELLANEOUSendfunctionfunction F71 takes unit SWI,integer U9I returns booleanlocal item BA1local boolean F81=falselocal boolean F91=trueset BA1=CreateItem(U9I,GetUnitX(SWI),GetUnitY(SWI))if GetUnitAbilityLevel(SWI,1095331446)==0 thenset F81=truecall IA1(SWI,1095331446)endifif UnitAddItem(SWI,BA1)==false thencall RemoveItem(BA1)set F91=falseelseif GetWidgetLife(BA1)>0 thencall RemoveItem(BA1)set F91=falseendifif F81 thencall UnitRemoveAbility(SWI,1095331446)endifset BA1=nullreturn F91endfunctionfunction FA1 takes unit SFI returns reallocal real FB1if TII(GetOwningPlayer(SFI))thenset FB1=GetRectCenterX(O4)elseset FB1=GetRectCenterX(S3)endifreturn FB1endfunctionfunction FC1 takes unit SFI returns reallocal real FB1if TII(GetOwningPlayer(SFI))thenset FB1=GetRectCenterY(O4)elseset FB1=GetRectCenterY(S3)endifreturn FB1endfunctionfunction FD1 takes unit SFI,integer FE1,integer FF1 returns itemlocal real x=FA1(SFI)local real y=FC1(SFI)local item BA1=CreateItem(FE1,x,y)local integer i=0local boolean array FG1local item FH1call DisableTrigger(LY0)if FE1>0 thenloopexitwhen i>(UnitInventorySize(SFI)-1)if UnitItemInSlot(SFI,i)==null and i!=FF1 thenset FH1=CreateItem(1227895373,x,y)call UnitAddItem(SFI,FH1)set FG1[i]=trueelseset FG1[i]=falseendifif i==FF1 thencall EnableTrigger(LY0)call UnitAddItem(SFI,BA1)call DisableTrigger(LY0)endifset i=i+1endloopset i=0loopexitwhen i>5if FG1[i]==true thencall RemoveItem(UnitItemInSlot(SFI,i))endifset i=i+1endloopendifcall EnableTrigger(LY0)set VK=BA1set BA1=nullset FH1=nullreturn VKendfunctionfunction FZ1 takes integer SSI,integer r,integer g,integer b returns nothingset IS=IS+1set RN[IS]=rset PN[IS]=gset QN[IS]=bset UN[IS]=SSIendfunctionfunction FV1 takes unit u returns nothinglocal integer id=GetUnitTypeId(u)local integer i=1local integer a=255local boolean FW1=falseif id==1165451634 thenset a=R2I(2.55*(100-18+20*GetUnitAbilityLevel(u,1093677904)))endifloopexitwhen i>IS or FW1if UN[i]==id thenset FW1=truecall SetUnitVertexColor(u,RN[i],PN[i],QN[i],a)endifset i=i+1endloopif FW1==false thencall SetUnitVertexColor(u,255,255,255,255)endifendfunctionfunction FY1 takes unit u returns nothinglocal integer id=GetUnitTypeId(u)local integer i=1local boolean FW1=falseloopexitwhen i>IS or FW1if UN[i]==id thenset FW1=truecall SetUnitVertexColor(u,RN[i],PN[i],QN[i],0)endifset i=i+1endloopif FW1==false thencall SetUnitVertexColor(u,255,255,255,0)endifendfunctionfunction FJ1 takes player p,string FK1,integer U0I returns nothinglocal string id=I2S(GetPlayerId(p))call StoreInteger(OS,id,FK1,U0I)if T3I(WO)==false thencall RTI()endifif GetLocalPlayer()==WO thencall SyncStoredInteger(OS,id,FK1)endifendfunctionfunction FL1 takes string FM1,integer U0I returns nothingcall StoreInteger(OS,"Data",FM1,U0I)if T3I(WO)==false thencall RTI()endifif GetLocalPlayer()==WO thencall SyncStoredInteger(OS,"Data",FM1)endifendfunctionfunction FN1 takes nothing returns nothingcall FlushGameCache(InitGameCache("dr.x"))set OS=InitGameCache("dr.x")endfunctionfunction InitTrig_Traffic_Functions takes nothing returns nothingcall FN1()endfunctionfunction FS1 takes string s,string FT1,string FR1 returns stringlocal string FP1=""local integer i=0local integer FQ1=StringLength(s)local string FU1local integer G01=StringLength(FT1)local boolean FW1=falseloopexitwhen i+1>FQ1set FU1=SubString(s,i,i+G01)if FU1!=FT1 or FW1 thenset FP1=FP1+SubString(s,i,i+1)set i=i+1elseset FP1=FP1+FR1set i=i+G01set FW1=trueendifendloopreturn FP1endfunctionfunction GI1 takes player G11,player GO1 returns stringlocal string s=GetObjectName(1848656696)set s=FS1(s,"$dead",C0[GetPlayerId(G11)]+(D80[GetPlayerId((G11))])+"|r")set s=FS1(s,"$killer",C0[GetPlayerId(GO1)]+(D80[GetPlayerId((GO1))])+"|r")return sendfunctionfunction G21 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,BS[0])call UnitRemoveAbility(u,BS[1])call UnitRemoveAbility(u,BS[2])call UnitRemoveAbility(u,BS[3])call UnitRemoveAbility(u,BS[4])call UnitRemoveAbility(u,BS[5])call UnitRemoveAbility(u,BS[6])call UnitRemoveAbility(u,BS[7])call UnitRemoveAbility(u,BS[8])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=8set i=0loopexitwhen i>EU1if b[i]==1 thencall UnitAddAbility(u,BS[i])elsecall UnitRemoveAbility(u,BS[i])endifset i=i+1endloopendfunctionfunction G41 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,CS[0])call UnitRemoveAbility(u,CS[1])call UnitRemoveAbility(u,CS[2])call UnitRemoveAbility(u,CS[3])call UnitRemoveAbility(u,CS[4])call UnitRemoveAbility(u,CS[5])call UnitRemoveAbility(u,CS[6])call UnitRemoveAbility(u,CS[7])call UnitRemoveAbility(u,CS[8])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=8set i=0loopexitwhen i>EU1if b[i]==1 thencall UnitAddAbility(u,CS[i])elsecall UnitRemoveAbility(u,CS[i])endifset i=i+1endloopendfunctionfunction G61 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,DS[0])call UnitRemoveAbility(u,DS[1])call UnitRemoveAbility(u,DS[2])call UnitRemoveAbility(u,DS[3])call UnitRemoveAbility(u,DS[4])call UnitRemoveAbility(u,DS[5])call UnitRemoveAbility(u,DS[6])call UnitRemoveAbility(u,DS[7])call UnitRemoveAbility(u,DS[8])call UnitRemoveAbility(u,DS[9])call UnitRemoveAbility(u,DS[10])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=10set i=0loopexitwhen i>EU1if b[i]==1 thencall UnitAddAbility(u,DS[i])elsecall UnitRemoveAbility(u,DS[i])endifset i=i+1endloopendfunctionfunction G81 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,ES[0])call UnitRemoveAbility(u,ES[1])call UnitRemoveAbility(u,ES[2])call UnitRemoveAbility(u,ES[3])call UnitRemoveAbility(u,ES[4])call UnitRemoveAbility(u,ES[5])call UnitRemoveAbility(u,ES[6])call UnitRemoveAbility(u,ES[7])call UnitRemoveAbility(u,ES[8])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=8set i=0loopexitwhen i>EU1if b[i]==1 thencall UnitAddAbility(u,ES[i])elsecall UnitRemoveAbility(u,ES[i])endifset i=i+1endloopendfunctionfunction GA1 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,FS[0])call UnitRemoveAbility(u,FS[1])call UnitRemoveAbility(u,FS[2])call UnitRemoveAbility(u,FS[3])call UnitRemoveAbility(u,FS[4])call UnitRemoveAbility(u,FS[5])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=iset i=0loopexitwhen i>EU1if b[i]==1 thencall UnitAddAbility(u,FS[i])elsecall UnitRemoveAbility(u,FS[i])endifset i=i+1endloopendfunctionfunction GC1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer i=(LoadInteger(LY,(S5I),(77)))local string c="|c006699CC"if GetObjectName(1848657992)=="Language: English"and(DR0[(i)]!="")thenif GetTriggerEvalCount(t)==1 thenelseif GetTriggerEvalCount(t)==2 thencall DisplayTimedTextToPlayer(p,0,0,15,"Tip 1: "+c+DR0[i]+"|r")call OQ1(LE,p)elseif GetTriggerEvalCount(t)==3 thencall DisplayTimedTextToPlayer(p,0,0,15,"Tip 2: "+c+DP0[i]+"|r")call OQ1(LE,p)elseif GetTriggerEvalCount(t)==4 thencall DisplayTimedTextToPlayer(p,0,0,15,"Tip 3: "+c+DQ0[i]+"|r")call OQ1(LE,p)elseif GetTriggerEvalCount(t)==5 thencall DisplayTimedTextToPlayer(p,0,0,15,"Tip 4: "+c+DU0[i]+"|r")call OQ1(LE,p)elseif GetTriggerEvalCount(t)==6 thencall DisplayTimedTextToPlayer(p,0,0,15,"Tip 5: "+c+E00[i]+"|r")call OQ1(LE,p)endifendifif GetTriggerEvalCount(t)==5 thencall S0I(t)call FlushChildHashtable(LY,(S5I))endifreturn falseendfunctionfunction GD1 takes player p,integer i returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,10,false)call TriggerRegisterTimerEvent(t,15,false)call TriggerRegisterTimerEvent(t,300,true)call TriggerAddCondition(t,Condition(function GC1))call SavePlayerHandle(LY,(S5I),(54),(p))call SaveInteger(LY,(S5I),(77),(i))set t=nullendfunctionfunction GE1 takes unit P7I returns integerlocal integer RII=GetUnitTypeId(P7I)local integer GF1=1865429328if RII==1432646245 thenset GF1=1865429326elseif RII==1164799855 or RII==1211117641 or RII==1211119409 or RII==1160785973 thenset GF1=1865429327endifreturn GF1endfunctionfunction GG1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifset t=nullset P7I=nullset I01=nullreturn falseendfunctionfunction GH1 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),GE1(P7I),GetUnitX(P7I),GetUnitY(P7I),0)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function GG1))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))set t=nullendfunctionfunction GZ1 takes integer EE1 returns booleanlocal integer i=0loopexitwhen i>59if EE1==ZS[i]thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction GV1 takes integer SUI returns integerlocal real GW1=TimerGetElapsed(M)-Nlocal real BX1=(R2I(GW1)/60)-(1/2)local real GX1=100+SUI*SUI*1.5+BX1*15local integer MLIset MLI=R2I(GX1/50)set MLI=IMinBJ(MLI,59)set MLI=IMaxBJ(MLI,0)return MLIendfunctionfunction GY1 takes player p returns nothinglocal integer id=GetPlayerId(p)local unit GJ1=D30[id]local unit SFI=K1[id]local integer SUI=GetHeroLevel(SFI)local integer i=0loopexitwhen i>59call RemoveUnitFromStock(GJ1,ZS[i])set i=i+1endloopif X0==true thenreturnendifif TN0==false thenreturnendifcall AddUnitToStock(GJ1,ZS[GV1(SUI)],1,1)set VS[id]=ZS[GV1(SUI)]set SFI=nullset GJ1=nullendfunctionfunction GK1 takes player p returns nothinglocal integer id=GetPlayerId(p)local unit GJ1=D30[id]local unit SFI=K1[id]local integer SUI=GetHeroLevel(SFI)local integer i=0if X0==true thenreturnendifif TN0==false thenreturnendifif VS[id]==1747993652 thenreturnendifif VS[id]!=0 thencall RemoveUnitFromStock(GJ1,VS[id])endifcall AddUnitToStock(GJ1,ZS[GV1(SUI)],1,1)set VS[id]=ZS[GV1(SUI)]set SFI=nullset GJ1=nullendfunctionfunction GL1 takes nothing returns booleanif X0==true thenreturn falseendifcall GK1(BO[1])call GK1(BO[2])call GK1(BO[3])call GK1(BO[4])call GK1(BO[5])call GK1(CO[1])call GK1(CO[2])call GK1(CO[3])call GK1(CO[4])call GK1(CO[5])return falseendfunctionfunction GM1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer id=(LoadInteger(LY,(S5I),(34)))local unit GJ1=D30[id]local unit SFI=K1[id]local integer SUI=GetHeroLevel(SFI)local integer i=0call RemoveUnitFromStock(GJ1,1747993652)call AddUnitToStock(GJ1,ZS[GV1(SUI)],1,1)set VS[id]=ZS[GV1(SUI)]call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction GN1 takes player p returns nothinglocal integer id=GetPlayerId(p)local unit GJ1=D30[id]local unit SFI=K1[id]local integer SUI=GetHeroLevel(SFI)local integer i=0local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call GH1(SFI)loopexitwhen i>59call RemoveUnitFromStock(GJ1,ZS[i])set i=i+1endloopcall TriggerAddCondition(t,Condition(function GM1))call TriggerRegisterTimerEvent(t,360,false)call SaveInteger(LY,(S5I),(34),(id))set VS[id]=1747993652call RemoveUnitFromStock(GJ1,1747993652)call AddUnitToStock(GJ1,1747993652,0,1)set SFI=nullset GJ1=nullset t=nullendfunctionfunction GT1 takes unit SFI returns nothinglocal real GR1=1local integer GP1=UnitInventorySize(SFI)local integer x=0local item ilocal integer SUI=GetUnitAbilityLevel(SFI,1093677904)if SUI>0 thenif SUI==1 thenset GR1=GR1*0.8elseif SUI==2 thenset GR1=GR1*0.7elseif SUI==3 thenset GR1=GR1*0.6elseif SUI==4 thenset GR1=GR1*0.5endifendifset SUI=GetUnitAbilityLevel(SFI,1093684568)if SUI>0 thenset GR1=GR1*(1-(0.05+0.05*SUI))endifloopexitwhen x>GP1set i=UnitItemInSlot(SFI,x)if F01(i)==WF0 thenset GR1=GR1*0.65elseif F01(i)==HN0 or F01(i)==XC0 thenset GR1=GR1*0.75endifset x=x+1endloopset SUI=R2I((1-GR1)/0.05)if SUI>0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093817906,false)call IA1(SFI,1093817906)call UnitMakeAbilityPermanent(SFI,true,1093817907)call SetUnitAbilityLevel(SFI,1093817907,SUI)elsecall UnitRemoveAbility(SFI,1093817906)endifset i=nullendfunctionfunction GQ1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call GT1(SFI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction GU1 takes unit SFI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function GQ1))call TriggerRegisterTimerEvent(t,0,false)call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullendfunctionfunction H01 takes nothing returns booleanif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(F01(GetManipulatedItem())==WF0 or F01(GetManipulatedItem())==HN0 or F01(GetManipulatedItem())==XC0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thencall GT1(GetTriggerUnit())elsecall GU1(GetTriggerUnit())endifendifreturn falseendfunctionfunction H11 takes unit P7I,real HO1 returns realloopif HO1>25 thenset HO1=HO1-25elseset HO1=HO1-5endifcall SetUnitMoveSpeed(P7I,HO1)exitwhen GetUnitMoveSpeed(P7I)<522endloopreturn HO1endfunctionfunction H21 takes unit P7I returns reallocal real HO1local integer E01=(LoadInteger(LY,(GetHandleId(P7I)),(814)))local integer SUIlocal real b1local real r1local real b2local real r2local real H31local real H41if GetUnitMoveSpeed(P7I)==522 and E01>0 thenset HO1=GetUnitDefaultMoveSpeed(P7I)set SUI=GetUnitAbilityLevel(P7I,1093683512)set b1=H11(P7I,HO1)set r1=GetUnitMoveSpeed(P7I)set b2=H11(P7I,b1)set r2=GetUnitMoveSpeed(P7I)set H31=(r1-r2)/(b1-b2)-1set H41=r1/(1+H31)-b1set H31=QCI(H31,0.05*E01+1)call SetUnitMoveSpeed(P7I,HO1)return(HO1+H41)*(1+H31)elsereturn GetUnitMoveSpeed(P7I)endifendfunctionfunction H51 takes unit P7I returns reallocal real ms=GetUnitMoveSpeed(P7I)if(LoadInteger(LY,(GetHandleId(P7I)),(814)))>0 thenset ms=H21(P7I)endifif((LoadInteger(LY,(GetHandleId((P7I))),((4423))))==1)==true thenset ms=1000.endifif((LoadInteger(LY,(GetHandleId((P7I))),((4424))))==1)==true thenset ms=650endifreturn msendfunctionfunction H61 takes unit P7I,real H71,real H81,real H91 returns nothinglocal real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=Atan2(y-H81,x-H71)local real d=QNI(x,y,H71,H81)local real ms=GetUnitMoveSpeed(P7I)if P1I(P7I)==false and H91>ms and d>10*0.005 thenset x=PTI(x+(H91-ms)*0.005*Cos(a))set y=PUI(y+(H91-ms)*0.005*Sin(a))call SetUnitX(P7I,x)call SetUnitY(P7I,y)endifendfunctionfunction HA1 takes nothing returns nothingset LY=InitHashtable()set M=CreateTimer()set MS=Rect(-7040,-7680,7040,7168)call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)call SuspendTimeOfDay(false)call SetTimeOfDayScale(0.5)call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")call SetCreepCampFilterState(true)set D3="Normal Mode"call TimerStart(M,99999.00,false,null)set V3=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)set Z3=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)set KS=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)set LS=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)set BO[0]=Player(0)set BO[1]=Player(1)set BO[2]=Player(2)set BO[3]=Player(3)set BO[4]=Player(4)set BO[5]=Player(5)set CO[0]=Player(6)set CO[1]=Player(7)set CO[2]=Player(8)set CO[3]=Player(9)set CO[4]=Player(10)set CO[5]=Player(11)set DO=Player(12)set EO=Player(15)call SetUnitPathing(CZ,false)call SetUnitPathing(DZ,false)call SetUnitPathing(ZZ,false)call SetUnitPathing(BZ,false)call SetUnitPathing(OZ,false)call BK1(OZ,true)call BK1(BZ,true)call BK1(ZZ,true)call BK1(DZ,true)call BK1(CZ,true)set U0=GetUnitLoc(OZ)set II=GetUnitLoc(CZ)set BI=GetUnitLoc(ZZ)set CI=GetUnitLoc(BZ)set DI=GetUnitLoc(DZ)set I2=1093678663set O2[1]=IIset O2[2]=CIset O2[3]=BIset O2[4]=DIset O2[5]=U0set TI=GetRectCenter(M3)set RI=GetRectCenter(N3)set PI=GetRectCenter(L3)set QI=GetRectCenter(U3)set I1=GetRectCenter(I4)set UI=GetRectCenter(Q3)set O1=GetRectCenter(C4)set B1=GetRectCenter(B4)set A1=GetRectCenter(A4)set C1=GetRectCenter(P3)set E1=GetRectCenter(R3)set D1=GetRectCenter(T3)set F1=GetRectCenter(G4)set G1=GetRectCenter(D4)set J2=trueendfunctionfunction InitTrig_Map takes nothing returns nothingcall HA1()endfunctionfunction HB1 takes nothing returns nothingset QS=GetUnitX(IV)set US=GetUnitY(IV)set IT=GetUnitX(CV)set OT=GetUnitY(CV)set AT=GetUnitX(AV)set BT=GetUnitY(AV)set CT=GetUnitX(OV)set DT=GetUnitY(OV)set ET=GetUnitX(HW)set FT=GetUnitY(HW)set GT=GetUnitX(HZ)set HT=GetUnitY(HZ)set ZT=GetUnitX(FZ)set VT=GetUnitY(FZ)set WT=GetUnitX(AZ)set XT=GetUnitY(AZ)set YT=GetUnitX(VZ)set JT=GetUnitY(VZ)set KT=GetUnitX(DV)set LT=GetUnitY(DV)set KT=GetUnitX(DV)set LT=GetUnitY(DV)set MT=GetUnitX(ZY)set ST=GetUnitY(ZY)set RT=GetUnitX(UH)set PT=GetUnitY(UH)set QT=GetUnitX(HV)set UT=GetUnitY(HV)set IR=GetUnitX(GV)set OR=GetUnitY(GV)set BR=GetUnitX(EV)set CR=GetUnitY(EV)set DR=GetUnitX(ZV)set GR=GetUnitY(ZV)set HR=GetUnitX(WZ)set ZR=GetUnitY(WZ)set WR=GetUnitX(FV)set XR=GetUnitY(FV)set YR=GetUnitX(WV)set JR=GetUnitY(WV)set KR=GetUnitX(VV)set LR=GetUnitY(VV)set SR=GetUnitX(NV)set RR=GetUnitY(NV)set PR=GetUnitX(YV)set QR=GetUnitY(YV)set UR=GetUnitX(XV)set IP=GetUnitY(XV)set OP=GetUnitX(JV)set BP=GetUnitY(JV)set DP=GetUnitX(MV)set EP=GetUnitY(MV)set FP=GetUnitX(LV)set GP=GetUnitY(LV)set ZP=GetUnitX(KV)set VP=GetUnitY(KV)set WP=GetUnitX(TV)set YP=GetUnitY(TV)set JP=GetUnitX(SV)set KP=GetUnitY(SV)set LP=GetUnitX(UV)set MP=GetUnitY(UV)set TP=GetUnitX(QV)set RP=GetUnitY(QV)set PP=GetUnitX(IW)set QP=GetUnitY(IW)set UP=GetUnitX(OW)set IQ=GetUnitY(OW)set OQ=GetUnitX(AW)set AQ=GetUnitY(AW)set BQ=GetUnitX(PV)set CQ=GetUnitY(PV)set DQ=GetUnitX(CW)set EQ=GetUnitY(CW)set FQ=GetUnitX(DW)set GQ=GetUnitY(DW)set HQ=GetUnitX(BW)set ZQ=GetUnitY(BW)set VQ=GetUnitX(EW)set WQ=GetUnitY(EW)set XQ=GetUnitX(FW)set YQ=GetUnitY(FW)set JQ=GetUnitX(BV)set KQ=GetUnitY(BV)set LQ=GetUnitX(GW)set MQ=GetUnitY(GW)set NQ=GetUnitX(VW)set SQ=GetUnitY(VW)set TQ=GetUnitX(ZW)set RQ=GetUnitY(ZW)call RemoveUnit(WV)call RemoveUnit(KV)call RemoveUnit(JV)call RemoveUnit(VV)call RemoveUnit(TV)call RemoveUnit(MV)call RemoveUnit(NV)call RemoveUnit(SV)call RemoveUnit(LV)call RemoveUnit(BV)call RemoveUnit(GW)call RemoveUnit(UH)call RemoveUnit(YV)call RemoveUnit(XV)call RemoveUnit(UV)call RemoveUnit(QV)call RemoveUnit(IW)call RemoveUnit(OW)call RemoveUnit(AW)call RemoveUnit(PV)call RemoveUnit(CW)call RemoveUnit(DW)call RemoveUnit(BW)call RemoveUnit(EW)call RemoveUnit(FW)call RemoveUnit(DV)call RemoveUnit(ZY)call RemoveUnit(VZ)call RemoveUnit(AZ)call RemoveUnit(FZ)call RemoveUnit(HZ)call RemoveUnit(AV)call RemoveUnit(OV)call RemoveUnit(IV)call RemoveUnit(CV)call RemoveUnit(HW)call RemoveUnit(HV)call RemoveUnit(GV)call RemoveUnit(EV)call RemoveUnit(ZV)call RemoveUnit(WZ)call RemoveUnit(FV)call RemoveUnit(VW)call RemoveUnit(ZW)set PQ=CreateUnit(BO[0],1852206952,QS,US,270)set QQ=CreateUnit(EO,1749236021,IT,OT,270)set UQ=CreateUnit(EO,1848652107,AT,BT,270)set I00=CreateUnit(EO,1849897784,CT,DT,270)set II0=CreateUnit(EO,1697657397,ET,FT,270)set I10=CreateUnit(EO,1848651862,GT,HT,270)set IO0=CreateUnit(EO,1848651863,ZT,VT,270)set I20=CreateUnit(EO,1848651826,WT,XT,270)set I30=CreateUnit(EO,1848651864,YT,JT,270)set I40=CreateUnit(EO,1848651833,KT,LT,270)set I50=CreateUnit(EO,1848657989,MT,ST,270)set I60=CreateUnit(BO[0],1702129516,RT,PT,270)set I70=CreateUnit(BO[0],1697656914,QT,UT,90)set I80=CreateUnit(BO[0],1697656914,IR,OR,45)set I90=CreateUnit(BO[0],1697656914,BR,CR,0)set IA0=CreateUnit(BO[0],1697657137,DR,GR,90)set IB0=CreateUnit(BO[0],1697657137,HR,ZR,45)set IC0=CreateUnit(BO[0],1697657137,WR,XR,0)set ID0=CreateUnit(BO[0],1697656915,YR,JR,90)set IE0=CreateUnit(BO[0],1697656915,KR,LR,45)set IF0=CreateUnit(BO[0],1697656915,SR,RR,0)set IG0=CreateUnit(BO[0],1697657145,PR,QR,45)set IH0=CreateUnit(BO[0],1697657145,UR,IP,45)set IZ0=CreateUnit(BO[0],1700884333,OP,BP,90)set IV0=CreateUnit(BO[0],1700884333,DP,EP,45)set IW0=CreateUnit(BO[0],1700884333,FP,GP,0)set IX0=CreateUnit(BO[0],1700884325,ZP,VP,90)set IY0=CreateUnit(BO[0],1700884325,WP,YP,45)set IJ0=CreateUnit(BO[0],1700884325,JP,KP,0)set IK0=CreateUnit(BO[0],1701670775,LP,MP,270)set IL0=CreateUnit(BO[0],1701670775,TP,RP,270)set IM0=CreateUnit(BO[0],1701670775,PP,QP,270)set IN0=CreateUnit(BO[0],1701670775,UP,IQ,270)set IS0=CreateUnit(BO[0],1701670775,OQ,AQ,270)set IT0=CreateUnit(BO[0],1701670775,BQ,CQ,270)set IR0=CreateUnit(BO[0],1701670775,DQ,EQ,270)set IP0=CreateUnit(BO[0],1701670775,FQ,GQ,270)set IQ0=CreateUnit(BO[0],1701670775,HQ,ZQ,270)set IU0=CreateUnit(BO[0],1701670775,VQ,WQ,270)set O00=CreateUnit(BO[0],1701670775,XQ,YQ,270)set OI0=CreateUnit(BO[0],1700884343,JQ,KQ,270)set O10=CreateUnit(BO[0],1700884343,LQ,MQ,270)set OO0=CreateUnit(BO[0],1701080930,NQ,SQ,270)set O20=CreateUnit(BO[0],1701080930,TQ,RQ,270)call SetPlayerAbilityAvailable(EO,1098018609,false)call SetUnitColor(QQ,TS)call SetUnitColor(II0,TS)call SetUnitColor(I00,PS)call SetUnitColor(UQ,PS)call SetUnitColor(I10,PS)call SetUnitColor(IO0,PS)call SetUnitColor(I20,PS)call SetUnitColor(I30,PS)call SetUnitColor(I40,PS)call BK1(I70,true)call BK1(I80,true)call BK1(I90,true)call BK1(IA0,true)call BK1(IB0,true)call BK1(IC0,true)call BK1(ID0,true)call BK1(IE0,true)call BK1(IF0,true)call BK1(IG0,true)call BK1(IH0,true)call BK1(I60,true)call BK1(IZ0,true)call BK1(IV0,true)call BK1(IW0,true)call BK1(IX0,true)call BK1(IY0,true)call BK1(IJ0,true)call BK1(OI0,true)call BK1(O10,true)call BK1(OO0,true)call BK1(O20,true)call BK1(IK0,true)call BK1(IL0,true)call BK1(IM0,true)call BK1(IN0,true)call BK1(IS0,true)call BK1(IT0,true)call BK1(IR0,true)call BK1(IP0,true)call BK1(IQ0,true)call BK1(IU0,true)call BK1(O00,true)call AddUnitToStock(II0,1747989059,0,0)endfunctionfunction InitTrig_Sent_Buildings takes nothing returns nothingcall HB1()endfunctionfunction HC1 takes nothing returns nothingset O50=GetUnitX(GX)set O60=GetUnitY(GX)set O70=GetUnitX(UW)set O80=GetUnitY(UW)set O90=GetUnitX(IX)set OA0=GetUnitY(IX)set OB0=GetUnitX(OX)set OC0=GetUnitY(OX)set OD0=GetUnitX(PW)set OE0=GetUnitY(PW)set OF0=GetUnitX(TW)set OG0=GetUnitY(TW)set OH0=GetUnitX(SW)set OZ0=GetUnitY(SW)set OV0=GetUnitX(MW)set OW0=GetUnitY(MW)set OX0=GetUnitX(RW)set OY0=GetUnitY(RW)set OJ0=GetUnitX(QW)set OK0=GetUnitY(QW)set OL0=GetUnitX(JZ)set OM0=GetUnitY(JZ)set ON0=GetUnitX(KX)set OS0=GetUnitY(KX)set OT0=GetUnitX(GZ)set OR0=GetUnitY(GZ)set OP0=GetUnitX(MX)set OQ0=GetUnitY(MX)set OU0=GetUnitX(YZ)set A00=GetUnitY(YZ)set AI0=GetUnitX(SZ)set A10=GetUnitY(SZ)set AO0=GetUnitX(NX)set A20=GetUnitY(NX)set A30=GetUnitX(XZ)set A40=GetUnitY(XZ)set A50=GetUnitX(LW)set A60=GetUnitY(LW)set A70=GetUnitX(SX)set A80=GetUnitY(SX)set A90=GetUnitX(FY)set AA0=GetUnitY(FY)set AB0=GetUnitX(TX)set AC0=GetUnitY(TX)set AD0=GetUnitX(XX)set AE0=GetUnitY(XX)set AF0=GetUnitX(KW)set AG0=GetUnitY(KW)set AH0=GetUnitX(WX)set AZ0=GetUnitY(WX)set AV0=GetUnitX(EY)set AW0=GetUnitY(EY)set AX0=GetUnitX(JW)set AY0=GetUnitY(JW)set AJ0=GetUnitX(LX)set AK0=GetUnitY(LX)set AL0=GetUnitX(DY)set AM0=GetUnitY(DY)set AN0=GetUnitX(IY)set AS0=GetUnitY(IY)set AT0=GetUnitX(PX)set AR0=GetUnitY(PX)set AP0=GetUnitX(BY)set AQ0=GetUnitY(BY)set AU0=GetUnitX(YW)set B00=GetUnitY(YW)set BI0=GetUnitX(AY)set B10=GetUnitY(AY)set BO0=GetUnitX(RX)set B20=GetUnitY(RX)set B30=GetUnitX(QX)set B40=GetUnitY(QX)set B50=GetUnitX(OY)set B60=GetUnitY(OY)set B70=GetUnitX(GY)set B80=GetUnitY(GY)set B90=GetUnitX(WW)set BA0=GetUnitY(WW)set BB0=GetUnitX(YX)set BC0=GetUnitY(YX)set BD0=GetUnitX(XW)set BE0=GetUnitY(XW)set BF0=GetUnitX(CY)set BG0=GetUnitY(CY)set BH0=GetUnitX(UX)set BZ0=GetUnitY(UX)set BV0=GetUnitX(JX)set BW0=GetUnitY(JX)call RemoveUnit(IY)call RemoveUnit(PX)call RemoveUnit(BY)call RemoveUnit(YW)call RemoveUnit(AY)call RemoveUnit(RX)call RemoveUnit(QX)call RemoveUnit(OY)call RemoveUnit(GY)call RemoveUnit(WW)call RemoveUnit(YX)call RemoveUnit(GZ)call RemoveUnit(SZ)call RemoveUnit(LW)call RemoveUnit(MX)call RemoveUnit(NX)call RemoveUnit(SX)call RemoveUnit(YZ)call RemoveUnit(XZ)call RemoveUnit(FY)call RemoveUnit(TX)call RemoveUnit(XX)call RemoveUnit(KW)call RemoveUnit(WX)call RemoveUnit(EY)call RemoveUnit(JW)call RemoveUnit(LX)call RemoveUnit(DY)call RemoveUnit(XW)call RemoveUnit(CY)call RemoveUnit(UX)call RemoveUnit(JX)call RemoveUnit(KX)call RemoveUnit(TW)call RemoveUnit(SW)call RemoveUnit(MW)call RemoveUnit(RW)call RemoveUnit(QW)call RemoveUnit(JZ)call RemoveUnit(OX)call RemoveUnit(IX)call RemoveUnit(GX)call RemoveUnit(UW)call RemoveUnit(PW)set BX0=CreateUnit(CO[0],1852073580,O50,O60,270)set BY0=CreateUnit(EO,1849897781,O70,O80,270)set BJ0=CreateUnit(EO,1848652107,O90,OA0,270)set BK0=CreateUnit(EO,1849897784,OB0,OC0,270)set BL0=CreateUnit(EO,1966092369,OD0,OE0,270)set BM0=CreateUnit(EO,1848651862,OF0,OG0,0)set BN0=CreateUnit(EO,1848651863,OH0,OZ0,0)set BS0=CreateUnit(EO,1848651826,OV0,OW0,0)set BT0=CreateUnit(EO,1848651864,OX0,OY0,0)set BR0=CreateUnit(EO,1848651833,OJ0,OK0,0)set BP0=CreateUnit(EO,1848657989,OL0,OM0,0)set BQ0=CreateUnit(CO[0],1970172012,ON0,OS0,220)set BU0=CreateUnit(CO[0],1966092365,OT0,OR0,270)set C00=CreateUnit(CO[0],1966092365,OP0,OQ0,270)set CI0=CreateUnit(CO[0],1966092365,OU0,A00,270)set C10=CreateUnit(CO[0],1966092356,AI0,A10,270)set CO0=CreateUnit(CO[0],1966092356,AO0,A20,270)set C20=CreateUnit(CO[0],1966092356,A30,A40,270)set C30=CreateUnit(CO[0],1966092366,A50,A60,270)set C40=CreateUnit(CO[0],1966092366,A70,A80,270)set C50=CreateUnit(CO[0],1966092366,A90,AA0,270)set C60=CreateUnit(CO[0],1966092372,AB0,AC0,270)set C70=CreateUnit(CO[0],1966092372,AD0,AE0,270)set C80=CreateUnit(CO[0],1970496880,AF0,AG0,270)set C90=CreateUnit(CO[0],1970496880,AH0,AZ0,270)set CA0=CreateUnit(CO[0],1970496880,AV0,AW0,270)set CB0=CreateUnit(CO[0],1970564964,AX0,AY0,270)set CC0=CreateUnit(CO[0],1970564964,AJ0,AK0,270)set CD0=CreateUnit(CO[0],1970564964,AL0,AM0,270)set CE0=CreateUnit(CO[0],1970956647,AN0,AS0,270)set CF0=CreateUnit(CO[0],1970956647,AT0,AR0,270)set CG0=CreateUnit(CO[0],1970956647,AP0,AQ0,270)set CH0=CreateUnit(CO[0],1970956647,AU0,B00,270)set CZ0=CreateUnit(CO[0],1970956647,BI0,B10,270)set CV0=CreateUnit(CO[0],1970956647,BO0,B20,270)set CW0=CreateUnit(CO[0],1970956647,B30,B40,270)set CX0=CreateUnit(CO[0],1970956647,B50,B60,270)set CY0=CreateUnit(CO[0],1970956647,B70,B80,270)set CJ0=CreateUnit(CO[0],1970956647,B90,BA0,270)set CK0=CreateUnit(CO[0],1970956647,BB0,BC0,270)set CL0=CreateUnit(CO[0],1970495856,BD0,BE0,270)set CM0=CreateUnit(CO[0],1970495856,BF0,BG0,270)set CN0=CreateUnit(CO[0],1969385326,BH0,BZ0,270)set CS0=CreateUnit(CO[0],1969385326,BV0,BW0,270)call SetUnitColor(BY0,O30)call SetUnitColor(BK0,O40)call SetUnitColor(BJ0,O40)call SetUnitColor(BM0,O40)call SetUnitColor(BN0,O40)call SetUnitColor(BS0,O40)call SetUnitColor(BT0,O40)call SetUnitColor(BR0,O40)call BK1(BU0,true)call BK1(C00,true)call BK1(CI0,true)call BK1(C10,true)call BK1(CO0,true)call BK1(C20,true)call BK1(C30,true)call BK1(C40,true)call BK1(C50,true)call BK1(C60,true)call BK1(C70,true)call BK1(BQ0,true)call BK1(C80,true)call BK1(C90,true)call BK1(CA0,true)call BK1(CB0,true)call BK1(CC0,true)call BK1(CD0,true)call BK1(CL0,true)call BK1(CM0,true)call BK1(CN0,true)call BK1(CS0,true)call BK1(CE0,true)call BK1(CF0,true)call BK1(CG0,true)call BK1(CH0,true)call BK1(CZ0,true)call BK1(CV0,true)call BK1(CW0,true)call BK1(CX0,true)call BK1(CY0,true)call BK1(CJ0,true)call BK1(CK0,true)call AddUnitToStock(BL0,1747989059,0,0)endfunctionfunction InitTrig_Scourge_Buildings takes nothing returns nothingcall HC1()endfunctionfunction HD1 takes nothing returns nothinglocal real HE1=GetUnitX(TZ)local real HF1=GetUnitY(TZ)local real HG1=GetUnitX(UZ)local real HH1=GetUnitY(UZ)local real HZ1=GetUnitX(QZ)local real HV1=GetUnitY(QZ)local real HW1=GetUnitX(RZ)local real HX1=GetUnitY(RZ)local real HY1=GetUnitX(PZ)local real HJ1=GetUnitY(PZ)local real HK1=GetUnitX(BX)local real HL1=GetUnitY(BX)local real HM1=GetUnitX(AX)local real HN1=GetUnitY(AX)local real HS1=GetUnitX(EX)local real HT1=GetUnitY(EX)local real HR1=GetUnitX(CX)local real HP1=GetUnitY(CX)local real HQ1=GetUnitX(DX)local real HU1=GetUnitY(DX)local integer Z01=25call RemoveUnit(TZ)call RemoveUnit(UZ)call RemoveUnit(QZ)call RemoveUnit(RZ)call RemoveUnit(PZ)call RemoveUnit(BX)call RemoveUnit(AX)call RemoveUnit(EX)call RemoveUnit(CX)call RemoveUnit(DX)set CT0=CreateUnit(Player(1),1852010352,HE1,HF1,270)call UnitAddAbility(CT0,1093743665)call ClearSelectionForPlayer(Player(1))call SelectUnitAddForPlayer(CT0,Player(1))if GetLocalPlayer()==Player(1)thencall SetUnitVertexColor(CT0,255,255,255,255)elsecall SetUnitVertexColor(CT0,255,255,255,Z01)endifset CR0=CreateUnit(Player(2),1852010352,HG1,HH1,270)call UnitAddAbility(CR0,1093743665)call ClearSelectionForPlayer(Player(2))call SelectUnitAddForPlayer(CR0,Player(2))if GetLocalPlayer()==Player(2)thencall SetUnitVertexColor(CR0,255,255,255,255)elsecall SetUnitVertexColor(CR0,255,255,255,Z01)endifset CP0=CreateUnit(Player(3),1852010352,HZ1,HV1,270)call UnitAddAbility(CP0,1093743665)call ClearSelectionForPlayer(Player(3))call SelectUnitAddForPlayer(CP0,Player(3))if GetLocalPlayer()==Player(3)thencall SetUnitVertexColor(CP0,255,255,255,255)elsecall SetUnitVertexColor(CP0,255,255,255,Z01)endifset CQ0=CreateUnit(Player(4),1852010352,HW1,HX1,270)call UnitAddAbility(CQ0,1093743665)call ClearSelectionForPlayer(Player(4))call SelectUnitAddForPlayer(CQ0,Player(4))if GetLocalPlayer()==Player(4)thencall SetUnitVertexColor(CQ0,255,255,255,255)elsecall SetUnitVertexColor(CQ0,255,255,255,Z01)endifset CU0=CreateUnit(Player(5),1852010352,HY1,HJ1,270)call UnitAddAbility(CU0,1093743665)call ClearSelectionForPlayer(Player(5))call SelectUnitAddForPlayer(CU0,Player(5))if GetLocalPlayer()==Player(5)thencall SetUnitVertexColor(CU0,255,255,255,255)elsecall SetUnitVertexColor(CU0,255,255,255,Z01)endifset D00=CreateUnit(Player(7),1852010352,HK1,HL1,270)call UnitAddAbility(D00,1093752649)call ClearSelectionForPlayer(Player(7))call SelectUnitAddForPlayer(D00,Player(7))if GetLocalPlayer()==Player(7)thencall SetUnitVertexColor(D00,255,255,255,255)elsecall SetUnitVertexColor(D00,255,255,255,Z01)endifset DI0=CreateUnit(Player(8),1852010352,HM1,HN1,270)call UnitAddAbility(DI0,1093752649)call ClearSelectionForPlayer(Player(8))call SelectUnitAddForPlayer(DI0,Player(8))if GetLocalPlayer()==Player(8)thencall SetUnitVertexColor(DI0,255,255,255,255)elsecall SetUnitVertexColor(DI0,255,255,255,Z01)endifset D10=CreateUnit(Player(9),1852010352,HS1,HT1,270)call UnitAddAbility(D10,1093752649)call ClearSelectionForPlayer(Player(9))call SelectUnitAddForPlayer(D10,Player(9))if GetLocalPlayer()==Player(9)thencall SetUnitVertexColor(D10,255,255,255,255)elsecall SetUnitVertexColor(D10,255,255,255,Z01)endifset DO0=CreateUnit(Player(10),1852010352,HR1,HP1,270)call UnitAddAbility(DO0,1093752649)call ClearSelectionForPlayer(Player(10))call SelectUnitAddForPlayer(DO0,Player(10))if GetLocalPlayer()==Player(10)thencall SetUnitVertexColor(DO0,255,255,255,255)elsecall SetUnitVertexColor(DO0,255,255,255,Z01)endifset D20=CreateUnit(Player(11),1852010352,HQ1,HU1,270)call UnitAddAbility(D20,1093752649)call ClearSelectionForPlayer(Player(11))call SelectUnitAddForPlayer(D20,Player(11))if GetLocalPlayer()==Player(11)thencall SetUnitVertexColor(D20,255,255,255,255)elsecall SetUnitVertexColor(D20,255,255,255,Z01)endifset D30[1]=CT0set D30[2]=CR0set D30[3]=CP0set D30[4]=CQ0set D30[5]=CU0set D30[7]=D00set D30[8]=DI0set D30[9]=D10set D30[10]=DO0set D30[11]=D20set D40[1]=GetUnitX(CT0)set D40[2]=GetUnitX(CR0)set D40[3]=GetUnitX(CP0)set D40[4]=GetUnitX(CQ0)set D40[5]=GetUnitX(CU0)set D40[7]=GetUnitX(D00)set D40[8]=GetUnitX(DI0)set D40[9]=GetUnitX(D10)set D40[10]=GetUnitX(DO0)set D40[11]=GetUnitX(D20)set D50[1]=GetUnitY(CT0)set D50[2]=GetUnitY(CR0)set D50[3]=GetUnitY(CP0)set D50[4]=GetUnitY(CQ0)set D50[5]=GetUnitY(CU0)set D50[7]=GetUnitY(D00)set D50[8]=GetUnitY(DI0)set D50[9]=GetUnitY(D10)set D50[10]=GetUnitY(DO0)set D50[11]=GetUnitY(D20)endfunctionfunction InitTrig_Circle_of_Power takes nothing returns nothingcall HD1()endfunctionfunction ZI1 takes nothing returns nothingset D90[GetPlayerId(BO[1])]=0set DA0[GetPlayerId(BO[1])]=66set DB0[GetPlayerId(BO[1])]=255set D90[GetPlayerId(BO[2])]=48set DA0[GetPlayerId(BO[2])]=230set DB0[GetPlayerId(BO[2])]=185set D90[GetPlayerId(BO[3])]=50set DA0[GetPlayerId(BO[3])]=0set DB0[GetPlayerId(BO[3])]=129set D90[GetPlayerId(BO[4])]=255set DA0[GetPlayerId(BO[4])]=252set DB0[GetPlayerId(BO[4])]=1set D90[GetPlayerId(BO[5])]=255set DA0[GetPlayerId(BO[5])]=50set DB0[GetPlayerId(BO[5])]=0set D90[GetPlayerId(CO[1])]=220set DA0[GetPlayerId(CO[1])]=50set DB0[GetPlayerId(CO[1])]=50set D90[GetPlayerId(CO[2])]=50set DA0[GetPlayerId(CO[2])]=50set DB0[GetPlayerId(CO[2])]=50set D90[GetPlayerId(CO[3])]=75set DA0[GetPlayerId(CO[3])]=150set DB0[GetPlayerId(CO[3])]=190set D90[GetPlayerId(CO[4])]=16set DA0[GetPlayerId(CO[4])]=60set DB0[GetPlayerId(CO[4])]=18set D90[GetPlayerId(CO[5])]=68set DA0[GetPlayerId(CO[5])]=42set DB0[GetPlayerId(CO[5])]=4endfunctionfunction Z11 takes nothing returns nothinglocal integer TGIlocal integer THIlocal integer iset C0[GetPlayerId(BO[0])]="|c00ff0303"set C0[GetPlayerId(BO[1])]="|c000042ff"set C0[GetPlayerId(BO[2])]="|c001ce6b9"set C0[GetPlayerId(BO[3])]="|c00540081"set C0[GetPlayerId(BO[4])]="|c00fffc01"set C0[GetPlayerId(BO[5])]="|c00ff8000"set C0[GetPlayerId(CO[0])]="|c0020c000"set C0[GetPlayerId(CO[1])]="|c00e55bb0"set C0[GetPlayerId(CO[2])]="|c00959697"set C0[GetPlayerId(CO[3])]="|c007ebff1"set C0[GetPlayerId(CO[4])]="|c00106246"set C0[GetPlayerId(CO[5])]="|c004e2a04"call SetPlayerColor(BO[0],PLAYER_COLOR_RED)call SetPlayerColor(BO[1],PLAYER_COLOR_BLUE)call SetPlayerColor(BO[2],PLAYER_COLOR_CYAN)call SetPlayerColor(BO[3],PLAYER_COLOR_PURPLE)call SetPlayerColor(BO[4],PLAYER_COLOR_YELLOW)call SetPlayerColor(BO[5],PLAYER_COLOR_ORANGE)call SetPlayerColor(CO[0],PLAYER_COLOR_GREEN)call SetPlayerColor(CO[1],PLAYER_COLOR_PINK)call SetPlayerColor(CO[2],PLAYER_COLOR_LIGHT_GRAY)call SetPlayerColor(CO[3],PLAYER_COLOR_LIGHT_BLUE)call SetPlayerColor(CO[4],PLAYER_COLOR_AQUA)call SetPlayerColor(CO[5],PLAYER_COLOR_BROWN)set TGI=1set THI=5loopif GetPlayerSlotState(BO[TGI])==PLAYER_SLOT_STATE_EMPTY thencall SetPlayerName(BO[TGI],GetObjectName(1848656968)+" "+I2S(TGI))endifif GetPlayerSlotState(CO[TGI])==PLAYER_SLOT_STATE_EMPTY thencall SetPlayerName(CO[TGI],GetObjectName(1848656968)+" "+I2S(5+TGI))endifset TGI=TGI+1exitwhen TGI>THIendloopendfunctionfunction ZO1 takes nothing returns nothinglocal integer ilocal integer Z01=125call SetUnitOwner(CT0,BO[1],false)call SetUnitOwner(CR0,BO[2],false)call SetUnitOwner(CP0,BO[3],false)call SetUnitOwner(CQ0,BO[4],false)call SetUnitOwner(CU0,BO[5],false)call SetUnitOwner(D00,CO[1],false)call SetUnitOwner(DI0,CO[2],false)call SetUnitOwner(D10,CO[3],false)call SetUnitOwner(DO0,CO[4],false)call SetUnitOwner(D20,CO[5],false)set D30[GetPlayerId(BO[1])]=CT0set D30[GetPlayerId(BO[2])]=CR0set D30[GetPlayerId(BO[3])]=CP0set D30[GetPlayerId(BO[4])]=CQ0set D30[GetPlayerId(BO[5])]=CU0set D30[GetPlayerId(CO[1])]=D00set D30[GetPlayerId(CO[2])]=DI0set D30[GetPlayerId(CO[3])]=D10set D30[GetPlayerId(CO[4])]=DO0set D30[GetPlayerId(CO[5])]=D20set i=1if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=2if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=3if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=4if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=5if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=7if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=8if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=9if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=10if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset i=11if GetLocalPlayer()==Player(i)thencall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,255)elsecall SetUnitVertexColor(D30[GetPlayerId(Player(i))],255,255,255,Z01)endifset D40[GetPlayerId(BO[1])]=GetUnitX(D30[GetPlayerId(BO[1])])set D40[GetPlayerId(BO[2])]=GetUnitX(D30[GetPlayerId(BO[2])])set D40[GetPlayerId(BO[3])]=GetUnitX(D30[GetPlayerId(BO[3])])set D40[GetPlayerId(BO[4])]=GetUnitX(D30[GetPlayerId(BO[4])])set D40[GetPlayerId(BO[5])]=GetUnitX(D30[GetPlayerId(BO[5])])set D40[GetPlayerId(CO[1])]=GetUnitX(D30[GetPlayerId(CO[1])])set D40[GetPlayerId(CO[2])]=GetUnitX(D30[GetPlayerId(CO[2])])set D40[GetPlayerId(CO[3])]=GetUnitX(D30[GetPlayerId(CO[3])])set D40[GetPlayerId(CO[4])]=GetUnitX(D30[GetPlayerId(CO[4])])set D40[GetPlayerId(CO[5])]=GetUnitX(D30[GetPlayerId(CO[5])])set D50[GetPlayerId(BO[1])]=GetUnitY(D30[GetPlayerId(BO[1])])set D50[GetPlayerId(BO[2])]=GetUnitY(D30[GetPlayerId(BO[2])])set D50[GetPlayerId(BO[3])]=GetUnitY(D30[GetPlayerId(BO[3])])set D50[GetPlayerId(BO[4])]=GetUnitY(D30[GetPlayerId(BO[4])])set D50[GetPlayerId(BO[5])]=GetUnitY(D30[GetPlayerId(BO[5])])set D50[GetPlayerId(CO[1])]=GetUnitY(D30[GetPlayerId(CO[1])])set D50[GetPlayerId(CO[2])]=GetUnitY(D30[GetPlayerId(CO[2])])set D50[GetPlayerId(CO[3])]=GetUnitY(D30[GetPlayerId(CO[3])])set D50[GetPlayerId(CO[4])]=GetUnitY(D30[GetPlayerId(CO[4])])set D50[GetPlayerId(CO[5])]=GetUnitY(D30[GetPlayerId(CO[5])])endfunctionfunction Z21 takes unit PKI returns booleanlocal integer ID=GetUnitTypeId(PKI)if ID==1848651862 or ID==1848651863 or ID==1848651826 or ID==1848651864 or ID==1849897784 or ID==1848652107 or ID==1848651833 thenreturn trueendifreturn falseendfunctionfunction Z31 takes nothing returns nothingif(GetOwningPlayer(GetEnumUnit())==Player(0))thencall SetUnitOwner(GetEnumUnit(),BO[0],false)if Z21(GetEnumUnit())==false thencall SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))endifelsecall SetUnitOwner(GetEnumUnit(),CO[0],false)if Z21(GetEnumUnit())==false thencall SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))endifendifendfunctionfunction Z41 takes nothing returns nothinglocal group Z51=NTI()call GroupEnumUnitsOfPlayer(Z51,Player(0),Condition(function N1I))call ForGroup(Z51,function Z31)call GroupClear(Z51)call GroupEnumUnitsOfPlayer(Z51,Player(6),Condition(function N1I))call ForGroup(Z51,function Z31)call NSI(Z51)endfunctionfunction Z61 takes player p returns nothinglocal integer i=0local string Z71=GetPlayerName(p)local integer FQ1=StringLength(Z71)local integer Z81=FQ1loopexitwhen i==FQ1if SubString(Z71,i,i+1)=="("and SubString(Z71,i-1,i)==" "thenset Z81=i-1call SetPlayerName(p,SubString(Z71,0,Z81))set i=FQ1elseset i=i+1endifendloopendfunctionfunction Z91 takes nothing returns nothinglocal integer ZA1local integer ZB1local integer TGIlocal integer THIlocal integer x=0local integer y=0local integer ilocal trigger tlocal location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)if GetPlayerState(BO[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(CO[0],PLAYER_STATE_OBSERVER)!=0 thenset C2=trueset BO[0]=Player(13)set CO[0]=Player(14)set D60=Player(0)set D70=Player(6)call SetAllyColorFilterState(0)loopexitwhen x>5call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(0),true)call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(4),true)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),false)set x=x+1endloopendifcall ForceAddPlayer(OO,BO[0])call ForceAddPlayer(OO,BO[1])call ForceAddPlayer(OO,BO[2])call ForceAddPlayer(OO,BO[3])call ForceAddPlayer(OO,BO[4])call ForceAddPlayer(OO,BO[5])call ForceAddPlayer(AO,CO[0])call ForceAddPlayer(AO,CO[1])call ForceAddPlayer(AO,CO[2])call ForceAddPlayer(AO,CO[3])call ForceAddPlayer(AO,CO[4])call ForceAddPlayer(AO,CO[5])call ForceAddPlayer(P2,BO[1])call ForceAddPlayer(P2,BO[2])call ForceAddPlayer(P2,BO[3])call ForceAddPlayer(P2,BO[4])call ForceAddPlayer(P2,BO[5])call ForceAddPlayer(P2,CO[1])call ForceAddPlayer(P2,CO[2])call ForceAddPlayer(P2,CO[3])call ForceAddPlayer(P2,CO[4])call ForceAddPlayer(P2,CO[5])if C2 thencall ForceAddPlayer(P2,Player(0))call ForceAddPlayer(P2,Player(6))endifset x=0set y=0loopexitwhen x>5loopexitwhen y>5if(x!=y)thencall SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(0),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(1),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(2),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(3),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(4),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(5),true)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(6),false)call SetPlayerAlliance(BO[x],BO[y],ConvertAllianceType(7),false)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(0),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(1),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(2),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(3),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(4),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(5),true)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(6),false)call SetPlayerAlliance(CO[x],CO[y],ConvertAllianceType(7),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(0),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(1),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(2),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(3),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(4),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(5),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(6),false)call SetPlayerAlliance(BO[x],CO[y],ConvertAllianceType(7),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(0),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(1),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(2),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(3),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(4),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(5),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(6),false)call SetPlayerAlliance(CO[x],BO[y],ConvertAllianceType(7),false)endifset y=y+1endloopset y=0set x=x+1endloopcall SetPlayerTeam(BO[0],0)call SetPlayerTeam(BO[1],0)call SetPlayerTeam(BO[2],0)call SetPlayerTeam(BO[3],0)call SetPlayerTeam(BO[4],0)call SetPlayerTeam(BO[5],0)call SetPlayerTeam(CO[0],1)call SetPlayerTeam(CO[1],1)call SetPlayerTeam(CO[2],1)call SetPlayerTeam(CO[3],1)call SetPlayerTeam(CO[4],1)call SetPlayerTeam(CO[5],1)call SetPlayerName(BO[0],GetObjectName(1848652622))call SetPlayerName(CO[0],GetObjectName(1848652623))call SetPlayerName(DO,GetObjectName(1848657208))call ZO1()if(BO[0]!=Player(0)or CO[0]!=Player(6))thencall Z41()endifcall Z11()set ZB1=TAI(OO)set ZA1=TAI(AO)set TGI=1set THI=5loopexitwhen TGI>THIif(T3I(BO[TGI]))thencall SetPlayerState(BO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZB1))call SetPlayerState(BO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifif(T3I(CO[TGI]))thencall SetPlayerState(CO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZA1))call SetPlayerState(CO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifset TGI=TGI+1endloopcall SetPlayerHandicapXP(BO[1],1)call SetPlayerHandicapXP(BO[2],1)call SetPlayerHandicapXP(BO[3],1)call SetPlayerHandicapXP(BO[4],1)call SetPlayerHandicapXP(BO[5],1)call SetPlayerHandicapXP(CO[1],1)call SetPlayerHandicapXP(CO[2],1)call SetPlayerHandicapXP(CO[3],1)call SetPlayerHandicapXP(CO[4],1)call SetPlayerHandicapXP(CO[5],1)call SetPlayerState(BO[0],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(BO[1],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(BO[2],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(BO[3],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(BO[4],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(BO[5],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[0],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[1],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[2],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[3],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[4],PLAYER_STATE_GIVES_BOUNTY,1)call SetPlayerState(CO[5],PLAYER_STATE_GIVES_BOUNTY,1)call RTI()call ZI1()call Z61(BO[1])call Z61(BO[2])call Z61(BO[3])call Z61(BO[4])call Z61(BO[5])call Z61(CO[1])call Z61(CO[2])call Z61(CO[3])call Z61(CO[4])call Z61(CO[5])set x=1loopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZC1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZD1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set i=0loopset D80[i]=GetPlayerName(Player(i))set i=i+1exitwhen i==16endloopset ZC1=nullset ZD1=nullendfunctionfunction InitTrig_Player takes nothing returns nothingcall Z91()endfunctionfunction ZE1 takes nothing returns nothinglocal integer i=1set DE0=1set DC0[1]=1215723364set DT0[1]=1747989338set DD0[1]=1848654165set DS0[1]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"call SNI(DC0[1],"stand 4")call SYI(DC0[1],1.35,DT0[1])set DR0[i]="Cheap items such as Bracers, Bottle and Magic Stick help give Vengeful Spirit what she needs to use Magic Missile and Swap safely and frequently."set DP0[i]="By getting Magic Missile first, Vengeful Spirit should take advantage of this powerful stun by moving around the map instead of simply farming in a lane."set DQ0[i]="It sometimes a good idea to save the Command Aura for later in the game when it will give your team more damage."set DU0[i]="Wave of Terror is used to provide sight, giving you vision over an area or providing an opportunity to use Swap."set E00[i]="Swap will allow you to isolate a key hero on their team, sometimes your sacrifice is needed to win the battle and maybe even the game."set i=i+1set DC0[2]=1215128178set DT0[2]=1747989552set DD0[2]=1848654145set DS0[2]="ReplaceableTextures\\CommandButtons\\BTNAvatar.blp"call SNI(DC0[2],"attack slam alternate")call SYI(DC0[2],1.3,DT0[2])set DR0[i]="When using Arc lightning, try to kill creeps and harass your opponent at the same time"set DP0[i]="When ganking, you can use Lightning Bolt to ensure you will not lose sight of the target quickly."set DQ0[i]="Lightning Bolt has a mini-stun that can be used against channeling spells and teleporting heroes."set DU0[i]="Static Field is extremely powerful throughout the game: Use your spells as frequently as possible during fights."set E00[i]="Both Lightning Bolt and Wrath of the Thundergod reveal invisible units. Wrath will not damage invisible units."set i=i+1set DC0[3]=1164799855set DT0[3]=1747989553set DD0[3]=1848654137set DS0[3]="ReplaceableTextures\\CommandButtons\\BTNDryad.blp"call SNI(DC0[3],"stand 4")call SYI(DC0[3],1,DT0[3])set DR0[i]="Enchant can be used on neutral creeps, meaning Enchantress can fight and use neutral creeps to engage enemy heroes effectively."set DP0[i]="Nature's Attendants heals in an area AOE, so make sure you're far from creeps if you only want to heal yourself."set DQ0[i]="Untouchable is great against physical attacks, but it does not help you survive huge burst damage nukes."set DU0[i]="Impetus deals negligible damage at short range; switch to normal attacks if your target gets close to save mana."set E00[i]="Impetus deals pure damage, making it a great tool against heroes with a lot of resistance because it is not reduced."set i=i+1set DC0[4]=1328558160set DT0[4]=1747989554set DD0[4]=1848654136set DS0[4]="ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"call SNI(DC0[4],"stand 2")call SYI(DC0[4],1,DT0[4])set DR0[i]="Waveform is extremely powerful: Used for damage, chasing, escaping, it even allows you to dodge some spells by casting it at the right time."set DP0[i]="Morph allows you to manipulate your Agility and Strength. Using the Strength Morph ('F') can act as a heal to help you survive between spells."set DQ0[i]="Use Morph Replicate to take the location of your Replicated unit, making it great for a quick escape or simply as a free teleport."set DU0[i]="Replicate is usually cast on the strongest ally or enemy to a fight. Certain hero passives or items will retain their effects, so Replicate those heroes."set E00[i]="Eye of Skadi and Linken's Sphere are two examples of Statistic-increasing items which give Morphling a lot of versatility and the ability to cast spells often."set i=i+1set DC0[5]=1214931305set DT0[5]=1747989555set DD0[5]=1848654167set DS0[5]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"call SNI(DC0[5],"stand victory")call SYI(DC0[5],1,DT0[5])set DR0[i]="CM is a fragile support hero: Items like Bracers and Phase Boots will help her survive and deal with her low movement speed and armor."set DP0[i]="A few points of Brilliance Aura early on provides your team with massive amounts of extra mana."set DQ0[i]="Enemies hit by Frostbite can still cast spells, so don't take them lightly. "set DU0[i]="Frostbite on non-hero units will last 10 seconds. This can be useful for killing neutral creeps that are level 5 or lower as well."set E00[i]="There are two items that can help you with the perfect Freezing Field: Placement with Kelen's Dagger and the spell immunity of Black King Bar."set i=i+1set DC0[6]=1211117617set DT0[6]=1747989556set DD0[6]=1848654134set DS0[6]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.tga"call SNI(DC0[6],"spell")call SYI(DC0[6],1,DT0[6])set DR0[i]="Storm Bolt is a skill Sven should usually get early because of its damage and stun. "set DP0[i]="Take advantage of Storm Bolt's area of effect by hitting additional enemy creeps and heroes whenever possible. "set DQ0[i]="Try to be near your allies when you cast Warcry."set DU0[i]="Only items that increase Strength will give you additional damage from effect of God's Strength."set E00[i]="Casting God's Strength before engaging in fights or casting Storm Bolt will allow you to get additional attacks on your opponent."set i=i+1set DC0[7]=1212363833set DT0[7]=1747989557set DD0[7]=1848654160set DS0[7]="ReplaceableTextures\\CommandButtons\\BTNSeaWitch.blp"call SNI(DC0[7],"spell")call SYI(DC0[7],1,DT0[7])set DR0[i]="Opponents can attack and cast spells while Ensnared. However, it will work on magic immune units and reveal invisible heroes until the duration expires."set DP0[i]="Mirror Image can be used defensively to avoid certain spells and dispel debuffs or channeling spells."set DQ0[i]="Items that provide attribute bonuses improve your Image's power."set DU0[i]="Enemies caught by Song of the Siren are invulnerable while asleep. Save your attacks and spells for after the spell expires."set E00[i]="Use Song of the Siren to isolate a magic immune or Cycloned hero (since they will not be affected), or to demolish buildings while enemies are asleep."set i=i+1set DC0[8]=1333027688set DT0[8]=1747989558set DD0[8]=1848654148set DS0[8]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"call SNI(DC0[8],"attack slam")call SYI(DC0[8],1.1,DT0[8])set DR0[i]="Although he's a strength hero, Earthshaker (ES) actually plays more like a caster. Damage items are not very useful, but mana items can be nice."set DP0[i]="A good cast of Fissure can isolate an opponent and cut off their escape. Practice often to achieve devastating results."set DQ0[i]="Kelen's Dagger is an incredible item on ES, it allows you to quickly position yourself for the perfect Fissure or Echoslam."set DU0[i]="The timing of your spells is important, by spacing them out properly you can keep a group of heroes disabled for several seconds."set E00[i]="Due to Raigor's ability to split up an enemy team and keep them stunned, he is great for initiating fights."set i=i+1set DC0[9]=1212365106set DT0[9]=1747989559set DD0[9]=1848654168set DS0[9]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"call SNI(DC0[9],"stand 4")call SYI(DC0[9],1,DT0[9])set DR0[i]="Getting at least one level of Blink Strike and Smoke Screen help you survive to level 6 when you can learn Permanent Invisibility."set DP0[i]="Attacking or using your spells makes you visible: Consider the fade time of Permanent Invisibility before placing yourself at risk."set DQ0[i]="Try to position Smoke Screen slightly behind enemies so that they spend more time in the cloud if they retreat."set DU0[i]="Wraith Bands and later a Yasha or a Diffusal Blade will provide Rikimaru with cheap damage and chasing power for dispatching fragile heroes quickly."set E00[i]="Be careful of items that render you visible, such as Dust of Appearance, Sentry Wards or a Gem of True Sight."set i=i+1set DC0[10]=1311781199set DT0[10]=1747989560set DD0[10]=1848654169set DS0[10]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"call SNI(DC0[10],"spell slam")call SYI(DC0[10],1,DT0[10])call SYI(1848652083,1.1,DT0[10])call SYI(1848652084,1.2,DT0[10])call SYI(1848652085,1.3,DT0[10])call SYI(1848651828,1,DT0[10])call SYI(1848652088,1.1,DT0[10])call SYI(1848652099,1.2,DT0[10])call SYI(1848652103,1.3,DT0[10])set DR0[i]="Spirit Bear is great to have in the lane and allowing Syllabear to fight neutral creeps because of its high HP and damage. "set DP0[i]="Leveling Spirit Bear also gets various bonuses that make it very powerful for fighting heroes and towers so it is usually the first thing to max out."set DQ0[i]="Your Spirit Bear might be able to handle a lot of damage, but if it dies you will also take damage (100 X its level). If you die, it dies as well."set DU0[i]="Give items to your bear instead of Syllabear since it is usually engaging the enemy for you. Remember that stat-increasing items do not benefit the bear."set E00[i]="True Form gives Syllabear massive HP in his melee form, and Rabid and Battle Cry give both him and his Bear huge damage temporarily."set i=i+1set DC0[11]=1211117620set DT0[11]=1747989561set DD0[11]=1848654170set DS0[11]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"call SNI(DC0[11],"stand victory")call SYI(DC0[11],1.2,DT0[11])set DR0[i]="Light Strike Array is usually a good skill to get at level 1 because it provides you with a stun."set DP0[i]="Target the ground in their direction instead of clicking on enemies to maximize Dragon Slave's long range."set DQ0[i]="Cheap items will help Lina do her job: Bracers, Bottle, Phase Boots. A Point booster provides a nice HP/mana bonus for its cost."set DU0[i]="Fiery Soul can help you maneuver better during a fight."set E00[i]="Try to stun as many heroes as possible during team fights"set i=i+1set DC0[12]=1315070563set DT0[12]=1747989569set DD0[12]=1848656181set DS0[12]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"call SNI(DC0[12],"stand victory")call SYI(DC0[12],1,DT0[12])set DR0[i]="Blade Fury is your most important skill early game for getting hero kills and avoiding magic damage."set DP0[i]="Avoid follow-command (right-clicking) heroes with Blade Fury and instead click the ground near the opponent."set DQ0[i]="Isolate enemy heroes before using Omnislash to prevent Juggernaut from attacking multiple targets and doing less damage."set DU0[i]="Increasing your attack speed will give you 'extra attacks' during Omnislash, which are treated like a normal attack (in terms of damage and orb effects)."set E00[i]="Protect the 1-HP Healing Ward in battles and it can prolong and save the lives of your entire team."set i=i+1set DC0[13]=1311781185set DT0[13]=1747989570set DD0[13]=1848654135set DS0[13]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"call SNI(DC0[13],"stand ready")call SYI(DC0[13],1,DT0[13])set DR0[i]="Glaives of Wisdom is useful to get early because it is useful for killing creeps and harassing your opponent manually ('W' and then the target)."set DP0[i]="Curse of the Silent will cause an enemy to lose HP/mana if they do not choose to use their spells, or cannot use their spells (disabled, silenced, cooldown)."set DQ0[i]="Last Word will prevent enemies from using multiple spells on you and your team at the same time provided you get close enough."set DU0[i]="Global Silence can be used for initiating on enemies or saving allies early on. Try to pay attention to your teammates and enemies, even those not nearby."set E00[i]="Global Silence will also give your allies the opportunity in team battles to use their spells without repercussions - making it a powerful control spell."set i=i+1set DC0[14]=1214344551set DT0[14]=1747989571set DD0[14]=1848654150set DS0[14]="ReplaceableTextures\\CommandButtons\\BTNTreant.blp"call SNI(DC0[14],"stand 3")call SYI(DC0[14],0.72,DT0[14])set DR0[i]="Thanks to his high base damage and survivability, Rooftrellen can usually obtain high-tier damage or caster items depending on the needs of the team."set DP0[i]="Living armor adds significant defensive bonuses to an allied unit. It can even be cast on buildings to make them more resilient and provide regeneration."set DQ0[i]="Nature's Guise is more than an escape tool, it can be used offensively as well. Use it to position allies and yourself near trees before surprising the enemy."set DU0[i]="Use Eyes in the Forest whenever you can to gain vision of key locations such as the rune spots, neutral creep camps and Roshan."set E00[i]="Enemies under the effect of Overgrowth can still use spells and items, so make sure your team acts quickly while enemies remain immobilized."set i=i+1set DC0[15]=1328558389set DT0[15]=1747990352set DD0[15]=1848657731set DS0[15]="ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp"call SNI(DC0[15],"stand victory")call SYI(DC0[15],1.1,DT0[15])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[16]=1214409837set DT0[16]=1747989573set DD0[16]=1848654151set DS0[16]="ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"call SNI(DC0[16],"stand victory")call SYI(DC0[16],1.2,DT0[16])call SYI(1211119192,1.5,DT0[16])call SYI(1211119193,1.5,DT0[16])call SYI(1211119191,1.5,DT0[16])set DR0[i]="Chakra Magic is an amazing support skill that you should cast on allies as often as possible if they have powerful spells."set DP0[i]="Illuminate can be useful for earning gold or clearing creeps quickly, but channeling the blast can leave you vulnerable. "set DQ0[i]="Mana Leak gives you the offensive: An enemy that moves loses his resources to cast spells, but if he does not, you can punish him with spells and attacks."set DU0[i]="When in your Spirit Form, use Blinding Light to push enemies aside, and Recall for saving or calling on the assistance of an ally."set E00[i]="Keeper of the Light usually needs to stay back in fights and make use of the long range of his spells as a support hero when pushing and defending."set i=i+1set DC0[17]=1215657064set DT0[17]=1747989574set DD0[17]=1848654166set DS0[17]="ReplaceableTextures\\CommandButtons\\BTNFurbolgTracker.blp"call SNI(DC0[17],"attack spell")call SYI(DC0[17],1.2,DT0[17])set DR0[i]="Get Fury Swipes and Overpower early. Fury Swipes is a very powerful orb effect on Ursa, replacing it with another is not advised."set DP0[i]="Ursa is a very effective hero to fight neutral creeps with: Vladimir's Offering is a recommended item choice."set DQ0[i]="Thanks to Enrage, Ursa usually purchases items that increase HP or Strength over Agility and Damage items."set DU0[i]="It is a good idea to fight the two ancient camps when you need a quick boost in experience and gold. They are marked red in your minimap."set E00[i]="Certain items like Kelen's Dagger and Lothar's Edge will help both close the distance on enemies and take them by surprise."set i=i+1set DC0[18]=1215130471set DT0[18]=1747989575set DD0[18]=1848656177set DS0[18]="ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp"call SNI(DC0[18],"sleep")call SYI(DC0[18],1.4,DT0[18])set DR0[i]="Buying a few Clarity Potions, Ring of Basilius or Bottle in the beginning of the game will help you cast a few more spells."set DP0[i]="Fireblast provides a disable, Ignite provides a slow. Both deal damage, usually making them good skills early."set DQ0[i]="Ogre Magi has a lot of survivability but he does need the ability to use his spells: An Arcane Ring might be the only item you will need all game."set DU0[i]="Use Bloodlust to help teammates chase and escape enemies and on the hero capable of dealing the most damage before major battles."set E00[i]="Focus heroes that need to be shut down quickly with Fireblast: Hopefully they are repeatedly damaged and disabled by the effect of Multicast."set i=i+1set DC0[19]=1316252014set DT0[19]=1747989576set DD0[19]=1848656193set DS0[19]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"call SNI(DC0[19],"stand 2")call SYI(DC0[19],1,DT0[19])set DR0[i]="Laser and Missile give Tinker massive burst damage, so it is usually a good idea to get these two skills before Rearm, your ultimate."set DP0[i]="Laser is not reduced by magic resistance or armor; you deal the number in the description exactly."set DQ0[i]="You can use the active effects of items indefinitely with Rearm, which makes Boots of Travel a very powerful item for Tinker."set DU0[i]="March of the Machines can be very useful for killing creeps quickly, its large area of effect makes it useful for pushing and team fights."set E00[i]="Level 1 of Rearm is generally enough until much later when you have the mana pool to support levels 2 and 3."set i=i+1set DC0[20]=1164799603set DT0[20]=1747989577set DD0[20]=1848656180set DS0[20]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"call SNI(DC0[20],"spell")call SYI(DC0[20],1.2,DT0[20])set DR0[i]="Get Force of Nature early if you plan on leaving the lane to kill neutral creeps. Start with a Ring of Basilius to provide you with mana and armor."set DP0[i]="Invest points in Teleportation, it gives you the mobility to be anywhere in the map: Cancel the spell if you change your mind by clicking 'S'."set DQ0[i]="Sprout can be extremely useful offensively and defensively so get at least one point in it. Higher levels increase the duration but also the mana cost."set DU0[i]="Teleportation shows allies and enemies where you intend to go, so if you want to surprise enemies, teleport where they cannot see."set E00[i]="Wrath of Nature is a great farming tool but also a powerful nuke on enemy heroes: Hit other units nearby to deal more damage to the intended target."set i=i+1set DC0[21]=1332179560set DT0[21]=1747989578set DD0[21]=1848656179set DS0[21]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"call SNI(DC0[21],"stand victory")call SYI(DC0[21],1,DT0[21])set DR0[i]="Get Spirit Lance and Doppelwalk first because Juxtapose is better when your illusions have more health and damage."set DP0[i]="Beware of the high mana costs of your spells early game, especially for Doppelwalk, which can be an escape mechanism."set DQ0[i]="Keep your opponents guessing by controlling your illusions created by Doppelwalk and Juxtapose."set DU0[i]="Your illusions are amazing for pushing later on. Focus creeps and heroes first because illusions will not create new ones when attacking buildings."set E00[i]="Diffusal Blade and Manta Style are good choices of because they make his images much stronger by adding Agility directly."set i=i+1set DC0[22]=1432580716set DT0[22]=1747989579set DD0[22]=1848656183set DS0[22]="ReplaceableTextures\\CommandButtons\\BTNMountainGiant.blp"call SNI(DC0[22],"spell")call SYI(DC0[22],0.5,DT0[22])set DR0[i]="Buy items that give you at least 3 Intelligence or 39 mana in the beginning of the game so that you can use both of your spells at level 2."set DP0[i]="Avalanche and Toss should be the two spells you level first because they make you a force to be reckoned with early game."set DQ0[i]="You can sometimes kill a hero outright by casting Avalanche on him, and then Tossing him on the Avalanche area of effect before the animation ends."set DU0[i]="To ensure that you Toss your desired target, isolate him by making him the only one in the area of effect. Kelen's Dagger can help you with placement."set E00[i]="Tiny deals most of his damage through Avalanche and Toss, so the reduced attack speed from Grow is less important than the bonuses given."set i=i+1set DC0[23]=1211117643set DT0[23]=1747989580set DD0[23]=1848656185set DS0[23]="ReplaceableTextures\\CommandButtons\\BTNGoblinSapper.blp"call SNI(DC0[23],"stand 2")call SYI(DC0[23],1,DT0[23])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[24]=1211117633set DT0[24]=1747989581set DD0[24]=1848656194set DS0[24]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"call SNI(DC0[24],"spell chain lightning")call SYI(DC0[24],1,DT0[24])set DR0[i]="Chen can take control of high level neutral creeps with Holy Persuasion, making him extremely powerful at low levels even without items."set DP0[i]="Neutrals with special abilities usually are more useful, try to find out what has a disable or slow as this will be much better for attacking heroes with."set DQ0[i]="When preparing to attack from the forest, start with Penitence to slow enemies. Engage enemies from the side or from behind to catch them off guard."set DU0[i]="Chen excels as a support hero, items that contribute to teammates such as Mekansm usually benefit the team more than damage items."set E00[i]="Hand of God is really useful early on for helping allies across the map. Later, it can be used to assist with pushing or defending."set i=i+1set DC0[25]=1160785973set DT0[25]=1747989582set DD0[25]=1848656453set DS0[25]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"call SNI(DC0[25],"spell")call SYI(DC0[25],1,DT0[25])set DR0[i]="The level of Lucent Beam determines the damage of Eclipse, making it the most important spell to get first. "set DP0[i]="Moon Glaives can be useful early if you plan to kill neutral creeps. Lifesteal items like Helm of the Dominator can help you survive against neutral creeps."set DQ0[i]="Try to cast Eclipse on enemy heroes when other units are not present to maximize the damage dealt to a single target. "set DU0[i]="Later on with some attack speed, Lunar Blessing and Moon Glaives provide you with both massive damage and pushing power."set E00[i]="You should also consider items that allow you to land Eclipse successfully and increase your carry potential in battles, such as a Black King Bar."set i=i+1set DC0[26]=1433631084set DT0[26]=1747989583set DD0[26]=1848656452set DS0[26]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"call SNI(DC0[26],"spell")call SYI(DC0[26],1.1,DT0[26])set DR0[i]="Headshot will provide you with bonus damage and a short stun, making it useful for killing creeps and harassing with his incredible attack animation."set DP0[i]="Sniper usually needs to find a combination of damage, attack speed and survivability that allow him to deal significant damage but survive to do so."set DQ0[i]="Sniper is very fragile so he needs to maintain his range. Getting Take Aim and/or Shrapnel can help provide means of staying out of harm's way."set DU0[i]="Shrapenl can also be used for slowing opponents, pushing or defending against large waves of creeps."set E00[i]="Try to use Assassinate to heavily damage an enemy before the fight even begins to give your team an advantage."set i=i+1set DC0[27]=1311781174set DT0[27]=1747989584set DD0[27]=1848656184set DS0[27]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"call SNI(DC0[27],"stand 3")call SYI(DC0[27],1.25,DT0[27])call SYI(1311781442,1.25,DT0[27])call SYI(1311781175,1.25,DT0[27])set DR0[i]="Berserker's Rage gives Troll the option of melee combat, which gives him many powerful offensive bonuses at the cost of losing his ranged ability."set DP0[i]="roll Warlord generally does not have to worry about attack speed thanks to his set of skills, go for damage or survivability items instead."set DQ0[i]="Blind will prevent your opponents from landing all their attacks, making it harder from them to harass you or kill your creeps for gold."set DU0[i]="Play defensively and fight neutral creeps too. Switch to melee form and it will allow you to have an easier time."set E00[i]="In team battles, it is vital that you cast Blind on the enemy hero that deals the most damage as this will greatly reduce their damage output."set i=i+1set DC0[28]=1332898670set DT0[28]=1747989815set DD0[28]=1848654132set DS0[28]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"call SNI(DC0[28],"stand victory")call SYI(DC0[28],1,DT0[28])set DR0[i]="At least one level of Shackles is advised early on for immobilizing opponents. Remember that it is channeling so it can be interrupted or broken by yourself."set DP0[i]="Rhasta needs survivability and the mana to use his spells: Bracers, Null Talismans, Point Booster are examples of items that will help out a lot."set DQ0[i]="Forked Lightning is your primary nuke and finisher due to its range and ability to hit multiple targets, so it more effective to get it earlier than later."set DU0[i]="Use Shackles and Voodoo on enemy heroes when casting Mass Serpent Ward. You can even surround an enemy completely with the right timing."set E00[i]="Mass Serpent Wards can clear creeps quickly and deal a lot of damage over time to buildings, making them really useful for pushing and defending."set i=i+1set DC0[29]=1328558406set DT0[29]=1747993417set DD0[29]=1848658771set DS0[29]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"call SNI(DC0[29],"stand 3")call SYI(DC0[29],1.30,DT0[29])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[30]=1315988077set DT0[30]=1747989811set DD0[30]=1848656207set DS0[30]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"call SNI(DC0[30],"stand ready")call SYI(DC0[30],1,DT0[30])set DR0[i]="Thunder Clap is a great skill early game but you may need to invest in regeneration items such as a Bottle, Magic Stick, Ring of Basilius or Void Stone."set DP0[i]="Drunken Haze works not only as a slow, but the miss chance reduces the damage severely for enemy heroes."set DQ0[i]="Primal Split is not only for escaping: Once you master your three Pandas, Earth, Storm and Fire, you can use them offensively as well."set DU0[i]="In Primal Split form, Mangix has two useful disables that can be used against enemies: Storm's Cyclone and Earth's Hurl Boulder."set E00[i]="Mangix usually initiates for the team, so survivability items are helpful, investing in a Kelen's Dagger to help land Thunder Clap is often a good idea."set i=i+1set DC0[31]=1211117616set DT0[31]=1747989592set DD0[31]=1848656206set DS0[31]="ReplaceableTextures\\CommandButtons\\BTNCentaurKhan.blp"call SNI(DC0[31],"stand 3")call SYI(DC0[31],1.75,DT0[31])set DR0[i]="Return should be leveled if Centaur plans to fight neutral creeps, otherwise Double Edge is more useful in the lane."set DP0[i]="Thanks to a high strength gain and the bonus strength from your ultimate, Centaur is a great at heading into battle first and receiving damage."set DQ0[i]="A Hood of Defiance can prove to be just as useful as a Vanguard depending on whether the other team has a lot of magical spells."set DU0[i]="Avoid putting yourself at risk after using Double Edge. You can use it to commit suicide if you are about to die to deny opponents experience and gold."set E00[i]="Kelen's Dagger is a great way of initiating on opponents and dealing with his slow casting animation of Stomp."set i=i+1set DC0[32]=1315007329set DT0[32]=1747989810set DD0[32]=1848656205set DS0[32]="ReplaceableTextures\\CommandButtons\\BTNakama.blp"call SNI(DC0[32],"stand var4")call SYI(DC0[32],1.2,DT0[32])set DR0[i]="Shuriken Toss, Wind Walk and Track are much more useful than Jinada early on."set DP0[i]="You're going to need mana regen: Bottle, Ring Of Basillius and Void Stone are examples of good options. "set DQ0[i]="Use Wind Walk cautiously: If you wait until the cooldown is complete before breaking out of invisibility, you can cast it again immediately afterward."set DU0[i]="Shuriken Toss and Wind Walk deal a lot of damage quickly: Search the map often for low HP heroes to hunt. "set E00[i]="Use Track on a nearby enemy hero to allow you and your allies to outrun them. Also cast it on nearly dead heroes for bonus gold."set i=i+1set DC0[33]=1215063922set DT0[33]=1747989590set DD0[33]=1848656209set DS0[33]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"call SNI(DC0[33],"stand victory")call SYI(DC0[33],1.35,DT0[33])call SYI(1211117638,1,DT0[33])call SYI(1211117639,1,DT0[33])call SYI(1211117637,1,DT0[33])call FZ1(1211117639,255,255,200)call FZ1(1211117638,255,255,200)call FZ1(1211117639,255,200,200)set DR0[i]="Breath Fire is a strong nuke and farming ability. However, against difficult opponents, Dragon's Blood is very useful."set DP0[i]="Dragon Tail is the longest duration level 1 stun in the game. One point is usually sufficient until later on."set DQ0[i]="Thanks to the defensive bonuses on Dragon's Blood, he can often focus on other damage items instead of increasing armor and regeneration."set DU0[i]="Level 1 of Elder Dragon Form has a special passive called Corrosive Attack, which deals significant damage over time against towers."set E00[i]="The ranged splash damage and slow of his Level 3 ultimate makes him extremely powerful; getting to level 16 is very important for DK."set i=i+1set DC0[34]=1164207469set DT0[34]=1747989588set DD0[34]=1848656210set DS0[34]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"call SNI(DC0[34],"stand channel")call SYI(DC0[34],1,DT0[34])set DR0[i]="Blink is very versatile, allowing you to chase, escape and even avoid certain spells. It is definitely worth at least one point in the beginning."set DP0[i]="You can also use Mana Break to prevent enemy heroes from casting spells on you, but be careful since it forces you to get in melee range to attack."set DQ0[i]="Spell Shield might be useful for reducing magic damage, but it does not prevent you from being disabled or status effects (slow, poison, etc.)."set DU0[i]="Offensive items without orb effects such as a Battlefury, Monkey King Bar or Butterfly are usually desired over items that would override your Mana Break."set E00[i]="Sometimes survivability is just as important as damage, items such as Linken's Sphere or Manta Style offer a good mix of both offense and defense."set i=i+1set DC0[35]=1315074670set DT0[35]=1747989813set DD0[35]=1848656204set DS0[35]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.tga"call SNI(DC0[35],"spell")call SYI(DC0[35],1,DT0[35])set DR0[i]="Frost Arrows make Drow an excellent chaser early game and allow her to harass opponents safely by manually casting them (clicking 'R' and the target)."set DP0[i]="An early level of Silence is great for preventing opponents from using multiple spells on you or your allies."set DQ0[i]="Trueshot Aura and Marksmanship provide Traxex with plenty of damage even with just a few Wraith Bands and Power Treads."set DU0[i]="Lothar's Edge provides damage and an escape mechanism, the latter of which can help Traxex survive."set E00[i]="Stay out of danger in major battles, only close in on your enemies when you are chasing and finishing off heroes near the end."set i=i+1set DC0[36]=1214345830set DT0[36]=1747989594set DD0[36]=1848656211set DS0[36]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"call SNI(DC0[36],"stand victory")call SYI(DC0[36],1.1,DT0[36])set DR0[i]="Omniknight is a powerful support hero, items that provide mana such as Arcane Ring help make sure that you can use all your spells."set DP0[i]="Purification can be used offensively and defensively: The unit you cast it on will deal damage around it, making it a powerful heal and nuke."set DQ0[i]="Degen Aura is a very strong passive slow that is useful both to chase down enemy heroes and help you and your allies escape as well."set DU0[i]="Repel is used to remove buffs from allies and enemies, and to prevent heroes with spells from being interrupted or damage dealers from being disabled."set E00[i]="Guardian Angel makes a team nearly impervious to physical damage and provides 25/sec HP regeneration, use this time wisely to survive or attack."set i=i+1set DC0[37]=1211117636set DT0[37]=1747989587set DD0[37]=1848656203set DS0[37]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"call SNI(DC0[37],"spell slam")call SYI(DC0[37],1,DT0[37])set DR0[i]="Endurance Aura is usually more useful later in the game when your team is fighting together, so get your other skills first."set DP0[i]="Call of the Wild is very powerful: The boar gives damage and slow, while the hawk can provide vision over runes, neutral creeps and other key locations."set DQ0[i]="Wild Axes are more useful early game and against heroes with less armor. Destroy trees with Wild Axes to surprise your opponents and for escaping."set DU0[i]="Try casting Wild Axes behind the target to compensate for their movement. You can also manipulate their return path by moving Rexxar."set E00[i]="Find opportunities to use Roar whenever it is available. It is useful on heroes who have an escape mechanism or are immune to magic."set i=i+1set DC0[38]=1160786000set DT0[38]=1747989586set DD0[38]=1848656202set DS0[38]="ReplaceableTextures\\CommandButtons\\BTNChimaera.blp"call SNI(DC0[38],"stand 3")call SYI(DC0[38],1,DT0[38])set DR0[i]="Dual Breath and Ice Path help to make Jakiro a strong offensive and defensive support hero. "set DP0[i]="Jakiro can cast his spells immediately by clicking the nearby ground in the desired direction, sometimes this is more effective than clicking on the target."set DQ0[i]="A level of Liquid Fire early on can be useful for deterring physical attacks "set DU0[i]="Macropyre is a slow but powerful spell, combine it with other spells (yours or a teammate) to make sure the opponent is standing in the area of effect."set E00[i]="It is often a good idea to purchase useful support items like Mekansm or Shiva's Guard, two items that also increase his low armor significantly."set i=i+1set DC0[39]=1311781193set DT0[39]=1747989812set DD0[39]=1848656201set DS0[39]="ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"call SNI(DC0[39],"stand 2")call SYI(DC0[39],1,DT0[39])call SYI(1311781194,1,DT0[39])call SYI(1311781192,1,DT0[39])call SYI(1311781204,1,DT0[39])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[40]=1311781206set DT0[40]=1747989591set DD0[40]=1848656200set DS0[40]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"call SNI(DC0[40],"stand ready")call SYI(DC0[40],1,DT0[40])set DR0[i]="PotM can be extremely efficient and gank with just a few Wraith Bands, Boots of Speed and a Bottle."set DP0[i]="Getting one level of Leap is usually sufficient early on until Starfall and Elune's Arrow are fully leveled."set DQ0[i]="Land your Elune's Arrow by coordinating with allies and predicting enemy movements. You can even hit invisible or faraway targets with practice."set DU0[i]="Starfall hits a second time for half damage to one random enemy within 200 range, get close if you can to deal bonus damage"set E00[i]="Moonlight Shadow can be used to initiate or escape but sometimes it can be learned later when PotM can use it without compromising her mana pool."set i=i+1set DC0[41]=1211117651set DT0[41]=1747989585set DD0[41]=1848656212set DS0[41]="ReplaceableTextures\\CommandButtons\\BTNStorm.blp"call SNI(DC0[41],"spell")call SYI(DC0[41],1,DT0[41])set DR0[i]="Do not get Overload at level 1 since you do not have any spells to activate its effect with."set DP0[i]="Choosing which ability to max first can be difficult, but generally at least one point in all three skills is a good idea."set DQ0[i]="You have to wait 1 second after casting Static Remnant before it begins detecting nearby units for its explosion effect."set DU0[i]="In addition to chasing and escaping, Lightning Ball can be used to dodge many spells with the right timing."set E00[i]="An item like Bloodstone is useful on Storm Spirit because the percentage-based mana cost of Lightning Ball makes regeneration an important asset."set i=i+1set DC0[42]=1211117649set DT0[42]=1747989593set DD0[42]=1848656199set DS0[42]="ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp"call SNI(DC0[42],"stand alternate 3")call SYI(DC0[42],1.15,DT0[42])set DR0[i]="A level of Burning Spears early on is great for harassing enemy heroes. Use it manually by clicking 'R' then the desired target to avoid drawing focus fire."set DP0[i]="Berserker's Blood makes you stronger as you take damage. The bonuses stop when you have 51% HP, so there is little point in taking additional damage."set DQ0[i]="Life Break deals damage based on the remaining health of the target, making it strongest at the beginning of a fight. "set DU0[i]="Inner Vitality heals more when you have less than 40% of your life, but avoid making the mistake of casting it too late in battles."set E00[i]="Survivability while in low health is important for Huskar: Consider items such as Armlet of Mordiggan, Black King Bar, or Heart of Tarrasque."set i=i+1set DC0[43]=1160786265set DT0[43]=1747989816set DD0[43]=1848656198set DS0[43]="ReplaceableTextures\\CommandButtons\\BTNAssassin.blp"call SNI(DC0[43],"stand victory")call SYI(DC0[43],1.2,DT0[43])set DR0[i]="Refraction is a great way of surviving in a lane, just be careful not to get hit by creeps too much."set DP0[i]="Meld starts cooling down when you click the spell, so you can hit him twice with it if you can predict your enemy's movements."set DQ0[i]="Traps can be used for vision, most effectively in cramped areas like the end of ramps or at the rune powerup spots."set DU0[i]="You can farm extremely fast by positioning yourself so that the Psi Blades splash on multiple creeps at once."set E00[i]="Placing a trap or two before engaging a fight can be a good idea, to cut off possible escape and/or chase routes."set i=i+1set DC0[44]=1311780930set DT0[44]=1747989808set DD0[44]=1848656197set DS0[44]="ReplaceableTextures\\CommandButtons\\BTNFaerieDragon.blp"call SNI(DC0[44],"attack spell")call SYI(DC0[44],1.1,DT0[44])set DR0[i]="Illusory Orb and Jaunt are used to travel short distances quickly, but if you wait too long to Jaunt, you will lose the opportunity."set DP0[i]="Puck is very fragile early game, some Bracers or Null Talismans and a level of Phase Shift can help you survive."set DQ0[i]="Using Phase Shift manually instead of Autocast will prevent stray attacks from triggering it on Autocast. In general you will have better control of its use."set DU0[i]="Waning Rift deals damage and silences, but forces you to be close enough. Use Illusory Orb or Dream Coil to help you land the spell on enemies."set E00[i]="Puck is a great initiator in fights who offers control of the battle with his spells, allowing allies to join the battle and use their spells or attacks safely."set i=i+1set DC0[45]=1211117652set DT0[45]=1747989809set DD0[45]=1848656213set DS0[45]="ReplaceableTextures\\CommandButtons\\BTNClockWerkGoblin.blp"call SNI(DC0[45],"Birth")call SYI(DC0[45],1.5,DT0[45])set DR0[i]="You can use Rocket Flare for harassing and killing creeps early on. With the right timing, you can even fire at enemies across the map."set DP0[i]="Power Cogs can be used to trap an enemy, push them away while draining mana, or as an escape mechanism since Rattletrap destroys Cogs in only 1 hit."set DQ0[i]="Battery Assault adds a lot of damage and the stuns help you with chasing, use it when no other units are nearby for best results."set DU0[i]="Hookshot's long range and high speed lets you reach enemies from out of sight. Follow up with your other spells quickly so your target cannot escape."set E00[i]="Rocket Flare also gives vision where it lands, making it very useful for scouting areas such as rune spots, neutral creeps, the enemy base."set i=i+1set DC0[46]=1211119187set DT0[46]=1747990100set DD0[46]=1848657221set DS0[46]="ReplaceableTextures\\CommandButtons\\BTNProudmoore.blp"call SNI(DC0[46],"stand victory")call SYI(DC0[46],1.1,DT0[46])set DR0[i]="Tidebringer is extremely useful early game: Use the bonus damage for killing creeps and the cleave effect to harass opponents at the same time."set DP0[i]="The bubble animation from Torrent can only be seen by your team so try to use this to your advantage."set DQ0[i]="An ally's assistance or X Marks the Spot is a great way of making sure Torrent and Ghost Ship hit your opponent."set DU0[i]="Escaping enemy heroes is easy by casting X Marks the Spot on them. It also prevents them from getting away."set E00[i]="The Ghost Ship will crash 1000 range from where you stand when you cast it. Keep your distance when you use it."set i=i+1set DC0[47]=1311786311set DT0[47]=1747990337set DD0[47]=1848657224set DS0[47]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"call SNI(DC0[47],"stand victory")call SYI(DC0[47],1.2,DT0[47])set DR0[i]="Powershot deals significant damage, making it ideal to max first. Be sure not to fire through creeps if you want to deal maximum damage to your target."set DP0[i]="An early level of Windrunner can provide you with a quick getaway and chasing tool."set DQ0[i]="Shackleshot can either be used on your intended target to bind him to a nearby unit, or to bind the designated target located BEHIND the unit that you fired it at."set DU0[i]="Focus Fire is also a powerful spell to use on buildings and Roshan."set E00[i]="As long as you do not attack another target, the effect of Focus Fire will stay on. Use your spells and active items to help you fire at your target."set i=i+1set DC0[48]=1160786510set DT0[48]=1747993411set DD0[48]=1848658766set DS0[48]="ReplaceableTextures\\CommandButtons\\BTNFlyingMachine.blp"call SNI(DC0[48],"stand 3")call SYI(DC0[48],1.10,DT0[48])call SYI(1160786511,1.10,DT0[48])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[49]=1160786506set DT0[49]=1747993412set DD0[49]=1848658770set DS0[49]="ReplaceableTextures\\CommandButtons\\BTNThrall.blp"call SNI(DC0[49],"stand 3")call SYI(DC0[49],1.10,DT0[49])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[50]=1160786505set DT0[50]=1747993401set DD0[50]=1848658763set DS0[50]="ReplaceableTextures\\CommandButtons\\BTNTuskaarBrown.blp"call SNI(DC0[50],"stand 3")call SYI(DC0[50],1.00,DT0[50])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[51]=1160786502set DT0[51]=1747993400set DD0[51]=1848658765set DS0[51]="ReplaceableTextures\\CommandButtons\\BTNPhoenix.blp"call SNI(DC0[51],"stand 3")call SYI(DC0[51],1.05,DT0[51])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[52]=1211117624set DT0[52]=1747989589set DD0[52]=1848656195set DS0[52]="ReplaceableTextures\\CommandButtons\\BTNRazorback.blp"call SNI(DC0[52],"stand")call SYI(DC0[52],1.65,DT0[52])set DR0[i]="Rigwarl is a known for punishing heroes that attack him and surviving for long times but he still needs armor, regeneration and hit points."set DP0[i]="Quill spray doesn't initially deal much damage, but the stacking effect makes it very powerful over time in battles."set DQ0[i]="Sometimes one level of Goo can be enough to slow down an enemy hero early game."set DU0[i]="Rigwarl needs a fair amount of mana early-game, Ring of Basilius, Magic Stick or Bottle can boost his early offensive power immensely."set E00[i]="You can mitigate a lot of damage if you turn your hero at the right times thanks to your passive Bristleback. Play mind games on your opponent."set i=i+1set DC0[53]=1160786520set DT0[53]=1747993428set DD0[53]=1848659019set DS0[53]="ReplaceableTextures\\CommandButtons\\BTNMedivh.blp"call SNI(DC0[53],"stand 3")call SYI(DC0[53],1.15,DT0[53])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[54]=1311788336set DT0[54]=1747993671set DD0[54]=1848659249set DS0[54]="ReplaceableTextures\\CommandButtons\\BTNFireBrewmaster.blp"call SNI(DC0[54],"stand 3")call SYI(DC0[54],1,DT0[54])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[55]=1160786507set DT0[55]=1747993409set DD0[55]=1848658762set DS0[55]="ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"call SNI(DC0[55],"stand 3")call SYI(DC0[55],1.3,DT0[55])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[56]=1211122767set DT0[56]=1747993672set DD0[56]=1848659254set DS0[56]="ReplaceableTextures\\CommandButtons\\BTNDragonHawk.blp"call SNI(DC0[56],"stand 3")call SYI(DC0[56],1.1,DT0[56])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[57]=1160786738set DT0[57]=1747993922set DD0[57]=1848659269set DS0[57]="ReplaceableTextures\\CommandButtons\\BTNJunkGolem.blp"call SNI(DC0[57],"stand 3")call SYI(DC0[57],1,DT0[57])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[58]=1311788373set DT0[58]=1747993931set DD0[58]=1848659286set DS0[58]="ReplaceableTextures\\CommandButtons\\BTNEarthBrewmaster.blp"call SNI(DC0[58],"stand 3")call SYI(DC0[58],1,DT0[58])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[59]=1311788356set DT0[59]=1747993936set DD0[59]=1848659271set DS0[59]="ReplaceableTextures\\CommandButtons\\BTNPriest.blp"call SNI(DC0[59],"stand victory")call SYI(DC0[59],1.25,DT0[59])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DF0=59set i=60set DG0=60set DC0[60]=1165451634set DT0[60]=1747989834set DD0[60]=1848656437set DS0[60]="ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"call SNI(DC0[60],"spell slam")call SYI(DC0[60],1,DT0[60])set DR0[i]="Stifling Dagger is used for creep-killing and slowing opponents; prevent enemies from escaping by using it with Blink Strike."set DP0[i]="Try to Blink Strike to a nearby allied or enemy unit to make a quick escape when caught in a defensive situation. "set DQ0[i]="Be cautious when entering battles with Blink Strike, you could be caught outnumbered or disabled without your escape mechanism."set DU0[i]="Blur can sometimes allow you to surprise opponents if they aren't paying attention."set E00[i]="Items like Battlefury are useful, but getting a Black King Bar or a Satanic afterward will help you survive long enough to deal damage."set i=i+1set DC0[61]=1211117654set DT0[61]=1747989835set DD0[61]=1848656438set DS0[61]="ReplaceableTextures\\CommandButtons\\BTNNagaSeaWitch.blp"call SNI(DC0[61],"stand ready")call SYI(DC0[61],1,DT0[61])call SYI(1211119684,1,DT0[61])call SYI(1211119683,1,DT0[61])call SYI(1211119668,1,DT0[61])call SYI(1211119682,1,DT0[61])set DR0[i]="Mystic Snake is a smart choice to have early game: Its damage and mana drain makes it great for harassing and offsetting its own mana cost."set DP0[i]="Mana Shield will increase your survivability drastically. Use it wisely or it can also leave you with no mana for your other spells."set DQ0[i]="Using Split Shot allows you to attack multiple units, but the extra arrows from Split Shot do not gain the properties of orb effects."set DU0[i]="Stone Gaze is an ultimate that is used to slow opponents and remove their buffs, making it easy to escape or attack the purged enemies."set E00[i]="Items that increase statistics and regeneration like Linkens Sphere will always be a good choice because of Mana Shield."set i=i+1set DC0[62]=1432646245set DT0[62]=1747989836set DD0[62]=1848656439set DS0[62]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"call SNI(DC0[62],"spell slam")call SYI(DC0[62],1,DT0[62])set DR0[i]="Night Stalker may be passive during the day, but at night his spells make him much more powerful and great for hunting heroes down."set DP0[i]="Void is your primary source of damage early game and can be used to interrupt spells and teleports with its mini-stun."set DQ0[i]="While Hunter in the Night does nothing during the day, get it so that during nighttime it will give you massive movement and attack speed."set DU0[i]="Use Crippling Fear when you are hunting heroes so that they cannot disable or slow you while you are chasing them."set E00[i]="Since Darkness will pause time when activated, casting it at night whenever it is on cooldown will extend the total nighttime."set i=i+1set DC0[63]=1313026096set DT0[63]=1747989837set DD0[63]=1848656688set DS0[63]="ReplaceableTextures\\CommandButtons\\BTNSkeletonArcher.blp"call SNI(DC0[63],"stand victory")call SYI(DC0[63],1.8,DT0[63])call FZ1(DC0[63],100,125,100)set DR0[i]="Skeleton King is a hero who is known for his ability to reincarnate if focused upon and dealing a lot of damage if he is ignored by opponents. "set DP0[i]="Hellfire Blast is a great spell for the early laning phase and a few levels of Attribute Bonus can give you stat points for additional stuns."set DQ0[i]="Critical Strike is generally preferred over Vampiric Aura because its lifesteal is not very effective earlier when Leoric needs more damage."set DU0[i]="Make sure you have enough mana for Hellfire Blasts and especially Reincarnation. Buying a Magic Stick and/or a Bottle can pay off nicely."set E00[i]="Get cheaper damage items like Armlet of Mordiggan and Desolator. A Black King Bar will allow you to dish out damage without being disabled."set i=i+1set DC0[64]=1430467634set DT0[64]=1747989838set DD0[64]=1848656470set DS0[64]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"call SNI(DC0[64],"stand victory")call SYI(DC0[64],1.1,DT0[64])set DR0[i]="Lucifer can obtain gold very quickly thanks to Devour, so getting regeneration items like Perseverance will help him to cast spells and survive in the lane."set DP0[i]="Devour deals 20 damage per second, so consume creeps with low HP remaining so you can finish digesting the enemy quickly."set DQ0[i]="Use the command -ma to find your opponents' level for potential LVL? Death targets. Its mini-stun will also interrupt channeling spells and teleports."set DU0[i]="Doom is usually used in conjunction with LVL? Death for killing enemy heroes; you can also use it on heroes to silence their spells."set E00[i]="When chasing or escaping with Scorched Earth, cast it in front of you so that you will experience the movement speed bonuses for a longer period of time."set i=i+1set DC0[65]=1429221424set DT0[65]=1747989839set DD0[65]=1848656469set DS0[65]="ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.tga"call SNI(DC0[65],"spell throw")call SYI(DC0[65],0.8,DT0[65])set DR0[i]="Effective use of Impale and Mana Burn early game requires you to purchase some Null Talismans or Bracers and Bottle."set DP0[i]="Mana Burn is a devastating spell to have in the lane, force opponents to play defensively by preventing them from casting spells."set DQ0[i]="Unlike other Agility heroes, Anub'arak is a caster. Getting items like Dagon can be more useful than purchasing damage items."set DU0[i]="Vendetta is a good initiating spell for surprising opponents. Cast it far away so that they cannot hear its sound effect upon activation."set E00[i]="Be careful when using Vendetta against multiple opponents and going near towers where they can see you while you are invisible."set i=i+1set DC0[66]=1430468913set DT0[66]=1747989840set DD0[66]=1848656689set DS0[66]="ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.tga"call SNI(DC0[66],"spell")call SYI(DC0[66],1,DT0[66])call FZ1(DC0[66],175,75,200)set DR0[i]="Slithereen Crush requires good positioning, so do your best to stand next to the hero you are trying to stun."set DP0[i]="Sprint is a great spell for both chasing and escaping but be careful when using it because you will take bonus damage."set DQ0[i]="In addition to lowering armor, Amplify Damage provides vision of enemies, even heroes that have the ability to become invisible."set DU0[i]="Bash is usually more effective later in the game when you have more items like Armlet of Mordiggan."set E00[i]="Slardar's role in battles is to initiate with Slithereen Crush and focus an enemy with Bash and Amplify Damage. Pick off escapees with Sprint."set i=i+1set DC0[67]=1430466609set DT0[67]=1747989841set DD0[67]=1848656690set DS0[67]="ReplaceableTextures\\CommandButtons\\BTNBlueDemoness.tga"call SNI(DC0[67],"spell slam")call SYI(DC0[67],1.3,DT0[67])set DR0[i]="Blink provides you with an escape mechanism and spell dodge but on higher levels it becomes a powerful chasing tool as well."set DP0[i]="Scream of Pain is used for killing creeps and harassing opponents, making it more useful than Shadow Strike early game."set DQ0[i]="Try to hit as many targets as possible with Sonic Wave by targeting the ground instead of on an enemy hero directly."set DU0[i]="Shadow Strike does decent damage but its primary use is for the slow it provides for chasing and outrunning opponents."set E00[i]="Her spell reliance, mobility and survivability allows her to buy expensive Intelligence items such as a Guinsoo's Scythe of Vyse."set i=i+1set DC0[68]=1160785972set DT0[68]=1747989842set DD0[68]=1848656471set DS0[68]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"call SNI(DC0[68],"stand victory")call SYI(DC0[68],1,DT0[68])set DR0[i]="Searing Arrows provide damage for last hitting creeps and harassing enemy heroes by using it manually by clicking 'R' followed by the designated target."set DP0[i]="Wind Walk is commonly used for chasing and escaping but the invisibility and movement speed can help you avoid specific spells with the right timing."set DQ0[i]="Cast Death Pact on enemy or neutral creeps instead of allied units whenever possible because it will give you the gold for killing the unit."set DU0[i]="Regeneration items like Orchid Malevolence or a Linkens Sphere will allow liberal use of his abilities in battle and help him against spellcasters and nukers."set E00[i]="Strafe is usually gotten later, but combined with Searing Arrows, Clinkz can deal a lot of damage quickly, powerful against enemy heroes and buildings."set i=i+1set DC0[69]=1162032181set DT0[69]=1747989843set DD0[69]=1848656467set DS0[69]="ReplaceableTextures\\CommandButtons\\BTNFacelessOne.blp"call SNI(DC0[69],"spell slam")call SYI(DC0[69],1.3,DT0[69])call FZ1(DC0[69],0,255,150)set DR0[i]="Time Walk is your escaping and chasing skill, but it will allow you to avoid spells and damage since you are invulnerable during the animation."set DP0[i]="Get Backtrack early game if you need to play defensively, while Time Lock will allow you to be a little more aggressive."set DQ0[i]="Since Darkterror is so fragile, enter battles by using Time Walk and then cast Chronosphere to prevent yourself from being disabled or killed otherwise."set DU0[i]="Chronosphere affects all units that are not controlled by you, including both allies and enemies. Avoid hitting teammates or it could cost them their lives."set E00[i]="Items such as Power Treads and Butterfly will give both damage and attack speed, which is useful if Void wants to repetitively stun with Time Lock."set i=i+1set DC0[70]=1162032951set DT0[70]=1747989844set DD0[70]=1848656466set DS0[70]="ReplaceableTextures\\CommandButtons\\BTNNetherDragon.blp"call SNI(DC0[70],"spell slam")call SYI(DC0[70],1.2,DT0[70])call FZ1(DC0[70],75,255,25)set DR0[i]="Poison Attack allows you to harass an opponent and permanently chase them thanks to a 0 cooldown starting at level 3."set DP0[i]="Prevent creeps and towers from attacking you by casting Poison Attack manually by clicking 'C' and then the designated target."set DQ0[i]="Neurotoxin will add bonus damage, useful early for getting the last hit on creeps and also for dealing damage to heroes as well."set DU0[i]="Early HP and movement speed items like Phase Boots or a Point/Vitality Booster can really make a difference."set E00[i]="Sometimes it is wise to invest in a Lothar's Edge or Kelen's Dagger to provide you with the ability to get in and out of combat safely."set i=i+1set DC0[71]=1160785970set DT0[71]=1747989845set DD0[71]=1848656473set DS0[71]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"call SNI(DC0[71],"spell")call SYI(DC0[71],1,DT0[71])set DR0[i]="Use your attack range to help gauge how far opponents need to be for Plasma Field to deal the most damage."set DP0[i]="Unstable Current will slow opponents who cast spells on you and could be useful to help prevent yourself from being killed."set DQ0[i]="Static Link is powerful if you can stay within the range of opponents - getting Unstable Current can sometimes help with that."set DU0[i]="Storm Seeker strikes the target with the lowest health, so use it after creeps have died or when chasing a solitary target."set E00[i]="Consider increasing your HP along with damage when purchasing items."set i=i+1set DC0[72]=1429221443set DT0[72]=1747989846set DD0[72]=1848656465set DS0[72]="ReplaceableTextures\\CommandButtons\\BTNGhoul.blp"call SNI(DC0[72],"victory")call SYI(DC0[72],1.5,DT0[72])call FZ1(DC0[72],100,100,100)set DR0[i]="Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit.Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit."set DP0[i]="Feast deals percentage-based damage, which is useful against heroes with high HP and lets Naix fight neutral creeps with ease."set DQ0[i]="Rage can be used to avoid spells and to prevent opponents from disabling you while you are attacking them or trying to escape from them."set DU0[i]="Infest can be used for escaping, surprising your opponents, to neutral, or to just gain significant health quickly when necessary."set E00[i]="Thanks to your physical damage and ability to steal life, Armlet of Mordiggan or Desolator are both solid choices for high-tier items."set i=i+1set DC0[73]=1211117640set DT0[73]=1747989847set DD0[73]=1848656468set DS0[73]="ReplaceableTextures\\CommandButtons\\BTNPugna.BLP"call SNI(DC0[73],"stand ready")call SYI(DC0[73],1,DT0[73])set DR0[i]="Nether Blast gives you an incredible skill for killing creeps, harassing heroes and pushing. Use it to score the killing blow to a tower."set DP0[i]="Decrepify can be used on opponents either to increase spell damage from you and your allies or to prevent them from attacking."set DQ0[i]="Nether Ward will drain mana and punish opponents for using spells. Just remember to cast it where opponents cannot destroy it easily."set DU0[i]="Aghanim's Scepter, Linkens Sphere and Bloodstone are examples of items that offer survivability while improving his spellcasting abilities."set E00[i]="Life Drain deals a lot of damage unless opponents disable you or run away. With an Aghanim's Scepter, its cooldown becomes 0."set i=i+1set DC0[74]=1332109682set DT0[74]=1747989848set DD0[74]=1848656464set DS0[74]="ReplaceableTextures\\CommandButtons\\BTNSeaGiantGreen.blp"call SNI(DC0[74],"attack slam")call SYI(DC0[74],1,DT0[74])set DR0[i]="Be sure to attack enemies slowed by Gush, the armor reduction means that your hits will deal more damage than normal."set DP0[i]="Anchor Smash is an offensive damage spell that lets you hurt multiple units, good for killing neutral creeps and useful in team battles."set DQ0[i]="Kraken Shell gives you some protection against physical damage as well as a debuff removal against certain spells."set DU0[i]="In fights, Tidehunter should be in the middle of the action drawing focus fire and dealing damage because of his skill set and high survivability."set E00[i]="Ravage has a large area of effect but Kelen's Dagger will allow you to initiate without being disabled and use it in an optimal spot."set i=i+1set DC0[75]=1332963428set DT0[75]=1747989849set DD0[75]=1848656463set DS0[75]="ReplaceableTextures\\CommandButtons\\BTNVoidWalker.blp"call SNI(DC0[75],"spell")call SYI(DC0[75],1.5,DT0[75])call FZ1(DC0[75],150,0,150)set DR0[i]="High costs and cooldowns give Atropos limited ability use: Cast spells intelligently and get items like Null Talismans and/or Magic Stick for your mana pool."set DP0[i]="Brain Sap is a powerful nuke and heal and deals exact unreduced damage so get it early and always try to use it on enemy heroes when using the spell."set DQ0[i]="Use Nightmare to help teammates to aim their spells and remove an opponent from battles temporarily while you fight their allies."set DU0[i]="Enfeeble is usually a skill to get after Brain Sap and Nightmare to use on enemy heroes with high damage to reduce their damage capabilities severely."set E00[i]="Fiend's Grip will work on Magic Immune units such as those under the active effect of Black King Bar, holding them in place but dealing no damage."set i=i+1set DC0[76]=1429221445set DT0[76]=1747989850set DD0[76]=1848656440set DS0[76]="ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp"call SNI(DC0[76],"stand victory")call SYI(DC0[76],1.3,DT0[76])set DR0[i]="Death Pulse lets you kill creeps and harass heroes simultaneously, great for pushing and healing allied units because of its low cooldown."set DP0[i]="Sadist will provide you with some early regeneration for killing creeps, while Heartstopper Aura becomes effective as the game goes on."set DQ0[i]="Reaper's Scythe is known for its ability to kill heroes outright, allowing you to bring down even high-HP Strength heroes with ease."set DU0[i]="Your ultimate can also be used to stun opponents in certain situations, such as interrupting channeling spells and teleports."set E00[i]="Items like Bloodstone or Heart of Tarrasque allow you to survive long enough in team battles to make your spells more effective."set i=i+1set DC0[77]=1429221446set DT0[77]=1747990064set DD0[77]=1848656693set DS0[77]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"call SNI(DC0[77],"stand 3")call SYI(DC0[77],1.0,DT0[77])set DR0[i]="Pudge can known for his ability to isolate enemies with Meat Hook and using Rot and Dismember afterward, killing them outright. "set DP0[i]="Early regeneration and movement speed items such as Bottle and Phase Boots help provide Pudge with the means to cast spells and chase his opponents."set DQ0[i]="Use Meat Hook from a location where you are not obstructed by any allied or enemy units other than your target to ensure a better chance of landing it."set DU0[i]="A Hood of Defiance will improve your magic resistance to reduce damage from using Rot and getting hit by spells; The massive regeneration is also good."set E00[i]="Use your spells defensively: Rot can be used to commit suicide if necessary and Meat Hook can be used to rescue an ally from one or more enemies."set i=i+1set DC0[78]=1328558154set DT0[78]=1747990065set DD0[78]=1848656691set DS0[78]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"call SNI(DC0[78],"stand ready")call SYI(DC0[78],1.2,DT0[78])set DR0[i]="Empowering Haste is a smart skill to level first, it gives Barathrum movement speed and significant damage for killing creeps and heroes."set DP0[i]="A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels.A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels."set DQ0[i]="Get Strength Power Treads because the attack and movement speed benefits your other skills and the boost in HP helps you survive."set DU0[i]="Charge of Darkness gives Barathrum spell immunity after 12 seconds and provides vision of the target for you and your allies."set E00[i]="Nether Strike puts you from the opposite side of where you were facing, push opponents backwards and into your allies."set i=i+1set DC0[79]=1432510828set DT0[79]=1747990066set DD0[79]=1848656472set DS0[79]="ReplaceableTextures\\CommandButtons\\BTNNerubianQueen.blp"call SNI(DC0[79],"attack")call SYI(DC0[79],1.0,DT0[79])call FZ1(DC0[79],255,200,200)set DR0[i]="Take care of Weaver's HP/damage problems with Bracers or Wraith Bands and get regeneration so he can use his spells freely."set DP0[i]="An early level of Watchers can be used to provide vision over the rune powerups. Patrol them to increase their area of detection."set DQ0[i]="Shukuchi is used for harassing and chasing opponents offensively, and escaping and avoiding certain projectile spells defensively."set DU0[i]="If your Geminate Attack is not working, make sure that you input an attack command ('A' or right-click) and are not simply auto-attacking."set E00[i]="Use Time Lapse after taking a lot of recent damage to heal yourself, allowing you to pull off some dangerous moves like diving into towers."set i=i+1set DC0[80]=1315334514set DT0[80]=1747990067set DD0[80]=1848656462set DS0[80]="ReplaceableTextures\\CommandButtons\\BTNShade.blp"call SNI(DC0[80],"stand channel")call SYI(DC0[80],1.15,DT0[80])call FZ1(DC0[80],0,0,0)set DR0[i]="Necromastery is important because of its massive damage gain and because your ultimate deals damage based on the number of souls."set DP0[i]="Shadow Raze gives you three powerful nuke spells that should be maxed out first. Gauge the distance correctly and hit multiple times."set DQ0[i]="Requiem of Souls deals more damage the closer you are: Placement items like Lothar's Edge and Kelen's Dagger can help you land it."set DU0[i]="After maxing your other two spells, Presence of the Dark Lord will be useful by then, good for pushing and dealing more physical damage."set E00[i]="If you die, remember to fill up on souls again before major fights when you respawn or you will be much less effective in battles."set i=i+1set DC0[81]=1429221451set DT0[81]=1747990068set DD0[81]=1848656692set DS0[81]="ReplaceableTextures\\CommandButtons\\BTNArachnathidGreen.blp"call SNI(DC0[81],"attack 3")call SYI(DC0[81],1,DT0[81])set DR0[i]="Burrowstrike is both versatile and powerful: It deals damage, stuns and provides you with a useful escape or chasing mechanism."set DP0[i]="Using Sandstorm at the right time will dodge certain projectile spells and can protect you temporarily if it is necessary."set DQ0[i]="Getting Kelen's Dagger will give him increased mobility and reach, and also the ability to Blink into battle right after channeling Epicenter."set DU0[i]="While you cannot move while Epicenter is channeling, once the pulses begin you can freely move around (mostly to chase your opponent)."set E00[i]="Caustic Finale might be an orb effect but it is extremely useful for killing multiple units quickly for fighting neutrals, pushing and defending."set i=i+1set DC0[82]=1332766568set DT0[82]=1747990069set DD0[82]=1848656461set DS0[82]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"call SNI(DC0[82],"stand victory")call SYI(DC0[82],1,DT0[82])set DR0[i]="Counter Helix gives Axe the flexibility to both lane and jungle. A Stout Shield will help reduce the damage from taking attacks in order to activate Helix."set DP0[i]="A Vanguard or a Hood of Defiance offers survivability and regeneration, which are usually more useful to Axe than increasing his attack speed or damage."set DQ0[i]="Berserker's Call is used to initiate fights and draw focus fire. Using it when there are more enemy units increases the chance of activating Counter Helix."set DU0[i]="Monitor your opponent's HP for the perfect Culling Blade opportunity to finish them off. However, if your enemy has too much HP, it will hardly do anything."set E00[i]="Kelen's Dagger and/or Phase Boots can help you enter the fight first and get close enough for a Berserker's Call."set i=i+1set DC0[83]=1215722344set DT0[83]=1747990070set DD0[83]=1848656474set DS0[83]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"call SNI(DC0[83],"stand victory")call SYI(DC0[83],1.25,DT0[83])call FZ1(DC0[83],250,150,150)set DR0[i]="Getting Blood Bath will allow you to take a few hits as you are killing creeps because you will recover your health immediately afterwards."set DP0[i]="An early level of Bloodrage can be useful for silencing enemies temporarily and for dealing a little bit of damage."set DQ0[i]="Phase Boots and HP can be just as useful as damage items because they increase his survivability for chasing enemies and other longer battles."set DU0[i]="Use Rupture when your enemy has to either run away or to prevent them from moving, such as when an ally is about to use a powerful spell."set E00[i]="Both allies and enemies gain the massive damage increase and are silenced from Bloodrage, which can be disastrous if used incorrectly."set i=i+1set DC0[84]=1432642913set DT0[84]=1747990071set DD0[84]=1848656460set DS0[84]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"call SNI(DC0[84],"stand ready")call SYI(DC0[84],1,DT0[84])set DR0[i]="Abbadon's spells can save allies while dealing damage, so support and regeneration items like Vladmir's Offering can be more useful than damage items."set DP0[i]="Death Coil can be used both as a nuke and a heal, just remember that it deals damage to you unless you are using Aphotic Shield or Borrowed Time."set DQ0[i]="Aphotic Shield prevents damage but can also be used to remove certain debuffs, such as removing the stun duration effect on an ally."set DU0[i]="Frostmourne is usually gotten later but it is very useful for chasing and helping your allies outrun your opponents."set E00[i]="Borrowed Time can be cast manually as well. If you know you are going to receive a lot of damage sometimes it can be wiser to use it then."set i=i+1set DC0[85]=1160786242set DT0[85]=1747990072set DD0[85]=1848656441set DS0[85]="ReplaceableTextures\\CommandButtons\\BTNvengeanceincarnate.blp"call SNI(DC0[85],"stand ready")call SYI(DC0[85],0.8,DT0[85])set DR0[i]="Spectral Dagger is your utility spell. You can use it for chasing people down, scouting dangerous areas and escaping. "set DP0[i]="You also walk through units, trees, even cliffs while you are walking on Spectral Dagger's black path, making it very handy when used properly."set DQ0[i]="Desolate is great for dealing target to isolated targets but Dispersion helps you to survive in the lane: Chose whatever combination suits you best."set DU0[i]="Haunt lets you jump into a fight directly from anywhere in the map; just make sure that you pay attention to the actions of your team."set E00[i]="Getting HP will allow you to withstand and dish out more Dispersion damage, which is extremely powerful in team fights."set i=i+1set DC0[86]=1160786241set DT0[86]=1747990073set DD0[86]=1848656459set DS0[86]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctor.blp"call SNI(DC0[86],"stand victory")call SYI(DC0[86],1.25,DT0[86])set DR0[i]="Paralyzing Cask is your initiating spell for your other skills and can effectively keep two nearby units stun-locked at higher levels."set DP0[i]="Maledict drastically reduces the damage needed to kill opponents and is an important spell to land in every fight."set DQ0[i]="An early level of Voodoo Restoration can provide a relatively cheap heal if you are forced to play defensively."set DU0[i]="Damaging your opponent immediately after using Maledict is wise because it will deal more bonus damage overall at the 3 ticks."set E00[i]="Death Ward is a powerful channeling spell if not interrupted. A Black King Bar will help to prevent enemies from disabling you."set i=i+1set DC0[87]=1429221456set DT0[87]=1747990081set DD0[87]=1848656449set DS0[87]="ReplaceableTextures\\CommandButtons\\BTNDestroyer.blp"call SNI(DC0[87],"stand alternate 2")call SYI(DC0[87],0.85,DT0[87])set DR0[i]="Getting Intelligence and mana items is extremely important for Harbringer as the power of Arcane Orb and Sanity's Eclipse rely on this."set DP0[i]="Use Astral Imprisonment to control your opponents' mana, for escaping/chasing, or on yourself and allies to avoid spells."set DQ0[i]="Cast Arcane Orb manually early on because you will have a greater chance of activating Essence Aura to use it endlessly."set DU0[i]="Guinsoo's Scythe of Vyse is a great choice because it offers Intelligence, balanced stats and provides Harbringer with a powerful disable."set E00[i]="Use Sanity's Eclipse early in fights so that you drain casters with high Intelligence of their mana and cripple their ability to cast spells."set i=i+1set DC0[88]=1160786243set DT0[88]=1747990083set DD0[88]=1848656450set DS0[88]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"call SNI(DC0[88],"spell")call SYI(DC0[88],1.5,DT0[88])set DR0[i]="Shadow Word is either a heal or damage over time, definitely the most powerful early game spell to have."set DP0[i]="The affordable Mekansm is a good support item for Warlock, who is not a hero who is reliant on gold and items to be effective."set DQ0[i]="Rain of Chaos creates a powerful Infernal that can take on heroes and is also great for killing creeps and pushing buildings."set DU0[i]="Fatal Bonds can deal huge damage if you and your teammates have other area of effect (AoE) spells that would hurt multiple linked units."set E00[i]="The stun when using Rain of Chaos along with its huge casting range (1200) is great for interrupting spells and initiating battles."set i=i+1set DC0[89]=1211117641set DT0[89]=1747990084set DD0[89]=1848656458set DS0[89]="ReplaceableTextures\\CommandButtons\\BTNKoboldGeomancer.blp"call SNI(DC0[89],"spell")call SYI(DC0[89],1.4,DT0[89])call SYI(1211117642,1.4,DT0[89])set DR0[i]="Vladmir's Offering and/or Mekansm provides valuable auras and useful heals that can help support your team and keep your Meepos alive."set DP0[i]="Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival).Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival)."set DQ0[i]="Geomancer is an advanced hero: Be sure to monitor their individual health because if one dies, they all will."set DU0[i]="Strength Power Treads are suggested since clones will receive all of the Strength from footwear along with a 2.5 bonus (12.5 total)."set E00[i]="Time Earthbind with each of your clones. With 4 Meepos and Level 4 Earthbind, you can almost permanently immobilize them."set i=i+1set DC0[90]=1311781207set DT0[90]=1747990085set DD0[90]=1848656457set DS0[90]="ReplaceableTextures\\CommandButtons\\BTNDarkTrollShadowPriest.blp"call SNI(DC0[90],"spell")call SYI(DC0[90],1.2,DT0[90])set DR0[i]="An early level of both Shadow Wave and Shallow Grave provides a lot of support before getting Poison Touch to level 3 for its added stun."set DP0[i]="Try to use Shadow Wave to heal and damage opponents at the same time. Surround an enemy with multiple allied units for more damage."set DQ0[i]="In addition to slowing and damaging opponents, Poison Touch will allow you to interrupt channeling spells and teleports"set DU0[i]="Dazzle generally does not need many items and can sometimes focus on increasing his spell use with regeneration and support items like Mekansm."set E00[i]="Weave is a powerful spell, try to hit both allies and enemies with it, and it can also be used to provide vision before major battles occur."set i=i+1set DC0[91]=1311780946set DT0[91]=1747990086set DD0[91]=1848656451set DS0[91]="ReplaceableTextures\\CommandButtons\\BTNPitLord.blp"call SNI(DC0[91],"stand channel")call SYI(DC0[91],0.95,DT0[91])set DR0[i]="Firestorm will be your main ability for killing creeps but it can deal a lot of damage to heroes if you combine it with disables or slows."set DP0[i]="The Pit of Malice is a useful disable that lasts for 10 seconds so it will both ensnare opponents and deter opponents from entering the circle."set DQ0[i]="Expulsion is usually used after some creeps have died so the spell lasts longer and will deal damage and mini-stun enemies."set DU0[i]="Pit Lord is played more as a caster, increase his team presence and spell use by obtaining expensive Intelligence items like Shiva's Guard."set E00[i]="Dark Rift is a great spell for transporting multiple allies to surprise opponents, and more importantly to defend and attack the base."set i=i+1set DC0[92]=1211117650set DT0[92]=1747990087set DD0[92]=1848656456set DS0[92]="ReplaceableTextures\\CommandButtons\\BTNZombie.blp"call SNI(DC0[92],"stand")call SYI(DC0[92],2,DT0[92])call SYI(1211119433,1.3,DT0[92])set DR0[i]="Decay is used to deal damage and make opponents more vulnerable, while increasing the survivability of Dirge temporarily."set DP0[i]="Make sure Dirge is a presence who can cast his spells in fights by buying regeneration items like Vladmir's Offering and Void Stone."set DQ0[i]="Soul Rip is a powerful heal or nuke but remember that it will have almost no effect without nearby units. Cast it in crowds."set DU0[i]="Use Tombstone when engaging the enemy because the zombies have a slowing capability and may also help block your opponents."set E00[i]="Tombstone Zombies become extremely powerful when your opponents have low health and attack and move much faster."set i=i+1set DC0[93]=1211117646set DT0[93]=1747990088set DD0[93]=1848656455set DS0[93]="ReplaceableTextures\\CommandButtons\\BTNDranaiMage.blp"call SNI(DC0[93],"spell")call SYI(DC0[93],1.15,DT0[93])set DR0[i]="Ion shell is great for killing creeps and dealing damage to heroes, but it will not damage an enemy target if you cast it on them directly."set DP0[i]="A level of Surge early game can help you and allies escape and chase enemies, and works nicely to help you close in on opponents with Ion Shell."set DQ0[i]="Vacuum is an extremely powerful skill that can be used for initiating and combining with other spells. It can also interrupt channeling and teleport spells."set DU0[i]="Make sure they are standing closer to the edge of your targeting circle when casting Vacuum to pull your opponents further."set E00[i]="Use Wall of Replica where multiple heroes will touch it; try using it with Vacuum. Get your allies to run through the wall too."set i=i+1set DC0[94]=1211117653set DT0[94]=1747990082set DD0[94]=1848656454set DS0[94]="ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp"call SNI(DC0[94],"spell")call SYI(DC0[94],1.25,DT0[94])set DR0[i]="Having at least one level in Quas, Wex and Exort will give you a larger repertoire of spells. Type -invokelist to obtain a full list of combinations."set DP0[i]="Ghost Walk (QQW) can be used to get yourself out of a tight situation, and also for slowing opponents so that your allies can chase/escape."set DQ0[i]="Sunstrike (EEE) is a global-ranged nuke that deals damage based on the level of Exort. When using it, you have to factor in the 1.7 casting time."set DU0[i]="Forge Spirit (EEQ) and Cold Snap (QQQ) can be effective for pushing towers and against heroes with low armor. "set E00[i]="EMP (WWW) and Tornado (WWQ) can completely drain off heroes with low mana pools and have a impressive casting range."set i=i+1set DC0[95]=1433105516set DT0[95]=1747989572set DD0[95]=1848656182set DS0[95]="ReplaceableTextures\\CommandButtons\\BTNSpell_Shadow_SummonVoidWalker.blp"call SNI(DC0[95],"stand")call SYI(DC0[95],1.5,DT0[95])set DR0[i]="Conversion allows Enigma to neutral creep effectively. Target the highest level creep possible and move your low HP Eidolons out of the way to save them."set DP0[i]="In the lane, Conversion can be used on allied creeps to deny your opponents of experience and gold, and for making sure you last hit enemy creeps."set DQ0[i]="The multiple stuns on higher levels of Malefice make it useful for preventing an opponent from channeling spells or help you chase/escape them."set DU0[i]="Use Midnight Pulse in conjunction with Black Hole to deal massive damage to enemies. Just make sure that you cast it before Black Hole."set E00[i]="Kelen's Dagger is great for Black Hole placement, and a Black King Bar will prevent most spells from stopping the channeling effect of the spell."set i=i+1set DC0[96]=1328558390set DT0[96]=1747990354set DD0[96]=1848657721set DS0[96]="ReplaceableTextures\\CommandButtons\\BTNTrollBatRider.blp"call SNI(DC0[96],"stand")call SYI(DC0[96],1.2,DT0[96])call SYI(1328558391,1.2,DT0[96])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[97]=1311787088set DT0[97]=1747993136set DD0[97]=1848658002set DS0[97]="ReplaceableTextures\\CommandButtons\\BTNIcyGhost.blp"call SNI(DC0[97],"stand")call SYI(DC0[97],1.17,DT0[97])call SYI(1311787088,1.2,DT0[97])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[98]=1211119409set DT0[98]=1747990322set DD0[98]=1848657222set DS0[98]="ReplaceableTextures\\CommandButtons\\BTNMurgulShadowCaster.blp"call SNI(DC0[98],"stand 3")call SYI(DC0[98],1.25,DT0[98])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[99]=1164277353set DT0[99]=1747989814set DD0[99]=1848656214set DS0[99]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"call SNI(DC0[99],"spell channel")call SYI(DC0[99],1,DT0[99])call SYI(1164277357,1,DT0[99])call SYI(1160786518,1,DT0[99])call SYI(1160786519,1,DT0[99])call SYI(1160786517,1,DT0[99])set DR0[i]="Get Soul Steal if you need healing in the lane."set DP0[i]="Purchase statistic-increasing items like Wraith Bands and later items like Sange and Yasha to benefit both Terrorblade and his images."set DQ0[i]="It might be difficult to escape due to the trail you leave behind when walking, you may have to use an image to act as a block or decoy."set DU0[i]="Sunder can turn fights around when you have low health but be careful of disables and high damage spells when trying to swap."set E00[i]="Creating ranged images in Metamorphosis will allow you to deal damage safely in fights as well as push down buildings very quickly."set i=i+1set DC0[100]=1164666213set DT0[100]=1747989817set DD0[100]=1848656215set DS0[100]="ReplaceableTextures\\CommandButtons\\BTNKeeperGhostBlue.blp"call SNI(DC0[100],"stand victory")call SYI(DC0[100],1,DT0[100])set DR0[i]="Split Earth is a very useful disable while Lightning Storm is taken because of its low cooldown. Both are powerful spells that hit multiple targets."set DP0[i]="By using Lightning Storm to finish low-health creeps with nearby opponents, you can get gold and harass enemy heroes at the same time."set DQ0[i]="Diabolic Edict is one of the most powerful spells for destroying buildings. Eliminate the creeps first so that you only have one target."set DU0[i]="Turn off Pulse Nova when you have finished using it because the spell will continue until you have exhausted your entire mana pool."set E00[i]="Items like Bloodstone or Aghanim's Scepter will allow Leshrac to use his spells more liberally and survive in the midst of battle."set i=i+1set DC0[101]=1160786504set DT0[101]=1747993410set DD0[101]=1848658764set DS0[101]="ReplaceableTextures\\CommandButtons\\BTNArchimonde.blp"call SNI(DC0[101],"stand 3")call SYI(DC0[101],1.25,DT0[101])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[102]=1433168227set DT0[102]=1747989825set DD0[102]=1848656216set DS0[102]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"call SNI(DC0[102],"stand channel")call SYI(DC0[102],1.3,DT0[51])set DR0[i]="Dark Ritual is useful for denying allied creeps and provides you with mana to use spells without buying regeneration items."set DP0[i]="Frost Nova is a very powerful spell that allows you to be aggressive. Attack the enemy a few extra times while they are slowed."set DQ0[i]="Chain Frost is most effective when used against 2-3 nearby targets (ideally heroes), but will not bounce when used on a lone unit."set DU0[i]="Frost Armor should be cast on multiple teammates when you have the mana for it later on; it works nicely against melee units."set E00[i]="The first target of your Chain Frost can interrupt channeling and teleport spells if absolutely necessary."set i=i+1set DC0[103]=1430468406set DT0[103]=1747989826set DD0[103]=1848656217set DS0[103]="ReplaceableTextures\\CommandButtons\\BTNBanshee.blp"call SNI(DC0[103],"spell wail")call SYI(DC0[103],1.35,DT0[103])set DR0[i]="Carrion Swarm is your primary nuke and first skill to max. Make use of its range by casting it on the ground instead of on a unit directly."set DP0[i]="An early level of Silence can help prevent you and your allies from being attacked by multiple spells."set DQ0[i]="The ghosts of Exorcism will attack whatever you attack, so if you want to direct all attention to a single unit simply focus them and stay nearby."set DU0[i]="Exorcism also makes Krobelus extremely effective for quickly destroying enemy buildings, so be sure to push the enemy base when you can"set E00[i]="The effect of Exorcism stops if you die in combat: Invest in items that improve your survivability, such as a Bloodstone or a Heart of Tarrasque."set i=i+1set DC0[104]=1430466872set DT0[104]=1747989827set DD0[104]=1848656218set DS0[104]="ReplaceableTextures\\CommandButtons\\BTNLion.BLP"call SNI(DC0[104],"spell callstorm")call SYI(DC0[104],1.3,DT0[104])call FZ1(DC0[104],50,100,255)set DR0[i]="With plenty of damage and disables, Lion is quite a force to be reckoned with cheap utility items such as Bottle and Phase Boots."set DP0[i]="Impale gives Lion the ability to disable multiple targets and deals decent damage, so it is definitely the most versatile of his three skills for the early game."set DQ0[i]="Mana Drain only works on units with mana: Using Mana Drain on enemy heroes will reduce their spell use while replenishing mana."set DU0[i]="Avoid wasting Finger of Death on low-health enemy heroes when a few extra attacks or using another spell like Impale will deal enough damage."set E00[i]="Wait until the duration of your first disable wears off before using another one for maximum disable time when using Impale and Voodoo."set i=i+1set DC0[105]=1162032439set DT0[105]=1747989828set DD0[105]=1848656432set DS0[105]="ReplaceableTextures\\CommandButtons\\BTNHydralisk.blp"call SNI(DC0[105],"attack")call SYI(DC0[105],1.0,DT0[105])call FZ1(DC0[105],150,200,255)set DR0[i]="Venomous Gale is a spell that hits multiple opponents and slows them, making it very useful for getting early kills."set DP0[i]="At least one level of Poison Sting is recommended early game for its slow effect."set DQ0[i]="Bottle and Magic Stick will help deal with his low HP/mana, while Phase Boots are a cheap way to improve his chasing capabilities."set DU0[i]="Wards are very useful for pushing a lane and killing neutral and enemy creeps, but you can also use it to provide vision."set E00[i]="Poison Nova deals a lot of damage but you have to combine it with other spells and attacks because it does not deal fatal damage (stops at 1 HP)."set i=i+1set DC0[106]=1430466865set DT0[106]=1747989829set DD0[106]=1848656178set DS0[106]="ReplaceableTextures\\CommandButtons\\BTNBlueMagnataur.tga"call SNI(DC0[106],"stand channel")call SYI(DC0[106],1,DT0[106])call FZ1(DC0[106],150,150,100)set DR0[i]="Bottle and Perseverance help with early regeneration,. while purchasing Kelen's Dagger later will help you to land Reverse Polarity."set DP0[i]="A few Attribute Bonus points can help you cast more spells. Save Mighty Swing for later levels when you have more damage."set DQ0[i]="By targeting the ground where you want to fire Shockwave, you can hit both creeps and opponents and make use of its long range."set DU0[i]="Magnus should cast Empower on himself and other allies with high damage before initiating team battles with his ultimate."set E00[i]="The cleave of Battlefury stacks directly with Mighty Swing, making it a good damage item especially if you already have a Perseverance."set i=i+1set DC0[107]=1430468144set DT0[107]=1747989830set DD0[107]=1848656433set DS0[107]="ReplaceableTextures\\CommandButtons\\BTNSpiritWyvern.blp"call SNI(DC0[107],"stand victory")call SYI(DC0[107],1,DT0[107])call FZ1(DC0[107],150,150,150)set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[108]=1429221441set DT0[108]=1747989831set DD0[108]=1848656434set DS0[108]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"call SNI(DC0[108],"stand victory")call SYI(DC0[108],1.05,DT0[108])set DR0[i]="Chaos Bolt and Blink Strike are active abilities that are more useful in the lane and for killing opponents than Critical Strike."set DP0[i]="Chaos Bolt is a disable that switches between average and extremely powerful, the sooner you have max out this spell, the better."set DQ0[i]="His high natural movement speed (325 - the highest in the game) and Blink Strike make him very difficult for opponents to outrun or chase him."set DU0[i]="If you Blink Strike and then use Chaos Bolt, you can spend more time hitting opponents and less time waiting for his slow casting animation. "set E00[i]="Make Nessaj and Phantasm stronger by buying Strength items like Armlet of Mordiggan (when activated) and Heart of Tarrasque."set i=i+1set DC0[109]=1311788343set DT0[109]=1747993687set DD0[109]=1848659256set DS0[109]="ReplaceableTextures\\CommandButtons\\BTNFrostWyrm.blp"call SNI(DC0[109],"stand victory")call SYI(DC0[109],0.9,DT0[109])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[110]=1311788363set DT0[110]=1747993926set DD0[110]=1848659276set DS0[110]="ReplaceableTextures\\CommandButtons\\BTNGnollWarden.blp"call SNI(DC0[110],"stand victory")call SYI(DC0[110],1.1,DT0[110])set DR0[i]=""set DP0[i]=""set DQ0[i]=""set DU0[i]=""set E00[i]=""set i=i+1set DC0[111]=1429221432set DT0[111]=1747989832set DD0[111]=1848656435set DS0[111]="ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"call SNI(DC0[111],"spell")call SYI(DC0[111],1.2,DT0[111])call SYI(1160786229,1,DT0[111])call FZ1(DC0[111],255,75,255)set DR0[i]="If you want to neutral creeps, start with Summon Wolves and a Ring of Basilius, which can be used to make Vladmir's Offering later."set DP0[i]="Spirit Wolves gain invisibility at level 4, making them difficult to kill and easy to harass heroes with in the lane."set DQ0[i]="Feral Heart make you and your wolves stronger overall, while Howl is an offensive spell used before engaging the enemy."set DU0[i]="Shapeshift makes you incredibly powerful and gives you max movement speed. Avoid being blocked by your wolves when chasing."set E00[i]="A Black King Bar will prevent enemies from disabling you, making you very fearsome and almost unstoppable when attacking heroes."set i=i+1set DC0[112]=1429221430set DT0[112]=1747989833set DD0[112]=1848656436set DS0[112]="ReplaceableTextures\\CommandButtons\\BTNSpiderBlack.blp"call SNI(DC0[112],"walk")call SYI(DC0[112],1.36,DT0[112])set DR0[i]="At least one level in Spin Web early game will increase your survivability greatly. Remember that attacking/using spells will cause you to break invisibility."set DP0[i]="Spawn Spiderlings is both a nuke and pushing spell, so getting items like a Ring of Basilius will provide you with both mana and armor for pushing."set DQ0[i]="Incapacitating Bite makes it very difficult for enemies to get away from you, great for chasing and slowing opponents temporarily for your allies."set DU0[i]="Try to space out your webs with least 2 seconds of walking distance so that you can benefit from its bonuses on as much ground as possible."set E00[i]="With the damage and lifesteal from Insatiable Hunger, sometimes it is best to get items that will prevent you from being disabled, such as a Black King Bar."set i=i+1set DH0=112set DZ0[1]=1315074670set DZ0[2]=1164207469set DZ0[3]=1311781174set DZ0[4]=1315070563set DZ0[5]=1315007329set DZ0[6]=1328558160set DZ0[7]=1433631084set DZ0[8]=1160785973set DZ0[9]=1311781199set DZ0[10]=1212365106set DZ0[11]=1215723364set DZ0[12]=1212363833set DZ0[13]=1215657064set DZ0[14]=1332179560set DZ0[15]=1429221430set DZ0[16]=1162032439set DZ0[17]=1164277353set DZ0[18]=1432510828set DZ0[19]=1160785972set DZ0[20]=1162032951set DZ0[21]=1215722344set DZ0[22]=1315334514set DZ0[23]=1160785970set DZ0[24]=1162032181set DZ0[25]=1165451634set DZ0[26]=1429221424set DZ0[27]=1211117654set DZ0[28]=1160786242set DZ0[29]=1311781206set DZ0[30]=1211117641set DZ0[31]=1160786265set DZ0[32]=1211119409set DZ0[33]=1160786510set DZ0[34]=1311788336set DZ0[35]=1311788363set DV0=35set DW0[1]=1315988077set DW0[2]=1215063922set DW0[3]=1214345830set DW0[4]=1211117616set DW0[5]=1211117617set DW0[6]=1214344551set DW0[7]=1211117624set DW0[8]=1432580716set DW0[9]=1333027688set DW0[10]=1313026096set DW0[11]=1432646245set DW0[12]=1430466865set DW0[13]=1332109682set DW0[14]=1429221446set DW0[15]=1429221451set DW0[16]=1328558154set DW0[17]=1432642913set DW0[18]=1332766568set DW0[19]=1429221441set DW0[20]=1429221443set DW0[21]=1430468913set DW0[22]=1430467634set DW0[23]=1429221432set DW0[24]=1211117636set DW0[25]=1311781193set DW0[26]=1211117649set DW0[27]=1311780946set DW0[28]=1211117652set DW0[29]=1211119187set DW0[30]=1211117650set DW0[31]=1328558389set DW0[32]=1160786505set DW0[33]=1160786502set DW0[34]=1328558406set DW0[35]=1160786738set DW0[36]=1160786507set DW0[37]=1311788373set DX0=37set DY0[1]=1332898670set DY0[2]=1164799855set DY0[3]=1164799603set DY0[4]=1211117620set DY0[5]=1214931305set DY0[6]=1433105516set DY0[7]=1215128178set DY0[8]=1211117643set DY0[9]=1316252014set DY0[10]=1215130471set DY0[11]=1214409837set DY0[12]=1311781185set DY0[13]=1211117633set DY0[14]=1433168227set DY0[15]=1164666213set DY0[16]=1430468406set DY0[17]=1430466872set DY0[18]=1430466609set DY0[19]=1430468144set DY0[20]=1211117640set DY0[21]=1332963428set DY0[22]=1429221445set DY0[23]=1160786241set DY0[24]=1429221456set DY0[25]=1160786000set DY0[26]=1160786243set DY0[27]=1311781207set DY0[28]=1211117646set DY0[29]=1311786311set DY0[30]=1211117651set DY0[31]=1311780930set DY0[32]=1211117653set DY0[33]=1328558390set DY0[34]=DC0[97]set DY0[35]=1160786504set DY0[36]=1160786506set DY0[37]=1160786520set DY0[38]=1211122767set DY0[39]=1311788343set DY0[40]=1311788356set DJ0=40set DK0[1]=1332898670set DK0[2]=1164799855set DK0[3]=1164799603set DK0[4]=1211117620set DK0[5]=1214931305set DK0[6]=1433105516set DK0[7]=1215128178set DK0[8]=1211117643set DK0[9]=1316252014set DK0[10]=1315074670set DK0[11]=1214409837set DK0[12]=1311781185set DK0[13]=1211117633set DK0[14]=1433168227set DK0[15]=1164666213set DK0[16]=1430468406set DK0[17]=1430466872set DK0[18]=1430466609set DK0[19]=1430468144set DK0[20]=1211117640set DK0[21]=1332963428set DK0[22]=1429221445set DK0[23]=1160786241set DK0[24]=1429221456set DK0[25]=1160786000set DK0[26]=1160786243set DK0[27]=1311781207set DK0[28]=1311786311set DK0[29]=1211117651set DK0[30]=1311780930set DK0[31]=1211117653set DK0[32]=1311781174set DK0[33]=1328558160set DK0[34]=1433631084set DK0[35]=1160785973set DK0[36]=1311781199set DK0[37]=1160786265set DK0[38]=1215723364set DK0[39]=1162032439set DK0[40]=1432510828set DK0[41]=1160785972set DK0[42]=1162032951set DK0[43]=1315334514set DK0[44]=1160785970set DK0[45]=1211117654set DK0[46]=1311781206set DK0[47]=1211117649set DK0[48]=1328558390set DK0[49]=DC0[97]set DK0[50]=1328558406set DK0[51]=1160786504set DK0[52]=1160786510set DK0[53]=1160786506set DK0[54]=1160786502set DK0[55]=1160786520set DK0[56]=1211122767set DK0[57]=1311788363set DK0[58]=1311788343set DK0[59]=1311788356set DL0=59set DM0[1]=1215130471set DM0[2]=1211117646set DM0[3]=1164207469set DM0[4]=1315070563set DM0[5]=1315007329set DM0[6]=1212363833set DM0[7]=1215657064set DM0[8]=1332179560set DM0[9]=1429221430set DM0[10]=1164277353set DM0[11]=1215722344set DM0[12]=1162032181set DM0[13]=1165451634set DM0[14]=1429221424set DM0[15]=1160786242set DM0[16]=1211117641set DM0[17]=1212365106set DM0[18]=1315988077set DM0[19]=1215063922set DM0[20]=1214345830set DM0[21]=1211117616set DM0[22]=1211117617set DM0[23]=1214344551set DM0[24]=1211117624set DM0[25]=1432580716set DM0[26]=1333027688set DM0[27]=1313026096set DM0[28]=1432646245set DM0[29]=1430466865set DM0[30]=1332109682set DM0[31]=1429221446set DM0[32]=1429221451set DM0[33]=1328558154set DM0[34]=1432642913set DM0[35]=1332766568set DM0[36]=1429221441set DM0[37]=1429221443set DM0[38]=1430468913set DM0[39]=1430467634set DM0[40]=1429221432set DM0[41]=1211117636set DM0[42]=1311781193set DM0[43]=1311780946set DM0[44]=1211117652set DM0[45]=1211119187set DM0[46]=1211117650set DM0[47]=1328558389set DM0[48]=1211119409set DM0[49]=1160786505set DM0[50]=1311788336set DM0[51]=1160786738set DM0[52]=1160786507set DM0[53]=1311788373set DN0=53call TWI()endfunctionfunction InitTrig_Hero takes nothing returns nothingcall ZE1()endfunctionfunction ZF1 takes nothing returns nothingcall SNI(1702061422,"stand 4")call SNI(1697656918,"stand 4")call SNI(1701081721,"spell")call SNI(1697656919,"spell")call SNI(1969711215,"stand victory")call SNI(1966092337,"stand victory")call SNI(1970169187,"stand channel")call SNI(1966092338,"stand channel")call SYI(1848651853,0.4,1848651853)call SYI(1697657426,0.5,1697657426)call SYI(1697657428,1.2,1697657428)call SYI(1697657427,0.5,1697657427)call SYI(1697657648,0.5,1697657648)call SYI(1848659027,1,1848659027)endfunctionfunction InitTrig_Unit takes nothing returns nothingcall ZF1()endfunctionfunction ZG1 takes nothing returns nothinglocal trigger t=CreateTrigger()local player T4I=Player(15)local real ZH1=GetUnitX(VX)local real ZZ1=GetUnitY(VX)local real ZV1=GetUnitX(MZ)local real ZW1=GetUnitY(MZ)local real ZX1=GetUnitX(HX)local real ZY1=GetUnitY(HX)local real ZJ1=GetUnitX(YY)local real ZK1=GetUnitY(YY)local real ZL1=GetUnitX(LZ)local real ZM1=GetUnitY(LZ)local real ZN1=GetUnitX(NZ)local real ZS1=GetUnitY(NZ)local real ZT1=GetUnitX(IZ)local real ZR1=GetUnitY(IZ)local real ZP1=GetUnitX(KY)local real ZQ1=GetUnitY(KY)local real ZU1=GetUnitX(EZ)local real V01=GetUnitY(EZ)local real VI1=GetUnitX(ZX)local real V11=GetUnitY(ZX)local real VO1=GetUnitX(HY)local real V21=GetUnitY(HY)local real V31=GetUnitX(JY)local real V41=GetUnitY(JY)call RemoveUnit(VX)call RemoveUnit(NZ)call RemoveUnit(MZ)call RemoveUnit(LZ)call RemoveUnit(HX)call RemoveUnit(IZ)call RemoveUnit(EZ)call RemoveUnit(ZX)call RemoveUnit(HY)call RemoveUnit(YY)call RemoveUnit(KY)call RemoveUnit(JY)set EI0=CreateUnit(T4I,1848651832,ZL1,ZM1,270)set E10=CreateUnit(T4I,1848657738,ZN1,ZS1,270)set EO0=CreateUnit(T4I,1848652100,ZT1,ZR1,270)set E20=CreateUnit(T4I,1848659016,ZP1,ZQ1,270)set E30=CreateUnit(T4I,1848652110,ZH1,ZZ1,270)set E40=CreateUnit(T4I,1848651831,ZV1,ZW1,270)set E50=CreateUnit(T4I,1848651829,ZX1,ZY1,270)set E60=CreateUnit(T4I,1848659017,ZJ1,ZK1,270)set E70=CreateUnit(T4I,1848652098,ZU1,V01,270)set E80=CreateUnit(T4I,1848652112,VI1,V11,270)set E90=CreateUnit(T4I,1848657739,VO1,V21,270)set EA0=CreateUnit(T4I,1848659018,V31,V41,270)call SetUnitColor(EI0,ConvertPlayerColor(1))call SetUnitColor(E10,ConvertPlayerColor(1))call SetUnitColor(EO0,ConvertPlayerColor(9))call SetUnitColor(E20,ConvertPlayerColor(9))call SetUnitColor(E30,ConvertPlayerColor(6))call SetUnitColor(E40,ConvertPlayerColor(6))call SetUnitColor(E50,ConvertPlayerColor(10))call SetUnitColor(E60,ConvertPlayerColor(10))call SetUnitColor(E70,ConvertPlayerColor(0))call SetUnitColor(E80,ConvertPlayerColor(0))call SetUnitColor(E90,ConvertPlayerColor(11))call SetUnitColor(EA0,ConvertPlayerColor(11))set t=nullendfunctionfunction InitTrig_Tavern takes nothing returns nothingcall ZG1()endfunctionfunction V51 takes integer id returns booleanreturn id==1211117642 or id==1311788365endfunctionfunction V61 takes integer id returns booleanlocal integer i=0loopexitwhen i>EE0if ED0[i]==id thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction V71 takes nothing returns nothingset EE0=EE0+1set ED0[EE0]=1093753431set EE0=EE0+1set ED0[EE0]=1093681718set EE0=EE0+1set ED0[EE0]=1093684023set EE0=EE0+1set ED0[EE0]=1093686327set EE0=EE0+1set ED0[EE0]=1093686328set EE0=EE0+1set ED0[EE0]=1093742918set EE0=EE0+1set ED0[EE0]=1093742920set EE0=EE0+1set ED0[EE0]=1093742919set EE0=EE0+1set ED0[EE0]=1093742916set EE0=EE0+1set ED0[EE0]=1093686067set EE0=EE0+1set ED0[EE0]=1093742917set EE0=EE0+1set ED0[EE0]=1093743959set EE0=EE0+1set ED0[EE0]=1093814353set EE0=EE0+1set ED0[EE0]=1093808945set EE0=EE0+1set ED0[EE0]=1093814351set EE0=EE0+1set ED0[EE0]=1093677647set EE0=EE0+1set ED0[EE0]=1093679193set EE0=EE0+1set ED0[EE0]=1093679194set EE0=EE0+1set ED0[EE0]=1093679408set EE0=EE0+1set ED0[EE0]=1093679410set EE0=EE0+1set ED0[EE0]=1095331943set EE0=EE0+1set ED0[EE0]=1095332962set EE0=EE0+1set ED0[EE0]=1093683254set EE0=EE0+1set ED0[EE0]=1093751108set EE0=EE0+1set ED0[EE0]=1093751863set EE0=EE0+1set ED0[EE0]=1093744973set EE0=EE0+1set ED0[EE0]=1093747011set EE0=EE0+1set ED0[EE0]=1094936696set EE0=EE0+1set ED0[EE0]=1093810265set EE0=EE0+1set ED0[EE0]=1095328363set EE0=EE0+1set ED0[EE0]=1093748055set EE0=EE0+1set ED0[EE0]=1093677367set EE0=EE0+1set ED0[EE0]=1093683801set EE0=EE0+1set ED0[EE0]=1093682767set EE0=EE0+1set ED0[EE0]=1093683255set EE0=EE0+1set ED0[EE0]=1093681720set EE0=EE0+1set ED0[EE0]=1093752645set EE0=EE0+1set ED0[EE0]=1095333995set EE0=EE0+1set ED0[EE0]=1093753417set EE0=EE0+1set ED0[EE0]=1093681995set EE0=EE0+1set ED0[EE0]=1093683788set EE0=EE0+1set ED0[EE0]=1093748303set EE0=EE0+1set ED0[EE0]=1095328865set EE0=EE0+1set ED0[EE0]=1093683266set EE0=EE0+1set ED0[EE0]=1093682227set EE0=EE0+1set ED0[EE0]=1093682246set EE0=EE0+1set ED0[EE0]=1093682756set EE0=EE0+1set ED0[EE0]=1093743191set EE0=EE0+1set ED0[EE0]=1093743681set EE0=EE0+1set ED0[EE0]=1093748292set EE0=EE0+1set ED0[EE0]=1093749071set EE0=EE0+1set ED0[EE0]=1093677655set EE0=EE0+1set ED0[EE0]=1093809721set EE0=EE0+1set ED0[EE0]=1093815111set EE0=EE0+1set ED0[EE0]=1093748304set EE0=EE0+1set ED0[EE0]=1093686329set EE0=EE0+1set ED0[EE0]=1093751096set EE0=EE0+1set ED0[EE0]=1093750095set EE0=EE0+1set ED0[EE0]=1093810244set EE0=EE0+1set ED0[EE0]=1097163124set EE0=EE0+1set ED0[EE0]=1093684016set EE0=EE0+1set ED0[EE0]=1095331948set EE0=EE0+1set ED0[EE0]=1093683796set EE0=EE0+1set ED0[EE0]=1095331954set EE0=EE0+1set ED0[EE0]=1093677656set EE0=EE0+1set ED0[EE0]=1093751349set EE0=EE0+1set ED0[EE0]=1095332727set EE0=EE0+1set ED0[EE0]=1093808182set EE0=EE0+1set ED0[EE0]=1093753416set EE0=EE0+1set ED0[EE0]=1093813569set EE0=EE0+1set ED0[EE0]=1093815092set EE0=EE0+1set ED0[EE0]=1093815095set EE0=EE0+1set ED0[EE0]=1093815089set EE0=EE0+1set ED0[EE0]=1093817925endfunctionfunction V81 takes integer id returns booleanreturn id==1093808454 or id==1093808455 or id==1093808456 or id==1093751609 or id==1093809217 or id==1093809218 or id==1093751609 or id==1093678667 or id==1093752391 or id==1093810257 or id==1093752646 or id==1093686328 or id==1093686327 or id==1093808206 or id==1093753394 or id==1093753395 or id==1093808181 or id==1093743681 or id==1093809721 or id==1093815111 or id==1093815881 or id==1093810008 or id==1093810265 or id==1093809221 or id==1093753416 or id==1093752655 or id==1093748305 or id==1093686341 or id==1093814863 or id==1093813848 or id==1093684560 or id==1093815109 or id==1093815112 or id==1093815097 or id==1093814860 or id==1093815857 or id==1093815618 or id==1093816114 or id==1093816121 or id==1093817416 or id==1093817419 or id==1093815369 or id==1093747504 or id==1093818443endfunctionfunction V91 takes nothing returns nothingset EC0=EC0+1set EB0[EC0]=1093683254set EC0=EC0+1set EB0[EC0]=1093677362set EC0=EC0+1set EB0[EC0]=1093678667set EC0=EC0+1set EB0[EC0]=1093683513set EC0=EC0+1set EB0[EC0]=1093683265set EC0=EC0+1set EB0[EC0]=1093684021set EC0=EC0+1set EB0[EC0]=1093685337set EC0=EC0+1set EB0[EC0]=1093748303set EC0=EC0+1set EB0[EC0]=1093818442set EC0=EC0+1set EB0[EC0]=1093686081set EC0=EC0+1set EB0[EC0]=1093686327set EC0=EC0+1set EB0[EC0]=1093686328set EC0=EC0+1set EB0[EC0]=1093743681set EC0=EC0+1set EB0[EC0]=1093681733set EC0=EC0+1set EB0[EC0]=1093808472set EC0=EC0+1set EB0[EC0]=1093808471set EC0=EC0+1set EB0[EC0]=1093808470set EC0=EC0+1set EB0[EC0]=1097754673set EC0=EC0+1set EB0[EC0]=1093750618set EC0=EC0+1set EB0[EC0]=1093743428set EC0=EC0+1set EB0[EC0]=1093677622set EC0=EC0+1set EB0[EC0]=1093751096endfunctionfunction VA1 takes nothing returns nothingset T2[1]=1095331188set T2[2]=1095328865set T2[3]=1095660653set T2[4]=1093817908set T2[5]=1095333995set T2[6]=1093681995set T2[7]=1093677367set T2[8]=1093681720set T2[9]=1093683266set T2[10]=1093682227set T2[10]=1093682246set T2[11]=1093677655set T2[12]=1095331954set T2[13]=1095331948set T2[14]=1093682767set T2[15]=1093683255set T2[16]=1093683254set T2[17]=1093677656set T2[18]=1095332727set T2[19]=1093682008set T2[20]=1093681718set T2[21]=1097163124set T2[22]=1093679180set T2[23]=1095328633set T2[24]=1093678426set T2[25]=1095328363set T2[26]=1093682265set T2[27]=1093684314set T2[28]=1093685065set T2[29]=1093684056set T2[30]=1093684055set T2[31]=1093677622set T2[32]=1093681972set T2[33]=1093677362set T2[34]=1093678667set T2[35]=1093677652set T2[36]=1095263841set T2[37]=1093679446set T2[38]=1093678425set T2[39]=1093683513set T2[40]=1093683265set T2[41]=1093684021set T2[42]=1093685337set T2[43]=1093685582set T2[44]=1093818442set T2[45]=1093685840set T2[46]=1093743191set T2[47]=1093686081set T2[48]=1093686327set T2[49]=1093686328set T2[50]=1093743681set T2[51]=1093681733set T2[52]=1093808472set T2[53]=1093808471set T2[54]=1093808470set T2[55]=1093684560set T2[56]=1093743428set T2[57]=1093683801set T2[58]=1093743959set T2[59]=1093748303set T2[60]=1093748292set T2[61]=1093750618set T2[62]=1093750095set T2[63]=1093749071set T2[64]=1093751096set T2[65]=1093751361set T2[66]=1093751126set T2[67]=1093752645set T2[68]=1093752642set T2[69]=1093815111set T2[70]=1093815859set T2[71]=1093817677set T2[72]=1093817925set R2=72endfunctionfunction VB1 takes nothing returns booleancall VA1()call V91()call V71()return falseendfunctionfunction VD1 takes nothing returns nothingcall CreateQuestBJ(0,"TRIGSTR_50004","TRIGSTR_50005","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")call CreateQuestBJ(0,"TRIGSTR_50006","TRIGSTR_50007","ReplaceableTextures\\CommandButtons\\BTNTome.blp")call CreateQuestBJ(0,"TRIGSTR_50008","TRIGSTR_50009","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")call CreateQuestBJ(2,"TRIGSTR_50010","TRIGSTR_50011","ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste.blp")call CreateQuestBJ(2,"TRIGSTR_50012","TRIGSTR_50013","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")call CreateQuestBJ(2,"TRIGSTR_50014","TRIGSTR_50015","ReplaceableTextures\\CommandButtons\\BTNCarrionScarabs.blp")endfunctionfunction VF1 takes nothing returns booleanlocal string sif IsUnitIllusion(GetTriggerUnit())==false and V51(GetUnitTypeId(GetTriggerUnit()))==false thenset s=GetUnitName(GetTriggerUnit())+" "+GetObjectName(1848657986)+" "+GetObjectName(GetLearnedSkill())+" ("+GetObjectName(1848657987)+" "+I2S(GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill()))+")"call DisplayTimedTextToPlayer(D60,0,0,3,s)call DisplayTimedTextToPlayer(D70,0,0,3,s)endifreturn falseendfunctionfunction VG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function VF1))set t=nullendfunctionfunction VH1 takes nothing returns nothingcall QRI(bj_FORCE_ALL_PLAYERS,25.00,(D80[GetPlayerId((GetTriggerPlayer()))])+"|c00ff0303 "+GetObjectName(1848652356)+"|r")endfunctionfunction VZ1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player VV1=(LoadPlayerHandle(LY,(S5I),(78)))local integer TGI=1local integer VW1local integer ROI=GetPlayerState(VV1,PLAYER_STATE_RESOURCE_GOLD)if RX0[GetPlayerId(VV1)]==false and JL==true thenif GetTriggerEvalCount(t)==4 thenif IsPlayerAlly(GetLocalPlayer(),VV1)==true thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,GetObjectName(1848658483))call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,GetObjectName(1848658503))endifendifreturn falseendifif ROI>20 thencall SetPlayerState(VV1,PLAYER_STATE_RESOURCE_GOLD,0)set EL0[GetPlayerId(VV1)]=0if TII(VV1)thenset VW1=T8I(OO)elseset VW1=T8I(AO)endifif TII(VV1)thenloopexitwhen TGI>5if T3I(BO[TGI])thencall SetPlayerState(BO[TGI],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[TGI],PLAYER_STATE_RESOURCE_GOLD)+ROI/VW1)endifset TGI=TGI+1endloopelseloopexitwhen TGI>5if T3I(CO[TGI])thencall SetPlayerState(CO[TGI],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[TGI],PLAYER_STATE_RESOURCE_GOLD)+ROI/VW1)endifset TGI=TGI+1endloopendifendifreturn falseendfunctionfunction VX1 takes player VV1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SavePlayerHandle(LY,(S5I),(78),(VV1))call TriggerRegisterTimerEvent(t,2,true)call TriggerAddCondition(t,Condition(function VZ1))set t=nullendfunctionfunction VY1 takes player p returns nothinglocal multiboarditem N8I=MultiboardGetItem(M0,S50[GetPlayerId(p)],S40[GetPlayerId(p)])call MultiboardSetItemValue(N8I,"|c00333333"+(D80[GetPlayerId((p))])+"|r")call MultiboardReleaseItem(N8I)endfunctionfunction VJ1 takes nothing returns nothinglocal integer ZB1=T8I(OO)local integer ZA1=T8I(AO)local integer TGIlocal integer THIlocal string GW1local string DD0local unit SFI=K1[GetPlayerId(GetTriggerPlayer())]if SFI==null thenset DD0=GetObjectName(1848657239)elseset DD0=GetUnitName(SFI)endifif(Z0<10)thenset GW1=I2S(H0)+":0"+I2S(Z0)elseset GW1=I2S(H0)+":"+I2S(Z0)endifif Q2==false thenset K3[GetPlayerId(GetTriggerPlayer())]="|c00555555"+GW1+"|r"call QRI(bj_FORCE_ALL_PLAYERS,25.00,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+" ("+DD0+")|r|c00ff0303 "+GetObjectName(1848652356)+"|r")if(TII(GetTriggerPlayer())==true)thenset TGI=1set THI=5loopexitwhen TGI>THIif(BO[TGI]!=GetTriggerPlayer())thenif(T3I(BO[TGI])==true)thencall SetPlayerAllianceStateBJ(GetTriggerPlayer(),BO[TGI],4)endifendifset TGI=TGI+1endloopelseset TGI=1set THI=5loopexitwhen TGI>THIif(CO[TGI]!=GetTriggerPlayer())thenif(T3I(CO[TGI])==true)thencall SetPlayerAllianceStateBJ(GetTriggerPlayer(),CO[TGI],4)endifendifset TGI=TGI+1endloopendifif TII(GetTriggerPlayer())or TOI(GetTriggerPlayer())thenset EG0=EG0+1endifcall FL1("C"+"K"+I2S(A[GetPlayerId(GetTriggerPlayer())])+"D"+I2S(B[GetPlayerId(GetTriggerPlayer())])+"N"+I2S((LoadInteger(LY,(400+GetPlayerId(GetTriggerPlayer())),(79)))),GetPlayerId(GetTriggerPlayer()))set RO0=GetTriggerPlayer()call ExecuteFunc("VK1")if JL thencall B91(GetTriggerPlayer())endifset EF0[GetPlayerId(GetTriggerPlayer())]=truecall VY1(GetTriggerPlayer())call VX1(GetTriggerPlayer())if EG0==2 and C2==false and VL==true thencall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"|c006699CC"+GetObjectName(1848657495)+"|r")endifif EG0==3 thenset RI0=truecall ExecuteFunc("VL1")set RI0=falseendifelseset K3[GetPlayerId(GetTriggerPlayer())]="|c00555555End|r"call ExecuteFunc("VM1")endifendfunctionfunction VS1 takes unit SFI returns nothingif GetUnitTypeId(SFI)!=1211117642 and GetUnitTypeId(SFI)!=1211117641 thenif GetOwningPlayer(SFI)==GetLocalPlayer()thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1,"|c006699CC"+GetObjectName(1848657746))call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")endifcall OQ1(KE,GetOwningPlayer(SFI))endifcall SetUnitInvulnerable(SFI,false)call UnitRemoveAbility(SFI,1093681498)call UnitRemoveAbility(SFI,1093679434)call UnitRemoveAbility(SFI,1093684052)call UnitRemoveAbility(SFI,1093684823)call UnitRemoveAbility(SFI,1093684821)call UnitRemoveAbility(SFI,1093685079)call UnitRemoveAbility(SFI,1093685078)call UnitRemoveAbility(SFI,1093685080)call UnitRemoveAbility(SFI,1093685081)call UnitRemoveAbility(SFI,1093685296)call UnitRemoveAbility(SFI,1093744459)call UnitRemoveAbility(SFI,1093685334)call UnitRemoveAbility(SFI,1093685583)call UnitRemoveAbility(SFI,1093685827)call UnitRemoveAbility(SFI,1093685830)call UnitRemoveAbility(SFI,FN)call UnitRemoveAbility(SFI,GN)call UnitRemoveAbility(SFI,HN)call UnitRemoveAbility(SFI,ZN)call UnitRemoveAbility(SFI,1093684821)call UnitRemoveAbility(SFI,1093684823)call UnitRemoveAbility(SFI,N90)call UnitRemoveAbility(SFI,1093683509)call UnitRemoveAbility(SFI,1093681977)call UnitRemoveAbility(SFI,1093683528)call UnitRemoveAbility(SFI,1110455863)call UnitRemoveAbility(SFI,1110456396)call UnitRemoveAbility(SFI,1093686098)call UnitRemoveAbility(SFI,1093687119)call UnitRemoveAbility(SFI,1093687122)call UnitRemoveAbility(SFI,1093747534)call UnitRemoveAbility(SFI,1093686856)call UnitRemoveAbility(SFI,1093686858)call UnitRemoveAbility(SFI,1093742649)call UnitRemoveAbility(SFI,1093686871)call UnitRemoveAbility(SFI,1093687373)call UnitRemoveAbility(SFI,1093742927)call UnitRemoveAbility(SFI,1093742930)call UnitRemoveAbility(SFI,1093743671)call UnitRemoveAbility(SFI,1093743672)call UnitRemoveAbility(SFI,1093742933)call UnitRemoveAbility(SFI,1093743673)call UnitRemoveAbility(SFI,1093743153)call UnitRemoveAbility(SFI,1093743158)call UnitRemoveAbility(SFI,1093744441)call UnitRemoveAbility(SFI,1097167980)call UnitRemoveAbility(SFI,WN[0])call UnitRemoveAbility(SFI,WN[1])call UnitRemoveAbility(SFI,WN[2])call UnitRemoveAbility(SFI,WN[3])call UnitRemoveAbility(SFI,WN[4])call UnitRemoveAbility(SFI,WN[5])call UnitRemoveAbility(SFI,1093748533)call UnitRemoveAbility(SFI,1093748531)call UnitRemoveAbility(SFI,1093748534)call UnitRemoveAbility(SFI,1093748532)call SaveBoolean(LY,(GetHandleId(SFI)),(80),(false))call SetUnitPathing(SFI,true)call PauseUnit(SFI,false)call SetUnitFlyHeight(SFI,GetUnitDefaultFlyHeight(SFI),0)call SetUnitScale(SFI,SMI(SFI)*OAI,SMI(SFI)*OAI,SMI(SFI)*OAI)call UnitRemoveAbility(SFI,1093747521)call UnitRemoveAbility(SFI,1093747513)call UnitRemoveAbility(SFI,1093747522)call UnitRemoveAbility(SFI,1093747523)call UnitRemoveAbility(SFI,1093748545)call UnitRemoveAbility(SFI,1093752627)call UnitRemoveAbility(SFI,1110459471)call UnitRemoveAbility(SFI,1093752136)call UnitRemoveAbility(SFI,1093752137)call UnitRemoveAbility(SFI,1093753396)call UnitRemoveAbility(SFI,1093753409)call UnitRemoveAbility(SFI,1093753410)call UnitRemoveAbility(SFI,1093753401)call UnitRemoveAbility(SFI,1110459478)call UnitRemoveAbility(SFI,1093809718)call UnitRemoveAbility(SFI,1093809717)call UnitRemoveAbility(SFI,1093809228)call UnitRemoveAbility(SFI,1110459716)call UnitRemoveAbility(SFI,1093808975)call UnitRemoveAbility(SFI,1110459705)call GA1(SFI,0)if GetUnitTypeId(SFI)==1160786510 or GetUnitTypeId(SFI)==1160786511 thencall UnitRemoveAbility(SFI,1093808951)call UnitAddAbility(SFI,1093808706)call UnitRemoveAbility(SFI,1093808706)if ES1(SFI,FR0[KN0])!=null thencall UnitAddAbility(SFI,1093808951)endifendifif GetUnitTypeId(SFI)==1311788373 or GetUnitTypeId(SFI)==1311788375 thencall UnitAddAbility(SFI,1093816658)call UnitRemoveAbility(SFI,1093816658)endifif GetUnitTypeId(SFI)==1211123020 or GetUnitTypeId(SFI)==1211123023 thencall UnitAddAbility(SFI,1093817176)call UnitRemoveAbility(SFI,1093817176)endifif GetUnitTypeId(SFI)==1211123026 thencall UnitAddAbility(SFI,1093817942)call UnitRemoveAbility(SFI,1093817942)endifcall UnitRemoveAbility(SFI,1093818188)call UnitRemoveAbility(SFI,1093808966)call UnitRemoveAbility(SFI,1093818187)call UnitRemoveAbility(SFI,1093818186)call UnitRemoveAbility(SFI,1093817137)call BS1(SFI)set GK=SFIcall ExecuteFunc("VT1")endfunctionfunction VP1 takes nothing returns booleanif GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),EZ0,ALLIANCE_SHARED_CONTROL)==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false thenset EH0=EH0+1endifreturn falseendfunctionfunction VQ1 takes unit u,player p,real x,real y,boolean VU1 returns nothinglocal group g=NTI()set EH0=0set EZ0=pcall GroupEnumUnitsSelected(g,p,Condition(function VP1))if EH0==0 and GetLocalPlayer()==p thenif VU1==false thencall ClearSelection()call SelectUnit(u,true)endifcall PanCameraToTimed(x,y,0)endifset EH0=0call NSI(g)set g=nullendfunctionfunction W01 takes unit AD1 returns booleanreturn GetUnitTypeId(AD1)==1211117641 or GetUnitTypeId(AD1)==1211117642endfunctionfunction WI1 takes unit W11 returns nothinglocal integer WO1if ES1(W11,FR0[WM0])!=null and GetUnitTypeId(W11)!=1211117642 thenset WO1=R2I(GetItemCharges(ES1(W11,FR0[WM0]))*0.67)if GetItemCharges(ES1(W11,FR0[WM0]))==1 thenset WO1=0endifcall SetItemCharges(ES1(W11,FR0[WM0]),WO1)call AddHeroXP(W11,GetHeroXP(M70[GetPlayerId(GetOwningPlayer(W11))]),true)call RemoveUnit(M70[GetPlayerId(GetOwningPlayer(W11))])endifendfunctionfunction W21 takes unit W31 returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(W31))local unit W41=(LoadUnitHandle(LY,(S5I),(699)))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))local unit W91set W91=W41if W91!=null thencall RemoveUnit(W91)endifset W91=W51if W91!=null thencall RemoveUnit(W91)endifset W91=W61if W91!=null thencall RemoveUnit(W91)endifset W91=W71if W91!=null thencall RemoveUnit(W91)endifset W91=W81if W91!=null thencall RemoveUnit(W91)endifendfunctionfunction WA1 takes nothing returns booleancall S0I(GetTriggeringTrigger())set NR0=falsereturn falseendfunctionfunction WB1 takes unit WC1 returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(WC1))local unit W41=(LoadUnitHandle(LY,(S5I),(699)))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))local unit W91local real x=GetUnitX(W41)local real y=GetUnitY(W41)local trigger tif NR0==false thenif TII(GetOwningPlayer(W41))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifelseset t=CreateTrigger()call TriggerRegisterTimerEvent(t,2,false)call TriggerAddCondition(t,Condition(function WA1))endifset W91=W41if W91!=null and WC1!=W91 thencall ReviveHero(W91,x,y,false)call SetUnitX(W91,x)call SetUnitY(W91,y)call VS1(W91)call SetUnitPathing(W91,true)call SetUnitState(W91,UNIT_STATE_MANA,10000)endifset W91=W51if W91!=null and WC1!=W91 thencall ReviveHero(W91,x,y,false)call SetUnitX(W91,x)call SetUnitY(W91,y)call VS1(W91)call SetUnitPathing(W91,true)call SetUnitState(W91,UNIT_STATE_MANA,10000)endifset W91=W61if W91!=null and WC1!=W91 thencall ReviveHero(W91,x,y,false)call SetUnitX(W91,x)call SetUnitY(W91,y)call VS1(W91)call SetUnitPathing(W91,true)call SetUnitState(W91,UNIT_STATE_MANA,10000)endifset W91=W71if W91!=null and WC1!=W91 thencall ReviveHero(W91,x,y,false)call SetUnitX(W91,x)call SetUnitY(W91,y)call VS1(W91)call SetUnitPathing(W91,true)call SetUnitState(W91,UNIT_STATE_MANA,10000)endifset W91=W81if W91!=null and WC1!=W91 thencall ReviveHero(W91,x,y,false)call SetUnitX(W91,x)call SetUnitY(W91,y)call VS1(W91)call SetUnitPathing(W91,true)call SetUnitState(W91,UNIT_STATE_MANA,10000)endifendfunctionfunction WD1 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local real xlocal real ylocal integer WO1set XS[GetPlayerId((T4I))]=falseset HJ[GetPlayerId(GetOwningPlayer((PKI)))]=falseif TII(GetOwningPlayer(PKI))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifif LW0 thenset YS[GetPlayerId(T4I)]=R2I(TimerGetRemaining(F0[GetPlayerId(T4I)])*0.25)set JS[GetPlayerId(T4I)]=(TimerGetElapsed(M))+TimerGetRemaining(F0[GetPlayerId(T4I)])elseset YS[GetPlayerId(T4I)]=0endifcall TimerStart(F0[GetPlayerId(T4I)],0.0,false,null)if W01(PKI)thencall WB1(PKI)elsecall VQ1(PKI,T4I,x,y,false)endifcall SetUnitX(PKI,x)call SetUnitY(PKI,y)call VS1(PKI)call SetUnitPathing(PKI,true)if ES1(PKI,FR0[WM0])!=null and GetUnitTypeId(PKI)!=1211117642 thenset WO1=(R2I(((GetItemCharges(ES1(PKI,FR0[WM0]))*0.67)*1.0)))if GetItemCharges(ES1(PKI,FR0[WM0]))==1 thenset WO1=0endifcall SetItemCharges(ES1(PKI,FR0[WM0]),WO1)call AddHeroXP(PKI,GetHeroXP(M70[GetPlayerId(GetOwningPlayer(PKI))]),true)call RemoveUnit(M70[GetPlayerId(GetOwningPlayer(PKI))])endifendfunctionfunction WF1 takes unit SFI returns nothinglocal integer WG1=GetUnitPointValue(SFI)local unit WH1if(WG1==34)thencall ExecuteFunc("WZ1")call ExecuteFunc("WV1")call ExecuteFunc("WW1")elseif(WG1==37)thencall ExecuteFunc("WX1")call ExecuteFunc("WY1")call ExecuteFunc("WJ1")call ExecuteFunc("WK1")elseif(WG1==38)thencall ExecuteFunc("WL1")call ExecuteFunc("WM1")call ExecuteFunc("WN1")call ExecuteFunc("WS1")elseif(WG1==32)thencall ExecuteFunc("WT1")call ExecuteFunc("WR1")call ExecuteFunc("WP1")call ExecuteFunc("WQ1")elseif(WG1==52)thencall ExecuteFunc("WU1")call ExecuteFunc("X01")call ExecuteFunc("XI1")call ExecuteFunc("X11")elseif(WG1==31)thencall ExecuteFunc("XO1")call ExecuteFunc("X21")call ExecuteFunc("X31")elseif(WG1==24)thencall ExecuteFunc("X41")call ExecuteFunc("X51")call ExecuteFunc("X61")call ExecuteFunc("X71")elseif(WG1==5)thencall ExecuteFunc("X81")call ExecuteFunc("X91")call ExecuteFunc("XA1")call ExecuteFunc("XB1")elseif(WG1==8)thencall ExecuteFunc("XC1")call ExecuteFunc("XD1")call ExecuteFunc("XE1")call ExecuteFunc("XF1")call ExecuteFunc("XG1")elseif(WG1==3)thencall ExecuteFunc("XH1")call ExecuteFunc("XZ1")call ExecuteFunc("XV1")call ExecuteFunc("XW1")elseif(WG1==95)thencall ExecuteFunc("XX1")call ExecuteFunc("XY1")call ExecuteFunc("XJ1")call ExecuteFunc("XK1")elseif(WG1==20)thencall ExecuteFunc("XL1")call ExecuteFunc("XM1")call ExecuteFunc("XN1")call ExecuteFunc("XS1")elseif(WG1==12)thencall ExecuteFunc("XT1")call ExecuteFunc("XR1")call ExecuteFunc("XP1")elseif(WG1==16)thencall ExecuteFunc("XQ1")call ExecuteFunc("XU1")call ExecuteFunc("Y01")call ExecuteFunc("YI1")call ExecuteFunc("Y11")call ExecuteFunc("YO1")call ExecuteFunc("Y21")elseif(WG1==25)thencall ExecuteFunc("Y31")call ExecuteFunc("Y41")elseif(WG1==4)thencall ExecuteFunc("Y51")call ExecuteFunc("Y61")call ExecuteFunc("Y71")call ExecuteFunc("Y81")call ExecuteFunc("Y91")call SetUnitPathing(SFI,false)call DisableTrigger(LY0)set TQ0=trueset WH1=CreateUnit(GetOwningPlayer(SFI),GetUnitTypeId(SFI),GetUnitX(SFI),GetUnitY(SFI),GetUnitFacing(SFI))call SaveBoolean(LY,(GetHandleId(WH1)),(85),(true))set K1[GetPlayerId(GetOwningPlayer(SFI))]=WH1call SetUnitPathing(WH1,false)call SetUnitPosition(WH1,GetUnitX(SFI),GetUnitY(SFI))if X0 thencall SetHeroXP(WH1,GetHeroXP(SFI),false)call UnitAddItem(WH1,UnitItemInSlot(SFI,0))call UnitAddItem(WH1,UnitItemInSlot(SFI,1))call UnitAddItem(WH1,UnitItemInSlot(SFI,2))call UnitAddItem(WH1,UnitItemInSlot(SFI,3))call UnitAddItem(WH1,UnitItemInSlot(SFI,4))call UnitAddItem(WH1,UnitItemInSlot(SFI,5))endifcall Q5I(SFI)call EnableTrigger(LY0)call SetUnitPathing(WH1,true)call ClearSelectionForPlayer(GetOwningPlayer(WH1))call SelectUnitAddForPlayer(WH1,GetOwningPlayer(WH1))elseif(WG1==7)thencall ExecuteFunc("YA1")call ExecuteFunc("YB1")call ExecuteFunc("YC1")elseif(WG1==18)thencall ExecuteFunc("YD1")call ExecuteFunc("YE1")elseif(WG1==36)thencall ExecuteFunc("YF1")elseif(WG1==21)thencall ExecuteFunc("YG1")call ExecuteFunc("YH1")call ExecuteFunc("YZ1")call ExecuteFunc("YV1")elseif(WG1==14)thencall ExecuteFunc("YW1")call ExecuteFunc("YX1")call ExecuteFunc("YY1")call ExecuteFunc("YJ1")call ExecuteFunc("YK1")call ExecuteFunc("YL1")elseif(WG1==13)thencall ExecuteFunc("YM1")call ExecuteFunc("YN1")call ExecuteFunc("GS")call ExecuteFunc("YS1")elseif(WG1==26)thencall ExecuteFunc("YT1")call ExecuteFunc("YR1")call ExecuteFunc("YP1")call ExecuteFunc("YQ1")elseif(WG1==9)thencall ExecuteFunc("YU1")call ExecuteFunc("J01")call ExecuteFunc("JI1")call ExecuteFunc("J11")elseif(WG1==10)thencall ExecuteFunc("JO1")call ExecuteFunc("J21")call ExecuteFunc("J31")call ExecuteFunc("J41")call ExecuteFunc("J51")call ExecuteFunc("J61")call ExecuteFunc("J71")call ExecuteFunc("J81")elseif(WG1==23)thencall ExecuteFunc("J91")call ExecuteFunc("JA1")call ExecuteFunc("JB1")call ExecuteFunc("JC1")call ExecuteFunc("JD1")elseif(WG1==19)thencall ExecuteFunc("JE1")call ExecuteFunc("JF1")call ExecuteFunc("JG1")call ExecuteFunc("JH1")elseif(WG1==22)thencall ExecuteFunc("JZ1")call ExecuteFunc("JV1")call ExecuteFunc("JW1")call ExecuteFunc("JX1")elseif(WG1==17)thencall ExecuteFunc("JY1")call ExecuteFunc("JJ1")call ExecuteFunc("JK1")elseif(WG1==1)thencall ExecuteFunc("JL1")call ExecuteFunc("JM1")call ExecuteFunc("JN1")call ExecuteFunc("JS1")elseif(WG1==2)thencall ExecuteFunc("JT1")call ExecuteFunc("JR1")call ExecuteFunc("JP1")call ExecuteFunc("JQ1")elseif(WG1==27)thencall ExecuteFunc("JU1")call ExecuteFunc("K01")call ExecuteFunc("KI1")call ExecuteFunc("K11")call ExecuteFunc("KO1")elseif(WG1==82)thencall ExecuteFunc("K21")call ExecuteFunc("K31")call ExecuteFunc("K41")call ExecuteFunc("K51")elseif(WG1==75)thencall ExecuteFunc("K61")call ExecuteFunc("K71")call ExecuteFunc("K81")elseif(WG1==83)thencall ExecuteFunc("K91")call ExecuteFunc("KA1")call ExecuteFunc("KB1")call ExecuteFunc("KC1")elseif(WG1==112)thencall ExecuteFunc("KD1")call ExecuteFunc("KE1")call ExecuteFunc("KF1")elseif(WG1==108)thencall ExecuteFunc("KG1")call ExecuteFunc("KH1")call ExecuteFunc("KZ1")elseif(WG1==69)thencall ExecuteFunc("KV1")call ExecuteFunc("KW1")call ExecuteFunc("KX1")call ExecuteFunc("KY1")call ExecuteFunc("KJ1")elseif(WG1==100)thencall ExecuteFunc("KK1")call ExecuteFunc("KL1")call ExecuteFunc("KM1")call ExecuteFunc("KN1")elseif(WG1==102)thencall ExecuteFunc("KS1")call ExecuteFunc("KT1")call ExecuteFunc("KR1")elseif(WG1==64)thencall ExecuteFunc("KP1")call ExecuteFunc("KQ1")call ExecuteFunc("KU1")call ExecuteFunc("L01")elseif(WG1==106)thencall ExecuteFunc("LI1")call ExecuteFunc("L11")call ExecuteFunc("LO1")elseif(WG1==61)thencall ExecuteFunc("L21")call ExecuteFunc("L31")call ExecuteFunc("L41")elseif(WG1==76)thencall ExecuteFunc("L51")call ExecuteFunc("L61")call ExecuteFunc("L71")call ExecuteFunc("L81")elseif(WG1==80)thencall ExecuteFunc("L91")call ExecuteFunc("LA1")call ExecuteFunc("LB1")call ExecuteFunc("LC1")call ExecuteFunc("NL")elseif(WG1==62)thencall ExecuteFunc("LD1")call ExecuteFunc("LE1")call ExecuteFunc("LF1")call ExecuteFunc("LG1")elseif(WG1==60)thencall ExecuteFunc("LH1")call ExecuteFunc("LZ1")call ExecuteFunc("LV1")elseif(WG1==77)thencall ExecuteFunc("LW1")call ExecuteFunc("LX1")call ExecuteFunc("LY1")call ExecuteFunc("LJ1")elseif(WG1==73)thencall ExecuteFunc("NW")call ExecuteFunc("LK1")call ExecuteFunc("LL1")elseif(WG1==81)thencall ExecuteFunc("LM1")call ExecuteFunc("LN1")call ExecuteFunc("LS1")elseif(WG1==66)thencall ExecuteFunc("LT1")call ExecuteFunc("LR1")elseif(WG1==78)thencall ExecuteFunc("LP1")call ExecuteFunc("LQ1")call ExecuteFunc("LU1")call ExecuteFunc("M01")elseif(WG1==99)thencall ExecuteFunc("MI1")call ExecuteFunc("M11")call ExecuteFunc("MO1")call ExecuteFunc("M21")call ExecuteFunc("M31")call ExecuteFunc("M41")elseif(WG1==74)thencall ExecuteFunc("M51")call ExecuteFunc("M61")call ExecuteFunc("M71")call ExecuteFunc("M81")elseif(WG1==105)thencall ExecuteFunc("M91")call ExecuteFunc("MA1")call ExecuteFunc("MB1")elseif(WG1==70)thencall ExecuteFunc("MC1")call ExecuteFunc("MD1")call ExecuteFunc("ME1")elseif(WG1==107)thencall ExecuteFunc("MF1")call ExecuteFunc("MG1")call ExecuteFunc("MH1")call ExecuteFunc("MZ1")elseif(WG1==79)thencall ExecuteFunc("MV1")call ExecuteFunc("MW1")call ExecuteFunc("MX1")call ExecuteFunc("MY1")elseif(WG1==68)thencall ExecuteFunc("MJ1")call ExecuteFunc("MK1")elseif(WG1==84)thencall ExecuteFunc("ML1")call ExecuteFunc("MM1")call ExecuteFunc("MN1")call ExecuteFunc("MS1")elseif(WG1==85)thencall ExecuteFunc("MT1")call ExecuteFunc("MR1")call ExecuteFunc("MP1")call ExecuteFunc("MQ1")call ExecuteFunc("MU1")elseif(WG1==86)thencall ExecuteFunc("N01")call ExecuteFunc("NI1")call ExecuteFunc("N11")call ExecuteFunc("NO1")elseif(WG1==87)thencall ExecuteFunc("N21")call ExecuteFunc("N31")call ExecuteFunc("N41")call ExecuteFunc("N51")elseif(WG1==33)thencall ExecuteFunc("N61")call ExecuteFunc("N71")call ExecuteFunc("N81")elseif(WG1==39)thencall ExecuteFunc("N91")call ExecuteFunc("NA1")call ExecuteFunc("NB1")elseif(WG1==88)thencall ExecuteFunc("NC1")call ExecuteFunc("ND1")call ExecuteFunc("NE1")call ExecuteFunc("NF1")elseif(WG1==40)thencall ExecuteFunc("NG1")call ExecuteFunc("NH1")call ExecuteFunc("NZ1")call ExecuteFunc("NV1")elseif WG1==89 thencall ExecuteFunc("NW1")call ExecuteFunc("NX1")elseif WG1==90 thencall ExecuteFunc("NY1")call ExecuteFunc("NJ1")call ExecuteFunc("NK1")call ExecuteFunc("NL1")elseif WG1==71 thencall ExecuteFunc("NM1")call ExecuteFunc("NN1")call ExecuteFunc("NS1")call ExecuteFunc("NT1")elseif WG1==93 thencall ExecuteFunc("NR1")call ExecuteFunc("NP1")call ExecuteFunc("NQ1")call ExecuteFunc("NU1")elseif WG1==42 thencall ExecuteFunc("S01")call ExecuteFunc("SI1")call ExecuteFunc("S11")call ExecuteFunc("SO1")elseif WG1==91 thencall ExecuteFunc("S21")call ExecuteFunc("S31")call ExecuteFunc("S41")call ExecuteFunc("S51")call ExecuteFunc("S61")call ExecuteFunc("S71")call ExecuteFunc("S81")call ExecuteFunc("S91")elseif WG1==92 thencall ExecuteFunc("SA1")call ExecuteFunc("SB1")call ExecuteFunc("SC1")call ExecuteFunc("SD1")elseif WG1==41 thencall ExecuteFunc("SE1")call ExecuteFunc("SF1")call ExecuteFunc("SG1")call ExecuteFunc("SH1")call ExecuteFunc("SZ1")elseif WG1==43 thencall ExecuteFunc("SV1")call ExecuteFunc("SW1")call ExecuteFunc("SX1")call ExecuteFunc("SY1")elseif WG1==44 thencall ExecuteFunc("SJ1")call ExecuteFunc("SK1")call ExecuteFunc("SL1")call ExecuteFunc("SM1")elseif WG1==72 thencall ExecuteFunc("SN1")call ExecuteFunc("SS1")call ExecuteFunc("ST1")call ExecuteFunc("SR1")elseif WG1==94 thencall ExecuteFunc("SP1")elseif WG1==6 thencall ExecuteFunc("SQ1")call ExecuteFunc("SU1")call ExecuteFunc("T01")elseif WG1==104 thencall ExecuteFunc("TI1")call ExecuteFunc("T11")elseif WG1==65 thencall ExecuteFunc("TO1")call ExecuteFunc("T21")call ExecuteFunc("T31")call ExecuteFunc("T41")elseif WG1==111 thencall ExecuteFunc("T51")call ExecuteFunc("T61")call ExecuteFunc("T71")elseif WG1==63 thencall ExecuteFunc("T81")call ExecuteFunc("T91")call ExecuteFunc("TA1")call ExecuteFunc("TB1")elseif WG1==45 thencall ExecuteFunc("TC1")call ExecuteFunc("TD1")call ExecuteFunc("TE1")call ExecuteFunc("TF1")elseif WG1==46 thencall ExecuteFunc("TG1")call ExecuteFunc("TH1")call ExecuteFunc("TZ1")call ExecuteFunc("TV1")elseif WG1==47 thencall ExecuteFunc("TW1")call ExecuteFunc("TX1")call ExecuteFunc("TY1")call ExecuteFunc("TJ1")elseif WG1==11 thencall ExecuteFunc("TK1")call ExecuteFunc("TL1")elseif WG1==96 thencall ExecuteFunc("TM1")call ExecuteFunc("TN1")call ExecuteFunc("TS1")call ExecuteFunc("TT1")elseif WG1==15 thencall ExecuteFunc("TR1")call ExecuteFunc("TP1")call ExecuteFunc("TQ1")call ExecuteFunc("TU1")elseif WG1==97 thencall ExecuteFunc("R01")call ExecuteFunc("RI1")call ExecuteFunc("R11")call ExecuteFunc("RO1")call ExecuteFunc("R21")elseif WG1==98 thencall ExecuteFunc("R31")call ExecuteFunc("R41")call ExecuteFunc("R51")call ExecuteFunc("R61")call ExecuteFunc("R71")elseif WG1==67 thencall ExecuteFunc("R81")call ExecuteFunc("R91")elseif WG1==28 thencall ExecuteFunc("RA1")call ExecuteFunc("RB1")elseif WG1==51 thencall ExecuteFunc("RC1")call ExecuteFunc("RD1")call ExecuteFunc("RE1")call ExecuteFunc("RF1")call ExecuteFunc("RG1")call ExecuteFunc("RH1")call ExecuteFunc("RZ1")call ExecuteFunc("RV1")elseif WG1==100 thenelseif WG1==101 thencall ExecuteFunc("RW1")call ExecuteFunc("RX1")call ExecuteFunc("RY1")call ExecuteFunc("RJ1")elseif WG1==48 thencall ExecuteFunc("RK1")call ExecuteFunc("RL1")call ExecuteFunc("RM1")call ExecuteFunc("RN1")elseif WG1==49 thencall ExecuteFunc("RS1")call ExecuteFunc("RT1")call ExecuteFunc("RR1")call ExecuteFunc("RP1")elseif WG1==29 thencall ExecuteFunc("RQ1")call ExecuteFunc("RU1")call ExecuteFunc("P01")call ExecuteFunc("PI1")elseif WG1==50 thencall ExecuteFunc("P11")call ExecuteFunc("PO1")call ExecuteFunc("P21")call ExecuteFunc("P31")elseif WG1==30 thencall ExecuteFunc("P41")call ExecuteFunc("P51")elseif WG1==53 thencall ExecuteFunc("P61")call ExecuteFunc("P71")call ExecuteFunc("P81")call ExecuteFunc("P91")elseif WG1==103 thencall ExecuteFunc("PA1")elseif WG1==54 thencall ExecuteFunc("PB1")call ExecuteFunc("PC1")call ExecuteFunc("PD1")call ExecuteFunc("PE1")call ExecuteFunc("PF1")elseif WG1==55 thencall ExecuteFunc("PG1")call ExecuteFunc("PH1")call ExecuteFunc("PZ1")call ExecuteFunc("PV1")elseif WG1==56 thencall ExecuteFunc("PW1")call ExecuteFunc("PX1")call ExecuteFunc("PY1")call ExecuteFunc("PJ1")elseif WG1==57 thencall ExecuteFunc("PK1")call ExecuteFunc("PL1")call ExecuteFunc("PM1")call ExecuteFunc("PN1")call ExecuteFunc("PS1")elseif WG1==109 thencall ExecuteFunc("PT1")call ExecuteFunc("PR1")call ExecuteFunc("PP1")call ExecuteFunc("PQ1")call ExecuteFunc("PU1")call ExecuteFunc("Q01")elseif WG1==110 thencall ExecuteFunc("QI1")call ExecuteFunc("Q11")call ExecuteFunc("QO1")call ExecuteFunc("Q21")call ExecuteFunc("Q31")elseif WG1==35 thencall ExecuteFunc("Q41")call ExecuteFunc("Q51")call ExecuteFunc("Q61")elseif WG1==58 thencall ExecuteFunc("Q71")call ExecuteFunc("Q81")call ExecuteFunc("Q91")call ExecuteFunc("QA1")call ExecuteFunc("QB1")call ExecuteFunc("QC1")set GK=SFIcall ExecuteFunc("QD1")elseif WG1==59 thencall ExecuteFunc("QE1")call ExecuteFunc("QF1")call ExecuteFunc("QG1")call ExecuteFunc("QH1")endifendfunctionfunction QZ1 takes player MDI,string NII returns nothingif IsPlayerInForce(GetLocalPlayer(),MCI(MDI))thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,U2,40,C0[GetPlayerId(MDI)]+(D80[GetPlayerId((MDI))])+"|r "+NII)endifendfunctionfunction Main_AllHasHero takes nothing returns booleanreturn K1[GetPlayerId(BO[1])]!=null and K1[GetPlayerId(BO[2])]!=null and K1[GetPlayerId(BO[3])]!=null and K1[GetPlayerId(BO[4])]!=null and K1[GetPlayerId(BO[5])]!=null and K1[GetPlayerId(CO[1])]!=null and K1[GetPlayerId(CO[2])]!=null and K1[GetPlayerId(CO[3])]!=null and K1[GetPlayerId(CO[4])]!=null and K1[GetPlayerId(CO[5])]!=nullendfunctionfunction QV1 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()set EN=truecall S0I(t)call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_MASKED,PC0,PD0,700,false,false))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,PC0,PD0,700,false,false))set t=nullreturn falseendfunctionfunction QW1 takes unit u returns booleanreturn GetUnitTypeId(u)!=1211117645 and GetUnitTypeId(u)!=1311788365 and GetUnitTypeId(u)!=1211119431 and GetUnitTypeId(u)!=1211117657 and GetUnitTypeId(u)!=1211117642 and GetUnitTypeId(u)!=1211122232 and GetUnitTypeId(u)!=1211123027endfunctionfunction QX1 takes nothing returns booleanreturn IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetTriggerUnit())==false and HaveSavedBoolean(LY,GetHandleId(GetTriggerUnit()),85)==false and QW1(GetTriggerUnit())endfunctionfunction QY1 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1848651843endfunctionfunction QJ1 takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction QK1 takes player T4I returns nothinglocal group Z51=NTI()local boolexpr QL1=Condition(function QY1)call GroupEnumUnitsOfPlayer(Z51,T4I,QL1)call ForGroup(Z51,function QJ1)call NSI(Z51)endfunctionfunction QM1 takes nothing returns nothingcall QK1(BO[1])call QK1(BO[2])call QK1(BO[3])call QK1(BO[4])call QK1(BO[5])call QK1(CO[1])call QK1(CO[2])call QK1(CO[3])call QK1(CO[4])call QK1(CO[5])endfunctionfunction QN1 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1852010352endfunctionfunction QS1 takes nothing returns nothingif IAI thencall UnitRemoveAbility(D30[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743686)call UnitRemoveAbility(D30[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743685)call UnitRemoveAbility(D30[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743688)endifif GetUnitAbilityLevel(GetEnumUnit(),1093683508)==0 thencall UnitAddAbility(GetEnumUnit(),1093683508)endifendfunctionfunction QT1 takes player p returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,p,Condition(function QN1))call ForGroup(g,function QS1)call NSI(g)set g=nullendfunctionfunction DelayedHeroTech_Helper takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SSI=(LoadInteger(LY,(S5I),(86)))call TCI(SSI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction QR1 takes unit SFI,player p returns stringlocal string s=GetObjectName(1848656962)set s=FS1(s,"$hero",GetUnitName(SFI))set s=FS1(s,"$p",(D80[GetPlayerId((p))]))return sendfunctionfunction QP1 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local real xlocal real ylocal region r=CreateRegion()local player QQ1=T4Ilocal item BA1local unit SFI=PKIlocal trigger tif X0==false thencall GK1(GetOwningPlayer(PKI))endifif GetObjectName(1848657992)=="Language: English"and(DR0[(GetUnitPointValue(PKI))]!="")thencall DisplayTimedTextToPlayer(T4I,0,0,4,"A |c006699CC-tips|r command is available if you would like some pointers for this hero")endifif PB0[GetPlayerId(T4I)]==true thencall GD1(T4I,GetUnitPointValue(PKI))endifif EN==false and(K1[GetPlayerId(BO[1])]!=null and K1[GetPlayerId(BO[2])]!=null and K1[GetPlayerId(BO[3])]!=null and K1[GetPlayerId(BO[4])]!=null and K1[GetPlayerId(BO[5])]!=null and K1[GetPlayerId(CO[1])]!=null and K1[GetPlayerId(CO[2])]!=null and K1[GetPlayerId(CO[3])]!=null and K1[GetPlayerId(CO[4])]!=null and K1[GetPlayerId(CO[5])]!=null)thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,7,false)call TriggerAddCondition(t,Condition(function QV1))set t=nullendifset HJ[GetPlayerId(GetOwningPlayer((PKI)))]=falsecall RegionAddRect(r,RA)if B3 and G3==false thenset E3[GetPlayerId(T4I)]=trueset T4I=(LoadPlayerHandle(LY,(2000),(550+GetPlayerId(T4I))))call SetUnitOwner(PKI,T4I,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(PKI),1093817427,false)if TII(GetOwningPlayer(PKI))thenif IsUnitInRegion(r,PKI)thenset x=GetRandomReal(GetRectMinX(O4),GetRectMaxX(O4))set y=GetRandomReal(GetRectMinY(O4),GetRectMaxY(O4))elseset x=GetUnitX(PKI)set y=GetUnitY(PKI)endifelseif IsUnitInRegion(r,PKI)thenset x=GetRandomReal(GetRectMinX(S3),GetRectMaxX(S3))set y=GetRandomReal(GetRectMinY(S3),GetRectMaxY(S3))elseset x=GetUnitX(PKI)set y=GetUnitY(PKI)endifendifset C3[GetPlayerId(T4I)]=trueif(not B3 or G3)thenif QT0==false and BN==false thencall PanCameraToTimedForPlayer(T4I,x,y,0)endifif GetUnitTypeId(PKI)!=1311788365 thencall ClearSelectionForPlayer(T4I)endifcall SelectUnitAddForPlayer(PKI,T4I)endifcall SetUnitX(PKI,x)call SetUnitY(PKI,y)if GetUnitTypeId(PKI)!=1311788365 thenset K1[GetPlayerId(T4I)]=PKIendifcall FJ1(T4I,"9",GetUnitTypeId(PKI))if B3 and G3==false thencall TFI(QQ1)elsecall TFI(T4I)endifcall SaveBoolean(LY,(GetHandleId(PKI)),(85),(true))if not F2 thenset R[GetUnitPointValue(PKI)]=truecall TCI(GetUnitTypeId(PKI))endifif X0 thenif TII(T4I)thenset T1[0]=T1[0]+1elseset T1[1]=T1[1]+1endifset IO[GetPlayerId(T4I)]=IO[GetPlayerId(T4I)]+1if IO[GetPlayerId(GetOwningPlayer(PKI))]>1 and PKI!=U1[GetPlayerId(GetOwningPlayer(PKI))]thencall WI1(U1[GetPlayerId(GetOwningPlayer(PKI))])call DisableTrigger(LY0)call SetHeroXP(PKI,GetHeroXP(U1[GetPlayerId(GetOwningPlayer(PKI))]),false)call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],0))call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],1))call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],2))call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],3))call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],4))call UnitAddItem(PKI,UnitItemInSlot(U1[GetPlayerId(GetOwningPlayer(PKI))],5))call EnableTrigger(LY0)if W01(U1[GetPlayerId(GetOwningPlayer(PKI))])thencall W21(U1[GetPlayerId(GetOwningPlayer(PKI))])elsecall Q5I(U1[GetPlayerId(GetOwningPlayer(PKI))])endifendifendifif T4I!=BO[0]and T4I!=CO[0]thenif B3 thenif TimerGetElapsed(M)>60 thencall QZ1(T4I,GetObjectName(1848652357)+" "+GetUnitName(PKI))elseif S0[GetPlayerId(QQ1)]==true thencall QZ1(T4I,QR1(PKI,QQ1))elsecall SetPlayerState(QQ1,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(QQ1,PLAYER_STATE_RESOURCE_GOLD)+250)call QZ1(T4I,GetObjectName(1848656945)+" "+GetUnitName(PKI)+" "+GetObjectName(1848656944)+" "+(D80[GetPlayerId((QQ1))]))endifelseif Y2==false or T4I==WO thenif(D0[GetPlayerId(GetOwningPlayer(PKI))]==true and Y2==false)thencall QZ1(T4I,GetObjectName(1848656949)+" "+GetUnitName(PKI)+".")elseif((S0[GetPlayerId(T4I)]==true and X0==false)or Y0 or J0 or N2)thencall QZ1(T4I,GetObjectName(1848656947)+" "+GetUnitName(PKI)+".")elsecall QZ1(T4I,GetObjectName(1848656946)+" "+GetUnitName(PKI)+".")endifendifendifif TK thenif B3 thencall QK1(QQ1)elsecall QK1(T4I)endifendifif(QT0 or BN)and TK thencall QK1(T4I)endifcall QT1(T4I)if(GetUnitTypeId(PKI)==1160785973)thencall DisplayTimedTextToPlayer(T4I,0,U2,60.00," ")call DisplayTimedTextToPlayer(T4I,0,U2,60.00,"|c00ff0303"+GetObjectName(1848653384)+GetObjectName(1848656706)+" "+GetObjectName(1848653381)+"|r")elseif GetUnitTypeId(PKI)==1328558154 or GetUnitTypeId(PKI)==1311781174 or GetUnitTypeId(PKI)==1430468913 or GetUnitTypeId(PKI)==1162032181 thencall DisplayTimedTextToPlayer(T4I,0,U2,10.00," ")call DisplayTimedTextToPlayer(T4I,0,U2,10.00,"|c00ff0303"+GetObjectName(1848657715)+"|r")endifif(GetUnitTypeId(PKI)==1160786242)thencall DisplayTimedTextToPlayer(T4I,0,U2,30.00," ")call DisplayTimedTextToPlayer(T4I,0,U2,30.00,"|c00ff0303"+GetObjectName(1848653392)+" "+GetObjectName(1848653397)+"|r")endifif(S0[GetPlayerId(T4I)]==false)thenif(J2)thencall SetPlayerState(T4I,PLAYER_STATE_RESOURCE_GOLD,175+GetPlayerState(T4I,PLAYER_STATE_RESOURCE_GOLD))endifendifif HaveSavedBoolean(LY,600+GetUnitPointValue(PKI),87)==false thencall SaveBoolean(LY,(600+GetUnitPointValue(PKI)),(87),(true))call WF1(PKI)endifset GK=PKIcall ExecuteFunc("QU1")if RP0[GetPlayerId(GetLocalPlayer())]==false thencall SetPlayerName(T4I,(D80[GetPlayerId((T4I))])+" ("+S8I(K1[GetPlayerId(T4I)])+")")endifcall RemoveRegion(r)endfunctionfunction U11 takes nothing returns booleanreturn IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==trueendfunctionfunction UO1 takes nothing returns nothinglocal unit SFI=GetSoldUnit()local player T4I=GetOwningPlayer(SFI)call TFI(T4I)endfunctionfunction U31 takes nothing returns booleanlocal integer ROI=1if R0 thenset ROI=2endifcall SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)+ROI)return falseendfunctionfunction U51 takes nothing returns nothinglocal integer QHI=R2I(TimerGetElapsed(M)-N)local integer BX1=QHI/60-1/2local integer BY1=ModuloInteger(QHI,60)if CL thencall BW1(BX1,BY1,false)elseif AL==false thenset QHI=R2I(16-TimerGetElapsed(M))set BX1=QHI/60-1/2set BY1=ModuloInteger(QHI,60)call BW1(BX1,BY1,true)endifendfunctionfunction U71 takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and(LoadInteger(EY0,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))))>0 thencall TimerStart(EJ0[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],(LoadInteger(EY0,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())))),false,null)endifif GetSpellAbilityId()==1093677655 thencall TimerStart(EJ0[GetPlayerId((GetOwningPlayer(GetTriggerUnit())))],0,false,null)endifreturn falseendfunctionfunction U81 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer icall UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U71))set i=0loopexitwhen(i>13)set EJ0[i]=CreateTimer()set i=i+1endloopset EY0=InitHashtable()call SaveInteger(EY0,(1093742923),(1),(60))call SaveInteger(EY0,(1093742923),(2),(50))call SaveInteger(EY0,(1093742923),(3),(40))call SaveInteger(EY0,(1093685042),(1),(80))call SaveInteger(EY0,(1093685042),(2),(75))call SaveInteger(EY0,(1093685042),(3),(70))call SaveInteger(EY0,(1093810233),(1),(45))call SaveInteger(EY0,(1093810233),(2),(45))call SaveInteger(EY0,(1093810233),(3),(45))call SaveInteger(EY0,(1093682248),(1),(150))call SaveInteger(EY0,(1093682248),(2),(130))call SaveInteger(EY0,(1093682248),(3),(110))call SaveInteger(EY0,(1093750594),(1),(150))call SaveInteger(EY0,(1093750594),(2),(130))call SaveInteger(EY0,(1093750594),(3),(110))call SaveInteger(EY0,(1093682514),(1),(150))call SaveInteger(EY0,(1093682514),(2),(150))call SaveInteger(EY0,(1093682514),(3),(150))call SaveInteger(EY0,(1093817144),(1),(150))call SaveInteger(EY0,(1093817144),(2),(150))call SaveInteger(EY0,(1093817144),(3),(150))call SaveInteger(EY0,(1093684561),(1),(140))call SaveInteger(EY0,(1093684561),(2),(120))call SaveInteger(EY0,(1093684561),(3),(100))call SaveInteger(EY0,(1093747254),(1),(140))call SaveInteger(EY0,(1093747254),(2),(120))call SaveInteger(EY0,(1093747254),(3),(100))call SaveInteger(EY0,(1093752648),(1),(80))call SaveInteger(EY0,(1093752648),(2),(80))call SaveInteger(EY0,(1093752648),(3),(80))call SaveInteger(EY0,(1093746993),(1),(100))call SaveInteger(EY0,(1093746993),(2),(100))call SaveInteger(EY0,(1093746993),(3),(100))call SaveInteger(EY0,(1093678938),(1),(70))call SaveInteger(EY0,(1093678938),(2),(70))call SaveInteger(EY0,(1093678938),(3),(70))call SaveInteger(EY0,(1095656306),(1),(45))call SaveInteger(EY0,(1095656306),(2),(45))call SaveInteger(EY0,(1095656306),(3),(45))call SaveInteger(EY0,(1093687864),(1),(70))call SaveInteger(EY0,(1093687864),(2),(55))call SaveInteger(EY0,(1093687864),(3),(40))call SaveInteger(EY0,(1093747542),(1),(12))call SaveInteger(EY0,(1093747542),(2),(12))call SaveInteger(EY0,(1093747542),(3),(12))call SaveInteger(EY0,(1093677895),(1),(115))call SaveInteger(EY0,(1093677895),(2),(115))call SaveInteger(EY0,(1093677895),(3),(115))call SaveInteger(EY0,(1093810508),(1),(120))call SaveInteger(EY0,(1093810508),(2),(110))call SaveInteger(EY0,(1093810508),(3),(100))call SaveInteger(EY0,(1093685586),(1),(45))call SaveInteger(EY0,(1093685586),(2),(30))call SaveInteger(EY0,(1093685586),(3),(15))call SaveInteger(EY0,(1093747251),(1),(4))call SaveInteger(EY0,(1093747251),(2),(4))call SaveInteger(EY0,(1093747251),(3),(4))call SaveInteger(EY0,(1093678674),(1),(140))call SaveInteger(EY0,(1093678674),(2),(120))call SaveInteger(EY0,(1093678674),(3),(100))call SaveInteger(EY0,(1093747252),(1),(120))call SaveInteger(EY0,(1093747252),(2),(100))call SaveInteger(EY0,(1093747252),(3),(80))call SaveInteger(EY0,(1093682996),(1),(80))call SaveInteger(EY0,(1093682996),(2),(70))call SaveInteger(EY0,(1093682996),(3),(60))call SaveInteger(EY0,(1093747768),(1),(20))call SaveInteger(EY0,(1093747768),(2),(20))call SaveInteger(EY0,(1093747768),(3),(20))call SaveInteger(EY0,(1093810505),(1),(150))call SaveInteger(EY0,(1093810505),(2),(150))call SaveInteger(EY0,(1093810505),(3),(150))call SaveInteger(EY0,(1093682482),(1),(75))call SaveInteger(EY0,(1093682482),(2),(65))call SaveInteger(EY0,(1093682482),(3),(55))call SaveInteger(EY0,(1093750098),(1),(6))call SaveInteger(EY0,(1093750098),(2),(6))call SaveInteger(EY0,(1093750098),(3),(6))call SaveInteger(EY0,(1093677903),(1),(140))call SaveInteger(EY0,(1093677903),(2),(140))call SaveInteger(EY0,(1093677903),(3),(140))call SaveInteger(EY0,(1093685847),(1),(20))call SaveInteger(EY0,(1093685847),(2),(20))call SaveInteger(EY0,(1093685847),(3),(20))call SaveInteger(EY0,(1093684565),(1),(100))call SaveInteger(EY0,(1093684565),(2),(100))call SaveInteger(EY0,(1093684565),(3),(100))call SaveInteger(EY0,(1093681458),(1),(100))call SaveInteger(EY0,(1093681458),(2),(100))call SaveInteger(EY0,(1093681458),(3),(100))call SaveInteger(EY0,(1093686103),(1),(100))call SaveInteger(EY0,(1093686103),(2),(100))call SaveInteger(EY0,(1093686103),(3),(100))call SaveInteger(EY0,(1093679411),(1),(120))call SaveInteger(EY0,(1093679411),(2),(90))call SaveInteger(EY0,(1093679411),(3),(60))call SaveInteger(EY0,(1093677899),(1),(180))call SaveInteger(EY0,(1093677899),(2),(150))call SaveInteger(EY0,(1093677899),(3),(120))call SaveInteger(EY0,(1093747248),(1),(180))call SaveInteger(EY0,(1093747248),(2),(150))call SaveInteger(EY0,(1093747248),(3),(120))call SaveInteger(EY0,(1093685808),(1),(130))call SaveInteger(EY0,(1093685808),(2),(130))call SaveInteger(EY0,(1093685808),(3),(130))call SaveInteger(EY0,(1093682764),(1),(30))call SaveInteger(EY0,(1093682764),(2),(30))call SaveInteger(EY0,(1093682764),(3),(30))call SaveInteger(EY0,(1093747544),(1),(30))call SaveInteger(EY0,(1093747544),(2),(30))call SaveInteger(EY0,(1093747544),(3),(30))call SaveInteger(EY0,(1093677876),(1),(5))call SaveInteger(EY0,(1093677876),(2),(5))call SaveInteger(EY0,(1093677876),(3),(5))call SaveInteger(EY0,(1093743946),(1),(75))call SaveInteger(EY0,(1093743946),(2),(75))call SaveInteger(EY0,(1093743946),(3),(75))call SaveInteger(EY0,(1093818181),(1),(70))call SaveInteger(EY0,(1093818181),(2),(70))call SaveInteger(EY0,(1093818181),(3),(70))call SaveInteger(EY0,(1093678160),(1),(20))call SaveInteger(EY0,(1093678160),(2),(15))call SaveInteger(EY0,(1093678160),(3),(10))call SaveInteger(EY0,(1093684529),(1),(130))call SaveInteger(EY0,(1093684529),(2),(120))call SaveInteger(EY0,(1093684529),(3),(110))call SaveInteger(EY0,(1093747032),(1),(70))call SaveInteger(EY0,(1093747032),(2),(70))call SaveInteger(EY0,(1093747032),(3),(70))call SaveInteger(EY0,(1093678388),(1),(160))call SaveInteger(EY0,(1093678388),(2),(150))call SaveInteger(EY0,(1093678388),(3),(140))call SaveInteger(EY0,(1093677141),(1),(160))call SaveInteger(EY0,(1093677141),(2),(150))call SaveInteger(EY0,(1093677141),(3),(140))call SaveInteger(EY0,(1093683000),(1),(80))call SaveInteger(EY0,(1093683000),(2),(80))call SaveInteger(EY0,(1093683000),(3),(80))call SaveInteger(EY0,(1093678933),(1),(180))call SaveInteger(EY0,(1093678933),(2),(120))call SaveInteger(EY0,(1093678933),(3),(60))call SaveInteger(EY0,(1093684053),(1),(140))call SaveInteger(EY0,(1093684053),(2),(120))call SaveInteger(EY0,(1093684053),(3),(100))call SaveInteger(EY0,(1093748042),(1),(30))call SaveInteger(EY0,(1093748042),(2),(30))call SaveInteger(EY0,(1093748042),(3),(30))call SaveInteger(EY0,(1093681716),(1),(4))call SaveInteger(EY0,(1093681716),(2),(4))call SaveInteger(EY0,(1093681716),(3),(4))call SaveInteger(EY0,(1093749070),(1),(60))call SaveInteger(EY0,(1093749070),(2),(60))call SaveInteger(EY0,(1093749070),(3),(60))call SaveInteger(EY0,(1093683761),(1),(130))call SaveInteger(EY0,(1093683761),(2),(115))call SaveInteger(EY0,(1093683761),(3),(100))call SaveInteger(EY0,(1093747767),(1),(60))call SaveInteger(EY0,(1093747767),(2),(60))call SaveInteger(EY0,(1093747767),(3),(60))call SaveInteger(EY0,(1093750089),(1),(40))call SaveInteger(EY0,(1093750089),(2),(40))call SaveInteger(EY0,(1093750089),(3),(40))call SaveInteger(EY0,(1093816645),(1),(40))call SaveInteger(EY0,(1093816645),(2),(40))call SaveInteger(EY0,(1093816645),(3),(40))call SaveInteger(EY0,(1093747023),(1),(80))call SaveInteger(EY0,(1093747023),(2),(70))call SaveInteger(EY0,(1093747023),(3),(60))call SaveInteger(EY0,(1093752150),(1),(80))call SaveInteger(EY0,(1093752150),(2),(70))call SaveInteger(EY0,(1093752150),(3),(60))call SaveInteger(EY0,(1093750341),(1),(180))call SaveInteger(EY0,(1093750341),(2),(160))call SaveInteger(EY0,(1093750341),(3),(140))call SaveInteger(EY0,(1093814599),(1),(180))call SaveInteger(EY0,(1093814599),(2),(160))call SaveInteger(EY0,(1093814599),(3),(140))call SaveInteger(EY0,(1093747028),(1),(90))call SaveInteger(EY0,(1093747028),(2),(90))call SaveInteger(EY0,(1093747028),(3),(90))call SaveInteger(EY0,(1093685840),(1),(11))call SaveInteger(EY0,(1093685840),(2),(9))call SaveInteger(EY0,(1093685840),(3),(7))call SaveInteger(EY0,(1093684291),(1),(25))call SaveInteger(EY0,(1093684291),(2),(25))call SaveInteger(EY0,(1093684291),(3),(25))call SaveInteger(EY0,(1093683534),(1),(45))call SaveInteger(EY0,(1093683534),(2),(45))call SaveInteger(EY0,(1093683534),(3),(45))call SaveInteger(EY0,(1093747031),(1),(10))call SaveInteger(EY0,(1093747031),(2),(10))call SaveInteger(EY0,(1093747031),(3),(10))call SaveInteger(EY0,(1093684296),(1),(70))call SaveInteger(EY0,(1093684296),(2),(60))call SaveInteger(EY0,(1093684296),(3),(50))call SaveInteger(EY0,(1093678161),(1),(45))call SaveInteger(EY0,(1093678161),(2),(40))call SaveInteger(EY0,(1093678161),(3),(35))call SaveInteger(EY0,(1093687121),(1),(45))call SaveInteger(EY0,(1093687121),(2),(45))call SaveInteger(EY0,(1093687121),(3),(45))call SaveInteger(EY0,(1093679445),(1),(70))call SaveInteger(EY0,(1093679445),(2),(60))call SaveInteger(EY0,(1093679445),(3),(50))call SaveInteger(EY0,(1093682004),(1),(60))call SaveInteger(EY0,(1093682004),(2),(50))call SaveInteger(EY0,(1093682004),(3),(40))call SaveInteger(EY0,(1093810506),(1),(120))call SaveInteger(EY0,(1093810506),(2),(110))call SaveInteger(EY0,(1093810506),(3),(100))call SaveInteger(EY0,(1093678929),(1),(120))call SaveInteger(EY0,(1093678929),(2),(80))call SaveInteger(EY0,(1093678929),(3),(40))call SaveInteger(EY0,(1093683257),(1),(120))call SaveInteger(EY0,(1093683257),(2),(120))call SaveInteger(EY0,(1093683257),(3),(120))call SaveInteger(EY0,(1093677363),(1),(140))call SaveInteger(EY0,(1093677363),(2),(120))call SaveInteger(EY0,(1093677363),(3),(100))call SaveInteger(EY0,(1093681462),(1),(140))call SaveInteger(EY0,(1093681462),(2),(120))call SaveInteger(EY0,(1093681462),(3),(60))call SaveInteger(EY0,(1093679152),(1),(80))call SaveInteger(EY0,(1093679152),(2),(50))call SaveInteger(EY0,(1093679152),(3),(30))call SaveInteger(EY0,(1093677906),(1),(150))call SaveInteger(EY0,(1093677906),(2),(120))call SaveInteger(EY0,(1093677906),(3),(90))call SaveInteger(EY0,(1093681494),(1),(150))call SaveInteger(EY0,(1093681494),(2),(120))call SaveInteger(EY0,(1093681494),(3),(90))call SaveInteger(EY0,(1093686072),(1),(85))call SaveInteger(EY0,(1093686072),(2),(85))call SaveInteger(EY0,(1093686072),(3),(85))call SaveInteger(EY0,(1093751120),(1),(85))call SaveInteger(EY0,(1093751120),(2),(85))call SaveInteger(EY0,(1093751120),(3),(85))call SaveInteger(EY0,(1093684308),(1),(160))call SaveInteger(EY0,(1093684308),(2),(140))call SaveInteger(EY0,(1093684308),(3),(120))call SaveInteger(EY0,(1093747539),(1),(30))call SaveInteger(EY0,(1093747539),(2),(30))call SaveInteger(EY0,(1093747539),(3),(30))call SaveInteger(EY0,(1093742932),(1),(80))call SaveInteger(EY0,(1093742932),(2),(70))call SaveInteger(EY0,(1093742932),(3),(60))call SaveInteger(EY0,(1093752632),(1),(90))call SaveInteger(EY0,(1093752632),(2),(75))call SaveInteger(EY0,(1093752632),(3),(60))call SaveInteger(EY0,(1093752633),(1),(90))call SaveInteger(EY0,(1093752633),(2),(75))call SaveInteger(EY0,(1093752633),(3),(60))call SaveInteger(EY0,(1093810503),(1),(90))call SaveInteger(EY0,(1093810503),(2),(90))call SaveInteger(EY0,(1093810503),(3),(90))call SaveInteger(EY0,(1093810504),(1),(90))call SaveInteger(EY0,(1093810504),(2),(90))call SaveInteger(EY0,(1093810504),(3),(90))call SaveInteger(EY0,(1093684275),(1),(130))call SaveInteger(EY0,(1093684275),(2),(130))call SaveInteger(EY0,(1093684275),(3),(130))call SaveInteger(EY0,(1093816643),(1),(130))call SaveInteger(EY0,(1093816643),(2),(130))call SaveInteger(EY0,(1093816643),(3),(130))call SaveInteger(EY0,(1093677392),(1),(70))call SaveInteger(EY0,(1093677392),(2),(60))call SaveInteger(EY0,(1093677392),(3),(50))call SaveInteger(EY0,(1093679450),(1),(70))call SaveInteger(EY0,(1093679450),(2),(60))call SaveInteger(EY0,(1093679450),(3),(50))call SaveInteger(EY0,(1093743184),(1),(60))call SaveInteger(EY0,(1093743184),(2),(60))call SaveInteger(EY0,(1093743184),(3),(60))call SaveInteger(EY0,(1093747766),(1),(15))call SaveInteger(EY0,(1093747766),(2),(15))call SaveInteger(EY0,(1093747766),(3),(15))call SaveInteger(EY0,(1093744975),(1),(90))call SaveInteger(EY0,(1093744975),(2),(75))call SaveInteger(EY0,(1093744975),(3),(60))call SaveInteger(EY0,(1093681483),(1),(10))call SaveInteger(EY0,(1093681483),(2),(10))call SaveInteger(EY0,(1093681483),(3),(10))call SaveInteger(EY0,(1093748313),(1),(10))call SaveInteger(EY0,(1093748313),(2),(10))call SaveInteger(EY0,(1093748313),(3),(10))call SaveInteger(EY0,(1093686854),(1),(22))call SaveInteger(EY0,(1093686854),(2),(17))call SaveInteger(EY0,(1093686854),(3),(12))call SaveInteger(EY0,(1093686854),(4),(5))call SaveInteger(EY0,(1093747253),(1),(16))call SaveInteger(EY0,(1093747253),(2),(8))call SaveInteger(EY0,(1093747253),(3),(4))call SaveInteger(EY0,(1093747253),(4),(2))call SaveInteger(EY0,(1093678923),(1),(6))call SaveInteger(EY0,(1093678923),(2),(6))call SaveInteger(EY0,(1093678923),(3),(6))call SaveInteger(EY0,(1093742673),(1),(40))call SaveInteger(EY0,(1093742673),(2),(40))call SaveInteger(EY0,(1093742673),(3),(40))call SaveInteger(EY0,(1093747778),(1),(40))call SaveInteger(EY0,(1093747778),(2),(40))call SaveInteger(EY0,(1093747778),(3),(40))call SaveInteger(EY0,(1093677128),(1),(120))call SaveInteger(EY0,(1093677128),(2),(120))call SaveInteger(EY0,(1093677128),(3),(120))call SaveInteger(EY0,(1093681457),(1),(120))call SaveInteger(EY0,(1093681457),(2),(120))call SaveInteger(EY0,(1093681457),(3),(120))call SaveInteger(EY0,(1093685045),(1),(60))call SaveInteger(EY0,(1093685045),(2),(60))call SaveInteger(EY0,(1093685045),(3),(60))call SaveInteger(EY0,(1093747249),(1),(60))call SaveInteger(EY0,(1093747249),(2),(60))call SaveInteger(EY0,(1093747249),(3),(60))call SaveInteger(EY0,(1093684820),(1),(80))call SaveInteger(EY0,(1093684820),(2),(80))call SaveInteger(EY0,(1093684820),(3),(80))call SaveInteger(EY0,(1093684824),(1),(80))call SaveInteger(EY0,(1093684824),(2),(80))call SaveInteger(EY0,(1093684824),(3),(80))call SaveInteger(EY0,(1093677649),(1),(100))call SaveInteger(EY0,(1093677649),(2),(100))call SaveInteger(EY0,(1093677649),(3),(100))call SaveInteger(EY0,(1093747769),(1),(100))call SaveInteger(EY0,(1093747769),(2),(100))call SaveInteger(EY0,(1093747769),(3),(100))call SaveInteger(EY0,(1093685579),(1),(100))call SaveInteger(EY0,(1093685579),(2),(100))call SaveInteger(EY0,(1093685579),(3),(100))call SaveInteger(EY0,(1093678899),(1),(135))call SaveInteger(EY0,(1093678899),(2),(135))call SaveInteger(EY0,(1093678899),(3),(135))call SaveInteger(EY0,(1093677898),(1),(135))call SaveInteger(EY0,(1093677898),(2),(135))call SaveInteger(EY0,(1093677898),(3),(135))call SaveInteger(EY0,(1093678154),(1),(135))call SaveInteger(EY0,(1093678154),(2),(135))call SaveInteger(EY0,(1093678154),(3),(135))call SaveInteger(EY0,(1093678157),(1),(135))call SaveInteger(EY0,(1093678157),(2),(135))call SaveInteger(EY0,(1093678157),(3),(135))call SaveInteger(EY0,(1093678158),(1),(135))call SaveInteger(EY0,(1093678158),(2),(135))call SaveInteger(EY0,(1093678158),(3),(135))call SaveInteger(EY0,(1093679413),(1),(160))call SaveInteger(EY0,(1093679413),(2),(100))call SaveInteger(EY0,(1093679413),(3),(40))call SaveInteger(EY0,(1093679447),(1),(100))call SaveInteger(EY0,(1093679447),(2),(60))call SaveInteger(EY0,(1093679447),(3),(20))call SaveInteger(EY0,(1093747288),(1),(200))call SaveInteger(EY0,(1093747288),(2),(190))call SaveInteger(EY0,(1093747288),(3),(180))call SaveInteger(EY0,(1093678420),(1),(120))call SaveInteger(EY0,(1093678420),(2),(90))call SaveInteger(EY0,(1093678420),(3),(60))call SaveInteger(EY0,(1093679176),(1),(120))call SaveInteger(EY0,(1093679176),(2),(90))call SaveInteger(EY0,(1093679176),(3),(60))call SaveInteger(EY0,(1093678647),(1),(100))call SaveInteger(EY0,(1093678647),(2),(85))call SaveInteger(EY0,(1093678647),(3),(70))call SaveInteger(EY0,(1093679184),(1),(70))call SaveInteger(EY0,(1093679184),(2),(70))call SaveInteger(EY0,(1093679184),(3),(70))call SaveInteger(EY0,(1093681987),(1),(22))call SaveInteger(EY0,(1093681987),(2),(22))call SaveInteger(EY0,(1093681987),(3),(22))call SaveInteger(EY0,(1093685067),(1),(160))call SaveInteger(EY0,(1093685067),(2),(160))call SaveInteger(EY0,(1093685067),(3),(160))call SaveInteger(EY0,(1093752407),(1),(160))call SaveInteger(EY0,(1093752407),(2),(160))call SaveInteger(EY0,(1093752407),(3),(160))call SaveInteger(EY0,(1093873718),(1),(135))call SaveInteger(EY0,(1093873718),(2),(135))call SaveInteger(EY0,(1093873718),(3),(135))call SaveInteger(EY0,(1093873719),(1),(40))call SaveInteger(EY0,(1093873719),(2),(40))call SaveInteger(EY0,(1093873719),(3),(40))call SaveInteger(EY0,(1395667000),(1),(165))call SaveInteger(EY0,(1395667000),(2),(165))call SaveInteger(EY0,(1395667000),(3),(165))call SaveInteger(EY0,(1395667029),(1),(165))call SaveInteger(EY0,(1395667029),(2),(165))call SaveInteger(EY0,(1395667029),(3),(165))call SaveInteger(EY0,(1093751874),(1),(90))call SaveInteger(EY0,(1093751874),(2),(75))call SaveInteger(EY0,(1093751874),(3),(60))call SaveInteger(EY0,(1093752118),(1),(90))call SaveInteger(EY0,(1093752118),(2),(80))call SaveInteger(EY0,(1093752118),(3),(70))call SaveInteger(EY0,(1093817912),(1),(90))call SaveInteger(EY0,(1093817912),(2),(80))call SaveInteger(EY0,(1093817912),(3),(70))call SaveInteger(EY0,(1093751861),(1),(55))call SaveInteger(EY0,(1093751861),(2),(50))call SaveInteger(EY0,(1093751861),(3),(45))call SaveInteger(EY0,(1093808949),(1),(55))call SaveInteger(EY0,(1093808949),(2),(50))call SaveInteger(EY0,(1093808949),(3),(45))call SaveInteger(EY0,(1093751617),(1),(50))call SaveInteger(EY0,(1093751617),(2),(50))call SaveInteger(EY0,(1093751617),(3),(50))call SaveInteger(EY0,(1093751371),(1),(110))call SaveInteger(EY0,(1093751371),(2),(110))call SaveInteger(EY0,(1093751371),(3),(110))call SaveInteger(EY0,(1093753169),(1),(25))call SaveInteger(EY0,(1093753169),(2),(20))call SaveInteger(EY0,(1093753169),(3),(15))call SaveInteger(EY0,(1093809992),(1),(20))call SaveInteger(EY0,(1093809992),(2),(18))call SaveInteger(EY0,(1093809992),(3),(16))call SaveInteger(EY0,(1093817913),(1),(2))call SaveInteger(EY0,(1093817913),(2),(2))call SaveInteger(EY0,(1093817913),(3),(2))call SaveInteger(EY0,(1093812807),(1),(60))call SaveInteger(EY0,(1093812807),(2),(40))call SaveInteger(EY0,(1093812807),(3),(20))call SaveInteger(EY0,(1093813065),(1),(50))call SaveInteger(EY0,(1093813065),(2),(50))call SaveInteger(EY0,(1093813065),(3),(50))call SaveInteger(EY0,(1093813557),(1),(8))call SaveInteger(EY0,(1093813557),(2),(8))call SaveInteger(EY0,(1093813557),(3),(8))call SaveInteger(EY0,(1093815600),(1),(65))call SaveInteger(EY0,(1093815600),(2),(60))call SaveInteger(EY0,(1093815600),(3),(55))call SaveInteger(EY0,(1093687856),(1),(90))call SaveInteger(EY0,(1093687856),(2),(80))call SaveInteger(EY0,(1093687856),(3),(70))call SaveInteger(EY0,(1093816118),(1),(90))call SaveInteger(EY0,(1093816118),(2),(75))call SaveInteger(EY0,(1093816118),(3),(60))call SaveInteger(EY0,(1093817417),(1),(80))call SaveInteger(EY0,(1093817417),(2),(80))call SaveInteger(EY0,(1093817417),(3),(80))call SaveInteger(EY0,(1093817414),(1),(20))call SaveInteger(EY0,(1093817414),(2),(20))call SaveInteger(EY0,(1093817414),(3),(20))endfunctionfunction U91 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer id=(LoadInteger(LY,(S5I),(758)))set EK0[id]=GetPlayerState(Player(id),PLAYER_STATE_RESOURCE_GOLD)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction UA1 takes nothing returns booleanlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function U91))call SaveInteger(LY,(S5I),(758),(id))set t=nullreturn falseendfunctionfunction UB1 takes nothing returns booleanlocal player plocal integer ilocal integer idlocal integer UC1set i=1loopexitwhen i>5set p=BO[i]set id=GetPlayerId(p)set UC1=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if JS[id]<(TimerGetElapsed(M))thenset EK0[id]=UC1elseif UC1>EK0[id]thencall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,EK0[id])elseset EK0[id]=UC1endifset p=CO[i]set id=GetPlayerId(p)set UC1=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if JS[id]<(TimerGetElapsed(M))thenset EK0[id]=UC1elseif UC1>EK0[id]thencall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,EK0[id])elseset EK0[id]=UC1endifset i=i+1endloopreturn falseendfunctionfunction UD1 takes nothing returns booleanlocal player plocal integer ilocal integer idlocal integer UC1set i=1loopexitwhen i>5set p=BO[i]set id=GetPlayerId(p)set UC1=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if UC1<EL0[id]thenset EL0[id]=UC1endifset p=CO[i]set id=GetPlayerId(p)set UC1=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if UC1<EL0[id]thenset EL0[id]=UC1endifset i=i+1endloopreturn falseendfunctionfunction UG1 takes integer P7I,integer P8I returns booleanlocal integer i=ET0-1local real UH1=0local real SOI=(TimerGetElapsed(M))local integer NPI=0loopexitwhen i==ET0 or UH1>ER0 or NPI>200if i==0 thenset i=8000-1endifset NPI=NPI+1set UH1=SOI-EM0[i]if EN0[i]==P7I and ES0[i]==P8I and UH1<ER0 thenset EN0[i]=0set ES0[i]=0return trueendifset i=i-1endloopreturn falseendfunctionfunction UZ1 takes integer P7I,integer P8I returns booleanlocal integer i=ET0-1local real UH1=0local real SOI=(TimerGetElapsed(M))local integer NPI=0loopexitwhen i==ET0 or UH1>ER0 or NPI>200if i==0 thenset i=8000-1endifset NPI=NPI+1set UH1=SOI-EM0[i]if EN0[i]==P7I and ES0[i]==P8I and UH1<ER0 thenreturn trueendifset i=i-1endloopreturn falseendfunctionfunction UV1 takes nothing returns nothinglocal integer P7I=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))local integer P8I=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))local real PAI=GetEventDamage()set EM0[ET0]=(TimerGetElapsed(M))set EN0[ET0]=P7Iset ES0[ET0]=P8Iset ET0=ET0+1if ET0==8000 thenset ET0=1endifendfunctionfunction UW1 takes unit AD1,unit UX1 returns stringlocal integer i=1local integer UY1=GetPlayerId(GetOwningPlayer(AD1))local integer UJ1=GetPlayerId(GetOwningPlayer(UX1))local integer O91local string UK1=" "+GetObjectName(1848658521)+" "local boolean UL1=falseloopexitwhen i>5if TII(GetOwningPlayer(UX1))thenset O91=GetPlayerId(BO[i])elseset O91=GetPlayerId(CO[i])endifif UJ1!=O91 and UG1(O91,UY1)thenset D[O91]=D[O91]+1call FL1("Assist"+I2S(O91),UY1)if UL1 thenset UK1=UK1+"/"+C0[O91]+(D80[GetPlayerId((Player(O91)))])+"|r"elseset UK1=UK1+C0[O91]+(D80[GetPlayerId((Player(O91)))])+"|r"endifset UL1=trueendifset i=i+1endloopif UL1 thenreturn UK1endifreturn" "endfunctionfunction UM1 takes unit AD1,unit UX1 returns stringlocal integer i=1local integer UY1=GetPlayerId(GetOwningPlayer(AD1))local integer UJ1=GetPlayerId(GetOwningPlayer(UX1))local integer O91local string UK1=""local boolean UL1=falseloopexitwhen i>5if TII(GetOwningPlayer(UX1))thenset O91=GetPlayerId(BO[i])elseset O91=GetPlayerId(CO[i])endifif UJ1!=O91 and UZ1(O91,UY1)thenif UL1 thenset UK1=UK1+"/"+C0[O91]+(D80[GetPlayerId((Player(O91)))])+"|r"elseset UK1=UK1+C0[O91]+(D80[GetPlayerId((Player(O91)))])+"|r"endifset UL1=trueendifset i=i+1endloopif UL1 thenreturn UK1endifreturn" "endfunctionfunction UN1 takes unit AD1,unit UX1 returns integerlocal integer i=1local integer UY1=GetPlayerId(GetOwningPlayer(AD1))local integer UJ1=GetPlayerId(GetOwningPlayer(UX1))local integer O91local integer NPI=0loopexitwhen i>5if TII(GetOwningPlayer(UX1))thenset O91=GetPlayerId(BO[i])elseset O91=GetPlayerId(CO[i])endifif UJ1!=O91 and UZ1(O91,UY1)thenset NPI=NPI+1endifset i=i+1endloopreturn NPIendfunctionfunction US1 takes unit AD1,unit UX1 returns booleanlocal integer i=1local integer UY1=GetPlayerId(GetOwningPlayer(AD1))local integer UJ1=GetPlayerId(GetOwningPlayer(UX1))local integer O91local string UK1=" Assists: "local boolean UL1=falselocal integer x=1set EP0[1]=nullset EP0[2]=nullset EP0[3]=nullset EP0[4]=nullset EP0[5]=nullloopexitwhen i>5if TII(GetOwningPlayer(UX1))thenset O91=GetPlayerId(BO[i])elseset O91=GetPlayerId(CO[i])endifif UJ1!=O91 and UZ1(O91,UY1)thenset EP0[x]=Player(O91)set x=x+1set UL1=trueendifset i=i+1endloopreturn UL1endfunctionfunction UT1 takes unit AD1,unit UX1,real ROI returns nothinglocal integer i=1local integer NPI=0call US1(AD1,UX1)loopexitwhen i>5if EP0[i]!=null thenset NPI=NPI+1endifset i=i+1endloopset i=1loopexitwhen i>5if EP0[i]!=null thenset EL0[GetPlayerId(EP0[i])]=EL0[GetPlayerId(EP0[i])]+R2I(ROI/NPI)set EK0[GetPlayerId(EP0[i])]=EK0[GetPlayerId(EP0[i])]+R2I(ROI/NPI)call AA1(EP0[i],R2I(ROI/NPI),K1[GetPlayerId(EP0[i])])endifset i=i+1endloopendfunctionfunction UR1 takes nothing returns nothingendfunctionfunction UP1 takes nothing returns nothinglocal integer id=GetUnitTypeId(GetTriggerUnit())if GetOwningPlayer(GetTriggerUnit())==DO thenset C[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=C[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseif(id==1969711215)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1970169187)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1702061422)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1701081721)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1966092337)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1966092338)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1697656918)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1697656919)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1700946284)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1697657398)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1970107511)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifelseif(id==1966092370)thenif(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))thenset B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=B[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1elseset A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=A[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifendifcall UR1()endfunctionfunction UU1 takes integer i returns nothinglocal integer x=1local integer y=1set EQ0[i]=nullset EU0[i]=0set F00[i]=falseloopexitwhen y>FI0if EU0[y]!=0 thenset F10[x]=EQ0[y]set FO0[x]=EU0[y]set F20[x]=F00[y]set EQ0[y]=nullset EU0[y]=0set F00[y]=falseset x=x+1endifset y=y+1endloopset FI0=x-1set x=1loopexitwhen x>FI0set EQ0[x]=F10[x]set EU0[x]=FO0[x]set F00[x]=F20[x]set x=x+1endloopendfunctionfunction I0O takes unit AD1 returns booleanreturn GetUnitTypeId(AD1)==1211117641 or GetUnitTypeId(AD1)==1211117642endfunctionfunction IIO takes unit AD1 returns booleanlocal integer S5I=GetHandleId(GetOwningPlayer(AD1))local unit W41=(LoadUnitHandle(LY,(S5I),(699)))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))if GetUnitAbilityLevel(W41,1093685078)!=0 or GetUnitAbilityLevel(W51,1093685078)!=0 or GetUnitAbilityLevel(W61,1093685078)!=0 or GetUnitAbilityLevel(W71,1093685078)!=0 or GetUnitAbilityLevel(W81,1093685078)!=0 thenreturn trueendifreturn falseendfunctionfunction I1O takes unit AD1 returns booleanlocal integer i=0local integer S5I=GetHandleId(GetOwningPlayer(AD1))local unit W31=(LoadUnitHandle(LY,(S5I),(699)))loopexitwhen i>5if GetItemTypeId(UnitItemInSlot(W31,i))==FR0[VL0]and GetItemCharges(UnitItemInSlot(W31,i))>0 thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction IOO takes unit AD1,location I2O returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(AD1))local unit W41=(LoadUnitHandle(LY,(S5I),(699)))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))if W41!=null thencall ReviveHeroLoc(W41,I2O,true)call VS1(W41)endifif W51!=null thencall ReviveHeroLoc(W51,I2O,true)call VS1(W51)endifif W61!=null thencall ReviveHeroLoc(W61,I2O,true)call VS1(W61)endifif W71!=null thencall ReviveHeroLoc(W71,I2O,true)call VS1(W71)endifif W81!=null thencall ReviveHeroLoc(W81,I2O,true)call VS1(W81)endifendfunctionfunction CustomHeroRevive_GetTime takes nothing returns realreturn TimerGetElapsed(M)endfunctionfunction I3O takes unit SFI,real GW1,boolean I4O returns nothingset FI0=FI0+1set EQ0[FI0]=SFIset EU0[FI0]=(TimerGetElapsed(M))+GW1set F00[FI0]=I4Oendfunctionfunction I5O takes integer i returns nothinglocal unit AD1=EQ0[i]local boolean I4O=F00[i]local player I6O=GetOwningPlayer(AD1)local location I2Oif TOI(I6O)thenset I2O=GetRectCenter(S3)elseset I2O=GetRectCenter(O4)endifif Q2==false and IC1(AD1)thencall VQ1(AD1,I6O,GetLocationX(I2O),GetLocationY(I2O),true)if I0O(AD1)==false or GetUnitAbilityLevel(AD1,1093684567)==0 thencall ReviveHeroLoc(AD1,I2O,true)elsecall IOO(AD1,I2O)endifcall SetUnitState(AD1,UNIT_STATE_MANA,GetUnitState(AD1,UNIT_STATE_MAX_MANA))endifcall RemoveLocation(I2O)call UU1(i)set AD1=nullset I6O=nullset I2O=nullendfunctionfunction I7O takes nothing returns booleanlocal real SOI=(TimerGetElapsed(M))local integer iset i=1loopexitwhen i>FI0if EU0[i]<SOI and EU0[i]!=0 thencall I5O(i)endifif EU0[i]!=0 and IC1(EQ0[i])==false thencall UU1(i)endifset i=i+1endloopreturn falseendfunctionfunction I9O takes unit AD1,integer IAO returns nothinglocal unit IBO=(LoadUnitHandle(LY,(GetHandleId(AD1)),(788)))local integer ICO=(LoadInteger(LY,(GetHandleId(IBO)),(787)))call SaveInteger(LY,(GetHandleId(IBO)),(787),(IMaxBJ(ICO-IAO,0)))set IBO=nullendfunctionfunction IDO takes unit IEO,unit IFO returns nothingif QLI(IEO,IFO)>1300 or(IC1(IEO)and GetUnitTypeId(IEO)==1211117643)thenif IsPlayerAlly(GetOwningPlayer(IEO),GetOwningPlayer(IFO))==false thencall AddHeroXP(IEO,RUI(IFO),true)endifendifendfunctionfunction IGO takes nothing returns nothingif ES1(GetEnumUnit(),FR0[WM0])!=null thencall SetItemCharges(ES1(GetEnumUnit(),FR0[WM0]),GetItemCharges(ES1(GetEnumUnit(),FR0[WM0]))+1)endifendfunctionfunction IHO takes nothing returns booleanif(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false thenif IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(F30))and ES1(GetFilterUnit(),FR0[WM0])!=null thenreturn trueendifendifreturn falseendfunctionfunction IZO takes nothing returns booleanlocal item ilocal integer EY1if F50==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(F40))thenif ES1(GetFilterUnit(),FR0[X60])!=null thenset F50=F50+1set EY1=GetItemCharges(ES1(GetFilterUnit(),FR0[X60]))if EY1==0 thenset EY1=2elseset EY1=EY1+1endifcall SetItemCharges(ES1(GetFilterUnit(),FR0[X60]),EY1)endifendifreturn falseendfunctionfunction AncientJangoo_FindNearbyHeroes takes nothing returns booleanlocal item ilocal integer EY1if F60==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(F40))thenif ES1(GetFilterUnit(),FR0[HP0])!=null thenset F60=F60+1set EY1=GetItemCharges(ES1(GetFilterUnit(),FR0[HP0]))set EY1=IMinBJ(EY1+1,5)call SetItemCharges(ES1(GetFilterUnit(),FR0[HP0]),EY1)endifendifreturn falseendfunctionfunction IVO takes unit u,unit IWO returns nothinglocal group g=NTI()set F30=ucall GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1625,Condition(function IHO))if IsUnitAlly(u,GetOwningPlayer(IWO))==false thencall GroupAddUnit(g,IWO)endifcall ForGroup(g,function IGO)call NSI(g)set g=nullendfunctionfunction IXO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IYO=(LoadUnitHandle(LY,(S5I),(335)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real xlocal real ylocal real aif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()!=IYO thencall KillUnit(IYO)endifelseset a=GetUnitFacing(P8I)*bj_RADTODEGset x=GetUnitX(P8I)+75set y=GetUnitY(P8I)+75call SetUnitX(IYO,x)call SetUnitY(IYO,y)call IssueTargetOrder(IYO,"attack",P8I)endifset t=nullset IYO=nullset P8I=nullreturn falseendfunctionfunction IJO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit IYOif GetSummoningUnit()==I01 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set IYO=GetSummonedUnit()set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterDeathEvent(t,IYO)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function IXO))call SaveUnitHandle(LY,(S5I),(335),(IYO))call SaveUnitHandle(LY,(S5I),(17),(P8I))call UnitAddAbility(IYO,1097625443)call SetUnitPosition(IYO,GetUnitX(P8I)+100,GetUnitY(P8I)+100)call IssueTargetOrder(IYO,"attack",P8I)call SetUnitMoveSpeed(IYO,522)endifset t=nullset P8I=nullset P7I=nullset I01=nullreturn falseendfunctionfunction IKO takes unit P7I,unit IWO returns nothinglocal unit P8I=IWOlocal unit I01local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if RLI(P8I)thenset P8I=(K1[GetPlayerId(GetOwningPlayer((P8I)))])endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function IJO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call IA1(I01,1093813559)call IssueTargetOrderById(I01,852274,P8I)set t=nullset P8I=nullset I01=nullendfunctionfunction ILO takes nothing returns booleanif(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetFilterUnit())==false thenif IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(F30))==false and ES1(GetFilterUnit(),FR0[HU0])!=null thenendifendifreturn falseendfunctionfunction IMO takes unit u returns nothinglocal group g=NTI()set F30=ucall GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1625,Condition(function ILO))call NSI(g)set g=nullendfunctionfunction INO takes unit u returns nothinglocal group g=NTI()set F50=0set F40=ucall GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1425,Condition(function IZO))call NSI(g)set F50=0set g=nullendfunctionfunction ISO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer ITO=(LoadInteger(LY,(S5I),(88)))local integer i=1local player plocal string N7Iloopexitwhen i>5if ITO==0 thenset p=BO[i]set N7I=C0[GetPlayerId(BO[0])]+GetObjectName(1848652622)+"|r "+GetObjectName(1848652624)+" "+C0[GetPlayerId(BO[0])]+GetObjectName(1848652625)+"|r"elseset p=CO[i]set N7I=C0[GetPlayerId(CO[0])]+GetObjectName(1848652623)+"|r "+GetObjectName(1848652624)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848652625)+"|r"endifcall DisplayTimedTextToPlayer(p,0,0,10,N7I)call OQ1(JD,p)set i=i+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction IRO takes integer ITO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function ISO))call SaveInteger(LY,(S5I),(88),(ITO))set t=nullendfunctionfunction IPO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer IQO=(LoadInteger(LY,(S5I),(89)))local string N7I=(LoadStr(LY,(S5I),(90)))if IQO==1 thencall OP1(HC)elseif IQO==2 thencall OP1(AE)elseif IQO==3 thencall OP1(ME)elseif IQO==4 thencall OP1(NE)endifcall QRI(P2,10.00,N7I)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction IUO takes string N7I,integer IQO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function IPO))call SaveStr(LY,(S5I),(90),(N7I))call SaveInteger(LY,(S5I),(89),(IQO))set t=nullendfunctionfunction O0O takes player AB1,integer AC1 returns nothinglocal integer TGI=1local integer VW1if TII(AB1)thenset VW1=T8I(OO)elseset VW1=T8I(AO)endifif TII(AB1)thenloopexitwhen TGI>5if T3I(BO[TGI])thenset EL0[GetPlayerId(BO[TGI])]=EL0[GetPlayerId(BO[TGI])]+AC1/VW1set EK0[GetPlayerId(BO[TGI])]=EK0[GetPlayerId(BO[TGI])]+AC1/VW1call AA1(BO[TGI],AC1/VW1,K1[GetPlayerId(BO[TGI])])endifset TGI=TGI+1endloopelseloopexitwhen TGI>5if T3I(CO[TGI])thenset EL0[GetPlayerId(CO[TGI])]=EL0[GetPlayerId(CO[TGI])]+AC1/VW1set EK0[GetPlayerId(CO[TGI])]=EK0[GetPlayerId(CO[TGI])]+AC1/VW1call AA1(CO[TGI],AC1/VW1,K1[GetPlayerId(CO[TGI])])endifset TGI=TGI+1endloopendifendfunctionfunction OIO takes unit AD1,integer IAO returns nothinglocal player I6O=GetOwningPlayer(AD1)call SetPlayerState(I6O,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(I6O,PLAYER_STATE_RESOURCE_GOLD)-IAO)endfunctionfunction O1O takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1865429043 thencall KillUnit(GetFilterUnit())return trueendifreturn falseendfunctionfunction OOO takes nothing returns nothinglocal boolexpr QL1=Condition(function O1O)local group Z51=NTI()call GroupEnumUnitsInRect(Z51,bj_mapInitialPlayableArea,QL1)call NSI(Z51)endfunctionfunction O2O takes player T1I returns booleanif T1I==DO thenreturn trueendifreturn falseendfunctionfunction O3O takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=1311788365 thenif GetUnitTypeId(GetTriggerUnit())==1211117642 and I1O(GetTriggerUnit())thenreturn falseendifreturn trueendifreturn falseendfunctionfunction O4O takes player I6O,player AB1,unit UX1 returns booleanreturn UX1==null or GetKillingUnit()==null or(TII(I6O)and TII(AB1))or(TOI(I6O)and TOI(AB1))endfunctionfunction O5O takes nothing returns nothingif V51(GetUnitTypeId(GetEnumUnit()))==false thenset FC0=FC0+1set FD0=FD0+1endifendfunctionfunction O6O takes nothing returns nothingif(GetUnitTypeId((GetEnumUnit()))==1211117642)==false and V51(GetUnitTypeId(GetEnumUnit()))==false thencall AddHeroXP(GetEnumUnit(),F90,true)set FA0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=FA0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+F90set FB0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=FB0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+F80set EL0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=EL0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+F80set EK0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=EK0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+F80call AA1(GetOwningPlayer(GetEnumUnit()),F80,GetEnumUnit())endifendfunctionfunction O7O takes player p returns integerlocal integer O8O=0local integer i=1local player p2loopexitwhen i==6set p2=BO[i]if IsPlayerAlly(p,p2)thenset O8O=O8O+GetHeroXP(K1[GetPlayerId(p2)])endifset p2=CO[i]if IsPlayerAlly(p,p2)thenset O8O=O8O+GetHeroXP(K1[GetPlayerId(p2)])endifset i=i+1endloopreturn O8Oendfunctionfunction O9O takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or CI1(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==falseendfunctionfunction OAO takes player p returns integerlocal integer OBO=0local group g=NTI()local unit ulocal integer ilocal item BA1call GroupEnumUnitsOfPlayer(g,p,Condition(function O9O))loopexitwhen FirstOfGroup(g)==nullset u=FirstOfGroup(g)set i=0loopexitwhen i==6set BA1=UnitItemInSlot(u,i)if BA1!=null and GetItemPlayer(BA1)==p thenset OBO=OBO+(FU0[EB1((BA1))])endifset i=i+1endloopcall GroupRemoveUnit(g,u)endloopcall NSI(g)set OBO=OBO+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)return OBOendfunctionfunction OCO takes player p returns integerlocal integer ODO=0local integer i=1local player p2loopexitwhen i==6set p2=BO[i]if IsPlayerAlly(p,p2)thenset ODO=ODO+OAO(p2)endifset p2=CO[i]if IsPlayerAlly(p,p2)thenset ODO=ODO+OAO(p2)endifset i=i+1endloopreturn ODOendfunctionfunction OEO takes nothing returns booleanlocal integer SUIlocal real OFO=0local real OGO=0local group glocal player OHOlocal player OZOlocal integer OVOlocal integer OWOlocal real OXOlocal real OYOlocal real OJOlocal real OKOlocal real OLOlocal real OMOlocal real ONOlocal real OSOlocal real OTOlocal unit ORO=F70if IsUnitType(ORO,UNIT_TYPE_HERO)==true and IsUnitIllusion(ORO)==false and(GetUnitTypeId((ORO))==1211117642)==false and V51(GetUnitTypeId(ORO))==false thenset SUI=GetHeroLevel(ORO)set F90=0set F80=0set g=NTI()set FC0=0set FD0=0set GK=OROcall GroupEnumUnitsInRange(g,GetUnitX(ORO),GetUnitY(ORO),1300+25,Condition(function D01))call ForGroup(g,function O5O)if IsPlayerAlly(GetOwningPlayer(ORO),BO[0])thenset OHO=BO[0]set OZO=CO[0]elseset OHO=CO[0]set OZO=BO[0]endifset OVO=SUIset OWO=GetHeroXP(ORO)set OXO=O7O(OHO)set OYO=O7O(OZO)+1set OJO=RMaxBJ((OXO-OYO)/(OXO+OYO),0)set OKO=OJO*OWOset OLO=OAO(GetOwningPlayer(ORO))set OMO=OCO(OHO)set ONO=OCO(OZO)+1set OSO=RMaxBJ(RMinBJ(OMO/ONO-1,1),0)set OTO=OSO*OLOif FC0==1 thenset OFO=20*OVO+OKO*0.23elseif FC0==2 thenset OFO=15*OVO+OKO*0.23elseif FC0==3 thenset OFO=10*OVO+OKO*0.2elseif FC0==4 thenset OFO=7*OVO+OKO*0.15elseif FC0==5 thenset OFO=5*OVO+OKO*0.12endifif FD0==1 thenset OGO=40+7*SUI+0.05*OTOelseif FD0==2 thenset OGO=30+6*SUI+0.05*OTOelseif FD0==3 thenset OGO=20+5*SUI+0.05*OTOelseif FD0==4 thenset OGO=10+4*SUI+0.04*OTOelseif FD0==5 thenset OGO=10+4*SUI+0.03*OTOendifif R0 thenendifset F90=R2I(OFO)set F80=R2I(OGO)call ForGroup(g,function O6O)call NSI(g)set g=nullendifreturn falseendfunctionfunction OPO takes nothing returns nothinglocal boolean OQO=falselocal unit AD1=GetDyingUnit()local unit UX1=GetKillingUnit()local player AB1=GetOwningPlayer(UX1)local player I6O=GetOwningPlayer(AD1)local location I2Olocal integer AC1=0local integer IAO=0local boolean OUO=falselocal string A0O=""local string AIO=""local string A1O=""local string MidTextlocal integer xlocal string AOOlocal string A2Olocal string A3Olocal string A4Olocal boolean I4O=falselocal real A5O=1local real A6O=1local real A7O=1local real A8O=1local real A9O=0local real AAO=1local trigger tlocal integer ABOlocal integer ACOlocal integer idlocal integer ADO=GetPlayerState(I6O,PLAYER_STATE_RESOURCE_GOLD)local integer AEO=ADO-EL0[GetPlayerId(I6O)]local unit AFOlocal unit AGOlocal boolean AHO=((LoadInteger(LY,(GetHandleId((AD1))),((4418))))==1)if IsPlayerAlly(AB1,I6O)==false and O2O(AB1)==false thenset F70=GetTriggerUnit()call ExecuteFunc("OEO")endifif AHO thenset XS[GetPlayerId((I6O))]=trueendifif UX1==null and GetUnitTypeId(AD1)==1315988077 thenset UX1=YXIset AB1=GetOwningPlayer(UX1)endifif IsPlayerAlly(AB1,I6O)==true and((LoadInteger(LY,(GetHandleId((UX1))),((4328))))==1)==true and KDI!=null thenset UX1=KDIset AB1=GetOwningPlayer(UX1)endifif((LoadInteger(LY,(GetHandleId((AD1))),((4333))))==1)thenset UX1=ZJIset AB1=GetOwningPlayer(UX1)endifset ACO=UN1(AD1,UX1)if UX1!=null thenset id=GetUnitTypeId(UX1)call IDO(K1[GetPlayerId(GetOwningPlayer(UX1))],AD1)endifif O4O(I6O,AB1,UX1)==false and ACO==1 and T2I(AB1)==false and AB1!=DO thencall US1(AD1,UX1)set AB1=EP0[1]set UX1=K1[GetPlayerId(AB1)]endifif TII(GetOwningPlayer(AD1))thenif GetOwningPlayer(AD1)!=BO[1]thenendifif GetOwningPlayer(AD1)!=BO[2]thenendifif GetOwningPlayer(AD1)!=BO[3]thenendifif GetOwningPlayer(AD1)!=BO[4]thenendifif GetOwningPlayer(AD1)!=BO[5]thenendifelseif GetOwningPlayer(AD1)!=CO[1]thenendifif GetOwningPlayer(AD1)!=CO[2]thenendifif GetOwningPlayer(AD1)!=CO[3]thenendifif GetOwningPlayer(AD1)!=CO[4]thenendifif GetOwningPlayer(AD1)!=CO[5]thenendifendifset HJ[GetPlayerId(GetOwningPlayer((AD1)))]=trueif GetUnitAbilityLevel(AD1,1093685078)!=0 or(I0O(AD1)and IIO(AD1))thenset I4O=truecall UnitRemoveAbility(AD1,1093685078)set XO=AD1set A2=UX1if IsUnitType(UX1,UNIT_TYPE_STRUCTURE)==false thenendifendifif AB1==null thenset AB1=I6Oendifif L0 and GetUnitTypeId(AD1)!=1211117642 thenset K2=UnitRemoveItemFromSlot(AD1,GetRandomInt(0,5))if GetItemTypeId(K2)==1227894859 thencall CreateItem(1227894855,GetItemX(K2),GetItemY(K2))call RemoveItem(K2)endifendifif TII(I6O)thenif TII(AB1)thenset OQO=trueif(AB1==I6O)thencall QRI(P2,10.00,(C0[GetPlayerId(I6O)]+(D80[GetPlayerId((I6O))])+"|r "+GetObjectName(1848652626)))elsecall QRI(P2,10.00,GI1(I6O,AB1))endifelseif TOI(AB1)thenset OUO=trueset O[GetPlayerId(BO[0])]=O[GetPlayerId(BO[0])]+1set I[GetPlayerId(CO[0])]=I[GetPlayerId(CO[0])]+1set I0[2]=I0[2]+1set I0[1]=0if AB1!=CO[0]thenset I[GetPlayerId(AB1)]=I[GetPlayerId(AB1)]+1set P[GetPlayerId(AB1)]=P[GetPlayerId(AB1)]+1endifendifendifif TOI(I6O)thenif TOI(AB1)thenset OQO=trueif(AB1==I6O)thencall QRI(P2,10.00,(C0[GetPlayerId(I6O)]+(D80[GetPlayerId((I6O))])+"|r "+GetObjectName(1848652626)))elsecall QRI(P2,10.00,GI1(I6O,AB1))endifelseif TII(AB1)thenset OUO=trueset O[GetPlayerId(CO[0])]=O[GetPlayerId(CO[0])]+1set I[GetPlayerId(BO[0])]=I[GetPlayerId(BO[0])]+1set I0[1]=I0[1]+1set I0[2]=0if AB1!=BO[0]thenset I[GetPlayerId(AB1)]=I[GetPlayerId(AB1)]+1set P[GetPlayerId(AB1)]=P[GetPlayerId(AB1)]+1endifendifendifif AB1==DO thenset OUO=falseif GetUnitTypeId(UX1)==1848651852 thencall QRI(P2,10.00,(C0[GetPlayerId(I6O)]+(D80[GetPlayerId((I6O))])+"|r "+GetObjectName(1848652628)))elsecall QRI(P2,10.00,(C0[GetPlayerId(I6O)]+(D80[GetPlayerId((I6O))])+"|r "+GetObjectName(1848652629)))endifset OQO=trueendifif VN thencall IO1(WC,GetUnitX(AD1),GetUnitY(AD1))endifcall FL1("Hero"+I2S(GetPlayerId(I6O)),GetPlayerId(AB1))set x=P[GetPlayerId(I6O)]if x>2 and OQO==false thenif x==3 thenset AC1=60set A0O="|c0000ff40"+GetObjectName(1848652876)+"|r"elseif x==4 thenset AC1=120set A0O="|c00400080"+GetObjectName(1848652878)+"|r"elseif x==5 thenset AC1=180set A0O="|c00ff0080"+GetObjectName(1848652877)+"|r"elseif x==6 thenset AC1=240set A0O="|c00ff8000"+GetObjectName(1848652874)+"|r"elseif x==7 thenset AC1=300set A0O="|c00808000"+GetObjectName(1848652873)+"|r"elseif x==8 thenset AC1=360set A0O="|c00ff80ff"+GetObjectName(1848652630)+"|r"elseif x==9 thenset AC1=420set A0O="|c00ff0000"+GetObjectName(1848652631)+"|r"elseset AC1=480set A0O="|c00ff8000"+GetObjectName(1848652632)+"|r"endifendifset x=P[GetPlayerId(AB1)]if x>H[GetPlayerId(AB1)]thenset H[GetPlayerId(AB1)]=xendifset AFO=UX1if IsUnitType(AFO,UNIT_TYPE_HERO)==false thenset AFO=K1[GetPlayerId(GetOwningPlayer(AFO))]endifif x>2 and GetUnitTypeId(AFO)!=1429221446 and PA0[GetPlayerId(GetOwningPlayer(AFO))]==0 thenendifset AGO=AD1if IsUnitType(AGO,UNIT_TYPE_HERO)==false thenset AGO=K1[GetPlayerId(GetOwningPlayer(AGO))]endifif OQO==false and OUO==true thenendifif x>2 and OQO==false thenif x==3 thencall OP1(RC)set AIO=" "+GetObjectName(1848652875)+" |c0000ff40"+GetObjectName(1848652876)+"|r"+GetObjectName(1848652857)elseif x==4 thencall OP1(GC)set AIO=" "+GetObjectName(1848652872)+" |c00400080"+GetObjectName(1848652878)+"|r"+GetObjectName(1848652857)elseif x==5 thencall OP1(QC)set AIO=" "+GetObjectName(1848652871)+" |c00ff0080"+GetObjectName(1848652877)+"|r"+GetObjectName(1848652857)elseif x==6 thencall OP1(EE)set AIO=" "+GetObjectName(1848652872)+" |c00ff8000"+GetObjectName(1848652874)+"|r"+GetObjectName(1848652865)elseif x==7 thencall OP1(HE)set AIO=" "+GetObjectName(1848652872)+" |c00808000"+GetObjectName(1848652873)+"|r"+GetObjectName(1848652865)elseif x==8 thencall OP1(OD)set AIO=" "+GetObjectName(1848652871)+" |c00ff80ff"+GetObjectName(1848652630)+"|r"+GetObjectName(1848652865)elseif x==9 thencall OP1(XC)set AIO=" "+GetObjectName(1848652872)+" |c00ff0000"+GetObjectName(1848652631)+"|r"+GetObjectName(1848652866)elsecall OP1(JC)set AIO=" "+GetObjectName(1848652872)+" |c00ff8000"+GetObjectName(1848652632)+"|r. "+GetObjectName(1848652870)+GetObjectName(1848652866)endifendifif OQO==false thenset AC1=AC1+100+GetHeroLevel(AD1)*9+100set AOO=C0[GetPlayerId(I6O)]+(D80[GetPlayerId((I6O))])+"|r"set A2O=C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r"set A4O="|c00FFDC00"+I2S(AC1)+"|r"if AB1==BO[0]or AB1==CO[0]thenif ACO==0 thenif AB1==BO[0]thenset A3O=A2O+" "+GetObjectName(1848652850)+" "+AOO+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+A4O+" "+GetObjectName(1848652852)+"."call O0O(AB1,AC1)elseif AB1==CO[0]thenset A3O=A2O+" "+GetObjectName(1848652850)+" "+AOO+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+A4O+" "+GetObjectName(1848652852)+"."call O0O(AB1,AC1)endifelseif ACO>1 thenset A3O=A2O+" "+GetObjectName(1848652850)+" "+AOO+GetObjectName(1848652851)+GetObjectName(1848652857)+" "+A4O+" "+GetObjectName(1848652852)+"."call UT1(AD1,UX1,AC1)endifelseif A0O==""and AIO==""thenset A3O=A2O+" "+GetObjectName(1848652850)+" "+AOO+GetObjectName(1848652851)+" "+GetObjectName(1848652867)+" "+A4O+" "+GetObjectName(1848652853)+GetObjectName(1848652857)elseif A0O==""and AIO!=""thenset A3O=A2O+" "+GetObjectName(1848652850)+" "+AOO+GetObjectName(1848652851)+" "+GetObjectName(1848652867)+" "+A4O+" "+GetObjectName(1848652853)+GetObjectName(1848652857)elseif A0O!=""and AIO==""thenset A3O=A2O+" "+GetObjectName(1848652856)+" "+AOO+GetObjectName(1848652855)+" "+A0O+" "+GetObjectName(1848652854)+" "+A4O+" "+GetObjectName(1848652853)+GetObjectName(1848652857)elseif A0O!=""and AIO!=""thenset A3O=A2O+" "+GetObjectName(1848652856)+" "+AOO+GetObjectName(1848652855)+" "+A0O+" "+GetObjectName(1848652854)+" "+A4O+" "+GetObjectName(1848652853)+GetObjectName(1848652857)endifif OUO thenset A1O=UW1(AD1,UX1)endifcall QRI(P2,10,A3O+A1O)if AIO!=""thencall QRI(P2,10,A2O+AIO)endifset EL0[GetPlayerId(AB1)]=EL0[GetPlayerId(AB1)]+AC1set EK0[GetPlayerId(AB1)]=EK0[GetPlayerId(AB1)]+AC1call AA1(AB1,AC1,AD1)set Y[GetPlayerId(AB1)]=Y[GetPlayerId(AB1)]+AC1if I0[1]>4 thencall IRO(0)endifif I0[2]>4 thencall IRO(1)endifendifset IAO=GetHeroLevel(AD1)*30if ES1(AD1,FR0[WM0])!=null thenif GetItemCharges(ES1(AD1,FR0[WM0]))>0 thenset A9O=-1*(4*GetItemCharges(ES1(AD1,FR0[WM0])))set IAO=IMaxBJ(R2I(IAO-25*GetItemCharges(ES1(AD1,FR0[WM0]))),0)endifendifif IAO>AEO thenset IAO=AEOendifcall IVO(AD1,AFO)call INO(AD1)call IMO(AD1)if I4O==false thenset G[GetPlayerId(I6O)]=G[GetPlayerId(I6O)]+IAOcall OIO(AD1,IAO)call I9O(AD1,IAO)endifcall SaveInteger(LY,(400+GetPlayerId(AB1)),(450+GetPlayerId(I6O)),((LoadInteger(LY,(400+GetPlayerId(AB1)),(450+GetPlayerId(I6O))))+1))call SaveInteger(LY,(400+GetPlayerId(I6O)),(500+GetPlayerId(AB1)),((LoadInteger(LY,(400+GetPlayerId(I6O)),(500+GetPlayerId(AB1))))+1))call StartTimerBJ(E0[GetPlayerId(AB1)],false,18)if OQO==false and AB1!=BO[0]and AB1!=CO[0]and AB1!=DO thenset Q[GetPlayerId(AB1)]=Q[GetPlayerId(AB1)]+1if Q[GetPlayerId(AB1)]==2 thenset Z[GetPlayerId(AB1)]=Z[GetPlayerId(AB1)]+1call IUO(C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r "+GetObjectName(1848652868)+" |c000000ff"+GetObjectName(1848652883)+"|r"+GetObjectName(1848652857),1)endifif Q[GetPlayerId(AB1)]==3 thenset V[GetPlayerId(AB1)]=V[GetPlayerId(AB1)]+1call IUO(C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r "+GetObjectName(1848652868)+" |c0000ff40"+GetObjectName(1848652869)+"|r"+GetObjectName(1848652866),2)endifif Q[GetPlayerId(AB1)]==4 thenset V[GetPlayerId(AB1)]=V[GetPlayerId(AB1)]+1call IUO(C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r "+GetObjectName(1848652868)+" |c0000FFFF"+GetObjectName(1848657994)+"|r"+GetObjectName(1848652866),3)endifif Q[GetPlayerId(AB1)]>4 thenset V[GetPlayerId(AB1)]=V[GetPlayerId(AB1)]+1call IUO(C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r "+GetObjectName(1848652875)+" |c0000AAFF"+GetObjectName(1848657995)+"|r"+GetObjectName(1848652866),4)endifendifif(OQO==false)thenset P[GetPlayerId(I6O)]=0endifset P[0]=0set P[6]=0set O[GetPlayerId(I6O)]=O[GetPlayerId(I6O)]+1if I4O thenset A5O=0.4endifif OQO==true and GetUnitTypeId(AD1)==1211117643 thenset A8O=0.5endifset ABO=R2I((GetHeroLevel(AD1)*3.8+5)*A5O*A6O*A7O*A8O)+R2I(A9O)if OCI==true thenset ABO=R2I(ABO*0.5)endifset ABO=ABO+YS[GetPlayerId(I6O)]if(((LoadInteger(LY,(GetHandleId((AD1))),((4333))))==1)==true)thenset ABO=R2I(ABO+30)endifif GetUnitAbilityLevel(AD1,1093684567)==1 or GetUnitAbilityLevel(AD1,1093809987)==1 thenset AAO=0.8endifif GetUnitAbilityLevel(AD1,1093684567)==2 or GetUnitAbilityLevel(AD1,1093809987)==2 thenset AAO=0.8endifif GetUnitAbilityLevel(AD1,1093684567)==3 or GetUnitAbilityLevel(AD1,1093809987)==3 thenset AAO=0.8endifset ABO=R2I(ABO*AAO)if WL thenset W[GetPlayerId(I6O)]=0call TimerStart(F0[GetPlayerId(I6O)],1.00,false,null)elseset W[GetPlayerId(I6O)]=W[GetPlayerId(I6O)]+ABOcall TimerStart(F0[GetPlayerId(I6O)],ABO,false,null)endifcall TriggerExecute(CH)if X0==false thencall I3O(AD1,ABO,I4O)elseif(TII(I6O))thenset W0[0]=W0[0]+1endifif TOI(I6O)thenset W0[1]=W0[1]+1endifset U1[GetPlayerId(I6O)]=AD1if GetUnitTypeId(AD1)==1211117642 thenset U1[GetPlayerId(I6O)]=(LoadUnitHandle(LY,(GetHandleId(GetOwningPlayer(AD1))),(699)))endifif W0[0]==YL thencall TriggerExecute(PK)endifif W0[1]==YL thencall TriggerExecute(RK)endifif(GetUnitTypeId(AD1)==1429221430)thencall ExecuteFunc("OOO")elseif GetUnitTypeId(AD1)==1429221432 or GetUnitTypeId(AD1)==1160786229 thenset NK=AD1call ExecuteFunc("AZO")elseif GetUnitTypeId(AD1)==1432580716 thenset NK=AD1call ExecuteFunc("AVO")endifendifendfunctionfunction AXO takes integer MSI,integer AYO returns nothingset FF0[FE0]=MSIset FG0[FE0]=AYOset FE0=FE0+1endfunctionfunction AKO takes unit P7I returns integerlocal integer i=0local integer MSI=GetUnitTypeId(P7I)loopexitwhen i>FE0if FF0[i]==MSI thenreturn FG0[i]endifset i=i+1endloopreturn-1endfunctionfunction ALO takes unit P7I returns integerlocal integer AMO=AKO(P7I)if AMO==-1 thenif IsUnitType(P7I,UNIT_TYPE_HERO)==true thenset AMO=RUI(P7I)elseset AMO=SQI(GetUnitLevel(P7I))endifendifif IsUnitType(P7I,UNIT_TYPE_SUMMONED)==true thenset AMO=R2I(AMO*0.5)endifreturn AMOendfunctionfunction ANO takes nothing returns nothingcall AddHeroXP(GetEnumUnit(),FH0,true)endfunctionfunction ASO takes nothing returns booleanlocal unit P8I=GetFilterUnit()local unit ATO=GetDyingUnit()local integer MSI=GetUnitTypeId(P8I)if(GetOwningPlayer((ATO))==DO)==false or IsUnitType(ATO,UNIT_TYPE_ANCIENT)==true thenif IsUnitEnemy(P8I,GetOwningPlayer(ATO))==false thenreturn falseendifendifif IsUnitType(P8I,UNIT_TYPE_HERO)==false or IC1(P8I)thenreturn falseendifif B81(MSI)thenreturn falseendifif QNI(FZ0,FV0,GetUnitX(P8I),GetUnitY(P8I))>1300+25 thenreturn falseendifreturn trueendfunctionfunction ARO takes nothing returns booleanlocal unit APO=GetKillingUnit()local unit ATO=GetDyingUnit()local integer AMO=ALO(ATO)local integer NPIlocal group glocal group g2local real x=GetUnitX(ATO)local real y=GetUnitY(ATO)local player pif IsUnitIllusion(ATO)or GetUnitAbilityLevel(ATO,1097625443)>0 or AMO==0 thenreturn falseendifif APO==null or IsPlayerAlly(GetOwningPlayer(APO),GetOwningPlayer(ATO))==true or(GetOwningPlayer((APO))==DO)thenreturn falseendifset g=NTI()set g2=NTI()set FZ0=xset FV0=yset p=BO[1]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=BO[2]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=BO[3]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=BO[4]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=BO[5]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=CO[1]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=CO[2]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=CO[3]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=CO[4]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set p=CO[5]call GroupEnumUnitsOfPlayer(g,p,Condition(function ASO))call GroupAddGroup(g,g2)set NPI=CountUnitsInGroup(g2)if NPI>0 thenset FH0=AMO/NPIcall ForGroup(g2,function ANO)endifcall NSI(g)call NSI(g2)set g=nullset g2=nullset APO=nullset ATO=nullreturn falseendfunctionfunction AUO takes nothing returns booleanlocal unit IYO=GetSummonedUnit()local integer xif IsUnitIllusion(IYO)==true thenset x=P[GetPlayerId(GetOwningPlayer(IYO))]if x>2 and PA0[GetPlayerId(GetOwningPlayer(IYO))]==0 thencall IA1(IYO,1093815114)elsecall UnitRemoveAbility(IYO,1093815114)endifendifset IYO=nullreturn falseendfunctionfunction BIO takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local player AB1=GetOwningPlayer(GetKillingUnit())local player I6O=GetOwningPlayer(GetTriggerUnit())local string N7Ilocal integer ACO=UN1(GetTriggerUnit(),GetKillingUnit())if AB1==BO[0]or AB1==CO[0]thencall UT1(GetTriggerUnit(),GetKillingUnit(),150)set N7I=UM1(GetTriggerUnit(),GetKillingUnit())+" "+GetObjectName(1848652887)+" |c00ff0303"+GetObjectName(1848652889)+GetObjectName(1848652857)+"|r "if ACO>1 thenset N7I=N7I+"(+150 "+GetObjectName(1848652852)+")"elseset N7I=N7I+"(+150 "+GetObjectName(1848652853)+")"endifelseset N7I=C0[GetPlayerId(AB1)]+(D80[GetPlayerId((AB1))])+"|r "+GetObjectName(1848652887)+" |c00ff0303"+GetObjectName(1848652889)+GetObjectName(1848652857)+"|r "set N7I=N7I+"(+150 "+GetObjectName(1848652853)+")"call AA1(AB1,150,K1[GetPlayerId(AB1)])set EL0[GetPlayerId(AB1)]=EL0[GetPlayerId(AB1)]+150set EK0[GetPlayerId(AB1)]=EK0[GetPlayerId(AB1)]+150endifcall QRI(P2,10,N7I)call OP1(ZC)call S0I(t)set t=nullendfunctionfunction B1O takes nothing returns booleanif GetOwningPlayer(GetKillingUnit())!=DO and GetKillingUnit()!=null and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsPlayerEnemy(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit()))==true thenif GetOwningPlayer(GetKillingUnit())==BO[0]or GetOwningPlayer(GetKillingUnit())==CO[0]thenif UN1(GetTriggerUnit(),GetKillingUnit())>0 thencall BIO()endifelsecall BIO()endifendifreturn falseendfunctionfunction B2O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))endifif NPI>4 or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>0)thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+0.2*GetUnitState(P7I,UNIT_STATE_MAX_LIFE))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+0.2*GetUnitState(P7I,UNIT_STATE_MAX_MANA))set t=nullset P7I=nullreturn falseendfunctionfunction B3O takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.0,true)call TriggerAddCondition(t,Condition(function B2O))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendfunctionfunction B4O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit ulocal region rlocal integer SUI=1+R2I((TimerGetElapsed(M))/240)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset u=(LoadUnitHandle(LY,(S5I),(53)))call SetUnitAbilityLevel(u,1094939747,SUI)set r=CreateRegion()call RegionAddRect(r,PA)call RegionAddRect(r,QA)call RegionAddRect(r,PB)if IsUnitInRegion(r,u)==false thenif(LoadBoolean(LY,(S5I),(91)))==true thencall SaveBoolean(LY,(S5I),(91),(false))elsecall SetUnitX(u,GetRectCenterX(P4))call SetUnitY(u,GetRectCenterY(P4))call SaveBoolean(LY,(S5I),(91),(true))endifendifcall RemoveRegion(r)set u=nullset r=nullendifset t=nullreturn falseendfunctionfunction B5O takes unit u returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,10,true)call TriggerAddCondition(t,Condition(function B4O))call SaveUnitHandle(LY,(S5I),(53),(u))call SaveBoolean(LY,(S5I),(91),(true))set t=nullendfunctionfunction B6O takes nothing returns booleanlocal item BA1local integer NPI=GetTriggerEvalCount(GetTriggeringTrigger())if NPI==FK0 thencall S0I(GetTriggeringTrigger())endifif NPI==FK0-180 or NPI==FK0-60 thenif FW0!=null thenset BA1=ES1(FW0,FR0[VL0])if BA1!=null thenif NPI==FK0-180 thenif TII(GetOwningPlayer(FW0))thencall QRI(OO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848657207)+"|r")elsecall QRI(AO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848657207)+"|r")endifelseif TII(GetOwningPlayer(FW0))thencall QRI(OO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848656984)+"|r")elsecall QRI(AO,15,GetObjectName(1848657209)+" |c00ff0303"+GetObjectName(1848656984)+"|r")endifendifendifendifendifset BA1=nullreturn falseendfunctionfunction B7O takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function B6O))call TriggerEvaluate(t)set t=nullendfunctionfunction B8O takes nothing returns booleanset FY0=GetTriggerEvalCount(GetTriggeringTrigger())if N0!=null and GetUnitState(N0,UNIT_STATE_LIFE)>1 thencall SetPlayerTechResearched(GetOwningPlayer(N0),1378889798,FY0)if GetUnitAbilityLevel(N0,1093743666)==0 thencall UnitAddAbility(N0,1093743666)endifcall SetUnitAbilityLevel(N0,1093743666,FY0+1)endifreturn falseendfunctionfunction B9O takes nothing returns nothinglocal integer i=1local unit SFIset FW0=nullloopexitwhen i>5set SFI=K1[GetPlayerId(BO[i])]if SFI!=null and ES1(SFI,FR0[VL0])!=null thencall DisableTrigger(LY0)call FL1("AegisOff",GetPlayerId(GetOwningPlayer(SFI)))call RemoveItem(ES1(SFI,FR0[VL0]))call B3O(SFI)call EnableTrigger(LY0)endifset SFI=K1[GetPlayerId(CO[i])]if SFI!=null and ES1(SFI,FR0[VL0])!=null thencall DisableTrigger(LY0)call FL1("AegisOff",GetPlayerId(GetOwningPlayer(SFI)))call RemoveItem(ES1(SFI,FR0[VL0]))call B3O(SFI)call EnableTrigger(LY0)endifset i=i+1endloopset SFI=nullendfunctionfunction BAO takes string BBO,string BCO returns stringlocal string s=GetObjectName(1848656705)set s=FS1(s,"$team",BBO)set s=FS1(s,"$team",BCO)return sendfunctionfunction BDO takes nothing returns booleanreturn GetUnitTypeId(GetDyingUnit())==1848651852endfunctionfunction IsHero takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==trueendfunctionfunction BEO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local location BFOlocal real SKIif GetTriggerEvalCount(t)==FJ0 or R90 thenset R90=falseset BFO=GetRectCenter(P4)call B9O()set FM0=FM0+1set N0=CreateUnitAtLoc(Player(12),1848651852,BFO,bj_UNIT_FACING)call SetUnitAcquireRange(N0,150)call B5O(N0)call UnitAddAbility(N0,1093743666)call SetPlayerTechResearched(GetOwningPlayer(N0),1378889798,FY0)call SetUnitAbilityLevel(N0,1093743666,FY0+1)call RemoveLocation(BFO)if FM0>1 thencall UnitRemoveAbility(N0,1093684018)call UnitAddAbility(N0,1093685558)call UnitAddItem(N0,CreateItem(FR0[ZE0],0,0))endifcall UnitAddItem(N0,CreateItem(FR0[VL0],0,0))call S0I(t)elseif GetTriggerEvalCount(t)==FK0 thencall B9O()endifset t=nullreturn falseendfunctionfunction BGO takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function BEO))set R90=falseset FJ0=GetRandomInt(480,660)call B7O()set FX0=falseif(TII(GetOwningPlayer(GetKillingUnit())))thencall FL1("Roshan",0)call QRI(bj_FORCE_ALL_PLAYERS,10.00,BAO("|c00ff0000"+GetObjectName(1848653365)+"|r",GetObjectName(1848653365)))call AdjustPlayerStateBJ(200,BO[1],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,BO[2],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,BO[3],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,BO[4],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,BO[5],PLAYER_STATE_RESOURCE_GOLD)endifif(TOI(GetOwningPlayer(GetKillingUnit())))thencall FL1("Roshan",1)call QRI(bj_FORCE_ALL_PLAYERS,10.00,BAO("|c00004000"+GetObjectName(1848653379)+"|r",GetObjectName(1848653379)))call AdjustPlayerStateBJ(200,CO[1],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,CO[2],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,CO[3],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,CO[4],PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(200,CO[5],PLAYER_STATE_RESOURCE_GOLD)endifset t=nullendfunctionfunction BZO takes nothing returns nothinglocal texttag t=CreateTextTag()local unit u=GetTriggerUnit()local player p=GetOwningPlayer(GetKillingUnit())call SetTextTagText(t,"$",0.027)call SetTextTagPosUnit(t,u,0)call SetTextTagColorBJ(t,D90[GetPlayerId(p)],DA0[GetPlayerId(p)],DB0[GetPlayerId(p)],15)call SetTextTagVelocity(t,0,0.035)call SetTextTagFadepoint(t,3)call SetTextTagLifespan(t,1.5)call SetTextTagPermanent(t,false)call SetTextTagVisibility(t,false)if GetLocalPlayer()==D60 or GetLocalPlayer()==D70 thencall SetTextTagVisibility(t,true)endifset t=nullset u=nullset p=nullendfunctionfunction BVO takes unit u,player p returns nothinglocal texttag t=CreateTextTag()call SetTextTagText(t,"!",0.03)call SetTextTagPosUnit(t,u,0)call SetTextTagColorBJ(t,D90[GetPlayerId(p)],DA0[GetPlayerId(p)],DB0[GetPlayerId(p)],15)call SetTextTagVelocity(t,0,0.035)call SetTextTagFadepoint(t,3)call SetTextTagLifespan(t,1.5)call SetTextTagPermanent(t,false)call SetTextTagVisibility(t,false)if RN0[GetPlayerId(GetLocalPlayer())]==true or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thencall SetTextTagVisibility(t,true)endifset t=nullendfunctionfunction BWO takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_MELEE_ATTACKER)==true thencall AddHeroXP(GetEnumUnit(),OK/UJ,true)elsecall AddHeroXP(GetEnumUnit(),IK/UJ,true)endifendfunctionfunction BXO takes nothing returns nothinglocal group g=NTI()local integer BYOlocal integer BJO=20local integer BKO=31call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1300+25,Condition(function D01))set BYO=O51(g)set UJ=BYOset IK=BJOset OK=BKOcall ForGroup(g,function BWO)call NSI(g)call BVO(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))set g=nullendfunctionfunction BLO takes nothing returns booleanif IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetTriggerUnit()))==true thencall BXO()elseif C2 and T2I(GetOwningPlayer(GetKillingUnit()))thencall BZO()endifendifreturn falseendfunctionfunction BNO takes player G11,player GO1 returns stringlocal string s=GetObjectName(1848656208)set s=FS1(s,"$dead",(D80[GetPlayerId((G11))]))return sendfunctionfunction BSO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction BTO takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function BSO))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set P7I=nullset t=nullendfunctionfunction BRO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit BPO=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=GetTriggerEvalCount(t)local integer BQOlocal integer i=1local integer idlocal real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer BUO=140if RXI(BPO)thenset BUO=180endifset BQO=BUO-NPIloopexitwhen i>5if IsPlayerAlly(GetOwningPlayer(BPO),BO[0])thenset id=GetPlayerId(BO[i])elseset id=GetPlayerId(CO[i])endifset i=i+1if BQO==0 thencall LeaderboardDisplay(FN0[id],false)if IsPlayerAlly(BO[0],Player(id))thenset FS0[GetPlayerId(BO[0])]=falseendifif IsPlayerAlly(CO[0],Player(id))thenset FS0[GetPlayerId(CO[0])]=falseendifelseif IC1(K1[id])==false thencall PlayerSetLeaderboard(Player(id),FN0[id])call LeaderboardDisplay(FN0[id],true)call LeaderboardSetLabel(FN0[id],"    "+GetObjectName(1848659034)+" "+I2S(BQO))endifendifendloopif BQO==2 thencall SetUnitPosition(BPO,x,y)endifif BQO==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset BPO=nullreturn falseendfunctionfunction C0O takes player MDI,integer ROI returns nothinglocal texttag tif ROI>0 thenset t=CreateTextTag()call SetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(MDI,PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetTextTagText(t,"+"+I2S(ROI),0.025)call SetTextTagPosUnit(t,K1[GetPlayerId(MDI)],0)call SetTextTagColor(t,255,220,0,255)call SetTextTagVelocity(t,0,0.03)if GetLocalPlayer()==MDI thencall SetTextTagVisibility(t,true)elsecall SetTextTagVisibility(t,false)endifcall SetTextTagFadepoint(t,2)call SetTextTagLifespan(t,3)call SetTextTagPermanent(t,false)endifendfunctionfunction CIO takes nothing returns booleanlocal real xlocal real ylocal unit BPO=GetTriggerUnit()local integer i=1local integer R4I=175local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if RXI(BPO)==false thenset R4I=150endifcall FL1("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call QRI(P2,10.00,BNO(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,255,0,0,false)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function BRO))call SaveUnitHandle(LY,(S5I),(2),(BPO))if IsPlayerAlly(GetOwningPlayer(BPO),BO[0])and FS0[GetPlayerId(BO[0])]==false thenset FS0[GetPlayerId(BO[0])]=trueloopexitwhen i>5call C0O(CO[i],R4I)set i=i+1endloopendifset i=1if IsPlayerAlly(GetOwningPlayer(BPO),CO[0])and FS0[GetPlayerId(CO[0])]==false thenset FS0[GetPlayerId(CO[0])]=trueloopexitwhen i>5call C0O(BO[i],R4I)set i=i+1endloopendifif TII(GetOwningPlayer(BPO))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifcall SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))if IsTerrainPathable(GetUnitX(BPO),GetUnitY(BPO),PATHING_TYPE_WALKABILITY)thencall BTO(BPO)endifset t=nullreturn falseendfunctionfunction C1O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=QSlocal real y=USif TOI(GetOwningPlayer(P7I))thenset x=O50set y=O60endifif IC1(P7I)==false thenif QNI(GetUnitX(P7I),GetUnitY(P7I),x,y)<800 thencall IA1(P7I,1098282348)elsecall UnitRemoveAbility(P7I,1098282348)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction COO takes unit BPO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetPlayerAbilityAvailable(GetOwningPlayer(BPO),1093810510,false)call SetPlayerAbilityAvailable(GetOwningPlayer(BPO),1093818445,false)call UnitMakeAbilityPermanent(BPO,true,1093810509)call TriggerRegisterDeathEvent(t,BPO)call TriggerAddCondition(t,Condition(function CIO))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function C1O))call SaveUnitHandle(LY,(S5I),(2),(BPO))set t=nullendfunctionfunction C2O takes nothing returns nothingif RYI(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false thencall FL1("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call QRI(P2,10.00,BNO(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,255,0,0,false)endifendfunctionfunction C3O takes nothing returns booleancall S0I(GetTriggeringTrigger())set FS0[GetPlayerId(BO[0])]=falseset FS0[GetPlayerId(CO[0])]=falseset FN0[GetPlayerId(BO[1])]=CreateLeaderboard()set FN0[GetPlayerId(BO[2])]=CreateLeaderboard()set FN0[GetPlayerId(BO[3])]=CreateLeaderboard()set FN0[GetPlayerId(BO[4])]=CreateLeaderboard()set FN0[GetPlayerId(BO[5])]=CreateLeaderboard()set FN0[GetPlayerId(CO[1])]=CreateLeaderboard()set FN0[GetPlayerId(CO[2])]=CreateLeaderboard()set FN0[GetPlayerId(CO[3])]=CreateLeaderboard()set FN0[GetPlayerId(CO[4])]=CreateLeaderboard()set FN0[GetPlayerId(CO[5])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[1],FN0[GetPlayerId(BO[1])])call PlayerSetLeaderboard(BO[2],FN0[GetPlayerId(BO[2])])call PlayerSetLeaderboard(BO[3],FN0[GetPlayerId(BO[3])])call PlayerSetLeaderboard(BO[4],FN0[GetPlayerId(BO[4])])call PlayerSetLeaderboard(BO[5],FN0[GetPlayerId(BO[5])])call PlayerSetLeaderboard(CO[1],FN0[GetPlayerId(CO[1])])call PlayerSetLeaderboard(CO[2],FN0[GetPlayerId(CO[2])])call PlayerSetLeaderboard(CO[3],FN0[GetPlayerId(CO[3])])call PlayerSetLeaderboard(CO[4],FN0[GetPlayerId(CO[4])])call PlayerSetLeaderboard(CO[5],FN0[GetPlayerId(CO[5])])call LeaderboardDisplay(FN0[GetPlayerId(BO[1])],false)call LeaderboardDisplay(FN0[GetPlayerId(BO[2])],false)call LeaderboardDisplay(FN0[GetPlayerId(BO[3])],false)call LeaderboardDisplay(FN0[GetPlayerId(BO[4])],false)call LeaderboardDisplay(FN0[GetPlayerId(BO[5])],false)call LeaderboardDisplay(FN0[GetPlayerId(CO[1])],false)call LeaderboardDisplay(FN0[GetPlayerId(CO[2])],false)call LeaderboardDisplay(FN0[GetPlayerId(CO[3])],false)call LeaderboardDisplay(FN0[GetPlayerId(CO[4])],false)call LeaderboardDisplay(FN0[GetPlayerId(CO[5])],false)call LeaderboardSetLabelBJ(FN0[GetPlayerId(BO[1])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(BO[2])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(BO[3])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(BO[4])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(BO[5])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(CO[1])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(CO[2])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(CO[3])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(CO[4])]," ")call LeaderboardSetLabelBJ(FN0[GetPlayerId(CO[5])]," ")return falseendfunctionfunction C5O takes nothing returns nothinglocal integer id=GetUnitTypeId(GetTriggerUnit())if id==1697656914 or id==1697657137 or id==1697656915 or id==1697657145 or id==1966092365 or id==1966092356 or id==1966092366 or id==1966092372 thenif IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))thenset X[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=X[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1call QRI(P2,10,C0[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+GetObjectName(1848652880)+".")elsecall QRI(P2,10,C0[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+GetObjectName(1848657230)+".")endifendifendfunctionfunction C8O takes integer i returns booleanreturn i==1227894838 or i==1227894840 or i==1227894858 or i==1227894859 or i==1227894839 or i==1227903555endfunctionfunction C9O takes nothing returns nothingif GetWidgetLife(GetEnumItem())>0 and C8O(GetItemTypeId(GetEnumItem()))thenset VK=GetEnumItem()endifendfunctionfunction CAO takes nothing returns integerlocal integer i=GetRandomInt(1,5)loopexitwhen i!=J30set i=GetRandomInt(1,5)endloopset J30=ireturn iendfunctionfunction CBO takes nothing returns booleanlocal real xlocal real ylocal real x1local real y1local real x2local real y2local integer CCOlocal item CDOlocal item CEOif GetRandomInt(1,2)==1 thenset x1=GetLocationX(F1)set y1=GetLocationY(F1)set x2=GetLocationX(G1)set y2=GetLocationY(G1)elseset x1=GetLocationX(G1)set y1=GetLocationY(G1)set x2=GetLocationX(F1)set y2=GetLocationY(F1)endifset VK=nullcall EnumItemsInRect(G4,Condition(function N1I),function C9O)set CDO=VKset VK=nullcall EnumItemsInRect(D4,Condition(function N1I),function C9O)set CEO=VKcall RemoveItem(CDO)call RemoveItem(CEO)if J40==false thenset CCO=CAO()if CCO==1 thencall CreateItem(1227894839,x1,y1)elseif CCO==2 thencall CreateItem(1227894838,x1,y1)elseif CCO==3 thencall CreateItem(1227894859,x1,y1)elseif CCO==4 thencall CreateItem(1227894840,x1,y1)elseif CCO==5 thencall CreateItem(1227894858,x1,y1)endifset VK=CreateItem(1227903555,x2,y2)call SaveBoolean(LY,(GetHandleId(VK)),(835),(false))elseset J40=falseset VK=CreateItem(1227903555,x1,y1)call SaveBoolean(LY,(GetHandleId(VK)),(835),(true))set VK=CreateItem(1227903555,x2,y2)call SaveBoolean(LY,(GetHandleId(VK)),(835),(true))endifreturn falseendfunctionfunction CGO takes nothing returns nothingset JC0=JC0+1set J50[JC0]=HI0set J60[JC0]=HB0set JB0[JC0]=ZV0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=GY0set J70[JC0]=XV0set JB0[JC0]=ZW0set JC0=JC0+1set J50[JC0]=GC0set J60[JC0]=GY0set J70[JC0]=XW0set JB0[JC0]=ZX0set JC0=JC0+1set J50[JC0]=H10set J60[JC0]=H50set JB0[JC0]=ZY0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=XX0set JB0[JC0]=ZK0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=G60set J70[JC0]=G50set JB0[JC0]=ZL0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=G80set J70[JC0]=G50set JB0[JC0]=ZM0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=H20set J70[JC0]=G50set JB0[JC0]=ZN0set JC0=JC0+1set J50[JC0]=G50set J60[JC0]=XJ0set JB0[JC0]=ZS0set JC0=JC0+1set J50[JC0]=H00set J60[JC0]=H20set J70[JC0]=H50set JB0[JC0]=ZR0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=GH0set J70[JC0]=XK0set JB0[JC0]=ZP0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=H40set J70[JC0]=XL0set JB0[JC0]=ZQ0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=GL0set J70[JC0]=XM0set JB0[JC0]=ZU0set JC0=JC0+1set J50[JC0]=G90set J60[JC0]=G60set J70[JC0]=XN0set JB0[JC0]=V00set JC0=JC0+1set J50[JC0]=GR0set J60[JC0]=G80set J70[JC0]=XS0set JB0[JC0]=VI0set JC0=JC0+1set J50[JC0]=HC0set J60[JC0]=G80set J70[JC0]=XT0set JB0[JC0]=V10set JC0=JC0+1set J50[JC0]=GB0set J60[JC0]=GC0set J70[JC0]=H20set JB0[JC0]=V20set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=G50set J70[JC0]=XR0set JB0[JC0]=V30set JC0=JC0+1set J50[JC0]=G90set J60[JC0]=G90set J70[JC0]=H20set J80[JC0]=XP0set JB0[JC0]=V40set JC0=JC0+1set J50[JC0]=V40set J60[JC0]=XP0set JB0[JC0]=V50set JC0=JC0+1set J50[JC0]=V60set J60[JC0]=XP0set JB0[JC0]=V50set JC0=JC0+1set J50[JC0]=GW0set J60[JC0]=GM0set JB0[JC0]=V80set JC0=JC0+1set J50[JC0]=GM0set J60[JC0]=XQ0set JB0[JC0]=VA0set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=H60set J70[JC0]=HB0set J80[JC0]=XU0set JB0[JC0]=VB0set JC0=JC0+1set J50[JC0]=GU0set J60[JC0]=GG0set J70[JC0]=HA0set JB0[JC0]=VC0set JC0=JC0+1set J50[JC0]=ZW0set J60[JC0]=ZX0set J70[JC0]=Y00set JB0[JC0]=VD0set JC0=JC0+1set J50[JC0]=VI0set J60[JC0]=V00set JB0[JC0]=VE0set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=GS0set J70[JC0]=Y10set JB0[JC0]=VF0set JC0=JC0+1set J50[JC0]=ZV0set J60[JC0]=GB0set J70[JC0]=GD0set JB0[JC0]=VG0set JC0=JC0+1set J50[JC0]=GA0set J60[JC0]=GB0set J70[JC0]=YO0set JB0[JC0]=VH0set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=GR0set J70[JC0]=Y20set JB0[JC0]=VZ0set JC0=JC0+1set J50[JC0]=V00set J60[JC0]=H90set J70[JC0]=Y30set JB0[JC0]=VN0set JC0=JC0+1set J50[JC0]=GD0set J60[JC0]=XE0set JB0[JC0]=VS0set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=ZU0set J70[JC0]=Y50set JB0[JC0]=VT0set JC0=JC0+1set J50[JC0]=VT0set J60[JC0]=Y50set JB0[JC0]=VR0set JC0=JC0+1set J50[JC0]=VR0set J60[JC0]=Y50set JB0[JC0]=VP0set JC0=JC0+1set J50[JC0]=VP0set J60[JC0]=Y50set JB0[JC0]=VQ0set JC0=JC0+1set J50[JC0]=VQ0set J60[JC0]=Y50set JB0[JC0]=VU0set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=G80set J70[JC0]=Y60set JB0[JC0]=W00set JC0=JC0+1set J50[JC0]=W00set J60[JC0]=Y60set JB0[JC0]=WI0set JC0=JC0+1set J50[JC0]=WI0set J60[JC0]=Y60set JB0[JC0]=W10set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=ZV0set J70[JC0]=Y70set JB0[JC0]=WO0set JC0=JC0+1set J50[JC0]=GE0set J60[JC0]=H30set JB0[JC0]=W30set JC0=JC0+1set J50[JC0]=VH0set J60[JC0]=GE0set J70[JC0]=Y80set JB0[JC0]=W50set JC0=JC0+1set J50[JC0]=GE0set J60[JC0]=HC0set J70[JC0]=HC0set JB0[JC0]=W60set JC0=JC0+1set J50[JC0]=H30set J60[JC0]=Y90set JB0[JC0]=W80set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=HA0set J70[JC0]=YA0set JB0[JC0]=WA0set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=V80set J70[JC0]=YB0set JB0[JC0]=WC0set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=V90set J70[JC0]=YB0set JB0[JC0]=WC0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=H90set J70[JC0]=GU0set J80[JC0]=G20set JB0[JC0]=WD0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=H90set J70[JC0]=GU0set J80[JC0]=G30set JB0[JC0]=WD0set JC0=JC0+1set J50[JC0]=GF0set J60[JC0]=H00set J70[JC0]=HN0set JB0[JC0]=WF0set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=GC0set J70[JC0]=YR0set JB0[JC0]=XA0set JC0=JC0+1set J50[JC0]=GU0set J60[JC0]=GR0set J70[JC0]=G90set J80[JC0]=H60set JB0[JC0]=JD0set JC0=JC0+1set J50[JC0]=ZV0set J60[JC0]=ZR0set J70[JC0]=YE0set JB0[JC0]=WH0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=GT0set J70[JC0]=HB0set JB0[JC0]=WZ0set JC0=JC0+1set J50[JC0]=HA0set J60[JC0]=HI0set J70[JC0]=H70set JB0[JC0]=WV0set JC0=JC0+1set J50[JC0]=HA0set J60[JC0]=HI0set J70[JC0]=H80set JB0[JC0]=WV0set JC0=JC0+1set J50[JC0]=GG0set J60[JC0]=H10set J70[JC0]=YF0set JB0[JC0]=WX0set JC0=JC0+1set J50[JC0]=GX0set J60[JC0]=V30set J70[JC0]=YL0set JB0[JC0]=WY0set JC0=JC0+1set J50[JC0]=ZD0set J70[JC0]=YG0set JB0[JC0]=WJ0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=ZY0set J70[JC0]=GM0set J80[JC0]=YH0set JB0[JC0]=WK0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=ZJ0set J70[JC0]=GM0set J80[JC0]=YH0set JB0[JC0]=WK0set JC0=JC0+1set J50[JC0]=GX0set J60[JC0]=GQ0set J70[JC0]=GC0set J80[JC0]=YZ0set JB0[JC0]=WL0set JC0=JC0+1set J50[JC0]=VC0set J60[JC0]=X80set J70[JC0]=J10set JB0[JC0]=WM0set JC0=JC0+1set J50[JC0]=WV0set J60[JC0]=ZX0set J70[JC0]=JO0set JB0[JC0]=Z40set JC0=JC0+1set J50[JC0]=WW0set J60[JC0]=ZX0set J70[JC0]=JO0set JB0[JC0]=Z40set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=HO0set J70[JC0]=HI0set J80[JC0]=GP0set JB0[JC0]=WN0set JC0=JC0+1set J50[JC0]=G50set J60[JC0]=GW0set J70[JC0]=GA0set J80[JC0]=YV0set JB0[JC0]=WP0set JC0=JC0+1set J50[JC0]=GT0set J60[JC0]=GQ0set J70[JC0]=YW0set JB0[JC0]=WQ0set JC0=JC0+1set J50[JC0]=ZR0set J60[JC0]=ZR0set J70[JC0]=YQ0set JB0[JC0]=X00set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=GA0set J70[JC0]=GA0set JB0[JC0]=XI0set JC0=JC0+1set J50[JC0]=HK0set J60[JC0]=GY0set J70[JC0]=GY0set J80[JC0]=GY0set J90[JC0]=YX0set JB0[JC0]=X10set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=HO0set J70[JC0]=YY0set JB0[JC0]=XO0set JC0=JC0+1set J50[JC0]=WN0set J60[JC0]=ZW0set J70[JC0]=YJ0set JB0[JC0]=X20set JC0=JC0+1set J50[JC0]=H70set J60[JC0]=H40set J70[JC0]=H40set JB0[JC0]=X30set JC0=JC0+1set J50[JC0]=H80set J60[JC0]=H40set J70[JC0]=H40set JB0[JC0]=X30set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=GH0set J70[JC0]=GH0set J80[JC0]=YM0set JB0[JC0]=X60set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=HO0set J70[JC0]=YN0set JB0[JC0]=X80set JC0=JC0+1set J50[JC0]=GF0set J60[JC0]=X50set JB0[JC0]=HS0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=GG0set JB0[JC0]=X90set JC0=JC0+1set J50[JC0]=H20set J60[JC0]=ZP0set J70[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=HP0set J60[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=HQ0set J60[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=GW0set J60[JC0]=ZU0set J70[JC0]=YP0set JB0[JC0]=XB0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=H10set J70[JC0]=HO0set JB0[JC0]=Z00set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=H60set J70[JC0]=HA0set JB0[JC0]=Z10set JC0=JC0+1set J50[JC0]=VI0set J60[JC0]=HN0set JB0[JC0]=XC0set JC0=JC0+1set J50[JC0]=V10set J60[JC0]=H30set JB0[JC0]=XD0set JC0=JC0+1set J50[JC0]=ZQ0set J60[JC0]=ZY0set JB0[JC0]=Z20set JC0=JC0+1set J50[JC0]=ZQ0set J60[JC0]=ZJ0set JB0[JC0]=Z30set JC0=JC0+1set J50[JC0]=XG0set J60[JC0]=XG0set J70[JC0]=XG0set J80[JC0]=XG0set J90[JC0]=XG0set JA0[JC0]=XG0set JB0[JC0]=XH0endfunctionfunction InitTrig_Recipe_Definitions takes nothing returns nothingcall CGO()endfunctionfunction CHO takes nothing returns nothingset GO0=GO0+1set FT0[GO0]=1227899226set FR0[GO0]=1227895089set FP0[GO0]=0set FQ0[GO0]=1227900249set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JE0=GO0set GO0=GO0+1set FT0[GO0]=1227894854set FR0[GO0]=1227894852set FP0[GO0]=0set FQ0[GO0]=1227900250set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JF0=GO0set GO0=GO0+1set FT0[GO0]=1227903545set FR0[GO0]=1227903553set FP0[GO0]=0set FQ0[GO0]=1227903554set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L60=GO0set GO0=GO0+1set FT0[GO0]=1227903542set FR0[GO0]=1227903543set FP0[GO0]=0set FQ0[GO0]=1227903544set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L50=GO0set GO0=GO0+1set FT0[GO0]=1227895096set FR0[GO0]=1227894841set FP0[GO0]=0set FQ0[GO0]=1227900464set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JG0=GO0set GO0=GO0+1set FT0[GO0]=1227895097set FR0[GO0]=1227894837set FP0[GO0]=0set FQ0[GO0]=1227900470set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JH0=GO0set GO0=GO0+1set FT0[GO0]=1227895105set FR0[GO0]=1227894855set FP0[GO0]=0set FQ0[GO0]=1227900465set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JZ0=GO0set GO0=GO0+1set FT0[GO0]=1227895106set FR0[GO0]=1227894836set FP0[GO0]=0set FQ0[GO0]=1227900466set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JV0=GO0set GO0=GO0+1set FT0[GO0]=1227903539set FR0[GO0]=1227903540set FP0[GO0]=0set FQ0[GO0]=1227903541set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L40=GO0set GO0=GO0+1set FT0[GO0]=1227895112set FR0[GO0]=1227894835set FP0[GO0]=0set FQ0[GO0]=1227900467set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JW0=GO0set GO0=GO0+1set FT0[GO0]=1227895113set FR0[GO0]=1227894834set FP0[GO0]=0set FQ0[GO0]=1227900469set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JX0=GO0set GO0=GO0+1set FT0[GO0]=1227895371set FR0[GO0]=1227894833set FP0[GO0]=0set FQ0[GO0]=1227900468set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JY0=GO0set GO0=GO0+1set FT0[GO0]=1227895372set FR0[GO0]=1227894857set FP0[GO0]=0set FQ0[GO0]=1227900485set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JJ0=GO0set GO0=GO0+1set FT0[GO0]=1227903537set FR0[GO0]=1227903536set FP0[GO0]=0set FQ0[GO0]=1227903538set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JK0=GO0set GO0=GO0+1set FT0[GO0]=1227899442set FR0[GO0]=1227894856set FP0[GO0]=0set FQ0[GO0]=1227900473set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JM0=GO0set GO0=GO0+1set FT0[GO0]=1227899443set FR0[GO0]=1227894864set FP0[GO0]=0set FQ0[GO0]=1227900481set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JN0=GO0set GO0=GO0+1set FT0[GO0]=1227899444set FR0[GO0]=1227894869set FP0[GO0]=0set FQ0[GO0]=1227900471set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JS0=GO0set GO0=GO0+1set FT0[GO0]=1227899447set FR0[GO0]=1227894832set FP0[GO0]=0set FQ0[GO0]=1227900484set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JT0=GO0set GO0=GO0+1set FT0[GO0]=1227899446set FR0[GO0]=1227895094set FP0[GO0]=0set FQ0[GO0]=1227900483set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JR0=GO0set GO0=GO0+1set FT0[GO0]=1227899445set FR0[GO0]=1227895095set FP0[GO0]=0set FQ0[GO0]=1227900482set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JP0=GO0set GO0=GO0+1set FT0[GO0]=1227899449set FR0[GO0]=1227894863set FP0[GO0]=0set FQ0[GO0]=1227900472set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JQ0=GO0set GO0=GO0+1set FT0[GO0]=1227901493set FR0[GO0]=1227901268set FP0[GO0]=0set FQ0[GO0]=1227901258set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JU0=GO0set GO0=GO0+1set FT0[GO0]=1227901270set FR0[GO0]=1227901269set FP0[GO0]=0set FQ0[GO0]=1227901241set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K00=GO0set GO0=GO0+1set FT0[GO0]=1227901271set FR0[GO0]=1227901267set FP0[GO0]=0set FQ0[GO0]=1227901257set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KI0=GO0set GO0=GO0+1set FT0[GO0]=1227901272set FR0[GO0]=1227901266set FP0[GO0]=0set FQ0[GO0]=1227901249set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K10=GO0set GO0=GO0+1set FT0[GO0]=1227901273set FR0[GO0]=1227901265set FP0[GO0]=0set FQ0[GO0]=1227901256set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KO0=GO0set GO0=GO0+1set FT0[GO0]=1227901274set FR0[GO0]=1227901259set FP0[GO0]=0set FQ0[GO0]=1227901255set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K20=GO0set GO0=GO0+1set FT0[GO0]=1227901488set FR0[GO0]=1227901260set FP0[GO0]=0set FQ0[GO0]=1227901254set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K30=GO0set GO0=GO0+1set FT0[GO0]=1227901489set FR0[GO0]=1227901261set FP0[GO0]=0set FQ0[GO0]=1227901253set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K40=GO0set GO0=GO0+1set FT0[GO0]=1227901490set FR0[GO0]=1227901264set FP0[GO0]=0set FQ0[GO0]=1227901252set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K50=GO0set GO0=GO0+1set FT0[GO0]=1227901491set FR0[GO0]=1227901263set FP0[GO0]=0set FQ0[GO0]=1227901251set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K60=GO0set GO0=GO0+1set FT0[GO0]=1227901492set FR0[GO0]=1227901262set FP0[GO0]=0set FQ0[GO0]=1227901250set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K70=GO0set GO0=GO0+1set FT0[GO0]=1227901238set FR0[GO0]=1227901239set FP0[GO0]=0set FQ0[GO0]=1227901240set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K80=GO0set GO0=GO0+1set FT0[GO0]=1227901530set FR0[GO0]=1227901523set FP0[GO0]=0set FQ0[GO0]=1227901522set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K90=GO0set GO0=GO0+1set FT0[GO0]=1227901744set FR0[GO0]=1227901524set FP0[GO0]=0set FQ0[GO0]=1227901516set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KA0=GO0set GO0=GO0+1set FT0[GO0]=1227901745set FR0[GO0]=1227901525set FP0[GO0]=0set FQ0[GO0]=1227901517set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KB0=GO0set GO0=GO0+1set FT0[GO0]=1227901746set FR0[GO0]=1227901527set FP0[GO0]=0set FQ0[GO0]=1227901518set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KC0=GO0set GO0=GO0+1set FT0[GO0]=1227901747set FR0[GO0]=1227901526set FP0[GO0]=0set FQ0[GO0]=1227901521set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KD0=GO0set GO0=GO0+1set FT0[GO0]=1227901748set FR0[GO0]=1227901529set FP0[GO0]=0set FQ0[GO0]=1227901520set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KE0=GO0set GO0=GO0+1set FT0[GO0]=1227901749set FR0[GO0]=1227901528set FP0[GO0]=0set FQ0[GO0]=1227901519set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KF0=GO0set GO0=GO0+1set FT0[GO0]=1227901769set FR0[GO0]=1227901768set FP0[GO0]=0set FQ0[GO0]=1227901770set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KG0=GO0set GO0=GO0+1set FT0[GO0]=1227902004set FR0[GO0]=1227902005set FP0[GO0]=0set FQ0[GO0]=1227902008set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JL0=GO0set GO0=GO0+1set FT0[GO0]=1227902003set FR0[GO0]=1227902000set FP0[GO0]=0set FQ0[GO0]=1227902009set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KH0=GO0set GO0=GO0+1set FT0[GO0]=1227902002set FR0[GO0]=1227902007set FP0[GO0]=0set FQ0[GO0]=1227902017set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KZ0=GO0set GO0=GO0+1set FT0[GO0]=1227902037set FR0[GO0]=1227902038set FP0[GO0]=0set FQ0[GO0]=1227902039set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KV0=GO0set GO0=GO0+1set FT0[GO0]=1227902257set FR0[GO0]=1227902256set FP0[GO0]=0set FQ0[GO0]=1227902258set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KW0=GO0set GO0=GO0+1set FT0[GO0]=1227902261set FR0[GO0]=1227902260set FP0[GO0]=0set FQ0[GO0]=1227902259set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KX0=GO0set GO0=GO0+1set FT0[GO0]=1227902262set FR0[GO0]=1227902263set FP0[GO0]=0set FQ0[GO0]=1227902264set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KY0=GO0set GO0=GO0+1set FT0[GO0]=1227902278set FR0[GO0]=1227902279set FP0[GO0]=0set FQ0[GO0]=1227902280set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KJ0=GO0set GO0=GO0+1set FT0[GO0]=1227902285set FR0[GO0]=1227902284set FP0[GO0]=0set FQ0[GO0]=1227902286set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KK0=GO0set GO0=GO0+1set FT0[GO0]=1227902287set FR0[GO0]=1227902288set FP0[GO0]=0set FQ0[GO0]=1227902289set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KL0=GO0set GO0=GO0+1set FT0[GO0]=1227902545set FR0[GO0]=1227902546set FP0[GO0]=0set FQ0[GO0]=1227902547set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KM0=GO0set GO0=GO0+1set FT0[GO0]=1227902548set FR0[GO0]=1227902549set FP0[GO0]=0set FQ0[GO0]=1227902550set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KN0=GO0set GO0=GO0+1set FT0[GO0]=1227902551set FR0[GO0]=1227902552set FP0[GO0]=0set FQ0[GO0]=1227902553set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KS0=GO0set GO0=GO0+1set FT0[GO0]=1227902554set FR0[GO0]=1227902768set FP0[GO0]=0set FQ0[GO0]=1227902769set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KT0=GO0set GO0=GO0+1set FT0[GO0]=1227902802set FR0[GO0]=1227902803set FP0[GO0]=0set FQ0[GO0]=1227902804set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KR0=GO0set GO0=GO0+1set FT0[GO0]=1227903047set FR0[GO0]=1227903048set FP0[GO0]=0set FQ0[GO0]=1227903049set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KP0=GO0set GO0=GO0+1set FT0[GO0]=1227903050set FR0[GO0]=1227903051set FP0[GO0]=0set FQ0[GO0]=1227903052set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KQ0=GO0set GO0=GO0+1set FT0[GO0]=1227903056set FR0[GO0]=1227903057set FP0[GO0]=0set FQ0[GO0]=1227903058set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KU0=GO0set GO0=GO0+1set FT0[GO0]=1227903059set FR0[GO0]=1227903060set FP0[GO0]=0set FQ0[GO0]=1227903061set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L00=GO0set GO0=GO0+1set FT0[GO0]=1227903062set FR0[GO0]=1227903063set FP0[GO0]=0set FQ0[GO0]=1227903064set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set LI0=GO0set GO0=GO0+1set FT0[GO0]=1227903280set FR0[GO0]=1227903282set FP0[GO0]=0set FQ0[GO0]=1227903284set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set LO0=GO0set GO0=GO0+1set FT0[GO0]=1227903281set FR0[GO0]=1227903283set FP0[GO0]=0set FQ0[GO0]=1227903285set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L10=GO0set GO0=GO0+1set FT0[GO0]=1227903308set FR0[GO0]=1227903309set FP0[GO0]=0set FQ0[GO0]=1227903310set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L20=GO0set GO0=GO0+1set FT0[GO0]=1227903311set FR0[GO0]=1227903312set FP0[GO0]=0set FQ0[GO0]=1227903313set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L30=GO0set GO0=GO0+1set FT0[GO0]=1227903562set FR0[GO0]=1227903563set FP0[GO0]=0set FQ0[GO0]=1227903564set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L70=GO0set GO0=GO0+1set FT0[GO0]=1227903565set FR0[GO0]=1227903566set FP0[GO0]=0set FQ0[GO0]=1227903567set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L80=GO0endfunctionfunction InitTrig_Aghanims_Scepter_Definitions takes nothing returns nothingcall CHO()endfunctionfunction CZO takes unit P7I returns nothinglocal real xlocal real yif TII(GetOwningPlayer(P7I))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifcall IssuePointOrder(P7I,"move",x,y)endfunctionfunction CVO takes nothing returns nothinglocal item BA1=GetEnumItem()if GetWidgetLife(BA1)>0 and GetItemPlayer(BA1)==LG0 and LV0==0 and IsItemVisible(BA1)==true thenset LV0=LV0+1call UnitAddItem(LH0,BA1)endifset BA1=nullendfunctionfunction CWO takes nothing returns nothinglocal item BA1=GetEnumItem()if GetWidgetLife(BA1)>0 and GetItemPlayer(BA1)==LG0 and IsItemVisible(BA1)==true thencall UnitAddItem(LZ0,BA1)endifset BA1=nullendfunctionfunction CXO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit BPO=(LoadUnitHandle(LY,(S5I),(92)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local rect r=Rect(x-300,y-300,x+300,y+300)if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)set LG0=pset LH0=P7Iset LZ0=BPOcall EnumItemsInRect(r,Condition(function N1I),function CWO)elseif GetTriggerEvalCount(t)>9 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set LG0=pset LH0=P7Iset LZ0=BPOcall EnumItemsInRect(r,Condition(function N1I),function CWO)elseset LG0=pset LH0=P7Iset LV0=0call EnumItemsInRect(r,Condition(function N1I),function CVO)endifendifcall RemoveRect(r)set t=nullset P7I=nullset BPO=nullset r=nullreturn falseendfunctionfunction CYO takes unit BPO,unit P7I returns nothinglocal player p=GetOwningPlayer(P7I)local integer ilocal item BA1local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(BPO)local real y=GetUnitY(BPO)local integer E81if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)thenset x=GetUnitX(P7I)set y=GetUnitY(P7I)endifcall TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function CXO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(92),(BPO))call SavePlayerHandle(LY,(S5I),(54),(p))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set i=0loopexitwhen i>5set BA1=UnitItemInSlot(BPO,i)set E81=EB1(BA1)if BA1!=null and GetItemPlayer(BA1)==p and EG1(BA1)==false and(E81!=HZ0 and E81!=HV0 and E81!=HW0 and E81!=HX0 and E81!=HY0)thencall UnitRemoveItem(BPO,BA1)call SetItemPosition(BA1,x,y)endifset i=i+1endloopset t=nullset BA1=nullendfunctionfunction CJO takes unit B71 returns booleanlocal integer CKO=GetUnitCurrentOrder(B71)return(CKO==0)or(CKO==851973)or(CKO==851975)or(CKO==851987)or(CKO==851993)endfunctionfunction CLO takes trigger t returns nothinglocal integer S5I=GetHandleId(t)local unit BPO=(LoadUnitHandle(LY,(S5I),(92)))local unit SFI=(LoadUnitHandle(LY,(S5I),(2)))local real xlocal real ylocal real CMOlocal real CNOlocal real CSOlocal real CTOlocal real CROlocal real QWIlocal real CPOlocal real CQO=GetUnitX(SFI)local real CUO=GetUnitY(SFI)if(CJO(SFI)==false)thenset x=GetUnitX(SFI)set y=GetUnitY(SFI)set CTO=(LoadReal(LY,(S5I),(677)))set CRO=(LoadReal(LY,(S5I),(678)))call SaveReal(LY,(S5I),(677),((x)*1.0))call SaveReal(LY,(S5I),(678),((y)*1.0))set CSO=Atan2(y-CRO,x-CTO)set CMO=SquareRoot((x-CTO)*(x-CTO)+(y-CRO)*(y-CRO))/0.2set CNO=GetUnitMoveSpeed(BPO)set QWI=QNI(GetUnitX(SFI),GetUnitY(SFI),GetUnitX(BPO),GetUnitY(BPO))set CPO=RAbsBJ(CSO*bj_RADTODEG-GetUnitFacing(BPO))if(QWI<CNO-CMO and CNO>CMO)or(QWI<RMaxBJ(CNO,CMO)and CPO>=90)thenelseset CQO=x+CMO*Cos(CSO)set CUO=y+CMO*Sin(CSO)endifendifcall SaveInteger(LY,(S5I),(679),(1))call IssuePointOrder(BPO,"move",CQO,CUO)set BPO=nullset SFI=nullset t=nullendfunctionfunction D0O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit BPO=(LoadUnitHandle(LY,(S5I),(92)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real xlocal real ylocal integer ilocal player p=GetOwningPlayer(P7I)local item BA1if GetTriggerEventId()==EVENT_WIDGET_DEATH thenif GetTriggerUnit()==P7I thencall CZO(BPO)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER thenif(LoadInteger(LY,(S5I),(679)))==1 thencall SaveInteger(LY,(S5I),(679),(0))elseif GetIssuedOrderId()!=852100 and GetIssuedOrderId()!=852090 thencall S0I(t)endifelseif QLI(BPO,P7I)<300 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call CYO(BPO,P7I)call CZO(BPO)elsecall CLO(t)endifendifset t=nullset BPO=nullset P7I=nullset BA1=nullreturn falseendfunctionfunction DIO takes unit SFI,boolean D1O returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit BPO=GetSellingUnit()local integer DOO=(LoadInteger(LY,(GetHandleId(BPO)),(8000)))if SFI!=null thenif SFI!=(LoadUnitHandle(LY,(GetHandleId(BPO)),(8002+DOO)))and D1O thenset DOO=DOO+1call SaveInteger(LY,(GetHandleId(BPO)),(8000),(DOO))call SaveUnitHandle(LY,(GetHandleId(BPO)),(8002+DOO),(SFI))endifcall SaveReal(LY,(S5I),(677),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(678),((GetUnitY(SFI))*1.0))call IssueTargetOrder(BPO,"move",SFI)call TriggerRegisterDeathEvent(t,BPO)call TriggerRegisterDeathEvent(t,SFI)call TriggerRegisterUnitEvent(t,BPO,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,BPO,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,BPO,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function D0O))call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveUnitHandle(LY,(S5I),(92),(BPO))endifset t=nullset BPO=nullendfunctionfunction D2O takes nothing returns nothinglocal item BA1=GetEnumItem()local unit u=M80local player p=GetOwningPlayer(u)local integer id=GetPlayerId(p)if GetWidgetLife(BA1)>0 and GetItemPlayer(BA1)==p and IsItemVisible(BA1)==true thencall SetItemPosition(BA1,D40[id],D50[id])call UnitAddItem(LX0,BA1)endifset BA1=nullset u=nullset p=nullendfunctionfunction D3O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(53)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))set M80=uset LX0=P7Iif TII(GetOwningPlayer(M80))thencall EnumItemsInRect(G5,Condition(function N1I),function D2O)elsecall EnumItemsInRect(H5,Condition(function N1I),function D2O)endifif GetTriggerEvalCount(t)==3 thencall KillUnit(u)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset u=nullreturn falseendfunctionfunction D4O takes unit SFI returns nothinglocal unit u=GetSoldUnit()local integer i=0local item BA1local integer id=GetPlayerId(GetOwningPlayer(u))local region r=CreateRegion()local trigger tlocal integer S5Ilocal unit P7I=GetSellingUnit()if TII(GetOwningPlayer(u))thencall RegionAddRect(r,G5)elsecall RegionAddRect(r,H5)endifif IsUnitInRegion(r,P7I)thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function D3O))call SaveUnitHandle(LY,(S5I),(53),(u))call SaveUnitHandle(LY,(S5I),(2),(P7I))loopexitwhen i>5set BA1=UnitItemInSlot(P7I,i)if E91(EB1(BA1))==false and EB1(BA1)!=VL0 and EG1(BA1)==false thencall UnitRemoveItemFromSlot(P7I,i)if IsUnitInRegion(r,P7I)and IsPlayerAlly(GetItemPlayer(BA1),GetOwningPlayer(P7I))==true thenset id=GetPlayerId(GetItemPlayer(BA1))call SetItemPosition(BA1,D40[id],D50[id])endifendifset i=i+1endloopendifcall RemoveRegion(r)set u=nullset r=nullendfunctionfunction D5O takes unit u returns stringlocal string s=GetObjectName(1848657487)set s=FS1(s,"$hero",C0[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r")return sendfunctionfunction D6O takes unit P7I returns booleanif GetOwningPlayer(P7I)!=GetLocalPlayer()thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,D5O(K1[GetPlayerId(GetOwningPlayer(P7I))]))endifreturn falseendfunctionfunction D7O takes nothing returns nothingif GetUnitTypeId(GetSoldUnit())==1747990581 thenif K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null and IC1(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==false thencall DIO(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],true)endifcall KillUnit(GetSoldUnit())elseif GetUnitTypeId(GetSoldUnit())==1747993174 thenif K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null thencall D4O(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])endifcall KillUnit(GetSoldUnit())elseif GetUnitTypeId(GetSoldUnit())==1747993669 thenif K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null thencall DIO((LoadUnitHandle(LY,(GetHandleId(GetSellingUnit())),(8002+(LoadInteger(LY,(GetHandleId(GetSellingUnit())),(8000)))-1))),false)endifcall KillUnit(GetSoldUnit())elseif GZ1(GetUnitTypeId(GetSoldUnit()))thenif K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null thenif IC1(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==true and GetOwningPlayer(GetSoldUnit())==GetOwningPlayer(GetSellingUnit())and((LoadInteger(LY,(GetHandleId((K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]))),((4304))))==1)==false and(XS[GetPlayerId((GetOwningPlayer(GetSoldUnit())))]==false)thencall D6O(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])set LW0=truecall ReviveHero(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),true)set LW0=falsecall SetUnitState(K1[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],UNIT_STATE_MANA,10000)set EL0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]=IMaxBJ(0,EL0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]-WS[GV1(GetHeroLevel(K1[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])call GN1(GetOwningPlayer(GetSoldUnit()))elsecall SetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD)+WS[GV1(GetHeroLevel(K1[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])if(XS[GetPlayerId((GetOwningPlayer(GetSoldUnit())))]==false)==false thencall PZI(GetOwningPlayer(GetSoldUnit()),GetObjectName(1848659508))endifendifendifcall KillUnit(GetSoldUnit())endifendfunctionfunction D9O takes player MDI,unit SWI,integer DAO,integer i0,integer i1,integer i2,integer i3,integer i4,integer i5 returns nothinglocal item BA1call DisableTrigger(MO0)if i0>0 thenset BA1=UnitItemInSlot(SWI,0)call EL1(BA1)endifif i1>0 thenset BA1=UnitItemInSlot(SWI,1)call EL1(BA1)endifif i2>0 thenset BA1=UnitItemInSlot(SWI,2)call EL1(BA1)endifif i3>0 thenset BA1=UnitItemInSlot(SWI,3)call EL1(BA1)endifif i4>0 thenset BA1=UnitItemInSlot(SWI,4)call EL1(BA1)endifif i5>0 thenset BA1=UnitItemInSlot(SWI,5)call EL1(BA1)endifset BA1=UnitAddItemById(SWI,FR0[DAO])call SetItemPlayer(BA1,MDI,true)call SetItemUserData(BA1,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",SWI,"origin"))if EB1(BA1)==WM0 thencall SetItemCharges(BA1,8)endifcall EnableTrigger(MO0)if IsPlayerAlly(GetLocalPlayer(),MDI)==true thenif DAO==VD0 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(MDI)]+(D80[GetPlayerId((MDI))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")elseif DAO==W30 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(MDI)]+(D80[GetPlayerId((MDI))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")endifendifset BA1=nullendfunctionfunction DBO takes player p,unit SWI,integer E81 returns booleanlocal integer ilocal integer xlocal integer ylocal integer array DCOlocal boolean array DDOlocal integer array DEOlocal boolean array DFOlocal boolean array FW1local integer array FB1local player MDIlocal integer DGO=1local integer klocal player array DHOlocal integer mlocal item DZOlocal item DVOlocal item DWOlocal item DXOlocal item DYOlocal item DJOlocal player DKOlocal player DLOlocal player DMOlocal player DNOlocal player DSOlocal player DTOlocal integer DROlocal integer DPOlocal integer DQOlocal integer DUOlocal integer E0Olocal integer EIOlocal integer E1Olocal integer EOOlocal integer E2Olocal integer E3Olocal integer E4Olocal integer E5Olocal boolean E6O=falselocal boolean E7O=trueset DZO=UnitItemInSlot(SWI,0)set DVO=UnitItemInSlot(SWI,1)set DWO=UnitItemInSlot(SWI,2)set DXO=UnitItemInSlot(SWI,3)set DYO=UnitItemInSlot(SWI,4)set DJO=UnitItemInSlot(SWI,5)set DKO=GetItemPlayer(DZO)set DLO=GetItemPlayer(DVO)set DMO=GetItemPlayer(DWO)set DNO=GetItemPlayer(DXO)set DSO=GetItemPlayer(DYO)set DTO=GetItemPlayer(DJO)set DRO=GetItemUserData(DZO)set DPO=GetItemUserData(DVO)set DQO=GetItemUserData(DWO)set DUO=GetItemUserData(DXO)set E0O=GetItemUserData(DYO)set EIO=GetItemUserData(DJO)set E1O=EB1(DZO)set EOO=EB1(DVO)set E2O=EB1(DWO)set E3O=EB1(DXO)set E4O=EB1(DYO)set E5O=EB1(DJO)if(GetPlayerSlotState((p))==PLAYER_SLOT_STATE_LEFT)thenset DGO=5set E6O=trueendifset DHO[1]=pif E6O thenset k=2set m=1loopexitwhen k>DGOif TII(p)thenif p!=BO[m]thenset DHO[k]=BO[m]set k=k+1endifelseif p!=CO[m]thenset DHO[k]=CO[m]set k=k+1endifendifset m=m+1endloopendifset k=1loopexitwhen k>DGOset MDI=DHO[k]set i=0if DZO!=null and DRO==1 and(DKO==MDI or ZL or(GetPlayerSlotState((DKO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=E1Oelseset DCO[i+1]=0endifset i=1if DVO!=null and DPO==1 and(DLO==MDI or ZL or(GetPlayerSlotState((DLO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=EOOelseset DCO[i+1]=0endifset i=2if DWO!=null and DQO==1 and(DMO==MDI or ZL or(GetPlayerSlotState((DMO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=E2Oelseset DCO[i+1]=0endifset i=3if DXO!=null and DUO==1 and(DNO==MDI or ZL or(GetPlayerSlotState((DNO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=E3Oelseset DCO[i+1]=0endifset i=4if DYO!=null and E0O==1 and(DSO==MDI or ZL or(GetPlayerSlotState((DSO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=E4Oelseset DCO[i+1]=0endifset i=5if DJO!=null and EIO==1 and(DTO==MDI or ZL or(GetPlayerSlotState((DTO))==PLAYER_SLOT_STATE_LEFT)==true)thenset DCO[i+1]=E5Oelseset DCO[i+1]=0endifset DCO[0]=E81set i=1loopexitwhen i>(JC0)set DEO[0]=J50[i]set DEO[1]=J60[i]set DEO[2]=J70[i]set DEO[3]=J80[i]set DEO[4]=J90[i]if E7O thenset DFO[0]=trueset DFO[1]=trueset DFO[2]=trueset DFO[3]=trueset DFO[4]=trueset DFO[5]=trueset DFO[6]=trueset DDO[0]=trueset DDO[1]=trueset DDO[2]=trueset DDO[3]=trueset DDO[4]=trueset DDO[5]=trueset DDO[6]=trueset FB1[0]=0set FB1[1]=0set FB1[2]=0set FB1[3]=0set FB1[4]=0set FB1[5]=0set FB1[6]=0set E7O=falseendifset FW1[0]=falseset FW1[1]=falseset FW1[2]=falseset FW1[3]=falseset FW1[4]=falseset x=0loopexitwhen x==5if DEO[x]==0 thenset FW1[x]=trueelseset y=0loopexitwhen y==7if DCO[y]==DEO[x]and DDO[y]and DFO[x]thenset DDO[y]=falseset DFO[x]=falseset FW1[x]=trueset FB1[y]=1set y=7set E7O=trueelseset y=y+1endifendloopendifif FW1[x]==true thenset x=x+1elseset x=5endifendloopif FW1[0]and FW1[1]and FW1[2]and FW1[3]and FW1[4]thencall D9O(MDI,SWI,JB0[i],FB1[1],FB1[2],FB1[3],FB1[4],FB1[5],FB1[6])set i=JC0+2elseset i=i+1endifendloopset KK=FB1[0]==1if i==(JC0+2)thenset DZO=nullset DVO=nullset DWO=nullset DXO=nullset DYO=nullset DJO=nullreturn trueendifset k=k+1endloopset DZO=nullset DVO=nullset DWO=nullset DXO=nullset DYO=nullset DJO=nullreturn falseendfunctionfunction E8O takes player MDI,unit SWI,integer E81 returns booleanlocal integer i=1local boolean FB1set KK=falseset FB1=DBO(MDI,SWI,E81)return FB1endfunctionfunction E9O takes nothing returns booleanif IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GK))==true and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GK),ALLIANCE_SHARED_CONTROL)and GetOwningPlayer(GK)!=GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and IC1(GetFilterUnit())==false thenif RYI(GetFilterUnit())==true thenset UJ=UJ+1set HK=GetFilterUnit()endifendifreturn falseendfunctionfunction EAO takes nothing returns booleanif IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GK))==true and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitIllusion(GetFilterUnit())==false and IC1(GetFilterUnit())==false thenif GetOwningPlayer(GK)==GetOwningPlayer(GetFilterUnit())thenif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true thenif GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 thenset HK=GetFilterUnit()endifelseif IsUnitType(HK,UNIT_TYPE_HERO)==false thenset HK=GetFilterUnit()endifendifendifreturn falseendfunctionfunction EBO takes unit SWI,integer ECO returns unitlocal group g=NTI()set GK=SWIset HK=nullcall GroupEnumUnitsInRange(g,GetUnitX(ZK),GetUnitY(ZK),1300+ECO,Condition(function EAO))if HK==null thenset UJ=0call NSI(g)set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(ZK),GetUnitY(ZK),1100+ECO,Condition(function E9O))if UJ>1 thenset HK=nullendifendifcall NSI(g)set g=nullreturn HKendfunctionfunction EDO takes player MDI,unit SWI,unit EEO,integer E81,real x,real y,integer EY1,integer EFO returns nothinglocal unit EGOlocal item EJ1set ZK=EEOif GetUnitPointValue(SWI)==200 thenset EGO=EBO(SWI,0)if EGO==null thenset EGO=EBO(SWI,300)endifelseset EGO=SWIendifif EGO==null or E8O(MDI,EGO,E71(E81))==false or KK==false thenif EV1(E71(E81))thenif EQ1(EGO)==0 or EGO==null thencall EK1(FT0[E81],x,y,MDI,true,EY1)elseset EJ1=UnitAddItemById(EGO,FR0[E81])call SetItemCharges(EJ1,EY1)call SetItemPlayer(EJ1,MDI,true)call SetItemUserData(EJ1,EFO)endifelseif EZ1(E71(E81))thenif EGO==null or(EQ1(EGO)==0 and ES1(EGO,FR0[E81])==null)thencall EK1(FT0[E81],x,y,MDI,true,F51(E81))elseset EJ1=CreateItem(FT0[E81],x,y)call SetItemPlayer(EJ1,MDI,true)call SetItemUserData(EJ1,EFO)call SetItemCharges(EJ1,F51(E81))call UnitAddItem(EGO,EJ1)endifelseif EQ1(EGO)==0 or EGO==null thencall EK1(FT0[E81],x,y,MDI,false,0)elseset EJ1=UnitAddItemById(EGO,FR0[E81])call SetItemPlayer(EJ1,MDI,true)call SetItemUserData(EJ1,0)endifendifelseif IsUnitType(EGO,UNIT_TYPE_HERO)==true thenif EFO==0 thencall FL1("PUI_"+I2S(GetPlayerId(GetOwningPlayer(EGO))),FR0[E71(E81)])endifendifendifset EGO=nullset EJ1=nullendfunctionfunction EHO takes player p,integer E81 returns nothinglocal integer i=GetPlayerId(p)if E81==Z50 thenset E[i]=E[i]+1elseif E81==Z70 thenset E[i]=E[i]+1elseif E81==Z80 thenset E[i]=E[i]+3elseif E81==ZA0 thenset E[i]=E[i]+2set F[i]=F[i]+2elseif E81==ZB0 thenset E[i]=E[i]+2set F[i]=F[i]+2elseif E81==ZC0 thenset E[i]=E[i]+1elseif E81==ZG0 thenset E[i]=E[i]+2elseif E81==Z60 thenset E[i]=E[i]+2elseif E81==ZH0 thenset E[i]=E[i]+2endifendfunctionfunction EZO takes unit EVO,unit EWO returns booleanlocal integer E81if GetUnitTypeId(EWO)==1311788365 thenreturn trueendifif(EVO==BL0 or EVO==BY0)and IsUnitAlly(EWO,CO[0])thenreturn falseelseif(EVO==II0 or EVO==QQ)and IsUnitAlly(EWO,BO[0])thenreturn falseendifset E81=FO1(EWO)if E81==ZA0 or E81==GZ0 or E81==ZZ0 thenreturn trueendifreturn falseendfunctionfunction EXO takes unit EEO,unit EYO returns realif EEO==QQ or EEO==UQ or EEO==I00 or EEO==II0 or EEO==I10 or EEO==IO0 or EEO==I20 or EEO==I30 or EEO==I40 or EEO==I50 thenreturn D40[GetPlayerId(GetOwningPlayer(EYO))]elseif EEO==BY0 or EEO==BJ0 or EEO==BK0 or EEO==BL0 or EEO==BM0 or EEO==BN0 or EEO==BS0 or EEO==BT0 or EEO==BR0 or EEO==BP0 thenreturn D40[GetPlayerId(GetOwningPlayer(EYO))]elseif EEO==VY or EEO==KZ thenreturn-7133.0elseif EEO==WY or EEO==XY thenreturn 7207.0endifreturn GetUnitX(EYO)endfunctionfunction EJO takes unit EEO,unit EYO returns realif EEO==QQ or EEO==UQ or EEO==I00 or EEO==II0 or EEO==I10 or EEO==IO0 or EEO==I20 or EEO==I30 or EEO==I40 or EEO==I50 thenreturn D50[GetPlayerId(GetOwningPlayer(EYO))]elseif EEO==BY0 or EEO==BJ0 or EEO==BK0 or EEO==BL0 or EEO==BM0 or EEO==BN0 or EEO==BS0 or EEO==BT0 or EEO==BR0 or EEO==BP0 thenreturn D50[GetPlayerId(GetOwningPlayer(EYO))]elseif EEO==VY or EEO==KZ thenreturn 4317.0elseif EEO==WY or EEO==XY thenreturn-4243.0endifreturn GetUnitY(EYO)endfunctionfunction EKO takes unit EEO,unit EYO returns realif EEO==QQ or EEO==UQ or EEO==I00 or EEO==II0 or EEO==I10 or EEO==IO0 or EEO==I20 or EEO==I30 or EEO==I40 or EEO==I50 thenreturn GetRectCenterX(O4)elseif EEO==BY0 or EEO==BJ0 or EEO==BK0 or EEO==BL0 or EEO==BM0 or EEO==BN0 or EEO==BS0 or EEO==BT0 or EEO==BR0 or EEO==BP0 thenreturn GetRectCenterX(S3)endifreturn GetUnitX(EYO)endfunctionfunction ELO takes unit EEO,unit EYO returns realif EEO==QQ or EEO==UQ or EEO==I00 or EEO==II0 or EEO==I10 or EEO==IO0 or EEO==I20 or EEO==I30 or EEO==I40 or EEO==I50 thenreturn GetRectCenterY(O4)elseif EEO==BY0 or EEO==BJ0 or EEO==BK0 or EEO==BL0 or EEO==BM0 or EEO==BN0 or EEO==BS0 or EEO==BT0 or EEO==BR0 or EEO==BP0 thenreturn GetRectCenterY(S3)endifreturn GetUnitY(EYO)endfunctionfunction UnitItem_Delayed_Expire takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local unit u=(LoadUnitHandle(LY,(S5I),(53)))local unit s=(LoadUnitHandle(LY,(S5I),(94)))local integer E81=(LoadInteger(LY,(S5I),(93)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer EY1=(LoadInteger(LY,(S5I),(76)))call EDO(p,u,s,E71(E81),x,y,EY1,0)call ShowUnit(u,false)call UnitApplyTimedLife(u,1112820806,2)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset p=nullset u=nullreturn falseendfunctionfunction EMO takes nothing returns nothinglocal unit u=GetSoldUnit()local player p=GetOwningPlayer(u)local integer E81=FO1(u)local real xlocal real yif EZO(GetSellingUnit(),u)thencall PZI(p,GetObjectName(1848652359))if IsUnitAlly(u,BO[0])thenset p=CO[0]elseset p=BO[0]endifset x=EKO(GetSellingUnit(),u)set y=ELO(GetSellingUnit(),u)call EK1(FT0[FO1(u)],x,y,p,true,F51(FO1(u)))elsecall EHO(p,E71(E81))if FR0[E81]==0 thencall PZI(p,GetObjectName(1848652360))elseset x=EXO(GetSellingUnit(),u)set y=EJO(GetSellingUnit(),u)if E81==ZG0 thencall EDO(p,u,GetSellingUnit(),E71(E81),x,y,2,0)elsecall EDO(p,u,GetSellingUnit(),E71(E81),x,y,0,0)endifendifendifcall UnitAddAbility(u,1097625443)call ShowUnit(u,false)call UnitApplyTimedLife(u,1112820806,2)set u=nullset p=nullendfunctionfunction ENO takes nothing returns booleanif SS==false thenif GetUnitPointValue(GetSoldUnit())>=200 thencall EMO()if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetSoldUnit()))or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thenif GetUnitTypeId(GetSoldUnit())==1747989062 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658005)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747989329 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658759)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747990326 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658767)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747989059 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658768)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747989060 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658769)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747993153 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658772)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747988807 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659010)+"|r")elseif GetUnitTypeId(GetSoldUnit())==1747993651 thencall PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,255,255,255,false)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659024)+"|r")endifendifelsecall D7O()endifelseendifreturn falseendfunctionfunction ETO takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return id==1164277353 or id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517endfunctionfunction ERO takes unit SFI,item BA1 returns nothinglocal unit u=SFIlocal integer EE1=GetUnitTypeId(u)local integer E81=EC1(BA1)if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==true or IsUnitType(u,UNIT_TYPE_HERO)==false thenif E81==WE0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[WD0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HM0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HL0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==H80 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[H70])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==X40 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[X30])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==WW0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[WV0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==G30 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[G20])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==VN0 thenif ETO(u)==false thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[VM0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifelseif E81==VM0 thenif ETO(u)==true thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[VN0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifelseif E81==HR0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HT0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifelseif E81==WD0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[WE0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HL0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HM0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==H70 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[H80])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==X30 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[X40])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==WV0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[WW0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==G20 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[G30])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==VM0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[VN0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HT0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HR0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifendifset u=nullendfunctionfunction EPO takes unit SFI,item BA1 returns nothinglocal unit u=SFIlocal integer EE1=GetUnitTypeId(u)local integer E81=EC1(BA1)if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false or IsUnitType(u,UNIT_TYPE_HERO)==false thenif E81==WE0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[WD0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HM0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[HL0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==H80 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[H70])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==X40 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[X30])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==WW0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[WV0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==G30 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[G20])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==VN0 thenif ETO(u)==false thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[VM0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifelseif E81==HR0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[HT0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifelseif E81==WD0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[WE0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HL0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[HM0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==H70 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[H80])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==X30 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[X40])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==WV0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[WW0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==G20 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[G30])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==VM0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[VN0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HT0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[HR0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifendifset u=nullendfunctionfunction EQO takes unit SFI returns nothinglocal integer i=0local item BA1call DisableTrigger(LY0)loopexitwhen i>5set BA1=UnitItemInSlot(SFI,i)if BA1!=null thencall EPO(SFI,BA1)endifset i=i+1endloopcall EnableTrigger(LY0)set BA1=nullendfunctionfunction EUO takes unit SFI,item BA1 returns booleanlocal unit u=SFIlocal integer EE1=GetUnitTypeId(u)local integer E81=EB1(BA1)local real xlocal real ylocal boolean F0O=truelocal integer FIO=(LoadInteger(LY,(GetHandleId(GetOwningPlayer(u))),(4345)))local integer F1O=0local integer FF1if FIO==0 thenset FIO=10endifset x=GetUnitX(u)set y=GetUnitY(u)if(E81==VZ0 and FIO<10)or(E81==VV0 and FIO<9)or(E81==VW0 and FIO<8)or(E81==VX0 and FIO<7)or(E81==VY0 and FIO<6)or(E81==VJ0 and FIO<5)or(E81==VK0 and FIO<4)thenif FIO==10 thenset F1O=VZ0elseif FIO==9 thenset F1O=VV0elseif FIO==8 thenset F1O=VW0elseif FIO==7 thenset F1O=VX0elseif FIO==6 thenset F1O=VY0elseif FIO==5 thenset F1O=VJ0elseif FIO==4 thenset F1O=VK0endifif F1O>0 thenset FF1=A11(u,BA1)set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=FD1(u,FR0[F1O],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifendifif E81==HD0 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))call PEI(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HH0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif E81==V40 and GetItemCharges(BA1)==0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[V60])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif E81==HP0 and GetItemCharges(BA1)==0 thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[HQ0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifcall DisableTrigger(LY0)if(E81==ZM0 or E81==ZL0 or E81==ZN0)and(EM1(u,FR0[ZM0],BA1)!=null or EM1(u,FR0[ZL0],BA1)!=null or EM1(u,FR0[ZN0],BA1)!=null)thencall PZI(GetOwningPlayer(u),GetObjectName(1848652364))set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=CreateItem(FT0[E81],x,y)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif(E81==HL0)and(EM1(u,FR0[HL0],BA1)!=null or EM1(u,FR0[HM0],BA1)!=null)thencall PZI(GetOwningPlayer(u),GetObjectName(1848657996))set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=CreateItem(FT0[E81],x,y)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set F0O=falseendifif F0O and(E81==HM0)and(EM1(u,FR0[HL0],BA1)!=null or EM1(u,FR0[HM0],BA1)!=null)thencall PZI(GetOwningPlayer(u),GetObjectName(1848657996))set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=CreateItem(FT0[E81],x,y)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set F0O=falseendifif(E81==WT0 or E81==WS0 or E81==WP0 or E81==WR0)and(EM1(u,FR0[WT0],BA1)!=null or EM1(u,FR0[WS0],BA1)!=null or EM1(u,FR0[WP0],BA1)!=null or EM1(u,FR0[WR0],BA1)!=null)thencall PZI(GetOwningPlayer(u),GetObjectName(1848652355))set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=CreateItem(FT0[E81],x,y)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif(E81==W30 and IsPlayerEnemy(GetItemPlayer(BA1),GetOwningPlayer(u)))thenset JK=GetItemPlayer(BA1)call EL1(BA1)set VK=UnitAddItemById(u,FR0[W40])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif(E81==VL0)and(RXI(u)or B61(u))thenif RXI(u)thencall PZI(GetOwningPlayer(u),GetObjectName(1848652363))endifset JK=GetItemPlayer(BA1)set UJ=GetItemCharges(BA1)call RemoveItem(BA1)if E81==VL0 thenset VK=CreateItem(FT0[E81],GetRectCenterX(P4),GetRectCenterY(P4))endifcall SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)if E81==VL0 thencall SetItemCharges(VK,UJ)endifendifif B61(u)and E81==Z00 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=UnitAddItemById(u,FR0[ZI0])call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif F0O and(E81==HL0 or E81==HM0)and(EE1==1211119187)thencall PZI(GetOwningPlayer(u),GetObjectName(1848652362))set JK=GetItemPlayer(BA1)call RemoveItem(BA1)set VK=CreateItem(FT0[E81],x,y)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set F0O=falseendifif(E81==VZ0 or E81==VV0 or E81==VW0 or E81==VX0 or E81==VY0 or E81==VJ0)and EE1==1429221443 thencall DisplayTimedTextToPlayer(GetOwningPlayer(u),0,U2,10,"|c00ff0303"+GetObjectName(1848652368)+"|r")endifcall EnableTrigger(LY0)if F0O thencall ERO(SFI,BA1)endifset u=nullset BA1=nullreturn falseendfunctionfunction FOO takes integer E81 returns booleanreturn E81==V90 or E81==WR0 or E81==WP0 or E81==WU0 or E81==V80 or E81==WS0 or E81==WT0 or E81==WQ0 or E81==GZ0 or E81==GV0 or E81==ZS0 or E81==ZT0endfunctionfunction F2O takes integer E81 returns booleanreturn E81==GZ0 or E81==GV0endfunctionfunction F3O takes unit SFI,item BA1 returns booleanlocal integer FE1=0local item AO1=BA1local integer E81=F01(AO1)local integer F4O=0local boolean FB1=falselocal integer F5O=FI1(AO1)local boolean F6O=falseif IsUnitType(SFI,UNIT_TYPE_HERO)==true thenif E81==V90 thenset F4O=V80endifif E81==ZT0 thenset F4O=ZS0endifif E81==WR0 thenset F4O=WS0endifif E81==WP0 thenset F4O=WT0endifif E81==WU0 thenset F4O=WQ0endifif E81==GV0 thenset F4O=GZ0endifif F5O==GV0 thenset F4O=GZ0set F6O=trueendifif F4O!=0 thenset JK=GetItemPlayer(AO1)call EL1(AO1)if F6O thenset VK=UnitAddItemById(SFI,FQ0[F4O])elseset VK=UnitAddItemById(SFI,FR0[F4O])endifcall SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set FB1=trueendifelseif E81==V80 thenset F4O=V90endifif E81==ZS0 thenset F4O=ZT0endifif E81==WS0 thenset F4O=WR0endifif E81==WT0 thenset F4O=WP0endifif E81==WQ0 thenset F4O=WU0endifif E81==GZ0 thenset F4O=GV0endifif F5O==GZ0 thenset F4O=GV0set F6O=trueendifif F4O!=0 thenset JK=GetItemPlayer(AO1)call EL1(AO1)if F6O thenset VK=UnitAddItemById(SFI,FQ0[F4O])elseset VK=UnitAddItemById(SFI,FR0[F4O])endifcall SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set FB1=trueendifendifset AO1=nullreturn FB1endfunctionfunction F7O takes unit SFI,item BA1 returns booleanif FOO(F01(BA1))or F2O(FI1(BA1))thenreturn F3O(SFI,BA1)endifreturn falseendfunctionfunction ModeTT_ItemHack_End takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer id=(LoadInteger(LY,(S5I),(34)))set AII[id]=falsecall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction F8O takes unit u returns nothinglocal integer id=GetPlayerId(GetOwningPlayer(u))set AII[id]=trueendfunctionfunction F9O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit B71=(LoadUnitHandle(LY,(S5I),(26)))local integer FAO=(LoadInteger(LY,(S5I),(97)))local integer E81=(LoadInteger(LY,(S5I),(93)))local boolean FBO=(LoadBoolean(LY,(S5I),(95)))local item BA1local player p=GetOwningPlayer(B71)local player FCOlocal integer EY1local boolean EX1=falselocal item EJ1local integer FDOlocal integer FEOlocal integer newChargeslocal item FFOlocal integer targetCountlocal item FGOlocal boolean FHO=falsecall DisableTrigger(MO0)if FBO thenset FGO=nullset FCO=(LoadPlayerHandle(LY,(S5I),(54)))set EY1=(LoadInteger(LY,(S5I),(76)))elseset BA1=(LoadItemHandle(LY,(S5I),(96)))set FGO=BA1set FCO=GetItemPlayer(BA1)set EY1=GetItemCharges(BA1)endifif FBO==false and BA1==null thencall FlushChildHashtable(LY,(S5I))call S0I(t)call EnableTrigger(MO0)set t=nullset B71=nullset p=nullreturn falseendifif FAO==1 thenif p!=FCO and GetUnitTypeId(B71)==1852010352 thenif EZ1(E71(E81))or EV1(E71(E81))thenset EX1=trueendifif IsPlayerEnemy(p,FCO)thencall EK1(FT0[E81],D40[GetPlayerId(p)],D50[GetPlayerId(p)],FCO,EX1,EY1)elsecall EK1(FT0[E81],D40[GetPlayerId(FCO)],D50[GetPlayerId(FCO)],FCO,EX1,EY1)endifcall PZI(p,GetObjectName(1848656978))if FBO==false thenset FHO=truecall EL1(BA1)endifelseif ZL==false and FBO==false and GetItemType(BA1)==ITEM_TYPE_CAMPAIGN and F11(BA1)!=0 and(p==FCO or(GetPlayerSlotState((FCO))==PLAYER_SLOT_STATE_LEFT))thenif EV1(E81)or EZ1(E81)thenset EX1=trueelseset EX1=falseendifif(GetPlayerSlotState((FCO))==PLAYER_SLOT_STATE_LEFT)and E91(E81)thenelsecall EL1(BA1)set FHO=trueset EJ1=UnitAddItemById(B71,FR0[E81])set FGO=EJ1call SetItemPlayer(EJ1,FCO,false)call SetItemUserData(EJ1,0)if EX1 thencall SetItemCharges(EJ1,EY1)endifendifelseif ZL==false and FBO==false and GetItemType(BA1)==ITEM_TYPE_PERMANENT and p!=FCO and FQ0[EB1(BA1)]!=0 and(GetPlayerSlotState((FCO))==PLAYER_SLOT_STATE_LEFT)==false thenif EV1(E81)or EZ1(E81)thenset EX1=trueelseset EX1=falseendifcall EL1(BA1)set FHO=trueset EJ1=UnitAddItemById(B71,FQ0[E81])set FGO=EJ1call SetItemPlayer(EJ1,FCO,false)call SetItemUserData(EJ1,0)if EX1 thencall SetItemCharges(EJ1,EY1)endifelseif FBO==false and GetItemType(BA1)==ITEM_TYPE_PERMANENT and EH1(BA1)and IsUnitType(B71,UNIT_TYPE_HERO)==true thenset FDO=ED1(B71)set FEO=EF1(B71)if FEO!=0 thencall UnitAddAbility(B71,FEO)call UnitMakeAbilityPermanent(B71,true,FEO)call SetPlayerAbilityAvailable(p,FEO,false)if GetUnitTypeId(B71)==1211117653 thenset GK=B71call ExecuteFunc("FZO")elseif GetUnitTypeId(B71)==1215130471 thenset GK=B71call ExecuteFunc("FVO")endifendifif E81!=FDO thencall EL1(BA1)set EJ1=UnitAddItemById(B71,FR0[FDO])set FGO=EJ1call SetItemPlayer(EJ1,FCO,false)call SetItemUserData(EJ1,1)endifelseif FBO==false and GetItemType(BA1)==ITEM_TYPE_ARTIFACT thencall DisableTrigger(LY0)set FFO=ET1(FCO,B71,E81,BA1)if FFO==null thenelsecall SetItemCharges(FFO,EY1+GetItemCharges(FFO))call EL1(BA1)set FGO=nullendifcall EnableTrigger(LY0)elseif FBO and EZ1(E71(E81))thencall DisableTrigger(LY0)if EQ1(B71)==0 and ER1(FCO,B71,E81)==null thencall PZI(p,GetObjectName(1848652367))call EK1(FT0[(E81)],(((LoadReal(LY,(S5I),(6))))*1.0),(((LoadReal(LY,(S5I),(7))))*1.0),(FCO),(true),(EY1))elseset FFO=ER1(FCO,B71,E81)if FFO==null thencall DisableTrigger(LY0)set EJ1=UnitAddItemById(B71,FR0[E81])set FGO=EJ1call SetItemPlayer(EJ1,FCO,false)call SetItemUserData(EJ1,1)call SetItemCharges(EJ1,EY1)elsecall SetItemCharges(FFO,EY1+GetItemCharges(FFO))endifendifcall EnableTrigger(LY0)elseif FBO==true thencall EDO(FCO,B71,null,E81,(LoadReal(LY,(S5I),(6))),(LoadReal(LY,(S5I),(7))),EY1,1)elseif FBO==false and(GetItemType(BA1)==ITEM_TYPE_PERMANENT or GetItemType(BA1)==ITEM_TYPE_CAMPAIGN)thencall SetItemUserData(BA1,1)set FHO=E8O(FCO,B71,0)endifif FHO==false and FGO!=null and F61(FGO)==false thenset FHO=F7O(B71,FGO)endifif FHO==false and FGO!=null and F61(FGO)==false thencall EUO(B71,FGO)endifelseif GetWidgetLife(BA1)>0 thenset FDO=ED1(B71)set FEO=EF1(B71)if ES1(B71,FR0[FDO])==null and GetUnitAbilityLevel(B71,FEO)>0 thencall UnitRemoveAbility(B71,FEO)if GetUnitTypeId(B71)==1215130471 thenset GK=B71call ExecuteFunc("FWO")endifendifif IsItemOwned(BA1)==false thenif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(E81)or EZ1(E81)thenset EX1=trueendifcall EK1(FT0[E81],GetItemX(BA1),GetItemY(BA1),FCO,EX1,EY1)call EL1(BA1)endifendifendifcall FlushChildHashtable(LY,(S5I))call S0I(t)call EnableTrigger(MO0)set t=nullset BA1=nullset B71=nullset p=nullset FCO=nullset EJ1=nullset FFO=nullset FGO=nullreturn falseendfunctionfunction FXO takes nothing returns booleancall EnableTrigger(LY0)call S0I(GetTriggeringTrigger())return falseendfunctionfunction DelayTrigger takes nothing returns nothinglocal trigger t=CreateTrigger()call DisableTrigger(LY0)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function FXO))set t=nullendfunctionfunction FYO takes nothing returns booleanlocal item BA1local integer FAOlocal unit B71=GetTriggerUnit()local trigger tlocal integer S5Ilocal integer FDOlocal integer FEOlocal integer idset id=GetPlayerId(GetOwningPlayer(B71))if(IsUnitType(B71,UNIT_TYPE_HERO)==true or B61(B71))and IsUnitIllusion(B71)==false and GetUnitTypeId(B71)!=1311788365 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thenif GetItemTypeId(GetManipulatedItem())==FR0[HC0]thenset LK0=LK0+1set L90[id]=L90[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[GJ0]thenset LL0=LL0+1set LA0[id]=LA0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[WM0]thenset LM0=LM0+1set LB0[id]=LB0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[V10]or GetItemTypeId(GetManipulatedItem())==FR0[XD0]thenset LN0=LN0+1set LC0[id]=LC0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[WA0]thenset LS0=LS0+1set M90[id]=M90[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[WO0]thenset LJ0=LJ0+1set LD0[id]=LD0[id]+1call F71(B71,1227901005)elseif GetItemTypeId(GetManipulatedItem())==FR0[VE0]thenset LT0=LT0+1set LE0[id]=LE0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[VI0]thenset LR0=LR0+1set LF0[id]=LF0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[XC0]thenset LP0=LP0+1set M00[id]=M00[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[Z00]thenset LQ0=LQ0+1set MA0[id]=MA0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[V40]thenset LU0=LU0+1set MI0[id]=MI0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[V50]thenset LU0=LU0+1set MI0[id]=MI0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[V60]thenset LU0=LU0+1set MI0[id]=MI0[id]+1elseif GetItemTypeId(GetManipulatedItem())==FR0[V70]thenset LU0=LU0+1set MI0[id]=MI0[id]+1endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM thenif GetItemTypeId(GetManipulatedItem())==FR0[HC0]thenset L90[id]=L90[id]-1set LK0=LK0-1elseif GetItemTypeId(GetManipulatedItem())==FR0[GJ0]and GetUnitTypeId(B71)!=1311788365 thenset LA0[id]=LA0[id]-1set LL0=LL0-1elseif GetItemTypeId(GetManipulatedItem())==FR0[Z00]thenset MA0[id]=MA0[id]-1set LQ0=LQ0-1elseif GetItemTypeId(GetManipulatedItem())==FR0[WM0]thenset LB0[id]=LB0[id]-1set LM0=LM0-1elseif GetItemTypeId(GetManipulatedItem())==FR0[V10]or GetItemTypeId(GetManipulatedItem())==FR0[XD0]thenset LN0=LN0-1set LC0[id]=LC0[id]-1if LC0[id]<1 or EM1(B71,FR0[V10],GetManipulatedItem())==null or EM1(B71,FR0[XD0],GetManipulatedItem())==null thencall UnitRemoveAbility(B71,1093744436)endifelseif GetItemTypeId(GetManipulatedItem())==FR0[WA0]and GetUnitTypeId(B71)!=1311788365 thenset M90[id]=M90[id]-1set LS0=LS0-1elseif GetItemTypeId(GetManipulatedItem())==FR0[WO0]or GetItemTypeId(GetManipulatedItem())==FQ0[WO0]thenset LJ0=IMaxBJ(LJ0-1,0)set LD0[id]=IMaxBJ(LD0[id]-1,0)call UnitRemoveAbility(B71,1110458953)elseif GetItemTypeId(GetManipulatedItem())==FR0[V40]thenset LU0=LU0-1set MI0[id]=MI0[id]-1elseif GetItemTypeId(GetManipulatedItem())==FR0[V50]thenset LU0=LU0-1set MI0[id]=MI0[id]-1elseif GetItemTypeId(GetManipulatedItem())==FR0[V60]thenset LU0=LU0-1set MI0[id]=MI0[id]-1elseif GetItemTypeId(GetManipulatedItem())==FR0[V70]thenset LU0=LU0-1set MI0[id]=MI0[id]-1endifendifendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM thenset BA1=GetSoldItem()call SetItemUserData(BA1,-2)set FDO=ED1(B71)set FEO=EF1(B71)if EM1(B71,FR0[FDO],BA1)==null and GetUnitAbilityLevel(B71,FEO)>0 thencall UnitRemoveAbility(B71,FEO)if GetUnitTypeId(B71)==1215130471 thenset GK=B71call ExecuteFunc("FWO")endifendifif OSI==true thencall F8O(B71)endifelseif GetItemTypeId(GetManipulatedItem())!=1227894853 and GetItemTypeId(GetManipulatedItem())!=1227895373 thenset BA1=GetManipulatedItem()if IsUnitIllusion(B71)or GetItemUserData(BA1)==-2 thenset BA1=nullset B71=nullset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thenset FAO=1elseset FAO=2endifif(FAO==1 or(FAO==2 and F61(BA1)==false and GetWidgetLife(BA1)>0))and GetUnitTypeId(B71)!=1211117642 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function F9O))call SaveUnitHandle(LY,(S5I),(26),(B71))call SaveInteger(LY,(S5I),(97),(FAO))call SaveInteger(LY,(S5I),(93),(EB1(BA1)))if F61(BA1)thencall SaveBoolean(LY,(S5I),(95),(true))call SavePlayerHandle(LY,(S5I),(54),(GetItemPlayer(BA1)))call SaveInteger(LY,(S5I),(76),(GetItemCharges(BA1)))call SaveReal(LY,(S5I),(6),((GetItemX(BA1))*1.0))call SaveReal(LY,(S5I),(7),((GetItemY(BA1))*1.0))elsecall SaveBoolean(LY,(S5I),(95),(false))call SaveItemHandle(LY,(S5I),(96),(BA1))call SaveInteger(LY,(S5I),(76),(GetItemCharges(BA1)))call SetItemUserData(BA1,0)endifelseendifendifset BA1=nullset B71=nullset t=nullreturn falseendfunctionfunction FKO takes nothing returns booleanif GetSpellAbilityId()==1093751369 or GetSpellAbilityId()==1093681733 thenif IC1(GetTriggerUnit())==false thencall EQO(GetTriggerUnit())endifendifreturn falseendfunctionfunction RestrictedItems_UpdateMeleeRange_All2 takes nothing returns nothingcall EQO(GK)endfunctionfunction FMO takes unit SFI,integer FNO,boolean FSO returns nothinglocal string FTOlocal string slocal player p=GetOwningPlayer(SFI)local real d=2local string FRO="Use"if FSO thenset FRO="Store"endifif FNO==1227894838 thenset FTO="|c00ff0000"+GetObjectName(1848658513)+"|r"call FL1("Rune"+FRO+"1",GetPlayerId(p))elseif FNO==1227894840 thenset FTO="|c0000ff00"+GetObjectName(1848658510)+"|r"call FL1("Rune"+FRO+"2",GetPlayerId(p))elseif FNO==1227894859 thenset FTO="|c000000ff"+GetObjectName(1848658739)+"|r"call FL1("Rune"+FRO+"3",GetPlayerId(p))elseif FNO==1227894839 thenset FTO="|c00afaf00"+GetObjectName(1848658738)+"|r"call FL1("Rune"+FRO+"4",GetPlayerId(p))elseif FNO==1227894858 thenset FTO="|c00652DC1"+GetObjectName(1848658740)+"|r"call FL1("Rune"+FRO+"5",GetPlayerId(p))elseif FNO==1227903555 thenset FTO="|c00FFD700"+GetObjectName(1848659538)+"|r"call FL1("Rune"+FRO+"6",GetPlayerId(p))endifif FSO thenset s=C0[GetPlayerId(p)]+GetUnitName(SFI)+"|r "+GetObjectName(1848657749)+"|r "+FTO+" "+GetObjectName(1848657751)set d=1elseif M10 thenset s=C0[GetPlayerId(p)]+GetUnitName(SFI)+"|r "+GetObjectName(1848657750)+"|r "+FTO+" "+GetObjectName(1848657751)elseset s=C0[GetPlayerId(p)]+GetUnitName(SFI)+"|r "+GetObjectName(1848657748)+"|r "+FTO+" "+GetObjectName(1848657751)endifendifif(IsPlayerAlly(GetLocalPlayer(),p)and GetLocalPlayer()!=p)or P0I(GetLocalPlayer())thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,d,s)endifendfunctionfunction FPO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetUnitAbilityLevel(SFI,1110454611)==0 thencall UnitRemoveAbility(SFI,1110454611)call UnitRemoveAbility(SFI,1110455361)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitState(SFI,UNIT_STATE_LIFE)==GetUnitState(SFI,UNIT_STATE_MAX_LIFE)and GetUnitState(SFI,UNIT_STATE_MANA)==GetUnitState(SFI,UNIT_STATE_MAX_MANA)thencall UnitRemoveAbility(SFI,1110454611)call UnitRemoveAbility(SFI,1110455361)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullreturn falseendfunctionfunction FQO takes unit SFI,item BA1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function FPO))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullendfunctionfunction FUO takes unit SFI,item BA1 returns nothinglocal integer G0O=R2I((TimerGetElapsed(M))/60)local integer XP=50+5*G0Olocal integer ROI=50+2*G0Olocal boolean GIO=(LoadBoolean(LY,(GetHandleId(BA1)),(835)))if GIO thenset XP=100set ROI=100endifcall AddHeroXP(SFI,XP,true)call AA1(GetOwningPlayer(SFI),ROI,SFI)call PlaySoundOnUnitBJ(AG,100,SFI)endfunctionfunction G1O takes unit SFI,item BA1 returns nothinglocal unit u=SFIlocal real x=GetUnitX(u)local real y=GetUnitY(u)local unit I01=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==true thencall UnitAddAbility(I01,1093818446)elsecall UnitAddAbility(I01,1093683026)endifcall IssueTargetOrderById(I01,852274,u)call IssueTargetOrderById(I01,852274,u)set u=nullset I01=nullendfunctionfunction GOO takes unit SFI,item BA1 returns nothingif GetItemTypeId(BA1)==1227894839 or GetItemTypeId(BA1)==1227894838 or GetItemTypeId(BA1)==1227894840 or GetItemTypeId(BA1)==1227894859 or GetItemTypeId(BA1)==1227894858 or GetItemTypeId(BA1)==1227903555 thencall FMO(SFI,GetItemTypeId(BA1),false)endifif GetItemTypeId(BA1)==1227894839 thencall G1O(SFI,BA1)elseif GetItemTypeId(BA1)==1227894858 thenif GetUnitAbilityLevel(SFI,1110456665)>0 thencall UnitRemoveAbility(SFI,1110456665)call UnitRemoveAbility(SFI,1110454609)call DisableTrigger(GetTriggeringTrigger())call UnitAddItemById(SFI,1227894858)call EnableTrigger(GetTriggeringTrigger())endifelseif GetItemTypeId(BA1)==1227894840 thencall FQO(SFI,BA1)elseif GetItemTypeId(BA1)==1227903555 thencall FUO(SFI,BA1)endifendfunctionfunction G2O takes unit SFI,item BA1 returns nothinglocal integer IB1local integer SUIcall UnitRemoveAbility(SFI,1093810003)call UnitRemoveAbility(SFI,1093810001)call UnitRemoveAbility(SFI,1093810002)call UnitRemoveAbility(SFI,1093810004)if GetUnitAbilityLevel(SFI,1093810246)>0 thencall UnitRemoveAbility(SFI,1093810246)call UnitAddAbility(SFI,1093810246)endifif GetUnitTypeId(SFI)==1164207469 thenset IB1=1093684057elseif GetUnitTypeId(SFI)==1429221446 thenset IB1=1093678660elseif GetUnitTypeId(SFI)==1162032951 thenset IB1=1093684557elseif GetUnitTypeId(SFI)==1332179560 thenset IB1=1093687627elseif GetUnitTypeId(SFI)==1211117642 or GetUnitTypeId(SFI)==1211117641 thenset IB1=1093816641elseif GetUnitTypeId(SFI)==1430468144 thenset IB1=1093817427elseset SFI=nullreturnendifset SUI=GetUnitAbilityLevel(SFI,IB1)if SUI>0 thencall UnitRemoveAbility(SFI,IB1)call UnitAddAbility(SFI,IB1)call SetUnitAbilityLevel(SFI,IB1,SUI)endifendfunctionfunction G3O takes item BA1,unit P7I,boolean G4O returns nothinglocal integer E81=EB1(BA1)local integer S5I=GetHandleId(P7I)local string s=""if(E81==GZ0 and EM1(P7I,GZ0,BA1)==null)or(E81==GV0 and EM1(P7I,GV0,BA1)==null)thenif IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))==true or P0I(GetLocalPlayer())thenset s="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"endifif G4O thenif EQ1(P7I)>0 or GetItemType(BA1)==ITEM_TYPE_PERMANENT or GetItemType(BA1)==ITEM_TYPE_CAMPAIGN thenif GetUnitAbilityLevel(P7I,1093809729)==0 and GetUnitAbilityLevel(P7I,1093809730)==0 thenif s=="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl" thencall IA1(P7I,1093809729)elsecall IA1(P7I,1093809730)endifendifendifelseif not(GetUnitAbilityLevel(P7I,1093809729)==0 and GetUnitAbilityLevel(P7I,1093809730)==0)thencall UnitRemoveAbility(P7I,1093809730)call UnitRemoveAbility(P7I,1093809729)call RemoveSavedHandle(LY,(S5I),(670))endifendifendifendfunctionfunction G5O takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local item BA1=GetManipulatedItem()local integer id=GetItemTypeId(BA1)if BA1==null or IsUnitIllusion(SFI)==true or IsUnitType(SFI,UNIT_TYPE_HERO)==false or V51(GetUnitTypeId(SFI))or GetItemTypeId(BA1)==1227894853 or GetItemTypeId(BA1)==1227895373 thenset SFI=nullset BA1=nullreturn falseendifif(GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM and GetItemType(BA1)!=ITEM_TYPE_PURCHASABLE)or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM thencall G3O(BA1,SFI,false)call FL1("DRI_"+I2S(GetPlayerId(GetOwningPlayer(SFI))),FR0[E71(EB1(BA1))])elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thencall G3O(BA1,SFI,true)call FL1("PUI_"+I2S(GetPlayerId(GetOwningPlayer(SFI))),FR0[E71(EB1(BA1))])endifset SFI=nullset BA1=nullreturn falseendfunctionfunction G7O takes nothing returns booleanlocal integer iif M50>0 and M30[1]<1 thenset i=2loopexitwhen i>M50set M30[i-1]=M30[i]set M40[i-1]=M40[i]set i=i+1endloopset M50=M50-1endifset i=1loopexitwhen i>M50if M30[i]>=1 thenset M30[i]=M30[i]-1if M30[i]<1 thencall SetItemDroppable(M40[i],true)endifendifset i=i+1endloopreturn falseendfunctionfunction G8O takes item BA1 returns nothingset M50=M50+1set M40[M50]=BA1set M30[M50]=(GI0[(F01(BA1))])call SetItemDroppable(BA1,false)endfunctionfunction G9O takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())!=1697656901 and(GI0[(F01(GetManipulatedItem()))])>0 thencall G8O(GetManipulatedItem())endifreturn falseendfunctionfunction GAO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(26)))local integer GBO=(LoadInteger(LY,(S5I),(98)))local item BA1=UnitItemInSlot(u,GBO)if BA1!=null and E91(EB1(BA1))==false and GetWidgetLife(BA1)>0 and EG1(BA1)==false thencall SetItemDroppable(BA1,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset BA1=nullreturn falseendfunctionfunction GCO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(26)))local integer GBO=(LoadInteger(LY,(S5I),(98)))local item BA1=UnitItemInSlot(u,GBO)call FlushChildHashtable(LY,(S5I))call S0I(t)if(u!=null and GetUnitTypeId(u)>1 and IsUnitType(u,UNIT_TYPE_DEAD)==false)and(BA1!=null and GetWidgetLife(BA1)>0)thenset t=CreateTrigger()set S5I=GetHandleId(t)call SetItemDroppable(BA1,false)call SaveInteger(LY,(S5I),(98),(GBO))call SaveUnitHandle(LY,(S5I),(26),(u))call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(t,Condition(function GAO))endifset BA1=nullset u=nullset t=nullreturn falseendfunctionfunction GDO takes nothing returns nothinglocal integer GBOlocal unit u=GetTriggerUnit()local trigger tlocal integer S5Ilocal item BA1if GetIssuedOrderId()==852008 thenset GBO=0elseif GetIssuedOrderId()==852009 thenset GBO=1elseif GetIssuedOrderId()==852010 thenset GBO=2elseif GetIssuedOrderId()==852011 thenset GBO=3elseif GetIssuedOrderId()==852012 thenset GBO=4elseif GetIssuedOrderId()==852013 thenset GBO=5endifset BA1=UnitItemInSlot(u,GBO)if BA1!=null and GetWidgetLife(BA1)>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(98),(GBO))call SaveUnitHandle(LY,(S5I),(26),(u))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function GCO))endifset BA1=nullset u=nullset t=nullendfunctionfunction ItemCooldown_CheckOrderID takes nothing returns booleanif GetIssuedOrderId()==852008 or GetIssuedOrderId()==852009 or GetIssuedOrderId()==852010 or GetIssuedOrderId()==852011 or GetIssuedOrderId()==852012 or GetIssuedOrderId()==852013 thencall GDO()endifreturn falseendfunctionfunction GFO takes nothing returns nothinglocal unit u=GetTriggerUnit()local item BA1local integer i=0local real x=GetUnitX(u)local real y=GetUnitY(u)local integer E81local item EJ1call DisableTrigger(LY0)loopexitwhen i>5set BA1=UnitItemInSlot(u,i)set E81=EB1(BA1)if E81==ZV0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[HI0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[HB0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==ZY0 or E81==ZJ0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[H10],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[H50],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==WQ0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GQ0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[GT0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[YW0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==WU0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GQ0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[GT0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[YW0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==WY0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GX0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[V30],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[YL0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==X90 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[G40],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[GG0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==V80 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GW0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[GM0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==V90 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GW0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[GM0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==VM0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[V00],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[H90],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[Y30],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==VN0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[V00],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[H90],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[Y30],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==HS0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[GF0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[X50],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==VE0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[VI0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[V00],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==Z20 or E81==Z30 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[ZQ0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[ZY0],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)elseif E81==XD0 thenset JK=GetItemPlayer(BA1)call RemoveItem(BA1)set EJ1=CreateItem(FT0[H30],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)set EJ1=CreateItem(FT0[V10],x,y)call SetItemPlayer(EJ1,JK,false)call SetItemUserData(EJ1,1)endifset i=i+1endloopcall EnableTrigger(LY0)set u=nullset BA1=nullset EJ1=nullendfunctionfunction GGO takes nothing returns booleanif GetSpellAbilityId()==1093684021 or GetSpellAbilityId()==1093751366 thencall GFO()endifreturn falseendfunctionfunction GZO takes integer E81 returns booleanreturn E81!=W30 and E81!=WM0 and E81!=GZ0 and E81!=VL0endfunctionfunction GVO takes nothing returns nothingif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thencall SetItemPawnable(GetManipulatedItem(),false)elsecall SetItemPawnable(GetManipulatedItem(),true)endifendfunctionfunction GWO takes nothing returns booleanif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and GZO(F01(GetManipulatedItem()))and RYI(GetTriggerUnit())thencall GVO()endifreturn falseendfunctionfunction GYO takes nothing returns nothinglocal integer x=1local player ploopexitwhen x>16if ES1(K1[x],FR0[WM0])!=null thencall RemoveUnit(M70[GetPlayerId(GetOwningPlayer(K1[x]))])endifset x=x+1endloopendfunctionfunction Bloodstone_ItemCondition takes nothing returns booleanreturn GetItemTypeId(GetManipulatedItem())==FR0[WM0]and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==trueendfunctionfunction GJO takes nothing returns booleanreturn IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and V51(GetUnitTypeId(GetFilterUnit()))==false and ES1(GetTriggerUnit(),FR0[WM0])!=nullendfunctionfunction GKO takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction GLO takes nothing returns nothingcall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+JO)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodstoneHealTarget.mdx",GetEnumUnit(),"origin"))endfunctionfunction Bloodstone_RegisterUnit takes nothing returns nothingcall SCI(GetEnumUnit(),4254,40)endfunctionfunction GMO takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1700,Condition(function GKO))set JO=500+30*GetItemCharges(ES1(GetTriggerUnit(),FR0[WM0]))call ForGroup(g,function GLO)call NSI(g)set g=nullendfunctionfunction GNO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1211117645,GetUnitX(SFI),GetUnitY(SFI),GetUnitFacing(SFI))set M70[GetPlayerId(GetOwningPlayer(SFI))]=I01call GMO()endfunctionfunction GTO takes unit u returns nothinglocal integer GRO=GetItemCharges(ES1(u,FR0[WM0]))if GRO>0 thencall SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+GRO)endifendfunctionfunction GPO takes nothing returns booleanlocal integer i=1local unit SFIlocal integer idif LM0>0 thenloopexitwhen i>5set id=GetPlayerId(BO[i])set SFI=K1[id]if LB0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false thencall GTO(SFI)endifset id=GetPlayerId(CO[i])set SFI=K1[id]if LB0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false thencall GTO(SFI)endifset i=i+1endloopendifset SFI=nullreturn falseendfunctionfunction GUO takes unit H0O,unit P7I returns nothinglocal string fx=""if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(P7I))and P0I(GetLocalPlayer())==false thenset fx="war3mapImported\\WardMark_T2.mdx"endifcall AddSpecialEffectTarget(fx,H0O,"origin")endfunctionfunction HIO takes nothing returns booleanreturn trueendfunctionfunction H1O takes unit SFI,unit H0O returns nothinglocal integer HOOlocal item H2Oif GetUnitTypeId(H0O)==1865429044 thenset HOO=FR0[ZA0]elseset HOO=FR0[ZB0]endifcall DisableTrigger(LY0)set H2O=ES1(SFI,HOO)if H2O==null thenset JK=GetOwningPlayer(SFI)set VK=CreateItem(HOO,0,0)call UnitAddItem(SFI,VK)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elsecall SetItemCharges(H2O,GetItemCharges(H2O)+1)endifcall EnableTrigger(LY0)endfunctionfunction H3O takes nothing returns nothinglocal unit H0O=GetSummonedUnit()local unit SFI=GetSummoningUnit()if GetUnitTypeId(GetSummonedUnit())==1865429044 thenendifif GetUnitTypeId(GetSummonedUnit())==1865429044 or GetUnitTypeId(GetSummonedUnit())==1868921189 thenif IsUnitInRegion(R60,H0O)thencall H1O(SFI,H0O)call RemoveUnit(H0O)elseif RYI(SFI)thencall H1O(SFI,H0O)call PZI(GetOwningPlayer(H0O),"Couriers cannot place wards")call RemoveUnit(H0O)elsecall GUO(GetSummonedUnit(),GetSummoningUnit())if GetUnitTypeId(GetSummonedUnit())==1868921189 thencall I41(GetOwningPlayer(GetSummonedUnit()),12,GetUnitX(GetSummonedUnit()),GetUnitY(GetSummonedUnit()),150)endifendifelseif GetUnitTypeId(H0O)==1869836340 or GetUnitTypeId(H0O)==1865429048 or GetUnitTypeId(H0O)==1865429049 or GetUnitTypeId(H0O)==1865429315 or GetUnitTypeId(H0O)==1865429316 or GetUnitTypeId(H0O)==1865429317 thencall SelectUnitAddForPlayer(H0O,GetOwningPlayer(H0O))elseif GetUnitTypeId(H0O)==1865429040 or GetUnitTypeId(H0O)==1865429041 or GetUnitTypeId(H0O)==1865429057 or GetUnitTypeId(H0O)==1865429080 thencall SelectUnitAddForPlayer(H0O,GetOwningPlayer(H0O))endifendfunctionfunction H5O takes nothing returns nothinglocal unit u=GetEnumUnit()local integer i=0local player p=GetOwningPlayer(GetTriggerUnit())local item BA1local integer id=GetPlayerId(p)loopexitwhen i>5set BA1=UnitItemInSlot(u,i)if BA1!=null and GetItemPlayer(BA1)==p thencall UnitRemoveItem(u,BA1)call SetItemPosition(BA1,D40[id],D50[id])endifset i=i+1endloopset u=nullset BA1=nullendfunctionfunction H6O takes nothing returns nothinglocal item BA1=GetEnumItem()local unit u=M80local player p=GetOwningPlayer(u)local integer id=GetPlayerId(p)if GetWidgetLife(BA1)>0 and GetItemPlayer(BA1)==p and IsItemVisible(BA1)==true thencall SetItemPosition(BA1,D40[id],D50[id])call UnitAddItem(D30[id],BA1)endifset BA1=nullset u=nullset p=nullendfunctionfunction H7O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(53)))set M80=uif TII(GetOwningPlayer(M80))thencall EnumItemsInRect(G5,Condition(function N1I),function H6O)elsecall EnumItemsInRect(H5,Condition(function N1I),function H6O)endifif GetTriggerEvalCount(t)==2 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset u=nullreturn falseendfunctionfunction H8O takes nothing returns booleanreturn RYI(GetFilterUnit())endfunctionfunction H9O takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer i=0local group g=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),1300,Condition(function H8O))call ForGroup(g,function H5O)call NSI(g)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function H7O))call SaveUnitHandle(LY,(S5I),(53),(u))set u=nullset g=nullendfunctionfunction HAO takes nothing returns nothingif GetSpellAbilityId()==1093743684 thencall H9O()endifendfunctionfunction HBO takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer i=0local item BA1local integer id=GetPlayerId(GetOwningPlayer(u))local region r=CreateRegion()if TII(GetOwningPlayer(u))thencall RegionAddRect(r,G5)elsecall RegionAddRect(r,H5)endifloopexitwhen i>5set BA1=UnitItemInSlot(u,i)if E91(EB1(BA1))==false and EB1(BA1)!=VL0 and EG1(BA1)==false thencall UnitRemoveItemFromSlot(u,i)if(GetUnitTypeId(u)==1852010352 or IsUnitInRegion(r,u))and IsPlayerAlly(GetItemPlayer(BA1),GetOwningPlayer(u))==true thenset id=GetPlayerId(GetItemPlayer(BA1))call SetItemPosition(BA1,D40[id],D50[id])endifendifset i=i+1endloopcall RemoveRegion(r)set u=nullset r=nullendfunctionfunction HCO takes nothing returns nothingif GetSpellAbilityId()==1093743416 or GetSpellAbilityId()==1093743683 thencall HBO()endifendfunctionfunction HDO takes unit P7I returns booleanlocal integer S5I=GetHandleId(P7I)local integer i=0local real GW1=(TimerGetElapsed(M))local real HEO=13loopexitwhen i>0if(LoadReal(LY,(S5I),(730+i)))<GW1-HEO thenreturn falseendifset i=i+1endloopreturn trueendfunctionfunction HFO takes unit P7I returns nothinglocal integer S5I=GetHandleId(P7I)local integer HGO=(LoadInteger(LY,(S5I),(729)))call SaveReal(LY,(S5I),(730+HGO),(((TimerGetElapsed(M)))*1.0))set HGO=HGO+1if HGO==1 thenset HGO=0endifcall SaveInteger(LY,(S5I),(729),(HGO))endfunctionfunction HHO takes unit SFI returns nothinglocal integer i=0local item HZOlocal integer E81local boolean HVO=falseif HDO(SFI)thenset HVO=trueendifloopexitwhen i>5set HZO=UnitItemInSlot(SFI,i)set E81=F01(HZO)if E81==Z00 and HVO==true thencall DisableTrigger(LY0)set JK=GetItemPlayer(HZO)call RemoveItem(HZO)set VK=FD1(SFI,FR0[ZI0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifif E81==ZI0 and HVO==false thencall DisableTrigger(LY0)set JK=GetItemPlayer(HZO)call RemoveItem(HZO)set VK=FD1(SFI,FR0[Z00],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifset i=i+1endloopset SFI=nullset HZO=nullendfunctionfunction HWO takes unit SFI returns nothinglocal integer i=0local item HXOlocal integer E81local boolean HYO=falselocal real Q4I=4if IsUnitType(SFI,UNIT_TYPE_MELEE_ATTACKER)==false thenset Q4I=6endifif(LoadReal(LY,(GetHandleId(SFI)),(785)))+Q4I>(TimerGetElapsed(M))thenset HYO=trueendifloopexitwhen i>5set HXO=UnitItemInSlot(SFI,i)set E81=F01(HXO)if E81==WA0 and HYO==true thencall DisableTrigger(LY0)set JK=GetItemPlayer(HXO)call RemoveItem(HXO)set VK=FD1(SFI,FR0[WB0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifif E81==WB0 and HYO==false thencall DisableTrigger(LY0)set JK=GetItemPlayer(HXO)call RemoveItem(HXO)set VK=FD1(SFI,FR0[WA0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifset i=i+1endloopset SFI=nullset HXO=nullendfunctionfunction HJO takes nothing returns nothingif GetEventDamage()>2 and(T2I(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)and GetUnitAbilityLevel(GetTriggerUnit(),1093685838)==0 thenif NJ0[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false thencall SaveReal(LY,(GetHandleId(GetTriggerUnit())),(785),(((TimerGetElapsed(M)))*1.0))if GetEventDamage()>20 thenendifendifendifendfunctionfunction HKO takes unit SFI returns nothinglocal integer i=0local item HLOlocal integer E81local boolean HMO=falseif(LoadReal(LY,(GetHandleId(SFI)),(785)))+3>(TimerGetElapsed(M))thenset HMO=trueendifloopexitwhen i>5set HLO=UnitItemInSlot(SFI,i)set E81=F01(HLO)if E81==GJ0 and HMO==true thencall DisableTrigger(LY0)set JK=GetItemPlayer(HLO)call RemoveItem(HLO)set VK=FD1(SFI,FR0[GK0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifif E81==GK0 and HMO==false thencall DisableTrigger(LY0)set JK=GetItemPlayer(HLO)call RemoveItem(HLO)set VK=FD1(SFI,FR0[GJ0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifset i=i+1endloopset SFI=nullset HLO=nullendfunctionfunction HNO takes nothing returns nothinglocal unit SFI=GetEnumUnit()local integer id=GetPlayerId(GetOwningPlayer(SFI))if LA0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false thencall HKO(SFI)endifif M90[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false thencall HWO(SFI)endifif MA0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false thencall HHO(SFI)endifset SFI=nullendfunctionfunction HSO takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetFilterUnit())!=1211117642 and GetUnitTypeId(GetFilterUnit())!=1211122232endfunctionfunction HTO takes nothing returns booleanlocal integer i=1local unit SFIlocal integer idlocal group gif LL0>0 or LS0>0 or LQ0>0 thenset g=NTI()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function HSO))loopexitwhen i>5set id=GetPlayerId(BO[i])set SFI=K1[id]call GroupAddUnit(g,SFI)set id=GetPlayerId(CO[i])set SFI=K1[id]call GroupAddUnit(g,SFI)set i=i+1endloopcall ForGroup(g,function HNO)call NSI(g)set g=nullendifset SFI=nullreturn falseendfunctionfunction HPO takes nothing returns nothinglocal unit SFI=GetFilterUnit()local integer i=0local item BA1local integer E81loopexitwhen i>5set BA1=UnitItemInSlot(SFI,i)set E81=EB1(BA1)if(E81==HE0 or E81==HF0 or E81==HG0)and GetItemUserData(BA1)>0 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",SFI,"overhead"))call PEI(GetOwningPlayer(SFI),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(SFI,FR0[HH0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call UnitRemoveAbility(SFI,1110460233)endifset i=i+1endloopset SFI=nullset BA1=nullendfunctionfunction HQO takes nothing returns booleanif UnitInventorySize(GetFilterUnit())>0 and TII(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and IC1(GetFilterUnit())==false thencall HPO()endifreturn falseendfunctionfunction HUO takes nothing returns booleanif UnitInventorySize(GetFilterUnit())>0 and TOI(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and IC1(GetFilterUnit())==false thencall HPO()endifreturn falseendfunctionfunction Z0O takes nothing returns booleanlocal group g=NTI()call GroupEnumUnitsInRange(g,QS,US,750,Condition(function HQO))call NSI(g)set g=NTI()call GroupEnumUnitsInRange(g,O50,O60,750,Condition(function HUO))call NSI(g)set g=nullreturn falseendfunctionfunction Z1O takes unit ZOO returns booleanlocal unit Z2O=K1[GetPlayerId(GetOwningPlayer(ZOO))]if((GetUnitX(Z2O)-GetUnitX(ZOO))*(GetUnitX(Z2O)-GetUnitX(ZOO))+(GetUnitY(Z2O)-GetUnitY(ZOO))*(GetUnitY(Z2O)-GetUnitY(ZOO))>=855625)thenreturn trueendifreturn falseendfunctionfunction Z3O takes nothing returns nothinglocal unit Z4O=GetAttacker()local integer GP1=UnitInventorySize(Z4O)local integer x=0local item iloopexitwhen x>GP1set i=UnitItemInSlot(Z4O,x)if F01(i)==HC0 thenif GetRandomReal(0,1)<=0.2 and BU1(Z4O)==false thenif B61(Z4O)thenif Z1O(Z4O)==false thenif GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 thencall P6I(Z4O,GetTriggerUnit(),2,40)endifendifelseif GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 thencall P6I(Z4O,GetTriggerUnit(),2,40)endifendifendifendifset x=x+1endloopset x=0set Z4O=GetAttacker()set GP1=UnitInventorySize(Z4O)loopexitwhen x>GP1set i=UnitItemInSlot(Z4O,x)if F01(i)==Z00 or F01(i)==ZI0 thencall HFO(Z4O)endifset x=x+1endloopset x=0set Z4O=GetTriggerUnit()set GP1=UnitInventorySize(Z4O)loopexitwhen x>GP1set i=UnitItemInSlot(Z4O,x)if F01(i)==Z00 or F01(i)==ZI0 thencall HFO(Z4O)endifset x=x+1endloopset i=nullset Z4O=nullendfunctionfunction Z6O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(692)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or Z7O<(TimerGetElapsed(M))thencall UnitRemoveAbility(P7I,1093809717)call UnitRemoveAbility(P7I,1110456398)call UnitRemoveAbility(P7I,1093809731)call SaveReal(LY,(GetHandleId(P7I)),(692),((0)*1.0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction Z8O takes unit P7I returns nothinglocal trigger tlocal integer S5Ilocal real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(692)))call SaveReal(LY,(GetHandleId(P7I)),(692),(((TimerGetElapsed(M))+MC0)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,MC0+0.01,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function Z6O))call SaveUnitHandle(LY,(S5I),(2),(P7I))call IA1(P7I,1093809717)call IA1(P7I,1093809731)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809717,false)set t=nullendfunctionfunction Z9O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if BJ1(P8I)==false thencall Z8O(P8I)endifendifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction ZAO takes nothing returns nothinglocal unit P7I=GetAttacker()local unit P8I=GetTriggerUnit()local trigger tlocal integer S5Iif((LoadInteger(LY,(GetHandleId((P7I))),((4309))))==1)==false thencall SCI(P7I,4309,0.2)if GetRandomReal(0,100)<MB0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function Z9O))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifendifset P7I=nullset P8I=nullendfunctionfunction DiffusalBlade_End takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(833)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or Z7O<(TimerGetElapsed(M))thencall UnitRemoveAbility(P7I,1093809717)call UnitRemoveAbility(P7I,1110456398)call UnitRemoveAbility(P7I,1093809731)call SaveReal(LY,(GetHandleId(P7I)),(833),((0)*1.0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction ZBO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real ZCOif GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if GetUnitAbilityLevel(P7I,1093677618)==0 thenset ZCO=RMinBJ(25,GetUnitState(P8I,UNIT_STATE_MANA))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-ZCO)call P6I(P7I,P8I,2,ZCO)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",P8I,"origin"))endifendifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction ZDO takes nothing returns nothinglocal unit P7I=GetAttacker()local unit P8I=GetTriggerUnit()local trigger tlocal integer S5Iif((LoadInteger(LY,(GetHandleId((P7I))),((4340))))==1)==false and GetUnitState(P8I,UNIT_STATE_MANA)>0 thencall SCI(P7I,4340,0.2)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function ZBO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifset P7I=nullset P8I=nullendfunctionfunction ZEO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(693)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or Z7O<(TimerGetElapsed(M))thencall UnitRemoveAbility(P7I,1093809718)call UnitRemoveAbility(P7I,1110454857)call UnitRemoveAbility(P7I,1093809731)call SaveReal(LY,(GetHandleId(P7I)),(693),((0)*1.0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction ZFO takes unit P7I returns nothinglocal trigger tlocal integer S5Ilocal real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(693)))call SaveReal(LY,(GetHandleId(P7I)),(693),(((TimerGetElapsed(M))+ME0)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,ME0+0.01,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function ZEO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call IA1(P7I,1093809718)call IA1(P7I,1093809731)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809718,false)set t=nullendfunctionfunction ZGO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if BJ1(P8I)==false thencall ZFO(P8I)endifendifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction ZHO takes nothing returns nothinglocal unit P7I=GetAttacker()local unit P8I=GetTriggerUnit()local trigger tlocal integer S5Iif((LoadInteger(LY,(GetHandleId((P7I))),((4309))))==1)==false thencall SCI(P7I,4309,0.2)if GetRandomReal(0,100)<MD0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function ZGO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifendifset P7I=nullset P8I=nullendfunctionfunction ZZO takes nothing returns nothinglocal unit Z4O=GetAttacker()local integer ZVO=25local integer id=GetPlayerId(GetOwningPlayer(GetAttacker()))local integer S5I=GetHandleId(Z4O)local real SOI=(TimerGetElapsed(M))local real ZWO=(LoadReal(LY,(S5I),(101)))local boolean ZXO=(LoadBoolean(LY,(S5I),(99)))local boolean ZYO=(LoadBoolean(LY,(S5I),(100)))local boolean ZJO=SOI<ZWOlocal boolean ZKO=falseif IsUnitType(Z4O,UNIT_TYPE_MELEE_ATTACKER)==false thenset ZVO=10endifif GetRandomInt(0,100)<ZVO thenset ZKO=trueendifif GetUnitAbilityLevel(Z4O,1093683786)>0 or GetUnitAbilityLevel(Z4O,1093679153)>0 or GetUnitAbilityLevel(Z4O,1093682997)>0 or GetUnitAbilityLevel(Z4O,1093679429)>0 thencall UnitRemoveAbility(Z4O,1093744436)set Z4O=nullreturnendifif ZXO and ZJO==false and ZYO==false thencall SaveReal(LY,(S5I),(101),((SOI+2)*1.0))if ZKO==false thencall SaveBoolean(LY,(S5I),(100),(true))endifelseif ZJO or ZYO thencall UnitRemoveAbility(Z4O,1093744436)call SaveBoolean(LY,(S5I),(99),(false))call SaveBoolean(LY,(S5I),(100),(false))endifif ZKO thencall IA1(Z4O,1093744436)call UnitMakeAbilityPermanent(Z4O,true,1093744437)call SaveBoolean(LY,(S5I),(99),(true))endifset Z4O=nullendfunctionfunction ZMO takes unit u returns unitif IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)==0 thenreturn uelsereturn K1[GetPlayerId(GetOwningPlayer(u))]endifendfunctionfunction ZNO takes nothing returns booleanif IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false thenif GetUnitTypeId(GetTriggerUnit())==1848651850 thencall P6I(GetDyingUnit(),ZMO(GetKillingUnit()),1,550)elseif GetUnitTypeId(GetTriggerUnit())==1848651841 thencall P6I(GetDyingUnit(),ZMO(GetKillingUnit()),1,675)elseif GetUnitTypeId(GetTriggerUnit())==1848651830 thencall P6I(GetDyingUnit(),ZMO(GetKillingUnit()),1,800)endifendifreturn falseendfunctionfunction ZTO takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local integer SUI=1if ES1(SFI,FR0[ZI0])!=null thenset SUI=2endifif EM1(SFI,FR0[G40],GetManipulatedItem())!=null thenset SUI=3endifif EM1(SFI,FR0[XI0],GetManipulatedItem())!=null thenset SUI=4endifif EM1(SFI,FR0[ZL0],GetManipulatedItem())!=null or EM1(SFI,FR0[ZM0],GetManipulatedItem())!=null or EM1(SFI,FR0[ZN0],GetManipulatedItem())!=null thenset SUI=5endifif EM1(SFI,FR0[X90],GetManipulatedItem())!=null thenset SUI=6endifif EM1(SFI,FR0[Z00],GetManipulatedItem())!=null thenset SUI=7endifif EM1(SFI,FR0[ZK0],GetManipulatedItem())!=null thenset SUI=8endifif EM1(SFI,FR0[VB0],GetManipulatedItem())!=null thencall UnitAddAbility(SFI,1093686832)call SetUnitAbilityLevel(SFI,1093686832,SUI)call UnitMakeAbilityPermanent(SFI,true,1093686832)elsecall UnitRemoveAbility(SFI,1093686832)endifset SFI=nullreturn falseendfunctionfunction ZRO takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local integer SUI=1if ES1(SFI,FR0[ZI0])!=null thenset SUI=2endifif ES1(SFI,FR0[G40])!=null thenset SUI=3endifif ES1(SFI,FR0[XI0])!=null thenset SUI=4endifif ES1(SFI,FR0[ZL0])!=null or ES1(SFI,FR0[ZM0])!=null or ES1(SFI,FR0[ZN0])!=null thenset SUI=5endifif ES1(SFI,FR0[X90])!=null thenset SUI=6endifif EM1(SFI,FR0[Z00],GetManipulatedItem())!=null thenset SUI=7endifif ES1(SFI,FR0[ZK0])!=null thenset SUI=8endifif ES1(SFI,FR0[VB0])!=null thencall UnitAddAbility(SFI,1093686832)call SetUnitAbilityLevel(SFI,1093686832,SUI)call UnitMakeAbilityPermanent(SFI,true,1093686832)endifset SFI=nullreturn falseendfunctionfunction ZQO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM thenif F01(GetManipulatedItem())==WT0 or F01(GetManipulatedItem())==WP0 thencall UnitRemoveAbility(SFI,1093816644)endifif F01(GetManipulatedItem())==WC0 thencall UnitRemoveAbility(SFI,1093747287)endifif F01(GetManipulatedItem())==WM0 thencall UnitRemoveAbility(SFI,1093682995)call UnitRemoveAbility(SFI,1093679437)call UnitRemoveAbility(SFI,1093686616)call UnitRemoveAbility(SFI,1093815116)endifif F01(GetManipulatedItem())==WS0 or F01(GetManipulatedItem())==WR0 thencall UnitRemoveAbility(SFI,1093816644)call UnitRemoveAbility(SFI,1093686339)call UnitRemoveAbility(SFI,1093686603)endifif F01(GetManipulatedItem())==Z40 thencall UnitRemoveAbility(SFI,1093818693)call UnitRemoveAbility(SFI,1093818694)call UnitRemoveAbility(SFI,1093873977)endifendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thenif F01(GetManipulatedItem())==WT0 or F01(GetManipulatedItem())==WP0 thencall UnitAddAbility(SFI,1093816644)call UnitMakeAbilityPermanent(SFI,true,1093816644)endifif F01(GetManipulatedItem())==WC0 thencall UnitAddAbility(SFI,1093747287)call UnitMakeAbilityPermanent(SFI,true,1093747287)endifif F01(GetManipulatedItem())==Z40 thencall IA1(SFI,1093873977)if IsUnitType(SFI,UNIT_TYPE_MELEE_ATTACKER)==true thencall IA1(SFI,1093818693)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818693,false)elsecall IA1(SFI,1093818694)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818694,false)endifendifif F01(GetManipulatedItem())==WM0 thencall IA1(SFI,1093682995)call IA1(SFI,1093679437)call IA1(SFI,1093686616)call IA1(SFI,1093815116)endifif F01(GetManipulatedItem())==WS0 or F01(GetManipulatedItem())==WR0 thencall UnitAddAbility(SFI,1093816644)call UnitMakeAbilityPermanent(SFI,true,1093816644)call UnitAddAbility(SFI,1093686339)call UnitMakeAbilityPermanent(SFI,true,1093686339)call UnitAddAbility(SFI,1093686603)call UnitMakeAbilityPermanent(SFI,true,1093686603)endifendifset SFI=nullendfunctionfunction ZUO takes nothing returns booleanif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(F01(GetManipulatedItem())==WS0 or F01(GetManipulatedItem())==WT0 or F01(GetManipulatedItem())==WR0 or F01(GetManipulatedItem())==WP0 or F01(GetManipulatedItem())==WC0 or F01(GetManipulatedItem())==WM0 or F01(GetManipulatedItem())==Z40)thencall ZQO()endifreturn falseendfunctionfunction VIO takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,MG0[0])call UnitRemoveAbility(u,MG0[1])call UnitRemoveAbility(u,MG0[2])call UnitRemoveAbility(u,MG0[3])call UnitRemoveAbility(u,MG0[4])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=4set i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,MG0[i])elsecall UnitRemoveAbility(u,MG0[i])endifset i=i+1endloopendfunctionfunction V1O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local item BA1=(LoadItemHandle(LY,(S5I),(96)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local real VOO=GetUnitState(SFI,UNIT_STATE_MAX_LIFE)-GetUnitState(SFI,UNIT_STATE_LIFE)if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==BA1 thencall SaveInteger(LY,(GetHandleId((SFI))),((4298)),(2))call VIO(SFI,0)call SetUnitState(SFI,UNIT_STATE_LIFE,QDI(GetUnitState(SFI,UNIT_STATE_MAX_LIFE)-VOO,1))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM and NPI<25 thencall SaveInteger(LY,(GetHandleId((SFI))),((4298)),(1))set NPI=NPI+1call VIO(SFI,NPI)call SetUnitState(SFI,UNIT_STATE_LIFE,QDI(GetUnitState(SFI,UNIT_STATE_MAX_LIFE)-VOO,1))call SaveInteger(LY,(S5I),(34),(NPI))elsecall SaveInteger(LY,(GetHandleId((SFI))),((4298)),(2))endifset t=nullset SFI=nullset BA1=nullreturn falseendfunctionfunction V2O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local item BA1=(LoadItemHandle(LY,(S5I),(96)))if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==BA1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM thenif((LoadInteger(LY,(GetHandleId((SFI))),((4310))))==1)==false thencall SetUnitState(SFI,UNIT_STATE_LIFE,QDI(GetUnitState(SFI,UNIT_STATE_LIFE)-MF0*0.1,1))endifendifset t=nullset SFI=nullset BA1=nullreturn falseendfunctionfunction V3O takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function V2O))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveItemHandle(LY,(S5I),(96),(GetManipulatedItem()))call TriggerEvaluate(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.7/25,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function V1O))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveItemHandle(LY,(S5I),(96),(GetManipulatedItem()))call SaveInteger(LY,(S5I),(34),(0))set t=nullset SFI=nullendfunctionfunction V4O takes nothing returns booleanif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(F01(GetManipulatedItem())==WS0 or F01(GetManipulatedItem())==WR0)thencall V3O()endifreturn falseendfunctionfunction V6O takes nothing returns nothinglocal unit P7I=MH0local unit P8I=GetEnumUnit()if((LoadInteger(LY,(GetHandleId((P8I))),((4341))))==1)==false thencall SCI(P8I,4341,0.99)set MZ0=truecall P6I(P7I,P8I,1,50)set MZ0=falsecall U5I("Abilities\\Spells\\Items\\HealingSalve\\HealingSalveTarget.mdl",P8I,"origin",0.9)endifset P7I=nullset P8I=nullendfunctionfunction V7O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local item BA1=(LoadItemHandle(LY,(S5I),(96)))local group gif SFI==null or(GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==BA1)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM thenif IC1(SFI)==false thenset g=NTI()set GK=SFIset MH0=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),725,Condition(function CA1))call ForGroup(g,function V6O)call NSI(g)set g=nullendifendifset t=nullset SFI=nullset BA1=nullreturn falseendfunctionfunction V8O takes unit SFI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function V7O))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveItemHandle(LY,(S5I),(96),(GetManipulatedItem()))set t=nullendfunctionfunction V9O takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM and GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and F01(GetManipulatedItem())==W80 thencall V8O(GetTriggerUnit())endifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SUMMON and UnitInventorySize(GetSummonedUnit())>0 and ES1(GetSummonedUnit(),FR0[W80])!=null thencall V8O(GetSummonedUnit())endifreturn falseendfunctionfunction VBO takes unit u returns booleanlocal item VCO=CreateItem(1227901771,GetUnitX(u),GetUnitY(u))local boolean FB1=UnitAddItem(u,VCO)if FB1==false thencall RemoveItem(VCO)endifreturn FB1endfunctionfunction VDO takes unit SFI,item BA1,integer FF1 returns itemlocal real x=FA1(SFI)local real y=FC1(SFI)local integer i=0local boolean array FG1local item FH1loopexitwhen i>(UnitInventorySize(SFI)-1)if UnitItemInSlot(SFI,i)==null and i!=FF1 thenset FH1=CreateItem(1227895373,x,y)call UnitAddItem(SFI,FH1)set FG1[i]=trueelseset FG1[i]=falseendifif i==FF1 thencall UnitAddItem(SFI,BA1)endifset i=i+1endloopset i=0loopexitwhen i>5if FG1[i]==true thencall RemoveItem(UnitItemInSlot(SFI,i))endifset i=i+1endloopset VK=BA1set FH1=nullreturn VKendfunctionfunction VEO takes unit SFI,integer VFO returns nothinglocal integer i=0local item VGOlocal integer E81local unit I01local item VHOif IC1(SFI)thenreturnendifcall DisableTrigger(LY0)if LD0[GetPlayerId(GetOwningPlayer(SFI))]>0 and VFO==WO0 thencall F71(SFI,1227901005)endifloopexitwhen i>5set VGO=UnitItemInSlot(SFI,i)set E81=F01(VGO)if E81==W20 or E81==WO0 thenset JK=GetItemPlayer(VGO)call RemoveItem(VGO)set I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call UnitAddAbility(I01,1095331446)set VHO=UnitAddItemById(I01,FR0[VFO])call UnitResetCooldown(I01)call UnitUseItem(I01,VHO)set VK=VDO(SFI,VHO,i)call SetItemPlayer(VHO,JK,false)call SetItemUserData(VHO,1)call UnitRemoveAbility(I01,1095331446)set I01=nullset VHO=nullendifset VGO=nullset i=i+1endloopcall EnableTrigger(LY0)endfunctionfunction VZO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer i=0local item VGOlocal integer E81local unit I01local item VHOif GetTriggerEventId()==EVENT_UNIT_DEATH thencall SaveBoolean(LY,(GetHandleId(SFI)),(102),(false))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif VBO(SFI)==false thencall TriggerRegisterTimerEvent(t,5.5,false)elsecall SaveBoolean(LY,(GetHandleId(SFI)),(102),(false))call VEO(SFI,WO0)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullreturn falseendfunctionfunction VVO takes unit SFI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer i=0local item VGOlocal integer E81local unit I01local item VHOcall SaveBoolean(LY,(GetHandleId(SFI)),(102),(true))call TriggerRegisterTimerEvent(t,MV0,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function VZO))call SaveUnitHandle(LY,(S5I),(14),(SFI))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",SFI,"origin"))call VEO(SFI,W20)set t=nullendfunctionfunction VWO takes nothing returns booleanlocal integer i=1local unit SFIlocal integer idif Q2 thenreturn falseendifif LJ0>0 thenloopexitwhen i>5set id=GetPlayerId(BO[i])set SFI=K1[id]if LD0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false and(LoadBoolean(LY,(GetHandleId(SFI)),(102)))==false and NNI(SFI)==false and(LoadBoolean(LY,(GetHandleId(SFI)),(129)))==false thencall VVO(SFI)endifset id=GetPlayerId(CO[i])set SFI=K1[id]if LD0[id]>0 and SFI!=null and GetUnitTypeId(SFI)>1 and IsUnitType(SFI,UNIT_TYPE_DEAD)==false and(LoadBoolean(LY,(GetHandleId(SFI)),(102)))==false and NNI(SFI)==false and(LoadBoolean(LY,(GetHandleId(SFI)),(129)))==false thencall VVO(SFI)endifset i=i+1endloopendifset SFI=nullreturn falseendfunctionfunction VXO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitAbilityLevel(P8I,1110458953)==0 thencall VVO(P7I)if GetTriggerEventId()!=EVENT_WIDGET_DEATH thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",P8I,"origin"))endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)>=R2I(MV0/0.1)thencall SaveBoolean(LY,(GetHandleId(P7I)),(102),(false))call VEO(P7I,WO0)call UnitRemoveAbility(P8I,1110458953)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction VYO takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call F71(P8I,1227901005)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function VXO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\Linkens_Main.mdx",P8I,"chest")))call SaveBoolean(LY,(GetHandleId(P7I)),(102),(true))call UnitRemoveAbility(P7I,1110458953)call VEO(P7I,W20)set t=nullset P7I=nullset P8I=nullendfunctionfunction VJO takes nothing returns booleanif GetSpellAbilityId()==1093817925 and IsUnitIllusion(GetSpellTargetUnit())==false thencall VYO()endifreturn falseendfunctionfunction VLO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if P7I!=P8I thencall P6I(P7I,P8I,1,50)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction VMO takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01if P8I==null thenset P8I=P7Iendifset I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093743446)call IssueTargetOrder(I01,"cyclone",P8I)call TriggerRegisterTimerEvent(t,2.51,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function VLO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction VNO takes nothing returns booleanif GetSpellAbilityId()==1093751863 thenif GetTriggerUnit()==GetSpellTargetUnit()or RKI(GetSpellTargetUnit())==false thenif NNI(GetSpellTargetUnit())==false or GetTriggerUnit()==GetSpellTargetUnit()thencall VMO()endifendifendifreturn falseendfunctionfunction VTO takes integer FE1 returns integerif FE1==1227894838 thenreturn HW0elseif FE1==1227894840 thenreturn HX0elseif FE1==1227894858 thenreturn HZ0elseif FE1==1227894859 thenreturn HV0elseif FE1==1227894839 thenreturn HY0elseif FE1==1227903555 thenreturn HJ0endifreturn-1endfunctionfunction VRO takes nothing returns booleanif GetSpellAbilityId()==1093683254 thencall SaveUnitHandle(LY,(GetHandleId(GetTriggerUnit())),(103),(null))call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(104),(0))if(ES1(GetTriggerUnit(),FR0[HE0])!=null or ES1(GetTriggerUnit(),FQ0[HE0])!=null)and(GetUnitTypeId(GetSpellTargetUnit())==1852206952 or GetUnitTypeId(GetSpellTargetUnit())==1852073580)thencall SaveUnitHandle(LY,(GetHandleId(GetTriggerUnit())),(103),(GetSpellTargetUnit()))elseif C8O(GetItemTypeId(GetSpellTargetItem()))thencall FMO(GetTriggerUnit(),GetItemTypeId(GetSpellTargetItem()),true)call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(104),(GetItemTypeId(GetSpellTargetItem())))call EL1(GetSpellTargetItem())endifendifreturn falseendfunctionfunction VPO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(26)))local integer GBO=(LoadInteger(LY,(S5I),(98)))local item BA1=UnitItemInSlot(u,GBO)local integer VQO=(LoadInteger(LY,(S5I),(105)))local item VHOlocal integer FF1if BA1!=null and E91(EB1(BA1))and GetHandleId(BA1)==VQO and IC1(u)==false and IC1(u)==false thenset VHO=CreateItem((LoadInteger(LY,(GetHandleId(BA1)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))call FlushChildHashtable(LY,(GetHandleId(BA1)))set FF1=A11(u,BA1)set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HH0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitAddItem(u,VHO)call UnitRemoveAbility(u,1110460233)endifset t=nullset u=nullset BA1=nullset VHO=nullreturn falseendfunctionfunction VUO takes unit u,item VHO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer GBO=A11(u,VHO)call SaveInteger(LY,(S5I),(98),(GBO))call SaveInteger(LY,(S5I),(105),(GetHandleId(VHO)))call SaveUnitHandle(LY,(S5I),(26),(u))call TriggerRegisterTimerEvent(t,120,true)call TriggerAddCondition(t,Condition(function VPO))set t=nullendfunctionfunction W0O takes nothing returns nothinglocal unit u=GetTriggerUnit()local item BA1=GetManipulatedItem()local integer E81=EB1(BA1)local unit WIOlocal integer W1Olocal boolean TargetFroglocal integer FF1local item VHOlocal integer WOOif E81==HE0 thenset FF1=A11(u,BA1)set WIO=(LoadUnitHandle(LY,(GetHandleId(u)),(103)))set W1O=(LoadInteger(LY,(GetHandleId(u)),(104)))if GetUnitTypeId(WIO)==1852206952 or GetUnitTypeId(WIO)==1852073580 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))call PEI(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HH0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call UnitRemoveAbility(u,1110460233)elseif C8O(W1O)thenset WOO=VTO(W1O)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))set JK=GetItemPlayer(BA1)call EL1(BA1)call DisableTrigger(LY0)if GetOwningPlayer(u)==JK thenset VK=FD1(u,FR0[WOO],FF1)elseset VK=FD1(u,FQ0[WOO],FF1)endifcall EnableTrigger(LY0)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)set VHO=UnitItemInSlot(u,FF1)call SaveInteger(LY,(GetHandleId(VHO)),(GetHandleId(u)),(W1O))call VUO(u,VHO)call UnitRemoveAbility(u,1110460233)endifelseif E81==HH0 thenset FF1=A11(u,BA1)set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HG0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HG0 thenset FF1=A11(u,BA1)set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HF0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HF0 thenset FF1=A11(u,BA1)set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HE0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,0)elseif E91(E81)thenif(LoadInteger(LY,(GetHandleId(BA1)),(GetHandleId(u))))>0 thenset M10=trueset FF1=A11(u,BA1)set VHO=CreateItem((LoadInteger(LY,(GetHandleId(BA1)),(GetHandleId(u)))),GetUnitX(u),GetUnitY(u))call FlushChildHashtable(LY,(GetHandleId(BA1)))set JK=GetItemPlayer(BA1)call EL1(BA1)set VK=FD1(u,FR0[HH0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call UnitAddItem(u,VHO)set M10=falsecall UnitRemoveAbility(u,1110460233)endifendifset u=nullset BA1=nullset WIO=nullset VHO=nullendfunctionfunction W2O takes nothing returns booleanif IsUnitType(GetEventDamageSource(),UNIT_TYPE_MELEE_ATTACKER)==true thencall DisableTrigger(GetTriggeringTrigger())call P6I(GetEventDamageSource(),GetTriggerUnit(),3,GetEventDamage()*0.5)call EnableTrigger(GetTriggeringTrigger())endifreturn falseendfunctionfunction W3O takes nothing returns booleanif GetIssuedOrderId()==851971 thenif GetOrderTargetItem()!=null and C8O(GetItemTypeId(GetOrderTargetItem()))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659029))endifendifreturn falseendfunctionfunction W4O takes unit W5O returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,W5O,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(t,Condition(function W3O))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,W5O,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function W2O))set t=nullendfunctionfunction W6O takes player p returns integerlocal integer r=GetRandomInt(1,6)if TII(p)thenif r==1 thenreturn 1848651849elseif r==2 thenreturn 1848652338elseif r==3 thenreturn 1848652337elseif r==4 thenreturn 1848658777elseif r==5 thenreturn 1848658778elsereturn 1848659013endifelseif r==1 thenreturn 1848652339elseif r==2 thenreturn 1848652340elseif r==3 thenreturn 1848652341elseif r==4 thenreturn 1848658992elseif r==5 thenreturn 1848658993elsereturn 1848659252endifendifreturn 0endfunctionfunction W7O takes player p returns integerif GetRandomInt(1,3)==1 thenreturn 1697657426elseif TII(p)thenreturn 1697657160elsereturn 1697657178endifreturn 0endfunctionfunction W8O takes nothing returns nothinglocal unit W9O=CreateUnit(GetOwningPlayer(GetTriggerUnit()),W6O(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))local real x=GetUnitX(GetTriggerUnit())local real y=GetUnitY(GetTriggerUnit())local real a=GetUnitFacing(GetTriggerUnit())call COO(W9O)call SetUnitPosition(W9O,x+25*Cos(a*bj_DEGTORAD),y+25*Sin(a*bj_DEGTORAD))if WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifendfunctionfunction WAO takes nothing returns nothinglocal unit W9O=CreateUnit(GetOwningPlayer(GetTriggerUnit()),W7O(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))call COO(W9O)if WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifcall W4O(W9O)endfunctionfunction WBO takes nothing returns booleanif GetSpellAbilityId()==1093681718 thencall W8O()endifif GetSpellAbilityId()==1093683796 thencall WAO()endifreturn falseendfunctionfunction WCO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit W9O=(LoadUnitHandle(LY,(S5I),(124)))local integer WDO=(LoadInteger(LY,(S5I),(125)))local integer WEO=(LoadInteger(LY,(S5I),(106)))local integer WFO=(LoadInteger(LY,(S5I),(107)))local integer WGO=(LoadInteger(LY,(S5I),(108)))local integer WHO=(LoadInteger(LY,(S5I),(109)))local integer WZO=(LoadInteger(LY,(S5I),(110)))local integer WVO=(LoadInteger(LY,(S5I),(111)))local player p0=(LoadPlayerHandle(LY,(S5I),(118)))local player p1=(LoadPlayerHandle(LY,(S5I),(119)))local player p2=(LoadPlayerHandle(LY,(S5I),(120)))local player p3=(LoadPlayerHandle(LY,(S5I),(121)))local player p4=(LoadPlayerHandle(LY,(S5I),(122)))local player p5=(LoadPlayerHandle(LY,(S5I),(123)))local integer WWO=(LoadInteger(LY,(S5I),(112)))local integer WXO=(LoadInteger(LY,(S5I),(113)))local integer WYO=(LoadInteger(LY,(S5I),(114)))local integer WJO=(LoadInteger(LY,(S5I),(115)))local integer WKO=(LoadInteger(LY,(S5I),(116)))local integer WLO=(LoadInteger(LY,(S5I),(117)))call DisableTrigger(LY0)if GetTriggerEvalCount(t)==1 thencall UnitAddAbility(W9O,WDO)if WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifelseif WEO>0 thenset VK=CreateItem(WEO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p0,false)call SetItemUserData(VK,1)endifif WWO>0 thencall SetItemCharges(VK,WWO)endifif WFO>0 thenset VK=CreateItem(WFO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p1,false)call SetItemUserData(VK,1)endifif WXO>0 thencall SetItemCharges(VK,WXO)endifif WGO>0 thenset VK=CreateItem(WGO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p2,false)call SetItemUserData(VK,1)endifif WYO>0 thencall SetItemCharges(VK,WYO)endifif WHO>0 thenset VK=CreateItem(WHO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p3,false)call SetItemUserData(VK,1)endifif WJO>0 thencall SetItemCharges(VK,WJO)endifif WZO>0 thenset VK=CreateItem(WZO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p4,false)call SetItemUserData(VK,1)endifif WKO>0 thencall SetItemCharges(VK,WKO)endifif WVO>0 thenset VK=CreateItem(WVO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p5,false)call SetItemUserData(VK,1)endifif WLO>0 thencall SetItemCharges(VK,WLO)endifif WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall EnableTrigger(LY0)set t=nullset W9O=nullset p0=nullset p1=nullset p2=nullset p3=nullset p4=nullset p5=nullreturn falseendfunctionfunction WMO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit WNO=(LoadUnitHandle(LY,(S5I),(2)))local integer WSO=GetUnitTypeId(WNO)local real x=GetUnitX(WNO)local real y=GetUnitY(WNO)local item WTOlocal item WROlocal item WPOlocal item WQOlocal item WUOlocal item X0Olocal player p0local player p1local player p2local player p3local player p4local player p5local integer WEOlocal integer WFOlocal integer WGOlocal integer WHOlocal integer WZOlocal integer WVOlocal integer WWO=-1local integer WXO=-1local integer WYO=-1local integer WJO=-1local integer WKO=-1local integer WLO=-1local integer WDOlocal item BA1call FlushChildHashtable(LY,(S5I))call S0I(t)if WNO==null or IC1(WNO)thenreturn falseendifset t=CreateTrigger()set S5I=GetHandleId(t)set WTO=UnitItemInSlot(WNO,0)set WRO=UnitItemInSlot(WNO,1)set WPO=UnitItemInSlot(WNO,2)set WQO=UnitItemInSlot(WNO,3)set WUO=UnitItemInSlot(WNO,4)set X0O=UnitItemInSlot(WNO,5)set WEO=GetItemTypeId(WTO)set WFO=GetItemTypeId(WRO)set WGO=GetItemTypeId(WPO)set WHO=GetItemTypeId(WQO)set WZO=GetItemTypeId(WUO)set WVO=GetItemTypeId(X0O)set p0=GetItemPlayer(WTO)set p1=GetItemPlayer(WRO)set p2=GetItemPlayer(WPO)set p3=GetItemPlayer(WQO)set p4=GetItemPlayer(WUO)set p5=GetItemPlayer(X0O)set BA1=WTOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WWO=GetItemCharges(BA1)endifset BA1=WROif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WXO=GetItemCharges(BA1)endifset BA1=WPOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WYO=GetItemCharges(BA1)endifset BA1=WQOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WJO=GetItemCharges(BA1)endifset BA1=WUOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WKO=GetItemCharges(BA1)endifset BA1=X0Oif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WLO=GetItemCharges(BA1)endifcall EL1(WTO)call EL1(WRO)call EL1(WPO)call EL1(WQO)call EL1(WUO)call EL1(X0O)if WSO==1848651849 thenset WDO=1395667001elseif WSO==1848652338 thenset WDO=1395667030elseif WSO==1848652337 thenset WDO=1395667011elseif WSO==1848652339 thenset WDO=1395667013elseif WSO==1848652340 thenset WDO=1395667010elseif WSO==1848652341 thenset WDO=1395667014elseif WSO==1848658777 thenset WDO=1395667031elseif WSO==1848658778 thenset WDO=1395667033elseif WSO==1848658992 thenset WDO=1395667032elseif WSO==1848658993 thenset WDO=1395667012elseif WSO==1848659013 thenset WDO=1395667270elseif WSO==1848659252 thenset WDO=1395667253endifif GetRandomInt(1,10)==1 thenset WDO=1395667015endifif GetRandomInt(1,10)<3 thenset WDO=1395667254endifif WSO==1848651853 thenset WDO=1395667020elseif WSO==1848659027 thenset WDO=1395667020elseif WSO==1848658006 thenset WDO=1395667014endifif WSO==1697657160 thenset WDO=1395667250elseif WSO==1697657178 thenset WDO=1395667248elseif WSO==1697657426 thenset WDO=1395667252elseif WSO==1697657428 thenset WDO=1395667249elseif WSO==1697657427 thenset WDO=1395667255elseif WSO==1697657648 thenset WDO=1395667251endifcall SavePlayerHandle(LY,(S5I),(118),(p0))call SavePlayerHandle(LY,(S5I),(119),(p1))call SavePlayerHandle(LY,(S5I),(120),(p2))call SavePlayerHandle(LY,(S5I),(121),(p3))call SavePlayerHandle(LY,(S5I),(122),(p4))call SavePlayerHandle(LY,(S5I),(123),(p5))call SaveInteger(LY,(S5I),(106),(WEO))call SaveInteger(LY,(S5I),(107),(WFO))call SaveInteger(LY,(S5I),(108),(WGO))call SaveInteger(LY,(S5I),(109),(WHO))call SaveInteger(LY,(S5I),(110),(WZO))call SaveInteger(LY,(S5I),(111),(WVO))call SaveInteger(LY,(S5I),(112),(WWO))call SaveInteger(LY,(S5I),(113),(WXO))call SaveInteger(LY,(S5I),(114),(WYO))call SaveInteger(LY,(S5I),(115),(WJO))call SaveInteger(LY,(S5I),(116),(WKO))call SaveInteger(LY,(S5I),(117),(WLO))call SaveUnitHandle(LY,(S5I),(124),(WNO))call SaveInteger(LY,(S5I),(125),(WDO))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function WCO))set t=nullset WNO=nullset WTO=nullset WRO=nullset WPO=nullset WQO=nullset WUO=nullset X0O=nullset p0=nullset p1=nullset p2=nullset p3=nullset p4=nullset p5=nullreturn falseendfunctionfunction XIO takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,false)call TriggerAddCondition(t,Condition(function WMO))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))set t=nullendfunctionfunction X1O takes nothing returns booleanif GetSpellAbilityId()==1093685076 thencall XIO()endifreturn falseendfunctionfunction XOO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit W9O=(LoadUnitHandle(LY,(S5I),(124)))local integer WDO=(LoadInteger(LY,(S5I),(125)))local integer WEO=(LoadInteger(LY,(S5I),(106)))local integer WFO=(LoadInteger(LY,(S5I),(107)))local integer WGO=(LoadInteger(LY,(S5I),(108)))local integer WHO=(LoadInteger(LY,(S5I),(109)))local integer WZO=(LoadInteger(LY,(S5I),(110)))local integer WVO=(LoadInteger(LY,(S5I),(111)))local player p0=(LoadPlayerHandle(LY,(S5I),(118)))local player p1=(LoadPlayerHandle(LY,(S5I),(119)))local player p2=(LoadPlayerHandle(LY,(S5I),(120)))local player p3=(LoadPlayerHandle(LY,(S5I),(121)))local player p4=(LoadPlayerHandle(LY,(S5I),(122)))local player p5=(LoadPlayerHandle(LY,(S5I),(123)))local integer WWO=(LoadInteger(LY,(S5I),(112)))local integer WXO=(LoadInteger(LY,(S5I),(113)))local integer WYO=(LoadInteger(LY,(S5I),(114)))local integer WJO=(LoadInteger(LY,(S5I),(115)))local integer WKO=(LoadInteger(LY,(S5I),(116)))local integer WLO=(LoadInteger(LY,(S5I),(117)))call DisableTrigger(LY0)if GetTriggerEvalCount(t)==1 thencall UnitAddAbility(W9O,WDO)if WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifelseif WEO>0 thenset VK=CreateItem(WEO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p0,false)call SetItemUserData(VK,1)endifif WWO>0 thencall SetItemCharges(VK,WWO)endifif WFO>0 thenset VK=CreateItem(WFO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p1,false)call SetItemUserData(VK,1)endifif WXO>0 thencall SetItemCharges(VK,WXO)endifif WGO>0 thenset VK=CreateItem(WGO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p2,false)call SetItemUserData(VK,1)endifif WYO>0 thencall SetItemCharges(VK,WYO)endifif WHO>0 thenset VK=CreateItem(WHO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p3,false)call SetItemUserData(VK,1)endifif WJO>0 thencall SetItemCharges(VK,WJO)endifif WZO>0 thenset VK=CreateItem(WZO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p4,false)call SetItemUserData(VK,1)endifif WKO>0 thencall SetItemCharges(VK,WKO)endifif WVO>0 thenset VK=CreateItem(WVO,GetUnitX(W9O),GetUnitY(W9O))call UnitAddItem(W9O,VK)call SetItemPlayer(VK,p5,false)call SetItemUserData(VK,1)endifif WLO>0 thencall SetItemCharges(VK,WLO)endifif WM[GetPlayerId(GetOwningPlayer(W9O))]==false thencall UnitRemoveType(W9O,UNIT_TYPE_PEON)elsecall UnitAddType(W9O,UNIT_TYPE_PEON)endifcall SetUnitFlyHeight(W9O,240,0)call FlushChildHashtable(LY,(S5I))call S0I(t)endifcall EnableTrigger(LY0)set t=nullset W9O=nullset p0=nullset p1=nullset p2=nullset p3=nullset p4=nullset p5=nullreturn falseendfunctionfunction X2O takes unit WNO returns nothinglocal integer WSO=GetUnitTypeId(WNO)local real x=GetUnitX(WNO)local real y=GetUnitY(WNO)local item WTOlocal item WROlocal item WPOlocal item WQOlocal item WUOlocal item X0Olocal player p0local player p1local player p2local player p3local player p4local player p5local integer WEOlocal integer WFOlocal integer WGOlocal integer WHOlocal integer WZOlocal integer WVOlocal integer WWO=-1local integer WXO=-1local integer WYO=-1local integer WJO=-1local integer WKO=-1local integer WLO=-1local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer WDOlocal item BA1local integer ilocal item X3Oset i=0loopexitwhen i>5set X3O=UnitItemInSlot(WNO,i)if EB1(X3O)==GZ0 thencall UnitRemoveItem(WNO,X3O)endifset i=i+1endloopset WTO=UnitItemInSlot(WNO,0)set WRO=UnitItemInSlot(WNO,1)set WPO=UnitItemInSlot(WNO,2)set WQO=UnitItemInSlot(WNO,3)set WUO=UnitItemInSlot(WNO,4)set X0O=UnitItemInSlot(WNO,5)set WEO=GetItemTypeId(WTO)set WFO=GetItemTypeId(WRO)set WGO=GetItemTypeId(WPO)set WHO=GetItemTypeId(WQO)set WZO=GetItemTypeId(WUO)set WVO=GetItemTypeId(X0O)set p0=GetItemPlayer(WTO)set p1=GetItemPlayer(WRO)set p2=GetItemPlayer(WPO)set p3=GetItemPlayer(WQO)set p4=GetItemPlayer(WUO)set p5=GetItemPlayer(X0O)set BA1=WTOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WWO=GetItemCharges(BA1)endifset BA1=WROif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WXO=GetItemCharges(BA1)endifset BA1=WPOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WYO=GetItemCharges(BA1)endifset BA1=WQOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WJO=GetItemCharges(BA1)endifset BA1=WUOif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WKO=GetItemCharges(BA1)endifset BA1=X0Oif GetItemType(BA1)==ITEM_TYPE_ARTIFACT or EV1(EB1(BA1))or EZ1(EB1(BA1))thenset WLO=GetItemCharges(BA1)endifcall EL1(WTO)call EL1(WRO)call EL1(WPO)call EL1(WQO)call EL1(WUO)call EL1(X0O)if TII(GetOwningPlayer(WNO))thenset WDO=1395667017elseset WDO=1395667018endifif GetRandomInt(1,3)==1 thenset WDO=1395667034endifcall SavePlayerHandle(LY,(S5I),(118),(p0))call SavePlayerHandle(LY,(S5I),(119),(p1))call SavePlayerHandle(LY,(S5I),(120),(p2))call SavePlayerHandle(LY,(S5I),(121),(p3))call SavePlayerHandle(LY,(S5I),(122),(p4))call SavePlayerHandle(LY,(S5I),(123),(p5))call SaveInteger(LY,(S5I),(106),(WEO))call SaveInteger(LY,(S5I),(107),(WFO))call SaveInteger(LY,(S5I),(108),(WGO))call SaveInteger(LY,(S5I),(109),(WHO))call SaveInteger(LY,(S5I),(110),(WZO))call SaveInteger(LY,(S5I),(111),(WVO))call SaveInteger(LY,(S5I),(112),(WWO))call SaveInteger(LY,(S5I),(113),(WXO))call SaveInteger(LY,(S5I),(114),(WYO))call SaveInteger(LY,(S5I),(115),(WJO))call SaveInteger(LY,(S5I),(116),(WKO))call SaveInteger(LY,(S5I),(117),(WLO))call SaveUnitHandle(LY,(S5I),(124),(WNO))call SaveInteger(LY,(S5I),(125),(WDO))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function XOO))set t=nullset WNO=nullset WTO=nullset WRO=nullset WPO=nullset WQO=nullset WUO=nullset X0O=nullset p0=nullset p1=nullset p2=nullset p3=nullset p4=nullset p5=nullendfunctionfunction X4O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local item X5O=U8I(P7I,FR0[YG0])if X5O==null thenset X5O=U8I(P7I,FQ0[YG0])endifif X5O!=null thencall RemoveItem(X5O)call X2O(P7I)elsecall PZI(GetOwningPlayer(P7I),GetObjectName(1848652369))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction X6O takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call W4O(P7I)call TriggerRegisterTimerEvent(t,0.05,false)call TriggerAddCondition(t,Condition(function X4O))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendfunctionfunction X7O takes nothing returns booleanif GetSpellAbilityId()==1093683012 thencall X6O(GetTriggerUnit())endifreturn falseendfunctionfunction X8O takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local item BA1=GetManipulatedItem()local integer id=GetItemTypeId(BA1)local integer iif(id==FR0[ZC0]or id==FR0[ZK0])and IsUnitType(SFI,UNIT_TYPE_HERO)==true thenset MW0[GetPlayerId(GetOwningPlayer(SFI))]=GetItemX(BA1)set MX0[GetPlayerId(GetOwningPlayer(SFI))]=GetItemY(BA1)endifcall GOO(SFI,BA1)call G2O(SFI,BA1)if(GetItemTypeId(BA1)==FR0[WS0]or GetItemTypeId(BA1)==FR0[WT0])and RYI(SFI)thencall UnitRemoveItem(SFI,BA1)elseif GetItemTypeId(BA1)==FR0[X10]and IsUnitType(SFI,UNIT_TYPE_HERO)==true thenset i=(LoadInteger(LY,(GetHandleId(SFI)),(750)))if i>0 thenif(LoadBoolean(LY,(GetHandleId(SFI)),(751)))==false thencall SaveBoolean(LY,(GetHandleId(SFI)),(751),(true))call SetItemCharges(BA1,i)endifendifelseif GetItemTypeId(BA1)==FR0[VL0]and GetUnitTypeId(SFI)!=1848651852 and FX0==false thenset FW0=SFIset FX0=truecall FL1("AegisOn",GetPlayerId(GetOwningPlayer(SFI)))call QRI(bj_FORCE_ALL_PLAYERS,10.00,C0[GetPlayerId(GetOwningPlayer(SFI))]+GetUnitName(SFI)+"|r "+GetObjectName(1848657233))elseif GetItemTypeId(BA1)==FR0[YG0]and RWI(SFI)thencall X6O(SFI)elseif GetItemTypeId(BA1)==FR0[KL0]and GetUnitTypeId(SFI)==1164799855 thencall SetPlayerTechResearched(GetOwningPlayer(SFI),1378889802,1)elseif GetItemTypeId(BA1)==FR0[KS0]and GetUnitTypeId(SFI)==1211117641 thenset GK=SFIcall ExecuteFunc("X9O")elseif GetItemTypeId(BA1)==FR0[JK0]and GetUnitTypeId(SFI)==1160786738 thenset GK=SFIcall ExecuteFunc("XAO")elseif GetItemTypeId(BA1)==FR0[L70]and GetUnitTypeId(SFI)==1214344551 thenset GK=SFIcall ExecuteFunc("XBO")elseif GetItemTypeId(BA1)==FR0[L80]and GetUnitTypeId(SFI)==1311788373 thenset GK=SFIcall ExecuteFunc("XCO")elseif GetItemTypeId(BA1)==FR0[KJ0]and GetUnitTypeId(SFI)==1432580716 thencall UnitAddAbility(SFI,1093815106)call UnitRemoveAbility(SFI,1093815106)call AddUnitAnimationProperties(SFI,"upgrade",true)call SetPlayerTechResearched(GetOwningPlayer(SFI),1378889803,1)endifset SFI=nullset BA1=nullreturn falseendfunctionfunction XEO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1097163124 thencall SaveInteger(LY,(S5I),(34),(16))endifelseif IC1(P7I)or GetTriggerEventId()==EVENT_UNIT_DEATH or NPI==0 thencall UnitRemoveAbility(P7I,1093685334)call UnitRemoveAbility(P7I,1110456140)call SaveInteger(LY,(GetHandleId((P7I))),((4255)),(2))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+115/16)call SaveInteger(LY,(S5I),(34),(NPI-1))endifreturn falseendfunctionfunction XFO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId((P7I))),((4255)),(1))call IA1(P7I,1093685334)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(16))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XEO))call TriggerEvaluate(t)set P7I=nullset t=nullendfunctionfunction Tango_AddSingleTango takes nothing returns nothingcall UnitAddItemById(GetSpellTargetUnit(),1227903286)endfunctionfunction XGO takes nothing returns nothingif GetSpellAbilityId()==1097163124 or GetSpellAbilityId()==1093817927 thenif((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4255))))==1)==false and GetSpellTargetDestructable()!=null thencall XFO()elseif GetSpellTargetUnit()!=null thencall UnitAddItemById(GetSpellTargetUnit(),1227903286)endifendifendfunctionfunction XHO takes integer id,real x,real y returns nothingif IsPointInRegion(MT0,x,y)==false thenset MM0=MM0+1set MY0[MM0]=Player(id)set MJ0[MM0]=xset MK0[MM0]=yset ML0[MM0]=(TimerGetElapsed(M))endifendfunctionfunction XZO takes integer id,real x,real y returns integerlocal real GW1=(TimerGetElapsed(M))local integer i=0local integer NPI=0if IsPointInRegion(MT0,x,y)==true thenreturn NPIendifloopexitwhen i>MM0if(GW1<ML0[i]+MN0)and(QNI(x,y,MJ0[i],MK0[i])<MS0*2+50)and IsPlayerAlly(Player(id),MY0[i])==true thenset NPI=NPI+1endifset i=i+1endloopreturn NPIendfunctionfunction XVO takes integer MLI returns integerif MLI==GetPlayerId(BO[1])thenreturn 1747993161elseif MLI==GetPlayerId(BO[2])thenreturn 1747993163elseif MLI==GetPlayerId(BO[3])thenreturn 1747993159elseif MLI==GetPlayerId(BO[4])thenreturn 1747993158elseif MLI==GetPlayerId(BO[5])thenreturn 1747993164elseif MLI==GetPlayerId(CO[1])thenreturn 1747993160elseif MLI==GetPlayerId(CO[2])thenreturn 1747993162elseif MLI==GetPlayerId(CO[3])thenreturn 1747993165elseif MLI==GetPlayerId(CO[4])thenreturn 1747992885elseif MLI==GetPlayerId(CO[5])thenreturn 1747993166endifreturn 1747993166endfunctionfunction XWO takes integer MLI returns integerreturn 1747992920endfunctionfunction XXO takes integer MLI returns stringif MLI==GetPlayerId(BO[1])thenreturn"war3mapImported\\TeleportTarget_Blue.mdx"elseif MLI==GetPlayerId(BO[2])thenreturn"war3mapImported\\TeleportTarget_Teal.mdx"elseif MLI==GetPlayerId(BO[3])thenreturn"war3mapImported\\TeleportTarget_Purple.mdx"elseif MLI==GetPlayerId(BO[4])thenreturn"war3mapImported\\TeleportTarget_Yellow.mdx"elseif MLI==GetPlayerId(BO[5])thenreturn"war3mapImported\\TeleportTarget_Orange.mdx"elseif MLI==GetPlayerId(CO[1])thenreturn"war3mapImported\\TeleportTarget_Pink.mdx"elseif MLI==GetPlayerId(CO[2])thenreturn"war3mapImported\\TeleportTarget_Gray.mdx"elseif MLI==GetPlayerId(CO[3])thenreturn"war3mapImported\\TeleportTarget_LightBlue.mdx"elseif MLI==GetPlayerId(CO[4])thenreturn"war3mapImported\\TeleportTarget_DarkGreen.mdx"elseif MLI==GetPlayerId(CO[5])thenreturn"war3mapImported\\TeleportTarget_Brown.mdx"endifreturn"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"endfunctionfunction XYO takes integer MLI returns stringreturn"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl"endfunctionfunction XJO takes nothing returns booleanlocal real dif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(HK))==true and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false thenset d=QNI(BK,CK,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))if d<AK thenset AK=dset GK=GetFilterUnit()endifendifreturn falseendfunctionfunction XKO takes unit SWI,real x,real y returns unitlocal group g=NTI()set GK=nullset HK=SWIset AK=99999set BK=xset CK=ycall GroupEnumUnitsInRange(g,x,y,99999,Condition(function XJO))call NSI(g)set g=nullreturn GKendfunctionfunction XLO takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return id==1848657480 or id==1848657462 or id==1848657481 or id==1848657482endfunctionfunction XMO takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return id==1966092370 or id==1970107511 or id==1697657398 or id==1700946284endfunctionfunction XNO takes nothing returns booleanlocal real dif(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or XMO(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or XLO(GetFilterUnit()))and IC1(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(HK))==true and GetOwningPlayer(GetFilterUnit())!=EO and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 thenset d=QNI(BK,CK,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))if d<AK thenset AK=dset GK=GetFilterUnit()endifendifreturn falseendfunctionfunction XSO takes nothing returns booleanlocal real dif(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or XMO(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or XLO(GetFilterUnit()))and IC1(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(HK))==true and GetOwningPlayer(GetFilterUnit())!=EO and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 thenset d=QNI(BK,CK,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))if d<AK and d<325 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true thenset AK=dset GK=GetFilterUnit()endifendifreturn falseendfunctionfunction XTO takes unit SWI,real x,real y returns unitlocal group g=NTI()set GK=nullset HK=SWIset AK=99999set BK=xset CK=ycall GroupEnumUnitsInRange(g,x,y,99999,Condition(function XSO))if GK==null thencall GroupEnumUnitsInRange(g,x,y,99999,Condition(function XNO))endifcall NSI(g)set g=nullreturn GKendfunctionfunction XRO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit XPO=(LoadUnitHandle(LY,(S5I),(448)))local unit XQO=(LoadUnitHandle(LY,(S5I),(447)))local ubersplat AR1=(LoadUbersplatHandle(LY,(S5I),(131)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local real DC1=(LoadReal(LY,(S5I),(57)))local real GW1=(LoadReal(LY,(S5I),(442)))local integer id=GetPlayerId(GetOwningPlayer(SFI))local boolean XUO=falselocal integer i=0local integer EY1if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thenif GetSpellAbilityId()==1093751349 thenset XUO=trueendifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==1 thenif DC1>3 thencall SetUnitAnimationByIndex(XPO,1)call SetUnitAnimationByIndex(XQO,1)endifelseif NPI==2 thenset XUO=trueelseendifendifif XUO thencall SaveInteger(LY,(GetHandleId((SFI))),((4256)),(2))call KillUnit(XPO)call KillUnit(XQO)call DestroyUbersplat(AR1)call FlushChildHashtable(LY,(S5I))call S0I(t)if NPI==2 thencall DestroyEffect(AddSpecialEffect(XYO(id),GetUnitX(SFI),GetUnitY(SFI)))call DestroyEffect(AddSpecialEffect(XXO(id),x,y))call SetUnitX(SFI,x)call SetUnitY(SFI,y)call PauseUnit(SFI,true)call PauseUnit(SFI,false)call UPI(x,y,240)set GK=SFIcall ExecuteFunc("Y0O")endifendifset t=nullset SFI=nullset XPO=nullset XQO=nullset AR1=nullreturn falseendfunctionfunction YIO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit XPO=(LoadUnitHandle(LY,(S5I),(448)))local unit XQO=(LoadUnitHandle(LY,(S5I),(447)))local ubersplat AR1=(LoadUbersplatHandle(LY,(S5I),(131)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local real DC1=(LoadReal(LY,(S5I),(57)))local real GW1=(LoadReal(LY,(S5I),(442)))local integer id=GetPlayerId(GetOwningPlayer(SFI))local boolean XUO=falselocal integer i=0local integer EY1if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thenif GetSpellAbilityId()==1093808945 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call SaveInteger(LY,(GetHandleId((SFI))),((4256)),(2))call KillUnit(XPO)call KillUnit(XQO)call DestroyUbersplat(AR1)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveType(P8I,UNIT_TYPE_PEON)endifelseif GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call UnitRemoveType(P8I,UNIT_TYPE_PEON)call SaveInteger(LY,(GetHandleId((SFI))),((4256)),(2))call KillUnit(XPO)call KillUnit(XQO)call DestroyUbersplat(AR1)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(SFI),GetUnitY(SFI)))call SaveInteger(LY,(GetHandleId((SFI))),((4256)),(2))call KillUnit(XPO)call KillUnit(XQO)call DestroyUbersplat(AR1)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveType(P8I,UNIT_TYPE_PEON)call UPI(GetUnitX(P8I)-1,GetUnitY(P8I)-1,240)call SetUnitX(SFI,GetUnitX(P8I)-1)call SetUnitY(SFI,GetUnitY(P8I)-1)call PauseUnit(SFI,true)call PauseUnit(SFI,false)set GK=SFIcall ExecuteFunc("Y0O")call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(SFI),GetUnitY(SFI)))endifset t=nullset SFI=nullset XPO=nullset XQO=nullset AR1=nullset P8I=nullreturn falseendfunctionfunction Y1O takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location llocal real xlocal real ylocal real alocal trigger tlocal integer S5Ilocal unit XPOlocal unit XQOlocal ubersplat AR1local integer id=GetPlayerId(GetOwningPlayer(SFI))local integer NPIlocal real YOOset t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId((SFI))),((4256)),(1))if P8I==null thenset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)if x==MW0[id]and y==MX0[id]thenif TII(GetOwningPlayer(SFI))thenset x=GetUnitX(PQ)set y=GetUnitY(PQ)elseset x=GetUnitX(BX0)set y=GetUnitY(BX0)endifendifset P8I=XKO(SFI,x,y)call RemoveLocation(l)elseset x=GetUnitX(P8I)set y=GetUnitY(P8I)endifif QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))>MS0 thenset a=Atan2(y-GetUnitY(P8I),x-GetUnitX(P8I))set x=GetUnitX(P8I)+MS0*Cos(a)set y=GetUnitY(P8I)+MS0*Sin(a)elseif QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))<50 thenset a=Atan2(y-GetUnitY(P8I),x-GetUnitX(P8I))set x=GetUnitX(P8I)+120*Cos(a)set y=GetUnitY(P8I)+120*Sin(a)endifif IsPointInRegion(LN,x,y)==true thenset a=Atan2(y-GetUnitY(P8I),x-GetUnitX(P8I))set x=GetUnitX(P8I)+200*Cos(a)set y=GetUnitY(P8I)+200*Sin(a)endifset x=PTI(x)set y=PUI(y)if(IsUnitAlly(SFI,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(SFI))or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thencall PingMinimapEx(x,y,3,255,255,255,false)endifset XQO=CreateUnit(GetOwningPlayer(SFI),XVO(id),x,y,0)set XPO=CreateUnit(GetOwningPlayer(SFI),XWO(id),GetUnitX(SFI),GetUnitY(SFI),0)set AR1=CreateUbersplat(GetUnitX(SFI),GetUnitY(SFI),"SCTP",255,255,255,255,false,false)if IsUnitVisible(SFI,GetLocalPlayer())==true thencall SetUbersplatRenderAlways(AR1,true)elsecall SetUbersplatRenderAlways(AR1,false)endifset NPI=XZO(GetPlayerId(GetOwningPlayer(SFI)),x,y)set YOO=3if NPI>0 thenset YOO=4.5+0.5*NPIendifcall XHO(GetPlayerId(GetOwningPlayer(SFI)),x,y)if NPI>0 thencall SetUnitAnimationByIndex(XPO,2)call SetUnitAnimationByIndex(XQO,2)endifcall TriggerRegisterTimerEvent(t,YOO-3,false)call TriggerRegisterTimerEvent(t,YOO,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function XRO))call I41(GetOwningPlayer(SFI),YOO,x,y,200)call SaveUnitHandle(LY,(S5I),(447),(XQO))call SaveUnitHandle(LY,(S5I),(448),(XPO))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M)))*1.0))call SaveReal(LY,(S5I),(57),((YOO)*1.0))call SaveUbersplatHandle(LY,(S5I),(131),(AR1))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(34),(0))call AI1(SFI,XF,x,y,2400)set SFI=nullset P8I=nullset XPO=nullset XQO=nullset l=nullset t=nullset AR1=nullendfunctionfunction Y2O takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location llocal real xlocal real ylocal real alocal trigger tlocal integer S5Ilocal unit XPOlocal unit XQOlocal ubersplat AR1local integer id=GetPlayerId(GetOwningPlayer(SFI))local integer NPIlocal real YOOset t=CreateTrigger()set S5I=GetHandleId(t)if P8I==null thenset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)if x==MW0[id]and y==MX0[id]thenif TII(GetOwningPlayer(SFI))thenset x=GetUnitX(PQ)set y=GetUnitY(PQ)elseset x=GetUnitX(BX0)set y=GetUnitY(BX0)endifendifset P8I=XTO(SFI,x,y)call RemoveLocation(l)endifcall SaveInteger(LY,(GetHandleId((SFI))),((4256)),(1))set x=GetUnitX(P8I)set y=GetUnitY(P8I)if(IsUnitAlly(SFI,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(SFI))or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thencall PingMinimapEx(x,y,3,255,255,255,false)endifset AR1=CreateUbersplat(GetUnitX(SFI),GetUnitY(SFI),"SCTP",255,255,255,255,false,false)if IsUnitVisible(SFI,GetLocalPlayer())==true thencall SetUbersplatRenderAlways(AR1,true)elsecall SetUbersplatRenderAlways(AR1,false)endifset YOO=3call UnitAddType(P8I,UNIT_TYPE_PEON)call TriggerRegisterTimerEvent(t,YOO,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function YIO))call I41(GetOwningPlayer(SFI),YOO,x,y,200)call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M)))*1.0))call SaveReal(LY,(S5I),(57),((YOO)*1.0))call SaveUbersplatHandle(LY,(S5I),(131),(AR1))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(0))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",SFI,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",SFI,"origin")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",P8I,"origin")))call AI1(SFI,XF,x,y,2400)set SFI=nullset P8I=nullset XPO=nullset XQO=nullset l=nullset t=nullset AR1=nullendfunctionfunction Y3O takes nothing returns nothingif GetSpellAbilityId()==1093751349 and RYI(GetTriggerUnit())==false thencall Y1O()endifif GetSpellAbilityId()==1093808945 thencall Y2O()endifendfunctionfunction Y4O takes nothing returns nothingif MR0==(LoadInteger(LY,(GetHandleId(GetEnumUnit())),(784)))thencall KillUnit(GetEnumUnit())endifendfunctionfunction Y5O takes unit u returns booleanlocal integer i=GetUnitTypeId(u)return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830endfunctionfunction Y6O takes nothing returns booleanreturn Y5O(GetFilterUnit())endfunctionfunction Y7O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit Y8Olocal unit Y9Olocal integer YAOlocal integer YBOlocal group g=NTI()local real a=GetUnitFacing(P7I)*bj_DEGTORADlocal real x1=GetUnitX(P7I)+50*Cos(a)local real y1=GetUnitY(P7I)+50*Sin(a)local real x2=GetUnitX(P7I)+50*Cos(a)local real y2=GetUnitY(P7I)+50*Sin(a)if GetSpellAbilityId()==1093683266 thenset YAO=1848651848set YBO=1848651850elseif GetSpellAbilityId()==1093682227 thenset YAO=1848651847set YBO=1848651841elseif GetSpellAbilityId()==1093682246 thenset YAO=1848651851set YBO=1848651830endifset MR0=GetUnitTypeId(P7I)call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function Y6O))call ForGroup(g,function Y4O)call NSI(g)set Y8O=CreateUnit(GetOwningPlayer(P7I),YAO,x1,y1,GetUnitFacing(P7I))call SaveInteger(LY,(GetHandleId(Y8O)),(784),(MR0))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",Y8O,"origin"))call UnitApplyTimedLife(Y8O,1112820806,40)set Y9O=CreateUnit(GetOwningPlayer(P7I),YBO,x2,y2,GetUnitFacing(P7I))call SaveInteger(LY,(GetHandleId(Y9O)),(784),(MR0))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",Y9O,"origin"))call UnitApplyTimedLife(Y9O,1112820806,40)set g=nullset Y8O=nullset Y9O=nullset P7I=nullendfunctionfunction YCO takes nothing returns nothingif GetSpellAbilityId()==1093683266 or GetSpellAbilityId()==1093682227 or GetSpellAbilityId()==1093682246 thencall Y7O()endifendfunctionfunction YDO takes nothing returns nothingif GetSpellAbilityId()==1093748304 thencall U5I("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",GetTriggerUnit(),"origin",3.5)call AH1(GetTriggerUnit(),1093747534,1,3.5)endifendfunctionfunction YEO takes nothing returns booleanreturn((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4323))))==1)endfunctionfunction YFO takes nothing returns nothinglocal group glocal unit uif GetSpellAbilityId()==1093817908 and Y5O(GetSpellTargetUnit())==false thenset g=NTI()call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function YEO))set u=FirstOfGroup(g)call NSI(g)if u!=null thencall KillUnit(u)endifcall SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)call SaveInteger(LY,(GetHandleId((GetSpellTargetUnit()))),((4323)),(1))call UnitAddAbility(GetSpellTargetUnit(),1097167976)call UnitAddAbility(GetSpellTargetUnit(),1094939243)call IA1(GetSpellTargetUnit(),1093818692)call QSI(GetSpellTargetUnit())endifendfunctionfunction YGO takes integer i returns integerif i==MP0 thenreturn N20endifif i==MQ0 thenreturn N30endifif i==MU0 thenreturn N40endifif i==N00 thenreturn N50endifif i==NI0 thenreturn N60endifif i==N10 thenreturn N70endifif i==NO0 thenreturn N80endifreturn 0endfunctionfunction YHO takes integer i returns integerif i==MP0 thenreturn 10endifif i==MQ0 thenreturn 9endifif i==MU0 thenreturn 8endifif i==N00 thenreturn 7endifif i==NI0 thenreturn 6endifif i==N10 thenreturn 5endifif i==NO0 thenreturn 4endifreturn 0endfunctionfunction YZO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if IC1(SFI)==false and SFI!=null thencall SetUnitScale(SFI,SMI(SFI)*OAI,SMI(SFI)*OAI,SMI(SFI)*OAI)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction YVO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)local trigger t=CreateTrigger()local real DC1=YHO(GetSpellAbilityId())call O21(SFI,N90,DC1)call UnitMakeAbilityPermanent(SFI,true,N90)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),N90,false)call UnitAddAbility(I01,YGO(GetSpellAbilityId()))call IssueTargetOrder(I01,"antimagicshell",SFI)call DU1(SFI,0,0)call UnitRemoveAbility(SFI,1112044643)call UnitRemoveAbility(SFI,1110454869)if RYI(SFI)thencall O01(SFI,DC1,3)elsecall O01(SFI,DC1,1.4)endifcall TriggerRegisterTimerEvent(t,DC1+7,false)call TriggerAddCondition(t,Condition(function YZO))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))set t=nullset SFI=nullset I01=nullendfunctionfunction YWO takes nothing returns nothingif YGO(GetSpellAbilityId())>0 thencall YVO()endifendfunctionfunction YXO takes nothing returns nothingif((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4258))))==1)==true thencall PZI(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365)+" "+GetUnitName(GetEnumUnit())+" "+GetObjectName(1848652371))elseif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall SCI(GetEnumUnit(),4258,25)endifcall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+250)endifendfunctionfunction YYO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),775,Condition(function CS1))call ForGroup(g,function YXO)call NSI(g)set P7I=nullset g=nullendfunctionfunction YJO takes nothing returns nothingif GetSpellAbilityId()==1093681995 thencall YYO()endifendfunctionfunction YKO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093873985)call UnitRemoveAbility(P7I,1093818698)call UnitRemoveAbility(P7I,1093818696)call S0I(t)call FlushChildHashtable(LY,(S5I))set t=nullset P7I=nullreturn falseendfunctionfunction YLO takes nothing returns nothinglocal trigger tlocal integer S5Iif((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4346))))==1)==true thencall PZI(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848659537)+" "+GetUnitName(GetEnumUnit()))elseif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall SCI(GetEnumUnit(),4346,70)endifset t=CreateTrigger()set S5I=GetHandleId(t)call IA1(GetEnumUnit(),1093873985)call IA1(GetEnumUnit(),1093818698)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093873985,false)call IA1(GetEnumUnit(),1093818696)call TriggerRegisterTimerEvent(t,10,false)call TriggerRegisterDeathEvent(t,GetEnumUnit())call TriggerAddCondition(t,Condition(function YKO))call SaveUnitHandle(LY,(S5I),(2),(GetEnumUnit()))set t=nullendifendfunctionfunction YMO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()call PlaySoundOnUnitBJ(BG,100,P7I)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),775,Condition(function CS1))call ForGroup(g,function YLO)call NSI(g)set P7I=nullset g=nullendfunctionfunction YNO takes nothing returns nothingif GetSpellAbilityId()==1093818695 thencall YMO()endifendfunctionfunction YSO takes nothing returns nothingif((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4278))))==1)==true thencall PZI(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365))elseif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall SCI(GetEnumUnit(),4278,50)endifif GetUnitAbilityLevel(GetEnumUnit(),1110458964)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110458965)==0 thencall IssueTargetOrder(NA0,"antimagicshell",GetEnumUnit())endifendifendfunctionfunction YTO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()set NA0=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(NA0,1093748054)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),925,Condition(function CP1))call ForGroup(g,function YSO)call NSI(g)set P7I=nullset g=nullendfunctionfunction YRO takes nothing returns nothingif GetSpellAbilityId()==1093748055 thencall YTO()endifendfunctionfunction YPO takes nothing returns nothingif GetSpellAbilityId()==1093677655 thencall UnitResetCooldown(GetTriggerUnit())endifendfunctionfunction YQO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real PAI=(LoadReal(LY,(S5I),(20)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or GetUnitAbilityLevel(GetTriggerUnit(),1110455089)==0 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)set JJI=truecall P6I(P7I,P8I,1,PAI)set JJI=falseif PAI>0 thencall UYI("+"+I2S(R2I(PAI)),1,P8I,0.023,255,0,0,216)endifelseif GetEventDamage()>1 thencall SaveReal(LY,(S5I),(20),((PAI+GetEventDamage()*0.3)*1.0))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction YUO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl",P8I,"overhead")))call SaveReal(LY,(S5I),(20),((0)*1.0))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,5,false)call TriggerAddCondition(t,Condition(function YQO))set t=nullreturn falseendfunctionfunction J0O takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function YUO))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))set t=nullendfunctionfunction JIO takes nothing returns nothingif GetSpellAbilityId()==1093682756 and NNI(GetSpellTargetUnit())==false thencall J0O()endifendfunctionfunction J1O takes unit u,real d returns booleanif IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)>0 thenreturn d>5endifreturn trueendfunctionfunction JOO takes nothing returns nothinglocal unit I01if NC0>0 thenset NC0=NC0-1set I01=CreateUnit(GetOwningPlayer(NB0),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)call UnitAddAbility(I01,1093684022)call IssueTargetOrder(I01,"forkedlightning",GetEnumUnit())endifset I01=nullendfunctionfunction J2O takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01local unit P7Ilocal group gif GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SCI(GetTriggerUnit(),4257,1)set P7I=(LoadUnitHandle(LY,(S5I),(2)))set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)call UnitAddAbility(I01,1093684022)set NB0=P7Iset GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),925,Condition(function CA1))set NC0=5if QLI(GetTriggerUnit(),GetEventDamageSource())<900 thenset NC0=NC0-1call IssueTargetOrder(I01,"forkedlightning",GetEventDamageSource())endifcall GroupRemoveUnit(g,GetEventDamageSource())call ForGroup(g,function JOO)call NSI(g)endifset t=nullset g=nullset I01=nullset P7I=nullendfunctionfunction J3O takes nothing returns booleanif(GetTriggerEventId()==EVENT_UNIT_DAMAGED and J1O(GetEventDamageSource(),GetEventDamage())and GetRandomInt(1,100)<21 and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4257))))==1)==false)or GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall J2O()endifreturn falseendfunctionfunction J4O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if P8I==null thenset P8I=P7Iendifcall SCI(P8I,4279,15)call TriggerRegisterTimerEvent(t,15,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function J3O))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",P8I,"origin")))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullset P8I=nullendfunctionfunction J5O takes nothing returns nothingif GetSpellAbilityId()==1093683788 and((LoadInteger(LY,(GetHandleId((GetSpellTargetUnit()))),((4279))))==1)==false thencall J4O()endifendfunctionfunction J6O takes nothing returns nothinglocal unit J7O=GetTriggerUnit()local item X5O=U8I(J7O,FR0[YG0])if X5O==null thenset X5O=U8I(J7O,FQ0[YG0])endifif X5O!=null thencall EL1(X5O)call UnitRemoveAbility(J7O,1093686866)call UnitAddAbility(J7O,1093686869)call SetUnitState(J7O,UNIT_STATE_MANA,400)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",J7O,"origin"))elsecall PZI(GetOwningPlayer(J7O),GetObjectName(1848652369))endifset J7O=nullendfunctionfunction J8O takes nothing returns nothingif GetSpellAbilityId()==1093686866 thencall J6O()endifendfunctionfunction J9O takes nothing returns nothinglocal unit P8I=GetEnumUnit()local group JAO=ND0local unit P7I=NE0if IsUnitInGroup(P8I,JAO)==false thencall GroupAddUnit(JAO,P8I)call IssueTargetOrder(NF0,"slow",P8I)set JJI=truecall P6I(P7I,P8I,1,200)set JJI=falsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",P8I,"origin"))endifset P8I=nullset JAO=nullset P7I=nullendfunctionfunction JBO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local real dlocal real xlocal real x0=GetUnitX(P7I)local real ylocal real y0=GetUnitY(P7I)local group g=NTI()local integer NPI=GetTriggerEvalCount(t)local integer icall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))set ND0=JAOset NE0=P7Iset NF0=(LoadUnitHandle(LY,(S5I),(132)))if GetTriggerEvalCount(t)>37 thencall KillUnit(I01)call NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset d=NPI*21set i=0loopexitwhen i>36set x=x0+d*Cos(360*i/36*bj_DEGTORAD)set y=y0+d*Sin(360*i/36*bj_DEGTORAD)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,150,Condition(function C81))call ForGroup(g,function J9O)set i=i+1endloopendifcall NSI(g)set t=nullset I01=nullset JAO=nullset P7I=nullset g=nullreturn falseendfunctionfunction JCO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local group JAO=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(SFI),1747990833,x,y,0)local unit JDO=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call UnitAddAbility(JDO,1093686320)call SaveGroupHandle(LY,(S5I),(133),(JAO))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(132),(JDO))call SaveUnitHandle(LY,(S5I),(2),(SFI))call TriggerRegisterTimerEvent(t,0.06,true)call TriggerAddCondition(t,Condition(function JBO))set t=nullset JAO=nullset I01=nullset JDO=nullset SFI=nullendfunctionfunction JEO takes nothing returns nothingif GetSpellAbilityId()==1093686329 thencall JCO()endifendfunctionfunction JFO takes unit P7I,integer JGO returns nothinglocal integer S5I=GetHandleId(P7I)call SaveInteger(LY,(S5I),(750),(JGO))endfunctionfunction JHO takes nothing returns nothinglocal integer i=0local integer EY1=0local boolean JZO=falseif GetSpellAbilityId()==1093683801 thenloopexitwhen i>5if F01(UnitItemInSlot(GetTriggerUnit(),i))==HK0 or F01(UnitItemInSlot(GetTriggerUnit(),i))==X10 thenset EY1=GetItemCharges(UnitItemInSlot(GetTriggerUnit(),i))if EY1>0 thencall SetItemCharges(UnitItemInSlot(GetTriggerUnit(),i),0)call JFO(GetTriggerUnit(),0)if JZO==false thenset JZO=truecall SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+15*EY1)call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+15*EY1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetTriggerUnit(),"origin"))endifendifreturnendifset i=i+1endloopendifendfunctionfunction JVO takes integer id returns booleanlocal integer i=1loopexitwhen i>EC0if id==EB0[i]thenreturn falseendifset i=i+1endloopreturn trueendfunctionfunction JWO takes unit JXO,unit P7I returns nothingif IsUnitVisible(JXO,GetOwningPlayer(P7I))==false and GetRandomInt(1,100)<10 thencall PlaySoundOnUnitBJ(IF,100,P7I)endifendfunctionfunction JYO takes nothing returns nothinglocal unit SFI=GetEnumUnit()local integer i=0loopexitwhen i>5if IsUnitVisible(GetTriggerUnit(),GetOwningPlayer(GetEnumUnit()))==true thenif F01(UnitItemInSlot(SFI,i))==HK0 or F01(UnitItemInSlot(SFI,i))==X10 thenif F01(UnitItemInSlot(SFI,i))==X10 thenif GetItemCharges(UnitItemInSlot(SFI,i))==17 thencall JWO(GetTriggerUnit(),SFI)endifcall JFO(SFI,Q9I(GetItemCharges(UnitItemInSlot(SFI,i))+1,17))call SetItemCharges(UnitItemInSlot(SFI,i),Q9I(GetItemCharges(UnitItemInSlot(SFI,i))+1,17))elseif GetItemCharges(UnitItemInSlot(SFI,i))==10 thencall JWO(GetTriggerUnit(),SFI)endifcall JFO(SFI,Q9I(GetItemCharges(UnitItemInSlot(SFI,i))+1,10))call SetItemCharges(UnitItemInSlot(SFI,i),Q9I(GetItemCharges(UnitItemInSlot(SFI,i))+1,10))endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",SFI,"chest"))set i=5endifendifset i=i+1endloopset SFI=nullendfunctionfunction JJO takes nothing returns nothinglocal group g=NTI()local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)call GroupEnumUnitsInRange(g,x,y,1225,Condition(function D01))call ForGroup(g,function JYO)call NSI(g)set g=nullset P7I=nullendfunctionfunction JKO takes nothing returns nothingif JVO(GetSpellAbilityId())==true and TRI(GetSpellAbilityId())==true and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and V81(GetSpellAbilityId())==false thencall JJO()endifendfunctionfunction JLO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit JMO=(LoadUnitHandle(LY,(S5I),(134)))if GetTriggerEventId()!=EVENT_UNIT_DEATH thencall UnitRemoveAbility(JMO,1093744466)call UnitRemoveAbility(JMO,1093809222)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset JMO=nullreturn falseendfunctionfunction JNO takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and IsUnitAlly(GetFilterUnit(),NG0)==true and GetOwningPlayer(GetFilterUnit())!=EO and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1848657482 and GetUnitTypeId(GetFilterUnit())!=1848657481 and GetUnitTypeId(GetFilterUnit())!=1848657462 and GetUnitTypeId(GetFilterUnit())!=1848657480endfunctionfunction JSO takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit JMO=GetEnumUnit()local string scall UnitAddAbility(JMO,1093744466)call UnitAddAbility(JMO,1093809222)if TII(NG0)thenset s="effects\\GlyphSent.mdx"elseset s="effects\\GlyphScourge.mdx"endifcall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(s,JMO,"origin")))call SaveUnitHandle(LY,(S5I),(134),(JMO))call TriggerRegisterUnitEvent(t,JMO,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,NV0,false)call TriggerAddCondition(t,Condition(function JLO))set t=nullset JMO=nullendfunctionfunction JTO takes unit JRO,player p returns nothinglocal integer iif TII(p)thenset i=1if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=2if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=3if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=4if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=5if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifelseset i=7if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=8if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=9if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=10if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifset i=11if JRO!=D30[i]thencall IssueImmediateOrder(D30[i],"coldarrows")endifendifendfunctionfunction JPO takes nothing returns nothinglocal group glocal unit JRO=GetTriggerUnit()local player p=GetOwningPlayer(JRO)if(TII(p)and NH0==false)or(TII(p)==false and NZ0==false)thenset g=NTI()set NG0=pcall GroupEnumUnitsInRange(g,0,0,12000,Condition(function JNO))call ForGroup(g,function JSO)call NSI(g)if TII(p)thenset NH0=truecall JTO(JRO,p)set NH0=falseelseset NZ0=truecall JTO(JRO,p)set NZ0=falseendifendifset g=nullset JRO=nullset p=nullendfunctionfunction JQO takes nothing returns nothingif GetSpellAbilityId()==1093743665 or GetSpellAbilityId()==1093752649 thencall JPO()endifendfunctionfunction JUO takes nothing returns nothingif GetSpellAbilityId()==1093743191 and GetUnitAbilityLevel(GetTriggerUnit(),1114665832)>0 thencall UnitRemoveAbility(GetTriggerUnit(),1114665832)endifendfunctionfunction K0O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif RSI(GetEventDamage())and IsUnitAlly(GetEventDamageSource(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and NW0==false thenif GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 thencall DisableTrigger(t)set NW0=truecall P6I(GetTriggerUnit(),GetEventDamageSource(),3,GetEventDamage())set NW0=falsecall EnableTrigger(t)endifendifendifset t=nullreturn falseendfunctionfunction KIO takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,4.5,false)call TriggerAddCondition(t,Condition(function K0O))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpikeBarrier\\SpikeBarrier.mdl",P7I,"chest")))set t=nullset P7I=nullendfunctionfunction K1O takes nothing returns nothingif GetSpellAbilityId()==1093743959 thencall KIO()endifendfunctionfunction KOO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real a=(LoadReal(LY,(S5I),(137)))local real d=(LoadReal(LY,(S5I),(138)))local real x=PTI(GetUnitX(P8I)+d/10*Cos(a*bj_DEGTORAD))local real y=PUI(GetUnitY(P8I)+d/10*Sin(a*bj_DEGTORAD))if GetTriggerEvalCount(t)==11 or GetTriggerEventId()==EVENT_UNIT_DEATH or((LoadInteger(LY,(GetHandleId((P8I))),((4260))))==1)==true thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))if((LoadInteger(LY,(GetHandleId((P8I))),((4306))))==1)==false and((LoadInteger(LY,(GetHandleId((P8I))),((4324))))==1)==false and GetUnitAbilityLevel(P8I,1110456406)==0 and GetUnitAbilityLevel(P8I,1110459975)==0 thencall UPI(x,y,150)call SetUnitX(P8I,x)call SetUnitY(P8I,y)endifendifset P8I=nullset t=nullreturn falseendfunctionfunction K2O takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real xlocal real ylocal real dlocal real alocal integer i=-1local boolean K3O=falseif GetSpellTargetItem()!=null thenset P8I=GetTriggerUnit()endifcall SCI(P8I,4414,3)set a=GetUnitFacing(P8I)loopexitwhen K3O or i==23set i=i+1set x=PTI(GetUnitX(P8I)+(600-i*25)*Cos(a*bj_DEGTORAD))set y=PUI(GetUnitY(P8I)+(600-i*25)*Sin(a*bj_DEGTORAD))if(IsPointInRegion(LN,((x)*1.0),((y)*1.0)))==false thenset K3O=trueendifendloopset d=QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))call TriggerRegisterTimerEvent(t,0.04,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function KOO))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(138),((d)*1.0))set P8I=nullset t=nullendfunctionfunction K4O takes nothing returns nothingif GetSpellAbilityId()==1093744973 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true or(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))==false thencall K2O()endifendifendfunctionfunction K5O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,1093751107)call UnitRemoveAbility(P7I,1110459225)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset P7I=nullset t=nullreturn falseendfunctionfunction K6O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer DC1=(LoadInteger(LY,(S5I),(34)))if GetTriggerEvalCount(t)>DC1/0.1 or GetTriggerEventId()==EVENT_UNIT_DEATH or((LoadInteger(LY,(GetHandleId((P7I))),((4256))))==1)thencall UnitRemoveAbility(P7I,1097167980)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset P7I=nullset t=nullreturn falseendfunctionfunction K7O takes unit u,integer DC1 returns nothinglocal unit P7I=ulocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UnitAddAbility(P7I,1097167980)call UnitMakeAbilityPermanent(P7I,true,1097167980)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1097167980,false)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function K6O))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(DC1))set P7I=nullset t=nullendfunctionfunction EtherBlast_AddToEnemies takes nothing returns nothingcall K7O(GetEnumUnit(),3)endfunctionfunction EtherBlast_DamageEnemies takes nothing returns nothingcall P6I(GetTriggerUnit(),GetEnumUnit(),1,NX0)endfunctionfunction K8O takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))local trigger tlocal integer DC1=3if P7I==P8I thenset DC1=4endifif IsPlayerAlly(GetOwningPlayer(P8I),GetOwningPlayer(P7I))==true and P7I!=P8I thencall K7O(P8I,4)elseif P7I!=P8I thenset t=CreateTrigger()set S5I=GetHandleId(t)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093751107,false)call UnitAddAbility(P8I,1093751107)call UnitMakeAbilityPermanent(P8I,true,1093751107)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function K5O))call SaveUnitHandle(LY,(S5I),(2),(P8I))call K7O(P8I,DC1)call UYI("+"+I2S(R2I(PAI)),2,P8I,0.027,3,216,120,216)set JJI=truecall P6I(P7I,P8I,1,PAI)set JJI=falseelsecall K7O(P7I,DC1)endifset P7I=nullset P8I=nullendfunctionfunction K9O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t2=IJ1(P7I,P8I,1747993171,"K8O",1000,false)local integer KAO=GetHandleId(t2)local integer KBO=SEI(P7I)local real KCOif KBO==2 thenset KCO=GetHeroAgi(P7I,true)elseif KBO==3 thenset KCO=GetHeroStr(P7I,true)elseif KBO==1 thenset KCO=GetHeroInt(P7I,true)endifcall SaveReal(LY,(KAO),(20),((KCO*2.0+75)*1.0))set P7I=nullset P8I=nullset t2=nullendfunctionfunction KDO takes nothing returns nothingif GetSpellAbilityId()==1093751108 and(IsPlayerAlly(GetOwningPlayer(GetSpellTargetUnit()),GetOwningPlayer(GetTriggerUnit()))==true or NNI(GetSpellTargetUnit())==false)thencall K9O()endifendfunctionfunction KEO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(t)>40 or GetTriggerEventId()==EVENT_UNIT_DEATH or RKI(P7I)or((LoadInteger(LY,(GetHandleId((P7I))),((4256))))==1)thencall UnitRemoveAbility(P7I,1097167980)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset P7I=nullset t=nullreturn falseendfunctionfunction KFO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger tlocal integer S5Iif RYI(P7I)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call UnitAddAbility(P7I,1097167980)call UnitMakeAbilityPermanent(P7I,true,1097167980)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1097167980,false)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function KEO))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset P7I=nullset t=nullendfunctionfunction KGO takes nothing returns nothingif GetSpellAbilityId()==1093747011 and RKI(GetTriggerUnit())==false thencall KFO()endifendfunctionfunction KHO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real KZO=(LoadReal(LY,(S5I),(529)))local real KVO=(LoadReal(LY,(S5I),(530)))local real KWO=GetUnitState(P7I,UNIT_STATE_MANA)local real KXO=GetUnitState(P7I,UNIT_STATE_MAX_MANA)local real KYO=(LoadReal(LY,(S5I),(668)))local real KJO=GetUnitStatePercent(P7I,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA)local real KKO=(KYO-KJO)/100if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)==20*10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if KZO<150 thencall SetUnitState(P7I,UNIT_STATE_MANA,KWO-(150-KZO-KVO))endifelseif KKO>0 thenset KZO=KZO+KKO*KXOif KVO>0 thenif KKO*KXO>KVO thencall SetUnitState(P7I,UNIT_STATE_MANA,KWO+KVO)set KVO=0elseif KVO>(KXO-KWO)thenset KVO=KVO-(KXO-KWO)call SetUnitState(P7I,UNIT_STATE_MANA,KXO)elseset KVO=KVO-KKO*KXOcall SetUnitState(P7I,UNIT_STATE_MANA,KWO+KKO*KXO)endifendifendifendifset KYO=KJOcall SaveReal(LY,(S5I),(668),((KYO)*1.0))call SaveReal(LY,(S5I),(529),((KZO)*1.0))call SaveReal(LY,(S5I),(530),((KVO)*1.0))endifset t=nullset P7I=nullreturn falseendfunctionfunction KLO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real KMO=GetUnitState(P7I,UNIT_STATE_LIFE)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real KWO=GetUnitState(P7I,UNIT_STATE_MANA)if KMO>151 thencall SetUnitState(P7I,UNIT_STATE_LIFE,KMO-150)elsecall SetUnitState(P7I,UNIT_STATE_LIFE,1)endifcall U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P7I,"origin",2)call SetUnitState(P7I,UNIT_STATE_MANA,KWO+150)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function KHO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(242),((GetUnitState(P7I,UNIT_STATE_MANA))*1.0))call SaveReal(LY,(S5I),(529),((0)*1.0))call SaveReal(LY,(S5I),(668),((GetUnitStatePercent(P7I,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA))*1.0))if(KWO+150)>GetUnitState(P7I,UNIT_STATE_MAX_MANA)thencall SaveReal(LY,(S5I),(530),(((KWO+150)-GetUnitState(P7I,UNIT_STATE_MAX_MANA))*1.0))endifset P7I=nullendfunctionfunction KNO takes nothing returns nothingif GetSpellAbilityId()==1093751096 thencall KLO()endifendfunctionfunction KSO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real xlocal real yif TII(GetOwningPlayer(P7I))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifcall IssuePointOrder(P7I,"move",x,y)set P7I=nullendfunctionfunction KTO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real xlocal real yif TII(GetOwningPlayer(P7I))thenset x=-4533set y=1158elseset x=3190set y=-35endifcall IssuePointOrder(P7I,"move",x,y)set P7I=nullendfunctionfunction KRO takes nothing returns nothingif GetSpellAbilityId()==1093747027 thencall KSO()elseif GetSpellAbilityId()==1093815123 thencall KTO()endifendfunctionfunction KPO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()call SaveBoolean(LY,(GetHandleId(SFI)),(129),(true))set SFI=nullendfunctionfunction KQO takes nothing returns nothingif(GetSpellAbilityId()==1093681720 or GetSpellAbilityId()==1093752645)and NNI(GetTriggerUnit())==true thencall KPO()endifendfunctionfunction KUO takes integer id returns booleanreturn id==1969711215 or id==1970169187 or id==1702061422 or id==1701081721 or id==1966092337 or id==1966092338 or id==1697656918 or id==1697656919 or id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370endfunctionfunction L0O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>8 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall P6I(P7I,P8I,3,150.0/8.0)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction LIO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and(KUO(GetUnitTypeId(GetEventDamageSource()))==false and(GetOwningPlayer(GetEventDamageSource())!=DO or GetUnitTypeId(GetEventDamageSource())==1848651852)and GetEventDamage()>0)or NY0==true)thencall UnitRemoveAbility(P8I,1110459207)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction L1O takes nothing returns nothinglocal trigger tlocal integer S5Ilocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01local integer i=0local boolean FW1=falselocal boolean K3O=falselocal integer EY1if P8I==null thenset P8I=GetTriggerUnit()endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)loopexitwhen i>5 or K3Oif F01(UnitItemInSlot(P7I,i))==X60 thenset EY1=GetItemCharges(UnitItemInSlot(P7I,i))if EY1>0 thenset FW1=trueset EY1=EY1-1elseset K3O=trueset FW1=falseendifendifset i=i+1endloopif FW1==true thenset t=CreateTrigger()set S5I=GetHandleId(t)if IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thencall UnitAddAbility(I01,1093750093)call IssueTargetOrderById(I01,852609,P8I)call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,NK0,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function LIO))elsecall SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\Urn_Enemy.mdx",P8I,"overhead")))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function L0O))endifendifset P7I=nullset I01=nullset P8I=nullset t=nullendfunctionfunction LOO takes nothing returns nothingif GetSpellAbilityId()==1093750095 thencall L1O()endifendfunctionfunction L2O takes nothing returns nothinglocal integer i=0loopexitwhen i>16set NJ0[i]=falseset i=i+1endloopendfunctionfunction L3O takes nothing returns nothingif BJ1(GetEnumUnit())==false thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093753432,false)call AX1(GetEnumUnit(),1093753432,1,NL0,1110459480)endifendfunctionfunction L4O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer i=0local boolean FW1=falselocal boolean K3O=falselocal integer EY1local group gset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),925,Condition(function CM1))call ForGroup(g,function L3O)call NSI(g)set g=nullset P7I=nullendfunctionfunction L5O takes nothing returns nothingif GetSpellAbilityId()==1093753431 thencall L4O()endifendfunctionfunction L6O takes unit u returns booleanlocal integer SSI=GetUnitTypeId(u)return SSI==1211122232 or SSI==1848657482 or SSI==1848657481 or SSI==1848657462 or SSI==1848657480 or SSI==1966092371endfunctionfunction L7O takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return P3I(id)endfunctionfunction L8O takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),NM0)and IC1(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true or L7O(GetFilterUnit()))and L6O(GetFilterUnit())==falseendfunctionfunction L9O takes unit P7I returns booleanlocal group g=NTI()local boolean FW1set NM0=GetOwningPlayer(P7I)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1050,Condition(function L8O))set FW1=FirstOfGroup(g)!=nullcall NSI(g)return FW1endfunctionfunction LAO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group glocal integer NPIlocal boolean LBOif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==P7I thencall UnitRemoveAbility(P7I,1093808204)call UnitRemoveAbility(P7I,1093808211)call UnitRemoveAbility(P7I,1110459698)call UnitRemoveAbility(P7I,1110456665)call FV1(P7I)if((LoadInteger(LY,(GetHandleId((P7I))),((4302))))==1)==false thencall UnitSetUsesAltIcon(P7I,false)endifcall SaveInteger(LY,(GetHandleId((P7I))),((4420)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseset LBO=(LoadBoolean(LY,(S5I),(671)))set NPI=(LoadInteger(LY,(S5I),(34)))set NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set g=NTI()set NM0=GetOwningPlayer(P7I)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1050,Condition(function L8O))if GetUnitAbilityLevel(P7I,1110456665)>0 thencall SaveBoolean(LY,(S5I),(671),(true))elseif LBO thencall SaveBoolean(LY,(S5I),(671),(false))call UnitRemoveAbility(P7I,1093808204)call IA1(P7I,1093808204)endifif NPI>350 or FirstOfGroup(g)!=null thencall UnitRemoveAbility(P7I,1093808204)call UnitRemoveAbility(P7I,1093808211)call UnitRemoveAbility(P7I,1110459698)call UnitRemoveAbility(P7I,1110456665)call FV1(P7I)if((LoadInteger(LY,(GetHandleId((P7I))),((4302))))==1)==false and((LoadInteger(LY,(GetHandleId((P7I))),((4421))))==1)==false thencall UnitSetUsesAltIcon(P7I,false)endifcall SaveInteger(LY,(GetHandleId((P7I))),((4420)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifcall NSI(g)endifset t=nullset P7I=nullset g=nullreturn falseendfunctionfunction LCO takes nothing returns nothinglocal unit P7I=GetEnumUnit()local trigger tlocal integer S5Iif T2I(GetOwningPlayer(P7I))and L9O(P7I)==false thenif IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))==false and P0I(GetLocalPlayer())==false thencall UnitSetUsesAltIcon(P7I,true)call FY1(P7I)endifcall IA1(P7I,1093808204)call UnitMakeAbilityPermanent(P7I,true,1093808204)if BJ1(P7I)==false thencall IA1(P7I,1093808211)call UnitMakeAbilityPermanent(P7I,true,1093808211)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808211,false)endifset t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(34),(0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveBoolean(LY,(S5I),(671),(false))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\SmokeOfDeceit.mdx",P7I,"chest")))call SaveInteger(LY,(GetHandleId((P7I))),((4420)),(1))call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,.1,true)call TriggerAddCondition(t,Condition(function LAO))set t=nullendifset P7I=nullendfunctionfunction LDO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1225,Condition(function CL1))call ForGroup(g,function LCO)call NSI(g)set P7I=nullset g=nullendfunctionfunction LEO takes nothing returns nothingif GetSpellAbilityId()==1093808182 thencall LDO()endifendfunctionfunction InitTrig_Smoke_of_Deceit takes nothing returns nothingcall SetAltMinimapIcon("war3mapImported\\black.blp")endfunctionfunction LFO takes nothing returns nothingif BJ1(GetEnumUnit())==false thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810246,false)call AX1(GetEnumUnit(),1093810246,1,NN0,1110459729)endifendfunctionfunction LGO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local real x=GetSpellTargetX()local real y=GetSpellTargetY()call GroupEnumUnitsInRange(g,x,y,600+25,Condition(function C51))call ForGroup(g,function LFO)call NSI(g)call DestroyEffect(AddSpecialEffect("war3mapImported\\DarkLightningNova.mdx",x,y))set P7I=nullset g=nullendfunctionfunction LHO takes nothing returns nothingif GetSpellAbilityId()==1093810244 thencall LGO()endifendfunctionfunction LZO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(745)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or(TimerGetElapsed(M))>LVO thencall UnitRemoveAbility(P8I,1110459989)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitAbilityLevel(P8I,1110459989)==0 thencall IssueTargetOrder(I01,"curse",P8I)endifset t=nullset P8I=nullset I01=nullreturn falseendfunctionfunction CripplingStaff takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local real d=NS0local trigger tlocal integer S5Iif RKI(P8I)==false thencall IA1(I01,1093814861)call IssueTargetOrder(I01,"curse",P8I)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093813571,false)call AX1(P8I,1093813571,1,d,1110459957)elsecall IA1(I01,1093814861)call SetUnitAbilityLevel(I01,1093814861,2)call IssueTargetOrder(I01,"curse",P8I)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093813571,false)call AX1(P8I,1093813571,1,d,1110459957)endifset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function LZO))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(GetHandleId(P8I)),(745),(((TimerGetElapsed(M))+d)*1.0))set P7I=nullset P8I=nullset I01=nullset t=nullendfunctionfunction LWO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093815091)call IssueTargetOrder(I01,"slow",P8I)set P7I=nullset P8I=nullset I01=nullendfunctionfunction LXO takes nothing returns nothingif GetSpellAbilityId()==1093813569 and NNI(GetSpellTargetUnit())==false thencall LWO()endifendfunctionfunction LYO takes unit P7I returns nothingif IsUnitIllusion(P7I)or MA0[GetPlayerId(GetOwningPlayer(P7I))]<=0 or(IsUnitType(P7I,UNIT_TYPE_HERO)==false and B61(P7I)==false)thenreturnelseif EA1(P7I,FR0[Z00])==true or EA1(P7I,FR0[ZI0])==true thencall HFO(P7I)endifendfunctionfunction LJO takes nothing returns booleancall LYO(GetAttacker())call LYO(GetTriggerUnit())return falseendfunctionfunction LKO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or NPI==20 or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>20)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+12.5)endifset t=nullset P7I=nullreturn falseendfunctionfunction LLO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function LKO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\TranquilBootsHeal.mdx",P7I,"origin")))set P7I=nullset t=nullendfunctionfunction LMO takes nothing returns nothingif GetSpellAbilityId()==1093815089 thencall LLO()endifendfunctionfunction LNO takes nothing returns booleanlocal unit IYO=GetSummonedUnit()local integer i=0local item HZOlocal integer E81if IsUnitIllusion(IYO)==true thenloopexitwhen i>5set HZO=UnitItemInSlot(IYO,i)set E81=F01(HZO)if E81==Z00 thencall DisableTrigger(LY0)set JK=GetItemPlayer(HZO)call RemoveItem(HZO)set VK=FD1(IYO,FR0[ZI0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifset i=i+1endloopendifset IYO=nullreturn falseendfunctionfunction LTO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01if GetUnitX(P7I)!=x or GetUnitY(P7I)!=y or(GetUnitAbilityLevel(P7I,1110460237)==0 and GetTriggerEvalCount(t)>R2I(0.3/.05))or GetTriggerEvalCount(t)>R2I(NT0/.05)thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId((P7I))),((4337)),(2))call UnitRemoveAbility(P7I,1110460236)call UnitRemoveAbility(P7I,1110460237)call UnitRemoveAbility(P7I,1093816883)elseif GetTriggerEvalCount(t)==R2I(0.3/.05)thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093816882)call IssueTargetOrder(I01,"invisibility",P7I)call SaveInteger(LY,(GetHandleId((P7I))),((4337)),(2))set I01=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction LRO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer LPO=(LoadInteger(LY,(S5I),(375)))local integer id=GetUnitCurrentOrder(P7I)if GetUnitX(P7I)!=x or GetUnitY(P7I)!=y thencall IssueImmediateOrder(P7I,"holdposition")call SaveReal(LY,(LPO),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(LPO),(7),((GetUnitY(P7I))*1.0))elseif id==0 or id==851973 or id==851983 or id==851971 thencall IssueImmediateOrder(P7I,"holdposition")endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction LQO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local trigger t2=CreateTrigger()local integer KAO=GetHandleId(t2)local string LUO="Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl"if GetLocalPlayer()!=GetOwningPlayer(P7I)thenset LUO=""endifcall IA1(P7I,1093816883)call SaveInteger(LY,(GetHandleId((P7I))),((4337)),(1))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"chest"))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"hand left"))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"hand right"))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function LTO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call TriggerRegisterTimerEvent(t2,0.01,false)call TriggerAddCondition(t2,Condition(function LRO))call SaveUnitHandle(LY,(KAO),(2),(P7I))call SaveReal(LY,(KAO),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(KAO),(7),((GetUnitY(P7I))*1.0))call SaveInteger(LY,(KAO),(375),(S5I))set P7I=nullset t=nullendfunctionfunction M0O takes nothing returns nothingif GetSpellAbilityId()==1093816881 and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4337))))==1)==false thencall LQO()endifendfunctionfunction MIO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetUnitAbilityLevel(P7I,1113875828)==0 thencall UnitRemoveAbility(P7I,1093817162)call UnitRemoveAbility(P7I,1110460242)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif BU1(P7I)==true thenif GetUnitAbilityLevel(P7I,1110460242)==0 thencall IA1(P7I,1093817162)endifelseif GetUnitAbilityLevel(P7I,1110460242)>0 thencall UnitRemoveAbility(P7I,1093817162)call UnitRemoveAbility(P7I,1110460242)endifendifendifset P7I=nullset t=nullreturn falseendfunctionfunction M1O takes nothing returns nothinglocal unit P7I=GetEnumUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function MIO))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction MOO takes nothing returns nothinglocal group g=NTI()local unit P7I=GetTriggerUnit()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1050+25,Condition(function D01))call ForGroup(g,function M1O)call NSI(g)set g=nullset P7I=nullendfunctionfunction M2O takes nothing returns nothingif GetSpellAbilityId()==1095332962 thencall MOO()endifendfunctionfunction M3O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real H71=(LoadReal(LY,(S5I),(6)))local real H81=(LoadReal(LY,(S5I),(7)))call H61(P7I,H71,H81,650)call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))if GetUnitAbilityLevel(P7I,1110456116)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction M4O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.005,true)call TriggerAddCondition(t,Condition(function M3O))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set t=nullset P7I=nullendfunctionfunction M5O takes nothing returns nothingif GetSpellAbilityId()==1093683802 thencall M4O()endifendfunctionfunction M6O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer M7O=0local integer M8O=0local item EJ1local integer M9Olocal integer M5Ilocal unit MAOif GetSpellAbilityId()==1093818185 thenset M9O=1868921189set M5I=60*4set M7O=1227896136set M8O=ZB0elseif GetSpellAbilityId()==1093818184 thenset M9O=1865429044set M5I=60*7set M7O=1227896135set M8O=ZA0endifif(M7O!=0)thenif P8I!=null thenif EQ1(P8I)>0 thencall DisableTrigger(LY0)set EJ1=UnitAddItemById(P8I,M7O)call SetItemPlayer(EJ1,GetOwningPlayer(P8I),false)call SetItemUserData(EJ1,1)call SetItemCharges(EJ1,1)call EnableTrigger(LY0)elsecall EK1(FT0[M8O],GetUnitX(P8I),GetUnitY(P8I),GetOwningPlayer(P8I),true,1)endifelseset MAO=CreateUnit(GetOwningPlayer(P7I),M9O,GetSpellTargetX(),GetSpellTargetY(),0)call UnitApplyTimedLife(MAO,1112820804,M5I)call IA1(MAO,1093687362)call II1(GetOwningPlayer(P7I),UF,GetSpellTargetX(),GetSpellTargetY())if IsUnitInRegion(R60,MAO)thencall H1O(P7I,MAO)call RemoveUnit(MAO)elsecall GUO(MAO,P7I)if GetUnitTypeId(MAO)==1868921189 thencall I41(GetOwningPlayer(MAO),12,GetUnitX(MAO),GetUnitY(MAO),150)endifendifendifendifset P7I=nullset EJ1=nullendfunctionfunction MBO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local item AO1=ES1(P7I,FR0[WG0])local integer FF1if AO1!=null and(GetUnitTypeId(P7I)!=1311788365 or IC1(P7I)==false)thencall DisableTrigger(LY0)set FF1=A11(P7I,AO1)set JK=GetItemPlayer(AO1)call RemoveItem(AO1)set VK=FD1(P7I,FR0[WF0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifcall UnitRemoveAbility(P7I,1093873753)call UnitRemoveAbility(P7I,1110460492)call FlushChildHashtable(LY,(S5I))call S0I(t)set P7I=nullset t=nullreturn falseendfunctionfunction MCO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function MBO))call TriggerRegisterTimerEvent(t,8,false)call IA1(P7I,1093873753)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093873753,false)set t=nullset P7I=nullendfunctionfunction MDO takes nothing returns nothingif GetSpellAbilityId()==1093873990 thencall MCO()endifendfunctionfunction MEO takes nothing returns nothingif IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false thencall P6I(GetTriggerUnit(),GetSpellTargetUnit(),2,100)endifendfunctionfunction MFO takes nothing returns nothingif GetSpellAbilityId()==1093748292 thenif GetUnitTypeId(GetSpellTargetUnit())==1865429044 or GetUnitTypeId(GetSpellTargetUnit())==1868921189 thencall MEO()endifendifendfunctionfunction MGO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetItemCharges(ES1(P7I,FR0[WM0]),GetItemCharges(ES1(P7I,FR0[WM0]))+1)call FlushChildHashtable(LY,(S5I))call S0I(t)if GetUnitTypeId(P7I)==1315988077 thenset YXI=P7Iendifcall KillUnit(P7I)set P7I=nullset t=nullreturn falseendfunctionfunction MHO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerAddCondition(t,Condition(function MGO))call TriggerRegisterTimerEvent(t,0.01,false)set t=nullset P7I=nullendfunctionfunction MZO takes nothing returns nothingif GetSpellAbilityId()==1093817419 thencall MHO()endifendfunctionfunction MVO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01if GetUnitX(P7I)!=x or GetUnitY(P7I)!=y or(GetUnitAbilityLevel(P7I,1110460216)==0 and GetTriggerEvalCount(t)>R2I(1.5/.05))thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId((P7I))),((4330)),(2))call UnitRemoveAbility(P7I,1110460214)call UnitRemoveAbility(P7I,1110460216)elseif GetTriggerEvalCount(t)==R2I(1.5/.05)thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093815861)call IssueTargetOrder(I01,"invisibility",P7I)call SaveInteger(LY,(GetHandleId((P7I))),((4330)),(2))set I01=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction MWO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer LPO=(LoadInteger(LY,(S5I),(375)))local integer id=GetUnitCurrentOrder(P7I)if GetUnitX(P7I)!=x or GetUnitY(P7I)!=y thencall IssueImmediateOrder(P7I,"holdposition")call SaveReal(LY,(LPO),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(LPO),(7),((GetUnitY(P7I))*1.0))elseif id==0 or id==851973 or id==851983 or id==851971 thencall IssueImmediateOrder(P7I,"holdposition")endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction MXO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local trigger t2=CreateTrigger()local integer KAO=GetHandleId(t2)local string LUO="Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl"if GetLocalPlayer()!=GetOwningPlayer(P7I)thenset LUO=""endifcall SaveInteger(LY,(GetHandleId((P7I))),((4330)),(1))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"chest"))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"hand left"))call DestroyEffect(AddSpecialEffectTarget(LUO,P7I,"hand right"))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function MVO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call TriggerRegisterTimerEvent(t2,0.01,false)call TriggerAddCondition(t2,Condition(function MWO))call SaveUnitHandle(LY,(KAO),(2),(P7I))call SaveReal(LY,(KAO),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(KAO),(7),((GetUnitY(P7I))*1.0))call SaveInteger(LY,(KAO),(375),(S5I))set P7I=nullset t=nullendfunctionfunction MYO takes nothing returns nothingif GetSpellAbilityId()==1093815857 and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4330))))==1)==false thencall MXO()endifendfunctionfunction MJO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer MKO=(LoadInteger(LY,(S5I),(34)))if(GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>=MKO or RKI(P8I)==true)thencall BP1(P8I)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction MLO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=2local real DC1=4.5local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if IsUnitType(P8I,UNIT_TYPE_MELEE_ATTACKER)==true thenset SUI=1set DC1=3endifcall BT1(P8I)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function MJO))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(R2I(DC1*10)))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",P8I,"overhead")))set P7I=nullset P8I=nullset I01=nullendfunctionfunction MMO takes nothing returns nothingif GetSpellAbilityId()==1093815092 and NNI(GetSpellTargetUnit())==false thencall MLO()endifendfunctionfunction MNO takes integer SUI,unit P7I,unit P8I returns nothingset JJI=truecall P6I(P7I,P8I,1,300+100*SUI)set JJI=falseendfunctionfunction MSO takes nothing returns nothinglocal integer MTO=0if GetSpellAbilityId()==1093677647 thenset MTO=1endifif GetSpellAbilityId()==1093679193 thenset MTO=2endifif GetSpellAbilityId()==1093679194 thenset MTO=3endifif GetSpellAbilityId()==1093679408 thenset MTO=4endifif GetSpellAbilityId()==1093679410 thenset MTO=5endifif MTO>0 and NNI(GetSpellTargetUnit())==false thencall MNO(MTO,GetTriggerUnit(),GetSpellTargetUnit())endifendfunctionfunction MRO takes nothing returns nothingif GetSpellAbilityId()==1093814353 thencall IKO(GetTriggerUnit(),GetSpellTargetUnit())endifendfunctionfunction MPO takes unit P7I,integer RII,real x,real y returns nothinglocal unit MQO=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(MQO,1112820806,15)set MQO=nullendfunctionfunction MUO takes nothing returns nothinglocal unit MQOlocal real xlocal real yif GetSpellAbilityId()==1093753420 thenset x=GetDestructableX(GetSpellTargetDestructable())set y=GetDestructableY(GetSpellTargetDestructable())call MPO(GetTriggerUnit(),1848659021,x,y)elseif GetSpellAbilityId()==1093753421 thenset x=GetDestructableX(GetSpellTargetDestructable())set y=GetDestructableY(GetSpellTargetDestructable())call MPO(GetTriggerUnit(),1848659022,x,y)endifset MQO=nullendfunctionfunction N0O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P7I,1093873720)call UnitRemoveAbility(P8I,1093873720)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction NIO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P7I,1093873720)call UnitRemoveAbility(P8I,1093873721)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction N1O takes nothing returns nothinglocal trigger tlocal integer S5Iif IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,7,false)call TriggerAddCondition(t,Condition(function N0O))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))call UnitAddAbility(GetTriggerUnit(),1093873720)call UnitAddAbility(GetSpellTargetUnit(),1093873720)call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093873720)call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093873720)elseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,7,false)call TriggerAddCondition(t,Condition(function NIO))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))call UnitAddAbility(GetTriggerUnit(),1093873720)call UnitAddAbility(GetSpellTargetUnit(),1093873721)call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093873720)call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093873721)endifset t=nullendfunctionfunction NOO takes nothing returns nothingif GetSpellAbilityId()==1093753417 thencall N1O()endifendfunctionfunction N2O takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01if GetSpellTargetUnit()==null thenif GetSpellAbilityId()==1095331948 thenset I01=CreateUnit(GetOwningPlayer(SWI),1697656901,GetUnitX(SWI),GetUnitY(SWI),0)call UnitAddAbility(I01,1093752641)call IssueTargetOrderById(I01,852609,SWI)set I01=nullelseif GetSpellAbilityId()==1095331954 thenset I01=CreateUnit(GetOwningPlayer(SWI),1697656901,GetUnitX(SWI),GetUnitY(SWI),0)call UnitAddAbility(I01,1095331954)call IssueTargetOrderById(I01,852609,SWI)set I01=nullendifendifset SWI=nullset P8I=nullendfunctionfunction N3O takes nothing returns nothingif GetSpellAbilityId()==1095331948 or GetSpellAbilityId()==1095331954 thencall N2O()endifendfunctionfunction N4O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(34)))if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetKillingUnit()==P7I)or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(P8I,1110459731)>0)thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",GetUnitX(P8I),GetUnitY(P8I)))call AddHeroXP(P7I,R2I(SQI(SUI)*2.5),true)call OL1(GetOwningPlayer(P7I),P8I,190)set EL0[GetPlayerId(GetOwningPlayer(P7I))]=EL0[GetPlayerId(GetOwningPlayer(P7I))]+190set EK0[GetPlayerId(GetOwningPlayer(P7I))]=EK0[GetPlayerId(GetOwningPlayer(P7I))]+190call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(P8I)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction N5O takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitLevel(P8I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(SUI))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function N4O))set t=nullset P7I=nullset P8I=nullendfunctionfunction N6O takes nothing returns nothingif GetSpellAbilityId()==1093810265 and Y5O(GetSpellTargetUnit())==false thencall N5O()endifendfunctionfunction N7O takes nothing returns nothingcall SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+135)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))endfunctionfunction N8O takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),25+600,Condition(function CT1))call ForGroup(g,function N7O)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)set g=nullset P7I=nullset t=nullreturn falseendfunctionfunction N9O takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group glocal trigger tif GetSpellAbilityId()==1093684023 thenif GetUnitTypeId(P7I)!=1211117642 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function N8O))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))set t=nullelseif GetUnitTypeId(P7I)==1211117642 thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+25)endifendifset P7I=nullendfunctionfunction NAO takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1697656901 thenreturn falseendifcall VRO()call WBO()call X1O()call XGO()call Y3O()call YCO()call YFO()call YWO()call YJO()call YDO()call YPO()call JIO()call J5O()call JEO()call J8O()call JKO()call JHO()call HCO()call HAO()call JQO()call JUO()call K1O()call K4O()call KGO()call KRO()call X7O()call YRO()call KQO()call LOO()call KNO()call KDO()call N9O()call N6O()call N3O()call NOO()call MUO()call L5O()call LEO()call LHO()call LXO()call MRO()call MSO()call LMO()call MMO()call MYO()call MZO()call M0O()call M2O()call MFO()call M6O()call M5O()call YNO()call MDO()if GetSpellAbilityId()==1093815095 and NNI(GetSpellTargetUnit())==false thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LevelerStunFX.mdx",GetSpellTargetUnit(),"head"))endifreturn falseendfunctionfunction NCO takes unit SFI returns nothingcall SetUnitState(SFI,UNIT_STATE_LIFE,GetUnitState(SFI,UNIT_STATE_MAX_LIFE))call SetUnitState(SFI,UNIT_STATE_MANA,GetUnitState(SFI,UNIT_STATE_MAX_MANA))endfunctionfunction NDO takes unit SFI,real x,real y returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(SFI))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))set NR0=trueif W51!=null thencall ReviveHero(W51,x,y,true)call NCO(W51)call VS1(W51)call SetUnitX(W51,x)call SetUnitY(W51,y)endifif W61!=null thencall ReviveHero(W61,x,y,true)call NCO(W61)call VS1(W61)call SetUnitX(W61,x)call SetUnitY(W61,y)endifif W71!=null thencall ReviveHero(W71,x,y,true)call NCO(W71)call VS1(W71)call SetUnitX(W71,x)call SetUnitY(W71,y)endifif W81!=null thencall ReviveHero(W81,x,y,true)call NCO(W81)call VS1(W81)call SetUnitX(W81,x)call SetUnitY(W81,y)endifset W51=nullset W61=nullset W71=nullset W81=nullendfunctionfunction NEO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call NCO(SFI)call VS1(SFI)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitAddForPlayer(SFI,GetOwningPlayer(SFI))if GetUnitTypeId(SFI)==1211117641 thencall NDO(SFI,GetUnitX(SFI),GetUnitY(SFI))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction NFO takes unit SFI,real x,real y returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(SFI))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))call DisableTrigger(EG)if W51!=null thencall SetUnitX(W51,x)call SetUnitY(W51,y)call KillUnit(W51)endifif W61!=null thencall SetUnitX(W61,x)call SetUnitY(W61,y)call KillUnit(W61)endifif W71!=null thencall SetUnitX(W71,x)call SetUnitY(W71,y)call KillUnit(W71)endifif W81!=null thencall SetUnitX(W81,x)call SetUnitY(W81,y)call KillUnit(W81)endifcall EnableTrigger(EG)set W51=nullset W61=nullset W71=nullendfunctionfunction NGO takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real xlocal real ylocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call FL1("AegisOff",GetPlayerId(GetOwningPlayer(SFI)))if GetUnitTypeId(SFI)==1211117641 thencall NFO(SFI,GetUnitX(SFI),GetUnitY(SFI))endifset FW0=nullcall TriggerRegisterTimerEvent(t,5,false)call TriggerAddCondition(t,Condition(function NEO))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SCI(SFI,4304,5)set t=nullset SFI=nullendfunctionfunction NHO takes nothing returns nothingif F01(GetManipulatedItem())==VL0 thencall NGO()endifendfunctionfunction NZO takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local integer FF1call DisableTrigger(LY0)if GetUnitTypeId(SWI)!=1211117642 thenif E81==ZL0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)call DisableTrigger(LY0)set VK=FD1(SWI,FR0[ZM0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==ZM0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)call DisableTrigger(LY0)set VK=FD1(SWI,FR0[ZN0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==ZN0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)call DisableTrigger(LY0)set VK=FD1(SWI,FR0[ZL0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifendifcall EnableTrigger(LY0)set SWI=nullset AO1=nullendfunctionfunction NVO takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local integer FF1call DisableTrigger(LY0)if E81==ZY0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[ZJ0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==ZJ0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[ZY0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif E81==Z20 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[Z30],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==Z30 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[Z20],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif E81==W60 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[W70],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==W70 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[W60],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif E81==WF0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[WG0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==WG0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[WF0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifcall EnableTrigger(LY0)set SWI=nullset AO1=nullendfunctionfunction NWO takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local integer FF1call DisableTrigger(LY0)if E81==W80 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[W90],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==W90 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[W80],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifcall EnableTrigger(LY0)set SWI=nullset AO1=nullendfunctionfunction NXO takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local integer FF1call DisableTrigger(LY0)if E81==V40 and GetItemCharges(AO1)==0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[V60],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==V50 and GetItemCharges(AO1)==0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[V70],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)elseif E81==HP0 and GetItemCharges(AO1)==0 thenset FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[HQ0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifcall EnableTrigger(LY0)set SWI=nullset AO1=nullendfunctionfunction NYO takes nothing returns nothinglocal unit SWI=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local integer FF1call DisableTrigger(LY0)if E81==VZ0 thencall SaveInteger(LY,(GetHandleId(GetOwningPlayer(SWI))),(4345),(9))set FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[VV0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call G8O(VK)elseif E81==VV0 thencall SaveInteger(LY,(GetHandleId(GetOwningPlayer(SWI))),(4345),(8))set FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[VW0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call G8O(VK)elseif E81==VW0 thencall SaveInteger(LY,(GetHandleId(GetOwningPlayer(SWI))),(4345),(7))set FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[VX0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call G8O(VK)elseif E81==VX0 thencall SaveInteger(LY,(GetHandleId(GetOwningPlayer(SWI))),(4345),(6))set FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[VY0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call G8O(VK)elseif E81==VY0 thencall SaveInteger(LY,(GetHandleId(GetOwningPlayer(SWI))),(4345),(5))set FF1=A11(SWI,AO1)set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(AO1)set VK=FD1(SWI,FR0[VJ0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call G8O(VK)endifcall EnableTrigger(LY0)set SWI=nullset AO1=nullendfunctionfunction NJO takes nothing returns booleanlocal integer FF1local real VOOcall DisableTrigger(LY0)if F01(GetManipulatedItem())==WT0 thenset FF1=A11(GetTriggerUnit(),GetManipulatedItem())set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(GetManipulatedItem())set VK=FD1(GetTriggerUnit(),FR0[WS0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifif F01(GetManipulatedItem())==WS0 thenset FF1=A11(GetTriggerUnit(),GetManipulatedItem())set JK=GetItemPlayer(GetManipulatedItem())call RemoveItem(GetManipulatedItem())set VK=FD1(GetTriggerUnit(),FR0[WT0],FF1)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)endifcall EnableTrigger(LY0)return falseendfunctionfunction PerseveranceDisassemble takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local player p=GetItemPlayer(GetManipulatedItem())local item EJ1call DisableTrigger(LY0)call RemoveItem(GetManipulatedItem())set EJ1=UnitAddItemById(SFI,FR0[HI0])call SetItemPlayer(EJ1,p,false)call SetItemUserData(EJ1,1)set EJ1=UnitAddItemById(SFI,FR0[HB0])call SetItemPlayer(EJ1,p,false)call SetItemUserData(EJ1,1)call EnableTrigger(LY0)set SFI=nullset p=nullset EJ1=nullendfunctionfunction NKO takes nothing returns nothingif GetItemTypeId(GetManipulatedItem())==FR0[ZV0]thencall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657713))endifendfunctionfunction NLO takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if VBO(P7I)thencall F71(P7I,1227901005)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveBoolean(LY,(GetHandleId(P7I)),(129),(false))set t=nullset P7I=nullreturn falseendfunctionfunction NMO takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local item AO1=GetManipulatedItem()local integer E81=F01(AO1)local trigger tif(E81==VM0 or E81==VN0)and(LoadBoolean(LY,(GetHandleId(P7I)),(129)))==true thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.41,false)call TriggerAddCondition(t,Condition(function NLO))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))set t=nullendifset P7I=nullset AO1=nullendfunctionfunction NNO takes nothing returns booleanlocal real xlocal real ylocal real acall NVO()call NWO()call NZO()call W0O()call NHO()call NJO()call NKO()call NYO()call NXO()call NMO()return falseendfunctionfunction NTO takes nothing returns booleanreturn GetOwningPlayer(GetTriggerUnit())==DOendfunctionfunction NRO takes nothing returns nothingcall SaveInteger(LY,(400+GetPlayerId(GetOwningPlayer(GetKillingUnit()))),(79),((LoadInteger(LY,(400+GetPlayerId(GetOwningPlayer(GetKillingUnit()))),(79)))+1))endfunctionfunction NQO takes nothing returns nothinglocal location BFO=GetRectCenter(P4)set N0=CreateUnitAtLoc(Player(12),1848651852,BFO,bj_UNIT_FACING)call SetUnitAcquireRange(N0,150)call B5O(N0)call RemoveLocation(BFO)call UnitAddItem(N0,CreateItem(FR0[VL0],0,0))call UnitAddAbility(N0,1093743666)set BFO=GetRectCenter(H4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(Z4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(V4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(W4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(X4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(Y4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(J4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(K4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(L4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(M4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(V5)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(X5)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)endfunctionfunction InitTrig_Spawn_Roshan takes nothing returns nothingcall NQO()endfunctionfunction NUO takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",U0)elseif GetOwningPlayer(GetTriggerUnit())==CO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",II)endifreturn falseendfunctionfunction SIO takes nothing returns nothingset SI=SI+1endfunctionfunction SOO takes nothing returns nothingset NI=NI+1endfunctionfunction S3O takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",BI)endifreturn falseendfunctionfunction S6O takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==CO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",BI)endifreturn falseendfunctionfunction S8O takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",CI)endifreturn falseendfunctionfunction SAO takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==CO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",CI)endifreturn falseendfunctionfunction SCO takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",DI)endifreturn falseendfunctionfunction SEO takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==CO[0]thencall IssuePointOrderLoc(GetTriggerUnit(),"attack",DI)endifreturn falseendfunctionfunction SGO takes nothing returns nothingcall AX1(GetEnumUnit(),1093817905,1,15,1110460466)endfunctionfunction SHO takes nothing returns nothingcall AX1(GetEnumUnit(),1093817904,1,15,1110460465)endfunctionfunction SZO takes group g returns nothingif(TimerGetElapsed(M))<7*60 thencall ForGroup(g,function SGO)endifendfunctionfunction CreepMeetAdjustment2_Speed_Add takes nothing returns nothingcall AX1(GetEnumUnit(),1093817905,1,10,1110460466)endfunctionfunction CreepMeetAdjustment2_Slow_Add takes nothing returns nothingcall AX1(GetEnumUnit(),1093817904,1,20,1110460465)endfunctionfunction SVO takes group g returns nothingif(TimerGetElapsed(M))<7*60 thencall ForGroup(g,function SHO)endifendfunctionfunction SWO takes nothing returns nothinglocal integer i=1local integer idloopexitwhen i>5set id=GetPlayerId(BO[i])call FL1("CSK"+I2S(id),A[id])call FL1("CSD"+I2S(id),B[id])call FL1("NK"+I2S(id),(LoadInteger(LY,(400+id),(79))))set id=GetPlayerId(CO[i])call FL1("CSK"+I2S(id),A[id])call FL1("CSD"+I2S(id),B[id])call FL1("NK"+I2S(id),(LoadInteger(LY,(400+id),(79))))set i=i+1endloopendfunctionfunction SXO takes boolean SYO returns nothinglocal unit ulocal string SJO="stand work alternate"local string SKO="stand work"local string SLO="stand alternate"local string SMO="stand"set u=IZ0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=IV0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=IW0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=IX0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=IY0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=IJ0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SJO)elsecall SetUnitAnimation(u,SLO)endifendifset u=C80if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifset u=C90if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifset u=CA0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifset u=CB0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifset u=CC0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifset u=CD0if IC1(u)==false thenif SYO thencall SetUnitAnimation(u,SKO)elsecall SetUnitAnimation(u,SMO)endifendifendfunctionfunction SNO takes nothing returns booleancall SXO(true)return falseendfunctionfunction Trig_Spawn_Conditions takes nothing returns booleanreturn trueif(INI)thenreturn ISIendifif(IQI)thenreturn IUIendifif(E2)thenreturn D2endifif QT0 thenreturn QR0endifif(N2)thenreturn I3endifif(K0)thenreturn PG0endifif(IAI)thenreturn IBIendifif(CN)thenreturn PW0endifreturn O0endfunctionfunction SSO takes group STO,integer SRO returns nothinglocal unit uloopset u=FirstOfGroup(STO)exitwhen(u==null)call GroupRemoveUnit(STO,u)call SetUnitAbilityLevel(u,I2,SRO)endloopendfunctionfunction SPO takes nothing returns nothinglocal boolean SQO=ModuloInteger(GetTriggerExecCount(ZG),7)==0if R70 thenreturnendifcall SXO(false)if SQO thencall SWO()endifif GetTriggerExecCount(ZG)==1 and O2I==false thencall UnitResetCooldown(D30[1])call UnitResetCooldown(D30[2])call UnitResetCooldown(D30[3])call UnitResetCooldown(D30[4])call UnitResetCooldown(D30[5])call UnitResetCooldown(D30[7])call UnitResetCooldown(D30[8])call UnitResetCooldown(D30[9])call UnitResetCooldown(D30[10])call UnitResetCooldown(D30[11])call BK1(I70,false)call BK1(I80,false)call BK1(I90,false)call BK1(BU0,false)call BK1(C00,false)call BK1(CI0,false)elseif GetTriggerExecCount(ZG)==1 and O2I==true thencall BK1(I80,false)call BK1(C00,false)endifif GetTriggerExecCount(ZG)==1 thencall EnableTrigger(EW0)endifif O2I==false and O7I==false thenif(HI)thencall CreateNUnitsAtLoc(NI,1969711215,CO[0],RI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1966092337,CO[0],RI,bj_UNIT_FACING)endifcall SZO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(ZI)thencall CreateNUnitsAtLoc(NI,1969711215,CO[0],TI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1966092337,CO[0],TI,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(VI)thencall CreateNUnitsAtLoc(NI,1969711215,CO[0],PI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1966092337,CO[0],PI,bj_UNIT_FACING)endifcall SVO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,4)endifif O2I==false and O7I==false thenif(EI)thencall CreateNUnitsAtLoc(SI,1970169187,CO[0],I1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092338,CO[0],I1,bj_UNIT_FACING)endifcall SZO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(FI)thencall CreateNUnitsAtLoc(SI,1970169187,CO[0],QI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092338,CO[0],QI,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(GI)thencall CreateNUnitsAtLoc(SI,1970169187,CO[0],UI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092338,CO[0],UI,bj_UNIT_FACING)endifcall SVO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,4)endifif SQO==true thenif O2I==false and O7I==false thenif(EI)thencall CreateNUnitsAtLoc(SI,1970107511,CO[0],I1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092370,CO[0],I1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(FI)thencall CreateNUnitsAtLoc(SI,1970107511,CO[0],QI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092370,CO[0],QI,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(GI)thencall CreateNUnitsAtLoc(SI,1970107511,CO[0],UI,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1966092370,CO[0],UI,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,4)endifendifif O2I==false and O7I==false thenif(JI)thencall CreateNUnitsAtLoc(NI,1702061422,BO[0],B1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1697656918,BO[0],B1,bj_UNIT_FACING)endifcall SVO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(KI)thencall CreateNUnitsAtLoc(NI,1702061422,BO[0],O1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1697656918,BO[0],O1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(LI)thencall CreateNUnitsAtLoc(NI,1702061422,BO[0],A1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(NI,1697656918,BO[0],A1,bj_UNIT_FACING)endifcall SZO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,4)endifif O2I==false and O7I==false thenif(WI)thencall CreateNUnitsAtLoc(SI,1701081721,BO[0],E1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697656919,BO[0],E1,bj_UNIT_FACING)endifcall SVO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(XI)thencall CreateNUnitsAtLoc(SI,1701081721,BO[0],C1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697656919,BO[0],C1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(YI)thencall CreateNUnitsAtLoc(SI,1701081721,BO[0],D1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697656919,BO[0],D1,bj_UNIT_FACING)endifcall SZO(bj_lastCreatedGroup)call SSO(bj_lastCreatedGroup,4)endifif SQO==true thenif O2I==false and O7I==false thenif(WI)thencall CreateNUnitsAtLoc(SI,1700946284,BO[0],E1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697657398,BO[0],E1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,2)endifif O6I==false thenif(XI)thencall CreateNUnitsAtLoc(SI,1700946284,BO[0],C1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697657398,BO[0],C1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,3)endifif O2I==false and O4I==false thenif(YI)thencall CreateNUnitsAtLoc(SI,1700946284,BO[0],D1,bj_UNIT_FACING)elsecall CreateNUnitsAtLoc(SI,1697657398,BO[0],D1,bj_UNIT_FACING)endifcall SSO(bj_lastCreatedGroup,4)endifendifendfunctionfunction T0O takes nothing returns nothingset EI=falsecall DisableTrigger(VG)call FL1("Rax"+I2S(0)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction T1O takes nothing returns nothingset FI=falsecall DisableTrigger(WG)call FL1("Rax"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction T2O takes nothing returns nothingset GI=falsecall DisableTrigger(XG)call FL1("Rax"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction T4O takes nothing returns nothingset HI=falsecall DisableTrigger(YG)call FL1("Rax"+I2S(0)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction T6O takes nothing returns nothingset ZI=falsecall DisableTrigger(JG)call FL1("Rax"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction T8O takes nothing returns nothingset VI=falsecall DisableTrigger(KG)call FL1("Rax"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction TAO takes nothing returns nothingset WI=falsecall DisableTrigger(LG)call FL1("Rax"+I2S(1)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction TCO takes nothing returns nothingset XI=falsecall DisableTrigger(MG)call FL1("Rax"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction TEO takes nothing returns nothingset YI=falsecall DisableTrigger(NG)call FL1("Rax"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),1)endfunctionfunction TGO takes nothing returns nothingset JI=falsecall DisableTrigger(SG)call FL1("Rax"+I2S(1)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction TZO takes nothing returns nothingset KI=falsecall DisableTrigger(TG)call FL1("Rax"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction TWO takes nothing returns nothingset LI=falsecall DisableTrigger(RG)call FL1("Rax"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R6I(GetKillingUnit(),2)endfunctionfunction TYO takes nothing returns booleanlocal real TJO=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)if TJO<0.75 and S20==false thenset S20=truecall FL1("Tree",75)endifif TJO<0.50 and SO0==false thenset SO0=truecall FL1("Tree",50)endifif TJO<0.25 and S10==false thenset S10=truecall FL1("Tree",25)endifif TJO<0.10 and SI0==false thenset SI0=truecall FL1("Tree",10)endifreturn falseendfunctionfunction TKO takes nothing returns booleanlocal real TJO=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)if TJO<0.75 and S00==false thenset S00=truecall FL1("Throne",75)endifif TJO<0.50 and NU0==false thenset NU0=truecall FL1("Throne",50)endifif TJO<0.25 and NQ0==false thenset NQ0=truecall FL1("Throne",25)endifif TJO<0.10 and NP0==false thenset NP0=truecall FL1("Throne",10)endifreturn falseendfunctionfunction TMO takes nothing returns booleanif(JI or KI or LI or WI or XI or YI)thenreturn falseendifreturn trueendfunctionfunction TNO takes nothing returns nothingcall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848652879)+" "+GetObjectName(1848656695))call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,BO[0])+30),BO[0])call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,BO[0])+30),BO[0])call DisableTrigger(PG)endfunctionfunction TTO takes nothing returns booleanif(HI or ZI or VI or EI or FI or GI)thenreturn falseendifreturn trueendfunctionfunction TRO takes nothing returns nothingcall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848652888)+" "+GetObjectName(1848656697))call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,CO[0])+30),CO[0])call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,CO[0])+30),CO[0])call DisableTrigger(QG)endfunctionfunction TQO takes nothing returns nothingcall SetPlayerTechResearchedSwap(1378889783,(GetPlayerTechCountSimple(1378889783,BO[0])+1),BO[0])call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,BO[0])+1),BO[0])call SetPlayerTechResearchedSwap(1378889784,(GetPlayerTechCountSimple(1378889784,BO[0])+1),BO[0])call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,BO[0])+1),BO[0])call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,CO[0])+1),CO[0])call SetPlayerTechResearchedSwap(1378889779,(GetPlayerTechCountSimple(1378889779,CO[0])+1),CO[0])call SetPlayerTechResearchedSwap(1378889793,(GetPlayerTechCountSimple(1378889793,CO[0])+1),CO[0])call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,CO[0])+1),CO[0])endfunctionfunction R0O takes nothing returns nothinglocal location BFO=GetRectCenter(Y5)call RemoveUnit(CreateUnitAtLoc(DO,1851941999,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1851942003,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852273524,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1848652342,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852270450,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1851941995,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1851946861,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852794733,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852796263,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852207203,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852207221,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1853060200,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1853060204,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1853055348,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1853320295,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852534636,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852534626,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852534644,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852010091,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852007790,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852272243,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852208226,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852207976,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852270641,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852860012,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852798821,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852798818,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852666477,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852666482,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852666476,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852077170,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1852077175,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1848659011,BFO,bj_UNIT_FACING))call RemoveUnit(CreateUnitAtLoc(DO,1848659012,BFO,bj_UNIT_FACING))call RemoveLocation(BFO)endfunctionfunction R1O takes integer ROO,integer G0O,integer R2O returns integerlocal integer R3O=S30[ROO]local integer R4O=GetRandomInt(G0O,R2O)loopexitwhen R3O!=R4Oset R4O=GetRandomInt(G0O,R2O)endloopset S30[ROO]=R4Oreturn R4Oendfunctionfunction R5O takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1848658007,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1848658008,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1848658007,x,y,0),x,y)endfunctionfunction R6O takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852466993,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852466993,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852467041,x,y,0),x,y)endfunctionfunction R7O takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1851941999,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1851941999,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1851942003,x,y,0),x,y)endfunctionfunction R8O takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1851941995,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1851941995,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1851946861,x,y,0),x,y)endfunctionfunction R9O takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852273524,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852273524,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852270450,x,y,0),x,y)endfunctionfunction AncientLizards_AI takes nothing returns booleancall S0I(GetTriggeringTrigger())call IssueTargetOrder(GetTriggerUnit(),"unholyfrenzy",GetTriggerUnit())return falseendfunctionfunction RAO takes real x,real y returns nothinglocal unit uset u=CreateUnit(DO,1848659011,x,y,0)call SetUnitPosition(u,x,y)call SetUnitPosition(CreateUnit(DO,1848659012,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1848659012,x,y,0),x,y)set u=nullendfunctionfunction RBO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852794733,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852794733,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852796263,x,y,0),x,y)endfunctionfunction RCO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852207203,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852207221,x,y,0),x,y)endfunctionfunction RDO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1853060200,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853060204,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853055348,x,y,0),x,y)endfunctionfunction REO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1853060204,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853060204,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853055348,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853055348,x,y,0),x,y)endfunctionfunction RFO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1853320295,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1853320295,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1848651859,x,y,0),x,y)endfunctionfunction RGO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1848652342,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1848652342,x,y,0),x,y)endfunctionfunction RHO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852534636,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852534626,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852534626,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852534626,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852534644,x,y,0),x,y)endfunctionfunction RZO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852208226,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852208226,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852207976,x,y,0),x,y)endfunctionfunction RVO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852007790,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852010091,x,y,0),x,y)endfunctionfunction RWO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852272243,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852272243,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852272243,x,y,0),x,y)endfunctionfunction RXO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852208226,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852208226,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852534636,x,y,0),x,y)endfunctionfunction RYO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852270641,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852860012,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852860012,x,y,0),x,y)endfunctionfunction RJO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852798821,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852798818,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852798818,x,y,0),x,y)endfunctionfunction RKO takes real x,real y returns nothingcall SetUnitPosition(CreateUnit(DO,1852077170,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852077170,x,y,0),x,y)call SetUnitPosition(CreateUnit(DO,1852077175,x,y,0),x,y)endfunctionfunction RLO takes real x,real y returns nothinglocal integer MLI=R1O(3,1,5)if MLI==1 thencall RCO(x,y)elseif MLI==2 thencall RDO(x,y)elseif MLI==3 thencall RJO(x,y)elseif MLI==4 thencall RKO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RMO takes real x,real y returns nothinglocal integer MLI=R1O(12,1,5)if MLI==1 thencall RCO(x,y)elseif MLI==2 thencall RDO(x,y)elseif MLI==3 thencall RJO(x,y)elseif MLI==4 thencall RKO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RNO takes real x,real y returns nothinglocal integer MLI=R1O(4,1,5)if MLI==1 thencall RCO(x,y)elseif MLI==2 thencall RDO(x,y)elseif MLI==3 thencall RJO(x,y)elseif MLI==4 thencall RKO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RSO takes real x,real y returns nothinglocal integer MLI=R1O(9,1,5)if MLI==1 thencall RCO(x,y)elseif MLI==2 thencall RDO(x,y)elseif MLI==3 thencall RJO(x,y)elseif MLI==4 thencall RKO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RTO takes real x,real y returns nothinglocal integer MLI=R1O(6,1,6)if MLI==1 thencall RYO(x,y)elseif MLI==2 thencall RXO(x,y)elseif MLI==3 thencall RWO(x,y)elseif MLI==4 thencall RHO(x,y)elseif MLI==5 thencall RZO(x,y)elseif MLI==6 thencall R5O(x,y)endifendfunctionfunction RRO takes real x,real y returns nothinglocal integer MLI=R1O(5,1,6)if MLI==1 thencall RYO(x,y)elseif MLI==2 thencall RXO(x,y)elseif MLI==3 thencall RWO(x,y)elseif MLI==4 thencall RHO(x,y)elseif MLI==5 thencall RZO(x,y)elseif MLI==6 thencall R5O(x,y)endifendfunctionfunction RPO takes real x,real y returns nothinglocal integer MLI=R1O(7,1,5)if MLI==1 thencall RGO(x,y)elseif MLI==2 thencall RBO(x,y)elseif MLI==3 thencall REO(x,y)elseif MLI==4 thencall RFO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RQO takes real x,real y returns nothinglocal integer MLI=R1O(8,1,5)if MLI==1 thencall RGO(x,y)elseif MLI==2 thencall RBO(x,y)elseif MLI==3 thencall REO(x,y)elseif MLI==4 thencall RFO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction RUO takes real x,real y returns nothinglocal integer MLI=R1O(10,1,5)if MLI==1 thencall RGO(x,y)elseif MLI==2 thencall RBO(x,y)elseif MLI==3 thencall REO(x,y)elseif MLI==4 thencall RFO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction P0O takes real x,real y returns nothinglocal integer MLI=R1O(11,1,5)if MLI==1 thencall RGO(x,y)elseif MLI==2 thencall RBO(x,y)elseif MLI==3 thencall REO(x,y)elseif MLI==4 thencall RFO(x,y)elseif MLI==5 thencall RVO(x,y)endifendfunctionfunction PIO takes real x,real y returns nothinglocal integer MLI=R1O(1,1,5)if MLI==1 thencall R6O(x,y)elseif MLI==2 thencall R7O(x,y)elseif MLI==3 thencall R8O(x,y)elseif MLI==4 thencall R9O(x,y)elseif MLI==5 thencall RAO(x,y)endifendfunctionfunction P1O takes real x,real y returns nothinglocal integer MLI=R1O(2,1,5)if MLI==1 thencall R6O(x,y)elseif MLI==2 thencall R7O(x,y)elseif MLI==3 thencall R8O(x,y)elseif MLI==4 thencall R9O(x,y)elseif MLI==5 thencall RAO(x,y)endifendfunctionfunction POO takes nothing returns nothingif GetUnitAbilityLevel(GetEnumUnit(),1093685300)!=0 thencall GroupRemoveUnit(B2,GetEnumUnit())endifif GetUnitTypeId(GetEnumUnit())==1865429043 thencall GroupRemoveUnit(B2,GetEnumUnit())endifif GetUnitTypeId(GetEnumUnit())==1865429336 thencall GroupRemoveUnit(B2,GetEnumUnit())endifif IC1(GetEnumUnit())==true thencall GroupRemoveUnit(B2,GetEnumUnit())endifif RYI(GetEnumUnit())==true thencall GroupRemoveUnit(B2,GetEnumUnit())endifendfunctionfunction P2O takes group g returns booleanset B2=gcall ForGroup(g,function POO)return FirstOfGroup(g)==nullendfunctionfunction P3O takes nothing returns booleanlocal group glocal rect r1local rect r2if O3I==false thenreturn falseendifset r1=Q4set r2=H4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall PIO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=U4set r2=Z4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall P1O(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=I5set r2=V4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RLO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=O5set r2=W4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RNO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=A5set r2=X4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RRO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=B5set r2=Y4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RTO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=C5set r2=J4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RPO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=E5set r2=K4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RQO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=D5set r2=L4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RSO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=F5set r2=M4set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RUO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=Z5set r2=V5set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall P0O(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=W5set r2=X5set g=NTI()call GroupEnumUnitsInRect(g,r1,Condition(function N1I))if P2O(g)thencall RMO(GetRectCenterX(r2),GetRectCenterY(r2))endifcall NSI(g)set r1=nullset r2=nullset g=nullreturn falseendfunctionfunction P5O takes nothing returns nothinglocal integer TJI=GetRandomInt(1,9)local location lif O2I thenset TJI=GetRandomInt(1,3)if TJI==1 thenset TJI=2endifif TJI==2 thenset TJI=5endifif TJI==3 thenset TJI=8endifendifif(TJI==1)thenset l=GetRectCenter(TA)call CreateNUnitsAtLoc(1,1848651827,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653105))call SSO(bj_lastCreatedGroup,4)endifif(TJI==2)thenset l=GetRectCenter(SA)call CreateNUnitsAtLoc(1,1848651827,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653106))call SSO(bj_lastCreatedGroup,2)endifif(TJI==3)thenset l=GetRectCenter(NA)call CreateNUnitsAtLoc(1,1848651827,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653107))call SSO(bj_lastCreatedGroup,3)endifif(TJI==4)thenset l=GetRectCenter(TA)call CreateNUnitsAtLoc(1,1848651845,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653112))call SSO(bj_lastCreatedGroup,4)endifif(TJI==5)thenset l=GetRectCenter(SA)call CreateNUnitsAtLoc(1,1848651845,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848652890))call SSO(bj_lastCreatedGroup,2)endifif(TJI==6)thenset l=GetRectCenter(NA)call CreateNUnitsAtLoc(1,1848651845,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653111))call SSO(bj_lastCreatedGroup,3)endifif(TJI==7)and O2I==false thenset l=GetRectCenter(TA)call CreateNUnitsAtLoc(1,1848651844,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653110))call SSO(bj_lastCreatedGroup,4)endifif(TJI==8)and O2I==false thenset l=GetRectCenter(SA)call CreateNUnitsAtLoc(1,1848651844,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848652884))call SSO(bj_lastCreatedGroup,2)endifif(TJI==9)thenset l=GetRectCenter(NA)call CreateNUnitsAtLoc(1,1848651844,BO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653123))call SSO(bj_lastCreatedGroup,3)endifif(TJI==1)thenset l=GetRectCenter(LA)call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656708))call SSO(bj_lastCreatedGroup,4)endifif(TJI==2)thenset l=GetRectCenter(KA)call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656709))call SSO(bj_lastCreatedGroup,2)endifif(TJI==3)thenset l=GetRectCenter(MA)call CreateNUnitsAtLoc(1,1848651827,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656707))call SSO(bj_lastCreatedGroup,3)endifif(TJI==4)thenset l=GetRectCenter(LA)call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656711))call SSO(bj_lastCreatedGroup,4)endifif(TJI==5)thenset l=GetRectCenter(KA)call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656712))call SSO(bj_lastCreatedGroup,2)endifif(TJI==6)thenset l=GetRectCenter(MA)call CreateNUnitsAtLoc(1,1848651845,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656710))call SSO(bj_lastCreatedGroup,3)endifif(TJI==7)thenset l=GetRectCenter(LA)call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656714))call SSO(bj_lastCreatedGroup,4)endifif(TJI==8)thenset l=GetRectCenter(KA)call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656715))call SSO(bj_lastCreatedGroup,2)endifif(TJI==9)thenset l=GetRectCenter(MA)call CreateNUnitsAtLoc(1,1848651844,CO[0],l,bj_UNIT_FACING)call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848656713))call SSO(bj_lastCreatedGroup,3)endifendfunctionfunction P7O takes nothing returns nothinglocal integer TGIlocal integer THIlocal integer P8Olocal integer P9Olocal integer ilocal player pset S60=S60+1set S90=0set SA0=0set i=0loopexitwhen i>5set p=BO[i]if T5I(p)thenset S90=S90+1endifset p=CO[i]if T5I(p)thenset SA0=SA0+1endifset i=i+1endloopif IN==false thenset L1=S90set M1=SA0endifset TGI=1set THI=5set P8O=1loopexitwhen TGI>THIset p=BO[TGI]if T5I(p)thenset N1[P8O]=pset P8O=P8O+1endifset TGI=TGI+1endloopset TGI=1set THI=5set P8O=1loopexitwhen TGI>THIset p=CO[TGI]if T5I(p)thenset S1[P8O]=pset P8O=P8O+1endifset TGI=TGI+1endloopif S60==1 thenset M0=CreateMultiboardBJ(7+6,3+SA0+S90," ")call MultiboardMinimize(M0,true)endifcall N5I(M0,2,1,"CD")call N5I(M0,3,1,"|c00838B8BL|r")call N5I(M0,4,1,SB0+"K|r")call N5I(M0,5,1,SD0+"D|r")call N5I(M0,6,1,SE0+"A|r")call N5I(M0,1,2,GetObjectName(1848656971))call N5I(M0,4,2,SB0+"0|r")call N5I(M0,5,2,SD0+"0|r")call N5I(M0,1,3+S90,GetObjectName(1848656975))call N5I(M0,4,3+S90,SB0+"0|r")call N5I(M0,5,3+S90,SD0+"0|r")call NEI(M0,1,2,(TSI(SubString(C0[GetPlayerId((BO[0]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((BO[0]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((BO[0]))],8,10)))/255.0*100,0)call NEI(M0,1,3+S90,(TSI(SubString(C0[GetPlayerId((CO[0]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((CO[0]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((CO[0]))],8,10)))/255.0*100,0)set TGI=1set THI=3+SA0+S90loopexitwhen TGI>THIcall NVI(M0,1,TGI,10.8)call NVI(M0,2,TGI,2)call NVI(M0,3,TGI,2)call NVI(M0,4,TGI,1.3)call NVI(M0,5,TGI,1.3)call NVI(M0,6,TGI,1.3)call NVI(M0,7,TGI,2.5)call NVI(M0,8,TGI,0.01)call NVI(M0,9,TGI,0.01)call NVI(M0,10,TGI,0.01)call NVI(M0,11,TGI,0.01)call NVI(M0,12,TGI,0.01)call NVI(M0,13,TGI,0.01)set TGI=TGI+1endloopset TGI=1set THI=7+6loopexitwhen TGI>THIset P8O=1set P9O=3+SA0+S90loopexitwhen P8O>P9Ocall NBI(M0,TGI,P8O,true,false)set P8O=P8O+1endloopset TGI=TGI+1endloopset TGI=1set THI=S90loopexitwhen TGI>THIcall NBI(M0,1,TGI+2,true,true)call NEI(M0,7,TGI+2,255,204,0,0)set S40[GetPlayerId(N1[TGI])]=1-1set S50[GetPlayerId(N1[TGI])]=TGI+2-1call N5I(M0,1,TGI+2,(D80[GetPlayerId((N1[TGI]))]))if T3I(N1[TGI])thencall NEI(M0,1,TGI+2,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],8,10)))/255.0*100,0)call NEI(M0,2,TGI+2,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((N1[TGI]))],8,10)))/255.0*100,0)elsecall N5I(M0,1,TGI+2,"|c00333333"+(D80[GetPlayerId((N1[TGI]))])+"|r")endifcall N5I(M0,4,(TGI+2),SB0+"0|r")call N5I(M0,5,(TGI+2),SD0+"0|r")call N5I(M0,6,(TGI+2),SE0+"0|r")set TGI=TGI+1endloopset TGI=1set THI=SA0loopexitwhen TGI>THIcall NBI(M0,1,TGI+3+S90,true,true)call NEI(M0,7,TGI+3+S90,255,204,0,0)set S40[GetPlayerId(S1[TGI])]=1-1set S50[GetPlayerId(S1[TGI])]=TGI+3+S90-1call N5I(M0,1,TGI+3+S90,(D80[GetPlayerId((S1[TGI]))]))if T3I(S1[TGI])thencall NEI(M0,1,TGI+3+S90,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],8,10)))/255.0*100,0)call NEI(M0,2,TGI+3+S90,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],4,6)))/255.0*100,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],6,8)))/255.0*100,(TSI(SubString(C0[GetPlayerId((S1[TGI]))],8,10)))/255.0*100,0)elsecall N5I(M0,1,TGI+3+S90,"|c00333333"+(D80[GetPlayerId((S1[TGI]))])+"|r")endifcall N5I(M0,4,(TGI+3+S90),SB0+"0|r")call N5I(M0,5,(TGI+3+S90),SD0+"0|r")call N5I(M0,6,(TGI+3+S90),SE0+"0|r")set TGI=TGI+1endloopset S70=1set S80=3+SA0+S90-2if C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70)and S60==1 thencall MultiboardDisplay(M0,false)endifcall NBI(M0,7,1,false,true)call N9I(M0,7,1,"UI\\Feedback\\Resources\\ResourceGold.blp")call UR1()if S60>1 thencall TriggerExecute(CH)endifendfunctionfunction PAO takes nothing returns nothinglocal integer TGIlocal integer THIcall N5I(M0,4,2,SB0+I2S(I[GetPlayerId(BO[0])])+"|r")call N5I(M0,5,2,SD0+I2S(O[GetPlayerId(BO[0])])+"|r")call N5I(M0,4,3+S90,SB0+I2S(I[GetPlayerId(CO[0])])+"|r")call N5I(M0,5,3+S90,SD0+I2S(O[GetPlayerId(CO[0])])+"|r")set TGI=1set THI=S90loopexitwhen TGI>THIcall N5I(M0,4,(TGI+2),SB0+I2S(I[GetPlayerId(N1[TGI])])+"|r")call N5I(M0,5,(TGI+2),SD0+I2S(O[GetPlayerId(N1[TGI])])+"|r")call N5I(M0,6,(TGI+2),SE0+I2S(D[GetPlayerId(N1[TGI])])+"|r")set TGI=TGI+1endloopset TGI=1set THI=SA0loopexitwhen TGI>THIcall N5I(M0,4,(TGI+3+S90),SB0+I2S(I[GetPlayerId(S1[TGI])])+"|r")call N5I(M0,5,(TGI+3+S90),SD0+I2S(O[GetPlayerId(S1[TGI])])+"|r")call N5I(M0,6,(TGI+3+S90),SE0+I2S(D[GetPlayerId(S1[TGI])])+"|r")set TGI=TGI+1endloopendfunctionfunction PCO takes nothing returns booleanif(GetUnitTypeId(GetTriggerUnit())==1697656914)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1697657137)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1697656915)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1697657145)thenreturn trueendifreturn falseendfunctionfunction PDO takes nothing returns nothingset G0[1]=(G0[1]+1)endfunctionfunction PFO takes nothing returns booleanif(GetUnitTypeId(GetTriggerUnit())==1966092365)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1966092356)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1966092366)thenreturn trueendifif(GetUnitTypeId(GetTriggerUnit())==1966092372)thenreturn trueendifreturn falseendfunctionfunction PGO takes nothing returns nothingset G0[2]=(G0[2]+1)endfunctionfunction PZO takes integer a returns integerlocal integer i=0local integer x=0local string s=I2S(a)loopexitwhen i>StringLength(s)if SubString(s,i,i+1)=="1"thenset x=x+1endifset i=i+1endloopreturn xendfunctionfunction PVO takes player T4I,integer PWO returns stringif IsPlayerAlly(GetLocalPlayer(),T4I)==true thenreturn F21(UnitItemInSlot(K1[GetPlayerId(T4I)],PWO-1))elsereturn"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"endifendfunctionfunction PXO takes nothing returns nothinglocal integer TGIlocal integer THIlocal string GW1local real QHIlocal string s1=" "local integer rlocal integer ilocal integer array time_1alocal string array color_1alocal integer index_1a=0local integer array time_1blocal string array color_1blocal integer index_1b=0local integer x=0local integer idlocal string PYOlocal string PJOlocal string PKOlocal string PLOlocal string PMOlocal string s2=" "local string slocal real PNOlocal string spacerlocal integer PSO=0local string PTO=""local string PRO=""local integer PPO=0local integer PQO=0local string PUO=""if M0==null thenreturnendifset i=1loopexitwhen i>5set r=R2I(TimerGetRemaining(F0[GetPlayerId(BO[i])]))if r>0 thenset PSO=PSO+PZO(r)if PPO==0 thenif r<10 thenset PTO=C0[GetPlayerId(BO[i])]+"0"+I2S(r)+" |r"elseset PTO=C0[GetPlayerId(BO[i])]+I2S(r)+" |r"endifelseif r<10 thenset PTO=PTO+SF0+"| |r"+C0[GetPlayerId(BO[i])]+"0"+I2S(r)+" |r"elseset PTO=PTO+SF0+"| |r"+C0[GetPlayerId(BO[i])]+I2S(r)+" |r"endifendifset PPO=PPO+1endifset i=i+1endloopif PPO>0 thenif IsPlayerAlly(GetLocalPlayer(),BO[0])==true thenset PTO=SF0+"["+GetObjectName(1848658515)+" |r"+PTO+SF0+"]|r"elseset PTO=SC0+"["+GetObjectName(1848658514)+" |r"+PTO+SC0+"]|r"endifendifset i=1loopexitwhen i>5set r=R2I(TimerGetRemaining(F0[GetPlayerId(CO[i])]))if r>0 thenset PSO=PSO+PZO(r)if PQO==0 thenif r<10 thenset PRO=C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"elseset PRO=C0[GetPlayerId(CO[i])]+I2S(r)+" |r"endifelseif r<10 thenset PRO=PRO+SF0+"| |r"+C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"elseset PRO=PRO+SF0+"| |r"+C0[GetPlayerId(CO[i])]+I2S(r)+" |r"endifendifset PQO=PQO+1endifset i=i+1endloopif PQO>0 thenif IsPlayerAlly(GetLocalPlayer(),CO[0])==true thenset PRO=SF0+"["+GetObjectName(1848658515)+" |r"+PRO+SF0+"]|r"elseset PRO=SC0+"["+GetObjectName(1848658514)+" |r"+PRO+SC0+"]|r"endifendifif M0!=null thenset id=GetPlayerId(GetLocalPlayer())if id>=0 and id<16 thenif VM[x]thenset PYO=I2S(I[id])set PJO=I2S(O[id])set PKO=I2S(D[id])set PLO=I2S(A[id])set PMO=I2S(B[id])set s2=" |c00838B8B("+PYO+"/"+PJO+"/"+PKO+" - "+PLO+"/"+PMO+" - |r|c00FFDC00"+I2S(EL0[id])+"|r |c00838B8B)|r"endifendifendifif PQO==0 and PPO==0 thencall MultiboardSetTitleText(M0,s2)elseif IsPlayerAlly(GetLocalPlayer(),BO[0])==true thencall MultiboardSetTitleText(M0,PRO+" "+PTO+" "+s2)elsecall MultiboardSetTitleText(M0,PTO+" "+PRO+" "+s2)endifendifif(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))==false thencall MultiboardDisplay(M0,true)endifif P20[GetPlayerId(GetLocalPlayer())]==false thencall SetWaterBaseColor(0,0,255,255)endifset TGI=1set THI=S90loopexitwhen TGI>THIcall N9I(M0,1,TGI+2,SAI(K1[GetPlayerId(N1[TGI])]))call N5I(M0,3,TGI+2,"|c00838B8B"+I2S(GetHeroLevel(K1[GetPlayerId(N1[TGI])]))+"|r")if RQ0[GetPlayerId(GetLocalPlayer())]thencall NVI(M0,7,1,3)call NVI(M0,8,1,2.8)call NVI(M0,9,1,0.8)call NVI(M0,10,1,0.8)call NVI(M0,11,1,0.8)call NVI(M0,12,1,0.8)call NVI(M0,13,1,0.1)call NVI(M0,7,TGI+2,3)call NVI(M0,8,TGI+2,1.1)call NVI(M0,9,TGI+2,1.1)call NVI(M0,10,TGI+2,1.1)call NVI(M0,11,TGI+2,1.1)call NVI(M0,12,TGI+2,1.1)call NVI(M0,13,TGI+2,0.1)call NBI(M0,8,TGI+2,false,true)call NBI(M0,9,TGI+2,false,true)call NBI(M0,10,TGI+2,false,true)call NBI(M0,11,TGI+2,false,true)call NBI(M0,12,TGI+2,false,true)call NBI(M0,13,TGI+2,false,true)call N5I(M0,8,1,"Items")elsecall NVI(M0,7,1,2)call NVI(M0,8,1,0.1)call NVI(M0,9,1,0.1)call NVI(M0,10,1,0.1)call NVI(M0,11,1,0.1)call NVI(M0,12,1,0.1)call NVI(M0,13,1,0.1)call NVI(M0,7,TGI+2,2.5)call NVI(M0,8,TGI+2,0.1)call NVI(M0,9,TGI+2,0.1)call NVI(M0,10,TGI+2,0.1)call NVI(M0,11,TGI+2,0.1)call NVI(M0,12,TGI+2,0.1)call NVI(M0,13,TGI+2,0.1)call NBI(M0,8,TGI+2,false,false)call NBI(M0,9,TGI+2,false,false)call NBI(M0,10,TGI+2,false,false)call NBI(M0,11,TGI+2,false,false)call NBI(M0,12,TGI+2,false,false)call NBI(M0,13,TGI+2,false,false)call N5I(M0,8,1," ")endifcall N9I(M0,8,TGI+2,PVO(N1[TGI],1))call N9I(M0,9,TGI+2,PVO(N1[TGI],2))call N9I(M0,10,TGI+2,PVO(N1[TGI],3))call N9I(M0,11,TGI+2,PVO(N1[TGI],4))call N9I(M0,12,TGI+2,PVO(N1[TGI],5))call N9I(M0,13,TGI+2,PVO(N1[TGI],6))if(SVI(K1[GetPlayerId(N1[TGI])])and K1[GetPlayerId(N1[TGI])]!=null and TimerGetRemaining(F0[GetPlayerId(N1[TGI])])>0)thenif IsPlayerAlly(GetLocalPlayer(),N1[TGI])thenset PUO=SF0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(N1[TGI])]))))+")|r"elseset PUO=SC0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(N1[TGI])]))))+")|r"endifelseset PUO="  "endifif EF0[GetPlayerId(N1[TGI])]thencall N5I(M0,1,TGI+2,"|c00333333"+(D80[GetPlayerId((N1[TGI]))])+"|r"+PUO)elsecall N5I(M0,1,TGI+2,(D80[GetPlayerId((N1[TGI]))])+PUO)endifset PNO=(TimerGetRemaining(EJ0[GetPlayerId((N1[TGI]))]))if PNO>0 thenset s=I2S(R2I(PNO))elseset s=" "endifif IsPlayerAlly(GetLocalPlayer(),N1[TGI])==false thencall N5I(M0,7,TGI+2," ")set s=" "elsecall N5I(M0,7,TGI+2,"|cffffcc00"+I2S(R2I(GetPlayerState(N1[TGI],PLAYER_STATE_RESOURCE_GOLD)))+"|r")endifcall N5I(M0,2,TGI+2,s)set TGI=TGI+1endloopset TGI=1set THI=SA0loopexitwhen TGI>THIcall N9I(M0,1,TGI+3+S90,SAI(K1[GetPlayerId(S1[TGI])]))call N5I(M0,3,TGI+3+S90,"|c00838B8B"+I2S(GetHeroLevel(K1[GetPlayerId(S1[TGI])]))+"|r")if RQ0[GetPlayerId(GetLocalPlayer())]thencall NVI(M0,7,1,3)call NVI(M0,8,1,2.8)call NVI(M0,9,1,0.8)call NVI(M0,10,1,0.8)call NVI(M0,11,1,0.8)call NVI(M0,12,1,0.8)call NVI(M0,13,1,0.1)call NVI(M0,7,TGI+3+S90,3)call NVI(M0,8,TGI+3+S90,1.1)call NVI(M0,9,TGI+3+S90,1.1)call NVI(M0,10,TGI+3+S90,1.1)call NVI(M0,11,TGI+3+S90,1.1)call NVI(M0,12,TGI+3+S90,1.1)call NVI(M0,13,TGI+3+S90,0.1)call NBI(M0,8,TGI+3+S90,false,true)call NBI(M0,9,TGI+3+S90,false,true)call NBI(M0,10,TGI+3+S90,false,true)call NBI(M0,11,TGI+3+S90,false,true)call NBI(M0,12,TGI+3+S90,false,true)call NBI(M0,13,TGI+3+S90,false,true)call N5I(M0,8,1,"Items")elsecall NVI(M0,7,1,2)call NVI(M0,8,1,0.1)call NVI(M0,9,1,0.1)call NVI(M0,10,1,0.1)call NVI(M0,11,1,0.1)call NVI(M0,12,1,0.1)call NVI(M0,13,1,0.1)call NVI(M0,7,TGI+3+S90,2.5)call NVI(M0,8,TGI+3+S90,0.1)call NVI(M0,9,TGI+3+S90,0.1)call NVI(M0,10,TGI+3+S90,0.1)call NVI(M0,11,TGI+3+S90,0.1)call NVI(M0,12,TGI+3+S90,0.1)call NVI(M0,13,TGI+3+S90,0.1)call NBI(M0,8,TGI+3+S90,false,false)call NBI(M0,9,TGI+3+S90,false,false)call NBI(M0,10,TGI+3+S90,false,false)call NBI(M0,11,TGI+3+S90,false,false)call NBI(M0,12,TGI+3+S90,false,false)call NBI(M0,13,TGI+3+S90,false,false)call N5I(M0,8,1," ")endifcall N9I(M0,8,TGI+3+S90,PVO(S1[TGI],1))call N9I(M0,9,TGI+3+S90,PVO(S1[TGI],2))call N9I(M0,10,TGI+3+S90,PVO(S1[TGI],3))call N9I(M0,11,TGI+3+S90,PVO(S1[TGI],4))call N9I(M0,12,TGI+3+S90,PVO(S1[TGI],5))call N9I(M0,13,TGI+3+S90,PVO(S1[TGI],6))if(SVI(K1[GetPlayerId(S1[TGI])])and K1[GetPlayerId(S1[TGI])]!=null and TimerGetRemaining(F0[GetPlayerId(S1[TGI])])>0)thenif IsPlayerAlly(GetLocalPlayer(),S1[TGI])thenset PUO=SF0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(S1[TGI])]))))+")|r"elseset PUO=SC0+" ("+(I2S(R2I(TimerGetRemaining(F0[GetPlayerId(S1[TGI])]))))+")|r"endifelseset PUO="  "endifif EF0[GetPlayerId(S1[TGI])]thencall N5I(M0,1,TGI+3+S90,"|c00333333"+(D80[GetPlayerId((S1[TGI]))])+"|r"+PUO)elsecall N5I(M0,1,TGI+3+S90,(D80[GetPlayerId((S1[TGI]))])+PUO)endifset PNO=(TimerGetRemaining(EJ0[GetPlayerId((S1[TGI]))]))if PNO>0 thenset s=I2S(R2I(PNO))elseset s=" "endifif IsPlayerAlly(GetLocalPlayer(),S1[TGI])==false thencall N5I(M0,7,TGI+3+S90," ")set s=" "elsecall N5I(M0,7,TGI+3+S90,"|cffffcc00"+I2S(R2I(GetPlayerState(S1[TGI],PLAYER_STATE_RESOURCE_GOLD)))+"|r")endifcall N5I(M0,2,TGI+3+S90,s)set TGI=TGI+1endloopendfunctionfunction Trig_CS_Board_Actions takes nothing returns nothingset GO[GetPlayerId(BO[1])]=CreateLeaderboard()set GO[GetPlayerId(BO[2])]=CreateLeaderboard()set GO[GetPlayerId(BO[3])]=CreateLeaderboard()set GO[GetPlayerId(BO[4])]=CreateLeaderboard()set GO[GetPlayerId(BO[5])]=CreateLeaderboard()set GO[GetPlayerId(CO[1])]=CreateLeaderboard()set GO[GetPlayerId(CO[2])]=CreateLeaderboard()set GO[GetPlayerId(CO[3])]=CreateLeaderboard()set GO[GetPlayerId(CO[4])]=CreateLeaderboard()set GO[GetPlayerId(CO[5])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[1],GO[GetPlayerId(BO[1])])call PlayerSetLeaderboard(BO[2],GO[GetPlayerId(BO[2])])call PlayerSetLeaderboard(BO[3],GO[GetPlayerId(BO[3])])call PlayerSetLeaderboard(BO[4],GO[GetPlayerId(BO[4])])call PlayerSetLeaderboard(BO[5],GO[GetPlayerId(BO[5])])call PlayerSetLeaderboard(CO[1],GO[GetPlayerId(CO[1])])call PlayerSetLeaderboard(CO[2],GO[GetPlayerId(CO[2])])call PlayerSetLeaderboard(CO[3],GO[GetPlayerId(CO[3])])call PlayerSetLeaderboard(CO[4],GO[GetPlayerId(CO[4])])call PlayerSetLeaderboard(CO[5],GO[GetPlayerId(CO[5])])call LeaderboardDisplay(GO[GetPlayerId(BO[1])],false)call LeaderboardDisplay(GO[GetPlayerId(BO[2])],false)call LeaderboardDisplay(GO[GetPlayerId(BO[3])],false)call LeaderboardDisplay(GO[GetPlayerId(BO[4])],false)call LeaderboardDisplay(GO[GetPlayerId(BO[5])],false)call LeaderboardDisplay(GO[GetPlayerId(CO[1])],false)call LeaderboardDisplay(GO[GetPlayerId(CO[2])],false)call LeaderboardDisplay(GO[GetPlayerId(CO[3])],false)call LeaderboardDisplay(GO[GetPlayerId(CO[4])],false)call LeaderboardDisplay(GO[GetPlayerId(CO[5])],false)call LeaderboardSetLabelBJ(GO[GetPlayerId(BO[1])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(BO[2])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(BO[3])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(BO[4])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(BO[5])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(CO[1])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(CO[2])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(CO[3])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(CO[4])],"Creep Kills: 0 Denies: 0")call LeaderboardSetLabelBJ(GO[GetPlayerId(CO[5])],"Creep Kills: 0 Denies: 0")endfunctionfunction EndScore_GameMode takes nothing returns stringreturn ELendfunctionfunction EndScore_GetWinner takes nothing returns stringreturn J3endfunctionfunction Q1O takes player T4I returns stringreturn C0[GetPlayerId(T4I)]+(D80[GetPlayerId((T4I))])+"|r"endfunctionfunction QOO takes player T4I returns stringlocal string Q2O=I2S(FB0[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction Q4O takes player T4I returns stringlocal string Q2O=I2S(FA0[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction VM1 takes nothing returns nothinglocal integer i=1local multiboarditem N8Iloopexitwhen i>SW0if(K3[GetPlayerId((SV0[i]))])!="Here"thenset N8I=MultiboardGetItem(SG0,SH0[i],SZ0[i])call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c00555555"+(K3[GetPlayerId((SV0[i]))])+"|r")call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)endifset i=i+1endloopendfunctionfunction Q5O takes player T4I returns stringlocal string Q2O=I2S(GetPlayerState(T4I,PLAYER_STATE_RESOURCE_GOLD))local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction Q6O takes player T4I returns stringlocal string Q2O=I2S(E[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction Q7O takes player T4I returns stringlocal string Q2O=I2S(GetUnitLevel(K1[GetPlayerId(T4I)]))local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction Q8O takes player T4I returns stringlocal string Q2O=I2S(F[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction Q9O takes player T4I returns stringlocal string Q2O=I2S(Y[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QAO takes player T4I returns stringlocal string Q2O=I2S(G[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QBO takes player T4I returns stringlocal string Q2O=I2S(D[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QCO takes player T4I returns stringlocal string Q2O=I2S(I[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QDO takes player T4I returns stringlocal string Q2O=I2S(O[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QEO takes player T4I returns stringlocal string Q2O=I2S(A[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QFO takes player T4I returns stringlocal string Q2O=I2S(B[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QGO takes player T4I returns stringlocal string Q2O=I2S((LoadInteger(LY,(400+GetPlayerId(T4I)),(79))))local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QHO takes player T4I returns stringlocal string Q2O=I2S(Z[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QZO takes player T4I returns stringlocal string Q2O=I2S(V[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QVO takes player T4I returns stringlocal string Q2O=I2S(H[GetPlayerId(T4I)])local string Q3O=Q2Oif T4I==GetLocalPlayer()thenset Q3O=SX0+Q2O+"|r"endifreturn Q3Oendfunctionfunction QWO takes player T4I returns stringlocal string QXOlocal string QYOlocal string Q3Olocal integer k=J[GetPlayerId(T4I)]local integer d=X[GetPlayerId(T4I)]if k<1 thenset k=0endifif d<1 thenset d=0endifset QXO=I2S(k)set QYO=I2S(d)set Q3O=QXO+"/"+QYOif T4I==GetLocalPlayer()thenset Q3O=SX0+QXO+"|r/"+SX0+QYO+"|r"endifreturn Q3Oendfunctionfunction QJO takes player T4I returns stringlocal integer QKO=W[GetPlayerId(T4I)]local string GW1local integer BX1local integer BY1set BX1=(QKO/60)-(1/2)set BY1=ModuloInteger(QKO,60)if(BY1<10)thenset GW1=I2S(BX1)+":0"+I2S(BY1)elseset GW1=I2S(BX1)+":"+I2S(BY1)endifif T4I==GetLocalPlayer()thenset GW1=SX0+GW1+"|r"endifreturn GW1endfunctionfunction QLO takes player P7I,player P8I returns stringlocal string QXOlocal string QYOlocal string Q3Olocal integer k=(LoadInteger(LY,(400+GetPlayerId(P7I)),(450+GetPlayerId(P8I))))local integer d=(LoadInteger(LY,(400+GetPlayerId(P7I)),(500+GetPlayerId(P8I))))if k<1 thenset k=0endifif d<1 thenset d=0endifset QXO=I2S(k)set QYO=I2S(d)set Q3O=QXO+"/"+QYOif P7I==GetLocalPlayer()thenset Q3O=SX0+QXO+"|r/"+SX0+QYO+"|r"endifreturn Q3Oendfunctionfunction EndScore_AllKD takes nothing returns stringreturn"|c00ff0303"+I2S(I[GetPlayerId(BO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(BO[0])])+"|r"endfunctionfunction QMO takes nothing returns nothinglocal integer QNO=S90local integer QSO=SA0local player array QTOlocal player array QROlocal integer QPOlocal integer QQOlocal integer QUO=21+QAI(QNO,QSO)+1local integer U0O=1+(QNO+QSO)*2local multiboarditem N8Ilocal integer ilocal integer xlocal integer curRow1local integer curRow2local string e="|r"local string c0="|cff99ccff"local integer UIOlocal integer U1Ocall DisableTrigger(FH)call DestroyMultiboard(M0)if QNO>0 and QSO>0 thenset QUO=QUO+2endifset SG0=CreateMultiboard()call MultiboardSetItemsWidth(SG0,0)call MultiboardSetRowCount(SG0,QUO)call MultiboardSetColumnCount(SG0,U0O)call MultiboardSetTitleText(SG0,GetObjectName(1848657203)+" "+" - "+(EL))call MultiboardMinimize(SG0,true)call MultiboardSetItemsStyle(SG0,false,false)call MultiboardDisplay(SG0,true)call MultiboardMinimize(SG0,false)call MultiboardSetTitleText(SG0,GetObjectName(1848657203)+" "+" - "+(EL)+" - "+("|c00ff0303"+I2S(I[GetPlayerId(BO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(BO[0])])+"|r"))set x=1set i=1loopexitwhen i>5if T3I(BO[i])or GetPlayerSlotState(BO[i])==PLAYER_SLOT_STATE_LEFT thenset QTO[x]=BO[i]set x=x+1endifset i=i+1endloopset x=1set i=1loopexitwhen i>5if T3I(CO[i])or GetPlayerSlotState(CO[i])==PLAYER_SLOT_STATE_LEFT thenset QRO[x]=CO[i]set x=x+1endifset i=i+1endloopset i=0set QQO=0loopexitwhen i>QUOset N8I=MultiboardGetItem(SG0,i,QQO)call MultiboardSetItemWidth(N8I,0.075)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=0set QQO=0set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I," ")call MultiboardReleaseItem(N8I)set QQO=0set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,false)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q1O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q1O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,false)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemValue(N8I,Q7O(QTO[i]))call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemValue(N8I,Q7O(QRO[i]))call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657218)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(1)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(2)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(1)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(2)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+" "+e)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(3)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(4)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(3)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(4)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+" "+e)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(5)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(6)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(5)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(6)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657202)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q5O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q5O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657201)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QCO(QTO[i])+"/"+QDO(QTO[i])+"/"+QBO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QCO(QRO[i])+"/"+QDO(QRO[i])+"/"+QBO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656986)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QEO(QTO[i])+"/"+QFO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QEO(QRO[i])+"/"+QFO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848658517)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QOO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QOO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848658758)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q4O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q4O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657200)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q8O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q8O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656980)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QWO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QWO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656985)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QGO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QGO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656981)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q9O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q9O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656982)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QJO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QJO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656983)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QAO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QAO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656974)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q6O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q6O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656952)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QHO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QHO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656969)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QZO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QZO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656973)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QVO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QVO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopif QNO>0 and QSO>0 thenset QQO=0set UIO=QPOset U1O=QQOset QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656972)+e)call MultiboardReleaseItem(N8I)set QPO=UIOset x=1loopexitwhen x>QNOset QQO=0set QPO=UIOset i=1loopexitwhen i>QSOset QQO=x+(x-1)set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[x]))])))call MultiboardSetItemWidth(N8I,0.01)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))call MultiboardSetItemValue(N8I," "+QLO(QTO[x],QRO[i]))call MultiboardSetItemWidth(N8I,0.059)call MultiboardReleaseItem(N8I)set i=i+1endloopset x=x+1endloopset x=QNO+1loopexitwhen x>(QSO+QNO)set QQO=0set QPO=UIOset i=1loopexitwhen i>QNOset QQO=x+(x-1)set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[x-QNO]))])))call MultiboardSetItemWidth(N8I,0.01)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))call MultiboardSetItemValue(N8I," "+QLO(QRO[x-QNO],QTO[i]))call MultiboardSetItemWidth(N8I,0.059)call MultiboardReleaseItem(N8I)set i=i+1endloopset x=x+1endloopendifset QPO=QPO+1set QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656730)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(K3[GetPlayerId((QTO[i]))]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set SW0=SW0+1set SH0[SW0]=QPOset SZ0[SW0]=QQOset SV0[SW0]=QTO[i]set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(K3[GetPlayerId((QRO[i]))]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set SW0=SW0+1set SH0[SW0]=QPOset SZ0[SW0]=QQOset SV0[SW0]=QRO[i]set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SG0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656953)+e)call MultiboardReleaseItem(N8I)set N8I=MultiboardGetItem(SG0,QPO,QQO+1)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(J3))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)call MultiboardMinimize(SG0,true)call MultiboardMinimize(SG0,false)endfunctionfunction ObsBoard_GameMode takes nothing returns stringreturn ELendfunctionfunction U2O takes player T4I returns stringreturn C0[GetPlayerId(T4I)]+(D80[GetPlayerId((T4I))])+"|r"endfunctionfunction U3O takes player T4I returns stringlocal integer k=J[GetPlayerId(T4I)]local integer d=X[GetPlayerId(T4I)]if k<1 thenset k=0endifif d<1 thenset d=0endifreturn I2S(k)+"/"+I2S(d)endfunctionfunction U4O takes player T4I returns stringlocal integer QKO=W[GetPlayerId(T4I)]local string GW1local integer BX1local integer BY1set BX1=(QKO/60)-(1/2)set BY1=ModuloInteger(QKO,60)if(BY1<10)thenset GW1=I2S(BX1)+":0"+I2S(BY1)elseset GW1=I2S(BX1)+":"+I2S(BY1)endifreturn GW1endfunctionfunction U5O takes player P7I,player P8I returns stringlocal integer k=(LoadInteger(LY,(400+GetPlayerId(P7I)),(450+GetPlayerId(P8I))))local integer d=(LoadInteger(LY,(400+GetPlayerId(P7I)),(500+GetPlayerId(P8I))))if k<1 thenset k=0endifif d<1 thenset d=0endifreturn I2S(k)+"/"+I2S(d)endfunctionfunction U6O takes player P7I returns stringlocal string U7Oif IC1(K1[GetPlayerId(P7I)])thenset U7O=I2S(R2I(TimerGetRemaining(F0[GetPlayerId(P7I)])))elseset U7O=" "endifreturn U7Oendfunctionfunction U8O takes player P7I returns stringlocal real r=(TimerGetRemaining(EJ0[GetPlayerId((P7I))]))local string U7Oif r>0 thenset U7O=I2S(R2I(r))elseset U7O=" "endifreturn U7Oendfunctionfunction U9O takes integer UAO,integer UBO returns nothingset SY0=CreateMultiboard()call MultiboardSetItemsWidth(SY0,0)call MultiboardSetRowCount(SY0,UAO)call MultiboardSetColumnCount(SY0,UBO)call MultiboardSetTitleText(SY0,GetObjectName(1848657203)+" "+" - "+(EL))call MultiboardMinimize(SY0,true)call MultiboardSetItemsStyle(SY0,false,false)if GetLocalPlayer()==D60 or GetLocalPlayer()==D70 thencall MultiboardDisplay(SY0,true)endifendfunctionfunction ObsBoard_AllKD takes nothing returns stringreturn"|c00ff0303"+I2S(I[GetPlayerId(BO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(BO[0])])+"|r"endfunctionfunction UCO takes nothing returns nothinglocal integer QNO=L1local integer QSO=M1local player array QTOlocal player array QROlocal integer QPOlocal integer QQOlocal integer QUO=1+21+QAI(QNO,QSO)local integer U0O=1+(QNO+QSO)*2local multiboarditem N8Ilocal integer ilocal integer xlocal integer curRow1local integer curRow2local string e="|r"local string c0="|cff99ccff"local integer UIOlocal integer U1Olocal integer UDO=131local integer UEO=139local integer UFO=139local integer UGO=255local integer PSO=0local string PTO=""local string PRO=""local integer PPO=0local integer PQO=0local integer rif QNO>0 and QSO>0 thenset QUO=QUO+2endifif GetTriggerExecCount(GetTriggeringTrigger())==1 thencall U9O(QUO,U0O)endifif C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70)thencall MultiboardDisplay(SY0,true)endifset i=1loopexitwhen i>5set r=R2I(TimerGetRemaining(F0[GetPlayerId(BO[i])]))if r>0 thenset PSO=PSO+PZO(r)if PPO==0 thenif r<10 thenset PTO=C0[GetPlayerId(BO[i])]+"0"+I2S(r)+" |r"elseset PTO=C0[GetPlayerId(BO[i])]+I2S(r)+" |r"endifelseif r<10 thenset PTO=PTO+SF0+"| |r"+C0[GetPlayerId(BO[i])]+"0"+I2S(r)+" |r"elseset PTO=PTO+SF0+"| |r"+C0[GetPlayerId(BO[i])]+I2S(r)+" |r"endifendifset PPO=PPO+1endifset i=i+1endloopif PPO>0 thenset PTO=SF0+"[Sentinel: |r"+PTO+SF0+"]|r"endifset i=1loopexitwhen i>5set r=R2I(TimerGetRemaining(F0[GetPlayerId(CO[i])]))if r>0 thenset PSO=PSO+PZO(r)if PQO==0 thenif r<10 thenset PRO=C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"elseset PRO=C0[GetPlayerId(CO[i])]+I2S(r)+" |r"endifelseif r<10 thenset PRO=PRO+SF0+"| |r"+C0[GetPlayerId(CO[i])]+"0"+I2S(r)+" |r"elseset PRO=PRO+SF0+"| |r"+C0[GetPlayerId(CO[i])]+I2S(r)+" |r"endifendifset PQO=PQO+1endifset i=i+1endloopif PQO>0 thenset PRO=SF0+"[Scourge: |r"+PRO+SF0+"]|r"endifcall MultiboardSetTitleText(SY0,PTO+" "+PRO+" "+GetObjectName(1848657203)+" "+" - "+(EL)+" - "+("|c00ff0303"+I2S(I[GetPlayerId(BO[0])])+"|r/|c0020c000"+I2S(O[GetPlayerId(BO[0])])+"|r"))set x=1set i=1loopexitwhen i>5if T3I(BO[i])or GetPlayerSlotState(BO[i])==PLAYER_SLOT_STATE_LEFT thenset QTO[x]=BO[i]set x=x+1endifset i=i+1endloopset x=1set i=1loopexitwhen i>5if T3I(CO[i])or GetPlayerSlotState(CO[i])==PLAYER_SLOT_STATE_LEFT thenset QRO[x]=CO[i]set x=x+1endifset i=i+1endloopset i=0set QQO=0loopexitwhen i>QUOset N8I=MultiboardGetItem(SY0,i,QQO)call MultiboardSetItemWidth(N8I,0.075)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=0set QQO=0set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I," ")call MultiboardReleaseItem(N8I)set QQO=0set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,false)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U2O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U2O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,false)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemValue(N8I,"("+(I2S(GetUnitLevel(K1[GetPlayerId((QTO[i]))])))+")")call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemValue(N8I,"("+(I2S(GetUnitLevel(K1[GetPlayerId((QRO[i]))])))+")")call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657218)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(1)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(2)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(1)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(2)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+" "+e)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(3)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(4)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(3)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(4)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QPO=QPO+1set QQO=0set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+" "+e)call MultiboardReleaseItem(N8I)set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(5)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QTO[i]))],(6)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(5)-1))))call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(F21(UnitItemInSlot(K1[GetPlayerId((QRO[i]))],(6)-1))))call MultiboardSetItemWidth(N8I,0.054)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657202)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(GetPlayerState((QTO[i]),PLAYER_STATE_RESOURCE_GOLD))))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(GetPlayerState((QRO[i]),PLAYER_STATE_RESOURCE_GOLD))))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848659028)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(WS[GV1(GetHeroLevel(K1[GetPlayerId((QTO[i]))]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(WS[GV1(GetHeroLevel(K1[GetPlayerId((QRO[i]))]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656986)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(A[GetPlayerId((QTO[i]))]))+"/"+(I2S(B[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(A[GetPlayerId((QRO[i]))]))+"/"+(I2S(B[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657201)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(I[GetPlayerId((QTO[i]))]))+"/"+(I2S(O[GetPlayerId((QTO[i]))]))+"/"+(I2S(D[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(I[GetPlayerId((QRO[i]))]))+"/"+(I2S(O[GetPlayerId((QRO[i]))]))+"/"+(I2S(D[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848658517)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QOO(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,QOO(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848658758)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q4O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Q4O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657200)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(F[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(F[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656980)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U3O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U3O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656985)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S((LoadInteger(LY,(400+GetPlayerId((QTO[i]))),(79))))))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S((LoadInteger(LY,(400+GetPlayerId((QRO[i]))),(79))))))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656981)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(Y[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(Y[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656982)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U4O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,U4O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656983)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(G[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(G[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656974)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(E[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(E[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656952)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(Z[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(Z[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656969)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(V[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(V[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656973)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(H[GetPlayerId((QTO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,(I2S(H[GetPlayerId((QRO[i]))])))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopif QNO>0 and QSO>0 thenset QQO=0set UIO=QPOset U1O=QQOset QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848656972)+e)call MultiboardReleaseItem(N8I)set QPO=UIOset x=1loopexitwhen x>QNOset QQO=0set QPO=UIOset i=1loopexitwhen i>QSOset QQO=x+(x-1)set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[x]))])))call MultiboardSetItemWidth(N8I,0.01)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))call MultiboardSetItemValue(N8I," "+U5O(QTO[x],QRO[i]))call MultiboardSetItemWidth(N8I,0.059)call MultiboardReleaseItem(N8I)set i=i+1endloopset x=x+1endloopset x=QNO+1loopexitwhen x>(QSO+QNO)set QQO=0set QPO=UIOset i=1loopexitwhen i>QNOset QQO=x+(x-1)set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[x-QNO]))])))call MultiboardSetItemWidth(N8I,0.01)call MultiboardReleaseItem(N8I)set QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))call MultiboardSetItemValue(N8I," "+U5O(QRO[x-QNO],QTO[i]))call MultiboardSetItemWidth(N8I,0.059)call MultiboardReleaseItem(N8I)set i=i+1endloopset x=x+1endloopendifset QPO=QPO+1set QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848658003)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)if U6O(QTO[i])==" "thencall MultiboardSetItemStyle(N8I,true,false)elsecall MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))endifcall MultiboardSetItemValue(N8I,U8O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemValueColor(N8I,UDO,UEO,UFO,UGO)if U6O(QRO[i])==" "thencall MultiboardSetItemStyle(N8I,true,false)elsecall MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))endifcall MultiboardSetItemValue(N8I,U8O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset QQO=0set QPO=QPO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,c0+GetObjectName(1848657204)+e)call MultiboardReleaseItem(N8I)set QQO=0set i=1loopexitwhen i>QNOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)if U6O(QTO[i])==" "thencall MultiboardSetItemStyle(N8I,true,false)elsecall MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QTO[i]))])))endifcall MultiboardSetItemValue(N8I,U6O(QTO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopset i=1loopexitwhen i>QSOset QQO=QQO+1set N8I=MultiboardGetItem(SY0,QPO,QQO)if U6O(QRO[i])==" "thencall MultiboardSetItemStyle(N8I,true,false)elsecall MultiboardSetItemStyle(N8I,true,true)call MultiboardSetItemIcon(N8I,(SAI(K1[GetPlayerId((QRO[i]))])))endifcall MultiboardSetItemValue(N8I,U6O(QRO[i]))call MultiboardSetItemWidth(N8I,0.07)call MultiboardReleaseItem(N8I)set i=i+1endloopendfunctionfunction UHO takes nothing returns nothinglocal trigger tif C2 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddAction(t,function UCO)set SJ0=tendifendfunctionfunction UZO takes nothing returns booleanlocal integer id=GetUnitTypeId(GetTriggerUnit())local string STIif GetLocalPlayer()==GetTriggerPlayer()thenif id==1749236021 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848652107 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1849897784 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1697657397 thenelseif id==1848651862 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848651863 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848651826 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848651864 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848651833 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1848657989 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1849897781 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1966092369 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1967339316 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1966092592 thencall ResetUnitAnimation(GetTriggerUnit())elseif id==1966092378 thencall ResetUnitAnimation(GetTriggerUnit())endifendifreturn falseendfunctionfunction UVO takes nothing returns booleanlocal integer id=GetUnitTypeId(GetTriggerUnit())local string STIif GetLocalPlayer()==GetTriggerPlayer()thenif id==1749236021 thenset STI="stand work"elseif id==1848652107 thenset STI="stand third"elseif id==1849897784 thencall SetUnitAnimationByIndex(GetTriggerUnit(),3)elseif id==1697657397 thenelseif id==1848651862 thenset STI="spell attack"elseif id==1848651863 thenset STI="spell"elseif id==1848651826 thencall SetUnitAnimationByIndex(GetTriggerUnit(),3)elseif id==1848651864 thenset STI="stand work"elseif id==1848651833 thenset STI="stand work"elseif id==1848657989 thenset STI="stand victory"elseif id==1849897781 thenset STI="stand work"elseif id==1966092369 thenset STI="stand work"elseif id==1967339316 thenset STI="stand work gold"elseif id==1966092592 thenset STI="stand work"elseif id==1966092378 thenset STI="stand work"endifif STI!=""thencall SetUnitAnimation(GetTriggerUnit(),STI)call QueueUnitAnimation(GetTriggerUnit(),STI)endifendifreturn falseendfunctionfunction IsChinese takes nothing returns booleanreturn GetObjectName(1848658741)!="Only Translate This String If Simplified Chinese"endfunctionfunction UXO takes nothing returns booleanlocal integer i=0local string s="@IceFrogCN()@IceFrogdev()"loopexitwhen i>12if GetRandomInt(0,10)<11 and(GetObjectName(1848658741)!="Only Translate This String If Simplified Chinese")thencall DisplayTimedTextToPlayer(Player(i),0,0,20,"|CFF00FF00"+s+"|r")endifset i=i+1endloopreturn falseendfunctionfunction UJO takes unit u returns nothingendfunctionfunction UKO takes nothing returns booleanlocal real ULOlocal real UMOlocal unit uif TK0==false thenset u=IA0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SK0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TL0==false thenset u=IB0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SL0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TM0==false thenset u=IC0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SM0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TJ0==false thenset u=ID0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SN0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IE0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SS0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IF0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-ST0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IG0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SR0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IH0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SP0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IZ0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SQ0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IV0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-SU0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IW0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T00)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IX0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TI0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IY0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T10)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=IJ0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TO0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=I60if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T20)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TW0==false thenset u=C10if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T30)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TX0==false thenset u=CO0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T40)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TY0==false thenset u=C20if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T50)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifif TV0==false thenset u=C30if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T60)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C40if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T70)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C50if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T80)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C60if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-T90)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C70if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TA0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C80if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TB0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=C90if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TC0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=CA0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TD0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=CB0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TE0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=CC0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TF0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=CD0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TG0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifset u=BQ0if u!=null thenset ULO=GetUnitState(u,UNIT_STATE_LIFE)set UMO=ULO+TZ0if UMO<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TH0)thencall SetUnitState(u,UNIT_STATE_LIFE,UMO)call UJO(u)endifendifendifreturn falseendfunctionfunction UNO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TW0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T30=T30+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction USO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TX0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T40=T40+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction UTO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TY0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T50=T50+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction URO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T60=T60+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction UPO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T70=T70+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction UQO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T80=T80+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction UUO takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T90=T90+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I02 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TA0=TA0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction II2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TB0=TB0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I12 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TC0=TC0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IO2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TD0=TD0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I22 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TE0=TE0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I32 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TF0=TF0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I42 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TG0=TG0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I52 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TV0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TH0=TH0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I62 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TK0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SK0=SK0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I72 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TL0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SL0=SL0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I82 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TM0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SM0=SM0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction I92 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SN0=SN0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IA2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SS0=SS0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IB2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset ST0=ST0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IC2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SR0=SR0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction ID2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SP0=SP0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IE2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SQ0=SQ0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IF2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset SU0=SU0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IG2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T00=T00+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IH2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TI0=TI0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IZ2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T10=T10+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IV2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset TO0=TO0+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IW2 takes nothing returns booleanlocal real PAI=GetEventDamage()if IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)set PAI=(1-0.25)*PAIendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif TJ0 or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true thenset T20=T20+PAIelseif IsUnitIllusion(GetEventDamageSource())==true thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.75*PAI)elsecall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+0.25*PAI)endifendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IY2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==CO[0]thenset TJ0=trueendifreturn falseendfunctionfunction IJ2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==CO[0]thenset TK0=trueendifreturn falseendfunctionfunction IK2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==CO[0]thenset TL0=trueendifreturn falseendfunctionfunction IL2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==CO[0]thenset TM0=trueendifreturn falseendfunctionfunction IM2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==BO[0]thenset TV0=trueendifreturn falseendfunctionfunction IN2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==BO[0]thenset TW0=trueendifreturn falseendfunctionfunction IS2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==BO[0]thenset TX0=trueendifreturn falseendfunctionfunction IT2 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==BO[0]thenset TY0=trueendifreturn falseendfunctionfunction IR2 takes nothing returns booleanlocal group g=NTI()set TV0=falseset TW0=falseset TX0=falseset TY0=falseset TJ0=falseset TK0=falseset TL0=falseset TM0=falsecall GroupEnumUnitsInRect(g,O6,Condition(function IY2))call GroupEnumUnitsInRect(g,A6,Condition(function IY2))call GroupEnumUnitsInRect(g,B6,Condition(function IY2))call GroupEnumUnitsInRect(g,CB,Condition(function IY2))call GroupEnumUnitsInRect(g,DB,Condition(function IY2))call GroupEnumUnitsInRect(g,EB,Condition(function IY2))call GroupEnumUnitsInRect(g,AB,Condition(function IJ2))call GroupEnumUnitsInRect(g,ZB,Condition(function IK2))call GroupEnumUnitsInRect(g,BB,Condition(function IL2))call GroupEnumUnitsInRect(g,C6,Condition(function IM2))call GroupEnumUnitsInRect(g,D6,Condition(function IM2))call GroupEnumUnitsInRect(g,E6,Condition(function IM2))call GroupEnumUnitsInRect(g,HB,Condition(function IM2))call GroupEnumUnitsInRect(g,FB,Condition(function IM2))call GroupEnumUnitsInRect(g,GB,Condition(function IM2))call GroupEnumUnitsInRect(g,UA,Condition(function IN2))call GroupEnumUnitsInRect(g,IB,Condition(function IS2))call GroupEnumUnitsInRect(g,OB,Condition(function IT2))call NSI(g)set g=nullreturn falseendfunctionfunction IQ2 takes nothing returns booleancall S0I(GetTriggeringTrigger())call TriggerEvaluate(OH)return falseendfunctionfunction IU2 takes nothing returns booleanlocal real r=TimerGetRemaining(OL)local real BQO=rlocal integer QHI=R2I(BQO)local integer BX1=QHI/60-1/2local integer BY1=ModuloInteger(QHI,60)local trigger tlocal integer ilocal player pif r==0 thenset TN0=truecall FL1("GameStart",1)call BW1(BX1,BY1,true)set CL=trueset N=TimerGetElapsed(M)call S0I(GetTriggeringTrigger())call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)call SuspendTimeOfDay(false)call SetTimeOfDayScale(0.625)if P0==false thenif HL thencall TriggerRegisterTimerEvent(J20,120,true)elsecall TriggerRegisterTimerEvent(J20,120,true)endifcall TriggerEvaluate(J20)endifcall TriggerRegisterTimerEvent(OH,60,true)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,30,false)call TriggerAddCondition(t,Condition(function IQ2))set t=nullcall TriggerRegisterTimerEventPeriodic(ZG,30.00)call TriggerExecute(ZG)call TriggerRegisterTimerEventPeriodic(UG,450.00)call TriggerRegisterTimerEventSingle(GG,2699.00)call TriggerRegisterTimerEventSingle(HG,999.00)call TriggerRegisterTimerEventSingle(HG,1999.00)call TriggerRegisterTimerEventSingle(HG,2999.00)call TriggerRegisterTimerEvent(FL0,300,true)call TriggerRegisterTimerEvent(R50,300,true)call TriggerRegisterTimerEvent(HS,30,true)call TriggerEvaluate(HS)if Q0 thencall TriggerRegisterTimerEvent(BH,600,true)endifcall ExecuteFunc("O02")elseif r==7 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,30,true)call TriggerAddCondition(t,Condition(function SNO))elseif BQO<12 and DL==false thenset DL=truecall PlaySoundBJ(OE)call BW1(BX1,BY1,true)elseif BQO==20 thenif GetRandomInt(0,10)<2 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659015)+"|r")endifelseif BQO==60 thencall ExecuteFunc("UXO")elsecall BW1(BX1,BY1,true)endifif K0==true and ModuloInteger(GetTriggerEvalCount(GetTriggeringTrigger()),4)==0 thenif r==85 thenif K1[GetPlayerId(GetLocalPlayer())]==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659530)+"|r")endifelseif r==80 thenif K1[GetPlayerId(GetLocalPlayer())]==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659531)+"|r")endifelseif r<75 and r>0 thenif r==74 thenif K1[GetPlayerId(GetLocalPlayer())]==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659532)+"|r")endifendifset i=0loopexitwhen i>5set p=BO[i]if K1[GetPlayerId(p)]==null thencall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-1)endifset p=CO[i]if K1[GetPlayerId(p)]==null thencall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-1)endifset i=i+1endloopendifendifreturn falseendfunctionfunction OI2 takes nothing returns booleanif IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=DO thenif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true thenset TS0=GetFilterUnit()elseset TT0=GetFilterUnit()endifendifreturn falseendfunctionfunction O12 takes nothing returns nothinglocal unit SQO=GetAttacker()local unit P8I=GetTriggerUnit()local group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SQO),GetUnitY(SQO),900,Condition(function OI2))call NSI(g)call DisableTrigger(GetTriggeringTrigger())if TS0!=null thencall IssueTargetOrder(SQO,"attack",TS0)call GroupAddUnit(TR0,SQO)elseif IsUnitType(P8I,UNIT_TYPE_HERO)==true and TT0!=null thencall IssueTargetOrder(SQO,"attack",TT0)call GroupAddUnit(TR0,SQO)endifcall EnableTrigger(GetTriggeringTrigger())set TS0=nullset TT0=nullset SQO=nullset P8I=nullset g=nullendfunctionfunction OO2 takes nothing returns nothingif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 thencall GroupRemoveUnit(TR0,GetEnumUnit())endifif GetUnitCurrentOrder(GetEnumUnit())!=OrderId("attack")thencall GroupRemoveUnit(TR0,GetEnumUnit())call IssuePointOrderLoc(GetEnumUnit(),"attack",O2[GetUnitAbilityLevel(GetEnumUnit(),I2)])endifendfunctionfunction O22 takes nothing returns booleancall ForGroup(TR0,function OO2)return falseendfunctionfunction O42 takes string s returns nothingset TU0=TU0+1set R00[TU0]=sendfunctionfunction O52 takes nothing returns booleanlocal integer i=1loopexitwhen i>TU0call ExecuteFunc(R00[i])set i=i+1endloopcall ExecuteFunc("UV1")call ExecuteFunc("HJO")return falseendfunctionfunction O62 takes unit SFI returns nothinglocal trigger t=CreateTrigger()call SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(38),(true))call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function O52))set t=nullendfunctionfunction O72 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())!=1211122232 and GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitIllusion(GetTriggerUnit())==false and HaveSavedBoolean(LY,GetHandleId(GetTriggerUnit()),38)==false thenif TP0 and(GetUnitTypeId(GetTriggerUnit())!=1328558160 or(GetUnitTypeId(GetTriggerUnit())==1328558160 and TQ0))thencall O62(GetTriggerUnit())endifendifreturn falseendfunctionfunction O92 takes nothing returns booleanlocal unit ulocal real OA2local boolean OB2=PLI()set u=IK0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IL0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IM0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IN0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IS0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IT0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IR0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IP0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IQ0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=IU0if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifset u=O00if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 thenset OA2=GetUnitState(u,UNIT_STATE_MANA)if OB2 thenset OA2=QDI(OA2-25,0)elseset OA2=QCI(OA2+5,300)endifcall SetUnitState(u,UNIT_STATE_MANA,OA2)endifreturn falseendfunctionfunction OE2 takes nothing returns booleanlocal real dif GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(HK))==true thenset d=QNI(BK,CK,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))if d<AK thenset AK=dset GK=GetFilterUnit()endifendifreturn falseendfunctionfunction OF2 takes unit SWI,real x,real y returns unitlocal group g=NTI()set GK=nullset HK=SWIset AK=99999set BK=xset CK=ycall GroupEnumUnitsInRange(g,x,y,2000,Condition(function OE2))call NSI(g)set g=nullreturn GKendfunctionfunction TeleportationEffect_Remove takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8Iif GetSpellAbilityId()==1093808945 thenset P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1114205798)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction OG2 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location llocal real xlocal real ylocal unit P8I=GetSpellTargetUnit()call SCI(SFI,4256,1)if P8I==null thenset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)call RemoveLocation(l)if GetSpellAbilityId()==1093751349 thenset P8I=XKO(SFI,x,y)elseset P8I=OF2(SFI,x,y)endifset x=GetUnitX(P8I)set y=GetUnitY(P8I)elseset x=GetUnitX(GetSpellTargetUnit())set y=GetUnitY(GetSpellTargetUnit())endifif(IsUnitAlly(SFI,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(SFI))or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thencall PingMinimapEx(x,y,3,255,255,255,false)endifset SFI=nullset l=nullendfunctionfunction TeleportationEffect_Main takes nothing returns booleanif GetSpellAbilityId()==1093808945 thencall OG2()endifreturn falseendfunctionfunction OZ2 takes nothing returns nothingcall TCI(1311780946)call TCI(1311788343)call TCI(1311788363)call TCI(1311788356)call TCI(1311788373)endfunctionfunction OV2 takes nothing returns nothingif RYI(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),BO[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>0.5 thencall UnitRemoveAbility(GetEnumUnit(),1110456392)call P6I(PQ,GetEnumUnit(),2,500)endifendfunctionfunction OW2 takes nothing returns nothingif RYI(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),CO[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>0.5 thencall UnitRemoveAbility(GetEnumUnit(),1110456392)call P6I(BX0,GetEnumUnit(),2,500)endifendfunctionfunction OX2 takes nothing returns booleanlocal group g=NTI()call GroupEnumUnitsInRect(g,G5,Condition(function N1I))call ForGroup(g,function OV2)call NSI(g)set g=NTI()call GroupEnumUnitsInRect(g,H5,Condition(function N1I))call ForGroup(g,function OW2)call NSI(g)set g=nullreturn falseendfunctionfunction OJ2 takes string winner returns nothinglocal integer ilocal player plocal string idlocal integer QHI=R2I(TimerGetElapsed(M)-N)local integer BX1=QHI/60-1/2local integer BY1=ModuloInteger(QHI,60)call RTI()set i=1loopexitwhen i>5set p=BO[i]set id=I2S(GetPlayerId(p))call StoreInteger(OS,id,"1",(I[GetPlayerId((p))]))call StoreInteger(OS,id,"2",(O[GetPlayerId((p))]))call StoreInteger(OS,id,"3",(A[GetPlayerId((p))]))call StoreInteger(OS,id,"4",(B[GetPlayerId((p))]))call StoreInteger(OS,id,"5",(D[GetPlayerId((p))]))call StoreInteger(OS,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))call StoreInteger(OS,id,"7",(LoadInteger(LY,(400+GetPlayerId((p))),(79))))call StoreInteger(OS,id,"8_0",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(0)))))call StoreInteger(OS,id,"8_1",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(1)))))call StoreInteger(OS,id,"8_2",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(2)))))call StoreInteger(OS,id,"8_3",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(3)))))call StoreInteger(OS,id,"8_4",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(4)))))call StoreInteger(OS,id,"8_5",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(5)))))call StoreInteger(OS,id,"9",(GetUnitTypeId(K1[GetPlayerId((p))])))call StoreInteger(OS,id,"id",i)set p=CO[i]set id=I2S(GetPlayerId(p))call StoreInteger(OS,id,"1",(I[GetPlayerId((p))]))call StoreInteger(OS,id,"2",(O[GetPlayerId((p))]))call StoreInteger(OS,id,"3",(A[GetPlayerId((p))]))call StoreInteger(OS,id,"4",(B[GetPlayerId((p))]))call StoreInteger(OS,id,"5",(D[GetPlayerId((p))]))call StoreInteger(OS,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))call StoreInteger(OS,id,"7",(LoadInteger(LY,(400+GetPlayerId((p))),(79))))call StoreInteger(OS,id,"8_0",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(0)))))call StoreInteger(OS,id,"8_1",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(1)))))call StoreInteger(OS,id,"8_2",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(2)))))call StoreInteger(OS,id,"8_3",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(3)))))call StoreInteger(OS,id,"8_4",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(4)))))call StoreInteger(OS,id,"8_5",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(5)))))call StoreInteger(OS,id,"9",(GetUnitTypeId(K1[GetPlayerId((p))])))call StoreInteger(OS,id,"id",i+5)if GetLocalPlayer()==WO thencall SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"1")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"2")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"3")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"4")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"5")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"6")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"7")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_0")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_1")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_2")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_3")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_4")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"8_5")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"9")call SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"id")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"1")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"2")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"3")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"4")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"5")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"6")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"7")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_0")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_1")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_2")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_3")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_4")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"8_5")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"9")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"id")endifset i=i+1endloopif RI0==false thencall StoreInteger(OS,"Global","Winner",R10)call StoreInteger(OS,"Global","m",BX1)call StoreInteger(OS,"Global","s",BY1)if GetLocalPlayer()==WO thencall SyncStoredInteger(OS,"Global","Winner")call SyncStoredInteger(OS,"Global","m")call SyncStoredInteger(OS,"Global","s")endifendifendfunctionfunction VL1 takes nothing returns nothingcall OJ2("1")endfunctionfunction VK1 takes nothing returns nothinglocal player p=RO0local string id=I2S(GetPlayerId(p))call StoreInteger(OS,id,"8_0",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(0)))))call StoreInteger(OS,id,"8_1",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(1)))))call StoreInteger(OS,id,"8_2",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(2)))))call StoreInteger(OS,id,"8_3",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(3)))))call StoreInteger(OS,id,"8_4",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(4)))))call StoreInteger(OS,id,"8_5",(GetItemTypeId(UnitItemInSlot(K1[GetPlayerId((p))],(5)))))if GetLocalPlayer()==WO thencall SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_0")call SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_1")call SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_2")call SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_3")call SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_4")call SyncStoredInteger(OS,I2S(GetPlayerId(p)),"8_5")endifendfunctionfunction OK2 takes nothing returns booleancall ExecuteFunc("QMO")return falseendfunctionfunction OL2 takes nothing returns nothingcall SPI(GetEnumUnit())endfunctionfunction OM2 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,0,0,12000,Condition(function C51))call ForGroup(g,function OL2)call NSI(g)set g=nullendfunctionfunction ON2 takes nothing returns nothingset bj_changeLevelShowScores=truecall DisableTrigger(RK)call DisableTrigger(PK)call ExecuteFunc("GYO")if C2 thencall DisableTrigger(SJ0)endifcall DisableTrigger(EX0)call ClearTextMessages()call QRI(bj_FORCE_ALL_PLAYERS,60,J3+" "+GetObjectName(1848653108)+" www.getdota.com.")set Q2=truecall I91()call DisableTrigger(ZG)call DisableTrigger(FH)call DisableTrigger(EW0)call NRI()endfunctionfunction OS2 takes nothing returns nothinglocal trigger t=CreateTrigger()call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function OK2))set R10=2set J3="|c0020c000"+GetObjectName(1848652623)+"|r"call ON2()call OM2()call OJ2("2")set t=nullendfunctionfunction OT2 takes nothing returns booleancall SetUnitVertexColorBJ(BQ0,100,100,100,GetTriggerEvalCount(GetTriggeringTrigger()))if GetTriggerEvalCount(GetTriggeringTrigger())==100 thencall ShowUnit(BQ0,false)call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction OR2 takes nothing returns nothinglocal trigger t=CreateTrigger()call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function OK2))set R10=1set J3="|c00ff0303"+GetObjectName(1848652622)+"|r"call ON2()call OM2()call OJ2("1")call AddSpecialEffect("war3mapImported\\FrozenThronesDeath2.mdx",GetUnitX(BQ0)+150,GetUnitY(BQ0)+100)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function OT2))set t=nullendfunctionfunction OQ2 takes real U0I returns booleanreturn(100*GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))<U0Iendfunctionfunction AntiTK_Building takes nothing returns booleanreturn OQ2(10)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012endfunctionfunction AntiTK_Hero takes nothing returns booleanreturn OQ2(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0)endfunctionfunction AntiTK_Creep takes nothing returns booleanreturn OQ2(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370)endfunctionfunction AntiTK_Exception takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4328))))==1)==trueendfunctionfunction OU2 takes nothing returns nothingif not((OQ2(10)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)or(OQ2(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0))or(OQ2(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))or(GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4328))))==1)==true))thencall IssueImmediateOrder(GetAttacker(),"stop")endifendfunctionfunction A02 takes nothing returns booleanif IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall OU2()elseif IsUnitType(GetAttacker(),UNIT_TYPE_HERO)==true or B61(GetAttacker())or IsUnitIllusion(GetAttacker())==true thenset R20=GetPlayerId(GetOwningPlayer(GetAttacker()))if IsUnitIllusion(GetAttacker())==false thenif L90[R20]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitIllusion(GetAttacker())==false and EA1(GetAttacker(),FR0[HC0])==true thencall Z3O()endifif LC0[R20]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(EA1(GetAttacker(),FR0[V10])==true or EA1(GetAttacker(),FR0[XD0])==true)thencall ZZO()endifif LE0[R20]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and EA1(GetAttacker(),FR0[VE0])==true thencall ZAO()elseif(LF0[R20]>0 or M00[R20]>0)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(EA1(GetAttacker(),FR0[VI0])==true or EA1(GetAttacker(),FR0[XC0])==true)thencall ZHO()endifendifif MI0[R20]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and(EA1(GetAttacker(),FR0[V40])==true or EA1(GetAttacker(),FR0[V50])==true or EA1(GetAttacker(),FR0[V60])==true or EA1(GetAttacker(),FR0[V70])==true)thenif IsUnitIllusion(GetAttacker())==false or IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)==true thencall ZDO()endifendifelseif GetUnitAbilityLevel(GetAttacker(),1093744467)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false thencall O12()endifreturn falseendfunctionfunction A12 takes nothing returns booleanif BZ1(GetSpellAbilityId())and BV1(GetTriggerUnit())thencall PJI(GetTriggerUnit())endifreturn falseendfunctionfunction A22 takes nothing returns nothingcall C2O()call C5O()endfunctionfunction A42 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT or(LoadBoolean(LY,(GetHandleId(SFI)),(140)))==true thenif(LoadBoolean(LY,(GetHandleId(SFI)),(140)))==true thencall SaveBoolean(LY,(GetHandleId(SFI)),(140),(false))call SaveInteger(LY,(GetHandleId((SFI))),((4259)),(2))call UnitRemoveAbility(SFI,1093678162)call BK1(SFI,false)call PauseUnit(SFI,false)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetSpellTargetUnit()==SFI and GetSpellAbilityId()==R40 and(GetPlayerSlotState(GetOwningPlayer((SFI)))==PLAYER_SLOT_STATE_LEFT)and((LoadInteger(LY,(GetHandleId((SFI))),((4259))))==1)==true thencall SaveInteger(LY,(GetHandleId((SFI))),((4259)),(2))call UnitRemoveAbility(SFI,1093678162)call BK1(SFI,false)call PauseUnit(SFI,false)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif IC1(SFI)==false thencall SetUnitX(SFI,x)call SetUnitY(SFI,y)call SaveInteger(LY,(GetHandleId((SFI))),((4259)),(1))call UnitAddAbility(SFI,1093678162)call BK1(SFI,true)call PauseUnit(SFI,true)endifset SFI=nullset t=nullreturn falseendfunctionfunction A52 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetSpellTargetUnit()call SaveBoolean(LY,(GetHandleId(SFI)),(140),(false))call SaveInteger(LY,(GetHandleId((SFI))),((4259)),(1))call UnitAddAbility(SFI,1093678162)call BK1(SFI,true)call PauseUnit(SFI,true)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))call TriggerRegisterTimerEvent(t,1,true)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function A42))set t=nullset SFI=nullendfunctionfunction A62 takes nothing returns booleanif OSI==true thenreturn falseendifif GetSpellAbilityId()==R30 and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)and((LoadInteger(LY,(GetHandleId((GetSpellTargetUnit()))),((4259))))==1)==false thencall A52()elseif(GetSpellAbilityId()==R40 or GetSpellAbilityId()==R30)and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)==false thencall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652366))endifreturn falseendfunctionfunction A82 takes destructable d returns booleanlocal real x=GetDestructableX(d)local real y=GetDestructableY(d)local group g=NTI()local boolean A92call GroupEnumUnitsInRange(g,x,y,250,Condition(function D51))set A92=FirstOfGroup(g)!=nullcall NSI(g)set g=nullreturn A92endfunctionfunction AA2 takes nothing returns nothingif RJI(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())<1 and GetDestructableTypeId(GetEnumDestructable())!=1110454322 and GetDestructableTypeId(GetEnumDestructable())!=1110454323 thenif A82(GetEnumDestructable())==false thencall DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)if BM[GetPlayerId(GetLocalPlayer())]==1 and GetDestructableTypeId(GetEnumDestructable())==1096053874 thencall SetDestructableAnimation(GetEnumDestructable(),"stand alternate")endifendifendifendfunctionfunction AB2 takes nothing returns nothingcall EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function AA2)endfunctionfunction AD2 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1848651852 thenif IsUnitIllusion(GetAttacker())==true thencall KillUnit(GetAttacker())elseif IsUnitInRegion(R60,GetAttacker())==false thencall PZI(GetOwningPlayer(GetAttacker()),GetObjectName(1848652597))call IssueImmediateOrder(GetAttacker(),"stop")endifendifreturn falseendfunctionfunction AF2 takes nothing returns booleanreturn GetUnitTypeId(GetEnteringUnit())==1697656901 or GetUnitTypeId(GetEnteringUnit())==1697657394endfunctionfunction AG2 takes nothing returns nothingcall ShowUnitHide(GetEnteringUnit())call SetUnitPathing(GetEnteringUnit(),false)call SetUnitInvulnerable(GetEnteringUnit(),true)call UnitApplyTimedLifeBJ(20.00,1112820806,GetEnteringUnit())endfunctionfunction AZ2 takes nothing returns booleanif(GetUnitTypeId(GetDyingUnit())==1697656914)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1697657137)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1697656915)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1697657145)thenreturn trueendifreturn falseendfunctionfunction AV2 takes nothing returns booleanif(not(GetDyingUnit()==IG0))thenreturn falseendifif(not(IC1(IH0)==true))thenreturn falseendifreturn trueendfunctionfunction AW2 takes nothing returns booleanif(not(GetDyingUnit()==IH0))thenreturn falseendifif(not(IC1(IG0)==true))thenreturn falseendifreturn trueendfunctionfunction AX2 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1852010352 and IsPlayerAlly(GetOwningPlayer(GetFilterUnit()),JK)==trueendfunctionfunction AY2 takes player p returns nothinglocal group g=NTI()local unit uset JK=pcall GroupEnumUnitsInRange(g,0,0,99999,Condition(function AX2))loopset u=FirstOfGroup(g)exitwhen FirstOfGroup(g)==nullif GetUnitAbilityLevel(u,1093743665)>0 thencall UnitRemoveAbility(u,1093743665)call UnitAddAbility(u,1093743665)elsecall UnitRemoveAbility(u,1093752649)call UnitAddAbility(u,1093752649)endifcall GroupRemoveUnit(g,u)endloopcall NSI(g)set g=nullset u=nullendfunctionfunction AJ2 takes nothing returns nothingif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))thenset J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifif(GetDyingUnit()==I70)thencall FL1("Tower"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(IA0,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==I80)thencall FL1("Tower"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(IB0,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==I90)thencall FL1("Tower"+I2S(0)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(IC0,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==IA0)thencall FL1("Tower"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(ID0,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==IB0)thencall FL1("Tower"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(IE0,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==IC0)thencall FL1("Tower"+I2S(0)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(IF0,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==ID0)thencall FL1("Tower"+I2S(0)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(IZ0,false)call BK1(IX0,false)call BK1(IG0,false)call BK1(IH0,false)call BK1(OI0,false)call BK1(O10,false)call BK1(OO0,false)call BK1(O20,false)call BK1(IK0,false)call BK1(IL0,false)call BK1(IM0,false)call BK1(IN0,false)call BK1(IS0,false)call BK1(IT0,false)call BK1(IR0,false)call BK1(IP0,false)call BK1(IQ0,false)call BK1(IU0,false)call BK1(O00,false)endifif(GetDyingUnit()==IE0)thencall FL1("Tower"+I2S(0)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(IV0,false)call BK1(IY0,false)call BK1(IG0,false)call BK1(IH0,false)call BK1(OI0,false)call BK1(O10,false)call BK1(OO0,false)call BK1(O20,false)call BK1(IK0,false)call BK1(IL0,false)call BK1(IM0,false)call BK1(IN0,false)call BK1(IS0,false)call BK1(IT0,false)call BK1(IR0,false)call BK1(IP0,false)call BK1(IQ0,false)call BK1(IU0,false)call BK1(O00,false)endifif(GetDyingUnit()==IF0)thencall FL1("Tower"+I2S(0)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(IW0,false)call BK1(IJ0,false)call BK1(IG0,false)call BK1(IH0,false)call BK1(OI0,false)call BK1(O10,false)call BK1(OO0,false)call BK1(O20,false)call BK1(IK0,false)call BK1(IL0,false)call BK1(IM0,false)call BK1(IN0,false)call BK1(IS0,false)call BK1(IT0,false)call BK1(IR0,false)call BK1(IP0,false)call BK1(IQ0,false)call BK1(IU0,false)call BK1(O00,false)endifif GetDyingUnit()==IG0 or GetDyingUnit()==IH0 thencall FL1("Tower"+I2S(0)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),4)endifif(AV2())thencall BK1(I60,false)endifif(AW2())thencall BK1(I60,false)endifendfunctionfunction AL2 takes nothing returns booleanif(GetUnitTypeId(GetDyingUnit())==1966092365)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1966092356)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1966092366)thenreturn trueendifif(GetUnitTypeId(GetDyingUnit())==1966092372)thenreturn trueendifreturn falseendfunctionfunction AM2 takes nothing returns booleanif(not(GetDyingUnit()==C60))thenreturn falseendifif(not(IC1(C70)==true))thenreturn falseendifreturn trueendfunctionfunction AN2 takes nothing returns booleanif(not(GetDyingUnit()==C70))thenreturn falseendifif(not(IC1(C60)==true))thenreturn falseendifreturn trueendfunctionfunction AS2 takes nothing returns nothingif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))thenset J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=J[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1endifif(GetDyingUnit()==BU0)thencall FL1("Tower"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(C10,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==C00)thencall FL1("Tower"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(CO0,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==CI0)thencall FL1("Tower"+I2S(1)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(C20,false)call R3I(GetKillingUnit(),1)call AY2(GetOwningPlayer(GetTriggerUnit()))endifif(GetDyingUnit()==C10)thencall FL1("Tower"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(C30,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==CO0)thencall FL1("Tower"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(C40,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==C20)thencall FL1("Tower"+I2S(1)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call BK1(C50,false)call R3I(GetKillingUnit(),2)endifif(GetDyingUnit()==C30)thencall FL1("Tower"+I2S(1)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(C80,false)call BK1(CB0,false)call BK1(C60,false)call BK1(C70,false)call BK1(CL0,false)call BK1(CM0,false)call BK1(CN0,false)call BK1(CS0,false)call BK1(CE0,false)call BK1(CF0,false)call BK1(CG0,false)call BK1(CH0,false)call BK1(CZ0,false)call BK1(CV0,false)call BK1(CW0,false)call BK1(CX0,false)call BK1(CY0,false)call BK1(CJ0,false)call BK1(CK0,false)endifif(GetDyingUnit()==C40)thencall FL1("Tower"+I2S(1)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(C90,false)call BK1(CC0,false)call BK1(C60,false)call BK1(C70,false)call BK1(CL0,false)call BK1(CM0,false)call BK1(CN0,false)call BK1(CS0,false)call BK1(CE0,false)call BK1(CF0,false)call BK1(CG0,false)call BK1(CH0,false)call BK1(CZ0,false)call BK1(CV0,false)call BK1(CW0,false)call BK1(CX0,false)call BK1(CY0,false)call BK1(CJ0,false)call BK1(CK0,false)endifif(GetDyingUnit()==C50)thencall FL1("Tower"+I2S(1)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),3)call BK1(CA0,false)call BK1(CD0,false)call BK1(C60,false)call BK1(C70,false)call BK1(CL0,false)call BK1(CM0,false)call BK1(CN0,false)call BK1(CS0,false)call BK1(CE0,false)call BK1(CF0,false)call BK1(CG0,false)call BK1(CH0,false)call BK1(CZ0,false)call BK1(CV0,false)call BK1(CW0,false)call BK1(CX0,false)call BK1(CY0,false)call BK1(CJ0,false)call BK1(CK0,false)endifif GetDyingUnit()==C60 or GetDyingUnit()==C70 thencall FL1("Tower"+I2S(1)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))call R3I(GetKillingUnit(),4)endifif(AM2())thencall BK1(BQ0,false)endifif(AN2())thencall BK1(BQ0,false)endifendfunctionfunction AR2 takes nothing returns booleanlocal integer x=0if GetPlayerSlotState(BO[1])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(BO[2])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(BO[3])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(BO[4])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(BO[5])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(CO[1])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(CO[2])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(CO[3])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(CO[4])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifif GetPlayerSlotState(CO[5])==PLAYER_SLOT_STATE_EMPTY thenset x=x+1endifreturn x==9endfunctionfunction SinglePlayer_Condition takes nothing returns booleanreturn bj_isSinglePlayer and AR2()endfunctionfunction AP2 takes nothing returns nothingset R70=falseendfunctionfunction AQ2 takes nothing returns nothingset R90=trueendfunctionfunction AU2 takes nothing returns nothingset R70=trueendfunctionfunction B02 takes nothing returns nothingset TK=falseset A2I=trueendfunctionfunction BI2 takes nothing returns booleanif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false thencall KillUnit(GetFilterUnit())endifreturn falseendfunctionfunction B12 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function BI2))call NSI(g)set g=nullset W3=trueendfunctionfunction BO2 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,BO[0],Condition(function BI2))call NSI(g)set g=nullset W3=trueendfunctionfunction B22 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1865429044 or GetUnitTypeId(GetFilterUnit())==1868921189 thencall KillUnit(GetFilterUnit())endifreturn falseendfunctionfunction B32 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function B22))call NSI(g)set g=nullset W3=trueendfunctionfunction B42 takes nothing returns nothingcall BO2()call B12()set W3=trueendfunctionfunction B52 takes nothing returns booleanif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true thencall SetHeroLevel(GetFilterUnit(),GetHeroLevel(GetFilterUnit())+QAI(UJ,1),true)endifreturn falseendfunctionfunction B62 takes nothing returns nothinglocal string B72=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))local integer SUI=S2I(B72)local group g=NTI()if SUI<1 thenset SUI=1endifset UJ=SUIcall GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function B52))call NSI(g)set g=nullset W3=trueendfunctionfunction B82 takes nothing returns nothingcall TriggerExecute(ZG)set W3=trueendfunctionfunction B92 takes nothing returns booleanif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true thencall UnitResetCooldown(GetFilterUnit())call TimerStart(EJ0[GetPlayerId((GetOwningPlayer(GetFilterUnit())))],0,false,null)call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE))call SetUnitState(GetFilterUnit(),UNIT_STATE_MANA,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_MANA))endifreturn falseendfunctionfunction BA2 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function B92))call NSI(g)set g=nullset W3=trueendfunctionfunction BB2 takes nothing returns nothingcall KillUnit(K1[GetPlayerId(GetTriggerPlayer())])set W3=trueendfunctionfunction BC2 takes nothing returns nothinglocal string BD2=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))local integer GW1=S2I(BD2)if GW1<0 or GW1>24 thenset GW1=0endifcall SetFloatGameState(GAME_STATE_TIME_OF_DAY,GW1)set W3=trueendfunctionfunction BE2 takes nothing returns nothinglocal string BF2=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))local integer ROI=S2I(BF2)call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+ROI)set W3=trueendfunctionfunction BG2 takes nothing returns nothinglocal unit AD1=K1[GetPlayerId(GetTriggerPlayer())]local player I6O=GetTriggerPlayer()local location I2Oif TOI(I6O)thenset I2O=GetRectCenter(S3)elseset I2O=GetRectCenter(O4)endifif Q2==false and IC1(AD1)thencall VQ1(AD1,I6O,GetLocationX(I2O),GetLocationY(I2O),true)if I0O(AD1)==false or GetUnitAbilityLevel(AD1,1093684567)==0 thencall ReviveHeroLoc(AD1,I2O,true)elsecall IOO(AD1,I2O)endifendifcall RemoveLocation(I2O)set AD1=nullset I6O=nullset I2O=nullendfunctionfunction BH2 takes nothing returns nothinglocal unit P7I=K1[GetPlayerId(GetTriggerPlayer())]local player BZ2local unit BV2local real x=GetRectCenterX(Y5)local real y=GetRectCenterX(Y5)if TOI(GetOwningPlayer(P7I))thenset BZ2=BO[1]elseset BZ2=CO[1]endifset BV2=CreateUnit(BZ2,1211117616,x,y,0)call SetHeroLevel(BV2,10,false)set P7I=nullset BV2=nullset BZ2=nullendfunctionfunction BW2 takes nothing returns nothingcall TriggerEvaluate(J20)endfunctionfunction BX2 takes nothing returns nothingcall TriggerEvaluate(OH)endfunctionfunction BY2 takes nothing returns nothingcall EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function AA2)endfunctionfunction BJ2 takes nothing returns booleancall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName(1848653382)+" ****")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName(1848653622)+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** "+GetObjectName(1848653382)+" ****")return falseendfunctionfunction BK2 takes nothing returns nothinglocal player OnlyPlayer=WOlocal trigger tset R80=truecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,GetObjectName(1848653622)+" -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")set t=CreateTrigger()call TriggerAddCondition(t,Condition(function BJ2))call TriggerRegisterTimerEvent(t,GetRandomReal(60,100),false)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,BO[2],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,BO[3],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,BO[4],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,BO[5],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,CO[1],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,CO[2],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,CO[3],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,CO[4],"-lvlup",false)call TriggerRegisterPlayerChatEvent(t,CO[5],"-lvlup",false)call TriggerAddAction(t,function B62)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawncreeps",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawncreeps",true)call TriggerAddAction(t,function B82)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-refresh",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-refresh",true)call TriggerAddAction(t,function BA2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-kill",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-kill",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-kill",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-kill",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-kill",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-kill",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-kill",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-kill",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-kill",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-kill",true)call TriggerAddAction(t,function BB2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-gold",false)call TriggerRegisterPlayerChatEvent(t,BO[2],"-gold",false)call TriggerRegisterPlayerChatEvent(t,BO[3],"-gold",false)call TriggerRegisterPlayerChatEvent(t,BO[4],"-gold",false)call TriggerRegisterPlayerChatEvent(t,BO[5],"-gold",false)call TriggerRegisterPlayerChatEvent(t,CO[1],"-gold",false)call TriggerRegisterPlayerChatEvent(t,CO[2],"-gold",false)call TriggerRegisterPlayerChatEvent(t,CO[3],"-gold",false)call TriggerRegisterPlayerChatEvent(t,CO[4],"-gold",false)call TriggerRegisterPlayerChatEvent(t,CO[5],"-gold",false)call TriggerAddAction(t,function BE2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-time",false)call TriggerRegisterPlayerChatEvent(t,BO[2],"-time",false)call TriggerRegisterPlayerChatEvent(t,BO[3],"-time",false)call TriggerRegisterPlayerChatEvent(t,BO[4],"-time",false)call TriggerRegisterPlayerChatEvent(t,BO[5],"-time",false)call TriggerRegisterPlayerChatEvent(t,CO[1],"-time",false)call TriggerRegisterPlayerChatEvent(t,CO[2],"-time",false)call TriggerRegisterPlayerChatEvent(t,CO[3],"-time",false)call TriggerRegisterPlayerChatEvent(t,CO[4],"-time",false)call TriggerRegisterPlayerChatEvent(t,CO[5],"-time",false)call TriggerAddAction(t,function BC2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-powerup",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-powerup",true)call TriggerAddAction(t,function BW2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-killall",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-killall",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-killall",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-killall",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-killall",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-killall",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-killall",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-killall",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-killall",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-killall",true)call TriggerAddAction(t,function B42)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-killsent",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-killsent",true)call TriggerAddAction(t,function BO2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-killscourge",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-killscourge",true)call TriggerAddAction(t,function B12)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-neutrals",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-neutrals",true)call TriggerAddAction(t,function BX2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-noherolimit",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-noherolimit",true)call TriggerAddAction(t,function B02)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-trees",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-trees",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-trees",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-trees",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-trees",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-trees",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-trees",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-trees",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-trees",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-trees",true)call TriggerAddAction(t,function BY2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-killwards",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-killwards",true)call TriggerAddAction(t,function B32)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawnoff",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawnoff",true)call TriggerAddAction(t,function AU2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-spawnon",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-spawnon",true)call TriggerAddAction(t,function AP2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-roshan",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-roshan",true)call TriggerAddAction(t,function AQ2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-respawn",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-respawn",true)call TriggerAddAction(t,function BG2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-dummy",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-dummy",true)call TriggerAddAction(t,function BH2)endfunctionfunction BM2 takes nothing returns booleanreturn not B0endfunctionfunction BN2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit B71=(LoadUnitHandle(LY,(S5I),(26)))if GetUnitTypeId(B71)!=1852010352 thencall UnitResetCooldown(B71)call SetUnitManaPercentBJ(B71,100)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset B71=nullreturn falseendfunctionfunction BS2 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function BN2))call SaveUnitHandle(LY,(S5I),(26),(GetTriggerUnit()))set t=nullendfunctionfunction BT2 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer BR2=T8I(OO)+T8I(AO)local integer NumRequired=Q9I(BR2,BR2/2+1)local integer S5I=GetHandleId(t)set A2I=trueif PE0==false thenset RA0=truecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.00," ")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName(1848653623))call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.00,GetObjectName(1848653624))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function BS2)endifendfunctionfunction BQ2 takes nothing returns booleanif QW1(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false thencall GK1(GetOwningPlayer(GetTriggerUnit()))call FL1("Level"+I2S(GetHeroLevel(GetTriggerUnit())),GetPlayerId(GetOwningPlayer(GetTriggerUnit())))endifreturn falseendfunctionfunction C02 takes nothing returns nothingif PE0==false thencall BK2()call S0I(GetTriggeringTrigger())endifendfunctionfunction CI2 takes nothing returns booleanif B0==false and(bj_isSinglePlayer and AR2())==false thencall C02()endifreturn falseendfunctionfunction CO2 takes nothing returns booleanlocal integer i=0local real C22local real C32local real xlocal real ylocal boolean C42loopexitwhen i>11if GetLocalPlayer()==Player(i)thenset C22=GetCameraTargetPositionX()set C32=GetCameraTargetPositionY()endifset i=i+1endloopset i=0call PauseGame(true)call TriggerSleepAction(0)loopexitwhen i>11if GetLocalPlayer()==Player(i)thencall SetCameraPosition(C22+1,C32+1)endifset i=i+1endloopcall TriggerSleepAction(0)call PauseGame(false)set i=0loopexitwhen i>11if GetLocalPlayer()==Player(i)thenset x=GetCameraTargetPositionX()if x==C22+1 thenset C42=falseelseset C42=trueendifcall SetCameraPosition(C22,C32)endifset i=i+1endloopreturn C42endfunctionfunction C52 takes nothing returns nothingcall CinematicModeBJ(true,bj_FORCE_ALL_PLAYERS)call PauseGame(false)call TriggerSleepAction(.0)call EnableUserControl(false)call TriggerSleepAction(.0)if CO2()==false thenset RB0=trueendifcall EnableUserControl(true)call M4I(1)call CinematicModeBJ(false,bj_FORCE_ALL_PLAYERS)endfunctionfunction C62 takes nothing returns booleanlocal integer i=1local unit SFIloopexitwhen i>5set SFI=K1[GetPlayerId(BO[i])]if SFI!=null and IC1(SFI)==false and IsUnitEnemy(SFI,GetLocalPlayer())==true thenif RB0 and(C2==false or(C2==true and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70)))thenif IsUnitVisible(SFI,GetLocalPlayer())==false thenif UK==2 thencall FY1(SFI)endifelseif UK==2 thencall FV1(SFI)endifendifendifendifset SFI=K1[GetPlayerId(CO[i])]if SFI!=null and IC1(SFI)==false and IsUnitEnemy(SFI,GetLocalPlayer())==true thenif RB0 and(C2==false or(C2==true and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70)))thenif IsUnitVisible(SFI,GetLocalPlayer())==false thenif UK==2 thencall FY1(SFI)endifelseif UK==2 thencall FV1(SFI)endifendifendifendifset i=i+1endloopset SFI=nullreturn falseendfunctionfunction C72 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function C62))set t=nullendfunctionfunction C82 takes nothing returns nothingcall C52()call C72()endfunctionfunction C92 takes unit SWI returns booleanreturn(GetOwningPlayer(SWI)==BO[0])or(GetOwningPlayer(SWI)==CO[0])endfunctionfunction CA2 takes nothing returns nothingcall SetUnitUserData(GetEnumUnit(),0)call IssuePointOrderLoc(GetEnumUnit(),"attack",(O2[GetUnitAbilityLevel((GetEnumUnit()),I2)]))endfunctionfunction CB2 takes nothing returns nothingcall IssueTargetOrder(GetEnumUnit(),"attack",RE0)call GroupAddUnit(RD0,GetEnumUnit())call SetUnitUserData(GetEnumUnit(),RF0)endfunctionfunction CC2 takes nothing returns booleanlocal integer id=GetUnitTypeId(GetFilterUnit())if id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370 thenreturn falseendifif IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(RE0))and(GetOwningPlayer(GetFilterUnit())==BO[0]or GetOwningPlayer(GetFilterUnit())==CO[0])and GetUnitUserData(GetFilterUnit())==0 thenreturn trueendifreturn falseendfunctionfunction CD2 takes nothing returns nothingif GetUnitCurrentOrder(GetEnumUnit())==0 and IsUnitInRange(GetEnumUnit(),RE0,GetUnitAcquireRange(GetEnumUnit()))==false thencall GroupRemoveUnit(RD0,GetEnumUnit())call SetUnitUserData(GetEnumUnit(),0)call IssuePointOrderLoc(GetEnumUnit(),"attack",(O2[GetUnitAbilityLevel((GetEnumUnit()),I2)]))endifendfunctionfunction CE2 takes nothing returns nothinglocal integer S5I=GetHandleId((LoadUnitHandle(LY,(GetHandleId(GetExpiredTimer())),(2))))local integer CF2=(LoadInteger(LY,(S5I),(143)))local group CG2=(LoadGroupHandle(LY,(S5I),(144)))set RC0[CF2]=nullcall ForGroup(CG2,function CA2)call GroupClear(CG2)set CG2=nullendfunctionfunction CH2 takes unit SFI,unit Z4O returns nothinglocal integer S5I=GetHandleId(SFI)local group CG2=(LoadGroupHandle(LY,(S5I),(144)))local integer CF2=(LoadInteger(LY,(S5I),(143)))local unit CZ2=RC0[CF2]local group gif CZ2!=null and CZ2!=Z4O thencall ForGroup(CG2,function CA2)call GroupClear(CG2)endifset RC0[CF2]=Z4Oset RD0=CG2set RE0=Z4Oset RF0=CF2call ForGroup(CG2,function CD2)set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(Z4O),GetUnitY(Z4O),500,Condition(function CC2))call ForGroup(g,function CB2)call NSI(g)call TimerStart((LoadTimerHandle(LY,(S5I),(141))),2,false,function CE2)set CG2=nullset CZ2=nullset g=nullendfunctionfunction CV2 takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local unit P8I=GetOrderTargetUnit()local integer CW2=GetIssuedOrderId()local integer CF2if IsUnitType(P8I,UNIT_TYPE_HERO)==true and IsUnitIllusion(P8I)==false and(CW2==851983 or CW2==851971)and IsUnitEnemy(P8I,GetOwningPlayer(SFI))and IsUnitVisible(SFI,GetOwningPlayer(P8I))thenset CF2=(LoadInteger(LY,(GetHandleId(P8I)),(143)))if RC0[CF2]==null or RC0[CF2]==P8I or IC1(RC0[CF2])thenif CF2!=0 thencall CH2(P8I,SFI)endifendifendifset SFI=nullset P8I=nullreturn falseendfunctionfunction CX2 takes nothing returns booleanlocal unit SFI=GetAttacker()local unit P8I=GetTriggerUnit()local integer CW2=GetIssuedOrderId()local integer CF2if C92(SFI)==false thenset CF2=(LoadInteger(LY,(GetHandleId(P8I)),(143)))if RC0[CF2]==null or RC0[CF2]==P8I or IC1(RC0[CF2])thenif CF2!=0 thencall CH2(P8I,SFI)endifendifendifset SFI=nullset P8I=nullreturn falseendfunctionfunction CY2 takes unit SFI returns nothinglocal group glocal trigger tlocal timer tmlocal integer S5I=GetHandleId(SFI)set RG0=RG0+1call SaveBoolean(LY,(S5I),(142),(true))call SaveInteger(LY,(S5I),(143),(RG0))set g=NTI()call SaveGroupHandle(LY,(S5I),(144),(g))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(t,Condition(function CV2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function CX2))set tm=CreateTimer()call SaveTimerHandle(LY,(GetHandleId(SFI)),(141),(tm))call SaveUnitHandle(LY,(GetHandleId(tm)),(2),(SFI))set g=nullset t=nullendfunctionfunction CJ2 takes nothing returns booleanif RRI(GetTriggerUnit())and(LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(142)))==false thencall CY2(GetTriggerUnit())endifreturn falseendfunctionfunction CL2 takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thencall SetUnitAbilityLevel(GetTriggerUnit(),I2,5)if RC0[GetUnitUserData(GetTriggerUnit())]==null thencall SetUnitUserData(GetTriggerUnit(),0)call IssuePointOrderLoc(GetTriggerUnit(),"attack",(O2[GetUnitAbilityLevel((GetTriggerUnit()),I2)]))endifelseif GetOwningPlayer(GetTriggerUnit())==CO[0]thencall SetUnitAbilityLevel(GetTriggerUnit(),I2,1)if RC0[GetUnitUserData(GetTriggerUnit())]==null thencall SetUnitUserData(GetTriggerUnit(),0)call IssuePointOrderLoc(GetTriggerUnit(),"attack",(O2[GetUnitAbilityLevel((GetTriggerUnit()),I2)]))endifendifreturn falseendfunctionconstant function InvisibilityUnitId takes nothing returns integerreturn 1966092354endfunctionfunction CN2 takes nothing returns nothinglocal unit JMO=GetTriggerUnit()local unit CS2=(LoadUnitHandle(LY,(GetHandleId(JMO)),(145)))call RemoveUnit(CS2)endfunctionfunction CT2 takes nothing returns nothinglocal group glocal unit JMOlocal unit CS2local trigger tlocal integer iset t=CreateTrigger()call TriggerAddAction(t,function CN2)set g=NTI()call GroupEnumUnitsOfPlayer(g,BO[0],Condition(function N1I))loopset JMO=FirstOfGroup(g)exitwhen JMO==nullcall GroupRemoveUnit(g,JMO)if GetUnitAbilityLevel(JMO,1097102451)>0 or GetUnitAbilityLevel(JMO,1098150517)>0 thencall TriggerRegisterUnitEvent(t,JMO,EVENT_UNIT_DEATH)set CS2=CreateUnit(BO[1],(1966092354),-5000,-5100,0)call SetUnitScale(CS2,0,0,0)call SetUnitPathing(CS2,false)call SetUnitInvulnerable(CS2,true)call SetUnitX(CS2,GetUnitX(JMO))call SetUnitY(CS2,GetUnitY(JMO))call SaveUnitHandle(LY,(GetHandleId(JMO)),(145),(CS2))endifendloopcall NSI(g)set g=NTI()call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function N1I))loopset JMO=FirstOfGroup(g)exitwhen JMO==nullcall GroupRemoveUnit(g,JMO)if GetUnitAbilityLevel(JMO,1097102451)>0 or GetUnitAbilityLevel(JMO,1098150517)>0 thencall TriggerRegisterUnitEvent(t,JMO,EVENT_UNIT_DEATH)set CS2=CreateUnit(CO[1],(1966092354),3400,4400,0)call SetUnitScale(CS2,0,0,0)call SetUnitPathing(CS2,false)call SetUnitInvulnerable(CS2,true)call SetUnitX(CS2,GetUnitX(JMO))call SetUnitY(CS2,GetUnitY(JMO))call SaveUnitHandle(LY,(GetHandleId(JMO)),(145),(CS2))endifendloopcall NSI(g)endfunctionfunction CP2 takes nothing returns nothinglocal unit CQ2=GetTriggerUnit()local unit P8I=RC0[GetUnitUserData(CQ2)]call SetUnitPosition(CQ2,GetUnitX(CQ2),GetUnitY(CQ2))if P8I!=null and IC1(P8I)==false and IsUnitVisible(P8I,GetOwningPlayer(P8I))thencall IssueTargetOrder(CQ2,"attack",P8I)elsecall DisableTrigger(GetTriggeringTrigger())call IssuePointOrderLoc(CQ2,"attack",(O2[GetUnitAbilityLevel((CQ2),I2)]))call EnableTrigger(GetTriggeringTrigger())endifset CQ2=nullset P8I=nullendfunctionfunction CU2 takes nothing returns booleanif C92(GetTriggerUnit())thencall CP2()endifreturn falseendfunctionfunction D02 takes nothing returns nothinglocal unit CQ2=GetTriggerUnit()local unit P8I=RC0[GetUnitUserData(CQ2)]call SetUnitPosition(CQ2,GetUnitX(CQ2),GetUnitY(CQ2))if P8I!=null and IC1(P8I)==false and IsUnitVisible(P8I,GetOwningPlayer(P8I))thencall IssueTargetOrder(CQ2,"attack",P8I)elsecall DisableTrigger(GetTriggeringTrigger())call IssuePointOrderLoc(CQ2,"attack",(O2[GetUnitAbilityLevel((CQ2),I2)]))call EnableTrigger(GetTriggeringTrigger())endifset CQ2=nullset P8I=nullendfunctionfunction DI2 takes nothing returns booleanif GetIssuedOrderId()==851986 thencall D02()endifreturn falseendfunctionfunction D12 takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())==BO[0]thenif IsUnitFogged(GetAttacker(),BO[1])or IsUnitFogged(GetAttacker(),CO[1])thencall O71(CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)endifelseif GetOwningPlayer(GetTriggerUnit())==CO[0]thenif IsUnitFogged(GetAttacker(),BO[1])or IsUnitFogged(GetAttacker(),CO[1])thencall O71(CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),128,true,false),1)endifendifreturn falseendfunctionfunction DO2 takes nothing returns booleanlocal trigger tlocal group glocal unit uif C2 thenset t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,BO[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function N1I))call TriggerAddCondition(t,Condition(function DI2))set t=CreateTrigger()set g=NTI()call GroupEnumUnitsOfPlayer(g,BO[0],Condition(function N1I))loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)if GetUnitAcquireRange(u)!=0 thencall TriggerRegisterUnitInRange(t,u,600,Condition(function N1I))endifendloopcall NSI(g)set g=NTI()call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function N1I))loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)thencall TriggerRegisterUnitInRange(t,u,600,Condition(function N1I))endifendloopcall NSI(g)call TriggerAddCondition(t,Condition(function CU2))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function D12))endifcall S0I(GetTriggeringTrigger())return falseendfunctionfunction D32 takes unit SWI returns nothinglocal integer i=0loopexitwhen(i==16)if IsUnitAlly(SWI,Player(i))thencall UnitShareVision(SWI,Player(i),true)endifset i=i+1endloopendfunctionfunction D42 takes nothing returns nothingcall D32(GetEnumUnit())endfunctionfunction D52 takes nothing returns nothinglocal integer xlocal group gset x=1loopexitwhen x>5call SetPlayerAlliance(BO[0],BO[x],ConvertAllianceType(5),false)call SetPlayerAlliance(CO[0],CO[x],ConvertAllianceType(5),false)set x=x+1endloopset g=NTI()call GroupEnumUnitsOfPlayer(g,BO[0],Condition(function N1I))call ForGroup(g,function D42)call NSI(g)set g=NTI()call GroupEnumUnitsOfPlayer(g,CO[0],Condition(function N1I))call ForGroup(g,function D42)call NSI(g)set g=nullendfunctionfunction D62 takes nothing returns nothinglocal integer xset x=0loopexitwhen x>5call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(0),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(1),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(2),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(3),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(4),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(5),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(6),false)call SetPlayerAlliance(BO[x],DO,ConvertAllianceType(7),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(0),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(1),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(2),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(3),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(4),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(5),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(6),false)call SetPlayerAlliance(CO[x],DO,ConvertAllianceType(7),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(0),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(1),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(2),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(3),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(4),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(5),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(6),false)call SetPlayerAlliance(DO,BO[x],ConvertAllianceType(7),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(0),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(1),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(2),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(3),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(4),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(5),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(6),false)call SetPlayerAlliance(DO,CO[x],ConvertAllianceType(7),false)set x=x+1endloopendfunctionfunction D72 takes nothing returns booleanreturn C92(GetTriggerUnit())endfunctionfunction D82 takes nothing returns nothingcall D32(GetTriggerUnit())endfunctionfunction D92 takes nothing returns nothinglocal trigger tif not C2 thenreturnendifcall D52()call D62()set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function D72))call TriggerAddAction(t,function D82)set t=nullendfunctionfunction DB2 takes nothing returns nothinglocal string DC2=StringCase(GetEventPlayerChatString(),false)local boolean R4O=DC2=="-random"or DC2=="-random int"or DC2=="-random agi"or DC2=="-random str"local boolean DD2=DC2=="-repick"local boolean DE2=DC2=="-gameinfo"local boolean DF2=SubString(DC2,0,5)=="-swap"local boolean DG2=DC2=="-recreate"local boolean DH2=DC2=="-unstuck"local boolean DZ2=DC2=="-matchup"or DC2=="-ma"local boolean DV2=DC2=="-movespeed"or DC2=="-ms"local boolean DW2=DC2=="-msa"local boolean DX2=DC2=="-disablehelp"local boolean DY2=DC2=="-enablehelp"local boolean DJ2=DC2=="-creepstats"or DC2=="-cs"local boolean DK2=DC2=="-cson"or DC2=="-csoff"local boolean DL2=DC2=="-hidemsg"local boolean DM2=DC2=="-showmsg"local boolean DN2=DC2=="-weather snow"or DC2=="-weather rain"or DC2=="-weather off"or DC2=="-weather random"or DC2=="-weather wind"or DC2=="-weather moonlight"local boolean DS2=DC2=="-showdeny"or DC2=="-hidedeny"local boolean DT2=DC2=="-denyinfo"or DC2=="-di"local boolean DR2=DC2=="-don"or DC2=="-deathon"or DC2=="-doff"or DC2=="-deathoff"local boolean DP2=SubString(DC2,0,5)=="-roll"and DC2!="-rollhero"local boolean DQ2=DC2=="-hhn"or DC2=="-hideheronames"local boolean DU2=DC2=="-mute"local boolean E02=DC2=="-afk"local boolean EI2=SubString(DC2,0,8)=="-kickafk"local boolean E12=DC2=="-apm"local boolean EO2=DC2=="-clear"local boolean BPO=DC2=="-courier"local boolean AH=DC2=="-ah"local boolean E22=DC2=="-invokelist"or DC2=="-il"local boolean E32=DC2=="-list"local boolean E42=DC2=="-rolloff"local boolean E52=DC2=="-rollon"local boolean E62=SubString(DC2,0,6)=="-music"local boolean E72=SubString(DC2,0,6)=="-water"local boolean E82=SubString(DC2,0,6)=="-quote"local boolean E92=SubString(DC2,0,3)=="-cm"local boolean EA2=SubString(DC2,0,9)=="-itemswap"local boolean EB2=DC2=="-bonus"local boolean EC2=DC2=="-rollhero"or DC2=="-rh"local boolean ED2=SubString(DC2,0,9)=="-rickroll"local boolean NoSwitch=DC2=="-noswitch"local boolean EE2=SubString(DC2,0,7)=="-switch"or DC2=="-ok"or DC2=="-no"local boolean Terrain=DC2=="-terrain"or DC2=="-terrain default"or DC2=="-terrain snow"local boolean EF2=DC2=="-tips"local boolean EG2=DC2=="-ii"or DC2=="-iteminfo"local boolean EH2=DC2=="-center"or DC2=="-centeroff"or DC2=="-c"or DC2=="-co"local boolean EZ2=DC2=="-unlock"local boolean EV2=DC2=="-disableselection"or DC2=="-ds"local boolean EW2=DC2=="-enableselection"or DC2=="-es"local boolean EX2=DC2=="-sleep"local boolean EY2=DC2=="-calm"local boolean R4I=DC2=="-st"local boolean EJ2=DC2=="-nosanta"call PMI("EK2",R4O)call PMI("EL2",DD2)call PMI("EM2",DE2)call PMI("EN2",DF2)call PMI("ES2",DG2)call PMI("ET2",DH2)call PMI("ER2",DZ2)call PMI("EP2",DV2)call PMI("EQ2",DW2)call PMI("EU2",DX2)call PMI("F02",DY2)call PMI("FI2",DJ2)call PMI("F12",DK2)call PMI("FO2",DL2)call PMI("F22",DM2)call PMI("F32",DN2)call PMI("F42",DS2)call PMI("F52",DT2)call PMI("F62",DR2)call PMI("F72",DP2)call PMI("F82",DQ2)call PMI("F92",DU2)call PMI("FA2",E02)call PMI("FB2",EI2)call PMI("FC2",E12)call PMI("FD2",EO2)call PMI("FE2",BPO)call PMI("FF2",AH)call PMI("FG2",E22)call PMI("FH2",E32)call PMI("FZ2",E42)call PMI("FV2",E52)call PMI("FW2",E62)call PMI("FY2",E72)call PMI("FJ2",E82)call PMI("FK2",E92)call PMI("FL2",EA2)call PMI("FM2",EB2)call PMI("FN2",EC2)call PMI("FS2",ED2)call PMI("FT2",EE2)call PMI("FR2",EG2)call PMI("FP2",EF2)call PMI("FQ2",EH2)call PMI("FU2",EZ2)call PMI("G02",EV2)call PMI("GI2",EW2)call PMI("G12",EX2)call PMI("GO2",R4I)call PMI("G22",EY2)call PMI("G32",EJ2)endfunctionfunction FS2 takes nothing returns nothinglocal integer a=S2I(SubString(GetEventPlayerChatString(),10,StringLength(GetEventPlayerChatString())))local integer MLI=GetPlayerId(GetTriggerPlayer())set RH0[MLI]=RH0[MLI]+1if RH0[MLI]>10 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848656977))returnendifif a<1 or a>8 thenset a=GetRandomInt(1,8)endifif a==1 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna give you up")elseif a==2 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna let you down")elseif a==3 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna run around")elseif a==4 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna desert you")elseif a==5 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna make you cry")elseif a==6 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna say goodbye")elseif a==7 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna tell a lie")elseif a==8 thencall QRI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna hurt you")endifendfunctionfunction G52 takes nothing returns booleanif O3==false thenreturn falseendifif S0[GetPlayerId(L2)]==true thenreturn falseendifif B0==false thenreturn falseendifif K1[GetPlayerId(L2)]!=null and B3==false thenreturn falseendifif D0[GetPlayerId(L2)]==true thenreturn falseendifif C3[GetPlayerId(L2)]and B3==false thenreturn falseendifif B3 and E3[GetPlayerId(L2)]thenreturn falseendifreturn trueendfunctionfunction G62 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local string G72=(LoadStr(LY,(S5I),(146)))set L2=pif G52()thenset S0[GetPlayerId(p)]=trueif G72=="-random int"thencall RAI(p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)elseif G72=="-random str"thencall REI(p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)elseif G72=="-random agi"thencall RFI(p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)elsecall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-50)call RGI(p)endifelsecall DisplayTimedTextToPlayer(p,0,U2,10,GetObjectName(1848653625))endifset t=nullset p=nullreturn falseendfunctionfunction EK2 takes nothing returns nothinglocal player T4I=GetTriggerPlayer()local trigger tset L2=T4Iif G52()and F3[GetPlayerId(T4I)]==false thenset F3[GetPlayerId(T4I)]=truecall TFI(T4I)call DisplayTimedTextToPlayer(T4I,0,U2,10,GetObjectName(1848653633))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function G62))call SavePlayerHandle(LY,(GetHandleId(t)),(54),(T4I))call SaveStr(LY,(GetHandleId(t)),(146),(StringCase(GetEventPlayerChatString(),false)))endifset t=nullendfunctionfunction G82 takes nothing returns booleanlocal unit SFI=K1[GetPlayerId(GetTriggerPlayer())]if O8I thencall PZI(GetTriggerPlayer(),GetObjectName(1848652592))return falseendifif A3==false thenif IAI==false and N2==false and QT0==false and BN==false and INI==false and IQI==false and B3==false and E2==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,"-repick "+GetObjectName(1848653122))endifreturn falseendifif(D0[GetPlayerId(GetTriggerPlayer())]==true)thenreturn falseendifif(K1[GetPlayerId(GetTriggerPlayer())]==null)thenreturn falseendifif X0 or N2 or B3 thenreturn falseendifif(H3==true)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653104))return falseendifif(GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<T0)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653113))return falseendifif GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<350 and K0 or J2 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653141))return falseendifif GetUnitState(SFI,UNIT_STATE_MANA)!=GetUnitState(SFI,UNIT_STATE_MAX_MANA)or GetUnitState(SFI,UNIT_STATE_LIFE)!=GetUnitState(SFI,UNIT_STATE_MAX_LIFE)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653130))return falseendifreturn trueendfunctionfunction G92 takes nothing returns nothingif(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true)thenif(GetUnitTypeId(GetEnumUnit())==1429221430)thencall ExecuteFunc("OOO")elseif GetUnitTypeId(GetEnumUnit())==1429221432 or GetUnitTypeId(GetEnumUnit())==1160786229 thenset NK=GetEnumUnit()call ExecuteFunc("AZO")endifcall QRI(MCI(GetTriggerPlayer()),10.00,GetObjectName(1848653132)+" "+S8I(GetEnumUnit())+".")endifif(GetUnitTypeId(GetEnumUnit())==1848651828)thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())==1848652088)thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())==1848652099)thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())==1848652103)thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction GA2 takes nothing returns nothinglocal player T4I=GetTriggerPlayer()local group Z51=NTI()local integer RBIlocal integer RCIlocal location RDIlocal unit RepickedUnitlocal integer TJIlocal integer TGIlocal integer THIlocal unit GB2local location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)set bj_groupEnumOwningPlayer=T4Icall GroupEnumUnitsInRect(Z51,GetWorldBounds(),filterGetUnitsInRectOfPlayer)if(TII(T4I)==true)thenset RBI=DE0set RCI=DF0set RDI=GetRectCenter(F4)elseset RBI=DG0set RCI=DH0set RDI=GetRectCenter(E4)endifif Y0 thenif(GetRandomInt(1,2)==1)thenset RBI=DE0set RCI=DF0elseset RBI=DG0set RCI=DH0endifendifif K0 or J2 thenset T0=100endifset GB2=(LoadUnitHandle(LY,(GetHandleId(GetTriggerPlayer())),(147)))if GB2!=null and GetUnitTypeId(GB2)==1697656899 thencall RemoveUnit(GB2)endifcall AdjustPlayerStateBJ(-1*T0,T4I,PLAYER_STATE_RESOURCE_GOLD)set D0[GetPlayerId(T4I)]=truecall ForGroup(Z51,function G92)if S0[GetPlayerId(T4I)]==true thencall TEI(GetUnitTypeId(K1[GetPlayerId(T4I)]))endifcall Q5I(K1[GetPlayerId(T4I)])set K1[GetPlayerId(GetTriggerPlayer())]=nullif K0 or J2 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,GetObjectName(1311782233))if K0 thenset TGI=DE0set THI=DH0endifif TII(T4I)thenif J2 thenset TGI=DE0set THI=DF0call CreateUnitAtLoc(T4I,1848651843,ZC1,bj_UNIT_FACING)elsecall CreateUnitAtLoc(T4I,1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(T4I,1848651843,ZD1,bj_UNIT_FACING)endifcall PanCameraToTimedLocForPlayer(T4I,ZC1,0)elseif J2 thenset TGI=DG0set THI=DH0call CreateUnitAtLoc(T4I,1848651843,ZD1,bj_UNIT_FACING)elsecall CreateUnitAtLoc(T4I,1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(T4I,1848651843,ZD1,bj_UNIT_FACING)endifcall PanCameraToTimedLocForPlayer(T4I,ZD1,0)endifloopexitwhen TGI>THIif R[TGI]==false thencall SetPlayerTechMaxAllowed(T4I,DC0[TGI],1)endifset TGI=TGI+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)returnendifloopset TJI=GetRandomInt(RBI,RCI)if(R[TJI]==false)thenset R[TJI]=trueset K1[GetPlayerId(T4I)]=CreateUnitAtLoc(T4I,DC0[TJI],RDI,bj_UNIT_FACING)call TCI(DC0[TJI])endifexitwhen K1[GetPlayerId(GetTriggerPlayer())]!=nullendloopcall NSI(Z51)call RemoveLocation(RDI)call RemoveLocation(ZC1)call RemoveLocation(ZD1)endfunctionfunction EL2 takes nothing returns nothingif G82()thencall GA2()endifendfunctionfunction EM2 takes nothing returns nothinglocal player T4I=GetTriggerPlayer()local string GD2="|c006699CC"if INI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"League Mode"+"|r:      "+GetObjectName(1848653621))endifif IQI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Extended League"+"|r:      "+GetObjectName(1848653634))call DisplayTimedTextToPlayer(T4I,0,U2,20,"                                 "+GetObjectName(1848653616))endifif X0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Death Match"+"|r:        "+GetObjectName(1848653402))call DisplayTimedTextToPlayer(T4I,0,U2,20,"                              "+GetObjectName(1848653401)+" "+I2S(Q9I(DF0,DH0-DG0+1))+" "+GetObjectName(1848653635))endifif E2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Mirror Match"+"|r:       "+GetObjectName(1848653399))endifif K0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"All Pick"+"|r:                 "+GetObjectName(1848653398))endifif QT0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Random Draft"+"|r:                 "+GetObjectName(1848653618))endifif IAI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Single Draft"+"|r:                 "+GetObjectName(1848653639))endifif Y0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"All Random"+"|r:          "+GetObjectName(1848653617))endifif N2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Vote Random"+"|r:         "+GetObjectName(1848653620))endifif J0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Team Random"+"|r:     "+GetObjectName(1848653389))endifif B3 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Reverse"+"|r:                 "+GetObjectName(1848653619))endifif FO thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Shuffle Players"+"|r:     "+GetObjectName(1848653640))endifif H2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"All Agility"+"|r:             "+GetObjectName(1848653644))endifif V2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"All Strength"+"|r:         "+GetObjectName(1848653643))endifif Z2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"All Intelligence"+"|r:    "+GetObjectName(1848653642))endifif OOI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Range Only"+"|r:    "+GetObjectName(1848657716))endifif O1I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Melee Only"+"|r:    "+GetObjectName(1848657717))endifif F2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Duplicate Mode"+"|r:   "+GetObjectName(1848653641))endifif L0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Item Drop"+"|r:             "+GetObjectName(1848653638))endifif P0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Powerups"+"|r:        "+GetObjectName(1848653645))endifif Q0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Super Creeps"+"|r:        "+GetObjectName(1848653646))call DisplayTimedTextToPlayer(T4I,0,U2,20,"                             "+GetObjectName(1848653647))endifif R0 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Easy Mode"+"|r:           "+GetObjectName(1848653652))endifif Y2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Same Hero"+"|r:           "+GetObjectName(1848653653)+" "+(D80[GetPlayerId((WO))])+"|r"+" "+GetObjectName(1848653655))endifif O2I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Only Mid"+"|r:           "+GetObjectName(1848653872))endifif O4I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Bot"+"|r:           "+GetObjectName(1848653654))endifif O6I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Mid"+"|r:           "+GetObjectName(1848653651))endifif O7I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Top"+"|r:           "+GetObjectName(1848653650))endifif FL thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Swap"+"|r:           "+GetObjectName(1848653656))endifif FL thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"No Repick"+"|r:           "+GetObjectName(1848653649))endifif ZL thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Pool Mode"+"|r:           "+GetObjectName(1848653657))endifif O9I thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Observer Info"+"|r:           "+GetObjectName(1848653658))endifif OBI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Mini Hereos"+"|r:           "+GetObjectName(1848657219))endifif OCI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Fast Respawn"+"|r:           "+GetObjectName(1848656976))endifif CN thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Captains Mode"+"|r:           "+GetObjectName(1848657220))endifif HL thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Experimental Runes"+"|r:           "+GetObjectName(1848657718))endifif BN thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Captains Draft"+"|r:           "+GetObjectName(1848657734))endifif OFI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Capture Point"+"|r:           "+GetObjectName(1848658760))endifif ODI thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Capture Point"+"|r:           "+GetObjectName(1848658761))endifif J2 thencall DisplayTimedTextToPlayer(T4I,0,U2,20,GD2+"Normal Mode"+"|r:        "+GetObjectName(1848653648))endifendfunctionfunction GF2 takes nothing returns nothingif GetUnitTypeId(GetEnumUnit())==1848651828 thencall RemoveUnit(GetEnumUnit())endifif GetUnitTypeId(GetEnumUnit())==1865429043 thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction GG2 takes unit u1,unit u2 returns nothinglocal player Me=GetOwningPlayer(u1)local player GH2=GetOwningPlayer(u2)local unit GZ2=CreateUnit(Me,1697657158,0,0,0)local group glocal item X3Olocal integer GV2if S0[GetPlayerId(Me)]==true thenif GetPlayerState(Me,PLAYER_STATE_RESOURCE_GOLD)<100 thenreturnendifendifif S0[GetPlayerId(GH2)]==true thenif GetPlayerState(GH2,PLAYER_STATE_RESOURCE_GOLD)<100 thenreturnendifendifif S0[GetPlayerId(Me)]==true and D0[GetPlayerId(Me)]==false and RZ0[GetPlayerId(Me)]==0 thenset RZ0[GetPlayerId(Me)]=1call SetPlayerState(Me,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Me,PLAYER_STATE_RESOURCE_GOLD)-100)endifif S0[GetPlayerId(GH2)]==true and D0[GetPlayerId(GH2)]==false and RZ0[GetPlayerId(GH2)]==0 thenset RZ0[GetPlayerId(GH2)]=1call SetPlayerState(GH2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GH2,PLAYER_STATE_RESOURCE_GOLD)-100)endifset GV2=EL0[GetPlayerId(Me)]set EL0[GetPlayerId(Me)]=EL0[GetPlayerId(GH2)]set EL0[GetPlayerId(GH2)]=GV2call DisableTrigger(LY0)if GetUnitAbilityLevel(u1,1093677893)>0 thenset XM=u1set YM=u2call ExecuteFunc("GW2")elseif GetUnitAbilityLevel(u2,1093677893)>0 thenset XM=u2set YM=u1call ExecuteFunc("GW2")endifif GetUnitAbilityLevel(u1,1093682009)>0 thenset XM=u1set YM=u2call ExecuteFunc("GX2")elseif GetUnitAbilityLevel(u2,1093682009)>0 thenset XM=u2set YM=u1call ExecuteFunc("GX2")endifif GetUnitAbilityLevel(u1,1093743444)>0 thenset XM=u1set YM=u2call ExecuteFunc("GY2")elseif GetUnitAbilityLevel(u2,1093743444)>0 thenset XM=u2set YM=u1call ExecuteFunc("GY2")endifcall FlushChildHashtable(LY,(800+GetPlayerId(GetOwningPlayer(u1))))call FlushChildHashtable(LY,(800+GetPlayerId(GetOwningPlayer(u2))))set g=NTI()set bj_groupEnumOwningPlayer=Mecall GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)call ForGroup(g,function GF2)call NSI(g)set g=NTI()set bj_groupEnumOwningPlayer=GH2call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)call ForGroup(g,function GF2)call NSI(g)call SetUnitOwner(u2,Me,true)call SetUnitOwner(u1,GH2,true)set K1[GetPlayerId(Me)]=u2set K1[GetPlayerId(GH2)]=u1call SetPlayerName(Me,(D80[GetPlayerId((Me))])+" ("+S8I(K1[GetPlayerId(Me)])+")")call SetPlayerName(GH2,(D80[GetPlayerId((GH2))])+" ("+S8I(K1[GetPlayerId(GH2)])+")")call UnitAddItem(GZ2,UnitItemInSlot(u2,0))call UnitAddItem(GZ2,UnitItemInSlot(u2,1))call UnitAddItem(GZ2,UnitItemInSlot(u2,2))call UnitAddItem(GZ2,UnitItemInSlot(u2,3))call UnitAddItem(GZ2,UnitItemInSlot(u2,4))call UnitAddItem(GZ2,UnitItemInSlot(u2,5))set X3O=UnitItemInSlot(u1,0)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(u1,1)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(u1,2)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(u1,3)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(u1,4)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(u1,5)if X3O!=null thencall SetItemPlayer(X3O,Me,false)call SetItemUserData(X3O,1)call UnitAddItem(u2,X3O)endifset X3O=UnitItemInSlot(GZ2,0)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifset X3O=UnitItemInSlot(GZ2,1)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifset X3O=UnitItemInSlot(GZ2,2)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifset X3O=UnitItemInSlot(GZ2,3)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifset X3O=UnitItemInSlot(GZ2,4)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifset X3O=UnitItemInSlot(GZ2,5)if X3O!=null thencall SetItemPlayer(X3O,GH2,false)call SetItemUserData(X3O,1)call UnitAddItem(u1,X3O)endifcall RemoveUnit(GZ2)call EnableTrigger(LY0)if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and ES1(u1,FR0[HM0])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[HM0]))elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and ES1(u1,FR0[HL0])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[HL0]))endifif(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and ES1(u2,FR0[HM0])!=null thencall UnitRemoveItem(u1,ES1(u2,FR0[HM0]))elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER)==true or GetUnitTypeId(u1)==1211119187)and ES1(u2,FR0[HL0])!=null thencall UnitRemoveItem(u1,ES1(u2,FR0[HL0]))endifif GetUnitTypeId(u1)==1211119187 and ES1(u1,FR0[HL0])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[HL0]))elseif GetUnitTypeId(u1)==1211119187 and ES1(u1,FR0[HM0])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[HM0]))endifif GetUnitTypeId(u2)==1211119187 and ES1(u2,FR0[HL0])!=null thencall UnitRemoveItem(u2,ES1(u2,FR0[HL0]))elseif GetUnitTypeId(u2)==1211119187 and ES1(u2,FR0[HM0])!=null thencall UnitRemoveItem(u2,ES1(u2,FR0[HM0]))endifif(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER)==true)and ES1(u1,FR0[X40])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[X40]))elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER)==true)and ES1(u1,FR0[HL0])!=null thencall UnitRemoveItem(u1,ES1(u1,FR0[HL0]))endifif(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER)==true)and ES1(u2,FR0[X40])!=null thencall UnitRemoveItem(u1,ES1(u2,FR0[X40]))elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER)==true)and ES1(u2,FR0[X30])!=null thencall UnitRemoveItem(u1,ES1(u2,FR0[X30]))endifcall ClearSelectionForPlayer(Me)call SelectUnitAddForPlayer(u2,Me)call ClearSelectionForPlayer(GH2)call SelectUnitAddForPlayer(u1,GH2)call FlushChildHashtable(LY,(800+GetPlayerId(Me)))call FlushChildHashtable(LY,(800+GetPlayerId(GH2)))set GK=u1call ExecuteFunc("QU1")set GK=u2call ExecuteFunc("QU1")call FJ1(GetOwningPlayer(u1),"9",GetUnitTypeId(u1))call FJ1(GetOwningPlayer(u2),"9",GetUnitTypeId(u2))call FL1("SWAP_"+I2S(GetPlayerId(GetOwningPlayer(u1)))+"_"+I2S(GetPlayerId(GetOwningPlayer(u2))),GetUnitTypeId(u1))call FL1("SWAP_"+I2S(GetPlayerId(GetOwningPlayer(u2)))+"_"+I2S(GetPlayerId(GetOwningPlayer(u1))),GetUnitTypeId(u2))call GK1(Me)call GK1(GH2)set Me=nullset GH2=nullset g=nullset GZ2=nullset X3O=nullendfunctionfunction GJ2 takes unit u1,unit u2 returns booleanreturn(LoadBoolean(LY,(800+GetPlayerId(GetOwningPlayer(u2))),(GetUnitTypeId(u1)+GetUnitTypeId(u2))))endfunctionfunction SwapHero_Off takes nothing returns nothingcall FlushChildHashtable(LY,(800+GetPlayerId(GetTriggerPlayer())))endfunctionfunction GK2 takes player p returns integerlocal integer i=1loopexitwhen i>5if BO[i]==p or CO[i]==p thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction GL2 takes unit u1,unit u2,boolean GM2 returns booleancall SaveBoolean(LY,(800+GetPlayerId(GetOwningPlayer(u1))),(GetUnitTypeId(u1)+GetUnitTypeId(u2)),(true))if GJ2(u1,u2)thencall GG2(u1,u2)return trueelsecall DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,U2,30,"  ")call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,U2,30,"                         "+C0[GetPlayerId(GetOwningPlayer(u1))]+GetUnitName(u1)+"|r |cff99ccff"+GetObjectName(1848653874)+" "+GetObjectName(1848653875)+"|r |c00ff0303-swap "+I2S(GK2(GetOwningPlayer(u1)))+"|r |cff99ccff"+GetObjectName(1848653873)+"|r")call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,U2,30,"  ")if GM2 thencall DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,U2,30,"  ")call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,U2,30,"|cff99ccff"+GetObjectName(1848653891)+" |r"+C0[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r")call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,U2,30,"  ")endifendifreturn falseendfunctionfunction GN2 takes nothing returns nothinglocal integer i=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))if GetEventPlayerChatString()=="-swapall"thenset i=1set HK=K1[GetPlayerId(GetTriggerPlayer())]loopexitwhen i>5if TII(GetTriggerPlayer())thenset JK=BO[i]elseset JK=CO[i]endifset GK=K1[GetPlayerId(JK)]if not(HK==null or GetOwningPlayer(HK)!=GetTriggerPlayer()or GK==null or GetOwningPlayer(GK)!=JK or JK==GetTriggerPlayer())thenif GL2(HK,GK,false)thenreturnendifendifset i=i+1endloopreturnelseif i<1 or i>5 thencall PZI(GetTriggerPlayer(),GetObjectName(1848652378))returnendifset HK=K1[GetPlayerId(GetTriggerPlayer())]if TII(GetTriggerPlayer())thenset JK=BO[i]elseset JK=CO[i]endifset GK=K1[GetPlayerId(JK)]if HK==null or GetOwningPlayer(HK)!=GetTriggerPlayer()or GK==null or GetOwningPlayer(GK)!=JK or JK==GetTriggerPlayer()thencall PZI(GetTriggerPlayer(),GetObjectName(1848652378))returnendifcall GL2(HK,GK,true)endfunctionfunction GS2 takes nothing returns nothinglocal integer ilocal player plocal unit ulocal string sif GetLocalPlayer()==GetTriggerPlayer()thencall ClearTextMessages()endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45,"|cff99ccff"+GetObjectName(1848653890)+"|r")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45," ")set i=1loopexitwhen i>5set p=BO[i]set u=K1[GetPlayerId(p)]if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p thenset s=" "if GJ2(K1[GetPlayerId(GetTriggerPlayer())],u)thenset s=" |c00ff0303("+GetObjectName(1848653877)+")|r"endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45,C0[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)endifset p=CO[i]set u=K1[GetPlayerId(p)]if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p thenset s=" "if GJ2(K1[GetPlayerId(GetTriggerPlayer())],u)thenset s=" |c00ff0303("+GetObjectName(1848653877)+")|r"endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45,C0[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)endifset i=i+1endloopcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45," ")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45,"|cff99ccff"+GetObjectName(1848653875)+"|r |c00ff0303-swap #|r |cff99ccff"+GetObjectName(1848653878)+" -swapcancel "+GetObjectName(1848653879)+"|r")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,45," ")endfunctionfunction GT2 takes player MDI returns booleanlocal integer TGI=1local integer GR2=0loopexitwhen TGI>5if TII(MDI)thenif K1[GetPlayerId(BO[TGI])]!=null and BO[TGI]!=MDI and GetHeroLevel(K1[GetPlayerId(BO[TGI])])==1 thenset GR2=GR2+1endifelseif K1[GetPlayerId(CO[TGI])]!=null and CO[TGI]!=MDI and GetHeroLevel(K1[GetPlayerId(CO[TGI])])==1 thenset GR2=GR2+1endifendifset TGI=TGI+1endloopif GR2>0 thenreturn trueelsereturn falseendifendfunctionfunction GP2 takes nothing returns booleanif FL or GL==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,"-swaphero "+GetObjectName(1848653880))return falseendifif S0[GetPlayerId(GetTriggerPlayer())]==true thenif GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<100 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1311788372))return falseendifendifif GetUnitState(K1[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653894))return falseendifif CL==true thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653895)+" -swaphero.")return falseendifif GT2(GetTriggerPlayer())==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653896))return falseendifreturn trueendfunctionfunction EN2 takes nothing returns nothingif GP2()thenif GetEventPlayerChatString()=="-swap"or GetEventPlayerChatString()=="-swaphero"thencall GS2()elseif GetEventPlayerChatString()=="-swapcancel"thencall FlushChildHashtable(LY,(800+GetPlayerId(GetTriggerPlayer())))elsecall GN2()endifendifendfunctionfunction GQ2 takes nothing returns booleanreturn GetSpellAbilityId()==1093682761endfunctionfunction GU2 takes integer IB1,unit H02,unit HI2 returns nothinglocal integer TGI=1local integer THI=GetUnitAbilityLevel(H02,IB1)loopexitwhen TGI>THIcall SelectHeroSkill(HI2,IB1)set TGI=TGI+1endloopendfunctionfunction H12 takes nothing returns nothinglocal integer TGIlocal integer THIlocal unit HO2local location BFO=GetUnitLoc(GetTriggerUnit())set HO2=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),GetUnitTypeId(GetTriggerUnit()),BFO,bj_UNIT_FACING)call SetHeroXP(HO2,GetHeroXP(GetTriggerUnit()),false)set TGI=1set THI=GetUnitAbilityLevel(GetTriggerUnit(),1096904043)loopexitwhen TGI>THIcall SelectHeroSkill(bj_lastCreatedUnit,1096904043)set TGI=TGI+1endloopset TGI=0set THI=5loopexitwhen TGI>THIcall UnitAddItem(HO2,UnitItemInSlot(GetTriggerUnit(),TGI))set TGI=TGI+1endloopif(GetUnitTypeId(GetTriggerUnit())==1164277353)thencall GU2(1093678156,GetTriggerUnit(),HO2)call GU2(1093683252,GetTriggerUnit(),HO2)call GU2(1095071337,GetTriggerUnit(),HO2)call GU2(1093678929,GetTriggerUnit(),HO2)endifif(GetUnitTypeId(GetTriggerUnit())==1429221432)thencall GU2(1093677892,GetTriggerUnit(),HO2)call GU2(1093677639,GetTriggerUnit(),HO2)call GU2(1093677893,GetTriggerUnit(),HO2)call GU2(1093679411,GetTriggerUnit(),HO2)endifif(GetUnitTypeId(GetTriggerUnit())==1429221431)thencall GU2(1093682745,GetTriggerUnit(),HO2)call GU2(1093678681,GetTriggerUnit(),HO2)call GU2(1093677381,GetTriggerUnit(),HO2)call GU2(1093677624,GetTriggerUnit(),HO2)endifif(GetUnitTypeId(GetTriggerUnit())==1215063922)thencall GU2(1093677895,GetTriggerUnit(),HO2)call GU2(1093677894,GetTriggerUnit(),HO2)call GU2(1093685043,GetTriggerUnit(),HO2)call GU2(1095068013,GetTriggerUnit(),HO2)endifif(GetUnitTypeId(GetTriggerUnit())==1164666213)thencall GU2(1093677877,GetTriggerUnit(),HO2)call GU2(1093678679,GetTriggerUnit(),HO2)call GU2(1093678678,GetTriggerUnit(),HO2)call GU2(1093678680,GetTriggerUnit(),HO2)endifcall Q5I(GetTriggerUnit())call RemoveLocation(BFO)set K1[GetPlayerId(GetOwningPlayer(HO2))]=HO2endfunctionfunction H22 takes nothing returns booleanlocal integer SZI=GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])return(SZI==1429221432 or SZI==1429221431 or SZI==1215063922 or SZI==1164277353 or SZI==1164666213)and(RectContainsUnit(G5,K1[GetPlayerId(GetTriggerPlayer())])or RectContainsUnit(H5,K1[GetPlayerId(GetTriggerPlayer())]))endfunctionfunction H32 takes nothing returns nothinglocal unit SFI=K1[GetPlayerId(GetTriggerPlayer())]call UnitAddAbility(SFI,1093682761)call IssueImmediateOrder(SFI,"chemicalrage")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,120.00,"|c00ff0303"+GetObjectName(1848653897)+" "+S8I(GetEnumUnit())+". "+GetObjectName(1848653898)+"|r")endfunctionfunction ES2 takes nothing returns nothingif H22()thencall H32()endifendfunctionfunction H52 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer NPI=GetTriggerEvalCount(t)local real xlocal real yif GetTriggerEventId()==EVENT_UNIT_DEATH or NPI>60 thenif((LoadInteger(LY,(GetHandleId((SFI))),((4259))))==1)==false thenif TII(GetOwningPlayer(SFI))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifcall SetUnitPosition(SFI,x,y)call PauseUnit(SFI,false)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall PauseUnit(SFI,true)endifset t=nullset SFI=nullreturn falseendfunctionfunction H62 takes player p returns nothinglocal unit SFI=K1[GetPlayerId(p)]local trigger tif IC1(SFI)==false thenset t=CreateTrigger()call DisplayTimedTextToPlayer(p,0,U2,30.0,GetObjectName(1848653899))call UnitRemoveBuffs(SFI,true,false)call UnitRemoveAbility(SFI,1113815395)call UnitRemoveAbility(SFI,1113815346)call UnitRemoveAbility(SFI,1110454858)call UnitRemoveAbility(SFI,1112896368)call UnitRemoveAbility(SFI,1114993524)call UnitRemoveAbility(SFI,1110454854)call PauseUnit(SFI,true)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function H52))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))endifset p=nullset SFI=nullset t=nullendfunctionfunction H72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall H62(p)endifset t=nullreturn falseendfunctionfunction ET2 takes nothing returns nothinglocal player p=GetTriggerPlayer()local unit SFI=K1[GetPlayerId(p)]local trigger tif IC1(SFI)==false thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,3.5,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function H72))call SavePlayerHandle(LY,(GetHandleId(t)),(54),(p))endifset p=nullset SFI=nullset t=nullendfunctionfunction H82 takes player p returns stringlocal string s=K3[GetPlayerId(p)]if K3[GetPlayerId(p)]!="Here"thenreturn" |c00ff0303("+GetObjectName(1848653881)+" at "+SubString(s,10,StringLength(s))+"|c00ff0303)|r"endifreturn" "endfunctionfunction ER2 takes nothing returns nothinglocal integer TGI=1local integer THI=5local integer MLIcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,20," ")if(TOI(GetTriggerPlayer())==true)thenloopexitwhen TGI>THIset MLI=GetPlayerId(BO[TGI])if(K1[MLI]!=null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,20,C0[MLI]+(D80[GetPlayerId((BO[TGI]))])+"|r "+GetObjectName(1848653901)+" "+GetUnitName(K1[MLI])+" ("+GetObjectName(1848653900)+" "+I2S(GetUnitLevel(K1[MLI]))+")"+H82(BO[TGI]))endifset TGI=TGI+1endloopelseloopexitwhen TGI>THIset MLI=GetPlayerId(CO[TGI])if(K1[MLI]!=null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,20,C0[MLI]+(D80[GetPlayerId((CO[TGI]))])+"|r "+GetObjectName(1848653901)+" "+GetUnitName(K1[MLI])+" ("+GetObjectName(1848653900)+" "+I2S(GetUnitLevel(K1[MLI]))+")"+H82(CO[TGI]))endifset TGI=TGI+1endloopendifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,20," ")endfunctionfunction HA2 takes unit u returns booleanreturn GetUnitTypeId(u)==1311781199 or GetUnitTypeId(u)==1311781171 or GetUnitTypeId(u)==1311781172 or GetUnitTypeId(u)==1311781173endfunctionfunction HB2 takes unit u returns unitlocal integer S5I=GetHandleId(GetOwningPlayer(u))return(LoadUnitHandle(LY,(S5I),(333)))endfunctionfunction EP2 takes nothing returns nothinglocal unit ulocal integer i=0if(K1[GetPlayerId(GetTriggerPlayer())]==null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848653889))elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetUnitName(K1[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+H51(K1[GetPlayerId(GetTriggerPlayer())]))))if HA2(K1[GetPlayerId(GetTriggerPlayer())])thenset u=HB2(K1[GetPlayerId(GetTriggerPlayer())])if u!=null thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))endifendifendifendfunctionfunction EQ2 takes nothing returns nothinglocal unit ulocal integer i=0if(K1[GetPlayerId(GetTriggerPlayer())]==null)thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848653889))elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetUnitName(K1[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+H51(K1[GetPlayerId(GetTriggerPlayer())]))))if HA2(K1[GetPlayerId(GetTriggerPlayer())])thenset u=HB2(K1[GetPlayerId(GetTriggerPlayer())])if u!=null thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))endifendifloopexitwhen i>16set u=K1[i]if u!=null and u!=K1[GetPlayerId(GetTriggerPlayer())]and IsUnitAlly(u,GetTriggerPlayer())==true thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(0.5+GetUnitMoveSpeed(u))))endifset i=i+1endloopendifendfunctionfunction EU2 takes nothing returns nothingcall SaveBoolean(LY,(GetHandleId(GetTriggerPlayer())),(139),(true))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653906))endfunctionfunction F02 takes nothing returns nothingcall SaveBoolean(LY,(GetHandleId(GetTriggerPlayer())),(139),(false))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653903))endfunctionfunction FI2 takes nothing returns nothingcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,"   "+GetObjectName(1848653904)+" "+I2S(A[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653905)+" "+I2S(B[GetPlayerId(GetTriggerPlayer())])+" "+GetObjectName(1848653907)+" "+I2S(C[GetPlayerId(GetTriggerPlayer())]))endfunctionfunction F12 takes nothing returns nothinglocal integer x=GetPlayerId(GetTriggerPlayer())if(GetEventPlayerChatString()=="-cson")thenset VM[x]=trueset RN0[x]=trueelseset VM[x]=falseset RN0[x]=falseendifcall UR1()endfunctionfunction HG2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer i=(LoadInteger(LY,(S5I),(34)))local real xlocal real yif RV0[i]==false thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif K1[i]!=null and IC1(K1[i])==false thenset x=GetUnitX(K1[i])set y=GetUnitY(K1[i])call PanCameraToTimedForPlayer(Player(i),x,y,0)endifset t=nullreturn falseendfunctionfunction FQ2 takes nothing returns nothinglocal integer x=GetPlayerId(GetTriggerPlayer())local trigger tlocal integer S5Ilocal integer iif RV0[x]==false and(GetEventPlayerChatString()=="-center"or GetEventPlayerChatString()=="-c")thenset RV0[x]=trueset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function HG2))call SaveInteger(LY,(S5I),(34),(x))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658519))elseif GetEventPlayerChatString()=="-centeroff"or GetEventPlayerChatString()=="-co"thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658520))set RV0[x]=falseendifendfunctionfunction G02 takes nothing returns nothingset RW0[GetPlayerId(GetTriggerPlayer())]=falsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658522))endfunctionfunction GI2 takes nothing returns nothingset RW0[GetPlayerId(GetTriggerPlayer())]=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658736))endfunctionfunction FU2 takes nothing returns nothinglocal integer i=0local integer id=GetPlayerId(GetTriggerPlayer())local integer NPI=0local integer HV2=0local player pif RY0==false or JL==false thenreturnendifif RK0+90<(TimerGetElapsed(M))thenloopexitwhen i>15set RJ0[i]=falseset i=i+1endloopendifset RK0=(TimerGetElapsed(M))+90set RJ0[id]=trueset i=0loopexitwhen i>15if TII(GetTriggerPlayer())thenif TII(Player(i))and T3I(Player(i))thenset HV2=HV2+1if RJ0[i]thenset NPI=NPI+1endifendifelseif TOI(Player(i))and T3I(Player(i))thenset HV2=HV2+1if RJ0[i]thenset NPI=NPI+1endifendifendifset i=i+1endloopif NPI*2>HV2 thenif TII(GetTriggerPlayer())thenset i=0loopexitwhen i>5set p=BO[i]if EF0[GetPlayerId(p)]==true and RX0[GetPlayerId(p)]==false thencall QRI(OO,10,GetObjectName(1848658756)+" "+(D80[GetPlayerId((p))]))call BB1(p)set RX0[GetPlayerId(p)]=trueendifset i=i+1endloopelseset i=0loopexitwhen i>5set p=CO[i]if EF0[GetPlayerId(p)]==true and RX0[GetPlayerId(p)]==false thencall QRI(AO,10,GetObjectName(1848658756)+" "+(D80[GetPlayerId((p))]))call BB1(p)set RX0[GetPlayerId(p)]=trueendifset i=i+1endloopendifelseif TII(GetTriggerPlayer())thencall QRI(OO,10,GetObjectName(1848658754)+" "+I2S(NPI)+"/"+I2S(HV2)+" ("+(D80[GetPlayerId((GetTriggerPlayer()))])+")")elsecall QRI(AO,10,GetObjectName(1848658754)+" "+I2S(NPI)+"/"+I2S(HV2)+" ("+(D80[GetPlayerId((GetTriggerPlayer()))])+")")endifendifendfunctionfunction HX2 takes nothing returns nothinglocal integer i=1local integer Q4Ilocal player ploopexitwhen i>5set p=BO[i]set Q4I=R2I(TimerGetRemaining(F0[GetPlayerId(p)]))if Q4I>0 and RL0[GetPlayerId(p)]and WL==false and Q2==false thencall PlayerSetLeaderboard(p,RM0[GetPlayerId(p)])call LeaderboardDisplay(RM0[GetPlayerId(p)],true)call LeaderboardSetLabel(RM0[GetPlayerId(p)],"   "+GetObjectName(1848653910)+" "+I2S(Q4I)+" "+GetObjectName(1848654133))elsecall LeaderboardDisplay(RM0[GetPlayerId(p)],false)endifset p=CO[i]set Q4I=R2I(TimerGetRemaining(F0[GetPlayerId(p)]))if Q4I>0 and RL0[GetPlayerId(p)]and WL==false and Q2==false thencall PlayerSetLeaderboard(p,RM0[GetPlayerId(p)])call LeaderboardDisplay(RM0[GetPlayerId(p)],true)call LeaderboardSetLabel(RM0[GetPlayerId(p)],"   "+GetObjectName(1848653910)+" "+I2S(Q4I)+" "+GetObjectName(1848654133))elsecall LeaderboardDisplay(RM0[GetPlayerId(p)],false)endifset i=i+1endloopendfunctionfunction HY2 takes nothing returns nothinglocal integer x=0set x=x+1set RM0[GetPlayerId(BO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[x],RM0[GetPlayerId(BO[x])])call LeaderboardDisplay(RM0[GetPlayerId(BO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(BO[x])],GetObjectName(1848657204)+": ")set RM0[GetPlayerId(CO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(CO[x],RM0[GetPlayerId(CO[x])])call LeaderboardDisplay(RM0[GetPlayerId(CO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")set x=x+1set RM0[GetPlayerId(BO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[x],RM0[GetPlayerId(BO[x])])call LeaderboardDisplay(RM0[GetPlayerId(BO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(BO[x])],GetObjectName(1848657204)+": ")set RM0[GetPlayerId(CO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(CO[x],RM0[GetPlayerId(CO[x])])call LeaderboardDisplay(RM0[GetPlayerId(CO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")set x=x+1set RM0[GetPlayerId(BO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[x],RM0[GetPlayerId(BO[x])])call LeaderboardDisplay(RM0[GetPlayerId(BO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(BO[x])],GetObjectName(1848657204)+": ")set RM0[GetPlayerId(CO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(CO[x],RM0[GetPlayerId(CO[x])])call LeaderboardDisplay(RM0[GetPlayerId(CO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")set x=x+1set RM0[GetPlayerId(BO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[x],RM0[GetPlayerId(BO[x])])call LeaderboardDisplay(RM0[GetPlayerId(BO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(BO[x])],GetObjectName(1848657204)+": ")set RM0[GetPlayerId(CO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(CO[x],RM0[GetPlayerId(CO[x])])call LeaderboardDisplay(RM0[GetPlayerId(CO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")set x=x+1set RM0[GetPlayerId(BO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(BO[x],RM0[GetPlayerId(BO[x])])call LeaderboardDisplay(RM0[GetPlayerId(BO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(BO[x])],GetObjectName(1848657204)+": ")set RM0[GetPlayerId(CO[x])]=CreateLeaderboard()call PlayerSetLeaderboard(CO[x],RM0[GetPlayerId(CO[x])])call LeaderboardDisplay(RM0[GetPlayerId(CO[x])],false)call LeaderboardSetLabel(RM0[GetPlayerId(CO[x])],GetObjectName(1848657204)+": ")endfunctionfunction F62 takes nothing returns nothinglocal integer x=GetPlayerId(GetTriggerPlayer())if GetEventPlayerChatString()=="-don"or GetEventPlayerChatString()=="-deathon"thenset RL0[x]=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653911))elseset RL0[x]=falsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653912))endifendfunctionfunction HJ2 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerAddAction(t,function HY2)call TriggerRegisterTimerEvent(t,.5,false)set t=CreateTrigger()call TriggerAddAction(t,function HX2)call TriggerRegisterTimerEvent(t,1,true)endfunctionfunction F42 takes nothing returns nothingif(GetEventPlayerChatString()=="-showdeny")thenset RN0[GetPlayerId(GetTriggerPlayer())]=trueelseset RN0[GetPlayerId(GetTriggerPlayer())]=falseendifendfunctionfunction F52 takes nothing returns nothingcall PZI(GetTriggerPlayer(),GetObjectName(1848657991))endfunctionfunction HM2 takes nothing returns nothinglocal integer i=0loopexitwhen i>16set RN0[i]=trueset VM[i]=trueset i=i+1endloopendfunctionfunction FO2 takes nothing returns nothingcall ForceRemovePlayer(P2,GetTriggerPlayer())call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653909))endfunctionfunction F22 takes nothing returns nothingcall ForceAddPlayer(P2,GetTriggerPlayer())call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848653914))endfunctionfunction HT2 takes nothing returns booleanlocal integer x=GetRandomInt(1,4)if x==1 thenset RT0=Z3elseif x==2 thenset RT0=V3elseif x==3 thenset RT0=KSelseif x==4 thenset RT0=LSendifif RR0[GetPlayerId(GetLocalPlayer())]thencall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,false)call EnableWeatherEffect(RT0,true)endifreturn falseendfunctionfunction HR2 takes nothing returns nothinglocal integer x=GetRandomInt(1,4)local trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,300,true)call TriggerAddCondition(t,Condition(function HT2))set RR0[GetPlayerId(BO[1])]=falseset RR0[GetPlayerId(BO[2])]=falseset RR0[GetPlayerId(BO[3])]=falseset RR0[GetPlayerId(BO[4])]=falseset RR0[GetPlayerId(BO[5])]=falseset RR0[GetPlayerId(CO[1])]=falseset RR0[GetPlayerId(CO[2])]=falseset RR0[GetPlayerId(CO[3])]=falseset RR0[GetPlayerId(CO[4])]=falseset RR0[GetPlayerId(CO[5])]=falseif C2 thenset RR0[GetPlayerId(D60)]=falseset RR0[GetPlayerId(D70)]=falseendifif x==1 thenset RT0=Z3elseif x==2 thenset RT0=V3elseif x==3 thenset RT0=KSelseif x==4 thenset RT0=LSendifset t=nullendfunctionfunction F32 takes nothing returns nothinglocal string DC2=StringCase(GetEventPlayerChatString(),false)if RS0==true thenset RS0=falsecall HR2()endifif DC2=="-weather snow"and GetLocalPlayer()==GetTriggerPlayer()thenset RR0[GetPlayerId(GetTriggerPlayer())]=falsecall EnableWeatherEffect(Z3,true)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,false)endifif DC2=="-weather rain"and GetLocalPlayer()==GetTriggerPlayer()thenset RR0[GetPlayerId(GetTriggerPlayer())]=falsecall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,true)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,false)endifif DC2=="-weather moonlight"and GetLocalPlayer()==GetTriggerPlayer()thenset RR0[GetPlayerId(GetTriggerPlayer())]=falsecall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,true)call EnableWeatherEffect(LS,false)endifif DC2=="-weather wind"and GetLocalPlayer()==GetTriggerPlayer()thenset RR0[GetPlayerId(GetTriggerPlayer())]=falsecall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,true)endifif DC2=="-weather off"and GetLocalPlayer()==GetTriggerPlayer()thenset RR0[GetPlayerId(GetTriggerPlayer())]=falsecall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,false)endifif DC2=="-weather random"thenset RR0[GetPlayerId(GetTriggerPlayer())]=trueif GetLocalPlayer()==GetTriggerPlayer()thencall EnableWeatherEffect(Z3,false)call EnableWeatherEffect(V3,false)call EnableWeatherEffect(KS,false)call EnableWeatherEffect(LS,false)call EnableWeatherEffect(RT0,true)endifendifendfunctionfunction F72 takes nothing returns nothinglocal integer a=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))local integer MLI=GetPlayerId(GetTriggerPlayer())set FM[MLI]=FM[MLI]+1if FM[MLI]>20 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848656977))returnendifif GetEventPlayerChatString()=="-rollon"or GetEventPlayerChatString()=="-rolloff"thenreturnendifif a==0 thenset a=100endifif a>0 and a<2001 thencall QQI(P2,5,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r "+GetObjectName(1848653129)+" "+I2S(GetRandomInt(1,a))+" "+GetObjectName(1848653133)+" "+I2S(a))elsecall PZI(GetTriggerPlayer(),GetObjectName(1848652377))endifendfunctionfunction FN2 takes nothing returns nothinglocal integer aif GetRandomInt(1,2)==1 thenset a=GetRandomInt(DG0,DH0)elseset a=GetRandomInt(DE0,DF0)endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657747)+" "+S9I(a))endfunctionfunction FK2 takes nothing returns nothinglocal integer a=S2I(SubString(GetEventPlayerChatString(),4,StringLength(GetEventPlayerChatString())))if GetTriggerPlayer()!=BO[1]or a>2 or a<1 or CN==false or TimerGetElapsed(M)>14 or PV0==true thenreturnendifset PK0=aset PL0=aset PZ0=trueif a==1 thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(BO[1])]+(D80[GetPlayerId((BO[1]))])+"|r "+GetObjectName(1848656979))elsecall QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(CO[1])]+(D80[GetPlayerId((CO[1]))])+"|r "+GetObjectName(1848656979))endifif PK0==1 thenset PM0=BO[1]set PN0=CO[1]elseset PM0=CO[1]set PN0=BO[1]endifendfunctionfunction FZ2 takes nothing returns nothingset GM[GetPlayerId(GetTriggerPlayer())]=falseendfunctionfunction FV2 takes nothing returns nothingset GM[GetPlayerId(GetTriggerPlayer())]=trueendfunctionfunction F82 takes nothing returns nothingcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848654128))set RP0[GetPlayerId(GetTriggerPlayer())]=trueif GetLocalPlayer()==GetTriggerPlayer()thencall SetPlayerName(BO[1],(D80[GetPlayerId((BO[1]))]))call SetPlayerName(BO[2],(D80[GetPlayerId((BO[2]))]))call SetPlayerName(BO[3],(D80[GetPlayerId((BO[3]))]))call SetPlayerName(BO[4],(D80[GetPlayerId((BO[4]))]))call SetPlayerName(BO[5],(D80[GetPlayerId((BO[5]))]))call SetPlayerName(CO[1],(D80[GetPlayerId((CO[1]))]))call SetPlayerName(CO[2],(D80[GetPlayerId((CO[2]))]))call SetPlayerName(CO[3],(D80[GetPlayerId((CO[3]))]))call SetPlayerName(CO[4],(D80[GetPlayerId((CO[4]))]))call SetPlayerName(CO[5],(D80[GetPlayerId((CO[5]))]))endifendfunctionfunction F92 takes nothing returns nothinglocal integer id=GetPlayerId(GetTriggerPlayer())if HM[id]==true thenset HM[id]=falsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848653908))elseset HM[id]=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848654129))endifendfunctionfunction FR2 takes nothing returns nothinglocal integer id=GetPlayerId(GetTriggerPlayer())set RQ0[id]=trueendfunctionfunction FH2 takes nothing returns nothingendfunctionfunction FC2 takes nothing returns nothinglocal integer i=1local player plocal real Z12loopexitwhen i>5set p=BO[i]if T3I(p)thenset Z12=K[GetPlayerId(p)]/(TimerGetElapsed(M))*60call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653876)+" "+R2S(Z12))endifset p=CO[i]if T3I(p)thenset Z12=K[GetPlayerId(p)]/(TimerGetElapsed(M))*60call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653876)+" "+R2S(Z12))endifset i=i+1endloopcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00," ")set p=nullendfunctionfunction FD2 takes nothing returns nothingcall A31(GetTriggerPlayer())endfunctionfunction ZO2 takes nothing returns booleancall S0I(GetTriggeringTrigger())set RU0=truereturn falseendfunctionfunction Z22 takes real d returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,d,false)call TriggerAddCondition(t,Condition(function ZO2))set t=nullendfunctionfunction Z32 takes player MDI returns nothinglocal integer Z42local player Z52set Z42=0loopset Z52=Player(Z42)if(PlayersAreCoAllied(MDI,Z52)and MDI!=Z52)thencall SetPlayerAlliance(MDI,Z52,ALLIANCE_SHARED_VISION,true)call SetPlayerAlliance(MDI,Z52,ALLIANCE_SHARED_CONTROL,true)call SetPlayerAlliance(Z52,MDI,ALLIANCE_SHARED_CONTROL,true)endifset Z42=Z42+1exitwhen Z42==12endloopendfunctionfunction FB2 takes nothing returns nothinglocal integer MLI=S2I(SubString(GetEventPlayerChatString(),9,StringLength(GetEventPlayerChatString())))local integer i=1local player plocal string GW1if RU0 thenif(Z0<10)thenset GW1=I2S(H0)+":0"+I2S(Z0)elseset GW1=I2S(H0)+":"+I2S(Z0)endifif MLI<1 or P00[MLI]==false thenloopexitwhen i>5set p=BO[i]if T3I(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])>300.0 and P00[GetPlayerId(p)]==false thenset P00[GetPlayerId(p)]=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00," ")endifset p=CO[i]if T3I(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])>300.0 and P00[GetPlayerId(p)]==false thenset P00[GetPlayerId(p)]=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00," ")endifset i=i+1endloopcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00," ")elseif T3I(Player(MLI))==true and IsPlayerAlly(GetTriggerPlayer(),Player(MLI))==true thencall DisplayTimedTextToPlayer(Player(MLI),0,U2,3600,"|c00ff0303"+GetObjectName(1848653125)+"|r")call VY1(Player(MLI))set K3[GetPlayerId(Player(MLI))]="|c00555555"+GW1+"|r"call RemovePlayer(Player(MLI),PLAYER_GAME_RESULT_DEFEAT)call Z32(Player(MLI))if JL thencall B91(Player(MLI))endifset EF0[GetPlayerId(Player(MLI))]=truecall VX1(Player(MLI))call QRI(P2,30.00,"|c00ff0303"+(D80[GetPlayerId((Player(MLI)))])+" "+GetObjectName(1848653125)+"|r")endifendifendfunctionfunction FA2 takes nothing returns nothinglocal integer i=1local player plocal integer x=0if RU0 thenloopexitwhen i>5set p=BO[i]if T3I(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])/60>0.2 thenset x=x+1call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653124)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))endifset p=CO[i]if T3I(p)and((TimerGetElapsed(M))-L[GetPlayerId(p)])/60>0.2 thenset x=x+1call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653124)+" "+R2S(((TimerGetElapsed(M))-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))endifset i=i+1endloopif x<1 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,GetObjectName(1311782225))elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00," ")endifendifendfunctionfunction Z62 takes nothing returns booleanlocal integer i=1local player plocal real GW1=(TimerGetElapsed(M))if RU0 thenloopexitwhen i>5set p=BO[i]if T3I(p)and(GW1-L[GetPlayerId(p)])>300.0 and P00[GetPlayerId(p)]==false thenset P00[GetPlayerId(p)]=truecall QRI(OO,15,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S((GW1-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))call QRI(OO,15,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))call QRI(OO,15," ")endifset p=CO[i]if T3I(p)and(GW1-L[GetPlayerId(p)])>300.0 and P00[GetPlayerId(p)]==false thenset P00[GetPlayerId(p)]=truecall QRI(AO,15,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r"+" "+GetObjectName(1848653127)+" "+R2S((GW1-L[GetPlayerId(p)])/60)+" "+GetObjectName(1311782214))call QRI(AO,15,GetObjectName(1848653135)+" |cff99ccff-kickafk "+I2S(GetPlayerId(p))+" |r "+GetObjectName(1848653136))call QRI(AO,15," ")endifset i=i+1endloopendifreturn falseendfunctionfunction Z72 takes nothing returns booleanif GetOwningPlayer(GetTriggerUnit())!=BO[0]and GetOwningPlayer(GetTriggerUnit())!=CO[0]thenset K[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=K[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1if GetIssuedOrderId()!=851983 thenset L[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(TimerGetElapsed(M))set P00[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=falseendifif(GetIssuedOrderId()==851983 or GetIssuedOrderId()==851971)and GetOrderTargetItem()!=null thenif GetIssuedOrderId()==851983 or(GetIssuedOrderId()==851971 and(LoadBoolean(LY,(GetHandleId(GetItemPlayer(GetOrderTargetItem()))),(139)))==true)thenif GetItemPlayer(GetOrderTargetItem())!=GetOwningPlayer(GetTriggerUnit())and IsPointInRegion(QK,GetItemX(GetOrderTargetItem()),GetItemY(GetOrderTargetItem()))==true thencall DisableTrigger(GetTriggeringTrigger())call PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657719))call EnableTrigger(GetTriggeringTrigger())endifendifendifendifreturn falseendfunctionfunction Z92 takes nothing returns booleanreturn RYI(GetFilterUnit())and GetOwningPlayer(GetFilterUnit())==GetTriggerPlayer()endfunctionfunction Courier_Add takes nothing returns nothingcall UnitAddType(GetEnumUnit(),UNIT_TYPE_PEON)endfunctionfunction Courier_Remove takes nothing returns nothingcall UnitRemoveType(GetEnumUnit(),UNIT_TYPE_PEON)endfunctionfunction FE2 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,0,0,12000,Condition(function Z92))call NSI(g)set g=nullendfunctionfunction ZB2 takes nothing returns nothinglocal string DC2=StringCase(GetEventPlayerChatString(),false)local boolean ZC2=DC2=="-mode1"local boolean ZD2=DC2=="-mode2"if ZC2==false and ZD2==false thenreturnendifif(TimerGetElapsed(M))>60 thencall PXI(GetTriggerPlayer(),GetObjectName(1848652376))returnelseif(TimerGetElapsed(M))<15 thencall PXI(GetTriggerPlayer(),GetObjectName(1848652376))returnendifif ZC2 thenset UK=1elseif ZD2 thenset UK=2endifcall C82()call QRI(P2,15,GetObjectName(1848653134)+" "+GetObjectName(1848653109))call QRI(P2,15,GetObjectName(1848653138))call S0I(GetTriggeringTrigger())endfunctionfunction ZE2 takes nothing returns booleancall ExecuteFunc("ZB2")return falseendfunctionfunction AH_RegisterCommands takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,WO,"-",false)call TriggerAddCondition(t,Condition(function ZE2))call QRI(P2,30,"|cff99ccff"+GetObjectName(1848653139)+"|r")call QRI(P2,30,GetObjectName(1848653140)+" "+GetObjectName(1848653128)+" "+GetObjectName(1848653142)+" ")call QRI(P2,30," ")call QRI(P2,30,"|cff99ccff-mode1|r "+GetObjectName(1848653143)+". ("+GetObjectName(1848653144)+")")call QRI(P2,30,"|cff99ccff-mode2|r "+GetObjectName(1848653362))endfunctionfunction AH_RegisterCommands_Delayed takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,false)set t=nullendfunctionfunction FF2 takes nothing returns nothingif(TimerGetElapsed(M))>60 thencall PXI(GetTriggerPlayer(),GetObjectName(1848652376))returnelseif(TimerGetElapsed(M))<15 thencall PXI(GetTriggerPlayer(),GetObjectName(1848652376))returnendifif GetTriggerPlayer()!=WO thencall PXI(GetTriggerPlayer(),GetObjectName(1848652375))returnendifif IL==false thenset IL=trueset UK=2call C82()call QRI(P2,15,GetObjectName(1848653134)+" "+GetObjectName(1848653109))call QRI(P2,15,GetObjectName(1848653138))elsecall PZI(GetTriggerPlayer(),GetObjectName(1848652374))endifendfunctionfunction FG2 takes nothing returns nothingcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656726)+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656725)+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656724)+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656694)+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656716)+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656718)+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656723)+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656719)+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656720)+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656721)+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]")endfunctionfunction ZF2 takes string s returns nothingcall StopMusic(true)call PlayMusic(s)endfunctionfunction FW2 takes nothing returns nothinglocal string s=GetEventPlayerChatString()local integer TJI=GetRandomInt(1,P10)if GetLocalPlayer()==GetTriggerPlayer()thenif s=="-music off"thencall StopMusic(false)elseif s=="-music random"thencall ZF2(PI0[TJI])elseif s=="-music nightelf1"thencall ZF2(AD)elseif s=="-music nightelf2"thencall ZF2(BD)elseif s=="-music nightelf3"thencall ZF2(DD)elseif s=="-music human1"thencall ZF2(KC)elseif s=="-music human2"thencall ZF2(LC)elseif s=="-music human3"thencall ZF2(MC)elseif s=="-music orc1"thencall ZF2(FD)elseif s=="-music orc2"thencall ZF2(GD)elseif s=="-music orc3"thencall ZF2(HD)elseif s=="-music undead1"thencall ZF2(BE)elseif s=="-music undead2"thencall ZF2(CE)elseif s=="-music undead3"thencall ZF2(DE)elseif s=="-music other1"thencall ZF2(ZD)elseif s=="-music other2"thencall ZF2(VD)elseif s=="-music other3"thencall ZF2(WD)elseif s=="-music other4"thencall ZF2(XD)elseif s=="-music other5"thencall ZF2(YD)elseif s=="-music other6"thencall ZF2(GF)elseif s=="-music other7"thencall ZF2(HF)elseif s=="-music other8"thencall ZF2(ZF)elseif s=="-music other9"thencall ZF2(VF)elseif s=="-music special"thencall ZF2(PO0)elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848656727)+" ")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,"off, random, nightelf1, nightelf2, nightelf3, human1, human2, human3, orc1, orc2, orc3, undead1, undead2, undead3, other1, other2, other3, other4, other5, other6, other7, other8, other9, special")endifendifendfunctionfunction ZG2 takes nothing returns booleanset P10=P10+1set PI0[P10]=ADset P10=P10+1set PI0[P10]=BDset P10=P10+1set PI0[P10]=DDset P10=P10+1set PI0[P10]=KCset P10=P10+1set PI0[P10]=LCset P10=P10+1set PI0[P10]=MCset P10=P10+1set PI0[P10]=FDset P10=P10+1set PI0[P10]=GDset P10=P10+1set PI0[P10]=HDset P10=P10+1set PI0[P10]=BEset P10=P10+1set PI0[P10]=CEset P10=P10+1set PI0[P10]=DEset P10=P10+1set PI0[P10]=ZDset P10=P10+1set PI0[P10]=VDset P10=P10+1set PI0[P10]=WDset P10=P10+1set PI0[P10]=XDset P10=P10+1set PI0[P10]=YDset P10=P10+1set PI0[P10]=GFset P10=P10+1set PI0[P10]=HFset P10=P10+1set PI0[P10]=ZFset P10=P10+1set PI0[P10]=VFset P10=P10+1set PI0[P10]=PO0return falseendfunctionfunction ZZ2 takes player p,integer r,integer g,integer b,integer a returns nothingif GetLocalPlayer()==p thencall SetWaterBaseColor(r,g,b,a)endifendfunctionfunction ZV2 takes string s returns nothinglocal string ZW2=""local string ZX2=""local string ZY2=""local integer i=0local integer EU1=StringLength(s)local integer ZJ2=1loopexitwhen i>EU1if SubString(s,i,i+1)==" "thenset ZJ2=ZJ2+1elseif ZJ2==1 thenset ZW2=ZW2+SubString(s,i,i+1)elseif ZJ2==2 thenset ZX2=ZX2+SubString(s,i,i+1)elseset ZY2=ZY2+SubString(s,i,i+1)endifendifset i=i+1endloopset P30=S2I(ZW2)set P40=S2I(ZX2)set P50=S2I(ZY2)endfunctionfunction FY2 takes nothing returns nothinglocal string ZK2=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))local player p=GetTriggerPlayer()local integer rlocal integer glocal integer bset P20[GetPlayerId(p)]=trueif ZK2=="red"thencall ZZ2(p,255,0,0,255)elseif ZK2=="blue"thencall ZZ2(p,0,0,255,255)elseif ZK2=="green"thencall ZZ2(p,0,255,0,255)elseif ZK2=="default"thencall ZZ2(p,0,0,255,255)elseif ZK2=="random"thenset r=GetRandomInt(0,255)set g=GetRandomInt(0,255)set b=GetRandomInt(0,255)call ZZ2(p,r,g,b,255)call DisplayTimedTextToPlayer(p,0,0,5,GetObjectName(1848657988)+" r="+I2S(r)+" g="+I2S(g)+" b="+I2S(b))elsecall ZV2(ZK2)set r=P30set g=P40set b=P50if r==0 and g==0 and b==0 and ZK2!="0 0 0"thenreturnendifif r>=0 and r<=255 and g>=0 and g<=255 and b>=0 and b<=255 thencall ZZ2(p,r,g,b,255)endifendifendfunctionfunction FL2 takes nothing returns nothingcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,15.00,"This command has been temporarily disabled")endfunctionfunction FM2 takes nothing returns booleancall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,"Total Bonus XP/Gold: "+I2S(FA0[GetPlayerId(GetTriggerPlayer())])+"/"+I2S(FB0[GetPlayerId(GetTriggerPlayer())]))return falseendfunctionfunction GO2 takes nothing returns booleanif BII>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848659023)+": "+I2S(BII))endifreturn falseendfunctionfunction Quote_ReplaySound takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer x=(LoadInteger(LY,(S5I),(148)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))call PEI(p,P60[x])call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset p=nullreturn falseendfunctionfunction FJ2 takes nothing returns nothinglocal string s=GetEventPlayerChatString()local trigger tlocal integer x=S2I(SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString())))local integer i=1if x<1 or x>P80 thenset x=GetRandomInt(1,P80)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848657205)+" "+I2S(x))endifif P90 thenloopexitwhen i>P80call AM1(P60[i])set i=i+1endloopset P90=falseendifif P70[x]==false thenendifcall PEI(GetTriggerPlayer(),P60[x])endfunctionfunction ZN2 takes player p1 returns stringlocal string s=GetObjectName(1848657730)set s=FS1(s,"$c1","|c00ff0303")set s=FS1(s,"$p1",C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r")return sendfunctionfunction ZS2 takes nothing returns stringlocal string s=GetObjectName(1848657729)set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c2","|c00ff0303")return sendfunctionfunction ZT2 takes nothing returns nothinglocal integer i=1local unit SFIif IL thenloopexitwhen i>5set SFI=K1[GetPlayerId(BO[i])]if SFI!=null thenif UK==2 thencall FV1(SFI)endifcall UnitSetUsesAltIcon(SFI,false)endifset SFI=K1[GetPlayerId(CO[i])]if SFI!=null thenif UK==2 thencall FV1(SFI)endifcall UnitSetUsesAltIcon(SFI,false)endifset i=i+1endloopset SFI=nullendifendfunctionfunction ZR2 takes player p1,player p2 returns stringlocal string s=GetObjectName(1848657714)set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c2","|c00ff0303")set s=FS1(s,"$c2","|c00ff0303")set s=FS1(s,"$p1",C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r")set s=FS1(s,"$p2",C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r")return sendfunctionfunction ZP2 takes string ZQ2,string ZU2 returns stringlocal string s=GetObjectName(1848657494)set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$c1","|c006699CC")set s=FS1(s,"$p1",ZQ2)set s=FS1(s,"$p2",ZU2)return sendfunctionfunction V02 takes player p2 returns stringlocal string s=GetObjectName(1848657491)set s=FS1(s,"$p2",C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r")set s=FS1(s,"$c1","|c006699CC")return sendfunctionfunction VI2 takes player p returns nothinglocal integer TGIlocal integer THIif(TII(p)==true)thenset TGI=1set THI=5loopexitwhen TGI>THIif(BO[TGI]!=p)thenif(T3I(BO[TGI])==true)thencall SetPlayerAllianceStateBJ(p,BO[TGI],4)endifendifset TGI=TGI+1endloopelseset TGI=1set THI=5loopexitwhen TGI>THIif(CO[TGI]!=p)thenif(T3I(CO[TGI])==true)thencall SetPlayerAllianceStateBJ(p,CO[TGI],4)endifendifset TGI=TGI+1endloopendifendfunctionfunction V12 takes nothing returns nothingif GetOwningPlayer(GetEnumUnit())==KM thencall SetUnitOwner(GetEnumUnit(),SM,true)elseif GetOwningPlayer(GetEnumUnit())==SM thencall SetUnitOwner(GetEnumUnit(),KM,true)endifendfunctionfunction VO2 takes unit u,player p returns nothinglocal real x1local real y1local real x2local real y2local integer ilocal item BA1if TII(p)thenset x1=GetRectCenterX(S3)set y1=GetRectCenterY(S3)set x2=GetRectCenterX(O4)set y2=GetRectCenterY(O4)elseset x1=GetRectCenterX(O4)set y1=GetRectCenterY(O4)set x2=GetRectCenterX(S3)set y2=GetRectCenterY(S3)endifcall SetUnitX(u,x1)call SetUnitY(u,y1)if RYI(u)thencall IssueImmediateOrder(u,"creepanimatedead")endifif IsUnitType(u,UNIT_TYPE_HERO)==true thencall SaveBoolean(LY,(GetHandleId(u)),(140),(true))call SaveInteger(LY,(GetHandleId((u))),((4259)),(2))call UnitRemoveAbility(u,1093678162)call SetUnitInvulnerable(u,false)call PauseUnit(u,false)set i=0loopexitwhen i>5set BA1=UnitItemInSlot(u,i)if GetUnitTypeId(u)!=1211117642 and BA1!=null and(GetItemPlayer(BA1)!=GetOwningPlayer(u)and EB1(BA1)!=W30 and EB1(BA1)!=W40)and GetItemTypeId(BA1)!=FR0[VL0]thencall UnitRemoveItem(u,BA1)endifset i=i+1endloopendifcall SetUnitX(u,x2)call SetUnitY(u,y2)call SetUnitColor(u,GetPlayerColor(p))set BA1=nullendfunctionfunction V22 takes nothing returns booleanif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true or RYI(GetFilterUnit())thencall VO2(GetFilterUnit(),QM)elseif GetUnitTypeId(GetFilterUnit())==1852010352 thencall IssueImmediateOrder(GetFilterUnit(),"creepanimatedead")elseif GetUnitTypeId(GetFilterUnit())==1966092354 thenreturn trueendifreturn falseendfunctionfunction V32 takes item i,player p returns nothinglocal real xlocal real yif TII(p)thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifcall SetItemPosition(i,x,y)endfunctionfunction V42 takes nothing returns nothingif GetItemPlayer(GetEnumItem())==QM thencall V32(GetEnumItem(),QM)endifendfunctionfunction V52 takes player p1,player p2 returns nothinglocal group g1=NTI()local group g2=NTI()set QM=p1call GroupEnumUnitsOfPlayer(g1,p1,Condition(function V22))set QM=p2call GroupEnumUnitsOfPlayer(g2,p2,Condition(function V22))call ForGroup(g1,function V12)call ForGroup(g2,function V12)set QM=p1call EnumItemsInRect(GetWorldBounds(),Condition(function ULI),function V42)set QM=p2call EnumItemsInRect(GetWorldBounds(),Condition(function ULI),function V42)call NSI(g1)call NSI(g2)set g1=nullset g2=nullendfunctionfunction V62 takes player p1,player p2 returns nothinglocal integer xlocal integer ylocal integer ilocal integer i1local integer i2local real x1local real y1local real x2local real y2local player plocal string ZQ2=C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"local string ZU2=C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"local integer GV2set GV2=EL0[GetPlayerId(p1)]set EL0[GetPlayerId(p1)]=EL0[GetPlayerId(p2)]set EL0[GetPlayerId(p2)]=GV2if TII(p1)thenset x1=GetRectCenterX(S3)set y1=GetRectCenterY(S3)elseset x1=GetRectCenterX(O4)set y1=GetRectCenterY(O4)endifif TII(p2)thenset x2=GetRectCenterX(S3)set y2=GetRectCenterY(S3)elseset x2=GetRectCenterX(O4)set y2=GetRectCenterY(O4)endifset i=1loopexitwhen i>5if BO[i]==p1 or CO[i]==p1 thenset i1=iendifif BO[i]==p2 or CO[i]==p2 thenset i2=iendifset i=i+1endloopif TII(p1)thenset CO[i2]=p1set BO[i1]=p2elseset BO[i2]=p1set CO[i1]=p2endifcall SetPlayerTeam(BO[0],0)call SetPlayerTeam(BO[1],0)call SetPlayerTeam(BO[2],0)call SetPlayerTeam(BO[3],0)call SetPlayerTeam(BO[4],0)call SetPlayerTeam(BO[5],0)call SetPlayerTeam(CO[0],1)call SetPlayerTeam(CO[1],1)call SetPlayerTeam(CO[2],1)call SetPlayerTeam(CO[3],1)call SetPlayerTeam(CO[4],1)call SetPlayerTeam(CO[5],1)call Z11()set x=0set y=0loopexitwhen x>5loopexitwhen y>5call SetPlayerAllianceStateBJ(BO[x],BO[y],3)call SetPlayerAllianceStateBJ(CO[x],CO[y],3)call SetPlayerAllianceStateBJ(BO[x],CO[y],0)call SetPlayerAllianceStateBJ(CO[x],BO[y],0)set y=y+1endloopset y=0set x=x+1endloopcall ForceClear(OO)call ForceClear(AO)call ForceAddPlayer(OO,BO[0])call ForceAddPlayer(OO,BO[1])call ForceAddPlayer(OO,BO[2])call ForceAddPlayer(OO,BO[3])call ForceAddPlayer(OO,BO[4])call ForceAddPlayer(OO,BO[5])call ForceAddPlayer(AO,CO[0])call ForceAddPlayer(AO,CO[1])call ForceAddPlayer(AO,CO[2])call ForceAddPlayer(AO,CO[3])call ForceAddPlayer(AO,CO[4])call ForceAddPlayer(AO,CO[5])call ExecuteFunc("ZO1")call V52(p1,p2)set IN=truecall PanCameraToTimedForPlayer(p1,x1,y1,0)call PanCameraToTimedForPlayer(p2,x2,y2,0)call ZI1()set JM=falseif UM!=null thencall TriggerEvaluate(UM)endifif GetPlayerSlotState(p2)==PLAYER_SLOT_STATE_EMPTY thenset D80[GetPlayerId(p2)]=GetPlayerName(p2)endifset i=1loopexitwhen i>5set p=BO[i]if T6I(p)thencall VI2(p)endifset p=CO[i]if T6I(p)thencall VI2(p)endifset i=i+1endloopcall ZT2()call P7O()call ClearTextMessages()call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,ZP2(ZQ2,ZU2))call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20," ")call GY1(p1)call GY1(p2)endfunctionfunction V72 takes nothing returns nothinglocal integer i=1local player pset ON=0set AN=0loopexitwhen i>5set p=BO[i]if T3I(p)thenset AN=AN+1if TM[GetPlayerId(p)]==true thenset ON=ON+1endifendifset p=CO[i]if T3I(p)thenset AN=AN+1if TM[GetPlayerId(p)]==true thenset ON=ON+1endifendifset i=i+1endloopendfunctionfunction V82 takes nothing returns nothingset JM=falseif UM!=null thencall TriggerEvaluate(UM)endifcall ClearTextMessages()call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,ZN2(GetTriggerPlayer()))endfunctionfunction V92 takes nothing returns nothinglocal integer i=1local player plocal integer VA2=0local integer VB2=0local integer VC2=0if TM[GetPlayerId(GetTriggerPlayer())]==false thenset TM[GetPlayerId(GetTriggerPlayer())]=truecall V72()call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,C0[GetPlayerId(GetTriggerPlayer())]+(D80[GetPlayerId((GetTriggerPlayer()))])+"|r|c006699CC "+GetObjectName(1848657492)+"|r ("+I2S(ON)+"/"+I2S(AN)+")")endifloopexitwhen i>5set p=BO[i]if T3I(p)and TM[GetPlayerId(p)]==false thenset VA2=VA2+1set VC2=VC2+1endifif T3I(p)and TM[GetPlayerId(p)]==true thenset VB2=VB2+1set VC2=VC2+1endifset p=CO[i]if T3I(p)and TM[GetPlayerId(p)]==false thenset VA2=VA2+1set VC2=VC2+1endifif T3I(p)and TM[GetPlayerId(p)]==true thenset VB2=VB2+1set VC2=VC2+1endifset i=i+1endloopif VA2<2 and VB2>=R2I(VC2/2)thenif(VC2==2 and VB2>1)or VC2!=2 thencall V62(KM,SM)endifendifendfunctionfunction VD2 takes nothing returns nothinglocal integer i=1local player p=GetTriggerPlayer()local player VE2local string slocal string s2loopexitwhen i>5set s=""set s2=""if TII(p)thenset VE2=CO[i]elseset VE2=BO[i]endifif GetPlayerSlotState(VE2)==PLAYER_SLOT_STATE_LEFT and GetPlayerController(VE2)==MAP_CONTROL_USER thenset s="|c00ff0303["+GetObjectName(1848657497)+"]|r"endifif K1[GetPlayerId(VE2)]!=null thenset s2=" ("+GetUnitName(K1[GetPlayerId(VE2)])+")"endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,GetObjectName(1848653875)+"|c006699CC "+"-switch "+I2S(i)+"|r "+GetObjectName(1848657489)+" "+C0[GetPlayerId(VE2)]+(D80[GetPlayerId((VE2))])+s2+"|r "+s)set i=i+1endloopendfunctionfunction VF2 takes nothing returns booleanlocal integer i=0if JM thencall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,20,"|c00ff0303"+GetObjectName(1848657493)+"|r")endifset RY0=trueset JM=falseset KM=nullset SM=nullloopexitwhen i>16set TM[i]=falseset i=i+1endloopcall S0I(GetTriggeringTrigger())set UM=nullreturn falseendfunctionfunction VG2 takes player p1,player p2 returns nothinglocal trigger t=CreateTrigger()local integer i=0local string slocal string PUOlocal string msg2local string msg3local player plocal string s2set RY0=falseset JM=trueset KM=p1set SM=p2loopexitwhen i>16set TM[i]=falseset i=i+1endloopset TM[GetPlayerId(KM)]=truecall TriggerRegisterTimerEvent(t,60,false)call TriggerAddCondition(t,Condition(function VF2))set UM=tset s=ZR2(p1,p2)set s2=ZS2()set i=1loopexitwhen i>5set p=BO[i]if p!=p1 thencall DisplayTimedTextToPlayer(p,0,0,20,s)call DisplayTimedTextToPlayer(p,0,0,20,s2)endifset p=CO[i]if p!=p1 thencall DisplayTimedTextToPlayer(p,0,0,20,s)call DisplayTimedTextToPlayer(p,0,0,20,s2)endifset i=i+1endloopset s=V02(p2)call DisplayTimedTextToPlayer(p1,0,0,20,s)set t=nullendfunctionfunction FT2 takes nothing returns nothingif JL==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657752))returnendifif C2 and GetEventPlayerChatString()!="-ok"and GetEventPlayerChatString()!="-switch accept"and GetEventPlayerChatString()!="-no"thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657712))returnendifif GetEventPlayerChatString()=="-switch accept"or GetEventPlayerChatString()=="-ok"thenif JM thencall V92()endifelseif GetEventPlayerChatString()=="-no"thenif JM thencall V82()endifelseif GetEventPlayerChatString()=="-switch"thenif JM==false thencall VD2()endifelseif JM==false thenset RM=S2I(SubString(GetEventPlayerChatString(),8,StringLength(GetEventPlayerChatString())))if RM>0 and RM<6 thenif TII(GetTriggerPlayer())thenif RX0[GetPlayerId(CO[RM])]==false thencall VG2(GetTriggerPlayer(),CO[RM])elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658009))endifelseif RX0[GetPlayerId(BO[RM])]==false thencall VG2(GetTriggerPlayer(),BO[RM])elsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848658009))endifendifendifendifendfunctionfunction Command_NoSwitch takes nothing returns nothingif B0==false and JL and GetTriggerPlayer()==WO thenset JL=falsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,GetObjectName(1848657752))endifendfunctionfunction VH2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))set t=nullreturn falseendfunctionfunction G12 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=K1[GetPlayerId(GetTriggerPlayer())]call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Sleep\\SleepTarget.mdl",P7I,"overhead")))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(t,Condition(function VH2))call SetUnitAnimation(P7I,"sleep")set t=nullset P7I=nullendfunctionfunction G22 takes nothing returns nothingcall SetUnitAnimationByIndex(K1[GetPlayerId(GetTriggerPlayer())],23)endfunctionfunction G32 takes nothing returns nothingif K1[GetPlayerId(GetTriggerPlayer())]!=null thenset PA0[GetPlayerId(GetTriggerPlayer())]=1call UnitRemoveAbility(K1[GetPlayerId(GetTriggerPlayer())],1093815114)endifendfunctionfunction FP2 takes nothing returns nothingif PB0[GetPlayerId(GetTriggerPlayer())]==false thenset PB0[GetPlayerId(GetTriggerPlayer())]=trueif GetObjectName(1848657992)=="Language: English"thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"You have activated the -tips system.")call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,"Please remember that these are just introductory recommendations and are not the only way to play heroes.")endifif K1[GetPlayerId(GetTriggerPlayer())]!=null thencall GD1(GetTriggerPlayer(),GetUnitPointValue(K1[GetPlayerId(GetTriggerPlayer())]))endifendifendfunctionfunction VV2 takes integer VW2,integer VX2 returns integerif VX2==0 thenreturn VW2elseif VX2==1 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1231317865endifif VW2==1131833710 thenreturn 1232301687endifif VW2==1130852979 thenreturn 1232301687endifif VW2==1131181671 thenreturn 1232301687endifif VW2==1517709678 thenreturn 1231317865endifif VW2==1516399475 thenreturn 1231188849endifif VW2==1315205732 thenreturn 1231188849endifelseif VX2==2 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1499622509endifif VW2==1131833710 thenreturn 1499624556endifif VW2==1130852979 thenreturn 1130852979endifif VW2==1131181671 thenreturn 1131181671endifif VW2==1517709678 thenreturn 1500673132endifif VW2==1516399475 thenreturn 1500999010endifif VW2==1315205732 thenreturn 1247966316endifelseif VX2==3 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1499622509endifif VW2==1131833710 thenreturn 1499624556endifif VW2==1130852979 thenreturn 1500673132endifif VW2==1131181671 thenreturn 1131181671endifif VW2==1517709678 thenreturn 1500673132endifif VW2==1516399475 thenreturn 1499624556endifif VW2==1315205732 thenreturn 1247966316endifelseif VX2==4 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1131570027endifif VW2==1131833710 thenreturn 1098279278endifif VW2==1130852979 thenreturn 1097298532endifif VW2==1131181671 thenreturn 1097627236endifif VW2==1517709678 thenreturn 1097298532endifif VW2==1516399475 thenreturn 1131570027endifif VW2==1315205732 thenreturn 1131833710endifelseif VX2==5 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1365537394endifif VW2==1131833710 thenreturn 1365467760endifif VW2==1130852979 thenreturn 1365734004endifif VW2==1131181671 thenreturn 1365734003endifif VW2==1517709678 thenreturn 1365734004endifif VW2==1516399475 thenreturn 1365467760endifif VW2==1315205732 thenreturn 1366520944endifelseif VX2==6 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1147302507endifif VW2==1131833710 thenreturn 1147630195endifif VW2==1130852979 thenreturn 1331982964endifif VW2==1131181671 thenreturn 1332114292endifif VW2==1517709678 thenreturn 1148347507endifif VW2==1516399475 thenreturn 1148416356endifif VW2==1315205732 thenreturn 1332964706endifelseif VX2==7 thenif VW2==1130656372 thenreturn 1130656372endifif VW2==1130656356 thenreturn 1197634155endifif VW2==1131833710 thenreturn 1198290531endifif VW2==1130852979 thenreturn 1197765236endifif VW2==1131181671 thenreturn 1197763442endifif VW2==1517709678 thenreturn 1198679155endifif VW2==1516399475 thenreturn 1198748004endifif VW2==1315205732 thenreturn 1197961843endifendifreturn 0endfunctionfunction VY2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real VJ2=(LoadReal(LY,(S5I),(149)))local real VK2=(LoadReal(LY,(S5I),(150)))local real VL2=(LoadReal(LY,(S5I),(151)))local real VM2=128local real xlocal real ylocal integer KBO=(LoadInteger(LY,(S5I),(152)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer VN2=(LoadInteger(LY,(S5I),(153)))loopexitwhen VJ2>VL2loopexitwhen VK2>8192if GetLocalPlayer()==p thenset VN2=VN2+1set x=VJ2set y=VK2call SetTerrainType(x,y,VV2(SL[VN2],KBO),QL[VN2],1,0)set x=-VJ2set y=VK2call SetTerrainType(x,y,VV2(TL[VN2],KBO),UL[VN2],1,0)set x=-VJ2set y=-VK2call SetTerrainType(x,y,VV2(RL[VN2],KBO),IM[VN2],1,0)set x=VJ2set y=-VK2call SetTerrainType(x,y,VV2(PL[VN2],KBO),AM[VN2],1,0)endifset VK2=VK2+VM2endloopset VK2=0set VJ2=VJ2+VM2endloopset VL2=VL2+256call SaveReal(LY,(S5I),(149),((VJ2)*1.0))call SaveReal(LY,(S5I),(150),((VK2)*1.0))call SaveInteger(LY,(S5I),(153),(VN2))call SaveReal(LY,(S5I),(151),((VL2)*1.0))if VL2>8192 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction VS2 takes nothing returns nothingif GetTriggerPlayer()==GetLocalPlayer()and(GetDestructableTypeId(GetEnumDestructable())==1096053874 or GetDestructableTypeId(GetEnumDestructable())==1110454322)thencall SetDestructableAnimation(GetEnumDestructable(),"stand alternate")endifendfunctionfunction VT2 takes nothing returns nothingif GetTriggerPlayer()==GetLocalPlayer()and(GetDestructableTypeId(GetEnumDestructable())==1096053874 or GetDestructableTypeId(GetEnumDestructable())==1110454322)thencall SetDestructableAnimation(GetEnumDestructable(),"stand")endifendfunctionfunction VR2 takes integer KBO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if KBO==1 thencall EnumDestructablesInRectAll(GetWorldBounds(),function VS2)elsecall EnumDestructablesInRectAll(GetWorldBounds(),function VT2)endifset BM[GetPlayerId(GetTriggerPlayer())]=KBOcall TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function VY2))call SaveInteger(LY,(S5I),(152),(KBO))call SaveReal(LY,(S5I),(149),((0)*1.0))call SaveReal(LY,(S5I),(150),((0)*1.0))call SaveReal(LY,(S5I),(151),((160)*1.0))call SavePlayerHandle(LY,(S5I),(54),(GetTriggerPlayer()))set t=nullendfunctionfunction Command_Terrain takes nothing returns nothingif LL[GetPlayerId(GetTriggerPlayer())]==false thenset KL[GetPlayerId(GetTriggerPlayer())]=KL[GetPlayerId(GetTriggerPlayer())]+1if KL[GetPlayerId(GetTriggerPlayer())]<9 thenif GetEventPlayerChatString()=="-terrain"or GetEventPlayerChatString()=="-terrain default"thencall VR2(0)elseif GetEventPlayerChatString()=="-terrain snow"thencall VR2(1)elseif GetEventPlayerChatString()=="-terrain city1"thencall VR2(2)elseif GetEventPlayerChatString()=="-terrain city2"thencall VR2(3)elseif GetEventPlayerChatString()=="-terrain jungle"thencall VR2(4)elseif GetEventPlayerChatString()=="-terrain highlands"thencall VR2(5)elseif GetEventPlayerChatString()=="-terrain reddungeon"thencall VR2(6)elseif GetEventPlayerChatString()=="-terrain bluedungeon"thencall VR2(7)endifelsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10,GetObjectName(1848657740))endifendifendfunctionfunction VP2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real VJ2=(LoadReal(LY,(S5I),(149)))local real VK2=(LoadReal(LY,(S5I),(150)))local real VL2=(LoadReal(LY,(S5I),(151)))local real VM2=128local real xlocal real yloopexitwhen VJ2>VL2loopexitwhen VK2>8192set ML=ML+1set x=VJ2set y=VK2if IsPointBlighted(x,y)==false thenset SL[ML]=GetTerrainType(x,y)set QL[ML]=GetTerrainVariance(x,y)endifset x=-VJ2set y=VK2if IsPointBlighted(x,y)==false thenset TL[ML]=GetTerrainType(x,y)set UL[ML]=GetTerrainVariance(x,y)endifset x=-VJ2set y=-VK2if IsPointBlighted(x,y)==false thenset RL[ML]=GetTerrainType(x,y)set IM[ML]=GetTerrainVariance(x,y)endifset x=VJ2set y=-VK2if IsPointBlighted(x,y)==false thenset PL[ML]=GetTerrainType(x,y)set AM[ML]=GetTerrainVariance(x,y)endifset VK2=VK2+VM2endloopset VK2=0set VJ2=VJ2+VM2endloopset VL2=VL2+256call SaveReal(LY,(S5I),(149),((VJ2)*1.0))call SaveReal(LY,(S5I),(150),((VK2)*1.0))call SaveReal(LY,(S5I),(151),((VL2)*1.0))if VL2>8192 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction VU2 takes nothing returns nothinglocal trigger tset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function IU2))set OL=CreateTimer()call TimerStart(OL,BL+1,false,null)call RemoveUnitFromStock(II0,1747989059)call AddUnitToStock(II0,1747989059,1,2)call RemoveUnitFromStock(BL0,1747989059)call AddUnitToStock(BL0,1747989059,1,2)set t=nullendfunctionfunction W02 takes string G72 returns booleanif G72=="-ma"or G72=="-ms"or G72=="-cs"or G72=="-cson"or G72=="-disablehelp"or G72=="-enablehelp"or G72=="-unstuck"or G72=="-recreate"thenreturn trueelseif G72=="-swaphero"or G72=="-showmsg"or G72=="-hidemsg"or G72=="-showdeny"or G72=="-hidedeny"or G72=="-weather rain"or G72=="-weather snow"or G72=="-weather moonlight"or G72=="-weather wind"or G72=="-weather random"or G72=="-weather off"or G72=="-denyinfo"or G72=="-di"or G72=="-deathon"or G72=="-don"or G72=="-deathoff"or G72=="-doff"or G72=="-roll"or G72=="-hideheronames"or G72=="-hhn"or G72=="-test"or G72=="-mute"or G72=="-wtf"or G72=="-fleshstr"or G72=="-fs"or G72=="-switchon"thenreturn trueendifreturn falseendfunctionfunction WI2 takes nothing returns booleanreturn not B0endfunctionfunction W12 takes string WO2 returns nothingif W2==""thenset W2="|c006699CC"+WO2+"|r"elseset W2=W2+"/|c006699CC"+WO2+"|r"endifendfunctionfunction W22 takes string W32,integer W42,integer W52 returns stringreturn SubString(W32,0,W42)+SubString(W32,W52,StringLength(W32))endfunctionfunction W62 takes string W32 returns stringlocal integer FQ1=StringLength(W32)local string W72local string A92=""local integer i=0loopexitwhen(i==FQ1)set W72=StringCase(SubString(W32,i,i+1),false)if not(W72==StringCase(W72,true))thenset A92=A92+W72endifset i=i+1endloopreturn A92endfunctionfunction W82 takes string W92,integer KBO returns nothinglocal string DC2=W62(W92)local string array WA2local string array WB2local string array GameModeStringlocal boolean array WC2local integer WD2local integer FQ1=StringLength(DC2)local integer x=0local integer y=0local integer z=0local boolean APlocal boolean ARlocal boolean LMlocal boolean MMlocal boolean TRlocal boolean DMlocal boolean MRlocal boolean SPlocal boolean AAlocal boolean AIlocal boolean ASlocal boolean IDlocal boolean NPlocal boolean SClocal boolean EMlocal boolean DUlocal boolean SHlocal boolean VRlocal boolean RVlocal boolean RDlocal boolean OMlocal boolean NTlocal boolean NBlocal boolean NMlocal boolean NSlocal boolean SOlocal boolean NRlocal boolean XLlocal boolean SDlocal boolean PMlocal boolean OIlocal boolean MIlocal boolean CMlocal boolean FRlocal boolean MOlocal boolean ROlocal boolean ERlocal boolean CDlocal boolean RSlocal boolean CPlocal boolean ZMlocal boolean UBlocal boolean TTset WA2[1]="allpick"set WB2[1]="ap"set WA2[2]="allrandom"set WB2[2]="ar"set WA2[3]="leaguemode"set WB2[3]="lm"set WA2[4]="mirrormatch"set WB2[4]="mm"set WA2[5]="teamrandom"set WB2[5]="tr"set WA2[6]="deathmatch"set WB2[6]="dm"set WA2[7]="moderandom"set WB2[7]="mr"set WA2[8]="shuffleplayers"set WB2[8]="sp"set WA2[9]="allagility"set WB2[9]="aa"set WA2[10]="allintelligence"set WB2[10]="ai"set WA2[11]="allstrength"set WB2[11]="as"set WA2[12]="itemdrop"set WB2[12]="id"set WA2[13]="nopowerups"set WB2[13]="np"set WA2[14]="supercreeps"set WB2[14]="sc"set WA2[15]="easymode"set WB2[15]="em"set WA2[16]="duplicatemode"set WB2[16]="du"set WA2[17]="samehero"set WB2[17]="sh"set WA2[18]="voterandom"set WB2[18]="vr"set WA2[19]="reverse"set WB2[19]="rv"set WA2[20]="randomdraft"set WB2[20]="rd"set WA2[21]="onlymid"set WB2[21]="om"set WA2[22]="extendedleague"set WB2[22]="xl"set WA2[23]="nomid"set WB2[23]="nm"set WA2[24]="notop"set WB2[24]="nt"set WA2[25]="nobot"set WB2[25]="nb"set WA2[26]="noswap"set WB2[26]="ns"set WA2[27]="norepick"set WB2[27]="nr"set WA2[28]="captainsdraft"set WB2[28]="cd"set WA2[29]="singledraft"set WB2[29]="sd"set WA2[30]="poolingmode"set WB2[30]="pm"set WA2[31]="observerinfo"set WB2[31]="oi"set WA2[32]="miniheroes"set WB2[32]="mi"set WA2[33]="captainsmode"set WB2[33]="cm"set WA2[34]="fastrespawn"set WB2[34]="fr"set WA2[35]="meleeonly"set WB2[35]="mo"set WA2[36]="rangeonly"set WB2[36]="ro"set WA2[37]="experimentalrunes"set WB2[37]="er"set WA2[38]="randomside"set WB2[38]="rs"set WA2[39]="switchon"set WB2[39]="so"set WA2[40]="zoommode"set WB2[40]="zm"set WA2[41]="capturepoint"set WB2[41]="cp"set WA2[42]="unban"set WB2[42]="ub"set WA2[43]="tagteam"set WB2[43]="tt"set WD2=43set x=-1loopexitwhen x==FQ1-1set x=x+1set y=xloopexitwhen y==FQ1set y=y+1set z=1loopexitwhen z>WD2if WA2[z]==SubString(DC2,x,y)thenset WC2[z]=trueset z=WD2+1set DC2=W22(DC2,x,y)set x=-1set FQ1=StringLength(DC2)set y=FQ1elseset z=z+1endifendloopendloopendloopset x=-1loopexitwhen x==FQ1-1set x=x+1set y=xloopexitwhen y==FQ1set y=y+1set z=1loopexitwhen z>WD2if WB2[z]==SubString(DC2,x,y)thenset WC2[z]=trueset z=WD2+1set DC2=W22(DC2,x,y)set x=-1set FQ1=StringLength(DC2)set y=FQ1elseset z=z+1endifendloopendloopendloopset AP=WC2[1]set AR=WC2[2]set LM=WC2[3]set MM=WC2[4]set TR=WC2[5]set DM=WC2[6]set MR=WC2[7]set SP=WC2[8]set AA=WC2[9]set AI=WC2[10]set AS=WC2[11]set ID=WC2[12]set NP=WC2[13]set SC=WC2[14]set EM=WC2[15]set DU=WC2[16]set SH=WC2[17]set VR=WC2[18]set RV=WC2[19]set RD=WC2[20]set OM=WC2[21]set XL=WC2[22]set NM=WC2[23]set NT=WC2[24]set NB=WC2[25]set NS=WC2[26]set NR=WC2[27]set CD=WC2[28]set SD=WC2[29]set PM=WC2[30]set OI=WC2[31]set MI=WC2[32]set CM=WC2[33]set FR=WC2[34]set MO=WC2[35]set RO=WC2[36]set ER=WC2[37]set RS=WC2[38]set SO=WC2[39]set ZM=WC2[40]set CP=WC2[41]set UB=WC2[42]set TT=WC2[43]if DC2!=""or W02(W92)thenreturnendifif(AR and(CM or AP or TR or LM or MR or RV or RD or CD or SD or TT))or(AP and(TR or MR))or(TR and(LM or MR))or(LM and MR)or(MM and SH)thencall PZI(WO,GetObjectName(1848652373))returnendifif(AA and(AI or AS or DM))or(AS and(AI or DM))or(AI and DM)thencall PZI(WO,GetObjectName(1848652373))returnendifif(RO and(MO or DM))or(MO and DM)thencall PZI(WO,GetObjectName(1848652373))returnendifif RV and(CM or AR or TR or MR or LM or DM or SH or TT)thencall PZI(WO,GetObjectName(1848652373))returnendifif(DM and(CM or TR or LM or MR or SH or RV or RD or CD or SD or TT))or(MM and DM)or(SH and DM)thencall PZI(WO,GetObjectName(1848652372))returnendifif LM and(TT or CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or XL or MO or RO)thencall PZI(WO,GetObjectName(1848652593))returnendifif XL and(TT or CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or RO or MO)thencall PZI(WO,GetObjectName(1848652594))returnendifif CM and(TT or SP or XL or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or MO or RO)thencall PZI(WO,GetObjectName(1848652594))returnendifif RD and(TT or CD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif CD and(TT or RD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif MR and(TT or CM or AP or LM or AR or SD or MM or TR or DM or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif SD and(TT or CM or AP or LM or AR or RD or CD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif VR and(TT or CM or LM or RD or CD or SD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif TT and(SO or VR or CM or LM or RD or CD or SD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)thencall PZI(WO,GetObjectName(1848652373))returnendifif MM and T8I(OO)!=T8I(AO)thencall PZI(WO,GetObjectName(1848652596))returnendifif VR and T8I(OO)!=T8I(AO)thencall PZI(WO,GetObjectName(1848652596))returnendifif RV and T8I(OO)!=T8I(AO)thencall PZI(WO,GetObjectName(1848652596))returnendifif LM and not(T3I(BO[1])and T3I(BO[2])and T3I(BO[3])and T3I(BO[4])and T3I(BO[5])and T3I(CO[1])and T3I(CO[2])and T3I(CO[3])and T3I(CO[4])and T3I(CO[5]))thenendifif XL and not(T3I(BO[1])and T3I(BO[2])and T3I(BO[3])and T3I(BO[4])and T3I(BO[5])and T3I(CO[1])and T3I(CO[2])and T3I(CO[3])and T3I(CO[4])and T3I(CO[5]))thenendifif TT or ZM or CP or FR or CM or AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or ID or NP or SC or DU or EM or SH or VR or RV or RD or CD or OM or NB or NM or NT or NS or NR or XL or SD or PM or OI or MI or MO or RO or ER or RS or SO thencall DisableTrigger(PF0)elsereturnendifif CM==false thencall P7O()call UHO()endifif LM==false and XL==false thencall HJ2()endifset EL=W62(W92)if PE0 thencall FL1("Mode"+EL,0)elsecall FL1("Mode"+EL,GetPlayerId(WO))endifset J2=falseif LM thenset D3=GetObjectName(1848658010)elseif XL thenset D3=GetObjectName(1848658232)elseif RD thenset D3=GetObjectName(1848658254)elseif CD thenset D3=GetObjectName(1848658233)elseif MM thenset D3=GetObjectName(1848658248)elseif DM thenset D3=GetObjectName(1848658249)elseif RV thenset D3=GetObjectName(1848658243)elseif AP thenset D3=GetObjectName(1848658244)elseif AR thenset D3=GetObjectName(1848658231)elseif TR thenset D3=GetObjectName(1848658230)elseif MR thenset D3=GetObjectName(1848658250)elseif VR thenset D3=GetObjectName(1848658229)elseif SD thenset D3=GetObjectName(1848658228)elseif CM thenset D3=GetObjectName(1848658247)elseif TT thenset D3=GetObjectName(1848659280)endifif CM thencall W12(GetObjectName(1848658251))endifif TT thencall W12(GetObjectName(1848659281))endifif LM thencall W12(GetObjectName(1848658227))endifif XL thencall W12(GetObjectName(1848658226))endifif RD thencall W12(GetObjectName(1848658246))endifif CD thencall W12(GetObjectName(1848658225))endifif DM thencall W12(GetObjectName(1848658241))endifif MM thencall W12(GetObjectName(1848658224))endifif AP thencall W12(GetObjectName(1848658252))endifif AR thencall W12(GetObjectName(1848658257))endifif VR thencall W12(GetObjectName(1848658253))endifif MR thencall W12(GetObjectName(1848658245))endifif TR thencall W12(GetObjectName(1848658242))endifif SP thencall W12(GetObjectName(1848658255))endifif AA thencall W12(GetObjectName(1848658261))endifif AS thencall W12(GetObjectName(1848658256))endifif AI thencall W12(GetObjectName(1848658259))endifif RO thencall W12(GetObjectName(1848658260))endifif MO thencall W12(GetObjectName(1848652594))endifif DU thencall W12(GetObjectName(1848658264))endifif ID thencall W12(GetObjectName(1848658266))endifif NP thencall W12(GetObjectName(1848658486))endifif SC thencall W12(GetObjectName(1848658487))endifif EM thencall W12(GetObjectName(1848658489))endifif SH thencall W12(GetObjectName(1848658497))endifif RV thencall W12(GetObjectName(1848658263))endifif OM thencall W12(GetObjectName(1848658262))endifif NM thencall W12(GetObjectName(1848658258))endifif NB thencall W12(GetObjectName(1848658498))endifif NT thencall W12(GetObjectName(1848658488))endifif NS thencall W12(GetObjectName(1848658499))endifif NR thencall W12(GetObjectName(1848658502))endifif SD thencall W12(GetObjectName(1848658480))endifif PM thencall W12(GetObjectName(1848658265))endifif OI thencall W12(GetObjectName(1848658485))endifif MI thencall W12(GetObjectName(1848658484))endifif FR thencall W12(GetObjectName(1848658500))endifif ER thencall W12(GetObjectName(1848658501))endifif RS thencall W12(GetObjectName(1848658481))endifif SO thencall W12(GetObjectName(1848658482))endifif ZM thencall W12(GetObjectName(1848658753))endifif CP thencall W12(GetObjectName(1848658755))endifif UB thencall W12(GetObjectName(1848658994))endifcall QRI(bj_FORCE_ALL_PLAYERS,20.00," ")if KBO==1 thencall QRI(bj_FORCE_ALL_PLAYERS,20.00,C0[GetPlayerId(WO)]+(D80[GetPlayerId((WO))])+"|r"+" "+GetObjectName(1848653361)+" "+W2)elsecall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657998)+" "+W2)endifcall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848653363)+" -gameinfo.")call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call PMI("WE2",SP)call PMI("WF2",RS)call PMI("WG2",UB)call PMI("WH2",DM)call PMI("WZ2",MM)call PMI("WV2",SH)call PMI("WW2",AA)call PMI("WX2",AI)call PMI("WY2",AS)call PMI("WJ2",RO)call PMI("WK2",MO)call PMI("WL2",DU)call PMI("WM2",AR)call PMI("WN2",VR)call PMI("WS2",AP)call PMI("WT2",TR)call PMI("WR2",RV)call PMI("WP2",LM)call PMI("WQ2",XL)call PMI("WU2",CM)call PMI("X02",RD)call PMI("XI2",SD)call PMI("X12",MR)call PMI("XO2",ID)call PMI("X22",NP)call PMI("X32",SC)call PMI("X42",EM)call PMI("X52",OM)call PMI("X62",NB)call PMI("X72",NT)call PMI("X82",NM)call PMI("X92",SO)call PMI("XA2",NS)call PMI("XB2",NR)call PMI("XC2",PM)call PMI("XD2",OI)call PMI("XE2",MI)call PMI("XF2",FR)call PMI("XG2",ER)call PMI("XH2",CD)call PMI("XZ2",ZM)call PMI("XV2",CP)call PMI("XW2",TT)set AL=truecall BW1(0,0,false)if CN==false and BN==false thencall VU2()endifcall UR1()if SO==false thenset RX0[0]=trueset RX0[1]=trueset RX0[2]=trueset RX0[3]=trueset RX0[4]=trueset RX0[5]=trueset RX0[6]=trueset RX0[7]=trueset RX0[8]=trueset RX0[9]=trueset RX0[10]=trueset RX0[11]=trueset RX0[12]=trueset RX0[13]=trueset RX0[14]=trueset RX0[15]=trueset RX0[16]=trueendifendfunctionfunction XX2 takes nothing returns nothingcall W82(GetEventPlayerChatString(),1)endfunctionfunction XY2 takes nothing returns booleanif(MY)!=""and AL==false thenset PE0=truecall W82("-"+(MY),2)elsecall TriggerRegisterPlayerChatEvent(PF0,WO,"-",false)endifreturn falseendfunctionfunction WS2 takes nothing returns nothinglocal location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)local integer x=1set K0=trueset BL=150loopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZD1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZC1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set ZC1=nullset ZD1=nullendfunctionfunction XL2 takes nothing returns integerif PJ0==BO[1]thenreturn 1endifreturn 2endfunctionfunction XM2 takes string S,real XN2,real XS2,real XT2,real XR2,real XP2,boolean XQ2,integer r,integer g,integer b returns imageset MK=CreateImage(S,XN2,XS2,0,XT2-(XN2/2),XR2-(XS2/2),XP2,0,0,0,2)call SetImageRenderAlways(MK,true)call ShowImage(MK,XQ2)call SetImageColor(MK,r,g,b,255)return MKendfunctionfunction XU2 takes image i returns nothingcall ShowImage(i,false)call DestroyImage(i)endfunctionfunction Y02 takes integer YI2 returns nothinglocal real x=QV0+40local real y=QW0-50local integer Y12=255local integer YO2=0local integer Y22=0local integer Y32=0local integer Y42=0local integer Y52=255local integer rlocal integer glocal integer bif YI2==1 thenset r=Y12set g=YO2set b=Y22set Q30=XM2("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)set Q40=XM2("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)set Q50=XM2("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)elseif YI2==2 thenset r=Y32set g=Y42set b=Y52call XU2(Q30)call XU2(Q40)call XU2(Q50)set Q30=XM2("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)set Q40=XM2("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)set Q50=XM2("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)set Q60=XM2("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)elseif YI2==3 thenset r=Y12set g=YO2set b=Y22call XU2(Q30)call XU2(Q40)call XU2(Q50)call XU2(Q60)set Q30=XM2("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)set Q40=XM2("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)set Q50=XM2("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)elseif YI2==4 thenset r=Y32set g=Y42set b=Y52call XU2(Q30)call XU2(Q40)call XU2(Q50)set Q30=XM2("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)set Q40=XM2("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)set Q50=XM2("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)set Q60=XM2("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)elseif YI2==5 thenset r=Y12set g=YO2set b=Y22call XU2(Q30)call XU2(Q40)call XU2(Q50)call XU2(Q60)set Q30=XM2("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)set Q40=XM2("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)set Q50=XM2("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)elseif YI2==6 thenset r=Y32set g=Y42set b=Y52call XU2(Q30)call XU2(Q40)call XU2(Q50)set Q30=XM2("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)set Q40=XM2("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)set Q50=XM2("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)set Q60=XM2("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)elseif YI2==7 thencall XU2(Q30)call XU2(Q40)call XU2(Q50)call XU2(Q60)endifendfunctionfunction Y62 takes integer i,integer Y72 returns stringif i<0 thenset i=0endifif TimerGetElapsed(M)<15 thenreturn "|c00555555"+I2S(i)endifif PL0==3 thenreturn "|c00555555"+I2S(i)endifif PL0==1 and Y72!=XL2()thenreturn "|c00555555"+I2S(i)elseif PL0==2 and Y72!=XL2()thenreturn "|c00555555"+I2S(i)elseif i==0 thenreturn "|c00555555"+I2S(i)elseif i<6 thenreturn "|c00ff0303"+I2S(i)elsereturn I2S(i)endifendfunctionfunction Y82 takes nothing returns booleanlocal multiboarditem N8Ilocal integer ilocal integer QPOlocal integer QQOlocal integer DJ1=7local integer Y92=0set QPO=1set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemWidth(N8I,0.5)call MultiboardSetItemValue(N8I,C0[GetPlayerId(BO[1])]+(D80[GetPlayerId((BO[1]))])+"|r")call MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657238))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set i=0set QPO=QPOset QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PR0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PR0[i]])endifcall MultiboardReleaseItem(N8I)set i=1set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PR0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PR0[i]])endifcall MultiboardReleaseItem(N8I)set i=2set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PR0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PR0[i]])endifcall MultiboardReleaseItem(N8I)set i=3set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PR0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PR0[i]])endifcall MultiboardReleaseItem(N8I)set i=4set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PR0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PR0[i]])endifcall MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657240))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set i=0set QPO=QPOset QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if Q00[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[Q00[i]])endifcall MultiboardReleaseItem(N8I)set i=1set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if Q00[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[Q00[i]])endifcall MultiboardReleaseItem(N8I)set i=2set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if Q00[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[Q00[i]])endifcall MultiboardReleaseItem(N8I)set i=3set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if Q00[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[Q00[i]])endifcall MultiboardReleaseItem(N8I)set i=4set QQO=Y92+i+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if Q00[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[Q00[i]])endifcall MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657237))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=Y92+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)if PJ0==BO[1]thencall MultiboardSetItemValue(N8I,Y62(PY0,1))elsecall MultiboardSetItemValue(N8I," ")endifcall MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QPO=QPO+1set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657236))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=Y92+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Y62(PX0[1],1))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=Y92set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657241))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=Y92+1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)if TimerGetElapsed(M)<15 thencall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657457))elseif PL0==1 thencall MultiboardSetItemValue(N8I,GetObjectName(1848657460))elseif PL0==2 thencall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657457))elsecall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657458))endifcall MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QPO=1set QQO=DJ1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemWidth(N8I,1.5)call MultiboardSetItemValue(N8I,"   "+C0[GetPlayerId(CO[1])]+(D80[GetPlayerId((CO[1]))])+"|r")call MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=DJ1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+" "+GetObjectName(1848657238))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set i=0set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PP0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PP0[i]])endifcall MultiboardReleaseItem(N8I)set i=1set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PP0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PP0[i]])endifcall MultiboardReleaseItem(N8I)set i=2set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PP0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PP0[i]])endifcall MultiboardReleaseItem(N8I)set i=3set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PP0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PP0[i]])endifcall MultiboardReleaseItem(N8I)set i=4set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if PP0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[PP0[i]])endifcall MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=DJ1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+" "+GetObjectName(1848657240))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set i=0set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if QI0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[QI0[i]])endifcall MultiboardReleaseItem(N8I)set i=1set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if QI0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[QI0[i]])endifcall MultiboardReleaseItem(N8I)set i=2set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if QI0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[QI0[i]])endifcall MultiboardReleaseItem(N8I)set i=3set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if QI0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[QI0[i]])endifcall MultiboardReleaseItem(N8I)set i=4set QQO=DJ1+i+1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemWidth(N8I,0.015)if QI0[i]>0 thencall MultiboardSetItemStyle(N8I,false,true)call MultiboardSetItemIcon(N8I,DS0[QI0[i]])endifcall MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=DJ1-2set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657237))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=DJ1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)if PJ0==CO[1]thencall MultiboardSetItemValue(N8I,Y62(PY0,2))elsecall MultiboardSetItemValue(N8I," ")endifcall MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QPO=QPO+1set QQO=DJ1-2set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657236))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=DJ1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,Y62(PX0[2],2))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QPO=QPO+2set QQO=DJ1-2set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)call MultiboardSetItemValue(N8I,"|c006699CC"+GetObjectName(1848657241))call MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)set QQO=DJ1-1set N8I=MultiboardGetItem(Q20,QPO,QQO)call MultiboardSetItemStyle(N8I,true,false)if TimerGetElapsed(M)<15 thencall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657457))elseif PL0==2 thencall MultiboardSetItemValue(N8I,GetObjectName(1848657460))elseif PL0==1 thencall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657457))elsecall MultiboardSetItemValue(N8I,"|c00555555"+GetObjectName(1848657458))endifcall MultiboardSetItemWidth(N8I,0.035)call MultiboardReleaseItem(N8I)return falseendfunctionfunction YA2 takes nothing returns nothinglocal integer QUO=12local integer U0O=14local trigger t=CreateTrigger()local integer ilocal multiboarditem N8Icall TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function Y82))set Q20=CreateMultiboard()call MultiboardSetItemsWidth(Q20,0.015)call MultiboardSetRowCount(Q20,QUO)call MultiboardSetColumnCount(Q20,U0O)call MultiboardSetTitleText(Q20,GetObjectName(1848658742))call MultiboardSetItemsStyle(Q20,false,false)call MultiboardMinimize(Q20,false)call MultiboardDisplay(Q20,true)set i=0loopexitwhen i>U0Oset N8I=MultiboardGetItem(Q20,0,i)call MultiboardSetItemWidth(N8I,0.015)call MultiboardReleaseItem(N8I)set i=i+1endloopset t=nullset N8I=nullendfunctionfunction YB2 takes nothing returns booleanlocal unit YC2=GetSoldUnit()local player p=GetOwningPlayer(YC2)local integer ilocal real xlocal real ylocal real aif GetUnitTypeId(YC2)==1747990094 and IsPlayerAlly(GetOwningPlayer(YC2),GetOwningPlayer(GetSellingUnit()))thenif K1[GetPlayerId(p)]!=null thencall PZI(p,GetObjectName(1848657459))call KillUnit(YC2)set YC2=nullset p=nullreturn falseendifset x=GetUnitX(GetSellingUnit())set y=GetUnitY(GetSellingUnit())set i=RPI(GetUnitTypeId(GetSellingUnit()))set a=GetUnitFacing(GetSellingUnit())call RemoveUnit(GetSellingUnit())call CreateUnit(p,i,x,y,a)endifif GetUnitTypeId(YC2)==1747990094 thencall KillUnit(YC2)endifif K1[GetPlayerId(BO[1])]!=null and K1[GetPlayerId(BO[2])]!=null and K1[GetPlayerId(BO[3])]!=null and K1[GetPlayerId(BO[4])]!=null and K1[GetPlayerId(BO[5])]!=null and K1[GetPlayerId(CO[1])]!=null and K1[GetPlayerId(CO[2])]!=null and K1[GetPlayerId(CO[3])]!=null and K1[GetPlayerId(CO[4])]!=null and K1[GetPlayerId(CO[5])]!=null thencall S0I(GetTriggeringTrigger())endifset YC2=nullset p=nullreturn falseendfunctionfunction YD2 takes nothing returns booleanset PW0=truecall S0I(GetTriggeringTrigger())call DestroyMultiboard(Q20)call P7O()call UHO()call UR1()return falseendfunctionfunction ModeCM_SpawnSound takes nothing returns booleancall S0I(GetTriggeringTrigger())call PlaySoundBJ(OE)return falseendfunctionfunction YE2 takes nothing returns booleanlocal trigger t=CreateTrigger()local integer BY1local integer BX1local string GW1local unit ulocal real xlocal real ylocal integer ilocal real dlocal real YF2=GetRectCenterX(O4)local real YG2=GetRectCenterY(O4)local real YH2=GetRectCenterX(S3)local real YZ2=GetRectCenterY(S3)set PL0=3set TP0=truecall S0I(GetTriggeringTrigger())set i=0loopexitwhen i==5set x=YF2-300+i*150set y=YG2set u=CreateUnit(BO[0],DT0[Q00[i]],x,y,270)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)call PanCameraToTimedForPlayer(BO[i+1],YF2,YG2,0)call CreateUnit(BO[i+1],1848651843,YF2,YG2,bj_UNIT_FACING)call SetPlayerState(BO[i+1],PLAYER_STATE_RESOURCE_GOLD,PH0[GetPlayerId(BO[i+1])]-250)set i=i+1endloopset i=0loopexitwhen i==5set x=YH2-300+i*150set y=YZ2set u=CreateUnit(CO[0],DT0[QI0[i]],x,y,270)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)call PanCameraToTimedForPlayer(CO[i+1],YH2,YZ2,0)call CreateUnit(CO[i+1],1848651843,YH2,YZ2,bj_UNIT_FACING)call SetPlayerState(CO[i+1],PLAYER_STATE_RESOURCE_GOLD,PH0[GetPlayerId(CO[i+1])]-250)set i=i+1endloopcall TriggerAddCondition(t,Condition(function YB2))call SuspendTimeOfDay(false)call EnableTrigger(EV0)call EnableTrigger(DN)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function YD2))set BL=90call VU2()call TZI()set t=nullset u=nullreturn falseendfunctionfunction YV2 takes integer YW2,integer i returns nothingcall TCI(DC0[i])if YW2==1 thenset Q00[Q10]=iset Q10=Q10+1elseset QI0[QO0]=iset QO0=QO0+1endifendfunctionfunction YX2 takes integer YW2 returns nothinglocal integer i=TYI()loopif R[i]==false thenset R[i]=truecall YV2(YW2,i)returnendifendloopendfunctionfunction YY2 takes integer YW2,integer i returns nothingcall FL1("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),DC0[i])call TCI(DC0[i])if YW2==1 thenset PR0[PQ0]=iset PQ0=PQ0+1elseset PP0[PU0]=iset PU0=PU0+1endifendfunctionfunction YJ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function YE2))call Y02(7)call MultiboardSetTitleText(Q20,GetObjectName(1848658742))call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YM2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YJ2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YN2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall Y02(6)call S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YM2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(YL2,"Sound\\Interface\\Rescue.wav")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659289))call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848659290)+"|r")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YS2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YN2))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YT2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall Y02(5)call S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YS2))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(YL2,"Sound\\Interface\\Rescue.wav")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659504))call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848659505)+"|r")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YR2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YT2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YP2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YR2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YQ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YP2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction YU2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall Y02(4)call S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YQ2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(YL2,"Sound\\Interface\\Rescue.wav")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659000))call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658995)+"|r")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J02 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function YU2))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction JI2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J02))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J12 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function JI2))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction JO2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall Y02(3)call S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J12))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(YL2,"Sound\\Interface\\Rescue.wav")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658996)+"|r")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J22 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function JO2))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J32 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J22))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J42 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>40 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YV2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YX2(YW2)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J32))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>40 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J52 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall Y02(2)call S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J42))set PY0=40set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659001))call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658997)+"|r")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J62 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J52))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PN0local player YL2=PM0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J62))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J82 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer YW2=PL0local player YK2=PM0local player YL2=PN0if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL or(GetTriggerEvalCount(t)>30 and PX0[YW2]==0)thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false thenset t=nullreturn falseendifif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL thencall YY2(YW2,GetUnitPointValue(GetSoldUnit()))call RemoveUnit(GetSoldUnit())elsecall YY2((YW2),-1)endifcall S0I(t)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J72))set PY0=30set PJ0=YL2set PL0=XL2()call SetPlayerState(YL2,PLAYER_STATE_RESOURCE_GOLD,250)call SetPlayerState(YK2,PLAYER_STATE_RESOURCE_GOLD,0)call PEI(YL2,"Sound\\Interface\\Rescue.wav")elseif GetTriggerEvalCount(t)>30 thenif PX0[YW2]>0 thenset PX0[YW2]=PX0[YW2]-1endifelseset PY0=PY0-1endifendifset t=nullset YL2=nullreturn falseendfunctionfunction J92 takes nothing returns booleanlocal trigger t=CreateTrigger()set PV0=truecall S0I(GetTriggeringTrigger())if PZ0==false thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(PM0)]+(D80[GetPlayerId((PM0))])+"|r "+GetObjectName(1848657217))endifset PJ0=PM0set PY0=30call SetPlayerState(PM0,PLAYER_STATE_RESOURCE_GOLD,250)call PEI(PM0,"Sound\\Interface\\Rescue.wav")call Y02(1)call QRI(bj_FORCE_ALL_PLAYERS,15.00,"|c006699CC"+GetObjectName(1848658998)+"|r")call MultiboardSetTitleText(Q20,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659009))call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J82))set t=nullreturn falseendfunctionfunction WU2 takes nothing returns nothinglocal trigger tlocal location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)local integer x=1local player ploopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZD1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZC1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set CN=trueset A3=falseset O3=falseset TP0=falseset RU0=falsecall SuspendTimeOfDay(true)call DisableTrigger(EV0)call DisableTrigger(DN)if O5I==false thencall OZ2()endifset PH0[GetPlayerId(BO[1])]=GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(BO[2])]=GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(BO[3])]=GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(BO[4])]=GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(BO[5])]=GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)set PH0[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)set PK0=GetRandomInt(1,2)set PZ0=falseset PL0=PK0if PK0==1 thenset PM0=BO[1]set PN0=CO[1]elseset PM0=CO[1]set PN0=BO[1]endifset PS0=1set PT0=2set PX0[1]=110set PX0[2]=110set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function J92))call YA2()call QRI(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName(1848657235))call QRI(bj_FORCE_ALL_PLAYERS,4.00,GetObjectName(1848657234))set t=nullset ZC1=nullset ZD1=nullset p=nullendfunctionfunction JA2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()set EN=truecall S0I(t)call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_MASKED,QQ0,QU0,700,false,false))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,QQ0,QU0,700,false,false))set t=nullreturn falseendfunctionfunction JB2 takes nothing returns nothinglocal integer i=0loopexitwhen i>UO0call RemoveUnit(U10[i])set i=i+1endloopendfunctionfunction JC2 takes real x,real y returns nothingset U10[UO0]=CreateUnit(Player(0),1747990089,x,y,0)set UO0=UO0+1endfunctionfunction JD2 takes string S,real XN2,real XS2,real XT2,real XR2,real XP2,boolean XQ2 returns nothingset MK=CreateImage(S,XN2,XS2,0,XT2-(XN2/2),XR2-(XS2/2),XP2,0,0,0,2)call SetImageRenderAlways(MK,true)call ShowImage(MK,XQ2)endfunctionfunction JE2 takes integer JF2,integer r,integer g,integer b,integer a,real x,real y,integer S5I returns nothingif StringLength(I2S(JF2))>1 thencall JD2("Fonts\\"+SubString(I2S(JF2),0,1)+".blp",90,90,x-20,y,0,true)call SetImageColor(MK,r,g,b,a)call SaveImageHandle(LY,(S5I),(158),(MK))call JD2("Fonts\\"+SubString(I2S(JF2),1,2)+".blp",90,90,x+20,y,0,true)call SetImageColor(MK,r,g,b,a)call SaveImageHandle(LY,(S5I),(159),(MK))elsecall JD2("Fonts\\0.blp",90,90,x-20,y,0,true)call SetImageColor(MK,r,g,b,a)call SaveImageHandle(LY,(S5I),(158),(MK))call JD2("Fonts\\"+SubString(I2S(JF2),0,1)+".blp",90,90,x+20,y,0,true)call SetImageColor(MK,r,g,b,a)call SaveImageHandle(LY,(S5I),(159),(MK))endifendfunctionfunction JG2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer DC1=(LoadInteger(LY,(S5I),(57)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer NPI=GetTriggerEvalCount(t)local integer JH2=DC1-NPIlocal image JZ2=(LoadImageHandle(LY,(S5I),(158)))local image JV2=(LoadImageHandle(LY,(S5I),(159)))local integer rlocal integer glocal integer blocal integer aif NPI>0 thencall ShowImage(JZ2,false)call DestroyImage(JZ2)call ShowImage(JV2,false)call DestroyImage(JV2)endifif NPI==DC1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif JH2<6 thenset r=255set g=0set b=0elseif GetLocalPlayer()==QM0 or GetLocalPlayer()==QN0 thenset r=D90[GetPlayerId(GetLocalPlayer())]set g=DA0[GetPlayerId(GetLocalPlayer())]set b=DB0[GetPlayerId(GetLocalPlayer())]elseset r=255set g=255set b=255endifif IsPlayerAlly(QM0,GetLocalPlayer())thenset a=255elseset a=125endifcall JE2(JH2,r,g,b,a,x,y,S5I)endifset t=nullset JZ2=nullset JV2=nullreturn falseendfunctionfunction JW2 takes integer DC1,real x,real y returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function JG2))call SaveInteger(LY,(S5I),(57),(DC1))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call TriggerEvaluate(t)set t=nullendfunctionfunction JX2 takes integer a,real x,real y,integer S5I returns nothingcall JD2("Fonts\\Y.blp",90,90,x-150,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(158),(MK))call JD2("Fonts\\O.blp",90,90,x-110,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(159),(MK))call JD2("Fonts\\U.blp",90,90,x-70,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(160),(MK))call JD2("Fonts\\R.blp",90,90,x-30,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(161),(MK))call JD2("Fonts\\T.blp",90,90,x+30,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(162),(MK))call JD2("Fonts\\U.blp",90,90,x+70,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(163),(MK))call JD2("Fonts\\R.blp",90,90,x+110,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(164),(MK))call JD2("Fonts\\N.blp",90,90,x+150,y,0,true)call SetImageColor(MK,255,0,0,a)call SaveImageHandle(LY,(S5I),(165),(MK))endfunctionfunction JY2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real xlocal real ylocal integer NPI=GetTriggerEvalCount(t)local image JZ2=(LoadImageHandle(LY,(S5I),(158)))local image JV2=(LoadImageHandle(LY,(S5I),(159)))local image JJ2=(LoadImageHandle(LY,(S5I),(160)))local image JK2=(LoadImageHandle(LY,(S5I),(161)))local image JL2=(LoadImageHandle(LY,(S5I),(162)))local image JM2=(LoadImageHandle(LY,(S5I),(163)))local image JN2=(LoadImageHandle(LY,(S5I),(164)))local image JS2=(LoadImageHandle(LY,(S5I),(165)))local integer rlocal integer glocal integer blocal integer alocal player p=(LoadPlayerHandle(LY,(S5I),(54)))if TII(p)thenset x=QQ0set y=QU0+250elseset x=U00set y=UI0+250endifif NPI>0 thencall ShowImage(JZ2,false)call DestroyImage(JZ2)call ShowImage(JV2,false)call DestroyImage(JV2)call ShowImage(JJ2,false)call DestroyImage(JJ2)call ShowImage(JK2,false)call DestroyImage(JK2)call ShowImage(JL2,false)call DestroyImage(JL2)call ShowImage(JM2,false)call DestroyImage(JM2)call ShowImage(JN2,false)call DestroyImage(JN2)call ShowImage(JS2,false)call DestroyImage(JS2)endifif NPI==20 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetLocalPlayer()==QM0 or GetLocalPlayer()==QN0 thenset a=255elseset a=0endifcall JX2(a,x,y,S5I)endifset t=nullset JZ2=nullset JV2=nullset JJ2=nullset JK2=nullset JL2=nullset JM2=nullset JN2=nullset JS2=nullset p=nullreturn falseendfunctionfunction JT2 takes player p returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function JY2))call SavePlayerHandle(LY,(S5I),(54),(p))call TriggerEvaluate(t)set t=nullendfunctionfunction JR2 takes player p,integer MLI,boolean randomed returns nothinglocal integer i=T0I(p)local real dif T3I(p)==false thenreturnendifif TII(p)thencall SetUnitPosition(QA0[MLI],QB0[i],QC0[i])set d=QDI(SMI(QA0[MLI])-0.3,0.5)call SetUnitScale(QA0[MLI],d,d,d)call SetUnitFacing(QA0[MLI],270)call UnitRemoveAbility(QA0[MLI],1097690998)elsecall SetUnitPosition(QA0[MLI],QD0[i],QE0[i])set d=QDI(SMI(QA0[MLI])-0.3,0.5)call SetUnitScale(QA0[MLI],d,d,d)call SetUnitFacing(QA0[MLI],90)call UnitRemoveAbility(QA0[MLI],1097690998)endifcall SetUnitColor(QA0[MLI],GetPlayerColor(p))call PauseUnit(QA0[MLI],true)call SetUnitOwner(QA0[MLI],p,true)set QP0[GetPlayerId(p)]=trueset Q90[MLI]=trueif TII(p)thenset K1[GetPlayerId(p)]=CreateUnit(p,DC0[Q80[MLI]],GetRectCenterX(O4),GetRectCenterY(O4),0)elseset K1[GetPlayerId(p)]=CreateUnit(p,DC0[Q80[MLI]],GetRectCenterX(S3),GetRectCenterY(S3),0)endifendfunctionfunction JP2 takes nothing returns integerlocal integer i=1loopexitwhen i>24if Q90[i]==false thenreturn iendifset i=i+1endloopreturn 0endfunctionfunction JQ2 takes player p returns nothinglocal integer i=1local boolean JU2=TII(p)loopexitwhen i==24if GetOwningPlayer(QA0[i])==BO[0]or GetOwningPlayer(QA0[i])==CO[0]thenif JU2 thencall SetUnitOwner(QA0[i],BO[0],false)elsecall SetUnitOwner(QA0[i],CO[0],false)endifendifset i=i+1endloopendfunctionfunction K02 takes player p,unit u returns nothinglocal integer a=80if GetLocalPlayer()==p thenset a=255endifcall SetUnitVertexColor(u,255,255,255,a)endfunctionfunction KI2 takes player p1,player p2 returns nothinglocal unit I01local real xlocal real ycall JT2(p1)call PEI(p1,"Sound\\Interface\\Rescue.wav")if TII(p1)thenif GetLocalPlayer()==p1 thencall PingMinimapEx(QV0,QW0,5,255,255,255,false)endifset I01=CreateUnit(p1,1848652353,QV0-250,QW0,0)call UnitApplyTimedLife(I01,1112820806,20)call UnitAddAbility(I01,1097625443)set U30[GetPlayerId(p1)]=I01call K02(p1,I01)if GetLocalPlayer()==p1 thencall ClearTextMessages()endifcall DisplayTimedTextToPlayer(p1,0,0,10," ")call DisplayTimedTextToPlayer(p1,0,0,10," ")call DisplayTimedTextToPlayer(p1,0,0,20,GetObjectName(1848653368))call DisplayTimedTextToPlayer(p1,0,0,10," ")elsecall JT2(p1)if GetLocalPlayer()==p1 thencall PingMinimapEx(QX0,QY0,5,255,255,255,false)endifset I01=CreateUnit(p1,1848652353,QV0-250,QW0,0)call SetUnitVertexColor(I01,255,255,255,175)call UnitApplyTimedLife(I01,1112820806,20)call UnitAddAbility(I01,1097625443)set U40[GetPlayerId(p1)]=I01call K02(p1,I01)if GetLocalPlayer()==p1 thencall ClearTextMessages()endifcall DisplayTimedTextToPlayer(p1,0,0,10," ")call DisplayTimedTextToPlayer(p1,0,0,10," ")call DisplayTimedTextToPlayer(p1,0,0,20,GetObjectName(1848653368))call DisplayTimedTextToPlayer(p1,0,0,10," ")endifif p2!=null thencall JT2(p2)call PEI(p2,"Sound\\Interface\\Rescue.wav")if TII(p2)thenif GetLocalPlayer()==p2 thencall PingMinimapEx(QV0,QW0,5,255,255,255,false)endifset I01=CreateUnit(p2,1848652353,QV0+250,QW0,0)call UnitApplyTimedLife(I01,1112820806,20)call UnitAddAbility(I01,1097625443)set U30[GetPlayerId(p2)]=I01call K02(p2,I01)if GetLocalPlayer()==p2 thencall ClearTextMessages()endifcall DisplayTimedTextToPlayer(p2,0,0,10," ")call DisplayTimedTextToPlayer(p2,0,0,10," ")call DisplayTimedTextToPlayer(p2,0,0,20,GetObjectName(1848653368))call DisplayTimedTextToPlayer(p2,0,0,10," ")elseif GetLocalPlayer()==p2 thencall PingMinimapEx(QX0,QY0,5,255,255,255,false)endifset I01=CreateUnit(p2,1848652353,QV0+250,QW0,0)call UnitApplyTimedLife(I01,1112820806,20)call UnitAddAbility(I01,1097625443)set U40[GetPlayerId(p2)]=I01call K02(p2,I01)if GetLocalPlayer()==p2 thencall ClearTextMessages()endifcall DisplayTimedTextToPlayer(p2,0,0,10," ")call DisplayTimedTextToPlayer(p2,0,0,10," ")call DisplayTimedTextToPlayer(p2,0,0,20,GetObjectName(1848653368))call DisplayTimedTextToPlayer(p2,0,0,10," ")endifendifset I01=nullendfunctionfunction K12 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer KO2=(LoadInteger(LY,(S5I),(25)))local player K22=QM0local player K32=QN0local integer iset QM0=nullset QN0=nullif KO2==0 thenif QS0==1 thenset QM0=BO[1]elseset QM0=CO[1]endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==1 thenif QS0==1 thenif U50==false thenset QM0=CO[1]set QN0=CO[2]elseset QM0=CO[1]set QN0=CO[1]endifelseif U50==false thenset QM0=BO[1]set QN0=BO[2]elseset QM0=BO[1]set QN0=BO[1]endifendifif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QN0)]+(D80[GetPlayerId((QN0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==2 thenif QS0==1 thenif U50==false thenset QM0=BO[2]set QN0=BO[3]elseset QM0=BO[1]set QN0=BO[1]endifelseif U50==false thenset QM0=CO[2]set QN0=CO[3]elseset QM0=CO[1]set QN0=CO[1]endifendifif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifif QP0[GetPlayerId(K32)]==false thencall JR2(K32,JP2(),true)endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QN0)]+(D80[GetPlayerId((QN0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==3 thenif QS0==1 thenif U50==false thenset QM0=CO[3]set QN0=CO[4]elseset QM0=CO[1]set QN0=CO[1]endifelseif U50==false thenset QM0=BO[3]set QN0=BO[4]elseset QM0=BO[1]set QN0=BO[1]endifendifif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifif QP0[GetPlayerId(K32)]==false thencall JR2(K32,JP2(),true)endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QN0)]+(D80[GetPlayerId((QN0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==4 thenif QS0==1 thenif U50==false thenset QM0=BO[4]set QN0=BO[5]elseset QM0=BO[1]set QN0=BO[1]endifelseif U50==false thenset QM0=CO[4]set QN0=CO[5]elseset QM0=CO[1]set QN0=CO[1]endifendifif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifif QP0[GetPlayerId(K32)]==false thencall JR2(K32,JP2(),true)endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QN0)]+(D80[GetPlayerId((QN0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==5 thenif QS0==1 thenif U50==false thenset QM0=CO[5]elseset QM0=CO[1]endifelseif U50==false thenset QM0=BO[5]elseset QN0=BO[1]endifendifif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifif QP0[GetPlayerId(K32)]==false thencall JR2(K32,JP2(),true)endifcall JQ2(QM0)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(QM0)]+(D80[GetPlayerId((QM0))])+"|r"+" "+GetObjectName(1848653364))call KI2(QM0,QN0)call JW2(20,QQ0,QU0)elseif KO2==6 thenif QP0[GetPlayerId(K22)]==false thencall JR2(K22,JP2(),true)endifcall SuspendTimeOfDay(false)endifif KO2==7 thenset QR0=trueendifif KO2==8 thencall JB2()set i=1loopexitwhen i>24call RemoveUnit(QA0[i])set i=i+1endloopcall QM1()call Z22(60)call UnitApplyTimedLife(Q70[1],1112820806,2)call UnitApplyTimedLife(Q70[2],1112820806,2)call UnitApplyTimedLife(Q70[3],1112820806,2)call UnitApplyTimedLife(Q70[4],1112820806,2)call UnitApplyTimedLife(Q70[5],1112820806,2)call UnitApplyTimedLife(Q70[6],1112820806,2)call UnitApplyTimedLife(Q70[7],1112820806,2)call UnitApplyTimedLife(Q70[8],1112820806,2)call UnitApplyTimedLife(Q70[9],1112820806,2)call UnitApplyTimedLife(Q70[10],1112820806,2)call UnitApplyTimedLife(Q70[11],1112820806,2)call UnitApplyTimedLife(Q70[12],1112820806,2)call S0I(U20)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,7,false)call TriggerAddCondition(t,Condition(function JA2))elsecall SaveInteger(LY,(S5I),(25),(KO2+1))endifset t=nullset K22=nullset K32=nullreturn falseendfunctionfunction K42 takes unit SFI returns integerlocal integer i=1loopexitwhen i>24if QA0[i]==SFI thenreturn iendifset i=i+1endloopreturn 0endfunctionfunction K52 takes nothing returns booleanlocal unit YC2=GetSoldUnit()local player p=GetOwningPlayer(YC2)call KillUnit(YC2)if QP0[GetPlayerId(p)]==true thencall PZI(p,GetObjectName(1848656951))set YC2=nullset p=nullreturn falseendifif p!=QM0 and p!=QN0 thencall PZI(p,GetObjectName(1848656722))set YC2=nullset p=nullreturn falseendifif GetUnitTypeId(YC2)==1747990094 thencall JR2(p,K42(GetSellingUnit()),false)call KillUnit(U30[GetPlayerId(p)])call KillUnit(U40[GetPlayerId(p)])endifset YC2=nullset p=nullreturn falseendfunctionfunction ModeRD_Selected takes nothing returns booleanlocal unit K62=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local player p=GetOwningPlayer(K62)if GetSpellAbilityId()==1093687874 and K42(P8I)!=0 thenif(p==QM0 or p==QN0)and QP0[GetPlayerId(p)]==false and Q90[K42(P8I)]==false thencall JR2(p,K42(P8I),false)call RemoveUnit(K62)endifendifset P8I=nullset p=nullreturn falseendfunctionfunction K72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5Ilocal integer i=1call S0I(t)call SuspendTimeOfDay(true)set QS0=GetRandomInt(1,2)call QRI(bj_FORCE_ALL_PLAYERS,15.00," ")if QS0==1 thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(BO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))elsecall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00," ")set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,20,true)call TriggerAddCondition(t,Condition(function K12))call SaveInteger(LY,(S5I),(25),(0))call TriggerEvaluate(t)set t=nullreturn falseendfunctionfunction ModeRD_SetCap takes nothing returns booleanif U50==false thenset U50=truecall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848657732))endifreturn falseendfunctionfunction X02 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=1local real xlocal real ylocal real alocal integer rlocal integer TJIlocal boolean K82=falselocal boolean K92=falselocal boolean KA2=falselocal boolean KB2=falselocal boolean KC2=falselocal boolean KD2=falselocal boolean KE2=falselocal boolean KF2=falselocal boolean KG2=falselocal boolean array KH2local player plocal real DJ1local boolean KZ2=falselocal real zset RU0=falseset U20=CreateTrigger()call TriggerAddCondition(U20,Condition(function K52))call PEI(GetLocalPlayer(),"Sound\\Interface\\Rescue.wav")set p=BO[1]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[2]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[3]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[4]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[5]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[1]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[2]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[3]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[4]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[5]call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function K72))set QT0=trueset BL=180set A3=falseset O3=falsecall UnitAddAbility(EI0,1097295983)call UnitAddAbility(E10,1097295983)call UnitAddAbility(EO0,1097295983)call UnitAddAbility(E20,1097295983)call UnitAddAbility(E70,1097295983)call UnitAddAbility(E80,1097295983)call UnitAddAbility(E90,1097295983)call UnitAddAbility(EA0,1097295983)call UnitAddAbility(E30,1097295983)call UnitAddAbility(E40,1097295983)call UnitAddAbility(E50,1097295983)call UnitAddAbility(E60,1097295983)call ShowUnit(EI0,false)call ShowUnit(E10,false)call ShowUnit(EO0,false)call ShowUnit(E20,false)call ShowUnit(E70,false)call ShowUnit(E80,false)call ShowUnit(E90,false)call ShowUnit(EA0,false)call ShowUnit(E30,false)call ShowUnit(E40,false)call ShowUnit(E50,false)call ShowUnit(E60,false)set i=1loopexitwhen i>24set TJI=RHI(true,true)if K82 thenset K82=falseset TJI=91elseif K92 thenset K92=falseset TJI=51elseif KA2 thenset KA2=falseset TJI=99elseif KB2 thenset KB2=falseif GetRandomInt(1,2)==1 thenset TJI=104elseset TJI=65endifelseif KC2 thenset KC2=falseset TJI=109elseif KD2 thenset KD2=falseset TJI=15elseif KE2 thenset KE2=falseset TJI=110elseif KF2 thenset KF2=falseelseif KG2 thenset KG2=falseendifif KH2[TJI]==false and((TJI)!=23)thenset KH2[TJI]=trueset Q80[i]=TJIset i=i+1endifendloopset Q70[1]=CreateUnit(BO[0],1848656963,QV0,QW0,0)set Q70[2]=CreateUnit(BO[1],1848656963,QV0,QW0,0)set Q70[3]=CreateUnit(BO[2],1848656963,QV0,QW0,0)set Q70[4]=CreateUnit(BO[3],1848656963,QV0,QW0,0)set Q70[5]=CreateUnit(BO[4],1848656963,QV0,QW0,0)set Q70[6]=CreateUnit(BO[5],1848656963,QV0,QW0,0)set Q70[7]=CreateUnit(CO[0],1848656963,QX0,QY0,0)set Q70[8]=CreateUnit(CO[1],1848656963,QX0,QY0,0)set Q70[9]=CreateUnit(CO[2],1848656963,QX0,QY0,0)set Q70[10]=CreateUnit(CO[3],1848656963,QX0,QY0,0)set Q70[11]=CreateUnit(CO[4],1848656963,QX0,QY0,0)set Q70[12]=CreateUnit(CO[5],1848656963,QX0,QY0,0)call PanCameraToTimedForPlayer(BO[1],QV0,QW0,0)call PanCameraToTimedForPlayer(BO[2],QV0,QW0,0)call PanCameraToTimedForPlayer(BO[3],QV0,QW0,0)call PanCameraToTimedForPlayer(BO[4],QV0,QW0,0)call PanCameraToTimedForPlayer(BO[5],QV0,QW0,0)call PanCameraToTimedForPlayer(CO[1],QV0,QW0,0)call PanCameraToTimedForPlayer(CO[2],QV0,QW0,0)call PanCameraToTimedForPlayer(CO[3],QV0,QW0,0)call PanCameraToTimedForPlayer(CO[4],QV0,QW0,0)call PanCameraToTimedForPlayer(CO[5],QV0,QW0,0)set QQ0=QV0set QU0=QW0set U00=QX0set UI0=QY0set QB0[1]=QV0+QK0*(-2)set QC0[1]=QW0+QL0set QB0[2]=QV0+QK0*(-1)set QC0[2]=QW0+QL0set QB0[3]=QV0+QK0*(0)set QC0[3]=QW0+QL0set QB0[4]=QV0+QK0*(1)set QC0[4]=QW0+QL0set QB0[5]=QV0+QK0*(2)set QC0[5]=QW0+QL0set QD0[1]=QV0+QK0*(-2)set QE0[1]=QW0-QL0set QD0[2]=QV0+QK0*(-1)set QE0[2]=QW0-QL0set QD0[3]=QV0+QK0*(0)set QE0[3]=QW0-QL0set QD0[4]=QV0+QK0*(1)set QE0[4]=QW0-QL0set QD0[5]=QV0+QK0*(2)set QE0[5]=QW0-QL0set QF0[1]=QX0+QK0*(-2)set QG0[1]=QY0+QL0set QF0[2]=QX0+QK0*(-1)set QG0[2]=QY0+QL0set QF0[3]=QX0+QK0*(0)set QG0[3]=QY0+QL0set QF0[4]=QX0+QK0*(1)set QG0[4]=QY0+QL0set QF0[5]=QX0+QK0*(2)set QG0[5]=QY0+QL0set QH0[1]=QX0+QK0*(-2)set QZ0[1]=QY0-QL0set QH0[2]=QX0+QK0*(-1)set QZ0[2]=QY0-QL0set QH0[3]=QX0+QK0*(0)set QZ0[3]=QY0-QL0set QH0[4]=QX0+QK0*(1)set QZ0[4]=QY0-QL0set QH0[5]=QX0+QK0*(2)set QZ0[5]=QY0-QL0set DJ1=QJ0set i=1loopexitwhen i>24if KZ2==false thenset KZ2=trueelseset KZ2=falseendifset a=i/I2R(24)*360.0set x=QV0+DJ1*Cos(a*bj_DEGTORAD)set y=QW0+DJ1*Sin(a*bj_DEGTORAD)set QA0[i]=CreateUnit(BO[0],DT0[Q80[i]],x,y,UEI(x,y,QV0,QW0))call JC2(x,y)if KZ2 thencall SetUnitColor(QA0[i],GetPlayerColor(CO[5]))elsecall SetUnitColor(QA0[i],GetPlayerColor(CO[4]))endifcall TriggerRegisterUnitEvent(U20,QA0[i],EVENT_UNIT_SELL)set i=i+1endloopcall TZI()set t=nullset p=nullendfunctionfunction KV2 takes nothing returns booleanlocal unit YC2=GetSoldUnit()local player p=GetOwningPlayer(YC2)local integer ilocal real xlocal real ylocal real aif GetUnitTypeId(YC2)==1747990094 and IsPlayerAlly(GetOwningPlayer(YC2),GetOwningPlayer(GetSellingUnit()))thenif K1[GetPlayerId(p)]!=null thencall PZI(p,GetObjectName(1848657459))call KillUnit(YC2)set YC2=nullset p=nullreturn falseendifset x=GetUnitX(GetSellingUnit())set y=GetUnitY(GetSellingUnit())set i=RPI(GetUnitTypeId(GetSellingUnit()))set a=GetUnitFacing(GetSellingUnit())call RemoveUnit(GetSellingUnit())call CreateUnit(p,i,x,y,a)endifif GetUnitTypeId(YC2)==1747990094 thencall KillUnit(YC2)endifif K1[GetPlayerId(BO[1])]!=null and K1[GetPlayerId(BO[2])]!=null and K1[GetPlayerId(BO[3])]!=null and K1[GetPlayerId(BO[4])]!=null and K1[GetPlayerId(BO[5])]!=null and K1[GetPlayerId(CO[1])]!=null and K1[GetPlayerId(CO[2])]!=null and K1[GetPlayerId(CO[3])]!=null and K1[GetPlayerId(CO[4])]!=null and K1[GetPlayerId(CO[5])]!=null thencall S0I(GetTriggeringTrigger())endifset YC2=nullset p=nullreturn falseendfunctionfunction KW2 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer BY1local integer BX1local string GW1local unit ulocal real xlocal real ylocal integer ilocal real dlocal real YF2=GetRectCenterX(O4)+125local real YG2=GetRectCenterY(O4)+75local real YH2=GetRectCenterX(S3)+100local real YZ2=GetRectCenterY(S3)set TP0=trueset i=1loopexitwhen i>5set x=YF2-290+(i-1)*100set y=YG2call CreateUnit(BO[i+1],1848651843,YF2,YG2,bj_UNIT_FACING)set u=CreateUnit(BO[0],DT0[UH0[i+2]],x,y,270)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)call PanCameraToTimedForPlayer(BO[i],YF2,YG2,0)set i=i+1endloopset i=1loopexitwhen i>5set x=YH2-290+(i-1)*100set y=YZ2call CreateUnit(CO[i+1],1848651843,YH2,YZ2,bj_UNIT_FACING)set u=CreateUnit(CO[0],DT0[UZ0[i+2]],x,y,270)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)call PanCameraToTimedForPlayer(CO[i],YH2,YZ2,0)set i=i+1endloopcall TriggerAddCondition(t,Condition(function KV2))call SuspendTimeOfDay(false)call EnableTrigger(EV0)call EnableTrigger(DN)set BL=90call VU2()set t=nullset u=nullendfunctionfunction KX2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()set EN=truecall S0I(t)call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_MASKED,PC0,PD0,700,false,false))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_MASKED,PC0,PD0,700,false,false))set t=nullreturn falseendfunctionfunction KY2 takes string S,real XN2,real XS2,real XT2,real XR2,real XP2,boolean XQ2 returns nothingset MK=CreateImage(S,XN2,XS2,0,XT2-(XN2/2),XR2-(XS2/2),XP2,0,0,0,2)call SetImageRenderAlways(MK,true)call ShowImage(MK,XQ2)endfunctionfunction KJ2 takes string KK2,integer r,integer g,integer b,integer a,real x,real y returns imagecall KY2("Fonts\\"+KK2+".blp",60,60,x-20,y,0,true)call SetImageColor(MK,r,g,b,a)return MKendfunctionfunction KL2 takes boolean KM2,boolean KN2 returns nothinglocal integer KS2local integer KT2local integer KR2local integer KP2local integer KQ2local integer KU2local integer L02local integer LI2local integer c1local integer c2local integer a=0set KS2=UE0[1]set KT2=KS2/60set KR2=(KS2-KT2*60)/10set KP2=KS2-KT2*60-KR2*10set KQ2=UE0[2]set KU2=KQ2/60set L02=(KQ2-KU2*60)/10set LI2=KQ2-KU2*60-L02*10if KM2==false thencall ShowImage(UN0,false)call DestroyImage(UN0)call ShowImage(US0,false)call DestroyImage(US0)call ShowImage(UT0,false)call DestroyImage(UT0)call ShowImage(UR0,false)call DestroyImage(UR0)call ShowImage(UP0,false)call DestroyImage(UP0)call ShowImage(UQ0,false)call DestroyImage(UQ0)call ShowImage(UU0,false)call DestroyImage(UU0)call ShowImage(I0I,false)call DestroyImage(I0I)call ShowImage(III,false)call DestroyImage(III)call ShowImage(I1I,false)call DestroyImage(I1I)call ShowImage(IOI,false)call DestroyImage(IOI)call ShowImage(I2I,false)call DestroyImage(I2I)call ShowImage(I3I,false)call DestroyImage(I3I)call ShowImage(I4I,false)call DestroyImage(I4I)call ShowImage(I5I,false)call DestroyImage(I5I)call ShowImage(I6I,false)call DestroyImage(I6I)endifif KN2==false thenset c1=255set c2=255if UD0==1 thenif IsPlayerAlly(BO[1],GetLocalPlayer())thenset a=255set c1=0endifelseif IsPlayerAlly(CO[1],GetLocalPlayer())thenset a=255set c2=0endifendifset UN0=KJ2(I2S(KT2),255,c1,c1,255,PC0-40,PD0+300)set US0=KJ2("58",255,c1,c1,255,PC0-0,PD0+300)set UT0=KJ2(I2S(KR2),255,c1,c1,255,PC0+20,PD0+300)set UR0=KJ2(I2S(KP2),255,c1,c1,255,PC0+60,PD0+300)set UP0=KJ2(I2S(KU2),255,c2,c2,255,PC0-40,PD0-300)set UQ0=KJ2("58",255,c2,c2,255,PC0-0,PD0-300)set UU0=KJ2(I2S(L02),255,c2,c2,255,PC0+20,PD0-300)set I0I=KJ2(I2S(LI2),255,c2,c2,255,PC0+60,PD0-300)if UF0==1 or UF0==2 or UF0==3 or UF0==4 thenset III=KJ2("Y",255,0,0,a,PC0-130,PD0)set I1I=KJ2("O",255,0,0,a,PC0-90,PD0)set IOI=KJ2("U",255,0,0,a,PC0-50,PD0)set I2I=KJ2("R",255,0,0,a,PC0-10,PD0)set I3I=KJ2("B",255,0,0,a,PC0+70,PD0)set I4I=KJ2("A",255,0,0,a,PC0+110,PD0)set I5I=KJ2("N",255,0,0,a,PC0+150,PD0)set I6I=KJ2("K",255,0,0,0,PC0+170,PD0)elseset III=KJ2("Y",255,0,0,a,PC0-150,PD0)set I1I=KJ2("O",255,0,0,a,PC0-110,PD0)set IOI=KJ2("U",255,0,0,a,PC0-70,PD0)set I2I=KJ2("R",255,0,0,a,PC0-30,PD0)set I3I=KJ2("P",255,0,0,a,PC0+50,PD0)set I4I=KJ2("I",255,0,0,a,PC0+90,PD0)set I5I=KJ2("C",255,0,0,a,PC0+130,PD0)set I6I=KJ2("K",255,0,0,a,PC0+170,PD0)endifendifendfunctionfunction L12 takes nothing returns nothinglocal integer i=0loopexitwhen i>UA0call RemoveUnit(UB0[i])set i=i+1endloopendfunctionfunction LO2 takes real x,real y returns nothingset UB0[UA0]=CreateUnit(Player(0),1747990089,x,y,0)set UA0=UA0+1endfunctionfunction L22 takes integer L32,boolean L42 returns nothinglocal player plocal real dset UG0[L32]=trueset UL0[UD0]=UL0[UD0]-1if UD0==1 thenset p=BO[1]set UV0=UV0+1set UH0[UV0]=U70[L32]if UV0<3 thencall UnitAddAbility(U90[L32],1097167980)call UnitAddAbility(U90[L32],1097625443)endifcall SetUnitPosition(U90[L32],UX0[UV0],UY0[UV0])set d=RMaxBJ(SMI(U90[L32])-0.3,0.5)call LO2(UX0[UV0],UY0[UV0])call SetUnitScale(U90[L32],d,d,d)call SetUnitFacing(U90[L32],270)if L42==false thenif UF0==1 or UF0==2 or UF0==3 or UF0==4 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657973)+" "+GetUnitName(U90[L32]))call FL1("Ban"+I2S(GetPlayerId(p)),DC0[U70[L32]])elsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657974)+" "+GetUnitName(U90[L32]))call FL1("Pick"+I2S(GetPlayerId(p)),DC0[U70[L32]])endifelseif UF0==1 or UF0==2 or UF0==3 or UF0==4 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657975)+" "+GetUnitName(U90[L32]))call FL1("Ban"+I2S(GetPlayerId(p)),DC0[U70[L32]])elsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657976)+" "+GetUnitName(U90[L32]))call FL1("Pick"+I2S(GetPlayerId(p)),DC0[U70[L32]])endifendifelseset p=CO[1]set UW0=UW0+1set UZ0[UW0]=U70[L32]if UW0<3 thencall UnitAddAbility(U90[L32],1097167980)call UnitAddAbility(U90[L32],1097625443)endifcall SetUnitPosition(U90[L32],UJ0[UW0],UK0[UW0])set d=RMaxBJ(SMI(U90[L32])-0.3,0.5)call LO2(UJ0[UW0],UK0[UW0])call SetUnitScale(U90[L32],d,d,d)call SetUnitFacing(U90[L32],90)if L42==false thenif UF0==1 or UF0==2 or UF0==3 or UF0==4 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657973)+" "+GetUnitName(U90[L32]))call FL1("Ban"+I2S(GetPlayerId(p)),DC0[U70[L32]])elsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657974)+" "+GetUnitName(U90[L32]))call FL1("Pick"+I2S(GetPlayerId(p)),DC0[U70[L32]])endifelseif UF0==1 or UF0==2 or UF0==3 or UF0==4 thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657975)+" "+GetUnitName(U90[L32]))call FL1("Ban"+I2S(GetPlayerId(p)),DC0[U70[L32]])elsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,C0[GetPlayerId(p)]+(D80[GetPlayerId((p))])+"|r "+GetObjectName(1848657976)+" "+GetUnitName(U90[L32]))call FL1("Pick"+I2S(GetPlayerId(p)),DC0[U70[L32]])endifendifendifcall PauseUnit(U90[L32],true)call SetUnitOwner(U90[L32],p,true)endfunctionfunction L52 takes unit SFI returns integerlocal integer i=1loopexitwhen i>28if U90[i]==SFI thenreturn iendifset i=i+1endloopreturn 0endfunctionfunction L62 takes nothing returns nothinglocal integer iloopset i=GetRandomInt(1,28)exitwhen UG0[i]==falseendloopcall L22(i,true)endfunctionfunction L72 takes nothing returns booleanlocal unit YC2=GetSoldUnit()local player p=GetOwningPlayer(YC2)local integer id=GetPlayerId(p)local player L82if UD0==1 thenset L82=BO[1]elseset L82=CO[1]endifcall KillUnit(YC2)if UM0 or UL0[UD0]<1 or p!=L82 thencall PZI(p,GetObjectName(1848656722))elseif GetUnitTypeId(YC2)==1747990094 thencall L22(L52(GetSellingUnit()),false)endifset YC2=nullreturn falseendfunctionfunction L92 takes nothing returns booleanlocal integer i=1local trigger tcall S0I(GetTriggeringTrigger())loopexitwhen i>28call RemoveUnit(U90[i])set i=i+1endloopcall SuspendTimeOfDay(false)call L12()call QM1()call Z22(90)call UnitApplyTimedLife(U80[1],1112820806,2)call UnitApplyTimedLife(U80[2],1112820806,2)call UnitApplyTimedLife(U80[3],1112820806,2)call UnitApplyTimedLife(U80[4],1112820806,2)call UnitApplyTimedLife(U80[5],1112820806,2)call UnitApplyTimedLife(U80[6],1112820806,2)call UnitApplyTimedLife(U80[7],1112820806,2)call UnitApplyTimedLife(U80[8],1112820806,2)call UnitApplyTimedLife(U80[9],1112820806,2)call UnitApplyTimedLife(U80[10],1112820806,2)call UnitApplyTimedLife(U80[11],1112820806,2)call UnitApplyTimedLife(U80[12],1112820806,2)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,7,false)call TriggerAddCondition(t,Condition(function KX2))set t=nullcall KW2()return falseendfunctionfunction LA2 takes nothing returns booleanlocal integer ilocal trigger tlocal force flocal string c="|c006699CC"set UE0[UD0]=IMaxBJ(UE0[UD0]-1,0)call KL2(false,false)if UL0[UD0]<1 thenif UD0==1 thencall PEI(BO[1],"Sound\\Interface\\Rescue.wav")call PEI(BO[2],"Sound\\Interface\\Rescue.wav")call PEI(BO[3],"Sound\\Interface\\Rescue.wav")call PEI(BO[4],"Sound\\Interface\\Rescue.wav")call PEI(BO[5],"Sound\\Interface\\Rescue.wav")elsecall PEI(CO[1],"Sound\\Interface\\Rescue.wav")call PEI(CO[2],"Sound\\Interface\\Rescue.wav")call PEI(CO[3],"Sound\\Interface\\Rescue.wav")call PEI(CO[4],"Sound\\Interface\\Rescue.wav")call PEI(CO[5],"Sound\\Interface\\Rescue.wav")endifset UF0=UF0+1if UD0==1 thenset UD0=2set f=AOelseset UD0=1set f=OOendifset UE0[UD0]=IMaxBJ(UE0[UD0],6)if UF0==1 or UF0==2 or UF0==3 or UF0==4 thenset UL0[UD0]=1call QRI(f,15,c+GetObjectName(1848657970)+"|r")elseif UF0==5 thenset UL0[UD0]=1call QRI(f,15,c+GetObjectName(1848657971)+"|r")elseif UF0==6 or UF0==7 or UF0==8 or UF0==9 thenset UL0[UD0]=2call QRI(f,15,c+GetObjectName(1848657972)+"|r")elseif UF0==10 thenset UL0[UD0]=1call QRI(f,15,c+GetObjectName(1848657971)+"|r")elsecall KL2(false,true)call S0I(GetTriggeringTrigger())call S0I(U60)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function L92))set t=nullcall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848657977))endifelseif UE0[UD0]==0 thencall L62()endifreturn falseendfunctionfunction LB2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local force flocal string c="|c006699CC"call S0I(t)set UC0=GetRandomInt(1,2)call QRI(bj_FORCE_ALL_PLAYERS,15.00," ")if UC0==1 thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(BO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))elsecall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00," ")set UD0=UC0set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function LA2))set UE0[1]=150set UE0[2]=150set UF0=1set UL0[UD0]=1call KL2(true,false)if UD0==1 thenset f=OOelseset f=AOendifcall QRI(f,15,c+GetObjectName(1848657970)+"|r")set UM0=falseset t=nullreturn falseendfunctionfunction XH2 takes nothing returns nothinglocal integer ilocal player plocal boolean KZ2=falselocal real alocal real xlocal real ylocal trigger tlocal integer TJIlocal boolean K82=falselocal boolean K92=falselocal boolean KA2=falselocal boolean KB2=falselocal boolean KC2=falselocal boolean KD2=falselocal boolean KE2=falselocal boolean KF2=falselocal boolean KG2=falselocal integer zlocal string c="|c006699CC"local boolean array KH2call OZ2()set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15,false)call TriggerAddCondition(t,Condition(function LB2))set t=nullset UD0=-1set RU0=falseset BN=trueset A3=falseset O3=falseset TP0=falsecall PEI(GetLocalPlayer(),"Sound\\Interface\\Rescue.wav")call SuspendTimeOfDay(true)set U60=CreateTrigger()call UnitAddAbility(EI0,1097295983)call UnitAddAbility(E10,1097295983)call UnitAddAbility(EO0,1097295983)call UnitAddAbility(E20,1097295983)call UnitAddAbility(E70,1097295983)call UnitAddAbility(E80,1097295983)call UnitAddAbility(E90,1097295983)call UnitAddAbility(EA0,1097295983)call UnitAddAbility(E30,1097295983)call UnitAddAbility(E40,1097295983)call UnitAddAbility(E50,1097295983)call UnitAddAbility(E60,1097295983)set p=BO[1]set U80[1]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[2]set U80[2]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[3]set U80[3]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[4]set U80[4]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=BO[5]set U80[5]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[1]set U80[6]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[2]set U80[7]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[3]set U80[8]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[4]set U80[9]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set p=CO[5]set U80[10]=CreateUnit(p,1848656963,PC0,PD0,0)call PanCameraToTimedForPlayer(p,PC0,PD0,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)set UX0[1]=PC0+I8I*(-3.5)set UY0[1]=PD0+I9Iset UX0[2]=PC0+I8I*(3.5)set UY0[2]=PD0+I9Iset UX0[3]=PC0+I8I*(-2)set UY0[3]=PD0+I9Iset UX0[4]=PC0+I8I*(-1)set UY0[4]=PD0+I9Iset UX0[5]=PC0+I8I*(0)set UY0[5]=PD0+I9Iset UX0[6]=PC0+I8I*(1)set UY0[6]=PD0+I9Iset UX0[7]=PC0+I8I*(2)set UY0[7]=PD0+I9Iset UJ0[1]=PC0+I8I*(-3.5)set UK0[1]=PD0-I9Iset UJ0[2]=PC0+I8I*(3.5)set UK0[2]=PD0-I9Iset UJ0[3]=PC0+I8I*(-2)set UK0[3]=PD0-I9Iset UJ0[4]=PC0+I8I*(-1)set UK0[4]=PD0-I9Iset UJ0[5]=PC0+I8I*(0)set UK0[5]=PD0-I9Iset UJ0[6]=PC0+I8I*(1)set UK0[6]=PD0-I9Iset UJ0[7]=PC0+I8I*(2)set UK0[7]=PD0-I9Icall UPI(PC0,PD0,600)set i=1loopexitwhen i>28set TJI=RHI(true,true)if K82 thenset K82=falseset TJI=50elseif K92 thenset K92=falseset TJI=51elseif KA2 thenset KA2=falseset TJI=104elseif KB2 thenset KB2=falseset TJI=65elseif KC2 thenset KC2=falseset TJI=49elseif KD2 thenset KD2=falseif GetRandomInt(1,2)==1 thenset TJI=16elseset TJI=86endifelseif KE2 thenset KE2=falseif GetRandomInt(1,2)==1 thenset TJI=73elseset TJI=83endifelseif KF2 thenset KF2=falseelseif KG2 thenset KG2=falseendifif KH2[TJI]==false thenset KH2[TJI]=trueset U70[i]=TJIcall FL1("Pool"+I2S(i),DC0[U70[i]])if KZ2==false thenset KZ2=trueelseset KZ2=falseendifset a=(i/I2R(28))*360.0set x=PC0+I7I*Cos(a*bj_DEGTORAD)set y=PD0+I7I*Sin(a*bj_DEGTORAD)set U90[i]=CreateUnit(BO[0],DT0[U70[i]],x,y,UEI(x,y,PC0,PD0))call SetUnitPathing(U90[i],false)call SetUnitX(U90[i],x)call SetUnitY(U90[i],y)call LO2(x,y)if KZ2 thencall SetUnitColor(U90[i],GetPlayerColor(CO[5]))elsecall SetUnitColor(U90[i],GetPlayerColor(CO[4]))endifset UG0[i]=falsecall TriggerRegisterUnitEvent(U60,U90[i],EVENT_UNIT_SELL)set i=i+1endifendloopcall TriggerAddCondition(U60,Condition(function L72))call TZI()endfunctionfunction LC2 takes player p,integer SJI returns nothinglocal integer i=1loopexitwhen i>5if p!=BO[i]thencall SetPlayerTechMaxAllowed(BO[i],SJI,0)endifif p!=CO[i]thencall SetPlayerTechMaxAllowed(CO[i],SJI,0)endifset i=i+1endloopendfunctionfunction ModeSD_Chosen takes nothing returns booleanlocal string DC2=GetEventPlayerChatString()local integer a=S2I(SubString(DC2,6,StringLength(DC2)))local integer SJIlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local location ZC1=GetRectCenter(F4)local location ZD1=GetRectCenter(E4)local player p=GetTriggerPlayer()if a==1 thenset SJI=(LoadInteger(LY,(S5I),(166)))elseif a==2 thenset SJI=(LoadInteger(LY,(S5I),(167)))elseif a==3 thenset SJI=(LoadInteger(LY,(S5I),(168)))elsecall RemoveLocation(ZC1)call RemoveLocation(ZD1)set ZC1=nullset ZD1=nullreturn falseendifif GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)>=250 thenif TII(p)thenset K1[GetPlayerId(p)]=CreateUnitAtLoc(p,DC0[SJI],ZC1,0)elseset K1[GetPlayerId(p)]=CreateUnitAtLoc(p,DC0[SJI],ZD1,0)endifcall A31(p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-250)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall PZI(p,GetObjectName(1848652595))endifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set ZC1=nullset ZD1=nullset t=nullset p=nullreturn falseendfunctionfunction LD2 takes integer LE2 returns integerlocal integer R4Oif LE2==1 thenset R4O=GetUnitPointValueByType(DZ0[GetRandomInt(1,DV0)])elseif LE2==2 thenset R4O=GetUnitPointValueByType(DW0[GetRandomInt(1,DX0)])elseif LE2==3 thenset R4O=GetUnitPointValueByType(DY0[GetRandomInt(1,DJ0)])endifreturn R4Oendfunctionfunction LF2 takes integer LG2,integer LH2,integer LE2 returns integerlocal integer RBIlocal integer RCIlocal integer R4Oset R4O=LD2(LE2)if F2 and LG2!=R4O and LH2!=R4O thenreturn R4Oendifloopexitwhen R[R4O]==false and LG2!=R4O and LH2!=R4Oset R4O=LD2(LE2)endloopset R[R4O]=truereturn R4Oendfunctionfunction XI2 takes nothing returns nothinglocal player plocal integer i=1local integer LZ2local integer LV2local integer LW2local trigger tlocal integer S5Iset IAI=trueset BL=120set O3=falseset A3=falsecall PauseUnit(EI0,true)call PauseUnit(E10,true)call PauseUnit(EO0,true)call PauseUnit(E20,true)call PauseUnit(E30,true)call PauseUnit(E40,true)call PauseUnit(E50,true)call PauseUnit(E60,true)call PauseUnit(E70,true)call PauseUnit(E80,true)call PauseUnit(E90,true)call PauseUnit(EA0,true)loopexitwhen i>5set p=BO[i]set LZ2=0set LV2=0set LW2=0if T3I(p)thencall UnitAddAbility(D30[GetPlayerId(p)],1093743686)call UnitAddAbility(D30[GetPlayerId(p)],1093743685)call UnitAddAbility(D30[GetPlayerId(p)],1093743688)set LZ2=LF2(LZ2,LV2,1)set LV2=LF2(LZ2,LV2,2)set LW2=LF2(LZ2,LV2,3)call AddUnitToStock(D30[GetPlayerId(p)],DC0[LZ2],1,1)call LC2(p,DC0[LZ2])call AddUnitToStock(D30[GetPlayerId(p)],DC0[LV2],1,1)call LC2(p,DC0[LV2])call AddUnitToStock(D30[GetPlayerId(p)],DC0[LW2],1,1)call LC2(p,DC0[LW2])call ClearSelectionForPlayer(p)call SelectUnitAddForPlayer(D30[GetPlayerId(p)],p)call PanCameraToTimedForPlayer(p,GetRectCenterX(O4),GetRectCenterY(O4),0)call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15,"|cff99ccff"+GetObjectName(1848657206)+"|r")call DisplayTimedTextToPlayer(p,0,U2,15," ")endifset p=CO[i]set LZ2=0set LV2=0set LW2=0if T3I(p)thencall UnitAddAbility(D30[GetPlayerId(p)],1093743686)call UnitAddAbility(D30[GetPlayerId(p)],1093743685)call UnitAddAbility(D30[GetPlayerId(p)],1093743688)set LZ2=LF2(LZ2,LV2,1)set LV2=LF2(LZ2,LV2,2)set LW2=LF2(LZ2,LV2,3)call AddUnitToStock(D30[GetPlayerId(p)],DC0[LZ2],1,1)call LC2(p,DC0[LZ2])call AddUnitToStock(D30[GetPlayerId(p)],DC0[LV2],1,1)call LC2(p,DC0[LV2])call AddUnitToStock(D30[GetPlayerId(p)],DC0[LW2],1,1)call LC2(p,DC0[LW2])call ClearSelectionForPlayer(p)call SelectUnitAddForPlayer(D30[GetPlayerId(p)],p)call PanCameraToTimedForPlayer(p,GetRectCenterX(S3),GetRectCenterY(S3),0)call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15," ")call DisplayTimedTextToPlayer(p,0,U2,15,"|cff99ccff"+GetObjectName(1848657206)+"|r")call DisplayTimedTextToPlayer(p,0,U2,15," ")endifset i=i+1endloopset p=nullset t=nullendfunctionfunction LX2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer O91=(LoadInteger(LY,(S5I),(55)))local player plocal integer TJIlocal location ZC1=GetRectCenter(O4)local location ZD1=GetRectCenter(S3)if O91<6 thenset p=BO[O91]elseif O91<11 thenset p=CO[O91-5]endifif O91>10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if X0==false thenset A3=trueendifelseif O91<6 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[GetPlayerId(p)]=nullif T3I(p)thenloopexitwhen K1[GetPlayerId(p)]!=nullset TJI=TYI()if R[TJI]==false thenif not F2 thenset R[TJI]=trueendifset K1[GetPlayerId(p)]=CreateUnitAtLoc(p,DC0[TJI],ZC1,bj_UNIT_FACING)endifendloopendifelseif O91<11 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[GetPlayerId(p)]=nullif T3I(p)thenloopexitwhen K1[GetPlayerId(p)]!=nullset TJI=TYI()if R[TJI]==false thenif not F2 thenset R[TJI]=trueendifset K1[GetPlayerId(p)]=CreateUnitAtLoc(p,DC0[TJI],ZD1,bj_UNIT_FACING)endifendloopendifendifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set ZC1=nullset ZD1=nullset p=nullset t=nullreturn falseendfunctionfunction WM2 takes nothing returns nothinglocal location ZC1=GetRectCenter(O4)local location ZD1=GetRectCenter(S3)local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)local integer TGI=1local integer THI=5local integer TJIlocal trigger tset Y0=trueset O3=falseif not F2 thencall TZI()endifset T0=400call PanCameraToTimedLocForPlayer(BO[1],LY2,0)call PanCameraToTimedLocForPlayer(BO[2],LY2,0)call PanCameraToTimedLocForPlayer(BO[3],LY2,0)call PanCameraToTimedLocForPlayer(BO[4],LY2,0)call PanCameraToTimedLocForPlayer(BO[5],LY2,0)call PanCameraToTimedLocForPlayer(CO[1],LJ2,0)call PanCameraToTimedLocForPlayer(CO[2],LJ2,0)call PanCameraToTimedLocForPlayer(CO[3],LJ2,0)call PanCameraToTimedLocForPlayer(CO[4],LJ2,0)call PanCameraToTimedLocForPlayer(CO[5],LJ2,0)if Y2 thenloopset TJI=TYI()exitwhen R[TJI]==falseendloopif TII(WO)thenset K1[GetPlayerId(WO)]=CreateUnit(WO,DC0[TJI],GetLocationX(ZC1),GetLocationY(ZC1),270)elseset K1[GetPlayerId(WO)]=CreateUnit(WO,DC0[TJI],GetLocationX(ZD1),GetLocationY(ZD1),270)endifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)set ZC1=nullset ZD1=nullset LY2=nullset LJ2=nullset t=nullreturnendifset A3=falseset t=CreateTrigger()call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddCondition(t,Condition(function LX2))call SaveInteger(LY,(GetHandleId(t)),(55),(1))call RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)set ZC1=nullset ZD1=nullset LY2=nullset LJ2=nullset t=nullendfunctionfunction LK2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()call S0I(t)set I3=trueset t=nullreturn falseendfunctionfunction LL2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local trigger LM2=(LoadTriggerHandle(LY,(S5I),(35)))local integer ilocal integer xlocal integer TJIlocal integer LN2=T8I(OO)local integer LS2=T8I(AO)local location ZC1=GetRectCenter(F4)local location ZD1=GetRectCenter(E4)local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)call S0I(LM2)call FlushChildHashtable(LY,(S5I))call S0I(t)set IVI=(LoadInteger(LY,(2001),(126)))set IWI=(LoadInteger(LY,(2001),(127)))set IXI=(LoadInteger(LY,(2001),(128)))set i=1loopexitwhen i>LN2set IZI[i]=ICI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=ICI[1]elseif LN2==2 thenset IZI[1]=ICI[2]set IZI[2]=ICI[1]elseif LN2==3 thenset IZI[1]=ICI[3]set IZI[2]=ICI[1]set IZI[3]=ICI[2]elseif LN2==4 thenset IZI[1]=ICI[4]set IZI[2]=ICI[3]set IZI[3]=ICI[2]set IZI[4]=ICI[1]elseif LN2==5 thenset IZI[1]=ICI[5]set IZI[2]=ICI[4]set IZI[3]=ICI[1]set IZI[4]=ICI[2]set IZI[5]=ICI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=ICI[1]elseif LN2==2 thenset IZI[1]=ICI[2]set IZI[2]=ICI[1]elseif LN2==3 thenset IZI[1]=ICI[2]set IZI[2]=ICI[3]set IZI[3]=ICI[1]elseif LN2==4 thenset IZI[1]=ICI[3]set IZI[2]=ICI[1]set IZI[3]=ICI[4]set IZI[4]=ICI[2]elseif LN2==5 thenset IZI[1]=ICI[4]set IZI[2]=ICI[3]set IZI[3]=ICI[2]set IZI[4]=ICI[5]set IZI[5]=ICI[1]endifelseif LN2==1 thenset IZI[1]=ICI[1]elseif LN2==2 thenset IZI[1]=ICI[1]set IZI[2]=ICI[2]elseif LN2==3 thenset IZI[1]=ICI[3]set IZI[2]=ICI[2]set IZI[3]=ICI[1]elseif LN2==4 thenset IZI[1]=ICI[2]set IZI[2]=ICI[4]set IZI[3]=ICI[3]set IZI[4]=ICI[1]elseif LN2==5 thenset IZI[1]=ICI[5]set IZI[2]=ICI[1]set IZI[3]=ICI[3]set IZI[4]=ICI[4]set IZI[5]=ICI[2]endifendifset i=1loopexitwhen i>LN2set ICI[i]=IZI[i]set i=i+1endloopset i=1loopexitwhen i>LN2set IZI[i]=IDI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=IDI[1]elseif LN2==2 thenset IZI[1]=IDI[2]set IZI[2]=IDI[1]elseif LN2==3 thenset IZI[1]=IDI[3]set IZI[2]=IDI[1]set IZI[3]=IDI[2]elseif LN2==4 thenset IZI[1]=IDI[4]set IZI[2]=IDI[3]set IZI[3]=IDI[2]set IZI[4]=IDI[1]elseif LN2==5 thenset IZI[1]=IDI[5]set IZI[2]=IDI[4]set IZI[3]=IDI[1]set IZI[4]=IDI[2]set IZI[5]=IDI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=IDI[1]elseif LN2==2 thenset IZI[1]=IDI[2]set IZI[2]=IDI[1]elseif LN2==3 thenset IZI[1]=IDI[2]set IZI[2]=IDI[3]set IZI[3]=IDI[1]elseif LN2==4 thenset IZI[1]=IDI[3]set IZI[2]=IDI[1]set IZI[3]=IDI[4]set IZI[4]=IDI[2]elseif LN2==5 thenset IZI[1]=IDI[4]set IZI[2]=IDI[3]set IZI[3]=IDI[2]set IZI[4]=IDI[5]set IZI[5]=IDI[1]endifelseif LN2==1 thenset IZI[1]=IDI[1]elseif LN2==2 thenset IZI[1]=IDI[1]set IZI[2]=IDI[2]elseif LN2==3 thenset IZI[1]=IDI[3]set IZI[2]=IDI[2]set IZI[3]=IDI[1]elseif LN2==4 thenset IZI[1]=IDI[2]set IZI[2]=IDI[4]set IZI[3]=IDI[3]set IZI[4]=IDI[1]elseif LN2==5 thenset IZI[1]=IDI[5]set IZI[2]=IDI[1]set IZI[3]=IDI[3]set IZI[4]=IDI[4]set IZI[5]=IDI[2]endifendifset i=1loopexitwhen i>LN2set IDI[i]=IZI[i]set i=i+1endloopset i=1loopexitwhen i>LN2set IZI[i]=IEI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=IEI[1]elseif LN2==2 thenset IZI[1]=IEI[2]set IZI[2]=IEI[1]elseif LN2==3 thenset IZI[1]=IEI[3]set IZI[2]=IEI[1]set IZI[3]=IEI[2]elseif LN2==4 thenset IZI[1]=IEI[4]set IZI[2]=IEI[3]set IZI[3]=IEI[2]set IZI[4]=IEI[1]elseif LN2==5 thenset IZI[1]=IEI[5]set IZI[2]=IEI[4]set IZI[3]=IEI[1]set IZI[4]=IEI[2]set IZI[5]=IEI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=IEI[1]elseif LN2==2 thenset IZI[1]=IEI[2]set IZI[2]=IEI[1]elseif LN2==3 thenset IZI[1]=IEI[2]set IZI[2]=IEI[3]set IZI[3]=IEI[1]elseif LN2==4 thenset IZI[1]=IEI[3]set IZI[2]=IEI[1]set IZI[3]=IEI[4]set IZI[4]=IEI[2]elseif LN2==5 thenset IZI[1]=IEI[4]set IZI[2]=IEI[3]set IZI[3]=IEI[2]set IZI[4]=IEI[5]set IZI[5]=IEI[1]endifelseif LN2==1 thenset IZI[1]=IEI[1]elseif LN2==2 thenset IZI[1]=IEI[1]set IZI[2]=IEI[2]elseif LN2==3 thenset IZI[1]=IEI[3]set IZI[2]=IEI[2]set IZI[3]=IEI[1]elseif LN2==4 thenset IZI[1]=IEI[2]set IZI[2]=IEI[4]set IZI[3]=IEI[3]set IZI[4]=IEI[1]elseif LN2==5 thenset IZI[1]=IEI[5]set IZI[2]=IEI[1]set IZI[3]=IEI[3]set IZI[4]=IEI[4]set IZI[5]=IEI[2]endifendifset i=1loopexitwhen i>LN2set IEI[i]=IZI[i]set i=i+1endloopset i=1loopexitwhen i>LN2set IZI[i]=IFI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=IFI[1]elseif LN2==2 thenset IZI[1]=IFI[2]set IZI[2]=IFI[1]elseif LN2==3 thenset IZI[1]=IFI[3]set IZI[2]=IFI[1]set IZI[3]=IFI[2]elseif LN2==4 thenset IZI[1]=IFI[4]set IZI[2]=IFI[3]set IZI[3]=IFI[2]set IZI[4]=IFI[1]elseif LN2==5 thenset IZI[1]=IFI[5]set IZI[2]=IFI[4]set IZI[3]=IFI[1]set IZI[4]=IFI[2]set IZI[5]=IFI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=IFI[1]elseif LN2==2 thenset IZI[1]=IFI[2]set IZI[2]=IFI[1]elseif LN2==3 thenset IZI[1]=IFI[2]set IZI[2]=IFI[3]set IZI[3]=IFI[1]elseif LN2==4 thenset IZI[1]=IFI[3]set IZI[2]=IFI[1]set IZI[3]=IFI[4]set IZI[4]=IFI[2]elseif LN2==5 thenset IZI[1]=IFI[4]set IZI[2]=IFI[3]set IZI[3]=IFI[2]set IZI[4]=IFI[5]set IZI[5]=IFI[1]endifelseif LN2==1 thenset IZI[1]=IFI[1]elseif LN2==2 thenset IZI[1]=IFI[1]set IZI[2]=IFI[2]elseif LN2==3 thenset IZI[1]=IFI[3]set IZI[2]=IFI[2]set IZI[3]=IFI[1]elseif LN2==4 thenset IZI[1]=IFI[2]set IZI[2]=IFI[4]set IZI[3]=IFI[3]set IZI[4]=IFI[1]elseif LN2==5 thenset IZI[1]=IFI[5]set IZI[2]=IFI[1]set IZI[3]=IFI[3]set IZI[4]=IFI[4]set IZI[5]=IFI[2]endifendifset i=1loopexitwhen i>LN2set IFI[i]=IZI[i]set i=i+1endloopset i=1loopexitwhen i>LN2set IZI[i]=IGI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=IGI[1]elseif LN2==2 thenset IZI[1]=IGI[2]set IZI[2]=IGI[1]elseif LN2==3 thenset IZI[1]=IGI[3]set IZI[2]=IGI[1]set IZI[3]=IGI[2]elseif LN2==4 thenset IZI[1]=IGI[4]set IZI[2]=IGI[3]set IZI[3]=IGI[2]set IZI[4]=IGI[1]elseif LN2==5 thenset IZI[1]=IGI[5]set IZI[2]=IGI[4]set IZI[3]=IGI[1]set IZI[4]=IGI[2]set IZI[5]=IGI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=IGI[1]elseif LN2==2 thenset IZI[1]=IGI[2]set IZI[2]=IGI[1]elseif LN2==3 thenset IZI[1]=IGI[2]set IZI[2]=IGI[3]set IZI[3]=IGI[1]elseif LN2==4 thenset IZI[1]=IGI[3]set IZI[2]=IGI[1]set IZI[3]=IGI[4]set IZI[4]=IGI[2]elseif LN2==5 thenset IZI[1]=IGI[4]set IZI[2]=IGI[3]set IZI[3]=IGI[2]set IZI[4]=IGI[5]set IZI[5]=IGI[1]endifelseif LN2==1 thenset IZI[1]=IGI[1]elseif LN2==2 thenset IZI[1]=IGI[1]set IZI[2]=IGI[2]elseif LN2==3 thenset IZI[1]=IGI[3]set IZI[2]=IGI[2]set IZI[3]=IGI[1]elseif LN2==4 thenset IZI[1]=IGI[2]set IZI[2]=IGI[4]set IZI[3]=IGI[3]set IZI[4]=IGI[1]elseif LN2==5 thenset IZI[1]=IGI[5]set IZI[2]=IGI[1]set IZI[3]=IGI[3]set IZI[4]=IGI[4]set IZI[5]=IGI[2]endifendifset i=1loopexitwhen i>LN2set IGI[i]=IZI[i]set i=i+1endloopset i=1loopexitwhen i>LN2set IZI[i]=IHI[i]set i=i+1endloopset x=GetRandomInt(1,3)if x==1 thenif LN2==1 thenset IZI[1]=IHI[1]elseif LN2==2 thenset IZI[1]=IHI[2]set IZI[2]=IHI[1]elseif LN2==3 thenset IZI[1]=IHI[3]set IZI[2]=IHI[1]set IZI[3]=IHI[2]elseif LN2==4 thenset IZI[1]=IHI[4]set IZI[2]=IHI[3]set IZI[3]=IHI[2]set IZI[4]=IHI[1]elseif LN2==5 thenset IZI[1]=IHI[5]set IZI[2]=IHI[4]set IZI[3]=IHI[1]set IZI[4]=IHI[2]set IZI[5]=IHI[3]endifelseif x==2 thenif LN2==1 thenset IZI[1]=IHI[1]elseif LN2==2 thenset IZI[1]=IHI[2]set IZI[2]=IHI[1]elseif LN2==3 thenset IZI[1]=IHI[2]set IZI[2]=IHI[3]set IZI[3]=IHI[1]elseif LN2==4 thenset IZI[1]=IHI[3]set IZI[2]=IHI[1]set IZI[3]=IHI[4]set IZI[4]=IHI[2]elseif LN2==5 thenset IZI[1]=IHI[4]set IZI[2]=IHI[3]set IZI[3]=IHI[2]set IZI[4]=IHI[5]set IZI[5]=IHI[1]endifelseif LN2==1 thenset IZI[1]=IHI[1]elseif LN2==2 thenset IZI[1]=IHI[1]set IZI[2]=IHI[2]elseif LN2==3 thenset IZI[1]=IHI[3]set IZI[2]=IHI[2]set IZI[3]=IHI[1]elseif LN2==4 thenset IZI[1]=IHI[2]set IZI[2]=IHI[4]set IZI[3]=IHI[3]set IZI[4]=IHI[1]elseif LN2==5 thenset IZI[1]=IHI[5]set IZI[2]=IHI[1]set IZI[3]=IHI[3]set IZI[4]=IHI[4]set IZI[5]=IHI[2]endifendifset i=1loopexitwhen i>LN2set IHI[i]=IZI[i]set i=i+1endloopset TJI=GetRandomInt(1,2)if IVI>=IWI and IVI>=IXI thencall ClearTextMessages()call QRI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+IYI)call QRI(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if T3I(BO[i])thenif TJI==1 thenset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],ICI[x],ZC1,bj_UNIT_FACING)elseset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],IDI[x],ZC1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if T3I(CO[i])thenif TJI==1 thenset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],IDI[x],ZD1,bj_UNIT_FACING)elseset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],ICI[x],ZD1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopelseif IWI>=IVI and IWI>=IXI thencall ClearTextMessages()call QRI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+IJI)call QRI(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if T3I(BO[i])thenif TJI==1 thenset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],IEI[x],ZC1,bj_UNIT_FACING)elseset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],IFI[x],ZC1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if T3I(CO[i])thenif TJI==1 thenset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],IFI[x],ZD1,bj_UNIT_FACING)elseset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],IEI[x],ZD1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopelseif IXI>=IVI and IXI>=IWI thencall ClearTextMessages()call QRI(bj_FORCE_ALL_PLAYERS,45,GetObjectName(1848653146)+" "+IKI)call QRI(bj_FORCE_ALL_PLAYERS,45," ")set i=1set x=1loopexitwhen i>5if T3I(BO[i])thenif TJI==1 thenset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],IGI[x],ZC1,bj_UNIT_FACING)elseset K1[GetPlayerId(BO[i])]=CreateUnitAtLoc(BO[i],IHI[x],ZC1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopset i=1set x=1loopexitwhen i>5if T3I(CO[i])thenif TJI==1 thenset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],IHI[x],ZD1,bj_UNIT_FACING)elseset K1[GetPlayerId(CO[i])]=CreateUnitAtLoc(CO[i],IGI[x],ZD1,bj_UNIT_FACING)endifset x=x+1endifset i=i+1endloopendifset t=CreateTrigger()call TriggerRegisterTimerEvent(t,70,false)call TriggerAddCondition(t,Condition(function LK2))call RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)set ZC1=nullset ZD1=nullset LY2=nullset LJ2=nullset t=nullset LM2=nullreturn falseendfunctionfunction LT2 takes integer i returns integerif i==1 thenreturn RQI(DY0[GetRandomInt(1,DJ0)])elseif i==2 thenreturn RQI(DZ0[GetRandomInt(1,DV0)])elseif i==3 thenreturn RQI(DW0[GetRandomInt(1,DX0)])elseif i==4 thenreturn RQI(DM0[GetRandomInt(1,DN0)])elseif i==5 thenreturn RQI(DK0[GetRandomInt(1,DL0)])endifreturn 0endfunctionfunction LR2 takes integer i returns integerlocal integer RBIlocal integer RCIlocal integer R4Oset R4O=LT2(i)if F2 thenreturn R4Oendifloopexitwhen S2[R4O]==falseset R4O=LT2(i)endloopset S2[R4O]=truereturn R4Oendfunctionfunction LP2 takes nothing returns nothinglocal integer i=DE0loopexitwhen i>DH0set S2[i]=falseset i=i+1endloopendfunctionfunction LQ2 takes nothing returns booleanlocal integer LU2=GetPlayerId(GetTriggerPlayer())local string M02=SubString(GetEventPlayerChatString(),8,9)local integer MI2=0if M02=="1"thenset MI2=1elseif M02=="2"thenset MI2=2elseif M02=="3"thenset MI2=3endifif MI2==0 thencall PYI(GetTriggerPlayer(),GetObjectName(1848652612))return falseendifif(LoadBoolean(LY,(2001),(950+LU2)))thencall PYI(GetTriggerPlayer(),GetObjectName(1848652609))return falseendifcall SaveBoolean(LY,(2001),(950+LU2),(true))if MI2==1 thencall SaveInteger(LY,(2001),(126),(1+(LoadInteger(LY,(2001),(126)))))elseif MI2==2 thencall SaveInteger(LY,(2001),(127),(1+(LoadInteger(LY,(2001),(127)))))elsecall SaveInteger(LY,(2001),(128),(1+(LoadInteger(LY,(2001),(128)))))endifcall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,20,GetObjectName(1848654157)+" Option "+I2S(MI2)+".")return falseendfunctionfunction WN2 takes nothing returns nothinglocal integer LN2=T8I(OO)local integer LS2=T8I(AO)local integer ilocal integer xlocal trigger t=CreateTrigger()local location ZC1=GetRectCenter(F4)local location ZD1=GetRectCenter(E4)local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)local integer TJIlocal trigger t2set N2=trueset O3=falseset A3=falsecall TZI()call PanCameraToTimedLocForPlayer(BO[1],LY2,0)call PanCameraToTimedLocForPlayer(BO[2],LY2,0)call PanCameraToTimedLocForPlayer(BO[3],LY2,0)call PanCameraToTimedLocForPlayer(BO[4],LY2,0)call PanCameraToTimedLocForPlayer(BO[5],LY2,0)call PanCameraToTimedLocForPlayer(CO[1],LJ2,0)call PanCameraToTimedLocForPlayer(CO[2],LJ2,0)call PanCameraToTimedLocForPlayer(CO[3],LJ2,0)call PanCameraToTimedLocForPlayer(CO[4],LJ2,0)call PanCameraToTimedLocForPlayer(CO[5],LJ2,0)call TriggerRegisterPlayerChatEvent(t,BO[1],"-Option",false)call TriggerRegisterPlayerChatEvent(t,BO[2],"-Option",false)call TriggerRegisterPlayerChatEvent(t,BO[3],"-Option",false)call TriggerRegisterPlayerChatEvent(t,BO[4],"-Option",false)call TriggerRegisterPlayerChatEvent(t,BO[5],"-Option",false)call TriggerRegisterPlayerChatEvent(t,CO[1],"-Option",false)call TriggerRegisterPlayerChatEvent(t,CO[2],"-Option",false)call TriggerRegisterPlayerChatEvent(t,CO[3],"-Option",false)call TriggerRegisterPlayerChatEvent(t,CO[4],"-Option",false)call TriggerRegisterPlayerChatEvent(t,CO[5],"-Option",false)call TriggerAddCondition(t,Condition(function LQ2))call LP2()set i=1loopexitwhen i>LN2set ICI[i]=DC0[LR2(i)]set IYI=IYI+GetObjectName(ICI[i])set i=i+1if i<=LN2 thenset IYI=IYI+"|c005BFEEA-|r"endifendloopset IYI=IYI+" |c00FF0000vs |r"set i=1loopexitwhen i>LS2set IDI[i]=DC0[LR2(i)]set IYI=IYI+GetObjectName(IDI[i])set i=i+1if i<=LS2 thenset IYI=IYI+"|c005BFEEA-|r"endifendloopcall LP2()set i=1loopexitwhen i>LN2set IEI[i]=DC0[LR2(i)]set IJI=IJI+GetObjectName(IEI[i])+" "set i=i+1if i<=LN2 thenset IJI=IJI+"|c005BFEEA-|r"endifendloopset IJI=IJI+" |c00FF0000vs |r"set i=1loopexitwhen i>LS2set IFI[i]=DC0[LR2(i)]set IJI=IJI+GetObjectName(IFI[i])+" "set i=i+1if i<=LS2 thenset IJI=IJI+"|c005BFEEA-|r"endifendloopcall LP2()set i=1loopexitwhen i>LN2set IGI[i]=DC0[LR2(i)]set IKI=IKI+GetObjectName(IGI[i])+" "set i=i+1if i<=LN2 thenset IKI=IKI+"|c005BFEEA-|r"endifendloopset IKI=IKI+" |c00FF0000vs |r"set i=1loopexitwhen i>LS2set IHI[i]=DC0[LR2(i)]set IKI=IKI+GetObjectName(IHI[i])+" "set i=i+1if i<=LS2 thenset IKI=IKI+"|c005BFEEA-|r"endifendloopcall QRI(bj_FORCE_ALL_PLAYERS,75," ")call QRI(bj_FORCE_ALL_PLAYERS,75,GetObjectName(1848653396))call QRI(bj_FORCE_ALL_PLAYERS,75,GetObjectName(1848653385)+" "+GetObjectName(1848653380))call QRI(bj_FORCE_ALL_PLAYERS,75," ")call QRI(bj_FORCE_ALL_PLAYERS,75,IYI)call QRI(bj_FORCE_ALL_PLAYERS,75," ")call QRI(bj_FORCE_ALL_PLAYERS,75,IJI)call QRI(bj_FORCE_ALL_PLAYERS,75," ")call QRI(bj_FORCE_ALL_PLAYERS,75,IKI)set t2=CreateTrigger()call TriggerRegisterTimerEvent(t2,30,false)call TriggerAddCondition(t2,Condition(function LL2))call SaveTriggerHandle(LY,(GetHandleId(t2)),(35),(t))call RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)set ZC1=nullset ZD1=nullset LY2=nullset LJ2=nullset t=nullset t2=nullendfunctionfunction M12 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer NPI=GetTriggerEvalCount(t)local integer GW1=20-(NPI-(NPI/20)*20)call LeaderboardSetLabel(ITI,"           "+GetObjectName(1848657242)+" "+I2S(GW1))if NPI>125 thencall DestroyLeaderboard(ITI)call HJ2()call S0I(t)endifset t=nullreturn falseendfunctionfunction MO2 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function M12))set ITI=CreateLeaderboard()call LeaderboardSetStyle(ITI,true,false,false,false)call LeaderboardDisplay(ITI,false)call PlayerSetLeaderboard(BO[1],ITI)call PlayerSetLeaderboard(BO[2],ITI)call PlayerSetLeaderboard(BO[3],ITI)call PlayerSetLeaderboard(BO[4],ITI)call PlayerSetLeaderboard(BO[5],ITI)call PlayerSetLeaderboard(CO[1],ITI)call PlayerSetLeaderboard(CO[2],ITI)call PlayerSetLeaderboard(CO[3],ITI)call PlayerSetLeaderboard(CO[4],ITI)call PlayerSetLeaderboard(CO[5],ITI)set t=nullendfunctionfunction M22 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer KO2=(LoadInteger(LY,(S5I),(25)))local player p1local player p2local player K22local player K32if KO2==0 thenif ILI==1 thenset p1=BO[1]elseset p1=CO[1]endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])if GetLocalPlayer()==p1 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==1 thenif ILI==1 thenset p1=CO[1]set p2=CO[2]set K22=BO[1]elseset p1=BO[1]set p2=BO[2]set K22=CO[1]endifcall TFI(K22)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==2 thenif ILI==1 thenset p1=BO[2]set p2=BO[3]set K22=CO[1]set K32=CO[2]elseset p1=CO[2]set p2=CO[3]set K22=BO[1]set K32=BO[2]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==3 thenif ILI==1 thenset p1=CO[3]set p2=CO[4]set K22=BO[2]set K32=BO[3]elseset p1=BO[3]set p2=BO[4]set K22=CO[2]set K32=CO[3]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==4 thenif ILI==1 thenset p1=BO[4]set p2=BO[5]set K22=CO[3]set K32=CO[4]elseset p1=CO[4]set p2=CO[5]set K22=BO[3]set K32=BO[4]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==5 thenif ILI==1 thenset p1=CO[5]set K22=BO[4]set K32=BO[5]elseset p1=BO[5]set K22=CO[4]set K32=CO[5]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IMI[GetPlayerId(p1)])if GetLocalPlayer()==p1 thencall LeaderboardDisplay(ITI,true)elsecall LeaderboardDisplay(ITI,false)endifelseif KO2==6 thenif ILI==1 thenset K22=CO[5]elseset K22=BO[5]endifcall TFI(K22)call LeaderboardDisplay(ITI,false)call SuspendTimeOfDay(false)endifif KO2>6 thenset ISI=truecall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(25),(KO2+1))endifset t=nullset p1=nullset p2=nullset K22=nullset K32=nullreturn falseendfunctionfunction M32 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5Icall S0I(t)call SuspendTimeOfDay(true)set ILI=GetRandomInt(1,2)call QRI(bj_FORCE_ALL_PLAYERS,15.00," ")if ILI==1 thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(BO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))elsecall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00," ")set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,20,true)call TriggerAddCondition(t,Condition(function M22))call SaveInteger(LY,(S5I),(25),(0))call MO2()call TriggerEvaluate(t)set t=nullreturn falseendfunctionfunction WP2 takes nothing returns nothinglocal trigger tlocal integer x=1set INI=trueset BL=180set A3=falseset O3=falsecall OZ2()set IMI[GetPlayerId(BO[1])]=GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(BO[2])]=GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(BO[3])]=GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(BO[4])]=GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(BO[5])]=GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)set IMI[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function M32))set t=nullendfunctionfunction M42 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer NPI=GetTriggerEvalCount(t)local integer GW1=20-(NPI-(NPI/20)*20)call LeaderboardSetLabel(O0I,"           "+GetObjectName(1848657242)+" "+I2S(GW1))if NPI>125 thencall DestroyLeaderboard(O0I)call HJ2()call S0I(t)endifset t=nullreturn falseendfunctionfunction M52 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function M42))set O0I=CreateLeaderboard()call LeaderboardSetStyle(O0I,true,false,false,false)call LeaderboardDisplay(O0I,false)call PlayerSetLeaderboard(BO[1],O0I)call PlayerSetLeaderboard(BO[2],O0I)call PlayerSetLeaderboard(BO[3],O0I)call PlayerSetLeaderboard(BO[4],O0I)call PlayerSetLeaderboard(BO[5],O0I)call PlayerSetLeaderboard(CO[1],O0I)call PlayerSetLeaderboard(CO[2],O0I)call PlayerSetLeaderboard(CO[3],O0I)call PlayerSetLeaderboard(CO[4],O0I)call PlayerSetLeaderboard(CO[5],O0I)set t=nullendfunctionfunction M62 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer KO2=(LoadInteger(LY,(S5I),(25)))local player p1local player p2local player K22local player K32if KO2==0 thenif IRI==1 thenset p1=BO[1]elseset p1=CO[1]endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])if GetLocalPlayer()==p1 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==1 thenif IRI==1 thenset p1=CO[1]set p2=CO[2]set K22=BO[1]elseset p1=BO[1]set p2=BO[2]set K22=CO[1]endifcall TFI(K22)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==2 thenif IRI==1 thenset p1=BO[2]set p2=BO[3]set K22=CO[1]set K32=CO[2]elseset p1=CO[2]set p2=CO[3]set K22=BO[1]set K32=BO[2]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==3 thenif IRI==1 thenset p1=CO[3]set p2=CO[4]set K22=BO[2]set K32=BO[3]elseset p1=BO[3]set p2=BO[4]set K22=CO[2]set K32=CO[3]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==4 thenif IRI==1 thenset p1=BO[4]set p2=BO[5]set K22=CO[3]set K32=CO[4]elseset p1=CO[4]set p2=CO[5]set K22=BO[3]set K32=BO[4]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p2)]+(D80[GetPlayerId((p2))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p2)])if GetLocalPlayer()==p1 or GetLocalPlayer()==p2 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==5 thenif IRI==1 thenset p1=CO[5]set K22=BO[4]set K32=BO[5]elseset p1=BO[5]set K22=CO[4]set K32=CO[5]endifcall TFI(K22)call TFI(K32)call QRI(bj_FORCE_ALL_PLAYERS,15.00,C0[GetPlayerId(p1)]+(D80[GetPlayerId((p1))])+"|r"+" "+GetObjectName(1848653364))call SetPlayerState(p1,PLAYER_STATE_RESOURCE_GOLD,IPI[GetPlayerId(p1)])if GetLocalPlayer()==p1 thencall LeaderboardDisplay(O0I,true)elsecall LeaderboardDisplay(O0I,false)endifelseif KO2==6 thenif IRI==1 thenset K22=CO[5]elseset K22=BO[5]endifcall TFI(K22)call LeaderboardDisplay(O0I,false)call SuspendTimeOfDay(false)endifif KO2>6 thenset IUI=truecall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(25),(KO2+1))endifset t=nullset p1=nullset p2=nullset K22=nullset K32=nullreturn falseendfunctionfunction M72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local trigger M82=(LoadTriggerHandle(LY,(S5I),(169)))set TP0=truecall S0I(M82)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,20,true)call TriggerAddCondition(t,Condition(function M62))call SaveInteger(LY,(S5I),(25),(0))call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)call EnableTrigger(EV0)call EnableTrigger(DN)set IRI=GetRandomInt(1,2)call QRI(bj_FORCE_ALL_PLAYERS,15.00," ")if IRI==1 thencall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848654159)+" "+GetObjectName(1848653131)+" "+C0[GetPlayerId(BO[0])]+GetObjectName(1848653365)+"|r"+" "+GetObjectName(1848653366))elsecall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848654159)+" "+GetObjectName(1848653131)+" "+C0[GetPlayerId(CO[0])]+GetObjectName(1848653379)+"|r"+" "+GetObjectName(1848653366))endifcall QRI(bj_FORCE_ALL_PLAYERS,15.00," ")call M52()call TriggerEvaluate(t)set t=nullset M82=nullreturn falseendfunctionfunction M92 takes nothing returns booleanlocal unit SFI=GetSoldUnit()local string MA2=C0[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(D80[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r"call QRI(bj_FORCE_ALL_PLAYERS,20,MA2+" "+GetObjectName(1848654153)+" "+GetUnitName(SFI)+" "+GetObjectName(1848654158))call TCI(GetUnitTypeId(GetSoldUnit()))call FL1("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),GetUnitTypeId(GetSoldUnit()))call RemoveUnit(GetSoldUnit())set SFI=nullreturn falseendfunctionfunction MB2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local trigger M82=CreateTrigger()local integer S5Ilocal string MC2=C0[GetPlayerId(BO[1])]+(D80[GetPlayerId((BO[1]))])+"|r"local string MD2=C0[GetPlayerId(CO[1])]+(D80[GetPlayerId((CO[1]))])+"|r"call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call QRI(bj_FORCE_ALL_PLAYERS,20.00,MC2+" "+GetObjectName(1848654155))call QRI(bj_FORCE_ALL_PLAYERS,20.00,MD2+" "+GetObjectName(1848654155))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call S0I(t)call UMI(M82,EVENT_PLAYER_UNIT_SELL)call TriggerAddCondition(M82,Condition(function M92))call SuspendTimeOfDay(true)call DisableTrigger(EV0)call DisableTrigger(DN)call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,1000)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,1000)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveTriggerHandle(LY,(S5I),(169),(M82))call TriggerRegisterTimerEvent(t,20,false)call TriggerAddCondition(t,Condition(function M72))set M82=nullset t=nullreturn falseendfunctionfunction WQ2 takes nothing returns nothinglocal trigger tlocal location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)local integer x=1loopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZD1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZC1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set IQI=trueset BL=180set A3=falseset O3=falseset TP0=falsecall OZ2()set IPI[GetPlayerId(BO[1])]=GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(BO[2])]=GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(BO[3])]=GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(BO[4])]=GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(BO[5])]=GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(CO[1])]=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(CO[2])]=GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(CO[3])]=GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(CO[4])]=GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)set IPI[GetPlayerId(CO[5])]=GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD,0)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function MB2))set t=nullset ZC1=nullset ZD1=nullendfunctionfunction ME2 takes nothing returns booleanlocal player T4Iset G3=trueset T4I=BO[1]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=BO[2]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=BO[3]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=BO[4]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=BO[5]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=CO[1]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=CO[2]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=CO[3]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=CO[4]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifset T4I=CO[5]if(GetPlayerSlotState((T4I))==PLAYER_SLOT_STATE_EMPTY)==false and C3[GetPlayerId(T4I)]==false thencall RGI(T4I)endifreturn falseendfunctionfunction MF2 takes nothing returns booleanset O3=falseset A3=falsecall TZI()return falseendfunctionfunction WR2 takes nothing returns nothinglocal integer S5I=2000local player array LN2local player array LS2local integer x=0local integer y=0local integer i=0local trigger t=CreateTrigger()set B3=truecall TriggerAddCondition(t,Condition(function ME2))call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(M),false)set t=CreateTrigger()call TriggerAddCondition(t,Condition(function MF2))call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(M),false)set t=nullif T3I(BO[1])thenset x=x+1set LN2[x]=BO[1]endifif T3I(BO[2])thenset x=x+1set LN2[x]=BO[2]endifif T3I(BO[3])thenset x=x+1set LN2[x]=BO[3]endifif T3I(BO[4])thenset x=x+1set LN2[x]=BO[4]endifif T3I(BO[5])thenset x=x+1set LN2[x]=BO[5]endifif T3I(CO[1])thenset y=y+1set LS2[y]=CO[1]endifif T3I(CO[2])thenset y=y+1set LS2[y]=CO[2]endifif T3I(CO[3])thenset y=y+1set LS2[y]=CO[3]endifif T3I(CO[4])thenset y=y+1set LS2[y]=CO[4]endifif T3I(CO[5])thenset y=y+1set LS2[y]=CO[5]endifset i=1loopexitwhen i>xcall SavePlayerHandle(LY,(2000),(550+GetPlayerId(LN2[i])),(LS2[i]))call SavePlayerHandle(LY,(2000),(550+GetPlayerId(LS2[i])),(LN2[i]))set i=i+1endloopendfunctionfunction MH2 takes nothing returns nothingcall Q5I(GetEnumUnit())endfunctionfunction MZ2 takes unit SFI returns nothinglocal integer MV2=GetPlayerId(GetOwningPlayer(SFI))set KO[MV2]=UnitItemInSlot(SFI,0)set LO[MV2]=UnitItemInSlot(SFI,1)set NO[MV2]=UnitItemInSlot(SFI,2)set TO[MV2]=UnitItemInSlot(SFI,3)set PO[MV2]=UnitItemInSlot(SFI,4)set QO[MV2]=UnitItemInSlot(SFI,5)endfunctionfunction MW2 takes player RZI,player RVI returns integerlocal unit MX2=K1[GetPlayerId(RZI)]local unit MY2=K1[GetPlayerId(RVI)]call UnitRemoveBuffs(MX2,true,true)call UnitRemoveBuffs(MY2,true,true)if MX2==null and MY2==null thencall QRI(bj_FORCE_ALL_PLAYERS,15,C0[GetPlayerId(BO[0])]+(D80[GetPlayerId((RZI))])+" "+GetObjectName(1848653367)+" "+(D80[GetPlayerId((RVI))])+" "+GetObjectName(1848656176)+"|r")elseif GetRandomInt(1,2)==1 thenif(MX2!=null)thenreturn GetUnitTypeId(MX2)elsereturn GetUnitTypeId(MY2)endifelseif(MY2!=null)thenreturn GetUnitTypeId(MY2)elsereturn GetUnitTypeId(MX2)endifendifcall QRI(bj_FORCE_ALL_PLAYERS,15,C0[GetPlayerId(BO[0])]+(D80[GetPlayerId((RZI))])+" "+GetObjectName(1848653367)+" "+(D80[GetPlayerId((RVI))])+" "+GetObjectName(1848654146))return TYI()endfunctionfunction MJ2 takes nothing returns nothingif(GetUnitTypeId(GetEnumUnit())==1848651828)thencall RemoveUnit(GetEnumUnit())endifif(GetUnitTypeId(GetEnumUnit())==1865429043)thencall RemoveUnit(GetEnumUnit())endifendfunctionfunction MK2 takes nothing returns booleanlocal integer TGIlocal group ML2=NTI()local unit MM2local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)local integer MN2=T8I(OO)local player array MS2local player array MT2local integer xlocal integer ylocal real MR2local real MP2local real MQ2local integer MU2local group Z51=NTI()call GroupEnumUnitsInRect(Z51,GetWorldBounds(),Condition(function N1I))call ForGroup(Z51,function MJ2)call NSI(Z51)set TGI=1set x=1set y=1loopexitwhen TGI>5if(T3I(BO[TGI]))thencall MZ2(K1[GetPlayerId(BO[TGI])])call GroupAddUnit(ML2,K1[GetPlayerId(BO[TGI])])set MS2[x]=BO[TGI]set x=x+1endifif(T3I(CO[TGI]))thencall MZ2(K1[GetPlayerId(CO[TGI])])call GroupAddUnit(ML2,K1[GetPlayerId(CO[TGI])])set MT2[y]=CO[TGI]set y=y+1endifset TGI=TGI+1endloopset x=1loopexitwhen x>MN2set MU2=MW2(MS2[x],MT2[x])if(K1[GetPlayerId(MS2[x])]==null)thenset MR2=GetLocationX(LY2)+GetRandomReal(1,40)set MP2=GetLocationY(LY2)+GetRandomReal(1,40)set MQ2=270elseset MR2=GetUnitX(K1[GetPlayerId(MS2[x])])set MP2=GetUnitY(K1[GetPlayerId(MS2[x])])set MQ2=GetUnitFacing(K1[GetPlayerId(MS2[x])])call SetUnitPathing(K1[GetPlayerId(MS2[x])],false)endifset K1[GetPlayerId(MS2[x])]=CreateUnit(MS2[x],MU2,MR2,MP2,MQ2)call SetUnitPathing(K1[GetPlayerId(MS2[x])],false)call SetUnitPosition(K1[GetPlayerId(MS2[x])],MR2,MP2)call UnitAddItem(K1[GetPlayerId(MS2[x])],KO[GetPlayerId(MS2[x])])call UnitAddItem(K1[GetPlayerId(MS2[x])],LO[GetPlayerId(MS2[x])])call UnitAddItem(K1[GetPlayerId(MS2[x])],NO[GetPlayerId(MS2[x])])call UnitAddItem(K1[GetPlayerId(MS2[x])],TO[GetPlayerId(MS2[x])])call UnitAddItem(K1[GetPlayerId(MS2[x])],PO[GetPlayerId(MS2[x])])call UnitAddItem(K1[GetPlayerId(MS2[x])],QO[GetPlayerId(MS2[x])])call ClearSelectionForPlayer(MS2[x])call SelectUnitAddForPlayer(K1[GetPlayerId(MS2[x])],MS2[x])call PanCameraToTimedForPlayer(MS2[x],MR2,MP2,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",MR2,MP2))if(K1[GetPlayerId(MT2[x])]==null)thenset MR2=GetLocationX(LJ2)set MP2=GetLocationY(LJ2)set MQ2=270elseset MR2=GetUnitX(K1[GetPlayerId(MT2[x])])set MP2=GetUnitY(K1[GetPlayerId(MT2[x])])set MQ2=GetUnitFacing(K1[GetPlayerId(MT2[x])])call SetUnitPathing(K1[GetPlayerId(MT2[x])],false)endifset K1[GetPlayerId(MT2[x])]=CreateUnit(MT2[x],MU2,MR2,MP2,MQ2)call SetUnitPathing(K1[GetPlayerId(MT2[x])],false)call SetUnitPosition(K1[GetPlayerId(MT2[x])],MR2,MP2)call UnitAddItem(K1[GetPlayerId(MT2[x])],KO[GetPlayerId(MT2[x])])call UnitAddItem(K1[GetPlayerId(MT2[x])],LO[GetPlayerId(MT2[x])])call UnitAddItem(K1[GetPlayerId(MT2[x])],NO[GetPlayerId(MT2[x])])call UnitAddItem(K1[GetPlayerId(MT2[x])],TO[GetPlayerId(MT2[x])])call UnitAddItem(K1[GetPlayerId(MT2[x])],PO[GetPlayerId(MT2[x])])call UnitAddItem(K1[GetPlayerId(MT2[x])],QO[GetPlayerId(MT2[x])])call ClearSelectionForPlayer(MT2[x])call SelectUnitAddForPlayer(K1[GetPlayerId(MT2[x])],MT2[x])call PanCameraToTimedForPlayer(MT2[x],MR2,MP2,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",MR2,MP2))set x=x+1endloopcall ForGroup(ML2,function MH2)call NSI(ML2)set x=1loopexitwhen x>MN2call SetUnitPathing(K1[GetPlayerId(MS2[x])],true)call SetUnitPathing(K1[GetPlayerId(MT2[x])],true)set x=x+1endloopcall RemoveLocation(LY2)call RemoveLocation(LJ2)set ML2=nullset MM2=nullset LY2=nullset LJ2=nullset Z51=nullreturn falseendfunctionfunction N02 takes nothing returns booleanset D2=truereturn falseendfunctionfunction NI2 takes nothing returns booleanset A3=falseset O3=falsecall TZI()return falseendfunctionfunction WZ2 takes nothing returns nothinglocal trigger t=CreateTrigger()call QRI(P2,10,GetObjectName(1848654152))call QRI(P2,10,GetObjectName(1848654149))set E2=truecall TCI(1211117641)call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function MK2))set t=CreateTrigger()call TriggerAddCondition(t,Condition(function NI2))call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(M),false)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,55+60-TimerGetElapsed(M),false)call TriggerAddCondition(t,Condition(function N02))set t=nullendfunctionfunction WT2 takes nothing returns nothinglocal location ZC1=GetRectCenter(F4)local location ZD1=GetRectCenter(E4)local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)local integer TGIlocal integer THIlocal integer TJIif not F2 thencall TZI()endifset J0=trueset T0=400set O3=falsecall PanCameraToTimedLocForPlayer(BO[1],LY2,0)call PanCameraToTimedLocForPlayer(BO[2],LY2,0)call PanCameraToTimedLocForPlayer(BO[3],LY2,0)call PanCameraToTimedLocForPlayer(BO[4],LY2,0)call PanCameraToTimedLocForPlayer(BO[5],LY2,0)call PanCameraToTimedLocForPlayer(CO[1],LJ2,0)call PanCameraToTimedLocForPlayer(CO[2],LJ2,0)call PanCameraToTimedLocForPlayer(CO[3],LJ2,0)call PanCameraToTimedLocForPlayer(CO[4],LJ2,0)call PanCameraToTimedLocForPlayer(CO[5],LJ2,0)if Y2 thenif TII(WO)thenloopset TJI=GetRandomInt(DE0,DF0)exitwhen R[TJI]==falseendloopset K1[GetPlayerId(WO)]=CreateUnit(WO,DC0[TJI],GetLocationX(ZC1),GetLocationY(ZC1),270)elseloopset TJI=GetRandomInt(DG0,DH0)exitwhen R[TJI]==falseendloopset K1[GetPlayerId(WO)]=CreateUnit(WO,DC0[TJI],GetLocationX(ZD1),GetLocationY(ZD1),270)endifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)returnendifset A3=falseset TGI=1set THI=5loopexitwhen TGI>THIset K1[GetPlayerId(BO[TGI])]=nullif(T3I(BO[TGI]))thenloopset TJI=GetRandomInt(DE0,DF0)if(R[TJI]==false)thenif not F2 thenset R[TJI]=trueendifset K1[GetPlayerId(BO[TGI])]=CreateUnitAtLoc(BO[TGI],DC0[TJI],ZC1,bj_UNIT_FACING)endifexitwhen(K1[GetPlayerId(BO[TGI])]!=null)endloopendifset TGI=TGI+1endloopset TGI=1set THI=5loopexitwhen TGI>THIset K1[GetPlayerId(CO[TGI])]=nullif(T3I(CO[TGI]))thenloopset TJI=GetRandomInt(DG0,DH0)if(R[TJI]==false)thenif not F2 thenset R[TJI]=trueendifset K1[GetPlayerId(CO[TGI])]=CreateUnitAtLoc(CO[TGI],DC0[TJI],ZD1,bj_UNIT_FACING)endifexitwhen(K1[GetPlayerId(CO[TGI])]!=null)endloopendifset TGI=TGI+1endloopset A3=truecall RemoveLocation(ZC1)call RemoveLocation(ZD1)call RemoveLocation(LY2)call RemoveLocation(LJ2)endfunctionfunction N22 takes nothing returns nothingset WL=truecall QRI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848653387)+" "+GetObjectName(1848653388))call DisableTrigger(GetTriggeringTrigger())endfunctionfunction N32 takes nothing returns nothinglocal integer N42=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))if N42>YL thencall PZI(WO,GetObjectName(1848652611))elseif N42<10 thencall PZI(WO,GetObjectName(1848652361))elseset YL=N42call QRI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848653400)+" "+I2S(YL)+" "+GetObjectName(1848653390))call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction N52 takes nothing returns nothingcall DisableTrigger((LoadTriggerHandle(LY,(GetHandleId(GetTriggeringTrigger())),(170))))call DisableTrigger((LoadTriggerHandle(LY,(GetHandleId(GetTriggeringTrigger())),(171))))call DisableTrigger(GetTriggeringTrigger())endfunctionfunction N62 takes nothing returns nothinglocal trigger N72=CreateTrigger()local trigger N82=CreateTrigger()local trigger nd=CreateTrigger()set YL=Q9I(DF0,DH0-DG0+1)call QRI(bj_FORCE_ALL_PLAYERS,10.00," ")call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653391)+" -nd "+GetObjectName(1848653367)+" -lives xx "+GetObjectName(1848653393))call QRI(bj_FORCE_ALL_PLAYERS,10.00,GetObjectName(1848653360)+" "+I2S(YL))call TriggerRegisterTimerEvent(N72,15,false)call TriggerAddAction(N72,function N52)call SaveTriggerHandle(LY,(GetHandleId(N72)),(170),(nd))call SaveTriggerHandle(LY,(GetHandleId(N72)),(171),(N82))call TriggerRegisterPlayerChatEvent(nd,WO,"-nd",true)call TriggerAddAction(nd,function N22)call TriggerRegisterPlayerChatEvent(N82,WO,"-lives",false)call TriggerAddAction(N82,function N32)endfunctionfunction N92 takes nothing returns nothinglocal integer NA2=(LoadInteger(LY,(GetHandleId(GetTriggeringTrigger())),(173)))local integer TGIlocal integer THIlocal integer TJIlocal integer O91local location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)if Q2 thenreturnendifif TII(Player(NA2))thenset TGI=DE0set THI=DF0set O91=0elseset TGI=DG0set THI=DH0set O91=1endifif K0 thenset TGI=DE0set THI=DH0if TII(Player(NA2))thencall CreateUnitAtLoc(Player(NA2),1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(Player(NA2),1848651843,ZD1,bj_UNIT_FACING)elsecall CreateUnitAtLoc(Player(NA2),1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(Player(NA2),1848651843,ZD1,bj_UNIT_FACING)endifelseset TGI=DE0set THI=DH0if TII(Player(NA2))thencall CreateUnitAtLoc(Player(NA2),1848651843,ZC1,bj_UNIT_FACING)elsecall CreateUnitAtLoc(Player(NA2),1848651843,ZD1,bj_UNIT_FACING)endifendifif not Y0 thenloopexitwhen TGI>THIif R[TGI]==false thencall SetPlayerTechMaxAllowed(Player(NA2),DC0[TGI],1)endifset TGI=TGI+1endloopif(GetPlayerState(Player(NA2),PLAYER_STATE_RESOURCE_GOLD)<250)thencall SetPlayerState(Player(NA2),PLAYER_STATE_RESOURCE_GOLD,250)endifelseif(T1[O91]<YL)thenset K1[NA2]=nullif T3I(Player(NA2))thenloopset TJI=TYI()if R[TJI]==false thenset R[TJI]=trueif TII(Player(NA2))thenset K1[NA2]=CreateUnitAtLoc(Player(NA2),DC0[TJI],ZC1,bj_UNIT_FACING)elseset K1[NA2]=CreateUnitAtLoc(Player(NA2),DC0[TJI],ZD1,bj_UNIT_FACING)endifendifexitwhen K1[NA2]!=nullendloopendifendifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)if not Y0 thenendifendfunctionfunction WH2 takes nothing returns nothinglocal location BFOlocal real NB2local trigger tlocal integer NC2local integer xset X0=truecall TCI(1211117641)set x=1loopexitwhen x>5set NC2=GetPlayerId(BO[x])set t=CreateTrigger()call TriggerRegisterTimerExpireEvent(t,F0[NC2])call TriggerAddAction(t,function N92)call SaveInteger(LY,(GetHandleId(t)),(173),(NC2))set NC2=GetPlayerId(CO[x])set t=CreateTrigger()call TriggerRegisterTimerExpireEvent(t,F0[NC2])call TriggerAddAction(t,function N92)call SaveInteger(LY,(GetHandleId(t)),(173),(NC2))set x=x+1endloopcall UnitRemoveAbility(CT0,1096906593)call UnitRemoveAbility(CR0,1096906593)call UnitRemoveAbility(CP0,1096906593)call UnitRemoveAbility(CQ0,1096906593)call UnitRemoveAbility(CU0,1096906593)call UnitRemoveAbility(D00,1096906593)call UnitRemoveAbility(DI0,1096906593)call UnitRemoveAbility(D10,1096906593)call UnitRemoveAbility(DO0,1096906593)call UnitRemoveAbility(D20,1096906593)call ExecuteFunc("N62")endfunctionfunction X12 takes nothing returns nothinglocal integer L42=GetRandomInt(1,4)set G2=trueif(L42==1)thencall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657476))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call ExecuteFunc("X02")endifif(L42==2)thencall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657477))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call ExecuteFunc("XI2")endifif(L42==3)thencall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657483))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call ExecuteFunc("WN2")endifif(L42==4)thencall QRI(bj_FORCE_ALL_PLAYERS,20.00,GetObjectName(1848657485))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")call ExecuteFunc("WX2")call ExecuteFunc("WM2")endifendfunctionfunction WL2 takes nothing returns nothingset F2=truecall TCI(1211117641)call TCI(1311788373)endfunctionfunction WE2 takes nothing returns nothinglocal integer ZB1=T8I(OO)local integer ZA1=T8I(AO)local integer QHI=ZB1+ZA1local integer TGIlocal integer NF2local integer xlocal integer ylocal integer zlocal player array NG2local player array NH2local integer wlocal integer NZ2local integer NV2local location LY2=GetRectCenter(O4)local location LJ2=GetRectCenter(S3)local location ZC1=GetRectCenter(N4)local location ZD1=GetRectCenter(S4)set FO=truecall QK1(BO[1])call QK1(BO[2])call QK1(BO[3])call QK1(BO[4])call QK1(BO[5])call QK1(CO[1])call QK1(CO[2])call QK1(CO[3])call QK1(CO[4])call QK1(CO[5])set x=1loopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(BO[x],1848651843,ZD1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(CO[x],1848651843,ZD1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set NZ2=GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)set NV2=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)set NG2[1]=nullset NG2[2]=nullset NG2[3]=nullset NG2[4]=nullset NG2[5]=nullset NG2[6]=nullset NG2[7]=nullset NG2[8]=nullset NG2[9]=nullset NG2[10]=nullset z=1set w=1set TGI=1loopexitwhen TGI>5if(T3I(BO[TGI]))thenset NG2[w]=BO[TGI]set w=w+1elseset NH2[z]=BO[TGI]set z=z+1endifset TGI=TGI+1endloopset TGI=1loopexitwhen TGI>5if(T3I(CO[TGI]))thenset NG2[w]=CO[TGI]set w=w+1elseset NH2[z]=CO[TGI]set z=z+1endifset TGI=TGI+1endloopset BO[1]=nullset BO[2]=nullset BO[3]=nullset BO[4]=nullset BO[5]=nullset CO[1]=nullset CO[2]=nullset CO[3]=nullset CO[4]=nullset CO[5]=nullset TGI=1loopexitwhen TGI>(QHI/2)set NF2=GetRandomInt(1,QHI)if(NG2[NF2]!=null)thenset BO[TGI]=NG2[NF2]set NG2[NF2]=nullset TGI=TGI+1endifendloopset x=TGIset TGI=1loopexitwhen TGI>QHI-x+1set NF2=GetRandomInt(1,QHI)if(NG2[NF2]!=null)thenset CO[TGI]=NG2[NF2]set NG2[NF2]=nullset TGI=TGI+1endifendloopset z=TGIset TGI=xset y=1loopexitwhen TGI>5set BO[TGI]=NH2[y]set y=y+1set TGI=TGI+1endloopset TGI=zloopexitwhen TGI>5set CO[TGI]=NH2[y]set y=y+1set TGI=TGI+1endloopset TGI=0loopexitwhen TGI>5set TGI=TGI+1endloopcall SetPlayerTeam(BO[0],0)call SetPlayerTeam(BO[1],0)call SetPlayerTeam(BO[2],0)call SetPlayerTeam(BO[3],0)call SetPlayerTeam(BO[4],0)call SetPlayerTeam(BO[5],0)call SetPlayerTeam(CO[0],1)call SetPlayerTeam(CO[1],1)call SetPlayerTeam(CO[2],1)call SetPlayerTeam(CO[3],1)call SetPlayerTeam(CO[4],1)call SetPlayerTeam(CO[5],1)call Z11()set x=0set y=0loopexitwhen x>5loopexitwhen y>5call SetPlayerAllianceStateBJ(BO[x],BO[y],3)call SetPlayerAllianceStateBJ(CO[x],CO[y],3)call SetPlayerAllianceStateBJ(BO[x],CO[y],0)call SetPlayerAllianceStateBJ(CO[x],BO[y],0)set y=y+1endloopset y=0set x=x+1endloopcall ForceClear(OO)call ForceClear(AO)call ForceAddPlayer(OO,BO[0])call ForceAddPlayer(OO,BO[1])call ForceAddPlayer(OO,BO[2])call ForceAddPlayer(OO,BO[3])call ForceAddPlayer(OO,BO[4])call ForceAddPlayer(OO,BO[5])call ForceAddPlayer(AO,CO[0])call ForceAddPlayer(AO,CO[1])call ForceAddPlayer(AO,CO[2])call ForceAddPlayer(AO,CO[3])call ForceAddPlayer(AO,CO[4])call ForceAddPlayer(AO,CO[5])call ExecuteFunc("ZO1")call P7O()set ZB1=T8I(OO)set ZA1=T8I(AO)set TGI=1loopexitwhen TGI>5if(T3I(BO[TGI]))thencall SetPlayerStateBJ(BO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZB1))call SetPlayerStateBJ(BO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifif(T3I(CO[TGI]))thencall SetPlayerStateBJ(CO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZA1))call SetPlayerStateBJ(CO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifset TGI=TGI+1endloopif C2 thenset x=0loopexitwhen x>5call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(0),true)call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(4),true)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),false)set x=x+1endloopendifcall ZI1()set LY2=nullset LJ2=nullset ZC1=nullset ZD1=nullendfunctionfunction WF2 takes nothing returns nothinglocal integer ZB1=T8I(OO)local integer ZA1=T8I(AO)local integer QHI=ZB1+ZA1local integer TGIlocal integer NF2local integer xlocal integer ylocal integer zlocal player array NG2local player array NH2local integer wlocal integer NZ2local integer NV2local location LY2local location LJ2local location ZC1local location ZD1local integer NX2set NX2=GetRandomInt(1,2)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,GetObjectName(1848657753))if NX2==1 thenreturnendifset OII=trueset LY2=GetRectCenter(O4)set LJ2=GetRectCenter(S3)set ZC1=GetRectCenter(N4)set ZD1=GetRectCenter(S4)call QK1(BO[1])call QK1(BO[2])call QK1(BO[3])call QK1(BO[4])call QK1(BO[5])call QK1(CO[1])call QK1(CO[2])call QK1(CO[3])call QK1(CO[4])call QK1(CO[5])set x=1loopexitwhen x>5if T3I(BO[x])thencall CreateUnitAtLoc(BO[x],1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(BO[x],1848651843,ZD1,bj_UNIT_FACING)endifif T3I(CO[x])thencall CreateUnitAtLoc(CO[x],1848651843,ZC1,bj_UNIT_FACING)call CreateUnitAtLoc(CO[x],1848651843,ZD1,bj_UNIT_FACING)endifset x=x+1endloopcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set NZ2=GetPlayerState(BO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(BO[5],PLAYER_STATE_RESOURCE_GOLD)set NV2=GetPlayerState(CO[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(CO[5],PLAYER_STATE_RESOURCE_GOLD)set NG2[1]=BO[1]set NG2[2]=BO[2]set NG2[3]=BO[3]set NG2[4]=BO[4]set NG2[5]=BO[5]set NG2[6]=CO[1]set NG2[7]=CO[2]set NG2[8]=CO[3]set NG2[9]=CO[4]set NG2[10]=CO[5]set BO[1]=NG2[6]set BO[2]=NG2[7]set BO[3]=NG2[8]set BO[4]=NG2[9]set BO[5]=NG2[10]set CO[1]=NG2[1]set CO[2]=NG2[2]set CO[3]=NG2[3]set CO[4]=NG2[4]set CO[5]=NG2[5]call SetPlayerTeam(BO[0],0)call SetPlayerTeam(BO[1],0)call SetPlayerTeam(BO[2],0)call SetPlayerTeam(BO[3],0)call SetPlayerTeam(BO[4],0)call SetPlayerTeam(BO[5],0)call SetPlayerTeam(CO[0],1)call SetPlayerTeam(CO[1],1)call SetPlayerTeam(CO[2],1)call SetPlayerTeam(CO[3],1)call SetPlayerTeam(CO[4],1)call SetPlayerTeam(CO[5],1)call Z11()set x=0set y=0loopexitwhen x>5loopexitwhen y>5call SetPlayerAllianceStateBJ(BO[x],BO[y],3)call SetPlayerAllianceStateBJ(CO[x],CO[y],3)call SetPlayerAllianceStateBJ(BO[x],CO[y],0)call SetPlayerAllianceStateBJ(CO[x],BO[y],0)set y=y+1endloopset y=0set x=x+1endloopcall ForceClear(OO)call ForceClear(AO)call ForceAddPlayer(OO,BO[0])call ForceAddPlayer(OO,BO[1])call ForceAddPlayer(OO,BO[2])call ForceAddPlayer(OO,BO[3])call ForceAddPlayer(OO,BO[4])call ForceAddPlayer(OO,BO[5])call ForceAddPlayer(AO,CO[0])call ForceAddPlayer(AO,CO[1])call ForceAddPlayer(AO,CO[2])call ForceAddPlayer(AO,CO[3])call ForceAddPlayer(AO,CO[4])call ForceAddPlayer(AO,CO[5])call ExecuteFunc("ZO1")set ZB1=T8I(OO)set ZA1=T8I(AO)set TGI=1loopexitwhen TGI>5if(T3I(BO[TGI]))thencall SetPlayerStateBJ(BO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZB1))call SetPlayerStateBJ(BO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifif(T3I(CO[TGI]))thencall SetPlayerStateBJ(CO[TGI],PLAYER_STATE_RESOURCE_GOLD,(4375/ZA1))call SetPlayerStateBJ(CO[TGI],PLAYER_STATE_RESOURCE_LUMBER,0)endifset TGI=TGI+1endloopcall PanCameraToTimedLocForPlayer(BO[1],LY2,0)call PanCameraToTimedLocForPlayer(BO[2],LY2,0)call PanCameraToTimedLocForPlayer(BO[3],LY2,0)call PanCameraToTimedLocForPlayer(BO[4],LY2,0)call PanCameraToTimedLocForPlayer(BO[5],LY2,0)call PanCameraToTimedLocForPlayer(CO[1],LJ2,0)call PanCameraToTimedLocForPlayer(CO[2],LJ2,0)call PanCameraToTimedLocForPlayer(CO[3],LJ2,0)call PanCameraToTimedLocForPlayer(CO[4],LJ2,0)call PanCameraToTimedLocForPlayer(CO[5],LJ2,0)call DestroyFogModifier(CreateFogModifierRectBJ(true,BO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,BO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,BO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,BO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,BO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))call DestroyFogModifier(CreateFogModifierRectBJ(true,CO[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))if C2 thenset x=0loopexitwhen x>5call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(0),true)call SetPlayerAlliance(Player(0),BO[x],ConvertAllianceType(4),true)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(0),false)call SetPlayerAlliance(Player(0),CO[x],ConvertAllianceType(4),false)set x=x+1endloopendifcall ZI1()call P7O()set LY2=nullset LJ2=nullset ZC1=nullset ZD1=nullendfunctionfunction WW2 takes nothing returns nothinglocal integer TGIlocal integer THIset H2=trueset TGI=1set THI=DJ0loopexitwhen TGI>THIcall TCI(DY0[TGI])set TGI=TGI+1endloopset TGI=1set THI=DX0loopexitwhen TGI>THIcall TCI(DW0[TGI])set TGI=TGI+1endloopendfunctionfunction NJ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SZI=(LoadInteger(LY,(S5I),(172)))local player T4Ilocal integer x=1loopexitwhen x>5set T4I=BO[x]if T3I(T4I)and T4I!=WO thenset K1[GetPlayerId(T4I)]=CreateUnit(T4I,SZI,GetRectCenterX(O4),GetRectCenterY(O4),270)endifset T4I=CO[x]if T3I(T4I)and T4I!=WO thenset K1[GetPlayerId(T4I)]=CreateUnit(T4I,SZI,GetRectCenterX(S3),GetRectCenterY(S3),270)endifset x=x+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset T4I=nullreturn falseendfunctionfunction NK2 takes nothing returns nothinglocal integer x=1local player T4Ilocal unit SFI=GetTriggerUnit()local integer SZI=GetUnitTypeId(SFI)local trigger tlocal integer S5Iif(GetOwningPlayer(SFI)==WO and IsUnitType(SFI,UNIT_TYPE_HERO)==true)thencall DisableTrigger(GetTriggeringTrigger())if S0[GetPlayerId(WO)]==false and Y0==false and J0==false thencall SetPlayerState(WO,PLAYER_STATE_RESOURCE_GOLD,250+GetPlayerState(WO,PLAYER_STATE_RESOURCE_GOLD))endifset D0[GetPlayerId(WO)]=trueset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function NJ2))call SaveInteger(LY,(S5I),(172),(SZI))endifset T4I=nullset SFI=nullset t=nullendfunctionfunction WV2 takes nothing returns nothinglocal integer x=1local trigger t=CreateTrigger()local region r=CreateRegion()set Y2=truecall TCI(1211117641)call TCI(1311788373)loopexitwhen x>5if(BO[x]!=WO)thencall TFI(BO[x])set S0[GetPlayerId(BO[x])]=trueset D0[GetPlayerId(BO[x])]=trueendifif(CO[x]!=WO)thencall TFI(CO[x])set S0[GetPlayerId(CO[x])]=trueset D0[GetPlayerId(CO[x])]=trueendifset x=x+1endloopcall RegionAddRect(r,bj_mapInitialPlayableArea)call TriggerRegisterEnterRegion(t,r,Condition(function N1I))call TriggerAddAction(t,function NK2)endfunctionfunction WY2 takes nothing returns nothinglocal integer TGIlocal integer THIset V2=trueset TGI=1set THI=DJ0loopexitwhen TGI>THIcall TCI(DY0[TGI])set TGI=TGI+1endloopset TGI=1set THI=DV0loopexitwhen TGI>THIcall TCI(DZ0[TGI])set TGI=TGI+1endloopendfunctionfunction WX2 takes nothing returns nothinglocal integer TGIlocal integer THIset Z2=trueset TGI=1set THI=DV0loopexitwhen TGI>THIcall TCI(DZ0[TGI])set TGI=TGI+1endloopset TGI=1set THI=DX0loopexitwhen TGI>THIcall TCI(DW0[TGI])set TGI=TGI+1endloopendfunctionfunction WK2 takes nothing returns nothinglocal integer TGIlocal integer THIset O1I=trueset TGI=1set THI=DL0loopexitwhen TGI>THIcall TCI(DK0[TGI])set TGI=TGI+1endloopendfunctionfunction WJ2 takes nothing returns nothinglocal integer TGIlocal integer THIset OOI=trueset TGI=1set THI=DN0loopexitwhen TGI>THIcall TCI(DM0[TGI])set TGI=TGI+1endloopendfunctionfunction XO2 takes nothing returns nothingset L0=trueendfunctionfunction X42 takes nothing returns nothingset R0=truecall SetPlayerTechResearched(BO[0],1378889780,1)call SetPlayerTechResearched(CO[0],1378889780,1)call SetPlayerHandicapXP(BO[1],1.5)call SetPlayerHandicapXP(BO[2],1.5)call SetPlayerHandicapXP(BO[3],1.5)call SetPlayerHandicapXP(BO[4],1.5)call SetPlayerHandicapXP(BO[5],1.5)call SetPlayerHandicapXP(CO[1],1.5)call SetPlayerHandicapXP(CO[2],1.5)call SetPlayerHandicapXP(CO[3],1.5)call SetPlayerHandicapXP(CO[4],1.5)call SetPlayerHandicapXP(CO[5],1.5)endfunctionfunction X22 takes nothing returns nothingset P0=truecall DisableTrigger(J20)endfunctionfunction X32 takes nothing returns nothingset Q0=trueendfunctionfunction NQ2 takes nothing returns nothingset O3I=falsecall QRI(bj_FORCE_ALL_PLAYERS,10,GetObjectName(1848657985))call DisableTrigger(GetTriggeringTrigger())endfunctionfunction NU2 takes nothing returns nothingcall DisableTrigger((LoadTriggerHandle(LY,(GetHandleId(GetTriggeringTrigger())),(174))))call DisableTrigger(GetTriggeringTrigger())endfunctionfunction S02 takes nothing returns nothinglocal trigger N72=CreateTrigger()local trigger nn=CreateTrigger()call QRI(bj_FORCE_ALL_PLAYERS,10.00," ")call QRI(bj_FORCE_ALL_PLAYERS,10.00,"Extra commands: -noneutrals can be entered in the following 15 seconds. ")call TriggerRegisterTimerEvent(N72,15,false)call TriggerAddAction(N72,function NU2)call SaveTriggerHandle(LY,(GetHandleId(N72)),(174),(nn))call TriggerRegisterPlayerChatEvent(nn,WO,"-noneutrals",true)call TriggerAddAction(nn,function NQ2)endfunctionfunction X52 takes nothing returns nothingset O2I=truecall ExecuteFunc("S02")endfunctionfunction X62 takes nothing returns nothingset O4I=trueendfunctionfunction WG2 takes nothing returns nothingset O5I=trueendfunctionfunction X82 takes nothing returns nothingset O6I=trueendfunctionfunction X72 takes nothing returns nothingset O7I=trueendfunctionfunction XA2 takes nothing returns nothingset FL=trueset GL=falseendfunctionfunction XB2 takes nothing returns nothingset O8I=trueendfunctionfunction X92 takes nothing returns nothingset VL=trueset JL=trueendfunctionfunction XC2 takes nothing returns nothingset ZL=trueendfunctionfunction S52 takes nothing returns nothinglocal integer i=0loopexitwhen i>5call SetPlayerName(BO[i],(D80[GetPlayerId((BO[i]))])+" ("+I2S(I[GetPlayerId(BO[i])])+"/"+I2S(O[GetPlayerId(BO[i])])+" | "+I2S(A[GetPlayerId(BO[i])])+"-"+I2S(B[GetPlayerId(BO[i])])+")")call SetPlayerName(CO[i],(D80[GetPlayerId((CO[i]))])+" ("+I2S(I[GetPlayerId(CO[i])])+"/"+I2S(O[GetPlayerId(CO[i])])+" | "+I2S(A[GetPlayerId(CO[i])])+"-"+I2S(B[GetPlayerId(CO[i])])+")")set i=i+1endloopendfunctionfunction S62 takes nothing returns booleanif O9I==false thenif GetLocalPlayer()==D60 or GetLocalPlayer()==D70 thencall S52()endifendifreturn falseendfunctionfunction XD2 takes nothing returns nothingset O9I=trueendfunctionfunction S82 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()call SetUnitScale(SFI,SMI(SFI)*OAI,SMI(SFI)*OAI,SMI(SFI)*OAI)set SFI=nullendfunctionfunction S92 takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thencall S82()endifreturn falseendfunctionfunction XE2 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function S92))set OBI=trueset OAI=0.5endfunctionfunction XF2 takes nothing returns nothingset OCI=trueendfunctionfunction XG2 takes nothing returns nothingset HL=trueendfunctionfunction SB2 takes nothing returns booleanif GetLocalPlayer()==D60 or GetLocalPlayer()==D70 thenif GetTriggerEvalCount(GetTriggeringTrigger())==1 thencall CameraSetupSetDestPosition(OEI,0,0,0.0)elsecall CameraSetupSetDestPosition(OEI,GetCameraTargetPositionX(),GetCameraTargetPositionY(),0.0)endifcall CameraSetupApplyForPlayer(true,OEI,GetLocalPlayer(),0)call SetTerrainFogEx(0,0.0,100000.0,0.500,0.353,0.314,0.235)endifreturn falseendfunctionfunction XZ2 takes nothing returns nothinglocal trigger t=CreateTrigger()set ODI=trueset OEI=CreateCameraSetup()call CameraSetupSetField(OEI,CAMERA_FIELD_ZOFFSET,0.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_ROTATION,90.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_ANGLE_OF_ATTACK,304.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_TARGET_DISTANCE,2500.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_ROLL,0.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_FIELD_OF_VIEW,70.0,0.0)call CameraSetupSetField(OEI,CAMERA_FIELD_FARZ,16000.0,0.0)call CameraSetupSetDestPosition(OEI,0.0,0.0,0.0)call TriggerRegisterTimerEvent(t,180,true)call TriggerRegisterTimerEvent(t,0.1,false)call TriggerAddCondition(t,Condition(function SB2))set t=nullendfunctionfunction SC2 takes nothing returns booleanreturn TII(GetOwningPlayer(GetFilterUnit()))and RRI(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())!=1211117642endfunctionfunction SD2 takes nothing returns booleanreturn TOI(GetOwningPlayer(GetFilterUnit()))and RRI(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())!=1211117642endfunctionfunction SE2 takes nothing returns nothinglocal unit u=GetEnumUnit()call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+200)call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+200)call SetPlayerState(GetOwningPlayer(u),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(u),PLAYER_STATE_RESOURCE_GOLD)+150)call AddHeroXP(u,248,true)set u=nullendfunctionfunction SF2 takes integer i,integer JF2,integer r,integer g,integer b,integer a,real x,real y,boolean SG2 returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local image SH2=(LoadImageHandle(LY,(S5I),(476+i)))local image SZ2=(LoadImageHandle(LY,(S5I),(484+i)))if SH2!=null thencall DestroyImage(SH2)call SaveImageHandle(LY,(S5I),(476+i),(null))set SH2=nullendifif SZ2!=null thencall DestroyImage(SZ2)call SaveImageHandle(LY,(S5I),(484+i),(null))set SZ2=nullendifif SG2==false or JF2<1 thenreturnendifif StringLength(I2S(JF2))>1 thencall JD2("Fonts\\"+SubString(I2S(JF2),0,1)+".blp",120,120,x-30,y,0,true)call SetImageColor(MK,r,g,b,a)set SH2=MKcall JD2("Fonts\\"+SubString(I2S(JF2),1,2)+".blp",120,120,x+30,y,0,true)call SetImageColor(MK,r,g,b,a)set SZ2=MKelsecall JD2("Fonts\\0.blp",120,120,x-30,y,0,true)call SetImageColor(MK,r,g,b,a)set SH2=MKcall JD2("Fonts\\"+SubString(I2S(JF2),0,1)+".blp",120,120,x+30,y,0,true)call SetImageColor(MK,r,g,b,a)set SZ2=MKendifcall SaveImageHandle(LY,(S5I),(476+i),(SH2))call SaveImageHandle(LY,(S5I),(484+i),(SZ2))set SH2=nullset SZ2=nullendfunctionfunction SV2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group SW2=NTI()local group SX2=NTI()local integer SY2local integer SJ2local real xlocal real ylocal rect rlocal player SK2local player SL2local integer i=0local integer Q4Ilocal unit CPlocal real Z7Olocal real SOI=(TimerGetElapsed(M))loopexitwhen i>5set r=(LoadRectHandle(LY,(S5I),(460+i)))set Q4I=(LoadInteger(LY,(S5I),(492+i)))set CP=(LoadUnitHandle(LY,(S5I),(452+i)))set SK2=GetOwningPlayer(CP)set SL2=(LoadPlayerHandle(LY,(S5I),(468+i)))set x=GetRectCenterX(r)set y=GetRectCenterY(r)call GroupEnumUnitsInRect(SW2,r,Condition(function SC2))call GroupEnumUnitsInRect(SX2,r,Condition(function SD2))set SY2=CountUnitsInGroup(SW2)set SJ2=CountUnitsInGroup(SX2)if(SY2>0 and SJ2>0)or(SY2==0 and SJ2==0)thenif SK2==EO thenset SL2=EOcall SavePlayerHandle(LY,(S5I),(468+i),(SL2))endifset Q4I=61call SaveInteger(LY,(S5I),(492+i),(Q4I))elseif SY2>0 and SJ2==0 thenset SL2=BO[1]call SavePlayerHandle(LY,(S5I),(468+i),(SL2))set Q4I=Q4I-SY2call SaveInteger(LY,(S5I),(492+i),(Q4I))elseif SJ2>0 and SY2==0 thenset SL2=CO[1]call SavePlayerHandle(LY,(S5I),(468+i),(SL2))set Q4I=Q4I-SJ2call SaveInteger(LY,(S5I),(492+i),(Q4I))endifif SL2==EO and SK2!=EO thencall SetUnitColor(CP,GetPlayerColor(SL2))call SetUnitOwner(CP,SL2,false)call SF2(i,Q4I,255,0,0,255,x,y,false)elseif SL2==SK2 thencall SF2(i,Q4I,255,0,0,255,x,y,false)set Q4I=61call SaveInteger(LY,(S5I),(492+i),(Q4I))elseif SL2!=EO thenif Q4I<61 thencall SF2(i,Q4I,255,0,0,255,x,y,true)elsecall SF2(i,Q4I,255,0,0,255,x,y,false)endifif Q4I<1 thencall PingMinimapEx(x,y,2,255,255,255,false)call PHI(SL2,"Sound\\Interface\\Rescue.wav")call SetUnitOwner(CP,SL2,false)set Q4I=61call SaveInteger(LY,(S5I),(492+i),(Q4I))call SaveReal(LY,(S5I),(500+i),((SOI)*1.0))if TII(SL2)thencall SetUnitColor(CP,GetPlayerColor(BO[0]))call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,"|c00ff0303The Sentinel now controls a Capture Point.|r")call ForGroup(SW2,function SE2)elsecall SetUnitColor(CP,GetPlayerColor(CO[0]))call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10,"|c00ff0303The Scourge now controls a Capture Point.|r")call ForGroup(SX2,function SE2)endifendifendifset i=i+1endloopcall NSI(SW2)call NSI(SX2)set SW2=nullset SX2=nullreturn falseendfunctionfunction SM2 takes nothing returns booleanlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local fogmodifier I31call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function SV2))call PingMinimapEx(GetRectCenterX(KB),GetRectCenterY(KB),4,255,255,255,false)call PingMinimapEx(GetRectCenterX(MB),GetRectCenterY(MB),4,255,255,255,false)call PingMinimapEx(GetRectCenterX(TB),GetRectCenterY(TB),4,255,255,255,false)call PingMinimapEx(GetRectCenterX(LB),GetRectCenterY(LB),4,255,255,255,false)call PingMinimapEx(GetRectCenterX(SB),GetRectCenterY(SB),4,255,255,255,false)call PingMinimapEx(GetRectCenterX(RB),GetRectCenterY(RB),4,255,255,255,false)set OGI=CreateUnit(EO,1852010546,GetRectCenterX(KB),GetRectCenterY(KB),0)set OHI=CreateUnit(EO,1852010546,GetRectCenterX(MB),GetRectCenterY(MB),0)set OZI=CreateUnit(EO,1852010546,GetRectCenterX(TB),GetRectCenterY(TB),0)set OVI=CreateUnit(EO,1852010546,GetRectCenterX(LB),GetRectCenterY(LB),0)set OWI=CreateUnit(EO,1852010546,GetRectCenterX(SB),GetRectCenterY(SB),0)set OXI=CreateUnit(EO,1852010546,GetRectCenterX(RB),GetRectCenterY(RB),0)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(KB),GetRectCenterY(KB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(KB),GetRectCenterY(KB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(MB),GetRectCenterY(MB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(MB),GetRectCenterY(MB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(TB),GetRectCenterY(TB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(TB),GetRectCenterY(TB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(LB),GetRectCenterY(LB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(LB),GetRectCenterY(LB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(SB),GetRectCenterY(SB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(SB),GetRectCenterY(SB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(BO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(RB),GetRectCenterY(RB),600,true,true)call FogModifierStart(I31)set I31=CreateFogModifierRadius(CO[1],FOG_OF_WAR_VISIBLE,GetRectCenterX(RB),GetRectCenterY(RB),600,true,true)call FogModifierStart(I31)call UVI("Speed",OGI,255,233,12)call UVI("Speed",OVI,255,233,12)call UVI("Combat",OHI,255,233,12)call UVI("Combat",OWI,255,233,12)call UVI("Regen",OZI,255,233,12)call UVI("Regen",OXI,255,233,12)call UnitAddAbility(OGI,1395667023)call UnitAddAbility(OVI,1395667026)call UnitAddAbility(OHI,1093750863)call UnitAddAbility(OHI,1093750860)call UnitAddAbility(OWI,1093750862)call UnitAddAbility(OWI,1093750858)call UnitAddAbility(OZI,1093750870)call UnitAddAbility(OZI,1093750854)call UnitAddAbility(OXI,1093750852)call UnitAddAbility(OXI,1093750853)set OYI=61set OJI=61set OKI=61set OLI=61set OMI=61set ONI=61call SaveUnitHandle(LY,(S5I),(452),(OGI))call SaveUnitHandle(LY,(S5I),(453),(OHI))call SaveUnitHandle(LY,(S5I),(454),(OZI))call SaveUnitHandle(LY,(S5I),(455),(OVI))call SaveUnitHandle(LY,(S5I),(456),(OWI))call SaveUnitHandle(LY,(S5I),(457),(OXI))call SaveReal(LY,(S5I),(500),((-1)*1.0))call SaveReal(LY,(S5I),(501),((-1)*1.0))call SaveReal(LY,(S5I),(502),((-1)*1.0))call SaveReal(LY,(S5I),(503),((-1)*1.0))call SaveReal(LY,(S5I),(504),((-1)*1.0))call SaveReal(LY,(S5I),(505),((-1)*1.0))call SaveRectHandle(LY,(S5I),(460),(KB))call SaveRectHandle(LY,(S5I),(461),(MB))call SaveRectHandle(LY,(S5I),(462),(TB))call SaveRectHandle(LY,(S5I),(463),(LB))call SaveRectHandle(LY,(S5I),(464),(SB))call SaveRectHandle(LY,(S5I),(465),(RB))call SavePlayerHandle(LY,(S5I),(468),(EO))call SavePlayerHandle(LY,(S5I),(469),(EO))call SavePlayerHandle(LY,(S5I),(470),(EO))call SavePlayerHandle(LY,(S5I),(471),(EO))call SavePlayerHandle(LY,(S5I),(472),(EO))call SavePlayerHandle(LY,(S5I),(473),(EO))call SaveInteger(LY,(S5I),(492),(61))call SaveInteger(LY,(S5I),(493),(61))call SaveInteger(LY,(S5I),(494),(61))call SaveInteger(LY,(S5I),(495),(61))call SaveInteger(LY,(S5I),(496),(61))call SaveInteger(LY,(S5I),(497),(61))call SaveImageHandle(LY,(S5I),(476),(null))call SaveImageHandle(LY,(S5I),(484),(null))call SaveImageHandle(LY,(S5I),(477),(null))call SaveImageHandle(LY,(S5I),(485),(null))call SaveImageHandle(LY,(S5I),(478),(null))call SaveImageHandle(LY,(S5I),(486),(null))call SaveImageHandle(LY,(S5I),(479),(null))call SaveImageHandle(LY,(S5I),(487),(null))call SaveImageHandle(LY,(S5I),(480),(null))call SaveImageHandle(LY,(S5I),(488),(null))call SaveImageHandle(LY,(S5I),(481),(null))call SaveImageHandle(LY,(S5I),(489),(null))call S0I(GetTriggeringTrigger())set t=nullreturn falseendfunctionfunction O02 takes nothing returns nothinglocal trigger tif OFI thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,600,false)call TriggerAddCondition(t,Condition(function SM2))set t=nullendifendfunctionfunction XV2 takes nothing returns nothingset OFI=trueendfunctionfunction SN2 takes nothing returns nothinglocal integer E81=EB1(GetEnumItem())if GetWidgetLife(GetEnumItem())>0 and GetItemPlayer(GetEnumItem())==A1I and E81!=VL0 and E81!=W30 and E81!=W40 and E81!=GZ0 and E81!=GV0 thenif IsItemVisible(GetEnumItem())thencall SetItemVisible(GetEnumItem(),false)elsecall SetItemVisible(GetEnumItem(),true)endifendifendfunctionfunction SS2 takes nothing returns nothinglocal player p=A1Ilocal region r=CreateRegion()local unit u=GetEnumUnit()local integer E81local integer i=0local item BA1local integer idlocal real xlocal real yif TII(p)thencall RegionAddRect(r,G5)set x=GetRectCenterX(G5)set y=GetRectCenterY(G5)elsecall RegionAddRect(r,H5)set x=GetRectCenterX(H5)set y=GetRectCenterY(H5)endifloopexitwhen i>5set BA1=UnitItemInSlot(u,i)set E81=EB1(BA1)if GetItemPlayer(BA1)==A1I and E81!=VL0 and E81!=W30 and E81!=W40 and E81!=GZ0 and E81!=GV0 thencall UnitRemoveItemFromSlot(u,i)set id=GetPlayerId(GetItemPlayer(BA1))call SetItemPosition(BA1,x,y)endifset i=i+1endloopcall RemoveRegion(r)set u=nullset r=nullendfunctionfunction ST2 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())==1852010352 or RYI(GetFilterUnit())or(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetFilterUnit())!=A1I and GetOwningPlayer(GetFilterUnit())!=BO[0]and GetOwningPlayer(GetFilterUnit())!=CO[0]))and IsUnitAlly(GetFilterUnit(),A1I)==trueendfunctionfunction SR2 takes player p returns nothinglocal integer i=0local item BA1local integer id=GetPlayerId(p)local group g=NTI()set A1I=pcall GroupEnumUnitsInRange(g,0,0,99999,Condition(function ST2))call ForGroup(g,function SS2)call NSI(g)endfunctionfunction SP2 takes player p returns nothingset A1I=pcall EnumItemsInRectBJ(bj_mapInitialPlayableArea,function SN2)endfunctionfunction SQ2 takes unit u returns nothinglocal unit AD1=ulocal player I6O=GetOwningPlayer(u)local location I2Oif TOI(I6O)thenset I2O=GetRectCenter(S3)elseset I2O=GetRectCenter(O4)endifif Q2==false and IC1(AD1)thencall VQ1(AD1,I6O,GetLocationX(I2O),GetLocationY(I2O),true)if I0O(AD1)==false or GetUnitAbilityLevel(AD1,1093684567)==0 thencall ReviveHeroLoc(AD1,I2O,true)elsecall IOO(AD1,I2O)endifendifcall RemoveLocation(I2O)set AD1=nullset I6O=nullset I2O=nullendfunctionfunction SU2 takes unit T02,unit TI2 returns nothinglocal player p=GetOwningPlayer(TI2)local integer id=GetPlayerId(p)call SetHeroXP(TI2,GetHeroXP(T02),true)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,(LoadInteger(LY,(GetHandleId(TI2)),(787)))+OUI[id])set OQI[id]=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)set OUI[id]=0endfunctionfunction T12 takes integer id,unit R5I returns booleanreturn SGI(DC0[id])!=SEI(R5I)endfunctionfunction TO2 takes unit u returns integerreturn 255endfunctionfunction T22 takes unit u returns integerreturn 255endfunctionfunction T32 takes unit u returns integerreturn 255endfunctionfunction T42 takes unit u,integer id,player p returns nothinglocal player p1=GetOwningPlayer(u)local player p2local integer ilocal item FH1if TII(GetOwningPlayer(u))thenset p2=BO[0]elseset p2=CO[0]endifcall SaveInteger(LY,(GetHandleId(u)),(787),(GetPlayerState(GetOwningPlayer(u),PLAYER_STATE_RESOURCE_GOLD)))call SaveBoolean(LY,(GetHandleId(u)),(140),(false))call SaveInteger(LY,(GetHandleId((u))),((4259)),(1))call UnitAddAbility(u,1093678162)call BK1(u,true)call PauseUnit(u,true)call SetUnitVertexColor(u,TO2(u),T22(u),T32(u),150)call SelectUnitRemoveForPlayer(u,GetOwningPlayer(u))call SetUnitOwner(u,p2,false)call SetUnitPathing(u,false)call SetUnitX(u,GetUnitX(D30[id]))call SetUnitY(u,GetUnitY(D30[id]))set i=0loopexitwhen i>5if UnitItemInSlot(u,i)==null thenset FH1=CreateItem(1227895373,GetUnitX(u),GetUnitY(u))call UnitAddItem(u,FH1)endifset i=i+1endloopset p1=nullset p2=nullendfunctionfunction T52 takes unit u,integer id,player p returns nothinglocal integer iset K1[id]=ucall SaveBoolean(LY,(GetHandleId(u)),(140),(false))call SaveInteger(LY,(GetHandleId((u))),((4259)),(2))call UnitRemoveAbility(u,1093678162)call BK1(u,false)call PauseUnit(u,false)call SetUnitVertexColor(u,TO2(u),T22(u),T32(u),255)call SelectUnitAddForPlayer(u,GetOwningPlayer(u))call SetUnitOwner(u,p,false)call SetUnitPathing(u,true)if TII(Player(id))==true thencall SetUnitPosition(u,GetRectCenterX(O4),GetRectCenterY(O4))elsecall SetUnitPosition(u,GetRectCenterX(S3),GetRectCenterY(S3))endifset i=0loopexitwhen i>5if GetItemTypeId(UnitItemInSlot(u,i))==1227895373 thencall EL1(UnitItemInSlot(u,i))endifset i=i+1endloopendfunctionfunction T62 takes integer id returns booleanlocal region r=CreateRegion()local boolean FB1=falseif TII(Player(id))==true thencall RegionAddRect(r,F4)elsecall RegionAddRect(r,E4)endifif IsUnitInRegion(r,ORI[id])and IsUnitInRegion(r,OPI[id])thenset FB1=trueendifcall RemoveRegion(r)return FB1 or IC1(ORI[id])or IC1(OPI[id])endfunctionfunction T72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer id=(LoadInteger(LY,(S5I),(34)))local integer T82=GetTriggerEvalCount(t)local player p=Player(id)if T82==1 thencall SR2(p)elseif T82==2 thencall SP2(p)elseif T82==3 thenif K1[id]==ORI[id]thencall SQ2(ORI[id])call T42(ORI[id],id,p)call T52(OPI[id],id,p)call SU2(ORI[id],OPI[id])elsecall SQ2(OPI[id])call T42(OPI[id],id,p)call T52(ORI[id],id,p)call SU2(OPI[id],ORI[id])endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifreturn falseendfunctionfunction T92 takes nothing returns booleanlocal integer id=GetPlayerId(GetTriggerPlayer())local real SOI=(TimerGetElapsed(M))local trigger tlocal integer S5Iif(SOI-OTI[id])<180 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848659282)+": "+I2S(R2I(180-(SOI-OTI[id]))))elseif T62(id)==false thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10,GetObjectName(1848659283))elseset OTI[id]=SOIset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function T72))call SaveInteger(LY,(S5I),(34),(id))set t=nullendifreturn falseendfunctionfunction TA2 takes nothing returns booleanlocal integer i=1local integer idlocal integer TB2local integer ADOlocal player ploopexitwhen i>5set p=BO[i]set id=GetPlayerId(p)set ADO=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if OQI[id]<ADO and AII[id]==false thenset OUI[id]=OUI[id]+ADO-OQI[id]endifset OQI[id]=ADOif AII[id]==true thenset AII[id]=falseendifset p=CO[i]set id=GetPlayerId(p)set ADO=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)if OQI[id]<ADO and AII[id]==false thenset OUI[id]=OUI[id]+ADO-OQI[id]endifset OQI[id]=ADOif AII[id]==true thenset AII[id]=falseendifset i=i+1endloopreturn falseendfunctionfunction TC2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer O91=(LoadInteger(LY,(S5I),(55)))local player plocal integer TJIlocal location ZC1=GetRectCenter(O4)local location ZD1=GetRectCenter(S3)local integer idif O91<6 thenset p=BO[O91]set id=GetPlayerId(p)elseif O91<11 thenset p=CO[O91-5]set id=GetPlayerId(p)endifif O91>10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(A0I,0.1,true)call TriggerAddCondition(A0I,Condition(function TA2))elseif O91<6 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[GetPlayerId(p)]=nullif T3I(p)thenloopexitwhen K1[GetPlayerId(p)]!=nullset TJI=TYI()if R[TJI]==false thenif not F2 thenset R[TJI]=trueendifset K1[id]=CreateUnitAtLoc(p,DC0[TJI],ZC1,bj_UNIT_FACING)set ORI[id]=K1[id]call T42(K1[id],id,p)endifendloopendifelseif O91<11 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[GetPlayerId(p)]=nullif T3I(p)thenloopexitwhen K1[id]!=nullset TJI=TYI()if R[TJI]==false thenif not F2 thenset R[TJI]=trueendifset K1[id]=CreateUnitAtLoc(p,DC0[TJI],ZD1,bj_UNIT_FACING)set ORI[id]=K1[id]call T42(K1[id],id,p)endifendloopendifendifif O91<6 thenset p=BO[O91]elseif O91<11 thenset p=CO[O91-5]endifif O91<6 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[GetPlayerId(p)]=nullif T3I(p)thenloopexitwhen K1[id]!=nullset TJI=TYI()if R[TJI]==false and T12(TJI,ORI[id])thenif not F2 thenset R[TJI]=trueendifset K1[id]=CreateUnitAtLoc(p,DC0[TJI],ZC1,bj_UNIT_FACING)set OPI[id]=K1[id]set OQI[id]=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)call T52(K1[id],id,p)call SaveUnitHandle(LY,(GetHandleId(OPI[id])),(788),(ORI[id]))call SaveUnitHandle(LY,(GetHandleId(ORI[id])),(788),(OPI[id]))endifendloopendifelseif O91<11 thencall SaveInteger(LY,(S5I),(55),(O91+1))set K1[id]=nullif T3I(p)thenloopexitwhen K1[id]!=nullset TJI=TYI()if R[TJI]==false and T12(TJI,ORI[id])thenif not F2 thenset R[TJI]=trueendifset K1[id]=CreateUnitAtLoc(p,DC0[TJI],ZD1,bj_UNIT_FACING)set OPI[id]=K1[id]set OQI[id]=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)call T52(K1[id],id,p)call SaveUnitHandle(LY,(GetHandleId(OPI[id])),(788),(ORI[id]))call SaveUnitHandle(LY,(GetHandleId(ORI[id])),(788),(OPI[id]))endifendloopendifendifcall RemoveLocation(ZC1)call RemoveLocation(ZD1)set ZC1=nullset ZD1=nullset p=nullset t=nullreturn falseendfunctionfunction XW2 takes nothing returns nothinglocal integer i=1local integer idlocal real SOI=(TimerGetElapsed(M))local trigger tset OSI=trueset A3=falseset GL=falsecall TCI(1211117641)call TCI(1328558160)call TCI(1211117653)loopexitwhen i>5set id=GetPlayerId(BO[i])set AII[id]=falseset OTI[id]=SOI-180set OUI[id]=0set id=GetPlayerId(CO[i])set AII[id]=falseset OTI[id]=SOI-180set OUI[id]=0set i=i+1endloopset t=CreateTrigger()call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddCondition(t,Condition(function TC2))call SaveInteger(LY,(GetHandleId(t)),(55),(1))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-tt",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-tt",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-tt",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-tt",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-tt",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-tt",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-tt",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-tt",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-tt",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-tt",true)call TriggerAddCondition(t,Condition(function T92))set t=nullendfunctionfunction TD2 takes nothing returns nothingset Q[1]=0endfunctionfunction TF2 takes nothing returns nothingset Q[2]=0endfunctionfunction TH2 takes nothing returns nothingset Q[3]=0endfunctionfunction TV2 takes nothing returns nothingset Q[4]=0endfunctionfunction TX2 takes nothing returns nothingset Q[5]=0endfunctionfunction TJ2 takes nothing returns nothingset Q[7]=0endfunctionfunction TL2 takes nothing returns nothingset Q[8]=0endfunctionfunction TN2 takes nothing returns nothingset Q[9]=0endfunctionfunction TT2 takes nothing returns nothingset Q[10]=0endfunctionfunction TP2 takes nothing returns nothingset Q[11]=0endfunctionfunction TU2 takes nothing returns nothinglocal integer i=1local string idlocal player ploopexitwhen i>5set p=BO[i]set id=I2S(GetPlayerId(p))call StoreInteger(OS,id,"id",i)set p=CO[i]set id=I2S(GetPlayerId(p))call StoreInteger(OS,id,"id",i+5)if GetLocalPlayer()==WO thencall SyncStoredInteger(OS,I2S(GetPlayerId(BO[i])),"id")call SyncStoredInteger(OS,I2S(GetPlayerId(CO[i])),"id")endifset i=i+1endloopendfunctionfunction R02 takes nothing returns booleanif J2 thencall TVI()call QRI(bj_FORCE_ALL_PLAYERS,20.00,C0[GetPlayerId(WO)]+(D80[GetPlayerId((WO))])+"|r"+" "+GetObjectName(1848656717))call QRI(bj_FORCE_ALL_PLAYERS,20.00," ")set AL=truecall VU2()call HJ2()call P7O()call UHO()call UR1()endifcall TU2()call S0I(GetTriggeringTrigger())return falseendfunctionfunction RI2 takes nothing returns booleanset B0=truecall S0I(GetTriggeringTrigger())return falseendfunctionfunction RO2 takes nothing returns nothingset O0=trueendfunctionfunction R32 takes nothing returns nothingset UO=trueendfunctionfunction R52 takes nothing returns nothingset H3=trueendfunctionfunction R72 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(GK)thencall SetUnitOwner(GetFilterUnit(),GetOwningPlayer(GK),true)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",GetFilterUnit(),"origin"))endifreturn falseendfunctionfunction R82 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local item BA1=(LoadItemHandle(LY,(S5I),(96)))local group glocal real x=GetUnitX(SFI)local real y=GetUnitY(SFI)if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==BA1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM thenif IC1(SFI)==false thenset g=NTI()set GK=SFIcall GroupEnumUnitsInRange(g,x,y,1000,Condition(function R72))call NSI(g)set g=nullendifendifset t=nullset SFI=nullset BA1=nullreturn falseendfunctionfunction R92 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function R82))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveItemHandle(LY,(S5I),(96),(GetManipulatedItem()))set t=nullset SFI=nullendfunctionfunction GenuineMKB_Main takes nothing returns booleanif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and F01(GetManipulatedItem())==XZ0 thencall R92()endifreturn falseendfunctionfunction RA2 takes string s returns nothingcall QRI(bj_FORCE_ALL_PLAYERS,20.00,"|c00CC0000"+GetObjectName(1848659525)+": |r|c006699CC"+s+"|r")call StartSound(XF)endfunctionfunction RB2 takes nothing returns nothingcall RA2(GetObjectName((1848659527)))call CreateItem(FT0[XZ0],GetUnitX(A8I),GetUnitY(A8I))call ReviveHero(A8I,GetUnitX(A8I),GetUnitY(A8I),false)call RemoveUnit(A8I)endfunctionfunction RC2 takes nothing returns nothingcall RA2(GetObjectName((1848659528)))call SetItemVisible(A4I,true)call SetItemPosition(A4I,GetUnitX(A8I),GetUnitY(A8I))call RemoveUnit(A8I)endfunctionfunction RD2 takes nothing returns booleanlocal item i=ES1(GetFilterUnit(),FR0[W60])if i!=null thencall RemoveItem(i)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetFilterUnit(),"chest"))endifset i=nullreturn falseendfunctionfunction RE2 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(A8I)thencall SetUnitOwner(GetFilterUnit(),GetOwningPlayer(A8I),true)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",GetFilterUnit(),"origin"))endifreturn falseendfunctionfunction RF2 takes nothing returns nothinglocal unit P7I=GetEnumUnit()local integer x=0local item iif IsUnitIllusion(P7I)==true thenreturnendifloopexitwhen x>5set i=UnitItemInSlot(P7I,x)call UnitRemoveItem(P7I,i)set x=x+1endloopset P7I=nullendfunctionfunction RG2 takes nothing returns nothinglocal unit P7I=GetEnumUnit()local integer x=0local unit I01if IsUnitIllusion(P7I)==true thenreturnendifset I01=CreateUnit(GetOwningPlayer(A8I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093817945)call IssueTargetOrder(I01,"ensnare",P7I)set P7I=nullset I01=nullendfunctionfunction RH2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(A8I)local real y=GetUnitY(A8I)local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullcall RB2()return falseelseif GetTriggerEvalCount(t)>12000 or(AOI and GetTriggerEvalCount(t)>600)thencall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullif AOI thencall RB2()elsecall RC2()endifreturn falseendifset g=NTI()call GroupEnumUnitsInRange(g,x,y,1000,Condition(function RE2))call NSI(g)set g=NTI()call GroupEnumUnitsInRange(g,x,y,1000,Condition(function RD2))call NSI(g)if ModuloInteger(GetTriggerEvalCount(t),200)==0 thenset g=NTI()call GroupEnumUnitsInRange(g,x,y,1000,Condition(function D51))call ForGroup(g,function RF2)call NSI(g)endifif ModuloInteger(GetTriggerEvalCount(t),300)==0 thenset g=NTI()call GroupEnumUnitsInRange(g,x,y,1000,Condition(function D51))call ForGroup(g,function RG2)call NSI(g)endifset g=nullset t=nullreturn falseendfunctionfunction RZ2 takes nothing returns booleanlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitInvulnerable(A8I,false)call UnitRemoveAbility(A8I,1096971630)call RA2(GetObjectName((1848659524)))set A3I=truecall TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,A8I)call TriggerAddCondition(t,Condition(function RH2))set t=nullreturn falseendfunctionfunction RV2 takes nothing returns nothinglocal trigger t=CreateTrigger()call RA2(GetObjectName((1848659512)))call SetUnitInvulnerable(A8I,true)call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function RZ2))set t=nullendfunctionfunction RW2 takes nothing returns nothingcall RA2(GetObjectName((1848659526)))if AOI thencall RV2()elsecall RemoveUnit(A8I)endifendfunctionfunction RX2 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(A8I),GetUnitY(A8I),1000,Condition(function D51))set ACI=GroupPickRandomUnit(g)call NSI(g)set g=nullendfunctionfunction RY2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x0local real y0local real x1local real y1local real x2local real y2local real x3local real y3local integer r=GetRandomInt(0,2)if GetTriggerEvalCount(t)==1 thencall RX2()if ACI==null thencall RemoveUnit(A8I)call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendifcall RA2(GetObjectName((1848659521)))call SaveEffectHandle(LY,(GetHandleId(t)),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",ACI,"overhead")))if r==0 thenset x0=AFIset y0=AGIset x1=AHIset y1=AZIset x2=AVIset y2=AWIset x3=AXIset y3=AYIelseif r==1 thenset x0=AVIset y0=AWIset x1=AFIset y1=AGIset x2=AHIset y2=AZIset x3=AXIset y3=AYIelseif r==2 thenset x0=AHIset y0=AZIset x1=AXIset y1=AYIset x2=AVIset y2=AWIset x3=AFIset y3=AGIendifcall ClearSelection()call SetUnitPosition(A8I,x0,y0)set A9I=CreateUnit(GetOwningPlayer(A8I),1211123027,x1,y1,GetUnitFacing(A8I))set AAI=CreateUnit(GetOwningPlayer(A8I),1211123027,x2,y2,GetUnitFacing(A8I))set ABI=CreateUnit(GetOwningPlayer(A8I),1211123027,x3,y3,GetUnitFacing(A8I))call IssueImmediateOrder(ACI,"holdposition")call SetUnitVertexColor(A9I,220,255,255,255)call SetUnitVertexColor(AAI,220,255,255,255)call SetUnitVertexColor(ABI,220,255,255,255)call TriggerRegisterUnitEvent(t,A8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,A9I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,AAI,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,ABI,EVENT_UNIT_DAMAGED)call PauseUnit(A8I,true)call SetUnitInvulnerable(A8I,false)call PauseUnit(A9I,true)call PauseUnit(AAI,true)call PauseUnit(ABI,true)call SetHeroLevel(A9I,25,false)call SetHeroLevel(AAI,25,false)call SetHeroLevel(ABI,25,false)if AOI thencall SetUnitVertexColor(A8I,0,255,255,255)endifelseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>0 and GetEventDamageSource()==ACI thencall PauseUnit(A8I,false)call PauseUnit(A9I,false)call PauseUnit(AAI,false)call PauseUnit(ABI,false)call RemoveUnit(A9I)call RemoveUnit(AAI)call RemoveUnit(ABI)if GetTriggerUnit()==A8I thencall RV2()elsecall RW2()endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction RJ2 takes nothing returns nothinglocal trigger t=CreateTrigger()call RA2(GetObjectName((1848659522)))call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function RY2))set t=nullendfunctionfunction RK2 takes nothing returns nothingcall RA2(GetObjectName((1848659523)))if AOI thencall RJ2()elsecall RemoveUnit(A8I)endifendfunctionfunction RL2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local real x0=2897local real y0=-2814local real x1=GetUnitX(A8I)local real y1=GetUnitY(A8I)local real RM2local real RN2local real RS2local real RT2local real IV1local real IW1local location llocal real d=QNI(ADI,AEI,2897,-2814)local real r=d/200local real RR2=0.1if QNI(GetUnitX(ACI),GetUnitY(ACI),2897,-2814)<100 thencall RJ2()call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call SetUnitAnimationByIndex(A8I,0)call SetUnitFlyHeight(A8I,GetUnitDefaultFlyHeight(A8I),0)call SetUnitPosition(A8I,2897,-2814)call PauseUnit(A8I,false)call SetUnitPathing(A8I,true)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendifset RM2=UEI(x1,y1,x0,y0)set RT2=(NPI-100)*(NPI-100)*RR2set IV1=x1+r*Cos(RM2*bj_DEGTORAD)set IW1=y1+r*Sin(RM2*bj_DEGTORAD)if NPI<201 thencall SetUnitFlyHeight(A8I,10000*RR2-RT2,0)call SetUnitPosition(A8I,IV1,IW1)elsecall SetUnitFlyHeight(A8I,GetUnitDefaultFlyHeight(A8I),0)call PauseUnit(A8I,false)call SetUnitPathing(A8I,true)set l=Location(IV1,IW1)call TerrainDeformationRippleBJ(0.2,true,l,1.00,300.00,96.00,1,64.00)call RemoveLocation(l)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(A8I),GetUnitY(A8I)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call SetUnitAnimationByIndex(A8I,0)call FlushChildHashtable(LY,(S5I))call S0I(t)call RK2()endifset t=nullreturn falseendfunctionfunction RP2 takes effect RQ2,effect RU2 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01call SetUnitPosition(A8I,ADI,AEI)set I01=CreateUnit(GetOwningPlayer(A8I),1697656901,GetUnitX(A8I),GetUnitY(A8I),0)call SetUnitPosition(ACI,GetUnitX(A8I)+50,GetUnitY(A8I)+50)call PauseUnit(A8I,false)call PauseUnit(ACI,false)call IA1(A8I,1097691750)call UnitRemoveAbility(A8I,1097691750)call IA1(I01,1093817945)call IssueTargetOrder(I01,"ensnare",ACI)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function RL2))call SaveEffectHandle(LY,(S5I),(175),(RQ2))call SaveEffectHandle(LY,(S5I),(176),(RU2))set t=nullset I01=nullendfunctionfunction P02 takes nothing returns nothinglocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(A8I),GetUnitY(A8I),1800,Condition(function D51))set ACI=GroupPickRandomUnit(g)call NSI(g)set g=nullendfunctionfunction PI2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)if GetTriggerEvalCount(t)==1 thencall P02()if ACI==null thencall RemoveUnit(A8I)call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendifcall RA2(GetObjectName((1848659513)))call TriggerRegisterTimerEvent(t,1,true)call SaveEffectHandle(LY,(GetHandleId(t)),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",ACI,"overhead")))call SaveEffectHandle(LY,(GetHandleId(t)),(176),(AddSpecialEffect("Objects\\InventoryItems\\BattleStandard\\BattleStandard.mdl",2897,-2814)))call PingMinimap(2897,-2814,5)call SetUnitPosition(A8I,ADI,AEI)call SetUnitPosition(ACI,GetUnitX(A8I)+50,GetUnitY(A8I)+50)call PauseUnit(A8I,true)call SetUnitAnimationByIndex(A8I,7)call SetUnitPathing(A8I,false)call PauseUnit(ACI,true)elsecall RA2(I2S(6-GetTriggerEvalCount(t)))if GetTriggerEvalCount(t)==6 thencall RP2((LoadEffectHandle(LY,(S5I),(175))),(LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullreturn falseendfunctionfunction P12 takes nothing returns booleanif A3I==false thencall SetUnitState(A8I,UNIT_STATE_LIFE,GetUnitState(A8I,UNIT_STATE_MAX_LIFE))call SetUnitState(A8I,UNIT_STATE_MANA,GetUnitState(A8I,UNIT_STATE_MAX_MANA))endifreturn falseendfunctionfunction PO2 takes nothing returns nothinglocal trigger tif A2I==false or AOI thenset t=CreateTrigger()set A8I=CreateUnit(DO,1211123027,ADI,AEI,0)call IA1(A8I,1096971630)call PauseUnit(A8I,true)call SetUnitInvulnerable(A8I,true)call SetHeroLevel(A8I,25,false)call PingMinimap(ADI,AEI,4)call SetCameraPosition(GetUnitX(A8I),GetUnitY(A8I))call RA2(GetObjectName((1848659511)))call TriggerRegisterTimerEvent(t,20,false)call TriggerAddCondition(t,Condition(function PI2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,A8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function P12))endifset t=nullendfunctionfunction P22 takes nothing returns nothingendfunctionfunction P32 takes nothing returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local location l1=Location(x-450,y-450)local location l2=Location(x+450,y+450)local rect r=RectFromLoc(l1,l2)call RemoveLocation(l1)call RemoveLocation(l2)set A6I=falseset A7I=falsecall EnumItemsInRect(r,null,function P22)if A6I and A7I thencall SetItemVisible(A4I,false)call RemoveItem(A5I)call PO2()endifset l1=nullset l2=nullset r=nullendfunctionfunction Torrent_Damage takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction P52 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RT2local unit I01set RT2=0.6*(NPI-25)*(NPI-25)if NPI<51 and GetTriggerEventId()!=EVENT_UNIT_DEATH thenif ModuloInteger(NPI,5)==0 thencall P6I(P7I,P8I,1,3+3*SUI)endifif RNI(P8I)==false thencall SetUnitFlyHeight(P8I,500-RT2,0)endifelseset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093742924)call SetUnitAbilityLevel(I01,1093742924,SUI)call IssueTargetOrder(I01,"slow",P8I)if RNI(P8I)==false thencall SetUnitFlyHeight(P8I,GetUnitDefaultFlyHeight(P8I),0)endifif Q2==false thencall PauseUnit(P8I,false)endifcall SetUnitPathing(P8I,true)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction P62 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GKlocal unit P8I=GetEnumUnit()local integer SUI=UJcall PauseUnit(P8I,true)call SetUnitPathing(P8I,false)if RNI(P8I)==false thencall IA1(P8I,1097691750)call UnitRemoveAbility(P8I,1097691750)endifcall TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function P52))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveInteger(LY,(S5I),(5),(SUI))call P6I(P7I,P8I,1,30+30*SUI)set t=nullset P7I=nullset P8I=nullendfunctionfunction P72 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group g=NTI()local ubersplat AR1=CreateUbersplat(x,y,"THNN",255,255,255,255,false,false)call SetUbersplatRenderAlways(AR1,true)call I41(GetOwningPlayer(SFI),4,x,y,400)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(178))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(179))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(180))))call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",x,y))call DestroyEffect(AddSpecialEffect("effects\\TidalErruption.mdx",x,y))set GK=SFIset UJ=SUIcall GroupEnumUnitsInRange(g,x,y,225+25,Condition(function CE1))call ForGroup(g,function P62)call NSI(g)set t=nullset SFI=nullreturn falseendfunctionfunction P82 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(SFI,1093743414)local string s=""local real aif IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(SFI))==true or P0I(GetLocalPlayer())thenset s="Objects\\Spawnmodels\\Other\\IllidanFootprint\\IllidanWaterSpawnFootPrint.mdl"endifcall RemoveLocation(l)call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveInteger(LY,(S5I),(5),(SUI))set a=0call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))set a=1call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))set a=2call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))set a=3call SaveEffectHandle(LY,(S5I),(178),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))set a=4call SaveEffectHandle(LY,(S5I),(179),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))set a=5call SaveEffectHandle(LY,(S5I),(180),(AddSpecialEffect(s,x+40*Cos(a/6*360*bj_DEGTORAD),y+40*Sin(a/6*360*bj_DEGTORAD))))call TriggerRegisterTimerEvent(t,1.6,false)call TriggerAddCondition(t,Condition(function P72))set SFI=nullset t=nullset l=nullendfunctionfunction P92 takes nothing returns booleanif GetSpellAbilityId()==1093743414 thencall P82()endifreturn falseendfunctionfunction TG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function P92))set t=nullendfunctionfunction GY2 takes nothing returns nothingcall SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093743671,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093743672,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093742933,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093743673,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093743671,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093743672,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093742933,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093743673,false)endfunctionfunction PA2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and(GetEventDamage()>40 or IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(P8I)==1970107511 or GetUnitTypeId(P8I)==1700946284)and(LoadBoolean(LY,(GetHandleId(P7I)),(183)))==true thencall SaveBoolean(LY,(GetHandleId(P7I)),(183),(false))call SaveReal(LY,(GetHandleId(P7I)),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(P7I,1093742927)call UnitRemoveAbility(P7I,1093742930)call UnitRemoveAbility(P7I,1093743671)call UnitRemoveAbility(P7I,1093743672)call UnitRemoveAbility(P7I,1093742933)call UnitRemoveAbility(P7I,1093743673)call FlushChildHashtable(LY,(GetHandleId((LoadTriggerHandle(LY,(S5I),(35))))))call S0I((LoadTriggerHandle(LY,(S5I),(35))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction PB2 takes nothing returns booleanlocal trigger tlocal integer S5Ilocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_DEATH thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(183),(false))call SaveReal(LY,(GetHandleId(GetTriggerUnit())),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(GetTriggerUnit(),1093742927)call UnitRemoveAbility(GetTriggerUnit(),1093742930)call UnitRemoveAbility(GetTriggerUnit(),1093743671)call UnitRemoveAbility(GetTriggerUnit(),1093743672)call UnitRemoveAbility(GetTriggerUnit(),1093742933)call UnitRemoveAbility(GetTriggerUnit(),1093743673)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())elseif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(182)))thenif IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false thenset t=CreateTrigger()set S5I=GetHandleId(t)set P8I=GetTriggerUnit()set P7I=GetAttacker()call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function PA2))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveTriggerHandle(LY,(S5I),(35),(GetTriggeringTrigger()))set P8I=nullset P7I=nullset t=nullendifendifreturn falseendfunctionfunction PC2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real QZI=(TimerGetElapsed(M))local integer SUI=GetUnitAbilityLevel(SFI,1093743444)local real PD2=(LoadReal(LY,(GetHandleId(SFI)),(184)))local boolean PE2=(LoadBoolean(LY,(GetHandleId(SFI)),(183)))if QZI-PD2>16-SUI*3 and PE2==false and GetUnitTypeId(SFI)==1211119187 and IC1(SFI)==false thencall SaveBoolean(LY,(GetHandleId(SFI)),(183),(true))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function PB2))call SaveUnitHandle(LY,(S5I),(182),(SFI))call IA1(SFI,1093742927)call SetUnitAbilityLevel(SFI,1093742927,SUI)call IA1(SFI,1093742930)if SUI==1 thencall IA1(SFI,1093743671)elseif SUI==2 thencall IA1(SFI,1093743672)elseif SUI==3 thencall IA1(SFI,1093742933)elseif SUI==4 thencall IA1(SFI,1093743673)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093743671,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093743672,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093742933,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093743673,false)elseif PE2==false thencall UnitRemoveAbility(SFI,1093742927)call UnitRemoveAbility(SFI,1093742930)call UnitRemoveAbility(SFI,1093743671)call UnitRemoveAbility(SFI,1093743672)call UnitRemoveAbility(SFI,1093742933)call UnitRemoveAbility(SFI,1093743673)endifset t=nullset SFI=nullreturn falseendfunctionfunction PF2 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function PC2))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(181),(0))set SFI=nullset t=nullendfunctionfunction PG2 takes nothing returns booleanif GetLearnedSkill()==1093743444 and GetUnitAbilityLevel(GetTriggerUnit(),1093743444)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall PF2()endifreturn falseendfunctionfunction TH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function PG2))set t=nullendfunctionfunction PH2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local image i=(LoadImageHandle(LY,(S5I),(185)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093743428)thenif GetTriggerEventId()!=EVENT_UNIT_DEATH and RKI(P8I)==false thenif IsUnitHidden(P8I)thencall SetUnitX(P8I,x)call SetUnitY(P8I,y)elsecall SetUnitPosition(P8I,x,y)endifendifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093743428,false)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093742926 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093742926,true)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call ShowImage(i,false)call DestroyImage(i)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset i=nullset P7I=nullreturn falseendfunctionfunction PZ2 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real UJI=90local image i=CreateImage("Fonts\\X.blp",UJI,UJI,0,x-UJI/2,y-UJI/2,0,0,0,0,2)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local string fx=""local integer SUI=GetUnitAbilityLevel(P7I,1093742926)call SCI(P8I,4401,5)call IA1(P7I,1093743428)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093743428,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093742926,false)call SetImageRenderAlways(i,true)if IsUnitAlly(P7I,GetOwningPlayer(P8I))==false or IsUnitAlly(P8I,GetLocalPlayer())==true or P0I(GetLocalPlayer())thenset fx="effects\\BlackTide.mdx"call ShowImage(i,true)elsecall ShowImage(i,false)endifcall SetImageColor(i,255,0,0,255)call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(P7I),1865429338,x,y,0),1112820806,5)if IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thencall TriggerRegisterTimerEvent(t,8,false)elsecall TriggerRegisterTimerEvent(t,4,false)endifcall TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PH2))call SaveImageHandle(LY,(S5I),(185),(i))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(fx,P8I,"overhead")))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset P8I=nullset i=nullset t=nullendfunctionfunction PV2 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093742926 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or NNI(GetSpellTargetUnit())==false)thencall PZ2()endifelseif GetLearnedSkill()==1093742926 thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093743428,false)call IA1(GetTriggerUnit(),1093743428)endifendifreturn falseendfunctionfunction PW2 takes nothing returns booleanif GetSpellAbilityId()==1093742926 thenif(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendifreturn falseendfunctionfunction TZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function PV2))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function PW2))set t=nullendfunctionfunction PX2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer O91=1local player plocal real dlocal unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer PY2=(LoadInteger(LY,(S5I),(136)))local integer DC1=(LoadInteger(LY,(S5I),(188)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>DC1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseloopexitwhen O91>PY2set p=(LoadPlayerHandle(LY,(S5I),(1300+O91)))set d=(LoadReal(LY,(S5I),(1200+O91)))if p==null thenset O91=PY2elsecall SetUnitState(P8I,UNIT_STATE_LIFE,QDI(1,GetUnitState(P8I,UNIT_STATE_LIFE)-d/DC1))endifset O91=O91+1endloopendifset t=nullset p=nullset P8I=nullreturn falseendfunctionfunction PJ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local trigger PK2=(LoadTriggerHandle(LY,(S5I),(135)))local integer O91=GetTriggerEvalCount(t)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(PK2,1,true)call TriggerAddCondition(PK2,Condition(function PX2))call UnitRemoveAbility(P8I,1110456661)elseset S5I=GetHandleId(PK2)call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+0.5*GetEventDamage())call SavePlayerHandle(LY,(S5I),(1300+O91),(GetOwningPlayer(GetEventDamageSource())))call SaveReal(LY,(S5I),(1200+O91),((0.5*GetEventDamage())*1.0))call SaveInteger(LY,(S5I),(136),(O91))endifset t=nullset P8I=nullset p=nullset PK2=nullreturn falseendfunctionfunction PL2 takes nothing returns nothinglocal unit P7I=AKIlocal unit P8I=GetEnumUnit()local integer SUI=ALIlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer DC1=10local trigger PK2=CreateTrigger()call AH1(P8I,1093743158,1,DC1)call UnitMakeAbilityPermanent(P8I,true,1093743158)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093743158,false)call TriggerRegisterTimerEvent(t,DC1+0.01,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function PJ2))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveTriggerHandle(LY,(S5I),(135),(PK2))call SaveUnitHandle(LY,(GetHandleId(PK2)),(17),(P8I))call SaveInteger(LY,(GetHandleId(PK2)),(188),(DC1))set P7I=nullset P8I=nullset t=nullset PK2=nullendfunctionfunction PM2 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),AJI)==false thencall GroupAddUnit(AJI,GetFilterUnit())return trueendifreturn falseendfunctionfunction PN2 takes nothing returns nothinglocal unit P7I=AKIlocal unit P8I=GetEnumUnit()local integer SUI=ALIcall DD1(P7I,P8I,1.4)call P6I(P7I,P8I,1,300+100*SUI)set P7I=nullset P8I=nullendfunctionfunction PS2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local unit PT2local real RM2=(LoadReal(LY,(S5I),(13)))local real QXI=GetUnitX(IG1)local real QYI=GetUnitY(IG1)local real QJI=(LoadReal(LY,(S5I),(66)))local real QKI=(LoadReal(LY,(S5I),(67)))local integer NPI=GetTriggerEvalCount(t)local real IV1=PTI(QJI+13.33*NPI*Cos(RM2))local real IW1=PUI(QKI+13.33*NPI*Sin(RM2))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group gif NPI<19 thencall SetUnitVertexColor(IG1,255,255,255,5+NPI*10)set PT2=(LoadUnitHandle(LY,(S5I),(186)))call SetUnitVertexColor(PT2,255,255,255,5+NPI*10)elseif NPI<125 thencall SetUnitVertexColor(IG1,255,255,255,190)elseif NPI<150 thenendifset g=NTI()set AJI=PR2set GK=IG1set AKI=IG1set ALI=SUIcall GroupEnumUnitsInRange(g,GetUnitX(IG1),GetUnitY(IG1),425,Condition(function PM2))call ForGroup(g,function PL2)call NSI(g)call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)if NPI==140 thenset PT2=(LoadUnitHandle(LY,(S5I),(186)))call KillUnit(PT2)elseif NPI<140 thenset PT2=(LoadUnitHandle(LY,(S5I),(186)))call SetUnitX(PT2,IV1)call SetUnitY(PT2,IW1)endifif NPI==150 thenset g=NTI()set GK=IG1call GroupEnumUnitsInRange(g,IV1,IW1,425+25,Condition(function CA1))call ForGroup(g,function PN2)call NSI(g)call KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset IG1=nullset PT2=nullset PR2=nullset g=nullreturn falseendfunctionfunction PP2 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real QXI=GetUnitX(SFI)local real QYI=GetUnitY(SFI)local location l=GetSpellTargetLoc()local real x0=GetLocationX(l)local real y0=GetLocationY(l)local real RM2local real x1local real y1local real x2local real y2local trigger tlocal integer S5Ilocal integer SUIlocal unit IG1local unit PT2local string s=""local integer PQ2=1747990101if GetRandomInt(0,5)==0 thenset PQ2=1747993674endifif IsPlayerAlly(GetOwningPlayer(SFI),GetLocalPlayer())or P0I(GetLocalPlayer())thenset s="war3mapImported\\Whirlpool.mdx"endifif x0==GetUnitX(SFI)and y0==GetUnitY(SFI)thenset x0=x0+50*Cos(GetUnitFacing(SFI)*bj_DEGTORAD)set y0=y0+50*Sin(GetUnitFacing(SFI)*bj_DEGTORAD)endifset RM2=Atan2(y0-QYI,x0-QXI)set x1=QXI-1000*Cos(RM2)set y1=QYI-1000*Sin(RM2)set x2=QXI+1000*Cos(RM2)set y2=QYI+1000*Sin(RM2)set t=CreateTrigger()set S5I=GetHandleId(t)set SUI=GetUnitAbilityLevel(SFI,1093742923)set IG1=CreateUnit(GetOwningPlayer(SFI),PQ2,x1,y1,Atan2(y0-QYI,x0-QXI)*bj_RADTODEG)set PT2=CreateUnit(GetOwningPlayer(SFI),1747990102,x1,y1,Atan2(y0-QYI,x0-QXI)*bj_RADTODEG)call SetUnitVertexColor(IG1,255,255,255,0)call SetUnitPathing(IG1,false)call RemoveLocation(l)call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(186),(PT2))call SaveReal(LY,(S5I),(66),((x1)*1.0))call SaveReal(LY,(S5I),(67),((y1)*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call DestroyEffect(AddSpecialEffect(s,PTI(x2),PUI(y2)))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function PS2))set SFI=nullset t=nullset IG1=nullset PT2=nullset l=nullendfunctionfunction PU2 takes nothing returns booleanif GetSpellAbilityId()==1093742923 thencall PP2()endifreturn falseendfunctionfunction TV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PU2))call Q1I(1093742924)set t=nullendfunctionfunction Q02 takes nothing returns nothingcall P6I(AMI,GetEnumUnit(),2,ATI)call DD1(AMI,GetEnumUnit(),ASI)endfunctionfunction QI2 takes unit P7I,unit P8I,real UH1 returns nothinglocal group glocal integer SUI=GetUnitAbilityLevel(P7I,1093750345)local real xlocal real yset AMI=P7Iset ATI=(80+70*SUI)*UH1/5.0set ASI=(1+0.75*SUI)*UH1/5.0set ANI=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(ANI,1093687350)call SetUnitAbilityLevel(ANI,1093687350,DB1(ASI))set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),175+25,Condition(function CA1))if GetUnitTypeId(P8I)!=1747993156 thencall GroupAddUnit(g,P8I)endifcall ForGroup(g,function Q02)call NSI(g)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",GetUnitX(P8I),GetUnitY(P8I)))endfunctionfunction Q12 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real UH1=(LoadReal(LY,(S5I),(444)))local real QO2=(LoadReal(LY,(S5I),(445)))local real RM2=UEI(GetUnitX(IG1),GetUnitY(IG1),GetUnitX(P8I),GetUnitY(P8I))local real x=GetUnitX(IG1)+18*Cos(RM2*bj_DEGTORAD)local real y=GetUnitY(IG1)+18*Sin(RM2*bj_DEGTORAD)call SetUnitX(IG1,x)call SetUnitY(IG1,y)if QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))<=18 thencall KillUnit(IG1)call QI2(P7I,P8I,UH1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction Q22 takes unit P7I,unit P8I,real UH1,real QO2 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993156,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(444),((UH1)*1.0))call SaveReal(LY,(S5I),(445),((QO2)*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function Q12))set t=nullset IG1=nullendfunctionfunction Q32 takes string UWI,unit P8I,unit SFI returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,0.033)call SetTextTagPosUnit(tt,P8I,64)call SetTextTagColor(tt,255,0,0,255)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,0.15)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,0.65)if IsUnitAlly(SFI,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifset tt=nullendfunctionfunction Q42 takes real DC1 returns stringif DC1>4.5 thenreturn"5.0"elseif DC1>4.0 thenreturn"4.5"elseif DC1>3.5 thenreturn"4.0"elseif DC1>3.0 thenreturn"3.5"elseif DC1>2.5 thenreturn"3.0"elseif DC1>2.0 thenreturn"2.5"elseif DC1>1.5 thenreturn"2.0"elseif DC1>1.0 thenreturn"1.5"elseif DC1>0.5 thenreturn"1.0"elseif DC1>0.0 thenreturn"0.5"elsereturn"0.0"endifreturn" "endfunctionfunction Q52 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QO2=(LoadReal(LY,(S5I),(442)))local real GW1=(TimerGetElapsed(M))local real BQO=5.0-(GW1-QO2)local real QHI=QCI(GW1-QO2,5.0)local integer NPI=(LoadInteger(LY,(S5I),(34)))+1if GetTriggerEventId()==EVENT_UNIT_DEATH thencall QI2(P7I,P7I,5.0)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093750345 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750345,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750344,false)call SetUnitVertexColor(P7I,255,255,255,255)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093750344 thenif NNI(GetSpellTargetUnit())==false thencall Q22(P7I,GetSpellTargetUnit(),QHI,QO2)endifif(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093750345 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750345,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750344,false)call SetUnitVertexColor(P7I,255,255,255,255)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall SaveInteger(LY,(S5I),(34),(NPI))if BQO>=0 thencall Q32(Q42(BQO),P7I,P7I)if ModuloInteger(NPI,2)==0 thencall SetUnitVertexColor(P7I,255,125,125,255)elsecall SetUnitVertexColor(P7I,255,175,175,255)endifelsecall SetUnitVertexColor(P7I,255,0,0,255)endifif GW1-QO2>(5.0+0.5)thencall QI2(P7I,P7I,5.0)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093750345 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750345,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750344,false)call SetUnitVertexColor(P7I,255,255,255,255)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction Q62 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local string s="war3mapImported\\UnstableConcoctionRangeDisplay3.mdx"if GetLocalPlayer()!=GetOwningPlayer(P7I)thenset s=""endifcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M)))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(s,P7I,"origin")))call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Q52))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750345,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750344,true)call IA1(P7I,1093750344)call UnitMakeAbilityPermanent(P7I,true,1093750344)call TriggerEvaluate(t)set P7I=nullset t=nullendfunctionfunction Q72 takes nothing returns booleanif GetSpellAbilityId()==1093750345 thencall Q62()endifreturn falseendfunctionfunction NA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Q72))call Q1I(1093687350)set t=nullendfunctionfunction Q82 takes nothing returns booleanreturn GetUnitAbilityLevel(GetKillingUnit(),1093685043)>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Q92 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit u=(LoadUnitHandle(LY,(S5I),(26)))call SaveInteger(LY,(GetHandleId(u)),(27),((LoadInteger(LY,(GetHandleId(u)),(27)))-1))call FlushChildHashtable(LY,(S5I))call S0I(t)set u=nullset t=nullreturn falseendfunctionfunction QA2 takes nothing returns nothinglocal unit PKI=GetKillingUnit()local unit QB2=GetTriggerUnit()local integer S5I=GetHandleId(PKI)local integer QC2=(LoadInteger(LY,(S5I),(27)))local integer SUI=GetUnitAbilityLevel(PKI,1093685043)local integer QD2=4+8*SUIlocal integer QE2=QC2*3local integer QF2=Q9I(QE2+SUI*2+4,QD2)local texttag tt=CreateTextTag()local player p=GetOwningPlayer(PKI)local trigger t=CreateTrigger()set ARI[GetPlayerId(p)]=ARI[GetPlayerId(p)]+QF2call TriggerRegisterTimerEvent(t,30,false)call TriggerAddCondition(t,Condition(function Q92))call SaveUnitHandle(LY,(GetHandleId(t)),(26),(PKI))call SaveInteger(LY,(S5I),(27),(QC2+1))call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,QF2+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))call SetTextTagText(tt,"+"+I2S(QF2),0.025)call SetTextTagPosUnit(tt,QB2,0)call SetTextTagColor(tt,255,220,0,255)call SetTextTagVelocity(tt,0,0.03)if GetLocalPlayer()==p thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall SetTextTagFadepoint(tt,2)call SetTextTagLifespan(tt,3)call SetTextTagPermanent(tt,false)set t=nullendfunctionfunction QG2 takes nothing returns booleanlocal integer EB2=ARI[GetPlayerId(GetTriggerPlayer())]if(GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781193 or GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781192 or GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781204 or GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781194)and EB2>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848657745)+" "+I2S(EB2))endifreturn falseendfunctionfunction N91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Q82))call TriggerAddAction(t,function QA2)set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function QG2))set t=nullendfunctionconstant function AcidSpray_RawCode takes nothing returns integerreturn 1093683532endfunctionconstant function AcidSpray_EffectCode takes nothing returns integerreturn 1093683764endfunctionfunction QH2 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683532)endfunctionfunction QZ2 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848657461endfunctionfunction QV2 takes nothing returns nothingcall P6I(XO,GetEnumUnit(),2,JO)endfunctionfunction QW2 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer QX2=(LoadInteger(LY,(S5I),(28)))local real x=GetUnitX(I01)local real y=GetUnitY(I01)local boolexpr QL1local group Z51if QX2>16 thencall KillUnit(I01)call PauseTimer(t)call FlushChildHashtable(LY,(S5I))call DestroyTimer(t)elseset XO=SFIset JO=8+GetUnitAbilityLevel(SFI,(1093683532))*4set QL1=Condition(function QZ2)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,650,QL1)call ForGroup(Z51,function QV2)call NSI(Z51)set QX2=QX2+1call SaveInteger(LY,(S5I),(28),(QX2))endifendfunctionfunction QY2 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location BFO=GetSpellTargetLoc()local real x=GetLocationX(BFO)local real y=GetLocationY(BFO)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697657157,x,y,0)local timer t=CreateTimer()local integer S5I=GetHandleId(t)call RemoveLocation(BFO)call IA1(I01,(1093683764))call SetUnitAbilityLevel(I01,(1093683764),GetUnitAbilityLevel(SFI,(1093683532)))call IA1(I01,1097625443)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(28),(0))call TimerStart(t,1,true,function QW2)endfunctionfunction NB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function QY2)call TriggerAddCondition(t,Condition(function QH2))call Q1I((1093683764))endfunctionfunction QJ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real OA2=GetUnitState(SFI,UNIT_STATE_MANA)call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitState(SFI,UNIT_STATE_MANA,GetUnitState(SFI,UNIT_STATE_MAX_MANA))call SetUnitState(SFI,UNIT_STATE_MANA,OA2)set t=nullset SFI=nullreturn falseendfunctionfunction QK2 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.1,false)call TriggerAddCondition(t,Condition(function QJ2))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullset SFI=nullendfunctionfunction QL2 takes nothing returns booleanif GetSpellAbilityId()==1095656306 and GetUnitTypeId(GetTriggerUnit())==1311781193 thencall QK2()endifreturn falseendfunctionfunction Register_ChemicalRage takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QL2))set t=nullendfunctionfunction QM2 takes nothing returns nothingcall P6I(AQI,GetEnumUnit(),1,API)endfunctionfunction QN2 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093818181)local real PAI=(0.35+0.25*SUI)*(GetUnitState(P8I,UNIT_STATE_MAX_MANA)-GetUnitState(P8I,UNIT_STATE_MANA))local group g=NTI()call DD1(SFI,P8I,0.1*SUI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",P8I,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",P8I,"chest"))call DestroyEffect(AddSpecialEffect("war3mapImported\\Enchantment.mdx",GetUnitX(P8I),GetUnitY(P8I)))call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),500+25,Condition(function C51))set API=PAIset AQI=SFIcall ForGroup(g,function QM2)call PlaySoundOnUnitBJ(PC,100,P8I)call NSI(g)set SFI=nullset P8I=nullset g=nullendfunctionfunction QS2 takes nothing returns booleanif GetSpellAbilityId()==1093818181 and NNI(GetSpellTargetUnit())==false thencall QN2()endifreturn falseendfunctionfunction WZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QS2))set t=nullendfunctionfunction QT2 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093752374)local real QR2=16+12*SUIlocal real QP2=GetUnitState(P8I,UNIT_STATE_MANA)local real ZCO=RMinBJ(QR2,QP2)if ZCO>0 thencall SetUnitState(P8I,UNIT_STATE_MANA,QP2-ZCO)call P6I(P7I,P8I,2,ZCO*0.6)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",P8I,"origin"))endifendfunctionfunction QQ2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call QT2(P7I,P8I)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction QU2 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,0.4,false)call TriggerAddCondition(t,Condition(function QQ2))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction UI2 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4274))))==1)==false thencall SCI(P7I,4274,0.4)call QU2()endifendfunctionfunction U12 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093752374)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and RKI(GetTriggerUnit())==false thencall UI2()endifreturn falseendfunctionfunction UO2 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function U12))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction U22 takes nothing returns booleanif GetLearnedSkill()==1093752374 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093752374)==1 thencall UO2()endifreturn falseendfunctionfunction WW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function U22))set t=nullendfunctionfunction U32 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer NPI=GetTriggerEvalCount(t)local integer R2O=R2I(((0.9-0.3)/0.5)/0.03)local integer U42=R2I((175/R2O))local integer U52=R2I((255/R2O)*1.75)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))if NPI>R2O thencall SetUnitVertexColor(I01,255,255,255,0)call SetUnitVertexColor(SFI,255,255,255,255)call ShowUnit(I01,false)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitVertexColor(I01,255,255,255,175-U42*NPI)call SetUnitX(I01,x)call SetUnitY(I01,y)call SetUnitVertexColor(SFI,255,255,255,U52*NPI)endifset t=nullset I01=nullset SFI=nullreturn falseendfunctionfunction U62 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01=(LoadUnitHandle(LY,(GetHandleId(SFI)),(293)))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)call SetUnitX(I01,x)call SetUnitY(I01,y)call SetUnitX(SFI,x)call SetUnitY(SFI,y)call SetUnitVertexColor(SFI,255,255,255,0)call SetUnitVertexColor(I01,255,255,255,175)call SetUnitTimeScale(I01,0.5)call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function U32))set SFI=nullset I01=nullset t=nullendfunctionfunction U72 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01local integer S5I=GetHandleId(SFI)local location l=GetSpellTargetLoc()local real a=UEI(GetUnitX(SFI),GetUnitY(SFI),GetLocationX(l),GetLocationY(l))local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)call RemoveLocation(l)call SetUnitPathing(SFI,false)call IA1(SFI,1097167976)set I01=CreateUnit(GetOwningPlayer(SFI),1747990091,GetUnitX(SFI),GetUnitY(SFI),a)call ON1(I01,5)call SetUnitPathing(I01,false)call IA1(I01,1097167976)call IA1(I01,1097625443)call IA1(I01,1093678162)call SetUnitVertexColor(I01,255,255,255,0)call SetUnitX(I01,x)call SetUnitY(I01,y)call SetUnitX(SFI,x)call SetUnitY(SFI,y)call SetUnitAnimation(I01,"Spell Throw")call SetUnitPathing(SFI,true)call UnitRemoveAbility(SFI,1097167976)call SaveUnitHandle(LY,(S5I),(293),(I01))set SFI=nullset I01=nullendfunctionfunction U82 takes nothing returns booleanif GetSpellAbilityId()==1095066220 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall U62()elsecall U72()endifendifreturn falseendfunctionfunction WV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U82))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function U82))set t=nullcall A51(1747990091)endfunctionfunction U92 takes nothing returns booleanreturn GetSpellAbilityId()==1093685041endfunctionfunction TreeKiller takes nothing returns nothingcall KillDestructable(GetEnumDestructable())endfunctionfunction UA2 takes unit PKI,real x,real y,group JAO returns nothinglocal group Z51=NTI()local unit WH1call UPI(x,y,150)call GroupEnumUnitsInRange(Z51,x,y,150,Condition(function N1I))loopset WH1=FirstOfGroup(Z51)exitwhen WH1==nullif(IsUnitInGroup(WH1,JAO)==false and IsUnitEnemy(WH1,GetOwningPlayer(PKI)))thenif(GetUnitAbilityLevel(WH1,1093678162)!=1 and GetUnitState(WH1,UNIT_STATE_LIFE)>0 and IsUnitType(WH1,UNIT_TYPE_STRUCTURE)==false)thencall GroupAddUnit(JAO,WH1)call P6I(PKI,WH1,2,40+GetUnitAbilityLevel(PKI,1093685041)*30)call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",WH1,"overhead")endifendifcall GroupRemoveUnit(Z51,WH1)endloopcall NSI(Z51)endfunctionfunction UB2 takes nothing returns nothinglocal integer S5I=GetHandleId(GetExpiredTimer())local unit UC2=(LoadUnitHandle(LY,(S5I),(290)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real Ax=(LoadReal(LY,(S5I),(284)))local real Ay=(LoadReal(LY,(S5I),(285)))local real Cx=(LoadReal(LY,(S5I),(286)))local real Cy=(LoadReal(LY,(S5I),(287)))local real Bx=(LoadReal(LY,(S5I),(288)))local real By=(LoadReal(LY,(S5I),(289)))local real a=(LoadReal(LY,(S5I),(137)))local real b=1-alocal boolean UD2=(LoadBoolean(LY,(S5I),(291)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local real UE2=RMaxBJ(QNI(Ax,Ay,Cx,Cy)/1300,0.4)call SetUnitX(UC2,PTI(Ax*a*a+Bx*2*a*b+Cx*b*b))call SetUnitY(UC2,PUI(Ay*a*a+By*2*a*b+Cy*b*b))call UA2(SFI,GetUnitX(UC2),GetUnitY(UC2),JAO)if(UD2)thencall SaveReal(LY,(S5I),(137),((a-.02/UE2)*1.0))elsecall SaveReal(LY,(S5I),(137),((a+.02/UE2)*1.0))call SaveReal(LY,(S5I),(284),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(285),((GetUnitY(SFI))*1.0))endifif(a<0 and UD2)thencall SaveBoolean(LY,(S5I),(291),(false))call SaveReal(LY,(S5I),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+(LoadReal(LY,(S5I),(292)))))*1.0))call SaveReal(LY,(S5I),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+(LoadReal(LY,(S5I),(292)))))*1.0))endifif(a>1 and UD2==false)thencall PauseTimer(GetExpiredTimer())call NSI(JAO)call FlushChildHashtable(LY,(S5I))call RemoveUnit(UC2)call DestroyTimer(GetExpiredTimer())endifendfunctionfunction UF2 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local real Ax=GetUnitX(PKI)local real Ay=GetUnitY(PKI)local real Cx=GetLocationX(GetSpellTargetLoc())local real Cy=GetLocationY(GetSpellTargetLoc())local unit UG2=CreateUnit(GetOwningPlayer(PKI),1697657172,Ax,Ay,270.0)local unit UH2=CreateUnit(GetOwningPlayer(PKI),1697657172,Ax,Ay,270.0)local integer UZ2local integer UV2local timer UW2=CreateTimer()local timer UX2=CreateTimer()if GetSpellTargetUnit()!=null thenset Cx=GetUnitX(GetSpellTargetUnit())set Cy=GetUnitY(GetSpellTargetUnit())endifcall IA1(UG2,1097691750)call UnitRemoveAbility(UG2,1097691750)call SetUnitFlyHeight(UG2,150,0)call IA1(UH2,1097691750)call UnitRemoveAbility(UH2,1097691750)call SetUnitFlyHeight(UH2,150,0)set UZ2=GetHandleId(UW2)call SaveUnitHandle(LY,(UZ2),(14),(PKI))call SaveUnitHandle(LY,(UZ2),(290),(UG2))call SaveGroupHandle(LY,(UZ2),(133),(NTI()))call SaveReal(LY,(UZ2),(284),((Ax)*1.0))call SaveReal(LY,(UZ2),(285),((Ay)*1.0))call SaveReal(LY,(UZ2),(286),((Cx)*1.0))call SaveReal(LY,(UZ2),(287),((Cy)*1.0))call SaveReal(LY,(UZ2),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+45))*1.0))call SaveReal(LY,(UZ2),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+45))*1.0))call SaveReal(LY,(UZ2),(137),((1)*1.0))call SaveReal(LY,(UZ2),(292),((-45)*1.0))call SaveBoolean(LY,(UZ2),(291),(true))set UV2=GetHandleId(UX2)call SaveUnitHandle(LY,(UV2),(14),(PKI))call SaveUnitHandle(LY,(UV2),(290),(UH2))call SaveGroupHandle(LY,(UV2),(133),(NTI()))call SaveReal(LY,(UV2),(284),((Ax)*1.0))call SaveReal(LY,(UV2),(285),((Ay)*1.0))call SaveReal(LY,(UV2),(286),((Cx)*1.0))call SaveReal(LY,(UV2),(287),((Cy)*1.0))call SaveReal(LY,(UV2),(288),((Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)-45))*1.0))call SaveReal(LY,(UV2),(289),((Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)-45))*1.0))call SaveReal(LY,(UV2),(137),((1)*1.0))call SaveReal(LY,(UV2),(292),((45)*1.0))call SaveBoolean(LY,(UV2),(291),(true))call TimerStart(UW2,.025,true,function UB2)call TimerStart(UX2,.025,true,function UB2)endfunctionfunction WY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U92))call TriggerAddAction(t,function UF2)endfunctionfunction UY2 takes nothing returns nothinglocal real x=GetUnitX(GetEnumUnit())local real y=GetUnitY(GetEnumUnit())local real a=bj_RADTODEG*Atan2(y-BK,x-AK)local real UJ2local real UK2if Sin((a-CK)*bj_DEGTORAD)<0 thenset UJ2=GetUnitX(GetEnumUnit())+15*Cos((CK-90)*bj_DEGTORAD)set UK2=GetUnitY(GetEnumUnit())+15*Sin((CK-90)*bj_DEGTORAD)call SetUnitPosition(GetEnumUnit(),UJ2,UK2)call SetUnitFacingTimed(GetEnumUnit(),CK+90,0.3)elseset UJ2=GetUnitX(GetEnumUnit())+15*Cos((CK+90)*bj_DEGTORAD)set UK2=GetUnitY(GetEnumUnit())+15*Sin((CK+90)*bj_DEGTORAD)call SetUnitPosition(GetEnumUnit(),UJ2,UK2)call SetUnitFacingTimed(GetEnumUnit(),CK-90,0.3)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetEnumUnit(),"origin"))endfunctionfunction UL2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real RM2=(LoadReal(LY,(S5I),(13)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=(LoadGroupHandle(LY,(S5I),(22)))if GetTriggerEvalCount(t)>20 thencall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset AK=xset BK=yset CK=RM2call ForGroup(g,function UY2)endifset t=nullset g=nullreturn falseendfunctionfunction UM2 takes nothing returns nothingcall P6I(GK,GetEnumUnit(),1,AK)endfunctionfunction UN2 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093685042)local unit I01local real RM2=bj_RADTODEG*Atan2(GetUnitY(P8I)-GetUnitY(SFI),GetUnitX(P8I)-GetUnitX(SFI))local real xlocal real ylocal group g=NTI()local group g2=NTI()if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093810233)endifcall SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function UL2))set x=GetUnitX(SFI)+50*Cos(RM2*bj_DEGTORAD)set y=GetUnitY(SFI)+50*Sin(RM2*bj_DEGTORAD)call GroupEnumUnitsInRange(g2,x,y,325,Condition(function C51))call GroupAddGroup(g2,g)call GroupClear(g2)set I01=CreateUnit(GetOwningPlayer(SFI),1865429081,x,y,RM2)call UnitApplyTimedLife(I01,1112820806,1)call IA1(I01,1093684825)call SetUnitAbilityLevel(I01,1093684825,SUI)call IssueImmediateOrder(I01,"thunderclap")set x=GetUnitX(SFI)+250*Cos(RM2*bj_DEGTORAD)set y=GetUnitY(SFI)+250*Sin(RM2*bj_DEGTORAD)call GroupEnumUnitsInRange(g2,x,y,325,Condition(function C51))call GroupAddGroup(g2,g)call GroupClear(g2)set I01=CreateUnit(GetOwningPlayer(SFI),1865429081,x,y,RM2)call UnitApplyTimedLife(I01,1112820806,1)call IA1(I01,1093684825)call SetUnitAbilityLevel(I01,1093684825,SUI)call IssueImmediateOrder(I01,"thunderclap")set x=GetUnitX(SFI)+450*Cos(RM2*bj_DEGTORAD)set y=GetUnitY(SFI)+450*Sin(RM2*bj_DEGTORAD)call GroupEnumUnitsInRange(g2,x,y,325,Condition(function C51))call GroupAddGroup(g2,g)call GroupClear(g2)set I01=CreateUnit(GetOwningPlayer(SFI),1865429081,x,y,RM2)call UnitApplyTimedLife(I01,1112820806,1)call IA1(I01,1093684825)call SetUnitAbilityLevel(I01,1093684825,SUI)call IssueImmediateOrder(I01,"thunderclap")if GetUnitAbilityLevel(SFI,1093685042)==0 thenset x=GetUnitX(SFI)+650*Cos(RM2*bj_DEGTORAD)set y=GetUnitY(SFI)+650*Sin(RM2*bj_DEGTORAD)call GroupEnumUnitsInRange(g2,x,y,325,Condition(function C51))call GroupAddGroup(g2,g)call GroupClear(g2)set I01=CreateUnit(GetOwningPlayer(SFI),1865429081,x,y,RM2)call UnitApplyTimedLife(I01,1112820806,1)call IA1(I01,1093684825)call SetUnitAbilityLevel(I01,1093684825,SUI)call IssueImmediateOrder(I01,"thunderclap")endifcall NSI(g2)call GroupRemoveUnit(g,P8I)set AK=150+50*SUIset GK=SFIcall ForGroup(g,function UM2)set t=nullset SFI=nullset P8I=nullset I01=nullset g=nullset g2=nullendfunctionfunction US2 takes nothing returns booleanif(GetSpellAbilityId()==1093685042 or GetSpellAbilityId()==1093810233)and NNI(GetSpellTargetUnit())==false thencall UN2()endifreturn falseendfunctionfunction WX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function US2))set t=nullendfunctionfunction UT2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093743664)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction UR2 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call IA1(P7I,1093743664)call TriggerRegisterTimerEvent(t,5,false)call TriggerAddCondition(t,Condition(function UT2))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction UP2 takes nothing returns booleanif GetSpellAbilityId()==1093743450 thencall UR2()endifreturn falseendfunctionfunction WK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UP2))set t=nullendfunctionfunction UQ2 takes nothing returns booleanreturn GetSpellAbilityId()==1093685071 or GetSpellAbilityId()==1093817653endfunctionfunction UU2 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I03=(LoadUnitHandle(LY,(S5I),(2)))local real II3=(LoadReal(LY,(S5I),(6)))local real I13=(LoadReal(LY,(S5I),(7)))local real IO3=GetUnitX(I03)local real I23=GetUnitY(I03)call SaveReal(LY,(S5I),(6),((IO3)*1.0))call SaveReal(LY,(S5I),(7),((I23)*1.0))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif II3==IO3 and I13==I23 thenif GetUnitAbilityLevel(I03,1093752647)==0 thencall IA1(I03,1093752647)endifelseif GetUnitAbilityLevel(I03,1093752647)>0 thencall UnitRemoveAbility(I03,1093752647)endifendifendifset t=nullset I03=nullreturn falseendfunctionfunction I33 takes nothing returns nothingif AUI thenif(GetUnitTypeId(GetEnumUnit())==1848652113 or GetUnitTypeId(GetEnumUnit())==1848652114)thenendifelseif B0I thenif(GetUnitTypeId(GetEnumUnit())==1848652109 or GetUnitTypeId(GetEnumUnit())==1848652115)thenendifendifendfunctionfunction I43 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local integer SUI=GetUnitAbilityLevel(PKI,1093685071)local real x=GetUnitX(PKI)local real y=GetUnitY(PKI)local group Z51=NTI()local unit I03local trigger tlocal integer S5Ilocal boolean I53=GetSpellAbilityId()==1093685071local boolean I63=GetSpellAbilityId()==1093817653set AUI=I53set B0I=I63call GroupEnumUnitsOfPlayer(Z51,T4I,Condition(function N1I))call ForGroup(Z51,function I33)call NSI(Z51)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))if(I53)thenif(SUI==1)thenset I03=CreateUnit(T4I,1848652113,x,y,270)call UnitApplyTimedLife(I03,1112820806,60)elseif(SUI==2)thenset I03=CreateUnit(T4I,1848659544,x,y,270)call UnitApplyTimedLife(I03,1112820806,60)elseif(SUI==3)thenset I03=CreateUnit(T4I,1848659542,x,y,270)call UnitApplyTimedLife(I03,1112820806,60)elseif(SUI==4)thenset I03=CreateUnit(T4I,1848659543,x,y,270)call UnitApplyTimedLife(I03,1112820806,60)endifif SUI==3 or SUI==4 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,I03,EVENT_UNIT_DEATH)call SaveReal(LY,(S5I),(6),((GetUnitX(I03))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(I03))*1.0))call SaveUnitHandle(LY,(S5I),(2),(I03))call TriggerAddCondition(t,Condition(function UU2))endifendifif(I63)thenif(SUI==1)thencall UnitApplyTimedLife(CreateUnit(T4I,1848659540,x,y,270),1112820806,60)elseif(SUI==2)thencall UnitApplyTimedLife(CreateUnit(T4I,1848652109,x,y,270),1112820806,60)elseif(SUI==3)thencall UnitApplyTimedLife(CreateUnit(T4I,1848659539,x,y,270),1112820806,60)elseif(SUI==4)thencall UnitApplyTimedLife(CreateUnit(T4I,1848659541,x,y,270),1112820806,60)endifendifendfunctionfunction I73 takes nothing returns booleanif GetLearnedSkill()==1093685071 and IsUnitIllusion(GetTriggerUnit())==false thenif GetUnitAbilityLevel(GetTriggerUnit(),1093685071)==1 thencall IA1(GetTriggerUnit(),1093817653)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093817653,GetUnitAbilityLevel(GetTriggerUnit(),1093685071))endifreturn falseendfunctionfunction WJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UQ2))call TriggerAddAction(t,function I43)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function I73))set t=nullendfunctionfunction I83 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer S5I=GetHandleId(P7I)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local texttag tt=CreateTextTag()local integer ROIlocal integer i=1local unit ulocal player p2if SUI==1 thenset ROI=200elseif SUI==2 thenset ROI=275elseset ROI=350endifcall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetTextTagText(tt,"+"+I2S(ROI),0.025)call SetTextTagPosUnit(tt,K1[GetPlayerId(p)],100)call SetTextTagColor(tt,255,220,0,255)call SetTextTagVelocity(tt,0,0.03)call SetTextTagVisibility(tt,false)if GetLocalPlayer()==p thencall SetTextTagVisibility(tt,true)endifcall SetTextTagFadepoint(tt,2)call SetTextTagLifespan(tt,3)call SetTextTagPermanent(tt,false)set EL0[GetPlayerId(p)]=EL0[GetPlayerId(p)]+ROIset BII=BII+ROIif SUI==1 thenset ROI=50elseif SUI==2 thenset ROI=100elseset ROI=150endifloopexitwhen i>5if TII(p)thenset p2=BO[i]elseset p2=CO[i]endifif p2!=p thenset u=K1[GetPlayerId(p2)]if QLI(u,P7I)<950 thenset tt=CreateTextTag()call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)+ROI)call SetTextTagText(tt,"+"+I2S(ROI),0.025)call SetTextTagPosUnit(tt,u,100)call SetTextTagColor(tt,255,220,0,255)call SetTextTagVelocity(tt,0,0.03)call SetTextTagVisibility(tt,false)if GetLocalPlayer()==p2 thencall SetTextTagVisibility(tt,true)endifcall SetTextTagFadepoint(tt,2)call SetTextTagLifespan(tt,3)call SetTextTagPermanent(tt,false)set EL0[GetPlayerId(p2)]=EL0[GetPlayerId(p2)]+ROIset BII=BII+ROIendifendifset i=i+1endloopset P7I=nullset p=nullset tt=nullendfunctionfunction I93 takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and(LoadReal(LY,(GetHandleId(GetTriggerUnit())),(314)))>(TimerGetElapsed(M))thencall I83()endifreturn falseendfunctionfunction IA3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>10 and GetUnitAbilityLevel(P8I,1110454348)==0)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset I01=nullreturn falseendfunctionfunction IB3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(P8I),1697657174,GetUnitX(P8I),GetUnitY(P8I),0)local string FX="war3mapImported\\TrackBuff.mdx"if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P8I))and P0I(GetLocalPlayer())==false thenset FX=""endifcall IA1(I01,1093742901)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IA3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(FX,P8I,"overhead")))call SaveReal(LY,(GetHandleId(GetSpellTargetUnit())),(314),(((TimerGetElapsed(M))+30)*1.0))call SavePlayerHandle(LY,(GetHandleId(GetSpellTargetUnit())),(54),(GetOwningPlayer(GetTriggerUnit())))call SaveInteger(LY,(GetHandleId(GetSpellTargetUnit())),(5),(GetUnitAbilityLevel(GetTriggerUnit(),1093681716)))set t=nullset P8I=nullset P7I=nullset I01=nullendfunctionfunction IC3 takes nothing returns booleanif GetSpellAbilityId()==1093681716 thencall IB3()endifreturn falseendfunctionfunction WT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IC3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I93))set t=nullendfunctionfunction Jinada_Swap takes nothing returns nothingcall SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093749300,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093749299,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093749301,false)call SetPlayerAbilityAvailable(GetOwningPlayer(XM),1093749077,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093749300,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093749299,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093749301,false)call SetPlayerAbilityAvailable(GetOwningPlayer(YM),1093749077,false)endfunctionfunction ID3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1093749079)call UnitRemoveAbility(P8I,1110459201)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction IE3 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ID3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093749079)call UnitMakeAbilityPermanent(P8I,true,1093749079)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093749079,false)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",P8I,"chest"))set t=nullendfunctionfunction IF3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and(GetEventDamage()>40 or IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(P8I)==1970107511 or GetUnitTypeId(P8I)==1700946284)and(LoadBoolean(LY,(GetHandleId(P7I)),(183)))==true thencall IE3(P7I,P8I)call SaveBoolean(LY,(GetHandleId(P7I)),(183),(false))call SaveReal(LY,(GetHandleId(P7I)),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(P7I,1093749075)call UnitRemoveAbility(P7I,1093749300)call UnitRemoveAbility(P7I,1093749299)call UnitRemoveAbility(P7I,1093749301)call UnitRemoveAbility(P7I,1093749077)call FlushChildHashtable(LY,(GetHandleId((LoadTriggerHandle(LY,(S5I),(35))))))call S0I((LoadTriggerHandle(LY,(S5I),(35))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IG3 takes nothing returns booleanlocal trigger tlocal integer S5Ilocal unit P8Ilocal unit P7Ilocal integer SUIif GetTriggerEventId()==EVENT_UNIT_DEATH thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(183),(false))call SaveReal(LY,(GetHandleId(GetTriggerUnit())),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(GetTriggerUnit(),1093749075)call UnitRemoveAbility(GetTriggerUnit(),1093749300)call UnitRemoveAbility(GetTriggerUnit(),1093749299)call UnitRemoveAbility(GetTriggerUnit(),1093749301)call UnitRemoveAbility(GetTriggerUnit(),1093749077)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())elseif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(182)))thenif IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)set P8I=GetTriggerUnit()set P7I=GetAttacker()call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function IF3))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveTriggerHandle(LY,(S5I),(35),(GetTriggeringTrigger()))set SUI=GetUnitAbilityLevel(GetAttacker(),1093749073)if SUI==0 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==1 thencall UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==2 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==3 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==4 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)endifset P8I=nullset P7I=nullset t=nullendifendifreturn falseendfunctionfunction IH3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real QZI=(TimerGetElapsed(M))local integer SUI=GetUnitAbilityLevel(SFI,1093749073)local real PD2=(LoadReal(LY,(GetHandleId(SFI)),(184)))local boolean IZ3=(LoadBoolean(LY,(GetHandleId(SFI)),(183)))if QZI-PD2>14-SUI*2 and IZ3==false and GetUnitTypeId(SFI)==1315007329 and IC1(SFI)==false thencall SaveBoolean(LY,(GetHandleId(SFI)),(183),(true))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IG3))call SaveUnitHandle(LY,(S5I),(182),(SFI))call IA1(SFI,1093749075)if GetUnitAbilityLevel(SFI,1110455864)==0 thenif SUI==1 thencall IA1(SFI,1093749300)elseif SUI==2 thencall IA1(SFI,1093749299)elseif SUI==3 thencall IA1(SFI,1093749301)elseif SUI==4 thencall IA1(SFI,1093749077)endifendifcall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093749300,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093749299,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093749301,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093749077,false)elseif IZ3==false and GetUnitAbilityLevel(SFI,1110455864)==0 thencall UnitRemoveAbility(SFI,1093749075)call UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)endifset t=nullset SFI=nullreturn falseendfunctionfunction IV3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function IH3))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(181),(0))set SFI=nullset t=nullendfunctionfunction IW3 takes nothing returns booleanif GetLearnedSkill()==1093749073 and GetUnitAbilityLevel(GetTriggerUnit(),1093749073)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall IV3()endifreturn falseendfunctionfunction WR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function IW3))set t=nullendfunctionfunction IX3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093678913)if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall FlushChildHashtable(LY,(S5I))call S0I(t)if((LoadInteger(LY,(GetHandleId((P7I))),((2487))))==1)==false thencall SCI(P7I,2487,0.5)if IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(P8I,GetOwningPlayer(P7I))thencall P6I(P7I,P8I,2,30*SUI)call UYI(I2S(R2I(30*SUI)),1,P7I,0.027,216,0,0,216)endifendifendifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IY3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2,false)call TriggerAddCondition(t,Condition(function IX3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction IJ3 takes nothing returns booleanlocal integer SUIlocal unit SFIif GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH thenset SFI=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))set SUI=GetUnitAbilityLevel(SFI,1093749073)if(LoadBoolean(LY,(GetHandleId(SFI)),(183)))thenset SUI=GetUnitAbilityLevel(SFI,1093749073)if SUI==0 thencall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)elseif SUI==1 thencall UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)elseif SUI==2 thencall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)elseif SUI==3 thencall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749077)elseif SUI==4 thencall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)endifelsecall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)endifcall FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thenif((LoadInteger(LY,(GetHandleId((GetAttacker()))),((2488))))==1)==false thencall FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())call IY3()endifif(LoadBoolean(LY,(GetHandleId(GetAttacker())),(183)))thenset SUI=GetUnitAbilityLevel(GetAttacker(),1093749073)if SUI==0 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==1 thencall UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==2 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==3 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749077)elseif SUI==4 thencall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)endifelsecall UnitRemoveAbility(GetAttacker(),1093749300)call UnitRemoveAbility(GetAttacker(),1093749299)call UnitRemoveAbility(GetAttacker(),1093749301)call UnitRemoveAbility(GetAttacker(),1093749077)endifendifelseset SFI=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))if(LoadBoolean(LY,(GetHandleId(SFI)),(183)))==false thencall UnitRemoveAbility(SFI,1093749300)call UnitRemoveAbility(SFI,1093749299)call UnitRemoveAbility(SFI,1093749301)call UnitRemoveAbility(SFI,1093749077)endifcall FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction IK3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093678913)call SCI(P7I,2488,1.25-0.25*SUI-0.01)call TriggerRegisterTimerEvent(t,15+5*SUI,false)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_CAST)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IJ3))call SaveUnitHandle(LY,(S5I),(14),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P7I,1093749300)call IA1(P7I,1093749299)call IA1(P7I,1093749301)call IA1(P7I,1093749077)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093749300,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093749299,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093749301,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093749077,false)set t=nullset P8I=nullset P7I=nullendfunctionfunction IL3 takes nothing returns booleanif GetSpellAbilityId()==1093678913 thencall IK3()endifreturn falseendfunctionfunction WQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IL3))set t=nullendfunctionfunction IM3 takes unit P7I,unit WNO,unit IN3,integer SUI,boolean IS3 returns reallocal unit I01local real IT3=QLI(WNO,IN3)if IS3==false thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(WNO),GetUnitY(WNO),0)call IA1(I01,1093677108)call SetUnitAbilityLevel(I01,1093677108,SUI)call IssueTargetOrder(I01,"thunderbolt",IN3)set I01=nullendifreturn IT3/1000endfunctionfunction IR3 takes nothing returns booleanif IsUnitInGroup(GetFilterUnit(),B1I)==false thenif GetUnitAbilityLevel(GetFilterUnit(),1110454348)>0 thenreturn trueendifendifreturn falseendfunctionfunction IP3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit WNO=(LoadUnitHandle(LY,(S5I),(17)))local unit IN3local real M5Ilocal group PR2=(LoadGroupHandle(LY,(S5I),(22)))local group gcall FlushChildHashtable(LY,(S5I))call S0I(t)set g=NTI()set B1I=PR2call GroupEnumUnitsInRange(g,GetUnitX(WNO),GetUnitY(WNO),900,Condition(function IR3))set IN3=GroupPickRandomUnit(g)call NSI(g)if IN3!=null thenset M5I=IM3(P7I,WNO,IN3,SUI,false)call GroupAddUnit(PR2,IN3)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(17),(IN3))call SaveGroupHandle(LY,(S5I),(22),(PR2))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function IP3))elsecall NSI(PR2)endifset t=nullset P7I=nullset WNO=nullset IN3=nullset g=nullset PR2=nullreturn falseendfunctionfunction IQ3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit IU3=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093677108)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real M5I=IM3(SFI,SFI,IU3,SUI,true)local group g=NTI()call GroupAddUnit(g,IU3)call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveUnitHandle(LY,(S5I),(17),(IU3))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(22),(g))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function IP3))set SFI=nullset IU3=nullset t=nullendfunctionfunction O03 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and GetSpellAbilityId()==1093677108 and NNI(GetSpellTargetUnit())==false thencall IQ3()endifreturn falseendfunctionfunction WP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O03))set t=nullendfunctionconstant function Warpath_AbilityCode takes nothing returns integerreturn 1093682774endfunctionconstant function Warpath_EffectCode takes nothing returns integerreturn 1093682502endfunctionconstant function Warpath_SprayCode takes nothing returns integerreturn 1093683024endfunctionconstant function Warpath_GooCode takes nothing returns integerreturn 1093682775endfunctionfunction OI3 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683024)or GetSpellAbilityId()==(1093682775)endfunctionfunction O13 takes integer SUI,integer a returns integerif a==0 thenreturn 1elseif SUI==1 thenreturn a+1elseif SUI==2 thenreturn a+6elseif SUI==3 thenreturn a+12endifendifreturn 1endfunctionfunction OO3 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1697656920endfunctionfunction O23 takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction O33 takes player p returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,p,Condition(function OO3))call ForGroup(g,function O23)call NSI(g)set g=nullendfunctionfunction O43 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local unit SFI=(LoadUnitHandle(LY,(GetHandleId(t)),(14)))local integer S5I=GetHandleId(SFI)local integer SUI=GetUnitAbilityLevel(SFI,(1093682774))local integer O53=(LoadInteger(LY,(S5I),(315)))-1local integer O63=QBI(O53,0,4+SUI)local unit I01=(LoadUnitHandle(LY,(S5I),(316)))local integer O73if SUI==1 thenset O73=O63*20elseif SUI==2 thenset O73=O63*25elseif SUI==3 thenset O73=O63*30endifif O53==0 thenset O73=0endifcall G21(SFI,O73)if GetUnitTypeId(I01)==1697656920 thencall SetUnitAbilityLevel(I01,(1093682502),O13(SUI,O63))call SaveInteger(LY,(S5I),(315),(O53))elsecall O33((LoadPlayerHandle(LY,(GetHandleId(t)),(54))))endifcall FlushChildHashtable(LY,(GetHandleId(t)))call S0I(t)set t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction O83 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local unit I01=(LoadUnitHandle(LY,(S5I),(316)))local integer SUI=GetUnitAbilityLevel(SFI,(1093682774))local integer O53=(LoadInteger(LY,(S5I),(315)))+1local integer O63=QBI(O53,0,4+SUI)local integer O93=O13(SUI,O63)local trigger t=CreateTrigger()local integer O73if SUI==1 thenset O73=O63*20elseif SUI==2 thenset O73=O63*25elseif SUI==3 thenset O73=O63*30endifcall G21(SFI,O73)call SetUnitAbilityLevel(I01,(1093682502),O93)call SaveInteger(LY,(S5I),(315),(O53))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))call SavePlayerHandle(LY,(GetHandleId(t)),(54),(GetOwningPlayer(SFI)))call TriggerRegisterTimerEvent(t,14,false)call TriggerAddCondition(t,Condition(function O43))set t=nullendfunctionfunction OA3 takes nothing returns booleanreturn GetLearnedSkill()==(1093682774)and GetUnitAbilityLevel(GetTriggerUnit(),(1093682774))==1 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction OB3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,(1093682774))local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656920,0,0,0)local trigger t=CreateTrigger()call IA1(I01,(1093682502))call SaveUnitHandle(LY,(GetHandleId(SFI)),(316),(I01))call SetUnitInvulnerable(I01,true)call IA1(I01,1097625443)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OI3))call TriggerAddAction(t,function O83)endfunctionfunction WU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OA3))call TriggerAddAction(t,function OB3)call Q1I((1093682502))endfunctionfunction OC3 takes nothing returns booleanreturn GetSpellAbilityId()==1093683024endfunctionfunction OD3 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1endfunctionfunction OE3 takes nothing returns nothinglocal integer OF3=GetHandleId(GetEnumUnit())local integer OG3=(LoadInteger(LY,(BOI),(OF3)))local integer SUI=GetUnitAbilityLevel(XO,1093683024)local real PAI=QCI(JO+OG3*(28+2*SUI),400)call UnitDamageTarget(XO,GetEnumUnit(),PAI,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call SaveInteger(LY,(BOI),(OF3),(OG3+1))endfunctionfunction OH3 takes nothing returns nothinglocal integer OF3=GetHandleId(GetEnumUnit())local integer OG3=(LoadInteger(LY,(BOI),(OF3)))call SaveInteger(LY,(BOI),(OF3),(OG3-1))endfunctionfunction OZ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit PKI=(LoadUnitHandle(LY,(S5I),(221)))local group Z51=(LoadGroupHandle(LY,(S5I),(317)))set BOI=GetHandleId(PKI)call ForGroup(Z51,function OH3)call NSI(Z51)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction OV3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local group Z51=NTI()local trigger t=CreateTrigger()if IsUnitType(PKI,UNIT_TYPE_HERO)==false thenset PKI=K1[GetPlayerId(GetOwningPlayer(PKI))]endifcall GroupEnumUnitsInRange(Z51,GetUnitX(PKI),GetUnitY(PKI),650,Condition(function OD3))set XO=CreateUnit(GetOwningPlayer(PKI),1697656901,GetUnitX(PKI),GetUnitY(PKI),0)set JO=GetUnitAbilityLevel(PKI,1093683024)*20set BOI=GetHandleId(PKI)call ForGroup(Z51,function OE3)call SaveUnitHandle(LY,(GetHandleId(t)),(221),(PKI))call SaveGroupHandle(LY,(GetHandleId(t)),(317),(Z51))call TriggerRegisterTimerEvent(t,14,false)call TriggerAddCondition(t,Condition(function OZ3))set t=nullendfunctionfunction X11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OC3))call TriggerAddAction(t,function OV3)endfunctionfunction OW3 takes nothing returns booleanreturn GetSpellAbilityId()==1093682775 and NNI(GetSpellTargetUnit())==falseendfunctionfunction Trig_Goo_Func001Func001001002 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())==1697657413)endfunctionfunction OX3 takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction OY3 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())==1697657413)endfunctionfunction OJ3 takes nothing returns booleanif(not(GetUnitUserData(GetEnumUnit())==4))thenreturn falseendifreturn trueendfunctionfunction OK3 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())call SetUnitPositionLoc(GetEnumUnit(),BFO)if(OJ3())thencall IssueTargetOrder(GetEnumUnit(),"acidbomb",GetSpellTargetUnit())elsecall IncUnitAbilityLevel(GetEnumUnit(),1093682778)call IssueTargetOrder(GetEnumUnit(),"acidbomb",GetSpellTargetUnit())call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())+1))endifcall RemoveLocation(BFO)endfunctionfunction OL3 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())local location OM3=GetUnitLoc(GetSpellTargetUnit())local group ON3=NTI()if(UnitHasBuffBJ(GetSpellTargetUnit(),1110454869)==true)thencall GroupEnumUnitsOfPlayer(ON3,GetOwningPlayer(GetSpellTargetUnit()),Condition(function OY3))call ForGroupBJ(ON3,function OK3)elsecall GroupEnumUnitsOfPlayer(ON3,GetOwningPlayer(GetSpellTargetUnit()),Condition(function OY3))call ForGroupBJ(ON3,function OX3)call DisableTrigger(GH)call CreateNUnitsAtLocFacingLocBJ(1,1697657413,GetOwningPlayer(GetSpellTargetUnit()),BFO,OM3)call EnableTrigger(GH)call UnitAddAbility(bj_lastCreatedUnit,1093682778)call SetUnitAbilityLevelSwapped(1093682778,bj_lastCreatedUnit,((GetUnitAbilityLevelSwapped(1093682775,GetTriggerUnit())*4)-3))call IssueTargetOrder(bj_lastCreatedUnit,"acidbomb",GetSpellTargetUnit())call SetUnitUserData(bj_lastCreatedUnit,1)endifcall NSI(ON3)call RemoveLocation(BFO)call RemoveLocation(OM3)endfunctionfunction X01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OW3))call TriggerAddAction(t,function OL3)endfunctionfunction OS3 takes nothing returns booleanreturn GetLearnedSkill()==1093684531 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction OT3 takes nothing returns booleanif(IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==true)thenreturn falseendifreturn trueendfunctionfunction OR3 takes unit SFI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call IA1(I01,1093683024)call SetUnitAbilityLevel(I01,1093683024,GetUnitAbilityLevel(SFI,1093683024))call IssueImmediateOrder(I01,"fanofknives")set I01=nullendfunctionfunction OP3 takes unit SFI,real PAI returns nothinglocal integer S5I=GetHandleId(SFI)local real E01=(LoadReal(LY,(S5I),(278)))if E01+PAI>250 thencall SaveReal(LY,(S5I),(278),((0)*1.0))call OR3(SFI)elsecall SaveReal(LY,(S5I),(278),((E01+PAI)*1.0))endifendfunctionfunction OQ3 takes nothing returns nothinglocal unit OU3=GetTriggerUnit()local unit Z4O=GetEventDamageSource()local real A03=UDI(Z4O,OU3)local real AI3=GetUnitFacing(OU3)local real A13local real PAI=GetEventDamage()local real AO3local real RM2if(PAI>5)and GetUnitState(OU3,UNIT_STATE_LIFE)>1 and GetUnitAbilityLevel(OU3,1112433775)==0 thenif((AI3-A03)<(-180.00))thenset A13=(AI3-A03+360)elseif((AI3-A03)>180.00)thenset A13=(AI3-A03-360)elseset A13=(AI3-A03)endifendifset RM2=RAbsBJ(A13)if RM2<=70 thenset AO3=(GetUnitAbilityLevel(OU3,1093684531)*0.08+0.08)*PAIcall OP3(OU3,PAI-AO3)call SetUnitState(OU3,UNIT_STATE_LIFE,GetUnitState(OU3,UNIT_STATE_LIFE)+AO3)elseif RM2<=110 thenset AO3=(GetUnitAbilityLevel(OU3,1093684531)*0.04+0.04)*PAIcall SetUnitState(OU3,UNIT_STATE_LIFE,GetUnitState(OU3,UNIT_STATE_LIFE)+AO3)endifendifset OU3=nullset Z4O=nullendfunctionfunction A23 takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),1093684531)==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function OT3))call TriggerAddAction(t,function OQ3)endifendfunctionfunction XI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OS3))call TriggerAddAction(t,function A23)endfunctionfunction A33 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),1093677142)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)!=1 and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitTypeId(GetAttacker())!=1848657461endfunctionfunction A43 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetAttacker()local integer SUI=GetUnitAbilityLevel(P7I,1093677142)local integer A53=GetHeroStr(P7I,true)local real PAI=(14+2*SUI)+(0.18+0.08*SUI)*A53call P6I(P7I,P8I,2,PAI)set P7I=nullset P8I=nullendfunctionfunction X21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function A33))call TriggerAddAction(t,function A43)endfunctionfunction A63 takes nothing returns nothingcall P6I(B2I,GetEnumUnit(),1,B3I)endfunctionfunction A73 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093816142)local real A83local group g=NTI()set B3I=100+SUI*75set B2I=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),190+25,Condition(function CE1))call ForGroup(g,function A63)set A83=B3Iif GetUnitState(P7I,UNIT_STATE_LIFE)<=A83*0.75 thenset A83=GetUnitState(P7I,UNIT_STATE_LIFE)/0.75-10endifcall P6I(P7I,P7I,1,A83)call DestroyEffect(AddSpecialEffect("war3mapImported\\DoubleEdgeTarget.mdx",GetUnitX(P8I),GetUnitY(P8I)))set P7I=nullset P8I=nullendfunctionfunction A93 takes nothing returns booleanif GetSpellAbilityId()==1093816142 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall A73()elsecall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DoubleEdgeCaster.mdx",GetTriggerUnit(),"hand, right"))endifendifreturn falseendfunctionfunction XO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function A93))set t=nullendfunctionfunction AA3 takes nothing returns nothinglocal integer AB3if RKI(GetEnumUnit())==false and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4332))))==1)==false thencall SCI(GetEnumUnit(),4332,3.75)set AB3=B6Icall P6I(B5I,GetEnumUnit(),1,(AB3)*GetHeroStr(B4I,true))call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093816139,false)call IA1(GetEnumUnit(),1093816139)call AX1(GetEnumUnit(),1093816139,1,1.5,1110460230)endifendfunctionfunction AC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group gif GetTriggerEvalCount(t)>=R2I(20*3.75)or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitPathing(P7I,true)call UnitRemoveAbility(P7I,1093816116)call UnitRemoveAbility(P7I,1110460226)elseset g=NTI()set GK=P7Iset B4I=I01set B5I=P7Iset B6I=SUIcall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),105+25,Condition(function CA1))call ForGroup(g,function AA3)call NSI(g)endifset t=nullset P7I=nullset g=nullreturn falseendfunctionfunction AD3 takes nothing returns nothinglocal unit P7I=GetEnumUnit()local integer SUI=GetUnitAbilityLevel(B4I,1093816118)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitPathing(P7I,false)call IA1(P7I,1093816116)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function AC3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(B4I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",P7I,"foot, left")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",P7I,"foot, right")))set P7I=nullset t=nullendfunctionfunction AE3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=NTI()call FlushChildHashtable(LY,(S5I))call S0I(t)set B4I=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,0,0,99999,Condition(function CN1))call ForGroup(g,function AD3)call NSI(g)set t=nullset P7I=nullset g=nullreturn falseendfunctionfunction AF3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local sound PGI=CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,10,10,"DefaultEAXON")local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call StartSound(PGI)call KillSoundWhenDone(PGI)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function AE3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset PGI=nullendfunctionfunction AG3 takes nothing returns booleanif GetSpellAbilityId()==1093816118 thencall AF3()endifreturn falseendfunctionfunction X31 takes nothing returns nothinglocal trigger t=CreateTrigger()call Q1I(1093816116)call Q1I(1093687350)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AG3))call CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,10,10,"DefaultEAXON")set t=nullendfunctionfunction AH3 takes nothing returns booleanreturn GetSpellAbilityId()==1093684310 or GetSpellAbilityId()==1093815619endfunctionfunction AZ3 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)thenif(IsUnitAliveBJ(GetFilterUnit()))thenif RYI(GetFilterUnit())==false thenif(GetUnitTypeId(GetFilterUnit())!=1852010352)thenif(GetUnitAbilityLevel(GetFilterUnit(),1097167976)==1)thenif((GetUnitAbilityLevel(GetFilterUnit(),1093684047)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684049)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684050)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684048)==1))thenreturn trueendifendifendifendifendifendifreturn falseendfunctionfunction AV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit AW3=(LoadUnitHandle(LY,(S5I),(2)))local unit u=(LoadUnitHandle(LY,(S5I),(26)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local boolean AX3=(LoadBoolean(LY,(S5I),(95)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif E31(GetSpellAbilityId())and GetSpellTargetUnit()==u thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset AW3=nullset u=nullendifreturn falseendifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))if(LoadBoolean(LY,(GetHandleId(u)),(80)))==false and GetUnitAbilityLevel(u,1093678162)==0 thencall SCI(u,4409,1)if AX3 thencall SetUnitPosition(u,GetUnitX(AW3),GetUnitY(AW3))elsecall SetUnitPosition(u,x,y)endifendifif(LoadBoolean(LY,(GetHandleId(u)),(80)))==true thencall PZI(GetOwningPlayer(AW3),GetObjectName(1848652598))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset AW3=nullset u=nullreturn falseendfunctionfunction AY3 takes unit u,unit AJ3,integer AK3,real x,real y,boolean AX3 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if IsUnitOwnedByPlayer(u,GetOwningPlayer(AJ3))and AX3==false thencall TriggerRegisterTimerEvent(t,0.1,false)elsecall TriggerRegisterTimerEvent(t,7-AK3,false)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)endifcall TriggerAddCondition(t,Condition(function AV3))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",u,"overhead")))call SaveUnitHandle(LY,(S5I),(26),(u))call SaveUnitHandle(LY,(S5I),(2),(AJ3))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveBoolean(LY,(S5I),(95),(AX3))set t=nullendfunctionfunction AL3 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit AW3=GetTriggerUnit()local location BFO=GetUnitLoc(AW3)local unit I01local integer AK3=GetUnitAbilityLevel(AW3,1093684310)local real DH1local group Z51local unit GB2local location AM3local effect fxif(TII(GetOwningPlayer(AW3)))thenset AM3=GetRectCenter(O4)elseset AM3=GetRectCenter(S3)endifif P8I==AW3 thenset Z51=NTI()call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(AW3),Condition(function AZ3))loopexitwhen CountUnitsInGroup(Z51)==0set GB2=GroupPickRandomUnit(Z51)call GroupRemoveUnit(Z51,GB2)call AY3(GB2,AW3,AK3,GetLocationX(AM3),GetLocationY(AM3),true)endloopcall NSI(Z51)elseif(IsUnitAlly(P8I,GetOwningPlayer(AW3))==false)thenif NNI(GetSpellTargetUnit())==false thenset DH1=GetRandomInt(50*AK3,100*AK3)call UYI(I2S(R2I(DH1)),1,P8I,0.023,255,255,0,216)call UnitDamageTargetBJ(AW3,P8I,DH1,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)set fx=AddSpecialEffectTargetUnitBJ("chest",P8I,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")call DestroyEffect(fx)endifelseif(IsUnitType(P8I,UNIT_TYPE_HERO)==true)thenif((LoadBoolean(LY,(GetHandleId(GetOwningPlayer(P8I))),(139)))==false)thencall AY3(P8I,AW3,AK3,GetLocationX(AM3),GetLocationY(AM3),false)endifelseif(IsUnitOwnedByPlayer(P8I,GetOwningPlayer(AW3))==true)thencall SetUnitPositionLoc(P8I,AM3)endifendifcall RemoveLocation(BFO)call RemoveLocation(AM3)endfunctionfunction AN3 takes nothing returns booleanif GetLearnedSkill()==1093684310 and IsUnitIllusion(GetTriggerUnit())==false thencall IA1(GetTriggerUnit(),1093815619)call SetUnitAbilityLevel(GetTriggerUnit(),1093815619,GetUnitAbilityLevel(GetTriggerUnit(),1093684310))endifreturn falseendfunctionfunction X71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AH3))call TriggerAddAction(t,function AL3)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function AN3))endfunctionfunction AS3 takes nothing returns booleanif(not(GetSpellAbilityId()==1093678649))thenreturn falseendifreturn trueendfunctionfunction AT3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit AW3=(LoadUnitHandle(LY,(S5I),(2)))local integer AR3=(LoadInteger(LY,(S5I),(157)))local group Z51=NTI()local unit GB2call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(AW3),Condition(function AZ3))loopexitwhen(CountUnitsInGroup(Z51)<=AR3)set GB2=GroupPickRandomUnit(Z51)call GroupRemoveUnit(Z51,GB2)call KillUnit(GB2)endloopcall NSI(Z51)call FlushChildHashtable(LY,(S5I))call S0I(t)set AW3=nullset t=nullset Z51=nullset GB2=nullreturn falseendfunctionfunction AP3 takes nothing returns nothinglocal unit AQ3=GetSpellTargetUnit()local unit AW3=GetTriggerUnit()local integer AK3=GetUnitAbilityLevel(AW3,1093678649)local integer AR3=1local integer playerid=GetPlayerId(GetOwningPlayer(AW3))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call QSI(AQ3)if(AK3==1)thenset AR3=1call IA1(AQ3,1093684047)endifif(AK3==2)thenset AR3=2call IA1(AQ3,1093684049)endifif(AK3==3)thenset AR3=3call IA1(AQ3,1093684050)endifif(AK3==4)thenset AR3=4call IA1(AQ3,1093684048)endifcall IA1(AQ3,1097167976)call IA1(AQ3,1093743175)call SaveUnitHandle(LY,(S5I),(2),(AW3))call SaveInteger(LY,(S5I),(157),(AR3))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function AT3))set t=nullset AQ3=nullset AW3=nullendfunctionfunction AU3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01local real xlocal real ylocal integer SUI=GetUnitAbilityLevel(P7I,1093810260)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093818702)endifif IsUnitEnemy(P8I,GetOwningPlayer(P7I))thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093678649)call SetUnitAbilityLevel(I01,1093678649,SUI)call IssueTargetOrder(I01,"charm",P8I)elseif TII(GetOwningPlayer(P7I))thenset x=GetRectCenterX(O4)set y=GetRectCenterY(O4)elseset x=GetRectCenterX(S3)set y=GetRectCenterY(S3)endifif(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(P8I))),(139)))==false thencall AY3(P8I,P7I,SUI,x,y,false)endifendifset P7I=nullset P8I=nullset I01=nullendfunctionfunction B03 takes nothing returns booleanif(GetSpellAbilityId()==1093810260 or GetSpellAbilityId()==1093818702)and NNI(GetSpellTargetUnit())==false thencall AU3()endifreturn falseendfunctionfunction BI3 takes nothing returns booleanif GetSpellAbilityId()==1093810260 thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true thenif IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetSpellTargetUnit())thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))endifendifendifreturn falseendfunctionfunction X61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AS3))call TriggerAddAction(t,function AP3)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function BI3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B03))set t=nullendfunctionfunction B13 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local real BO3if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>10 thenset BO3=GetEventDamage()*(0.1+0.04*SUI)call DisableTrigger(t)call P6I(GetEventDamageSource(),GetTriggerUnit(),3,BO3)call EnableTrigger(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction B23 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093684045)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",P7I,"chest"))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,4+SUI,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function B13))set t=nullset P8I=nullset P7I=nullendfunctionfunction B33 takes nothing returns booleanif GetSpellAbilityId()==1093684045 thencall B23()endifreturn falseendfunctionfunction X41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B33))set t=nullendfunctionfunction B43 takes nothing returns booleanreturn GetSpellAbilityId()==1093684308 or GetSpellAbilityId()==1093747539endfunctionfunction B53 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction B63 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local integer AK3=GetUnitAbilityLevel(PKI,1093684308)local group Z51=NTI()local unit GB2if AK3==0 thenset AK3=GetUnitAbilityLevel(PKI,1093747539)endifcall GroupEnumUnitsInRect(Z51,bj_mapInitialPlayableArea,Condition(function B53))loopset GB2=FirstOfGroup(Z51)exitwhen GB2==nullif(IsUnitAlly(GB2,GetOwningPlayer(PKI))==true)thencall SetWidgetLife(GB2,(GetUnitStateSwap(UNIT_STATE_LIFE,GB2)+100+(100*AK3)))call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",GB2,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))endifcall GroupRemoveUnit(Z51,GB2)endloopcall NSI(Z51)set Z51=NTI()set bj_groupEnumOwningPlayer=GetOwningPlayer(PKI)call GroupEnumUnitsInRect(Z51,GetWorldBounds(),filterGetUnitsInRectOfPlayer)loopset GB2=FirstOfGroup(Z51)exitwhen GB2==nullif(IsUnitType(GB2,UNIT_TYPE_HERO)==false and GetUnitTypeId(GB2)!=1848651843)thencall SetUnitLifePercentBJ(GB2,100)call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",GB2,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))endifcall GroupRemoveUnit(Z51,GB2)endloopcall NSI(Z51)endfunctionfunction X51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B43))call TriggerAddAction(t,function B63)endfunctionfunction B73 takes nothing returns nothingif RYI(GetEnumUnit())==false thencall P6I(B8I,GetEnumUnit(),1,B7I)endifendfunctionfunction B83 takes unit P7I,real x,real y returns nothinglocal real x1local real y1local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093687862)local real PAI=40+40*SUIset GK=P7Iset B8I=P7Iset B7I=PAIcall GroupEnumUnitsInRange(g,x,y,600,Condition(function CA1))call ForGroup(g,function B73)call NSI(g)set x1=xset y1=ycall DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))set x1=x+200set y1=y+200call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))set x1=x+200set y1=y-200call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))set x1=x-200set y1=y+200call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))set x1=x-200set y1=y-200call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))call I41(GetOwningPlayer(P7I),10,x,y,600)set g=nullendfunctionfunction B93 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFIlocal unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local real IV1=PTI(QXI+30*Cos(RM2))local real IW1=PUI(QYI+30*Sin(RM2))local real BA3local real BB3call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SaveReal(LY,(S5I),(189),((IV1)*1.0))call SaveReal(LY,(S5I),(190),((IW1)*1.0))if UTI(QJI,QKI,IV1,IW1)<=35 thencall KillUnit(IG1)set SFI=(LoadUnitHandle(LY,(S5I),(14)))call B83(SFI,IV1,IW1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset IG1=nullreturn falseendfunctionfunction BC3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real QXI=PTI(GetUnitX(SFI))local real QYI=PUI(GetUnitY(SFI))local location AM3=GetSpellTargetLoc()local real QJI=PTI(GetLocationX(AM3))local real QKI=PUI(GetLocationY(AM3))local real RM2=Atan2(QKI-QYI,QJI-QXI)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(SFI),1747989337,QXI,QYI,RM2*bj_RADTODEG)call RemoveLocation(AM3)call SetUnitFacing(IG1,RM2*bj_RADTODEG)call SetUnitPathing(IG1,false)call IA1(IG1,1097625443)call ShowUnit(IG1,false)call UnitRemoveAbility(IG1,1097625443)call ShowUnit(IG1,true)call SaveReal(LY,(S5I),(191),((QXI)*1.0))call SaveReal(LY,(S5I),(192),((QYI)*1.0))call SaveReal(LY,(S5I),(189),((QXI)*1.0))call SaveReal(LY,(S5I),(190),((QYI)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(45),(IG1))call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function B93))set SFI=nullset AM3=nullset t=nullset IG1=nullendfunctionfunction BD3 takes nothing returns booleanif GetSpellAbilityId()==1093687862 thencall BC3()endifreturn falseendfunctionfunction TE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BD3))set t=nullendfunctionfunction BE3 takes real s,real d1,real d2,real d3 returns booleanreturn s<=d1 and s<=d2 and s<=d3endfunctionfunction BF3 takes unit u,real x,real y,real d returns reallocal real x2=GetUnitX(u)local real y2=GetUnitY(u)local real BG3=QNI(x-d,y,x2,y2)local real BH3=QNI(x+d,y,x2,y2)local real BZ3=QNI(x,y+d,x2,y2)local real BV3=QNI(x,y-d,x2,y2)if BE3(BG3,BH3,BV3,BZ3)thenreturn 180.0elseif BE3(BH3,BG3,BV3,BZ3)thenreturn 0.0elseif BE3(BV3,BH3,BG3,BZ3)thenreturn 270.0endifreturn 90.0endfunctionfunction BW3 takes real s,real d1,real d2,real d3,real d4,real d5,real d6,real d7 returns booleanreturn s<=d1 and s<=d2 and s<=d3 and s<=d4 and s<=d5 and s<=d6 and s<=d7endfunctionfunction BX3 takes unit u,integer S5I returns unitlocal real x1=GetUnitX(u)local real y1=GetUnitY(u)local unit BY3=(LoadUnitHandle(LY,(S5I),(1100+1)))local unit BJ3=(LoadUnitHandle(LY,(S5I),(1100+2)))local unit BK3=(LoadUnitHandle(LY,(S5I),(1100+3)))local unit BL3=(LoadUnitHandle(LY,(S5I),(1100+4)))local unit BM3=(LoadUnitHandle(LY,(S5I),(1100+5)))local unit BN3=(LoadUnitHandle(LY,(S5I),(1100+6)))local unit BS3=(LoadUnitHandle(LY,(S5I),(1100+7)))local unit BT3=(LoadUnitHandle(LY,(S5I),(1100+8)))local real d1=QNI(x1,y1,GetUnitX(BY3),GetUnitY(BY3))local real d2=QNI(x1,y1,GetUnitX(BJ3),GetUnitY(BJ3))local real d3=QNI(x1,y1,GetUnitX(BK3),GetUnitY(BK3))local real d4=QNI(x1,y1,GetUnitX(BL3),GetUnitY(BL3))local real d5=QNI(x1,y1,GetUnitX(BM3),GetUnitY(BM3))local real d6=QNI(x1,y1,GetUnitX(BN3),GetUnitY(BN3))local real d7=QNI(x1,y1,GetUnitX(BS3),GetUnitY(BS3))local real d8=QNI(x1,y1,GetUnitX(BT3),GetUnitY(BT3))if BW3(d1,d2,d3,d4,d5,d6,d7,d8)thenreturn BY3elseif BW3(d2,d1,d3,d4,d5,d6,d7,d8)thenreturn BJ3elseif BW3(d3,d2,d1,d4,d5,d6,d7,d8)thenreturn BK3elseif BW3(d4,d2,d3,d1,d5,d6,d7,d8)thenreturn BL3elseif BW3(d5,d2,d3,d4,d1,d6,d7,d8)thenreturn BM3elseif BW3(d6,d2,d3,d4,d5,d1,d7,d8)thenreturn BN3elseif BW3(d7,d2,d3,d4,d5,d6,d1,d8)thenreturn BS3elseif BW3(d8,d2,d3,d4,d5,d6,d7,d1)thenreturn BT3endifreturn nullendfunctionfunction BR3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real RM2=(LoadReal(LY,(S5I),(13)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real RS2=12local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer BP3=40+40*SUIif GetTriggerEvalCount(t)>21 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId((P8I))),((4260)),(2))call P6I(P7I,P8I,1,I2R(BP3))call SetUnitState(P8I,UNIT_STATE_MANA,QDI(GetUnitState(P8I,UNIT_STATE_MANA)-BP3,0))call UPI(GetUnitX(P8I),GetUnitY(P8I),100)elsecall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",x,y))call UPI(x,y,150)if((LoadInteger(LY,(GetHandleId((P8I))),((4261))))==1)==false thencall SetUnitPosition(P8I,x+RS2*Cos(RM2*bj_DEGTORAD),y+RS2*Sin(RM2*bj_DEGTORAD))endifendifset t=nullset P8I=nullreturn falseendfunctionfunction BQ3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetEnumUnit()local real x=AKlocal real y=BKlocal real d=CKlocal real RM2=BF3(P8I,x,y,d)local real BU3=200local real C03=d-QNI(GetUnitX(P8I),GetUnitY(P8I),x,y)+BU3/2call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",P8I,"chest"))call SaveInteger(LY,(GetHandleId((P8I))),((4260)),(1))if C03>0 thencall SetUnitX(P8I,GetUnitX(P8I)+C03*Cos(RM2*bj_DEGTORAD))call SetUnitY(P8I,GetUnitY(P8I)+C03*Sin(RM2*bj_DEGTORAD))endifcall SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveInteger(LY,(S5I),(5),(UJ))call SaveUnitHandle(LY,(S5I),(2),(GK))call TriggerRegisterTimerEvent(t,0.04,true)call TriggerAddCondition(t,Condition(function BR3))set t=nullset P8I=nullendfunctionfunction CI3 takes unit u,integer S5I returns booleanlocal unit C13=BX3(u,S5I)local boolean FB1=trueif IC1(C13)or(LoadInteger(LY,(GetHandleId(C13)),(156)))==1 thenset FB1=falseendifcall SaveInteger(LY,(GetHandleId(C13)),(156),(1))call SetUnitVertexColor(C13,25,25,25,175)set C13=nullreturn FB1endfunctionfunction CO3 takes nothing returns nothingif GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)>0 and IsUnitInGroup(GetEnumUnit(),XK)==false and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4260))))==1)==false and CI3(GetEnumUnit(),B9I)thencall SaveInteger(LY,(GetHandleId((GetEnumUnit()))),((4260)),(1))call GroupAddUnit(YK,GetEnumUnit())endifendfunctionfunction C23 takes trigger t,unit SFI,real x,real y,real d,integer SUI returns nothinglocal integer S5I=GetHandleId(t)local real BU3=200local rect r1=Rect(x-d,y-d,x+d,y+d)local rect r2=Rect(x-d-BU3,y-d-BU3,x+d+BU3,y+d+BU3)local group g1=NTI()local group g2=NTI()local group g3=NTI()set GK=SFIcall GroupEnumUnitsInRect(g1,r1,Condition(function CE1))call GroupEnumUnitsInRect(g2,r2,Condition(function CE1))set XK=g1set YK=g3set AK=xset BK=yset CK=dset B9I=S5Icall ForGroup(g2,function CO3)set UJ=SUIcall ForGroup(g3,function BQ3)call NSI(g1)call NSI(g2)call NSI(g3)call RemoveRect(r1)call RemoveRect(r2)set g1=nullset g2=nullset g3=nullset r1=nullset r2=nullendfunctionfunction C33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local boolean C43=(LoadBoolean(LY,(S5I),(155)))call FlushChildHashtable(LY,(S5I))call S0I(t)if C43 thencall I41(p,.2,x,y,500)endifset t=nullset p=nullreturn falseendfunctionfunction C53 takes unit C63 returns nothinglocal real x=GetUnitX(C63)local real y=GetUnitY(C63)local player p=GetOwningPlayer(C63)local unit I01=CreateUnit(p,1966092375,x,y,0)call KillUnit(I01)set p=nullset I01=nullendfunctionfunction C73 takes integer S5I,real x,real y,boolean C43,player p returns nothinglocal unit BY3=(LoadUnitHandle(LY,(S5I),(1100+1)))local unit BJ3=(LoadUnitHandle(LY,(S5I),(1100+2)))local unit BK3=(LoadUnitHandle(LY,(S5I),(1100+3)))local unit BL3=(LoadUnitHandle(LY,(S5I),(1100+4)))local unit BM3=(LoadUnitHandle(LY,(S5I),(1100+5)))local unit BN3=(LoadUnitHandle(LY,(S5I),(1100+6)))local unit BS3=(LoadUnitHandle(LY,(S5I),(1100+7)))local unit BT3=(LoadUnitHandle(LY,(S5I),(1100+8)))local trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.1,false)call TriggerAddCondition(t,Condition(function C33))call SaveReal(LY,(GetHandleId(t)),(6),((x)*1.0))call SaveReal(LY,(GetHandleId(t)),(7),((y)*1.0))call SavePlayerHandle(LY,(GetHandleId(t)),(54),(p))call SaveBoolean(LY,(GetHandleId(t)),(155),(C43))set BAI=truecall C53(BY3)call RemoveUnit(BY3)call C53(BJ3)call RemoveUnit(BJ3)call C53(BK3)call RemoveUnit(BK3)call C53(BL3)call RemoveUnit(BL3)call C53(BM3)call RemoveUnit(BM3)call C53(BN3)call RemoveUnit(BN3)call C53(BS3)call RemoveUnit(BS3)call C53(BT3)call RemoveUnit(BT3)set BY3=nullset BJ3=nullset BK3=nullset BL3=nullset BM3=nullset BN3=nullset BS3=nullset BT3=nullendfunctionfunction PowerCog_DeathBurn takes nothing returns nothinglocal integer BP3=(40+40*BCI)/2call P6I(BBI,GetEnumUnit(),1,I2R(BP3))call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,QDI(GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)-BP3,0))endfunctionfunction C83 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit C63=(LoadUnitHandle(LY,(S5I),(19)))local group gif BAI==false thenset g=NTI()set GK=C63set BBI=C63call GroupEnumUnitsInRange(g,GetUnitX(C63),GetUnitY(C63),175+25,Condition(function CE1))call NSI(g)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset g=nullset C63=nullreturn falseendfunctionfunction C93 takes unit C63,integer S5I,integer MLI,player p returns nothinglocal trigger t=CreateTrigger()local integer KAO=GetHandleId(t)call TriggerRegisterDeathEvent(t,C63)call SaveUnitHandle(LY,(KAO),(19),(C63))call TriggerAddCondition(t,Condition(function C83))if IsUnitVisible(C63,p)thencall SaveBoolean(LY,(S5I),(155),(true))endifcall SaveUnitHandle(LY,(S5I),(1100+MLI),(C63))endfunctionfunction CA3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real DC1=(LoadReal(LY,(S5I),(57)))local integer NPI=GetTriggerEvalCount(t)if NPI>R2I(DC1*100)thencall C73(S5I,(LoadReal(LY,(S5I),(6))),(LoadReal(LY,(S5I),(7))),(LoadBoolean(LY,(S5I),(155))),(LoadPlayerHandle(LY,(S5I),(154))))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall C23(t,(LoadUnitHandle(LY,(S5I),(14))),(LoadReal(LY,(S5I),(6))),(LoadReal(LY,(S5I),(7))),(LoadReal(LY,(S5I),(138))),(LoadInteger(LY,(S5I),(5))))endifset t=nullreturn falseendfunctionfunction CB3 takes nothing returns nothingcall SetUnitX(GetEnumUnit(),GetUnitX(GK))call SetUnitY(GetEnumUnit(),GetUnitY(GK))endfunctionfunction CC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=GetUnitAbilityLevel(SFI,1093687861)local integer ID=1966092371local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2local real y2local real d=125local unit C63local real DC1=4+SUIlocal real BufferDuration=5local group glocal rect CD3local player VE2local integer HP=2if SUI==4 thenset HP=3endifset BCI=SUIset BAI=falseif TII(GetOwningPlayer(SFI))thenset VE2=CO[0]elseset VE2=BO[0]endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveBoolean(LY,(S5I),(155),(false))set x2=x1+dset y2=y1set C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,1,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1+dset y2=y1+dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,2,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1set y2=y1+dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,3,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1-dset y2=y1+dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,4,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1-dset y2=y1set C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,5,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1-dset y2=y1-dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,6,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1set y2=y1-dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,7,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)set x2=x1+dset y2=y1-dset C63=CreateUnit(GetOwningPlayer(SFI),ID,x2,y2,0)call SetUnitPosition(C63,x2,y2)call C93(C63,S5I,8,VE2)call SetUnitState(C63,UNIT_STATE_LIFE,HP)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function CA3))call SaveReal(LY,(S5I),(57),((DC1)*1.0))call SaveReal(LY,(S5I),(6),((x1)*1.0))call SaveReal(LY,(S5I),(7),((y1)*1.0))call SaveReal(LY,(S5I),(138),((d)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))call SavePlayerHandle(LY,(S5I),(154),(VE2))set d=d+110set g=NTI()set CD3=Rect(x1-d,y1-d,x1+d,y1+d)set GK=SFIcall GroupEnumUnitsInRect(g,CD3,Condition(function DO1))call ForGroup(g,function CB3)call NSI(g)set t=nullset g=nullset SFI=nullset C63=nullset CD3=nullset VE2=nullreturn falseendfunctionfunction CE3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.1,false)call TriggerAddCondition(t,Condition(function CC3))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullset SFI=nullendfunctionfunction CF3 takes nothing returns booleanif GetSpellAbilityId()==1093687861 thencall CE3()endifreturn falseendfunctionfunction TD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CF3))set t=nullset BAI=falseendfunctionfunction CG3 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093687864)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747542)endifcall IA1(I01,1093687865)call SetUnitAbilityLevel(I01,1093687865,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendfunctionfunction CH3 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())call CG3(GK,GetEnumUnit())endifendfunctionfunction CZ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer CV3=(LoadInteger(LY,(S5I),(18)))local integer NPI=GetTriggerEvalCount(t)local unit CW3local group CX3=(LoadGroupHandle(LY,(S5I),(16)))local group glocal real CY3=200if P8I==null thenset CW3=(LoadUnitHandle(LY,(S5I),(700+CV3+1-NPI)))call RemoveUnit(CW3)elseset CW3=(LoadUnitHandle(LY,(S5I),(700+NPI)))call SetUnitX(SFI,GetUnitX(CW3))call SetUnitY(SFI,GetUnitY(CW3))call RemoveUnit(CW3)if NPI==CV3 thenset CY3=225endifset g=NTI()set GK=SFIset XK=CX3call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),CY3,Condition(function CD1))call ForGroup(g,function CH3)call NSI(g)endifif NPI==(CV3)thenif P8I!=null thencall PauseUnit(P8I,false)endifcall UPI(GetUnitX(SFI),GetUnitY(SFI),100)call NSI(CX3)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset P8I=nullset CW3=nullset CX3=nullset g=nullreturn falseendfunctionfunction CJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real RM2=(LoadReal(LY,(S5I),(13)))local integer MKO=(LoadInteger(LY,(S5I),(12)))local integer NPI=GetTriggerEvalCount(t)local real x=GetUnitX(SFI)+NPI*50*Cos(RM2*bj_DEGTORAD)local real y=GetUnitY(SFI)+NPI*50*Sin(RM2*bj_DEGTORAD)local boolean CK3=(LoadBoolean(LY,(S5I),(15)))local unit CL3local trigger CM3=(LoadTriggerHandle(LY,(S5I),(11)))local integer CN3=GetHandleId(CM3)local group g=NTI()local unit P8I=nulllocal integer ID=1966092374local real CY3=125if NPI==1 thenset CY3=100endifset GK=SFIcall GroupEnumUnitsInRange(g,x,y,CY3,Condition(function C21))call GroupRemoveUnit(g,SFI)set P8I=GroupPickRandomUnit(g)call NSI(g)if P8I!=null or NPI==MKO or NPI==(MKO-1)or NPI==(MKO-2)thenset ID=1966092373endifset CL3=CreateUnit(GetOwningPlayer(SFI),ID,x,y,RM2)call SaveUnitHandle(LY,(CN3),(700+NPI),(CL3))if P8I!=null thenif(IsUnitAlly(P8I,GetOwningPlayer(SFI))==true and CK3==false)or((LoadInteger(LY,(GetHandleId((P8I))),((4259))))==1)==true thenset P8I=nullendifcall FlushChildHashtable(LY,(S5I))call S0I(t)if P8I!=null and IsUnitAlly(P8I,GetOwningPlayer(SFI))==false thencall PauseUnit(P8I,true)endifcall TriggerRegisterTimerEvent(CM3,0.5/MKO,true)call TriggerAddCondition(CM3,Condition(function CZ3))call SaveInteger(LY,(CN3),(18),(NPI))call SaveUnitHandle(LY,(CN3),(17),(P8I))call SaveUnitHandle(LY,(CN3),(14),(SFI))call SaveGroupHandle(LY,(CN3),(16),(NTI()))elseif NPI>MKO thenset P8I=nullcall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(CM3,0.5/MKO,true)call TriggerAddCondition(CM3,Condition(function CZ3))call SaveInteger(LY,(CN3),(18),(NPI))call SaveUnitHandle(LY,(CN3),(17),(P8I))call SaveUnitHandle(LY,(CN3),(14),(SFI))call SaveGroupHandle(LY,(CN3),(16),(NTI()))endifset t=nullset SFI=nullset CL3=nullset CM3=nullset g=nullset P8I=nullreturn falseendfunctionfunction CS3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real RM2=UEI(GetUnitX(SFI),GetUnitY(SFI),GetLocationX(l),GetLocationY(l))local integer SUI=GetUnitAbilityLevel(SFI,1093687864)local integer CT3local integer MKOlocal boolean CK3=truelocal trigger CR3=CreateTrigger()if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093747542)set CK3=trueendifset CT3=1500+500*SUIset MKO=CT3/50call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveInteger(LY,(S5I),(12),(MKO))call SaveTriggerHandle(LY,(S5I),(11),(CR3))call SaveBoolean(LY,(S5I),(15),(CK3))call TriggerRegisterTimerEvent(t,0.5/MKO,true)call TriggerAddCondition(t,Condition(function CJ3))call RemoveLocation(l)set t=nullset SFI=nullset l=nullendfunctionfunction CP3 takes nothing returns booleanif GetSpellAbilityId()==1093687864 or GetSpellAbilityId()==1093747542 thencall CS3()endifreturn falseendfunctionfunction TF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CP3))set t=nullendfunctionfunction CQ3 takes unit P7I returns nothinglocal group g=NTI()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit P8Ilocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)local integer SUI=GetUnitAbilityLevel(P7I,1093687860)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,300,Condition(function CF1))set P8I=GroupPickRandomUnit(g)call NSI(g)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",P7I,"origin"))if P8I!=null thencall IA1(I01,1093687863)call SetUnitAbilityLevel(I01,1093687863,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)endifset g=nullset P8I=nullset I01=nullendfunctionfunction CU3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if NPI>15 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall CQ3(SFI)endifset t=nullset SFI=nullreturn falseendfunctionfunction D03 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call TriggerRegisterTimerEvent(t,.7,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function CU3))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerEvaluate(t)set t=nullset SFI=nullendfunctionfunction DI3 takes nothing returns booleanif GetSpellAbilityId()==1093687860 thencall D03()endifreturn falseendfunctionfunction TC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DI3))set t=nullendfunctionfunction D13 takes nothing returns nothingcall P6I(BDI,GetEnumUnit(),1,BEI)endfunctionfunction DO3 takes unit P7I,real x,real y,integer SUI returns nothinglocal group g=NTI()if SUI==1 thenset BEI=105elseif SUI==2 thenset BEI=170elseif SUI==3 thenset BEI=250elseif SUI==4 thenset BEI=310endifset BDI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,300+25,Condition(function CA1))call ForGroup(g,function D13)call NSI(g)set g=nullendfunctionfunction D23 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(GK),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)if GetUnitAbilityLevel(GK,1093677906)>0 thencall IA1(I01,1093742676)elsecall IA1(I01,1093817142)endifcall IssueTargetOrder(I01,"slow",GetEnumUnit())set I01=nullendfunctionfunction D33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer D43=ModuloInteger(GetTriggerEvalCount(t),4)+1local real alocal real dlocal real xlocal real ylocal group g=NTI()set GK=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),860,Condition(function CA1))call ForGroup(g,function D23)call NSI(g)if D43==1 thenset a=GetRandomReal(0,90)elseif D43==2 thenset a=GetRandomReal(90,180)elseif D43==3 thenset a=GetRandomReal(180,270)elseset a=GetRandomReal(270,360)endifset d=GetRandomReal(140,860)if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494)thencall FlushChildHashtable(LY,(S5I))call S0I(t)call StopSound(DC,false,true)elseset x=GetUnitX(SFI)+d*Cos(a*bj_DEGTORAD)set y=GetUnitY(SFI)+d*Sin(a*bj_DEGTORAD)call DestroyEffect(AddSpecialEffect("effects\\SnowyBlizzardTarget.mdx",x,y))call DO3(SFI,x,y,SUI)endifset t=nullset SFI=nullreturn falseendfunctionfunction D53 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUIcall IO1(DC,GetUnitX(SFI),GetUnitY(SFI))if GetSpellAbilityId()==1093677906 thenset SUI=GetUnitAbilityLevel(SFI,1093677906)elseset SUI=GetUnitAbilityLevel(SFI,1093681494)+1endifcall TriggerRegisterTimerEvent(t,0.10,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function D33))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullset SFI=nullendfunctionfunction D63 takes nothing returns booleanif GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494 thencall D53()endifreturn falseendfunctionfunction XB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D63))call Q1I(1093677912)set t=nullendfunctionfunction D73 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697657656,x,y,0)local integer SUI=GetUnitAbilityLevel(P7I,1093748025)call IA1(I01,1093677380)call SetUnitAbilityLevel(I01,1093677380,SUI)call IssueTargetOrder(I01,"frostnova",I01)call RemoveLocation(l)call IA1(I01,1097625443)call UnitApplyTimedLife(I01,1112820806,2)set P7I=nullset I01=nullset l=nullendfunctionfunction D83 takes nothing returns booleanif GetSpellAbilityId()==1093748025 thencall D73()endifreturn falseendfunctionfunction X91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D83))set t=nullendfunctionfunction D93 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1095262562)if IC1(P7I)==false thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+(0.5+0.5*SUI)*0.25)endifset P7I=nullset t=nullreturn falseendfunctionfunction DA3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function D93))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction DB3 takes nothing returns booleanif GetLearnedSkill()==1095262562 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095262562)==1 thencall DA3()endifreturn falseendfunctionfunction X81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function DB3))set t=nullendfunctionfunction DC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093678147)local integer NPI=GetTriggerEvalCount(t)if(IsUnitType(P8I,UNIT_TYPE_HERO)==true and NPI>2+SUI)or NPI>20 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall P6I(P7I,P8I,1,50)endifset t=nullreturn falseendfunctionfunction DD3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function DC3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset t=nullendfunctionfunction DE3 takes nothing returns booleanif GetSpellAbilityId()==1093678147 thencall DD3()endifreturn falseendfunctionfunction XA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DE3))set t=nullendfunctionfunction DF3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetUnitAnimationByIndex(P7I,8)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction DG3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitAnimationByIndex(P7I,7)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function DF3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction DH3 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1311788336 thencall DG3()endifreturn falseendfunctionfunction PF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function DH3))set t=nullendfunctionfunction DZ3 takes nothing returns nothingcall DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))call P6I(BFI,GetEnumUnit(),1,BGI)endfunctionfunction DV3 takes nothing returns booleanlocal trigger t2=GetTriggeringTrigger()local integer KAO=GetHandleId(t2)local trigger t1=(LoadTriggerHandle(LY,(KAO),(9)))local integer DW3=GetHandleId(t1)local unit DX3=(LoadUnitHandle(LY,(KAO),(8)))local group glocal integer SUI=(LoadInteger(LY,(KAO),(5)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall ShowUnit(DX3,false)call KillUnit(DX3)call FlushChildHashtable(LY,(DW3))call S0I(t1)call FlushChildHashtable(LY,(KAO))call S0I(t2)elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(DX3))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 thenset g=NTI()set GK=DX3set BFI=DX3set BGI=100+40*SUIcall GroupEnumUnitsInRange(g,GetUnitX(DX3),GetUnitY(DX3),285,Condition(function CA1))call ForGroup(g,function DZ3)call NSI(g)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(DX3),GetUnitY(DX3)))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(DX3),GetUnitY(DX3)))call ShowUnit(DX3,false)call KillUnit(DX3)call FlushChildHashtable(LY,(DW3))call S0I(t1)call FlushChildHashtable(LY,(KAO))call S0I(t2)endifset t1=nullset t2=nullset DX3=nullset g=nullreturn falseendfunctionfunction DY3 takes nothing returns booleanlocal trigger t1=GetTriggeringTrigger()local integer DW3=GetHandleId(t1)local trigger t2local integer KAOlocal unit DX3local integer SUIlocal real x=(LoadReal(LY,(DW3),(6)))local real y=(LoadReal(LY,(DW3),(7)))local real NB2local integer NPI=GetTriggerEvalCount(t1)if NPI==1 thencall DestroyEffect((LoadEffectHandle(LY,(DW3),(3))))elseif NPI==2 thencall DestroyEffect((LoadEffectHandle(LY,(DW3),(4))))set t2=CreateTrigger()set KAO=GetHandleId(t2)set SUI=(LoadInteger(LY,(DW3),(5)))set NB2=(LoadReal(LY,(DW3),(1)))set DX3=CreateUnit(GetOwningPlayer((LoadUnitHandle(LY,(DW3),(2)))),1747990342,x,y,NB2)call SetUnitVertexColor(DX3,255,255,255,100)call UnitApplyTimedLife(DX3,1112820806,12)call SaveUnitHandle(LY,(DW3),(8),(DX3))call SaveUnitHandle(LY,(KAO),(8),(DX3))call SaveTriggerHandle(LY,(KAO),(9),(t1))call SaveInteger(LY,(KAO),(5),(SUI))call TriggerRegisterUnitInRange(t2,DX3,235,Condition(function ULI))call TriggerRegisterUnitEvent(t2,DX3,EVENT_UNIT_DEATH)call TriggerAddCondition(t2,Condition(function DV3))call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",DX3,"origin"))elseif NPI>2 thenset DX3=(LoadUnitHandle(LY,(DW3),(8)))call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",DX3,"origin"))endifset t1=nullset DX3=nullreturn falseendfunctionfunction DJ3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t1=CreateTrigger()local integer DW3=GetHandleId(t1)local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)call TriggerRegisterTimerEvent(t1,0.5,true)call TriggerAddCondition(t1,Condition(function DY3))call SaveReal(LY,(DW3),(6),((x)*1.0))call SaveReal(LY,(DW3),(7),((y)*1.0))call SaveInteger(LY,(DW3),(5),(GetUnitAbilityLevel(P7I,1093743696)))call SaveUnitHandle(LY,(DW3),(2),(P7I))call SaveReal(LY,(DW3),(1),((GetUnitFacing(P7I))*1.0))call SaveEffectHandle(LY,(DW3),(3),(AddSpecialEffect("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",x,y)))call SaveEffectHandle(LY,(DW3),(4),(AddSpecialEffect("effects\\Static_Remnant_FX.mdx",x,y)))set P7I=nullset t1=nullendfunctionfunction DK3 takes nothing returns booleanif GetSpellAbilityId()==1093743696 thencall DJ3()endifreturn falseendfunctionfunction SE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DK3))set t=nullendfunctionfunction DL3 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(BHI),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093686069)call IssueTargetOrder(I01,"slow",GetEnumUnit())call P6I(BHI,GetEnumUnit(),1,BZI)set I01=nullendfunctionfunction DM3 takes unit P7I,unit P8I returns nothinglocal integer S5I=GetHandleId(P7I)local group g=NTI()call DestroyEffect((LoadEffectHandle(LY,(S5I),(200))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(201))))call SaveInteger(LY,(GetHandleId((P7I))),((4264)),(2))set GK=P7Iset BHI=P7Iset BZI=GetUnitAbilityLevel(P7I,1093685591)*20+10call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),300,Condition(function CA1))call ForGroup(g,function DL3)call NSI(g)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(P8I),GetUnitY(P8I)))set g=nullendfunctionfunction DN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local trigger DS3=(LoadTriggerHandle(LY,(S5I),(202)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and((LoadInteger(LY,(GetHandleId((P7I))),((4264))))==1)==true thencall DisableTrigger(t)call DM3(P7I,P8I)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call FlushChildHashtable(LY,(GetHandleId(DS3)))call S0I(DS3)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullset DS3=nullreturn falseendfunctionfunction DT3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function DN3))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveTriggerHandle(LY,(S5I),(202),(GetTriggeringTrigger()))set t=nullset P8I=nullset P7I=nullendfunctionfunction DR3 takes nothing returns booleanif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false thencall DT3()endifreturn falseendfunctionfunction DP3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P7I=GetTriggerUnit()local integer S5I=GetHandleId(P7I)local string fx=""if IsUnitAlly(P7I,GetLocalPlayer())or P0I(GetLocalPlayer())thenset fx="Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl"endifcall SaveEffectHandle(LY,(S5I),(200),(AddSpecialEffectTarget(fx,P7I,"right hand")))call SaveEffectHandle(LY,(S5I),(201),(AddSpecialEffectTarget(fx,P7I,"left hand")))call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function DR3))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))set t=nullendfunctionfunction DQ3 takes nothing returns booleanif(GetSpellAbilityId()==1093743695 or GetSpellAbilityId()==1093743696 or GetSpellAbilityId()==1093743698)and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4264))))==1)==false thencall SaveInteger(LY,(GetHandleId((GetTriggerUnit()))),((4264)),(1))call DP3()endifreturn falseendfunctionfunction DU3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DQ3))set P7I=nullset t=nullendfunctionfunction E03 takes nothing returns booleanif GetLearnedSkill()==1093685591 and GetUnitAbilityLevel(GetTriggerUnit(),1093685591)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall DU3()endifreturn falseendfunctionfunction SG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function E03))set t=nullendfunctionfunction EI3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real RM2=(LoadReal(LY,(S5I),(13)))local real x=GetUnitX(P8I)-5*Cos(RM2)local real y=GetUnitY(P8I)-5*Sin(RM2)local integer SUI=(LoadInteger(LY,(S5I),(5)))local real x0=(LoadReal(LY,(S5I),(6)))local real y0=(LoadReal(LY,(S5I),(7)))if((x0-x)*(x0-x))+((y0-y)*(y0-y))<100 thenset x=x0set y=y0endifcall SetUnitX(P8I,x)call SetUnitY(P8I,y)if GetTriggerEvalCount(t)==(10+10*SUI)or GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction E13 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1966092376,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093743698)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function EI3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(13),((Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I)))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call IA1(I01,1093743697)call SetUnitAbilityLevel(I01,1093743697,SUI)call IssueTargetOrder(I01,"magicleash",P8I)call UnitApplyTimedLife(I01,1112820806,0.5+0.5*SUI)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call IA1(I01,1093743699)call IssueTargetOrder(I01,"slow",P7I)set P7I=nullset P8I=nullset I01=nullset t=nullendfunctionfunction EO3 takes nothing returns booleanif GetSpellAbilityId()==1093743698 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and NNI(GetSpellTargetUnit())==false thencall E13()endifreturn falseendfunctionfunction SF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EO3))set t=nullendfunctionfunction E23 takes nothing returns nothingif(LoadBoolean(LY,(BVI),(GetHandleId(GetEnumUnit()))))==false thencall SaveBoolean(LY,(BVI),(GetHandleId(GetEnumUnit())),(true))call P6I(BXI,GetEnumUnit(),1,BYI*(BWI*4+4)/100)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetEnumUnit(),"origin"))endifendfunctionfunction E33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit E43=(LoadUnitHandle(LY,(S5I),(195)))local integer BQO=(LoadInteger(LY,(S5I),(194)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real IO3=GetUnitX(P7I)local real I23=GetUnitY(P7I)local real RM2=Atan2(QKI-I23,QJI-IO3)local real IV1=IO3+(25+25*SUI)*Cos(RM2)local real IW1=I23+(25+25*SUI)*Sin(RM2)local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))local real lx=(LoadReal(LY,(S5I),(197)))local real ly=(LoadReal(LY,(S5I),(198)))local real KWO=GetUnitState(P7I,UNIT_STATE_MANA)local real E53=(25+25*SUI)*(12+0.007*GetUnitState(P7I,UNIT_STATE_MAX_MANA))/100local group g=NTI()local real E63=(LoadReal(LY,(S5I),(199)))set E63=E63+25+25*SUIcall SaveReal(LY,(S5I),(199),((E63)*1.0))if GetTriggerEvalCount(t)>25 thenset lx=lx+(25+25*SUI)*Cos(RM2)set ly=ly+(25+25*SUI)*Sin(RM2)call SaveReal(LY,(S5I),(197),((lx)*1.0))call SaveReal(LY,(S5I),(198),((ly)*1.0))endifcall SetUnitState(P7I,UNIT_STATE_MANA,RMaxBJ(KWO-E53,0))call MoveLightning(UZI,true,lx,ly,IV1,IW1)call SetUnitX(P7I,IV1)call SetUnitY(P7I,IW1)call SetUnitPosition(I01,IV1,IW1)call SetUnitPosition(E43,IV1,IW1)set GK=P7Iset BXI=P7Iset BVI=S5Iset BWI=SUIset BYI=E63call GroupEnumUnitsInRange(g,IV1,IW1,75+75*SUI,Condition(function CA1))call ForGroup(g,function E23)call NSI(g)set BQO=BQO-1call SaveInteger(LY,(S5I),(194),(BQO))call SetUnitVertexColor(P7I,255,255,255,0)if BQO==0 or GetUnitState(P7I,UNIT_STATE_MANA)<1 thencall DestroyLightning(UZI)call UPI(IV1,IW1,75)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call RemoveUnit(I01)call RemoveUnit(E43)call SetUnitVertexColor(P7I,255,255,255,255)call SetUnitPathing(P7I,true)call SetUnitInvulnerable(P7I,false)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall UPI(IV1,IW1,75)endifset t=nullset I01=nullset P7I=nullset UZI=nullset g=nullset E43=nullreturn falseendfunctionfunction E73 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local unit I01local unit E43local location llocal real xlocal real ylocal trigger tlocal integer S5Ilocal lightning UZIlocal integer SUI=GetUnitAbilityLevel(P7I,1093743695)local real KWO=GetUnitState(P7I,UNIT_STATE_MANA)local real E53=15+0.07*GetUnitState(P7I,UNIT_STATE_MAX_MANA)call SetUnitState(P7I,UNIT_STATE_MANA,RMaxBJ(KWO-E53,0))if GetUnitState(P7I,UNIT_STATE_MANA)>10 thenset t=CreateTrigger()set S5I=GetHandleId(t)set I01=CreateUnit(GetOwningPlayer(P7I),1865429296,QXI,QYI,0)set E43=CreateUnit(GetOwningPlayer(P7I),1211119431,QXI,QYI,0)set UZI=AddLightning("FORK",true,QXI,QYI,QXI,QYI)if GetSpellTargetUnit()==null thenset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)call RemoveLocation(l)elseset x=GetUnitX(GetSpellTargetUnit())set y=GetUnitY(GetSpellTargetUnit())endifcall SetUnitVertexColor(P7I,255,255,255,0)call SetUnitVertexColor(E43,255,255,255,0)call SetUnitPathing(P7I,false)call SetUnitPathing(I01,false)call SetUnitInvulnerable(P7I,true)call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(195),(E43))call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(197),((QXI)*1.0))call SaveReal(LY,(S5I),(198),((QYI)*1.0))call SaveReal(LY,(S5I),(199),((0)*1.0))call SaveInteger(LY,(S5I),(194),(QAI(R2I(SquareRoot((x-QXI)*(x-QXI)+(y-QYI)*(y-QYI))/(25+25*SUI)),1)))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",E43,"origin")))call TriggerRegisterTimerEvent(t,0.04,true)call TriggerAddCondition(t,Condition(function E33))call ShowUnit(P7I,false)call ShowUnit(P7I,true)call SelectUnitAddForPlayer(P7I,GetOwningPlayer(P7I))endifset P7I=nullset I01=nullset E43=nullset l=nullset t=nullset UZI=nullendfunctionfunction E83 takes nothing returns booleanif GetSpellAbilityId()==1093743695 thencall E73()endifreturn falseendfunctionfunction E93 takes nothing returns booleanif GetSpellAbilityId()==1093743695 thenif GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)<(15+0.07*GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657720))endifendifreturn falseendfunctionfunction SH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E83))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function E93))set t=nullendfunctionfunction EA3 takes unit P7I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093812553)if GetUnitTypeId(P7I)==1215063922 thencall SetUnitAbilityLevel(P7I,1093681490,SUI)elsecall SetUnitAbilityLevel(P7I,1093681490,SUI+4)endifendfunctionfunction EB3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093812553)if SUI==1 thencall IA1(P7I,1093681490)endifcall EA3(P7I)set P7I=nullendfunctionfunction EC3 takes nothing returns booleanif GetLearnedSkill()==1093812553 and IsUnitIllusion(GetTriggerUnit())==false thencall EB3()endifreturn falseendfunctionfunction ED3 takes nothing returns nothinglocal unit u=GetTriggerUnit()if GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 thencall SetUnitAnimation(u,"stand")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"head"))elseif GetUnitTypeId(u)==1215063922 thencall SetUnitAnimation(u,"stand defend")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))endifset u=nullendfunctionfunction EE3 takes nothing returns booleanif GetSpellAbilityId()==1093681490 thencall ED3()endifreturn falseendfunctionfunction N71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EE3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function EC3))call Q1I(1093681490)set t=nullendfunctionconstant function DragonsBlood_RawCode takes nothing returns integerreturn 1093681996endfunctionconstant function DragonsBlood_ArmorCode takes nothing returns integerreturn 1378889782endfunctionfunction EF3 takes nothing returns booleanreturn GetLearnedSkill()==(1093681996)and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction EG3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()call SetPlayerTechResearched(GetOwningPlayer(SFI),(1378889782),GetPlayerTechCount(GetOwningPlayer(SFI),(1378889782),true)+1)endfunctionfunction N61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function EF3))call TriggerAddAction(t,function EG3)endfunctionfunction EH3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real GW1=(LoadReal(LY,(GetHandleId(P8I)),(805)))local real AB3=0.75local real PAI=20if IsUnitType(P8I,UNIT_TYPE_HERO)==false thenset AB3=1endifif GetUnitState(P8I,UNIT_STATE_LIFE)<=PAI*AB3 thenset PAI=GetUnitState(P8I,UNIT_STATE_LIFE)/AB3-2endifcall P6I(P7I,P8I,1,PAI)if(TimerGetElapsed(M))>=GW1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction EZ3 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real GW1=(LoadReal(LY,(GetHandleId(P8I)),(805)))if GW1>(TimerGetElapsed(M))thencall SaveReal(LY,(GetHandleId(P8I)),(805),(((TimerGetElapsed(M))+5)*1.0))elsecall SaveReal(LY,(GetHandleId(P8I)),(805),(((TimerGetElapsed(M))+5)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function EH3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifset t=nullendfunctionfunction EV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call EZ3(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction EW3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function EV3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P8I=nullset P7I=nullendfunctionfunction EX3 takes nothing returns booleanif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and GetUnitAbilityLevel(GetAttacker(),1093685044)>0 thencall EW3()endifreturn falseendfunctionfunction EY3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function EX3))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))set P7I=nullset t=nullendfunctionfunction EJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call EA3(P7I)call S0I(t)call FlushChildHashtable(LY,(S5I))set t=nullset P7I=nullreturn falseendfunctionfunction EK3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call EA3(P7I)call S0I(t)call FlushChildHashtable(LY,(S5I))set t=nullset P7I=nullreturn falseendfunctionfunction VT1 takes nothing returns nothingif GetUnitAbilityLevel(GK,1093681490)>0 thencall EA3(GK)endifendfunctionfunction EL3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function EJ3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function EK3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction EM3 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093677895 thencall EL3()endifelseif GetLearnedSkill()==1093677895 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677895)==1 thencall EY3()endifendifreturn falseendfunctionfunction N81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function EM3))set t=nullendfunctionfunction EN3 takes nothing returns booleanif((GetSpellAbilityId()==1093686091))thenreturn trueendifif((GetSpellAbilityId()==1093682252))thenreturn trueendifif((GetSpellAbilityId()==1093682248))thenreturn trueendifif((GetSpellAbilityId()==1093750594))thenreturn trueendifreturn falseendfunctionfunction ES3 takes nothing returns booleanif(not(GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit())>0))thenreturn falseendifif(not EN3())thenreturn falseendifreturn trueendfunctionfunction ET3 takes nothing returns nothinglocal location ON3=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),ON3,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093682249)call SetUnitAbilityLevelSwapped(1093682249,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit()))call IssueImmediateOrder(bj_lastCreatedUnit,"stomp")call RemoveLocation(ON3)endfunctionfunction XE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ES3))call TriggerAddAction(t,function ET3)endfunctionfunction ER3 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093686090)call SetUnitAbilityLevel(I01,1093686090,UJ)call IssueTargetOrder(I01,"thunderbolt",GetEnumUnit())call P6I(GetTriggerUnit(),GetEnumUnit(),1,AK)set I01=nullendfunctionfunction EP3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location l=GetSpellTargetLoc()local integer i=1local real QXI=GetUnitX(SFI)local real QYI=GetUnitY(SFI)local real QJIlocal real QKIlocal real xlocal real ylocal real alocal group g=NTI()local group g2=NTI()if P8I==null thenset QJI=GetLocationX(l)set QKI=GetLocationY(l)elseset QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)endifset a=bj_DEGTORAD*UEI(QXI,QYI,QJI,QKI)call RemoveLocation(l)loopexitwhen i>24set x=PTI(QXI+i*60*Cos(a))set y=PUI(QYI+i*60*Sin(a))call GroupEnumUnitsInRange(g2,x,y,250,Condition(function C51))call GroupAddGroup(g2,g)call GroupClear(g2)call OA1(CreateDestructable(1110454320,x,y,GetRandomReal(0,360),0.5,GetRandomInt(0,2)),8)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))set i=i+1endloopset UJ=GetUnitAbilityLevel(SFI,1093686091)set AK=UJ*50+75call ForGroup(g,function ER3)call NSI(g)call NSI(g2)set SFI=nullset l=nullendfunctionfunction EQ3 takes nothing returns booleanif GetSpellAbilityId()==1093686091 thencall EP3()endifreturn falseendfunctionfunction XD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EQ3))call Q1I(1093686090)set t=nullendfunctionfunction EU3 takes nothing returns booleanif(not(UnitHasBuffBJ(GetAttacker(),1114795873)==true))thenreturn falseendifreturn trueendfunctionfunction F03 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall UnitRemoveAbility(P7I,1114795873)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction FI3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function F03))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction XG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function EU3))call TriggerAddAction(t,function FI3)endfunctionfunction F13 takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())==1227894859)thenif(GetUnitTypeId(GetTriggerUnit())==1333027688)thenreturn trueendifendifreturn falseendfunctionfunction FO3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call IA1(I01,1095332466)call IssueImmediateOrder(I01,"roar")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction F23 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UnitRemoveAbility(SFI,1110454608)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function FO3))set t=nullset SFI=nullendfunctionfunction XF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function F13))call TriggerAddAction(t,function F23)endfunctionfunction F33 takes nothing returns nothinglocal real x=GetUnitX(GetEnumUnit())local real y=GetUnitY(GetEnumUnit())local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))call SetUnitX(BJI[id],x)call SetUnitY(BJI[id],y)call IssueImmediateOrder(BJI[id],"fanofknives")call P6I(GetTriggerUnit(),GetEnumUnit(),1,BLI)endfunctionfunction F43 takes nothing returns nothinglocal real x=GetUnitX(GetEnumUnit())local real y=GetUnitY(GetEnumUnit())local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetEnumUnit())==true thencall SetUnitX(BJI[id],x)call SetUnitY(BJI[id],y)call IssueImmediateOrder(BJI[id],"fanofknives")endifendfunctionfunction F53 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true and IC1(GetFilterUnit())==falseendfunctionfunction F63 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()local integer id=GetPlayerId(GetOwningPlayer(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093682248)local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429082,GetUnitX(P7I),GetUnitY(P7I),0)call UnitApplyTimedLife(I01,1112820806,0.5)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093750594)endifif SUI==1 thenset BLI=160elseif SUI==2 thenset BLI=210elseif SUI==2 thenset BLI=270endifset BJI[id]=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)set BKI[id]=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call SetUnitScale(BJI[id],0.25,0.25,0.25)call IA1(BJI[id],1093682253)call IA1(BKI[id],1093748784)call SetUnitAbilityLevel(BJI[id],1093682253,SUI)call SetUnitAbilityLevel(BKI[id],1093748784,SUI)call GroupEnumUnitsInRange(g,x,y,575+25,Condition(function F53))call ForGroup(g,function F33)if GetUnitAbilityLevel(P7I,1093750594)>0 thencall ForGroup(g,function F43)endifcall NSI(g)set P7I=nullset g=nullendfunctionfunction F73 takes nothing returns booleanif GetSpellAbilityId()==1093682248 or GetSpellAbilityId()==1093750594 thencall F63()endifreturn falseendfunctionfunction XC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F73))set t=nullcall Q1I(1093682253)endfunctionconstant function Untouchable_RawCode takes nothing returns integerreturn 1093682263endfunctionconstant function Untouchable_EffectCode takes nothing returns integerreturn 1093681712endfunctionfunction F83 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenreturn GetUnitAbilityLevel(GetSpellTargetUnit(),(1093682263))>0elsereturn GetUnitAbilityLevel(GetTriggerUnit(),(1093682263))>0endifendfunctionfunction F93 takes nothing returns nothinglocal unit P7Ilocal unit P8Ilocal unit I01if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenset P7I=GetSpellTargetUnit()set P8I=GetTriggerUnit()elseset P7I=GetTriggerUnit()set P8I=GetAttacker()endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,(1093681712))call SetUnitAbilityLevel(I01,(1093681712),GetUnitAbilityLevel(P7I,(1093682263)))call IssueTargetOrder(I01,"acidbomb",P8I)endfunctionfunction XW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F83))call TriggerAddAction(t,function F93)endfunctionfunction FA3 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)!=GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE)endfunctionfunction FB3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer QX2=(LoadInteger(LY,(S5I),(28)))local group glocal unit WH1if QX2>10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(28),(QX2+1))set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),300,Condition(function FA3))set WH1=GroupPickRandomUnit(g)call NSI(g)call SetUnitState(WH1,UNIT_STATE_LIFE,GetUnitState(WH1,UNIT_STATE_LIFE)+10)endifset t=nullset P7I=nullset g=nullset WH1=nullreturn falseendfunctionfunction FC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call AddUnitAnimationProperties(P7I,"alternate",false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction FD3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer i=1local trigger tlocal integer S5Iloopexitwhen i>(1+2*GetUnitAbilityLevel(P7I,1093677378))set t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call SaveInteger(LY,(GetHandleId(t)),(28),(0))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function FB3))set i=i+1endloopif GetUnitTypeId(P7I)==1160786520 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function FC3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendifset t=nullset P7I=nullendfunctionfunction FE3 takes nothing returns booleanif GetSpellAbilityId()==1093677378 thencall FD3()endifreturn falseendfunctionfunction XZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FE3))set t=nullendfunctionfunction FF3 takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))endfunctionfunction FG3 takes unit u returns integerlocal integer SUI=GetUnitAbilityLevel(u,1093682265)if SUI>0 thenreturn SUIendifset SUI=GetUnitAbilityLevel(u,1093752642)return SUIendfunctionfunction FH3 takes nothing returns booleanlocal real dlocal real IT3if GetUnitAbilityLevel(GetTriggerUnit(),1110455125)>0 and FG3(GetEventDamageSource())>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall UnitRemoveAbility(GetTriggerUnit(),1110455125)set IT3=RMinBJ(FF3(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitX(GetEventDamageSource()),GetUnitY(GetEventDamageSource())),2500)set d=(0.10+0.05*I2R(FG3(GetEventDamageSource())))*IT3call UYI("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,3,216,216,216)call DisableTrigger(GetTriggeringTrigger())call P6I(GetEventDamageSource(),GetTriggerUnit(),3,d)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction FZ3 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function FH3))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction FV3 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif FG3(GetAttacker())>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall FZ3()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093682265 or GetSpellAbilityId()==1093752642)thencall FZ3()endifreturn falseendfunctionfunction FW3 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function FV3))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction FX3 takes nothing returns booleanif(GetLearnedSkill()==1093682265 or GetLearnedSkill()==1093752642)and IsUnitIllusion(GetTriggerUnit())==false and FG3(GetTriggerUnit())==1 thencall FW3()endifreturn falseendfunctionfunction XV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function FX3))set t=nullendfunctionfunction FY3 takes unit u returns booleanreturn IsUnitType(u,UNIT_TYPE_HERO)==false and IsUnitType(u,UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(u)!=1848652101 and GetUnitTypeId(u)!=1848652089endfunctionfunction FJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1114860655)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction FK3 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function FJ3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SetUnitOwner(P8I,GetOwningPlayer(P7I),true)call UnitApplyTimedLife(P8I,1112820806,80)call IA1(P8I,1097167976)call IA1(P8I,1093743175)call QSI(P8I)set P8I=nullset P7I=nullendfunctionfunction FL3 takes nothing returns booleanif GetSpellAbilityId()==1093682264 and FY3(GetSpellTargetUnit())thencall FK3()endifreturn falseendfunctionfunction XH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FL3))set t=nullendfunctionfunction FM3 takes nothing returns nothinglocal real PAI=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*BNIcall P6I(BMI,GetEnumUnit(),7,PAI)endfunctionfunction FN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group gif GetTriggerEvalCount(t)>11 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Iset BMI=P7Iset BNI=(2.25+0.75*GetUnitAbilityLevel(P7I,1093681713))/100call GroupEnumUnitsInRange(g,x,y,625,Condition(function CA1))call ForGroup(g,function FM3)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction FS3 takes real x,real y returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function FN3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set t=nullset P7I=nullendfunctionfunction FT3 takes nothing returns booleanif(not(GetSpellAbilityId()==1093681713))thenreturn falseendifreturn trueendfunctionfunction FR3 takes nothing returns nothinglocal location ON3=GetUnitLoc(GetTriggerUnit())local location FP3=GetSpellTargetLoc()call FS3(GetLocationX(FP3),GetLocationY(FP3))call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetTriggerUnit()),FP3,FP3)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(11.00,1112820806,bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,1093681714)call SetUnitAbilityLevelSwapped(1093681714,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093681713,GetTriggerUnit()))call IssuePointOrderLoc(bj_lastCreatedUnit,"deathanddecay",FP3)call RemoveLocation(ON3)call RemoveLocation(FP3)endfunctionfunction XJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FT3))call TriggerAddAction(t,function FR3)endfunctionfunction FQ3 takes unit P7I,unit P8I,integer SUI returns nothinglocal real PAIlocal real FU3if SUI==1 thenset PAI=25set FU3=0.25elseif SUI==2 thenset PAI=40set FU3=0.5elseif SUI==3 thenset PAI=55set FU3=0.75elseset PAI=70set FU3=1endifcall DD1(P8I,P8I,FU3)call P6I(P7I,P8I,1,PAI)endfunctionfunction G03 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))call FQ3(P7I,P8I,SUI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction GI3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093683511)call FQ3(P7I,P8I,SUI)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,2,false)call TriggerAddCondition(t,Condition(function G03))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function G03))set t=nullset P7I=nullset P8I=nullendfunctionfunction G13 takes nothing returns booleanif GetSpellAbilityId()==1093683511 and NNI(GetSpellTargetUnit())==false thencall GI3()endifreturn falseendfunctionfunction XY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function G13))endfunctionfunction DemonicConversion_Delayed takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call IA1(I01,1093744474)call SetUnitAbilityLevel(I01,1093744474,SUI)call IssueImmediateOrder(I01,"slimemonster")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset I01=nullreturn falseendfunctionfunction GO3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local integer SUI=GetUnitAbilityLevel(P7I,1093744688)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call SetUnitState(P8I,UNIT_STATE_LIFE,1)call P6I(P7I,P8I,2,20)call P6I(P7I,P8I,1,20)call P6I(P7I,P8I,3,20)call IA1(I01,1093744474)call SetUnitAbilityLevel(I01,1093744474,SUI)call IssueImmediateOrder(I01,"lavamonster")set P7I=nullset P8I=nullset I01=nullendfunctionfunction G23 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer G33=GetUnitLevel(P8I)if GetOwningPlayer(P8I)!=BO[0]and GetOwningPlayer(P8I)!=CO[0]and G33>4 thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848656728))endifset SFI=nullset P8I=nullendfunctionfunction G43 takes nothing returns booleanif GetSpellAbilityId()==1093744688 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall GO3()elsecall G23()endifendifreturn falseendfunctionfunction DemonicConversion_Recolor takes nothing returns booleanlocal integer id=GetUnitTypeId(GetTriggerUnit())if id==1752654196 or id==1752658994 or id==1752658995 or id==1747988534 thencall SetUnitVertexColor(GetSummonedUnit(),0,0,50,255)endifreturn falseendfunctionfunction XK1 takes nothing returns nothinglocal trigger t=CreateTrigger()local region S5O=CreateRegion()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function G43))set t=nullendfunctionfunction G53 takes real x returns reallocal real PRI=GetRectMinX(bj_mapInitialPlayableArea)+150if(x<PRI)thenreturn PRIendifset PRI=GetRectMaxX(bj_mapInitialPlayableArea)-150if(x>PRI)thenreturn PRIendifreturn xendfunctionfunction G63 takes real y returns reallocal real PRI=GetRectMinY(bj_mapInitialPlayableArea)+150if(y<PRI)thenreturn PRIendifset PRI=GetRectMaxY(bj_mapInitialPlayableArea)-150if(y>PRI)thenreturn PRIendifreturn yendfunctionfunction G73 takes unit u returns booleanlocal integer id=GetUnitTypeId(u)return id==1852862003 or id==1852862006 or id==1848652080 or id==1848657754 or id==1852862001 or id==1852862004 or id==1848652081 or id==1848657968 or id==1852862002 or id==1852862005 or id==1848652082 or id==1848657969endfunctionfunction G83 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or G73(GetFilterUnit())or CI1(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1848651861 or GetUnitTypeId(GetFilterUnit())==1848651865 or GetUnitTypeId(GetFilterUnit())==1848651866 or GetUnitTypeId(GetFilterUnit())==1848658773 or GetUnitTypeId(GetFilterUnit())==1848658774 or GetUnitTypeId(GetFilterUnit())==1848658775 or POI(GetUnitTypeId(GetFilterUnit())))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(318)))))==trueendfunctionfunction G93 takes nothing returns nothinglocal location GA3=GetUnitLoc(GetEnumUnit())local location GB3=GetUnitLoc((LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(318))))local location GC3=M7I(GB3,DistanceBetweenPoints(GB3,GA3)-2,AngleBetweenPoints(GB3,GA3))call SetUnitFacing(GetEnumUnit(),AngleBetweenPoints(GB3,GA3))call SetUnitPositionLoc(GetEnumUnit(),GC3)call RemoveLocation(GA3)call RemoveLocation(GB3)call RemoveLocation(GC3)if BSI>0 thencall P6I(BTI,GetEnumUnit(),8,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*(0.0225+0.0075*BSI))endifendfunctionfunction GD3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local group Z51local integer S5I=GetHandleId(t)local unit GE3=(LoadUnitHandle(LY,(S5I),(318)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01local real xlocal real yif GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817432)thencall KillUnit(GE3)set I01=(LoadUnitHandle(LY,(S5I),(19)))call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(250))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(251))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(252))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(253))),1112820806,1)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)elseif GetTriggerEvalCount(t)>90 thenset I01=(LoadUnitHandle(LY,(S5I),(19)))call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(250))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(251))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(252))),1112820806,1)call UnitApplyTimedLife((LoadUnitHandle(LY,(S5I),(253))),1112820806,1)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(GE3)call KillUnit(I01)call PJI((LoadUnitHandle(LY,(S5I),(2))))elseset BSI=0if GetTriggerEvalCount(t)==20 or GetTriggerEvalCount(t)==40 or GetTriggerEvalCount(t)==60 or GetTriggerEvalCount(t)==80 thenif GetUnitAbilityLevel(P7I,1093817432)>0 thenset BTI=P7Iset BSI=GetUnitAbilityLevel(P7I,1093681713)endifendifset x=GetUnitX(GE3)set y=GetUnitY(GE3)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,425,Condition(function G83))call ForGroup(Z51,function G93)call NSI(Z51)endifset I01=nullset GE3=nullset t=nullreturn falseendfunctionfunction GF3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)local unit GE3=CreateUnit(GetOwningPlayer(P7I),1966092340,x,y,0)local integer SUI=GetUnitAbilityLevel(P7I,1093747288)call RemoveLocation(l)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093817432)endifcall SetUnitAbilityLevel(GE3,1093681968,SUI)if TOI(GetOwningPlayer(P7I))thencall IA1(I01,1093687348)elsecall IA1(I01,1093687347)endifcall IssuePointOrder(I01,"cloudoffog",x,y)call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(250),(CreateUnit(GetOwningPlayer(P7I),1747990098,x,y,0)))call SaveUnitHandle(LY,(S5I),(251),(CreateUnit(GetOwningPlayer(P7I),1747990098,x,y,0)))call SaveUnitHandle(LY,(S5I),(252),(CreateUnit(GetOwningPlayer(P7I),1747990098,x,y,0)))call SaveUnitHandle(LY,(S5I),(253),(CreateUnit(GetOwningPlayer(P7I),1747990098,x,y,0)))call SaveUnitHandle(LY,(S5I),(318),(GE3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function GD3))set P7I=nullset GE3=nullset t=nullset l=nullendfunctionfunction GG3 takes nothing returns booleanif GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817432 thencall GF3()endifreturn falseendfunctionfunction GH3 takes nothing returns booleanlocal location llocal real xlocal real yif GetSpellAbilityId()==1093747288 or GetSpellAbilityId()==1093817432 thenset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)call RemoveLocation(l)set l=nullif(x!=G53(x)and y!=G63(y))or RectContainsCoords(U9,x,y)or RectContainsCoords(IA,x,y)or RectContainsCoords(OA,x,y)or RectContainsCoords(BA,x,y)or RectContainsCoords(CA,x,y)or RectContainsCoords(DA,x,y)thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),"Cannot cast Blackhole here")endifendifreturn falseendfunctionfunction XX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GG3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function GH3))call Q1I(1093681968)endfunctionfunction GZ3 takes nothing returns nothingcall P6I(GetTriggerUnit(),GetEnumUnit(),1,AK)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdx",GetEnumUnit(),"chest"))endfunctionfunction GV3 takes nothing returns nothinglocal group g=NTI()local unit SFI=GetTriggerUnit()local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local integer SUI=GetUnitAbilityLevel(SFI,1093686083)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x,y,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdx",x,y))call IA1(I01,1093686084)call SetUnitAbilityLevel(I01,1093686084,SUI)call IssuePointOrder(I01,"silence",x,y)set AK=SUI*70call GroupEnumUnitsInRange(g,x,y,425,Condition(function C61))call ForGroup(g,function GZ3)call NSI(g)set I01=nullset g=nullset SFI=nullendfunctionfunction GW3 takes nothing returns booleanif GetSpellAbilityId()==1093686083 thencall GV3()endifreturn falseendfunctionfunction SK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GW3))set t=nullendfunctionfunction GX3 takes unit P7I,unit P8I,integer SUI,integer KBO returns nothinglocal unit I01if KBO==1 thencall DD1(P7I,P8I,0.75+0.75*SUI)call P6I(P7I,P8I,1,SUI*50+50)elseset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093686087)call SetUnitAbilityLevel(I01,1093686087,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)call P6I(P7I,P8I,1,SUI*50+50+100)endifset I01=nullendfunctionfunction GY3 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093686086)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendfunctionfunction GJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer KBO=(LoadInteger(LY,(S5I),(152)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyLightning(UZI)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall MoveLightning(UZI,false,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))if QNI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))>600 thencall DestroyLightning(UZI)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call GX3(P7I,P8I,SUI,KBO)endifendifset t=nullset P7I=nullset P8I=nullset UZI=nullreturn falseendfunctionfunction GK3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local lightning UZI=AddLightning("HWPB",false,GetUnitX(C0I),GetUnitY(C0I),GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))call SetLightningColor(UZI,0,.7,1,1)call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveUnitHandle(LY,(S5I),(2),(C0I))call SaveInteger(LY,(S5I),(30),(NKI(GetEnumUnit())))call SaveInteger(LY,(S5I),(5),(BRI))call SaveInteger(LY,(S5I),(152),(BPI))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,C0I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function GJ3))call P6I(GetTriggerUnit(),GetEnumUnit(),1,BQI)call GY3(GetTriggerUnit(),GetEnumUnit())set t=nullset UZI=nullendfunctionfunction GL3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656917,x,y,0)local group g=NTI()local integer SUI=GetUnitAbilityLevel(SFI,1093686072)local real DC1=6local integer KBO=1if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093751120)set DC1=8set KBO=2endifcall RemoveLocation(l)call SetUnitAnimation(I01,"channel")call OR1(I01,DC1)set C0I=I01set BUI=DC1set BQI=SUI*50+50set BRI=SUIset BPI=KBOset GK=SFIcall GroupEnumUnitsInRange(g,x,y,400,Condition(function CC1))call ForGroup(g,function GK3)call NSI(g)set g=nullset I01=nullset SFI=nullset l=nullendfunctionfunction GM3 takes nothing returns booleanif GetSpellAbilityId()==1093686072 or GetSpellAbilityId()==1093751120 thencall GL3()endifreturn falseendfunctionfunction SM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GM3))set t=nullendfunctionfunction GN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUIlocal integer QX2local integer MKOif(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER and GetIssuedOrderId()!=String2OrderIdBJ("phaseshift"))or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_DEATH thencall SetUnitInvulnerable(SFI,false)call UnitRemoveAbility(SFI,1093678162)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset SUI=(LoadInteger(LY,(S5I),(5)))set QX2=(LoadInteger(LY,(S5I),(28)))+1call SaveInteger(LY,(S5I),(28),(QX2))set MKO=3*SUIif SUI==4 thenset MKO=MKO+1endifif QX2>MKO or QNI(GetUnitX(SFI),GetUnitY(SFI),(LoadReal(LY,(S5I),(6))),(LoadReal(LY,(S5I),(7))))>125 thencall SetUnitInvulnerable(SFI,false)call UnitRemoveAbility(SFI,1093678162)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset SFI=nullreturn falseendfunctionfunction GS3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitInvulnerable(SFI,true)call IA1(SFI,1093678162)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(SFI,1093686082)))call SaveInteger(LY,(S5I),(28),(0))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function GN3))call SCI(SFI,4266,5.9)set t=nullset SFI=nullendfunctionfunction GT3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call IssueImmediateOrder(SFI,"phaseshiftoff")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction GR3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function GT3))set t=nullset SFI=nullendfunctionfunction GP3 takes nothing returns booleanif GetIssuedOrderId()==String2OrderIdBJ("phaseshift")and IsUnitIllusion(GetTriggerUnit())==false and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4266))))==1)==false thencall GS3()elseif GetIssuedOrderId()==String2OrderIdBJ("phaseshifton")thencall GR3()endifreturn falseendfunctionfunction SL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function GP3))set t=nullendfunctionfunction GQ3 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())call P6I(GK,GetEnumUnit(),1,AK)endifendfunctionfunction GU3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RM2=(LoadReal(LY,(S5I),(13)))local group H03local real xlocal real yif GetTriggerEventId()==EVENT_UNIT_DEATH thenset GK=CreateUnit(GetOwningPlayer(I01),1747990095,GetUnitX((LoadUnitHandle(LY,(S5I),(14)))),GetUnitY((LoadUnitHandle(LY,(S5I),(14)))),0)call SetUnitScale(GK,2.5,2.5,2.5)call KillUnit(GK)call SetUnitPosition((LoadUnitHandle(LY,(S5I),(14))),GetUnitX(I01),GetUnitY(I01))call ShowUnit((LoadUnitHandle(LY,(S5I),(14))),false)call ShowUnit((LoadUnitHandle(LY,(S5I),(14))),true)call SelectUnitAddForPlayer((LoadUnitHandle(LY,(S5I),(14))),GetOwningPlayer((LoadUnitHandle(LY,(S5I),(14)))))set CII[GetPlayerId(GetOwningPlayer(I01))]=nullcall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)>120 thenset CII[GetPlayerId(GetOwningPlayer(I01))]=nullcall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitScale(I01,2.5,2.5,2.5)call KillUnit(I01)elseset x=GetUnitX(I01)set y=GetUnitY(I01)set H03=NTI()set XK=gset GK=I01set AK=SUI*70call GroupEnumUnitsInRange(H03,x,y,225+25,Condition(function CH1))call ForGroup(H03,function GQ3)call NSI(H03)call SetUnitX(I01,PTI(x+15*Cos(RM2*bj_DEGTORAD)))call SetUnitY(I01,PUI(y+15*Sin(RM2*bj_DEGTORAD)))endifset t=nullset g=nullset H03=nullset I01=nullreturn falseendfunctionfunction HI3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2=GetLocationX(l)local real y2=GetLocationY(l)local real RM2=UEI(x1,y1,x2,y2)local integer SUI=GetUnitAbilityLevel(SFI,1093686073)local unit I01=CreateUnit(GetOwningPlayer(SFI),1747990095,x1,y1,RM2)call IO1(NC,x1,y1)call IA1(GetTriggerUnit(),1093686081)set CII[GetPlayerId(GetOwningPlayer(SFI))]=I01call SetUnitScale(I01,3.5,3.5,3.5)call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.025,true)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function GU3))call RemoveLocation(l)set t=nullset I01=nullset g=nullset SFI=nullset l=nullendfunctionfunction H13 takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))if CII[i]==null thencall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652599))elsecall SetUnitScale(CII[i],2.5,2.5,2.5)call KillUnit(CII[i])endifendfunctionfunction HO3 takes nothing returns booleanif GetSpellAbilityId()==1093686073 thencall HI3()endifif GetSpellAbilityId()==1093686081 thencall H13()endifreturn falseendfunctionfunction IllusoryOrb_Learn takes nothing returns booleanif GetLearnedSkill()==1093686073 and GetUnitAbilityLevel(GetTriggerUnit(),1093686073)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall IA1(GetTriggerUnit(),1093686081)endifreturn falseendfunctionfunction SJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HO3))set t=nullendfunctionfunction H23 takes nothing returns booleanreturn GetSpellAbilityId()==1093808453endfunctionfunction H33 takes nothing returns nothingcall SetUnitX(GetEnumUnit(),C1I)call SetUnitY(GetEnumUnit(),COI)endfunctionfunction H43 takes nothing returns nothinglocal destructable array dxlocal integer TGIlocal integer THIlocal fogmodifier H53local unit I01=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location AM3local real xlocal real ylocal group g=NTI()if P8I==null thenset AM3=GetSpellTargetLoc()elseset AM3=GetUnitLoc(P8I)endifset x=GetLocationX(AM3)set y=GetLocationY(AM3)set C1I=xset COI=yif IsUnitAlly(I01,GetOwningPlayer(P8I))==true or NNI(GetSpellTargetUnit())==false thenset GK=I01call GroupEnumUnitsInRange(g,x,y,150,Condition(function CA1))call O71(CreateFogModifierRadiusLocBJ(true,GetOwningPlayer(I01),FOG_OF_WAR_VISIBLE,AM3,1000.00),2.25+0.75*GetUnitAbilityLevel(I01,1093808453))set TGI=1set THI=8loopexitwhen TGI>THIcall OA1(CreateDestructableLoc(1110454325,M7I(AM3,150.00,(I2R(TGI)*45.00)),GetRandomReal(0,360),1,0),2.25+0.75*GetUnitAbilityLevel(I01,1093808453))set TGI=TGI+1endloopendifcall RemoveLocation(AM3)call ForGroup(g,function H33)call NSI(g)set H53=nullset I01=nullset P8I=nullset AM3=nullset g=nullendfunctionfunction H63 takes nothing returns nothingif GetSpellAbilityId()==1093808453 and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendfunctionfunction XL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function H23))call TriggerAddAction(t,function H43)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(t,function H63)endfunctionconstant function Teleportation_AbilityCode takes nothing returns integerreturn 1093677391endfunctionfunction H73 takes nothing returns booleanreturn GetSpellAbilityId()==(1093677391)endfunctionfunction H83 takes nothing returns nothinglocal location BFO=GetSpellTargetLoc()local real x=GetLocationX(BFO)local real y=GetLocationY(BFO)if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetTriggerUnit()))thencall PingMinimapEx(x,y,3,255,255,255,false)endifcall DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",x,y))call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))call RemoveLocation(BFO)endfunctionfunction XM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function H73))call TriggerAddAction(t,function H83)endfunctionfunction H93 takes unit P7I,real x,real y returns nothinglocal unit HA3=CreateUnit(GetOwningPlayer(P7I),1701212014,x,y,0)call UnitApplyTimedLife(HA3,1111844462,60)call SetUnitVertexColor(HA3,175,255,175,175)call SetUnitFlyHeight(HA3,0,0)set HA3=nullendfunctionfunction HB3 takes nothing returns nothingif(RJI(GetEnumDestructable())or GetDestructableTypeId(GetEnumDestructable())==1110454325)and C2I<=C3I and GetDestructableLife(GetEnumDestructable())>0 thenset C2I=C2I+1call H93(GetTriggerUnit(),GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))call KillDestructable(GetEnumDestructable())endifendfunctionfunction HC3 takes nothing returns nothinglocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1095067246)local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real d=75+75*SUI+50local rect r=Rect(x-d,y-d,x+d,y+d)set C2I=0set C3I=SUIcall EnumDestructablesInRect(r,Condition(function N1I),function HB3)call RemoveRect(r)call RemoveLocation(l)set l=nullset r=nullendfunctionfunction ForceOfNature_Main takes nothing returns booleanif GetSpellAbilityId()==1095067246 thencall HC3()endifreturn falseendfunctionfunction XN1 takes nothing returns nothingendfunctionfunction HD3 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real d=QNI(GetUnitX(P8I),GetUnitY(P8I),C6I,C7I)if d<C5I and IsUnitVisible(P8I,GetOwningPlayer(C8I))==true thenset C4I=GetEnumUnit()set C5I=dendifset P8I=nullendfunctionfunction HE3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093752632)local integer OO1=1093678936local group glocal unit I01if SUI==0 thenset SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093752633)set OO1=1093681484endifif P8I==null thenset C4I=nullset C8I=P7Iset C5I=999999set C6I=GetSpellTargetX()set C7I=GetSpellTargetY()set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function CA1))call ForGroup(g,function HD3)call NSI(g)set P8I=C4Iset g=nullendifif P8I!=null thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,OO1)call SetUnitAbilityLevel(I01,OO1,SUI)call IssueTargetOrder(I01,"chainlightning",P8I)set I01=nullendifset P7I=nullset P8I=nullendfunctionfunction HF3 takes nothing returns booleanif GetSpellAbilityId()==1093752632 or GetSpellAbilityId()==1093752633 thencall HE3()endifreturn falseendfunctionfunction XS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HF3))set t=nullendfunctionfunction HG3 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093685586)local real AB3local real HH3=0.35if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747251)set HH3=0.65endifcall IA1(I01,1093685589)call SetUnitAbilityLevel(I01,1093685589,SUI)call IssueTargetOrder(I01,"slow",P8I)if SUI==1 thenset AB3=0.35elseif SUI==2 thenset AB3=0.35elseset AB3=0.35endifcall P6I(P7I,P7I,1,GetUnitState(P7I,UNIT_STATE_LIFE)*AB3)call P6I(P7I,P8I,1,GetUnitState(P8I,UNIT_STATE_LIFE)*HH3)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P7I,"chest"))call DestroyEffect(AddSpecialEffectTarget("effects\\LifeBreak.mdx",P8I,"chest"))set P7I=nullset P8I=nullset I01=nullendfunctionfunction HZ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real xlocal real ylocal real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real RM2=Atan2(QKI-QYI,QJI-QXI)if GetUnitTypeId(P7I)==1160786520 thencall SetUnitAnimationByIndex(P7I,1)elsecall SetUnitAnimationByIndex(P7I,17)endifif GetTriggerEventId()==EVENT_WIDGET_DEATH or QNI(II3,I13,QJI,QKI)>1400 or BG1(P7I)thencall SetUnitPathing(P7I,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitRemoveAbility(P7I,1093686100)call SetUnitTimeScale(P7I,1.0)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif QNI(QXI,QYI,QJI,QKI)<125 thencall SetUnitPathing(P7I,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitRemoveAbility(P7I,1093686100)call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1.0)if P8I!=null and IC1(P8I)==false thencall IssueTargetOrder(P7I,"attack",P8I)call HG3(P7I,P8I)endifelsecall SetUnitPathing(P7I,false)set II3=QJIset I13=QKIcall SaveReal(LY,(S5I),(23),((II3)*1.0))call SaveReal(LY,(S5I),(24),((I13)*1.0))set x=QXI+15*Cos(RM2)set y=QYI+15*Sin(RM2)call SetUnitPosition(P7I,x,y)call SetUnitFacing(P7I,RM2*bj_RADTODEG)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction HV3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.015,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function HZ3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",P7I,"hand right alternate")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",P7I,"hand left alternate")))call SetUnitPathing(P7I,false)call IA1(P7I,1093686100)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093686100,false)call SetUnitAnimationByIndex(P7I,17)call SetUnitTimeScale(P7I,3.0)set P7I=nullset P8I=nullset t=nullendfunctionfunction HW3 takes nothing returns booleanif(GetSpellAbilityId()==1093685586 or GetSpellAbilityId()==1093747251)and NNI(GetSpellTargetUnit())==false thencall HV3()endifreturn falseendfunctionfunction SO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HW3))set t=nullcall Q1I(1093685589)endfunctionfunction HX3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer HY3=SHI(P8I)local real QZI=GetUnitState(P8I,UNIT_STATE_LIFE)local real R2O=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)local real HJ3if QZI/R2O>0.4 thenset HJ3=I2R(SUI)/4*0.2*HY3+10elseset HJ3=0.2*SUI*HY3+10endifset HJ3=HJ3/8.0if GetTriggerEvalCount(t)>16*8.0 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(31))))call UnitRemoveAbility(P8I,1093685583)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitState(P8I,UNIT_STATE_LIFE,QZI+HJ3)endifset P8I=nullset t=nullreturn falseendfunctionfunction HK3 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093685584)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1/8.0,true)call TriggerAddCondition(t,Condition(function HX3))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(31),(AddSpecialEffectTarget("InnerVitality.mdx",P8I,"chest")))call IA1(P8I,1093685583)call SetUnitAbilityLevel(P8I,1093685583,SUI)set P8I=nullset P7I=nullset t=nullendfunctionfunction HL3 takes nothing returns booleanif GetSpellAbilityId()==1093685584 thencall HK3()endifreturn falseendfunctionfunction S01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HL3))endfunctionfunction HM3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer KAOlocal integer HN3local integer HS3local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(t)>8 or IC1(P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(31))))call FlushChildHashtable(LY,(S5I))set KAO=GetHandleId(P7I)set HN3=6000+GetHandleId(P8I)set HS3=(LoadInteger(LY,(KAO),(HN3)))set HS3=HS3-1if HS3==0 thencall SaveInteger(LY,(KAO),(HN3),(0))elsecall SaveInteger(LY,(KAO),(HN3),(HS3))endifcall NXI(PCI)call S0I(t)elsecall P6I(P7I,P8I,1,5*GetUnitAbilityLevel(P7I,1093685582))endifset t=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction HT3 takes unit P7I,unit P8I returns nothinglocal integer S5I=GetHandleId(P7I)local integer KAOlocal trigger tlocal integer HR3=(LoadInteger(LY,(S5I),(6000+GetHandleId(P8I))))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function HM3))set KAO=GetHandleId(t)call SaveUnitHandle(LY,(KAO),(2),(P7I))call SaveInteger(LY,(KAO),(30),(NKI(P8I)))call SaveInteger(LY,(S5I),(6000+GetHandleId(P8I)),(HR3+1))call SaveEffectHandle(LY,(KAO),(31),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",P8I,"chest")))set t=nullendfunctionfunction HP3 takes nothing returns booleanlocal real dif GetUnitAbilityLevel(GetTriggerUnit(),1110456369)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685582)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,QDI(GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)-15,1))call UnitRemoveAbility(GetTriggerUnit(),1110456369)call HT3(GetEventDamageSource(),GetTriggerUnit())call DisableTrigger(GetTriggeringTrigger())call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction HQ3 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function HP3))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction HU3 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),1093685582)>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall HQ3()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685582 thencall HQ3()endifreturn falseendfunctionfunction Z03 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function HU3))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction ZI3 takes nothing returns booleanif GetLearnedSkill()==1093685582 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685582)==1 thencall Z03()endifreturn falseendfunctionfunction SI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function ZI3))set t=nullendfunctionfunction Z13 takes unit SFI,integer ZO3 returns nothinglocal integer i=0loopexitwhen i>24if i!=ZO3/4 and GetUnitAbilityLevel(SFI,C9I[i])>0 thencall UnitRemoveAbility(SFI,C9I[i])endifset i=i+1endloopif GetUnitAbilityLevel(SFI,C9I[ZO3/4])==0 thencall IA1(SFI,C9I[ZO3/4])call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),C9I[ZO3/4],false)endifendfunctionfunction Z23 takes nothing returns booleanlocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real Z33=GetUnitState(SFI,UNIT_STATE_LIFE)local real MaxHealth=GetUnitState(SFI,UNIT_STATE_MAX_LIFE)local integer Z43local integer Z53local integer SUI=GetUnitAbilityLevel(SFI,1093685585)local boolean Z63=(LoadBoolean(LY,(S5I),(319)))if IsUnitType(SFI,UNIT_TYPE_HERO)==true and SUI>0 thenset Z43=R2I(100*GetUnitState(SFI,UNIT_STATE_LIFE)/GetUnitState(SFI,UNIT_STATE_MAX_LIFE))set Z53=QAI(Q9I(R2I(100-Z43)/7,14),1)if IC1(SFI)==false thenif(GetUnitAbilityLevel(SFI,1112433775)>0)thenset Z53=0endifcall G81(SFI,(12+SUI*2)*Z53)call Z13(SFI,(3+SUI)*Z53)if Z43<40 thenif Z63==false thencall SaveBoolean(LY,(S5I),(319),(true))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",SFI,"left weapon")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("effects\\HeadhunterWEAPONSRight_NoSound.mdx",SFI,"right weapon")))endifelseif Z63==true thencall SaveBoolean(LY,(S5I),(319),(false))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))endifendifendifendifset SFI=nullreturn falseendfunctionfunction Z73 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function Z23))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))call SaveBoolean(LY,(GetHandleId(t)),(319),(false))set t=nullendfunctionfunction Z83 takes nothing returns booleanif GetLearnedSkill()==1093685585 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685585)==1 thencall Z73()endifreturn falseendfunctionfunction S11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Z83))set C9I[1]=1093816397set C9I[2]=1093816398set C9I[3]=1093816399set C9I[4]=1093816400set C9I[5]=1093816401set C9I[6]=1093816394set C9I[7]=1093816402set C9I[8]=1093816393set C9I[9]=1093816396set C9I[10]=1093816404set C9I[11]=1093816625set C9I[12]=1093816405set C9I[13]=1093816392set C9I[14]=1093816406set C9I[15]=1093816407set C9I[16]=1093816408set C9I[17]=1093816409set C9I[18]=1093816410set C9I[19]=1093816624set C9I[20]=1093816395set C9I[21]=1093816403set C9I[22]=1093817409set C9I[23]=1093817410set C9I[24]=1093817411set t=nullendfunctionfunction Z93 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real a=(LoadReal(LY,(S5I),(137)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer id=GetPlayerId(GetOwningPlayer(P7I))local integer NPI=GetTriggerEvalCount(t)local real IV1=x+150*NPI*Cos(a)local real IW1=y+150*NPI*Sin(a)local integer ZA3=6if GetUnitAbilityLevel(P7I,1093685045)==0 thenset ZA3=11endifcall IssuePointOrder(CAI[id],"flamestrike",IV1,IW1)if NPI==(ZA3)thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitAnimation(P7I,"stand")endifset t=nullset P7I=nullreturn falseendfunctionfunction ZB3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093685045)local integer ZC3=1093685061if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747249)set ZC3=1093747250endifcall RemoveLocation(l)call SetUnitAnimation(P7I,"spell")set CAI[GetPlayerId(GetOwningPlayer(P7I))]=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(CAI[GetPlayerId(GetOwningPlayer(P7I))],ZC3)call SetUnitAbilityLevel(CAI[GetPlayerId(GetOwningPlayer(P7I))],ZC3,SUI)call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))if ZC3==1093685061 thencall TriggerRegisterTimerEvent(t,0.1,true)elsecall TriggerRegisterTimerEvent(t,0.05,true)endifcall TriggerAddCondition(t,Condition(function Z93))set t=nullset P7I=nullset l=nullendfunctionfunction ZD3 takes nothing returns booleanif GetSpellAbilityId()==1093685045 or GetSpellAbilityId()==1093747249 thencall ZB3()endifreturn falseendfunctionfunction WS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZD3))call Q1I(1093685061)set t=nullendfunctionfunction ZE3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEvalCount(t)>10 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093748533)call UnitRemoveAbility(P8I,1093748531)call UnitRemoveAbility(P8I,1093748534)call UnitRemoveAbility(P8I,1093748532)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall P6I(P7I,P8I,1,(SUI*4+8)/2)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction ZF3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=CCIlocal unit P7I=CBIlocal unit P8I=GetEnumUnit()if SUI==1 thencall IA1(P8I,1093748533)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093748533,false)elseif SUI==2 thencall IA1(P8I,1093748531)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093748531,false)elseif SUI==3 thencall IA1(P8I,1093748534)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093748534,false)elseif SUI==4 thencall IA1(P8I,1093748532)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093748532,false)endifcall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",P8I,"chest")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ZE3))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",GetUnitX(P8I),GetUnitY(P8I)))set t=nullset P7I=nullset P8I=nullendfunctionfunction ZG3 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093817935)local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local group g=NTI()local group g2=NTI()set CCI=SUIset CBI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,300+25,Condition(function CZ1))call GroupEnumUnitsInRange(g2,x,y,300+25,Condition(function C41))call GroupAddGroup(g2,g)call ForGroup(g,function ZF3)call NSI(g)call NSI(g2)set t=nullset g=nullset g2=nullendfunctionfunction ZH3 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1110460248)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093817677)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall UnitRemoveAbility(GetTriggerUnit(),1110460248)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())call ZG3(GetEventDamageSource(),GetTriggerUnit())endifreturn falseendfunctionfunction ZZ3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function ZH3))set t=nullset P8I=nullset P7I=nullendfunctionfunction ZV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call IssueImmediateOrder(P7I,"unpoisonarrows")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction ZW3 takes nothing returns booleanlocal unit P7I=GetTriggerUnit()local trigger tif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==OrderId("poisonarrows")thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function ZV3))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093817677 thencall ZZ3()endifreturn falseendfunctionfunction ZX3 takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),1093817935)==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function ZW3))set t=nullendifif GetUnitAbilityLevel(GetTriggerUnit(),1093817677)==0 thencall IA1(GetTriggerUnit(),1093817677)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093817677,GetUnitAbilityLevel(GetTriggerUnit(),1093817935))endfunctionfunction ZY3 takes nothing returns booleanif GetLearnedSkill()==1093817935 and IsUnitIllusion(GetTriggerUnit())==false thencall ZX3()endifreturn falseendfunctionfunction WM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function ZY3))set t=nullendfunctionfunction ZJ3 takes nothing returns nothinglocal unit P7I=CEIlocal unit P8I=GetEnumUnit()local unit ZK3if IsUnitInGroup(P8I,CDI)==false thencall GroupAddUnit(CDI,P8I)call DD1(P7I,P8I,CFI)call P6I(P7I,P8I,1,50)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(P8I),GetUnitY(P8I)))endifendfunctionfunction ZL3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x0=(LoadReal(LY,(S5I),(6)))local real y0=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=GetTriggerEvalCount(t)local real xlocal real ylocal group glocal integer ilocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))local integer SUI=GetUnitAbilityLevel(P7I,1093685046)set i=0loopexitwhen i>10set x=x0+100*i*Cos(a*bj_DEGTORAD)set y=y0+100*i*Sin(a*bj_DEGTORAD)if ModuloInteger(NPI,10)==0 thenendifset GK=P7Iset CEI=P7Iset CDI=PR2set CFI=(0.6+0.4*SUI)-(NPI*0.05)set CGI=SUIset g=NTI()call GroupEnumUnitsInRange(g,x,y,150+25,Condition(function CA1))call ForGroup(g,function ZJ3)call NSI(g)set i=i+1endloopif NPI==20*(0.6+0.4*SUI)thencall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset g=nullset PR2=nullreturn falseendfunctionfunction ZM3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x0=(LoadReal(LY,(S5I),(6)))local real y0=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local integer NPI=GetTriggerEvalCount(t)local real x=x0+100*NPI*Cos(a*bj_DEGTORAD)local real y=y0+100*NPI*Sin(a*bj_DEGTORAD)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093685046)local ubersplat AR1local integer iif NPI<10 thencall SaveEffectHandle(LY,(S5I),(609+NPI),(AddSpecialEffect("effects\\IcePath.mdx",x,y)))set AR1=CreateUbersplat(x,y,"IPTH",255,255,255,255,false,false)call SetUbersplatRenderAlways(AR1,true)call SaveUbersplatHandle(LY,(S5I),(760+NPI),(AR1))endifif NPI==10 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function ZL3))call SaveReal(LY,(S5I),(6),((x0)*1.0))call SaveReal(LY,(S5I),(7),((y0)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call TriggerEvaluate(t)elseif NPI>=(0.4+0.6+0.4*SUI)/.05 thenset i=0loopexitwhen i==10call DestroyEffect((LoadEffectHandle(LY,(S5I),(609+i))))call DestroyUbersplat((LoadUbersplatHandle(LY,(S5I),(760+i))))set i=i+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction ZN3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=UEI(x,y,GetSpellTargetX(),GetSpellTargetY())call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function ZM3))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerEvaluate(t)set t=nullset P7I=nullendfunctionfunction ZS3 takes nothing returns booleanif GetSpellAbilityId()==1093685046 thencall ZN3()endifreturn falseendfunctionfunction WN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZS3))set t=nullendfunctionfunction ZT3 takes real x1,real y1,real x2,real y2,real x3,real y3,real x,real y returns booleanlocal real ZR3=(y-y1)*(x2-x1)-(x-x1)*(y2-y1)local real ZP3=(y-y3)*(x1-x3)-(x-x3)*(y1-y3)local real ZQ3=(y-y2)*(x3-x2)-(x-x2)*(y3-y2)return(ZR3*ZP3>0)and(ZQ3*ZP3>0)endfunctionfunction ZU3 takes nothing returns booleanlocal real V03=AKlocal real VI3=BKlocal real V13=CKlocal real VO3=DKlocal real V23=EKlocal real V33=FKreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and ZT3(V03,VI3,V13,VO3,V23,V33,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))endfunctionfunction V43 takes real V53,real V63,real V73 returns nothinglocal real V83=600local real V93=200local real VA3=250local real VB3=Asin((VA3-V93)/V83)local real x=V93/Sin(VB3)local real y=(V83+VA3+x)*Tan(VB3)local real V03=V63+x*Cos((V53-180)*bj_DEGTORAD)local real VI3=V73+x*Sin((V53-180)*bj_DEGTORAD)local real V13=(V63+(V83+VA3)*Cos(V53*bj_DEGTORAD))+y*Cos((V53-90)*bj_DEGTORAD)local real VO3=(V73+(V83+VA3)*Sin(V53*bj_DEGTORAD))+y*Sin((V53-90)*bj_DEGTORAD)local real V23=(V63+(V83+VA3)*Cos(V53*bj_DEGTORAD))+y*Cos((V53+90)*bj_DEGTORAD)local real V33=(V73+(V83+VA3)*Sin(V53*bj_DEGTORAD))+y*Sin((V53+90)*bj_DEGTORAD)set AK=V03set BK=VI3set CK=V13set DK=VO3set EK=V23set FK=V33endfunctionfunction VC3 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093818949)call SetUnitAbilityLevel(I01,1093818949,GetUnitAbilityLevel(GetTriggerUnit(),1093685047))call IssueTargetOrder(I01,"slow",GetEnumUnit())set I01=nullendfunctionfunction VD3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01if GetTriggerEvalCount(t)>1 thencall SetUnitAnimation(SFI,"stand")call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitAnimation(SFI,"spell")set I01=CreateUnit(p,1697656901,x,y,0)call IA1(I01,1093685059)call SetUnitAbilityLevel(I01,1093685059,SUI)call IssuePointOrder(I01,"breathoffrost",QJI,QKI)endifset t=nullset p=nullset SFI=nullset I01=nullreturn falseendfunctionfunction VE3 takes unit u,player p,integer SUI,location l,real x,real y returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SavePlayerHandle(LY,(S5I),(54),(p))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(47),((GetLocationX(l))*1.0))call SaveReal(LY,(S5I),(48),((GetLocationY(l))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(14),(u))call TriggerRegisterTimerEvent(t,0.3,true)call TriggerAddCondition(t,Condition(function VD3))set t=nullendfunctionfunction VF3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093685047)local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local location llocal unit I01local group g=NTI()if GetSpellTargetUnit()==null thenset l=GetSpellTargetLoc()elseset l=GetUnitLoc(GetSpellTargetUnit())endifcall V43(bj_RADTODEG*Atan2(GetLocationY(l)-y,GetLocationX(l)-x),x,y)call GroupEnumUnitsInRange(g,x,y,2000,Condition(function ZU3))call ForGroup(g,function VC3)call NSI(g)set I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x,y,0)call IA1(I01,1093685058)call SetUnitAbilityLevel(I01,1093685058,SUI)call IssuePointOrder(I01,"breathoffire",GetLocationX(l),GetLocationY(l))call VE3(SFI,GetOwningPlayer(SFI),SUI,l,x+50*Cos(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)),y+50*Sin(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)))call RemoveLocation(l)set SFI=nullset l=nullset g=nullendfunctionfunction VG3 takes nothing returns booleanif GetSpellAbilityId()==1093685047 thencall VF3()endifreturn falseendfunctionfunction WL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VG3))call Q1I(1093685058)call Q1I(1093685059)call Q1I(1093818949)set t=nullendfunctionfunction VH3 takes unit SFI,unit P8I returns nothinglocal real a=GetRandomReal(0,360)local real x=GetUnitX(P8I)+50*Cos(a*bj_DEGTORAD)local real y=GetUnitY(P8I)+50*Sin(a*bj_DEGTORAD)local real VZ3=GetRandomReal(200,225)if((LoadInteger(LY,(GetHandleId((SFI))),((4256))))==1)==false thencall SetUnitPosition(SFI,x,y)elsecall SetUnitX(SFI,x)call SetUnitY(SFI,y)endifcall SetUnitFacing(SFI,bj_RADTODEG*Atan2(GetUnitY(P8I)-GetUnitY(SFI),GetUnitX(P8I)-GetUnitX(SFI)))call SetUnitAnimation(SFI,"Attack")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",SFI,"chest"))if T2I(GetOwningPlayer(P8I))==false and IsUnitType(P8I,UNIT_TYPE_ANCIENT)==false thenset VZ3=99999endifcall P6I(SFI,P8I,2,VZ3)if((LoadInteger(LY,(GetHandleId((SFI))),((4256))))==1)==false thencall IssueTargetOrder(SFI,"attack",P8I)endifendfunctionfunction VV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call VH3(SFI,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset P8I=nullreturn falseendfunctionfunction VW3 takes unit SFI returns nothinglocal group g=NTI()set GK=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),450,Condition(function D71))set GK=GroupPickRandomUnit(g)if GK!=null thencall VH3(SFI,GK)endifcall NSI(g)set g=nullendfunctionfunction VX3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer VY3=(LoadInteger(LY,(S5I),(216)))local integer VJ3=(LoadInteger(LY,(S5I),(325)))local integer QX2=(LoadInteger(LY,(S5I),(28)))local unit VK3if QX2>VY3 thencall KillUnit(I01)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093678407,true)call SetUnitPathing(SFI,true)call SetUnitInvulnerable(SFI,false)call SaveInteger(LY,(GetHandleId((SFI))),((4253)),(2))call SetUnitVertexColor(SFI,255,255,255,255)elsecall SaveInteger(LY,(S5I),(28),(QX2+1))call VW3(SFI)if GK==null thencall KillUnit(I01)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093678407,true)call SetUnitPathing(SFI,true)call SetUnitInvulnerable(SFI,false)call SaveInteger(LY,(GetHandleId((SFI))),((4253)),(2))call SetUnitVertexColor(SFI,255,255,255,255)endifendifset t=nullset SFI=nullset VK3=nullset I01=nullreturn falseendfunctionfunction VL3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093684529)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer VJ3=GetUnitAbilityLevel(SFI,1093678407)local player p=GetOwningPlayer(SFI)local integer VY3=3local unit I01=CreateUnit(GetOwningPlayer(SFI),1865429060,GetUnitX(SFI),GetUnitY(SFI),0)if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093747032)if SUI==1 thenset VY3=6elseif SUI==2 thenset VY3=9elseif SUI==3 thenset VY3=12endifelseif SUI==2 thenset VY3=6elseif SUI==3 thenset VY3=9endifcall SetPlayerAbilityAvailable(p,1093678407,false)call SetUnitVertexColor(SFI,255,255,255,125)call SetUnitPathing(SFI,false)call SetUnitInvulnerable(SFI,true)call SaveInteger(LY,(GetHandleId((SFI))),((4253)),(1))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function VV3))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(216),(VY3))call SaveInteger(LY,(S5I),(325),(VJ3))call SaveInteger(LY,(S5I),(28),(2))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",SFI,"weapon")))call TriggerRegisterTimerEvent(t,0.4,true)call TriggerAddCondition(t,Condition(function VX3))set SFI=nullset P8I=nullset t=nullset p=nullendfunctionfunction VM3 takes nothing returns booleanif GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 thencall VL3()endifreturn falseendfunctionfunction VN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitAnimationByIndex(P7I,4)set t=nullset P7I=nullreturn falseendfunctionfunction VS3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function VN3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction VT3 takes nothing returns booleanif GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 thencall VS3()endifreturn falseendfunctionfunction XR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VM3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function VT3))set t=nullendfunctionfunction VR3 takes nothing returns nothingcall P6I(CHI,GetEnumUnit(),1,(60.0+20.0*CZI)*0.25)endfunctionfunction VP3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=GetTriggerEvalCount(t)local group gif NPI==20 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset GK=P7Iset CHI=P7Iset CZI=GetUnitAbilityLevel(P7I,1093678407)set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),275,Condition(function CA1))call ForGroup(g,function VR3)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction VQ3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function VP3))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call TriggerEvaluate(t)call SCI(GetTriggerUnit(),4252,5)endfunctionfunction VU3 takes nothing returns booleanif GetSpellAbilityId()==1093678407 thencall VQ3()endifreturn falseendfunctionfunction XP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VU3))set t=nullendfunctionfunction W03 takes nothing returns booleanreturn GetUnitTypeId(GetSummonedUnit())==1865429059 or GetUnitTypeId(GetSummonedUnit())==1865429319 or GetUnitTypeId(GetSummonedUnit())==1865429320 or GetUnitTypeId(GetSummonedUnit())==1865429321endfunctionfunction WI3 takes nothing returns nothingcall SetUnitAbilityLevelSwapped(1093678392,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093678135,GetSummoningUnit()))endfunctionfunction XT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function W03))call TriggerAddAction(t,function WI3)endfunctionfunction W13 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x1local real y1local real x2local real y2if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>2 and T2I(GetOwningPlayer(GetEventDamageSource())))thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH thenset x1=GetUnitX(P7I)set y1=GetUnitY(P7I)set x2=GetUnitX(P8I)set y2=GetUnitY(P8I)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",x1,y1))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",x2,y2))call SCI(P8I,4410,1)call SetUnitPosition(P8I,GetUnitX(P7I),GetUnitY(P7I))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction WO3 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real d=QNI(GetUnitX(P8I),GetUnitY(P8I),CXI,CYI)if d<CWI thenset CVI=GetEnumUnit()set CWI=dendifset P8I=nullendfunctionfunction W23 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local trigger tlocal integer S5Ilocal real DC1local group gif P8I==null thenset CVI=nullset CWI=999999set CXI=GetSpellTargetX()set CYI=GetSpellTargetY()set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function CU1))call GroupRemoveUnit(g,P7I)call ForGroup(g,function WO3)call NSI(g)set P8I=CVIset g=nullendifif GetSpellAbilityId()==1093742677 thenset DC1=5elseif GetSpellAbilityId()==1093742937 thenset DC1=4elseif GetSpellAbilityId()==1093742938 thenset DC1=3elseif GetSpellAbilityId()==1093750321 thenset DC1=3endifif P8I!=null thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,DC1,false)call TriggerAddCondition(t,Condition(function W13))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",P7I,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",P8I,"origin")))endifset P8I=nullset P7I=nullset t=nullendfunctionfunction W33 takes nothing returns booleanif GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 thencall W23()endifreturn falseendfunctionfunction W43 takes nothing returns booleanif GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 thenif GetSpellTargetUnit()!=null and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendifreturn falseendfunctionfunction YI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function W33))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function W43))set t=nullendfunctionfunction W53 takes integer SUI returns integerif SUI==1 thenreturn 1093742682elseif SUI==2 thenreturn 1093742897elseif SUI==3 thenreturn 1093742681elseif SUI==4 thenreturn 1093742896endifreturn 0endfunctionfunction W63 takes integer SUI returns integerif SUI==1 thenreturn 1110456653elseif SUI==2 thenreturn 1110456654elseif SUI==3 thenreturn 1110456655elseif SUI==4 thenreturn 1110456652endifreturn 0endfunctionfunction W73 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real d=SquareRoot((II3-x)*(II3-x)+(I13-y)*(I13-y))local real W83=(0.00050)*d*GetUnitState(P8I,UNIT_STATE_MAX_MANA)local integer KO2=GetTriggerEvalCount(t)local unit I01if RKI(P8I)==true thenset W83=0endifif d>300 thenset W83=0endifif W83>1 and ModuloInteger(GetTriggerEvalCount(t),3)==0 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",P8I,"chest"))endifif W83>0 thencall SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-W83)endifcall SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))if GetTriggerEventId()==EVENT_UNIT_DEATH or KO2==(SUI+4)*10 thencall UnitRemoveAbility(P8I,W53(SUI))call UnitRemoveAbility(P8I,W63(SUI))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitState(P8I,UNIT_STATE_MANA)<1 thencall DD1((LoadUnitHandle(LY,(S5I),(2))),P8I,1+0.5*SUI)set I01=nullcall UnitRemoveAbility(P8I,W53(SUI))call UnitRemoveAbility(P8I,W63(SUI))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction W93 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093742680)call IA1(P8I,W53(SUI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",P8I,"chest")))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function W73))set P7I=nullset P8I=nullset t=nullendfunctionfunction WA3 takes nothing returns booleanif GetSpellAbilityId()==1093742680 and NNI(GetSpellTargetUnit())==false thencall W93()endifreturn falseendfunctionfunction XQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WA3))set t=nullendfunctionfunction WB3 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+AK)endifendfunctionfunction WC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RM2=(LoadReal(LY,(S5I),(13)))local group H03local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer NPI=GetTriggerEvalCount(t)local real DX1=1050*0.1if NPI>19 thencall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset x=x+NPI*DX1*Cos(RM2*bj_DEGTORAD)set y=y+NPI*DX1*Sin(RM2*bj_DEGTORAD)set H03=NTI()set XK=gset GK=P7Iset AK=(50*SUI)*0.75call GroupEnumUnitsInRange(H03,x,y,350+25,Condition(function CT1))call ForGroup(H03,function WB3)call NSI(H03)endifset t=nullset g=nullset H03=nullreturn falseendfunctionfunction WD3 takes unit P7I,real x0,real y0,real x1,real y1,integer T82 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local real RM2=UEI(x0,y0,x1,y1)call SaveInteger(LY,(S5I),(5),(T82))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x0)*1.0))call SaveReal(LY,(S5I),(7),((y0)*1.0))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function WC3))set t=nullset g=nullendfunctionfunction WE3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit WF3=(LoadUnitHandle(LY,(S5I),(19)))local real RM2=(LoadReal(LY,(S5I),(13)))local integer T82=(LoadInteger(LY,(S5I),(34)))local real WG3=GetUnitX(WF3)-50*Cos(RM2)local real WH3=GetUnitY(WF3)-50*Sin(RM2)local unit I01=CreateUnit(GetOwningPlayer(WF3),1697656901,WG3,WH3,0)local real x=GetUnitX(I01)+50*Cos(RM2)local real y=GetUnitY(I01)+50*Sin(RM2)local real x2=x+(300+50*T82)*Cos(RM2)local real y2=y+(300+50*T82)*Sin(RM2)local unit P7I=K1[GetPlayerId(GetOwningPlayer(I01))]call IA1(I01,1093679159)call SetUnitAbilityLevel(I01,1093679159,T82)call IssuePointOrder(I01,"breathoffire",x,y)call KillUnit(WF3)call FlushChildHashtable(LY,(S5I))call S0I(t)if P7I!=null and PLI()and ES1(P7I,FR0[JF0])!=null thencall WD3(P7I,WG3,WH3,x,y,T82)endifset I01=nullset t=nullreturn falseendfunctionfunction WZ3 takes unit WF3,integer T82,real RM2 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function WE3))call SaveUnitHandle(LY,(S5I),(19),(WF3))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveInteger(LY,(S5I),(34),(T82))set t=nullendfunctionfunction WV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer T82=NPI-1local real RM2=(LoadReal(LY,(S5I),(13)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer WW3=2+SUI*2local boolean WX3=(LoadBoolean(LY,(S5I),(240)))local unit ZK3if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST thencall SaveInteger(LY,(S5I),(34),(NPI+1))endifcall SetUnitScale(I01,I2R(100+20*T82)/100,I2R(100+20*T82)/100,I2R(100+20*T82)/100)if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and WX3==false)or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093743153)or T82==WW3 thenif WX3 thenset ZK3=(LoadUnitHandle(LY,(S5I),(239)))call ShowUnit(ZK3,false)call UnitApplyTimedLife(ZK3,1112820806,1)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)if(LoadInteger(LY,(GetHandleId(SFI)),(704)))==0 or(LoadInteger(LY,(GetHandleId(SFI)),(704)))==1093679157 thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093679157,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093743153,false)call UnitRemoveAbility(SFI,1093743153)call WZ3(I01,T82,RM2)endifset I01=CreateUnit(GetOwningPlayer(I01),1747990093,GetUnitX(I01)+150*(T82)*Cos(RM2),GetUnitY(I01)+150*(T82)*Sin(RM2),0)call UnitApplyTimedLife(I01,1112820806,7)set t=nullset I01=nullset SFI=nullset ZK3=nullreturn falseendfunctionfunction WY3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call IssueImmediateOrder(SFI,"stop")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction WJ3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real RM2=Atan2(GetLocationY(l)-GetUnitY(SFI),GetLocationX(l)-GetUnitX(SFI))local real xlocal real ylocal unit I01local unit ZK3local boolean WX3=falseif GetLocationY(l)==GetUnitY(SFI)and GetLocationX(l)==GetUnitX(SFI)thenset RM2=GetUnitFacing(SFI)*bj_DEGTORADendifset x=GetUnitX(SFI)+150*Cos(RM2)set y=GetUnitY(SFI)+150*Sin(RM2)set I01=CreateUnit(GetOwningPlayer(SFI),1966092362,x,y,RM2*bj_RADTODEG)call RemoveLocation(l)if GetUnitTypeId(SFI)==1211119192 or GetUnitTypeId(SFI)==1211119193 or GetUnitTypeId(SFI)==1211119191 thenset WX3=trueendifcall SaveBoolean(LY,(S5I),(240),(WX3))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(34),(1))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(SFI,1093679157)))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function WV3))if WX3 thenset ZK3=CreateUnit(GetOwningPlayer(SFI),1747990106,GetUnitX(SFI),GetUnitY(SFI),RM2*bj_RADTODEG)call SetUnitX(ZK3,GetUnitX(SFI))call SetUnitY(ZK3,GetUnitY(SFI))call SetUnitAnimation(ZK3,"spell")call QueueUnitAnimation(ZK3,"spell")call QueueUnitAnimation(ZK3,"spell")call SetUnitVertexColor(ZK3,255,255,255,75)call SaveUnitHandle(LY,(S5I),(239),(ZK3))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function WY3))call SaveUnitHandle(LY,(S5I),(14),(SFI))endifcall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093679157,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093743153,true)call AH1(SFI,1093743153,1,6)set t=nullset SFI=nullset I01=nullset ZK3=nullset l=nullendfunctionfunction WK3 takes nothing returns booleanif GetSpellAbilityId()==1093679157 thencall WJ3()endifreturn falseendfunctionfunction Y01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WK3))set t=nullendfunctionfunction WL3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer DC1=(LoadInteger(LY,(S5I),(188)))local integer NPI=GetTriggerEvalCount(t)if NPI==DC1 or GetUnitTypeId(P7I)==1214409837 thenif(LoadReal(LY,(GetHandleId(P7I)),(241)))<=(TimerGetElapsed(M))or GetUnitTypeId(P7I)==1214409837 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093742932,true)elseendifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction WM3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093742932)local integer DC1=40call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093742932,false)call SaveReal(LY,(GetHandleId(P7I)),(241),(((TimerGetElapsed(M))+DC1)*1.0))call SaveInteger(LY,(S5I),(188),(DC1))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function WL3))set t=nullset P7I=nullendfunctionfunction Ignis_Main takes nothing returns booleanif GetSpellAbilityId()==1093742932 and GetUnitTypeId(GetTriggerUnit())==1214409837 thencall WM3()endifreturn falseendfunctionfunction YO1 takes nothing returns nothingendfunctionfunction WN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real OA2=(LoadReal(LY,(S5I),(242)))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)+OA2)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl",P8I,"origin"))call FlushChildHashtable(LY,(S5I))call S0I(t)set P8I=nullset t=nullreturn falseendfunctionfunction WS3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(242),((75*GetUnitAbilityLevel(SFI,1093742898))*1.0))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function WN3))set t=nullset SFI=nullset P8I=nullendfunctionfunction WT3 takes nothing returns booleanif GetSpellAbilityId()==1093742898 thencall WS3()endifreturn falseendfunctionfunction XU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WT3))set t=nullendfunctionfunction WR3 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real a=Atan2(y-CLI,x-CKI)set x=PTI(x+25*Cos(a))set y=PUI(y+25*Sin(a))call UPI(x,y,150)call SetUnitX(P8I,x)call SetUnitY(P8I,y)set P8I=nullendfunctionfunction WP3 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local unit I01=CreateUnit(JK,1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093742679)call SetUnitAbilityLevel(I01,1093742679,CJI)call IssueTargetOrder(I01,"drunkenhaze",P8I)set P8I=nullset I01=nullendfunctionfunction WQ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local integer AF1=(LoadInteger(LY,(S5I),(59)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local integer NPI=GetTriggerEvalCount(t)set CKI=QXIset CLI=QYIcall ForGroup(g,function WR3)if NPI==16 thenif AF1==1093742936 thenset CJI=1elseif AF1==1093742934 thenset CJI=2elseset CJI=3endifset JK=pcall ForGroup(g,function WP3)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset p=nullset g=nullreturn falseendfunctionfunction WU3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local integer AF1=(LoadInteger(LY,(S5I),(59)))local group g=(LoadGroupHandle(LY,(S5I),(22)))call S0I(t)call FlushChildHashtable(LY,(S5I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function WQ3))call SavePlayerHandle(LY,(S5I),(54),(p))call SaveReal(LY,(S5I),(189),((QXI)*1.0))call SaveReal(LY,(S5I),(190),((QYI)*1.0))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveInteger(LY,(S5I),(59),(AF1))set t=nullset p=nullset g=nullreturn falseendfunctionfunction X03 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)call KillUnit(CreateUnit(GetOwningPlayer(P7I),1747990096,x,y,0))set GK=P7Icall GroupEnumUnitsInRange(g,x,y,700,Condition(function CE1))call TriggerRegisterTimerEvent(t,0.4,false)call TriggerAddCondition(t,Condition(function WU3))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(GetTriggerUnit())))call SaveReal(LY,(S5I),(189),((x)*1.0))call SaveReal(LY,(S5I),(190),((y)*1.0))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveInteger(LY,(S5I),(59),(GetSpellAbilityId()))set t=nullset g=nullset P7I=nullendfunctionfunction XI3 takes nothing returns booleanif GetSpellAbilityId()==1093742936 or GetSpellAbilityId()==1093742934 or GetSpellAbilityId()==1093742935 thencall X03()endifreturn falseendfunctionfunction Y11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XI3))set t=nullendfunctionfunction X13 takes nothing returns booleanlocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit XO3=(LoadUnitHandle(LY,(S5I),(305)))if P7I==null or IC1(P7I)or PLI()==false or ES1(P7I,FR0[JF0])==null thencall ShowUnit(XO3,false)elsecall ShowUnit(XO3,true)call SetUnitX(XO3,GetUnitX(P7I))call SetUnitY(XO3,GetUnitY(P7I))endifif GetOwningPlayer(XO3)!=GetOwningPlayer(P7I)thencall SetUnitOwner(XO3,GetOwningPlayer(P7I),true)endifreturn falseendfunctionfunction X23 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093818450)local trigger tlocal integer S5Icall UnitRemoveAbility(P7I,1110458689)call UnitRemoveAbility(P7I,1093742932)if GetUnitAbilityLevel(P7I,1093815117)==0 thencall IA1(P7I,1093815117)endifif SUI==1 thencall UnitAddAbility(P7I,1093818420)call UnitRemoveAbility(P7I,1093818420)elseif SUI==2 thencall SetUnitAbilityLevel(P7I,1093815117,SUI)call UnitAddAbility(P7I,1093818419)call UnitRemoveAbility(P7I,1093818419)call UnitRemoveAbility(P7I,1093742936)call UnitRemoveAbility(P7I,1093742677)call IA1(P7I,1093742934)call IA1(P7I,1093742937)elseif SUI==3 thencall SetUnitAbilityLevel(P7I,1093815117,SUI)call UnitAddAbility(P7I,1093818421)call UnitRemoveAbility(P7I,1093818421)call UnitRemoveAbility(P7I,1093742936)call UnitRemoveAbility(P7I,1093742677)call UnitRemoveAbility(P7I,1093742934)call UnitRemoveAbility(P7I,1093742937)call IA1(P7I,1093742935)call IA1(P7I,1093742938)endifif SUI>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function X13))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(305),(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1865429313,GetUnitX(P7I),GetUnitY(P7I),0)))set t=nullendifset P7I=nullendfunctionfunction X33 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093818449)local trigger tlocal integer S5Iif SUI==1 thencall IA1(P7I,1093742932)elseif SUI==2 thencall SetUnitAbilityLevel(P7I,1093742932,SUI)elseif SUI==3 thencall SetUnitAbilityLevel(P7I,1093742932,SUI)endifset P7I=nullendfunctionfunction X43 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL thenif GetLearnedSkill()==1093818450 and IsUnitIllusion(GetTriggerUnit())==false thencall X23()endifif GetLearnedSkill()==1093818449 and IsUnitIllusion(GetTriggerUnit())==false thencall X33()endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM and GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and F01(GetManipulatedItem())==JF0 thencall X23()endifendifreturn falseendfunctionfunction Y21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function X43))set t=nullendfunctionfunction X53 takes unit SFI,integer SUI returns integerlocal integer X63local integer X73if SUI==1 thenset X73=1110458929set X63=1093744730if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458928set X63=1093744970if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458713set X63=1093744970if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifreturn 1093744729elseif SUI==2 thenset X73=1110458936set X63=1093744968if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458935set X63=1093744967if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458930set X63=1093744967if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifreturn 1093744969elseif SUI==3 thenset X73=1110458931set X63=1093744965if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458937set X63=1093744964if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458934set X63=1093744964if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifreturn 1093744971elseif SUI==4 thenset X73=1110458933set X63=1093744950if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458932set X63=1093744949if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifset X73=1110458945set X63=1093744949if GetUnitAbilityLevel(SFI,X73)>0 thencall UnitRemoveAbility(SFI,X73)return X63endifreturn 1093744972endifreturn 0endfunctionfunction X83 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093744728)local integer X93=X53(SFI,SUI)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call IA1(I01,X93)call IssueTargetOrder(I01,"bloodlust",SFI)set SFI=nullset I01=nullendfunctionfunction XA3 takes nothing returns booleanif GetSpellAbilityId()==1093677382 or GetSpellAbilityId()==1093677623 or GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450 thencall X83()endifreturn falseendfunctionfunction XB3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XA3))set t=nullset SFI=nullendfunctionfunction XC3 takes nothing returns booleanif GetLearnedSkill()==1093744728 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093744728)==1 thencall XB3()endifreturn falseendfunctionfunction TK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function XC3))set t=nullendfunctionfunction XD3 takes nothing returns nothinglocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093679450)local real PAIif SUI==1 thenset PAI=450elseif SUI==2 thenset PAI=675elseif SUI==3 thenset PAI=950endifcall P6I(GetTriggerUnit(),GetSpellTargetUnit(),7,PAI)endfunctionfunction XE3 takes nothing returns booleanif(GetSpellAbilityId()==1093679450)and NNI(GetSpellTargetUnit())==false thencall XD3()endifreturn falseendfunctionfunction XF3 takes nothing returns booleanif(GetSpellAbilityId()==1093677392)and RKI(GetSpellTargetUnit())thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))endifreturn falseendfunctionfunction TL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function XF3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XE3))set t=nullendfunctionfunction XG3 takes nothing returns booleanif GetLearnedSkill()==1093678129 thenif GetUnitAbilityLevel(GetTriggerUnit(),1093678129)==4 thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,6)elsecall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,GetUnitAbilityLevel(GetTriggerUnit(),1093678129))endifelseif GetLearnedSkill()==1093678642 thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889801,1)endifreturn falseendfunctionfunction Y41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function XG3))set t=nullendfunctionfunction XH3 takes nothing returns booleanif(GetUnitTypeId((GetFilterUnit()))==1966092345)or(RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))thenif(LoadInteger(LY,(CMI),(GetHandleId(GetFilterUnit()))))<UJ thenreturn trueendifendifreturn falseendfunctionfunction XZ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer XV3=(LoadInteger(LY,(S5I),(217)))local integer VY3=(LoadInteger(LY,(S5I),(216)))local integer XW3=(LoadInteger(LY,(S5I),(218)))local group g=NTI()local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local unit P8Ilocal real r1=GetRandomInt(200,350)local real r2=GetRandomInt(200,350)if GetRandomInt(1,2)==1 thenset r1=-1*r1set r2=-1*r2endifset GK=SFIset UJ=XW3set CMI=GetHandleId(t)call GroupEnumUnitsInRange(g,x,y,700,Condition(function XH3))set P8I=GroupPickRandomUnit(g)call NSI(g)if IC1(SFI)==false and P8I!=null and(GetUnitTypeId((P8I))==1966092345)==false thencall SaveInteger(LY,(CMI),(GetHandleId(P8I)),((LoadInteger(LY,(CMI),(GetHandleId(P8I))))+1))call U5I("effects\\Eclipse.mdx",P8I,"origin",3)call P6I(SFI,P8I,1,XV3*75)elseif IC1(SFI)==false thenset x=x+GetRandomInt(-350,350)set y=y+GetRandomInt(-350,350)call U7I("effects\\Eclipse.mdx",x,y,1.5)endifif(GetTriggerEvalCount(t)+1)==VY3 or IC1(SFI)==true thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset g=nullset P8I=nullreturn falseendfunctionfunction XX3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer VY3local integer XV3=GetUnitAbilityLevel(SFI,1093678130)local integer XW3local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)if XV3==0 and GetUnitTypeId(SFI)!=1160785973 thenset XV3=4endifcall IA1(I01,1093751862)if GetSpellAbilityId()==1093678388 thenset VY3=2+3*GetUnitAbilityLevel(SFI,1093678388)set XW3=4elseset VY3=2+4*GetUnitAbilityLevel(SFI,1093677141)set XW3=60endifcall SaveInteger(LY,(S5I),(217),(XV3))call SaveInteger(LY,(S5I),(216),(VY3))call SaveInteger(LY,(S5I),(218),(XW3))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.6,true)call TriggerAddCondition(t,Condition(function XZ3))call TriggerEvaluate(t)call IssueImmediateOrderById(I01,852621)set t=nullset SFI=nullset I01=nullendfunctionfunction XY3 takes nothing returns booleanif GetSpellAbilityId()==1093678388 or GetSpellAbilityId()==1093677141 thencall XX3()endifreturn falseendfunctionfunction Y31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XY3))set t=nullendfunctionfunction XJ3 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))endfunctionfunction XK3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call P6I(SFI,P8I,1,0.75*GetUnitAbilityLevel(SFI,1093684054)*75)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset P8I=nullreturn falseendfunctionfunction XL3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local group glocal unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if IC1(P8I)thenset g=NTI()set GK=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),175+25,Condition(function C81))set P8I=GroupPickRandomUnit(g)call NSI(g)set g=nullendifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",P8I,"origin"))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,0.5,false)call TriggerAddCondition(t,Condition(function XK3))set t=nullset SFI=nullset P8I=nullreturn falseendfunctionfunction XM3 takes nothing returns nothingcall P6I(CSI,GetEnumUnit(),1,CNI)endfunctionfunction XN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local group g=(LoadGroupHandle(LY,(S5I),(22)))set CNI=GetUnitAbilityLevel(SFI,1093684054)*75set CSI=SFIcall ForGroup(g,function XM3)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset g=nullreturn falseendfunctionfunction XS3 takes nothing returns nothinglocal real QWI=QLI(GetTriggerUnit(),GetEnumUnit())if QWI>650 thenelsecall GroupAddUnit(XK,GetEnumUnit())endifendfunctionfunction XT3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local group g=NTI()local unit P8Iset GK=SFIset CSI=SFIset XK=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),900,Condition(function C81))call ForGroup(g,function XS3)call NSI(g)set g=XKcall ForGroup(g,function XJ3)call SaveGroupHandle(LY,(S5I),(22),(g))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.5,false)call TriggerAddCondition(t,Condition(function XN3))set CSI=SFIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),175+25,Condition(function C81))set P8I=GroupPickRandomUnit(g)call NSI(g)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",SFI,"origin")))call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function XL3))set t=nullset g=nullset SFI=nullset P8I=nullendfunctionfunction XR3 takes nothing returns booleanif GetSpellAbilityId()==1093684054 thencall XT3()endifreturn falseendfunctionfunction NH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XR3))set t=nullendfunctionconstant function MoonlightShadow_RawCode takes nothing returns integerreturn 1093684053endfunctionconstant function MoonlightShadow_InvisibilityAbility takes nothing returns integerreturn 1093684052endfunctionfunction XP3 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684053)endfunctionfunction XQ3 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction XU3 takes nothing returns nothingcall IA1(GetEnumUnit(),(1093684052))call SetUnitAbilityLevel(GetEnumUnit(),(1093684052),YO)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetEnumUnit(),"chest"))endfunctionfunction Y03 takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),(1093684052))endfunctionfunction YI3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local group Z51=(LoadGroupHandle(LY,(S5I),(220)))call ForGroup(Z51,function Y03)call NSI(Z51)call UBI(t)endfunctionfunction Y13 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group Z51=NTI()local timer t=CreateTimer()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(SFI,(1093684053))local real DC1=15set YO=SUIcall GroupEnumUnitsInRange(Z51,0,0,9999,Condition(function XQ3))call ForGroup(Z51,function XU3)call SaveGroupHandle(LY,(S5I),(220),(Z51))call TimerStart(t,DC1,false,function YI3)endfunctionfunction NG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XP3))call TriggerAddAction(t,function Y13)endfunctionconstant function Leap_RawCode takes nothing returns integerreturn 1093684302endfunctionconstant function Leap_BonusCode takes nothing returns integerreturn 1093684303endfunctionfunction YO3 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684302)endfunctionfunction Y23 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(XO))endfunctionfunction Y33 takes nothing returns nothinglocal unit SFI=GetEnumUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697657170,0,0,0)call IA1(I01,(1093684303))call SetUnitAbilityLevel(I01,(1093684303),GetUnitAbilityLevel(XO,(1093684302)))call UnitApplyTimedLife(I01,1112820806,10)endfunctionfunction Y43 takes unit SFI returns nothinglocal group Z51=NTI()set XO=SFIcall GroupEnumUnitsInRange(Z51,GetUnitX(SFI),GetUnitY(SFI),800,Condition(function Y23))call ForGroup(Z51,function Y33)call NSI(Z51)endfunctionfunction Y53 takes unit SFI returns nothinglocal integer S5I=GetHandleId(SFI)local string Y63=(LoadStr(LY,(S5I),(206)))local string Y73=OrderId2String((LoadInteger(LY,(S5I),(211))))local real QJIlocal real QKIlocal unit P8Ilocal trigger t=(LoadTriggerHandle(LY,(S5I),(204)))local boolean Y83=not(LoadBoolean(LY,(S5I),(207)))local boolean Y93=(LoadBoolean(LY,(S5I),(208)))call DisableTrigger(t)call IssueImmediateOrder(SFI,"stop")if Y63=="Target"and(Y83 or Y93)thenset P8I=(LoadUnitHandle(LY,(S5I),(215)))call IssueTargetOrder(SFI,Y73,P8I)elseif Y63=="Point"and(Y83 or Y93)thenset QJI=(LoadReal(LY,(S5I),(209)))set QKI=(LoadReal(LY,(S5I),(210)))call IssuePointOrder(SFI,Y73,QJI,QKI)elseif(Y83 or Y93)thencall IssueImmediateOrder(SFI,"OrderString")endifcall SaveBoolean(LY,(S5I),(208),(false))call EnableTrigger(t)endfunctionfunction YA3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real YB3=(LoadReal(LY,(S5I),(212)))local real YC3=(LoadReal(LY,(S5I),(213)))local real RM2=(LoadReal(LY,(S5I),(13)))local real IV1=GetUnitX(SFI)+40*Cos(RM2*bj_DEGTORAD)local real IW1=GetUnitY(SFI)+40*Sin(RM2*bj_DEGTORAD)local real YD3=200local real YE3=(1-YB3/YC3)*YD3*2if YE3>YD3 thenset YE3=YD3*2-YE3endifcall SetUnitFlyHeight(SFI,QDI(YE3,0),0)call SetUnitX(SFI,PTI(IV1))call SetUnitY(SFI,PUI(IW1))call SetUnitFacing(SFI,RM2)call SaveReal(LY,(S5I),(212),((YB3-40)*1.0))if YE3<1 and YB3-YC3!=0 thencall SaveBoolean(LY,(GetHandleId(SFI)),(214),(false))call SetUnitFacing(SFI,RM2)call SetUnitAnimation(SFI,"stand")call SetUnitPathing(SFI,true)call Y53(SFI)call PauseTimer(t)call FlushChildHashtable(LY,(S5I))call DestroyTimer(t)endifendfunctionfunction YF3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,(1093684302))local real QWI=500+100*SUIlocal real RM2=GetUnitFacing(SFI)local real QXI=GetUnitX(SFI)local real QYI=GetUnitY(SFI)local real QJI=PTI(QXI+QWI*Cos(RM2*bj_DEGTORAD))local real QKI=PUI(QYI+QWI*Sin(RM2*bj_DEGTORAD))local timer t=CreateTimer()local integer S5I=GetHandleId(t)local trigger YG3=(LoadTriggerHandle(LY,(GetHandleId(SFI)),(204)))set QWI=SquareRoot((QXI-QJI)*(QXI-QJI)+(QYI-QKI)*(QYI-QKI))call Y43(SFI)if QWI>100 thencall IA1(SFI,1097691750)call UnitRemoveAbility(SFI,1097691750)call SetUnitPathing(SFI,false)call SetUnitAnimationByIndex(SFI,6)call DisableTrigger(YG3)call IssueImmediateOrder(SFI,"stop")call EnableTrigger(YG3)call SaveReal(LY,(S5I),(212),((QWI)*1.0))call SaveReal(LY,(S5I),(213),((QWI)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TimerStart(t,0.025,true,function YA3)call SaveBoolean(LY,(GetHandleId(SFI)),(214),(true))call SaveBoolean(LY,(GetHandleId(SFI)),(208),(false))endifendfunctionfunction YH3 takes nothing returns booleanreturn OrderId2String(GetIssuedOrderId())!="windwalk"endfunctionfunction YZ3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local boolean YV3=(LoadBoolean(LY,(S5I),(214)))call SaveInteger(LY,(S5I),(211),(GetIssuedOrderId()))call SaveBoolean(LY,(S5I),(207),(false))if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER thenelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER thenif YV3 or UCI(GetUnitX(SFI),GetUnitY(SFI),GetOrderPointX(),GetOrderPointY())>800 thencall SaveStr(LY,(S5I),(206),("Point"))call SaveReal(LY,(S5I),(209),((GetOrderPointX())*1.0))call SaveReal(LY,(S5I),(210),((GetOrderPointY())*1.0))elsecall SaveBoolean(LY,(S5I),(207),(true))endifelsecall SaveStr(LY,(S5I),(206),("Instant"))endifif YV3 thencall SaveBoolean(LY,(S5I),(208),(true))endifendfunctionfunction YW3 takes nothing returns nothinglocal unit SFI=(LoadUnitHandle(LY,(GetHandleId(GetExpiredTimer())),(14)))local integer S5I=GetHandleId(SFI)local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local string Y63=(LoadStr(LY,(S5I),(206)))if Y63=="Point"and UCI(GetUnitX(SFI),GetUnitY(SFI),(LoadReal(LY,(S5I),(209))),(LoadReal(LY,(S5I),(210))))<100 thencall SaveBoolean(LY,(S5I),(207),(true))endifendfunctionfunction YX3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local timer t2call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_ORDER)call TriggerAddAction(t,function YZ3)call TriggerAddCondition(t,Condition(function YH3))call SaveTriggerHandle(LY,(GetHandleId(SFI)),(204),(t))set t2=CreateTimer()call SaveUnitHandle(LY,(GetHandleId(t2)),(14),(SFI))call TimerStart(t2,0.3,true,function YW3)call SaveTimerHandle(LY,(GetHandleId(SFI)),(205),(t2))endfunctionfunction YY3 takes nothing returns nothingif GetUnitAbilityLevel(GetTriggerUnit(),(1093684302))==1 thencall YX3()endifendfunctionfunction NV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YO3))call TriggerAddAction(t,function YF3)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(t,function YY3)endfunctionconstant function ElunesArrow_RawCode takes nothing returns integerreturn 1093684280endfunctionconstant function ElunesArrow_ArrowUnit takes nothing returns integerreturn 1747988533endfunctionconstant function ElunesArrow_StunCode takes nothing returns integerreturn 1093684279endfunctionfunction YJ3 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684280)endfunctionfunction YK3 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction YL3 takes real BA3,real BB3,real QXI,real QYI returns integerlocal real QWI=SquareRoot((QXI-BA3)*(QXI-BA3)+(QYI-BB3)*(QYI-BB3))return Q9I(R2I(QWI/150),11)endfunctionfunction YM3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real QXI=GetUnitX(IG1)local real QYI=GetUnitY(IG1)local real IV1=PTI(GetUnitX(IG1)+30*Cos(RM2))local real IW1=PUI(GetUnitY(IG1)+30*Sin(RM2))local boolexpr QL1=Condition(function YK3)local group Z51=NTI()local unit I01local unit P8Ilocal real BA3local real BB3call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)set XO=SFIcall GroupEnumUnitsInRange(Z51,IV1,IW1,140,QL1)set P8I=FirstOfGroup(Z51)call NSI(Z51)if P8I!=null thenif IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset CTI[GetPlayerId(GetOwningPlayer(SFI))]=CTI[GetPlayerId(GetOwningPlayer(SFI))]+1call FL1("AA_Hits"+I2S(GetPlayerId(GetOwningPlayer(SFI))),CTI[GetPlayerId(GetOwningPlayer(SFI))])endifset BA3=(LoadReal(LY,(S5I),(191)))set BB3=(LoadReal(LY,(S5I),(192)))set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,QXI,QYI,0)call IA1(I01,(1093684279))call SetUnitAbilityLevel(I01,(1093684279),YL3(BA3,BB3,QXI,QYI))if IssueTargetOrder(I01,"thunderbolt",P8I)thenendifcall UnitDamageTarget(SFI,P8I,90*GetUnitAbilityLevel(SFI,(1093684280))-40+(YL3(BA3,BB3,QXI,QYI)-1)*14,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call KillUnit(IG1)call UBI(t)elseif(IV1-QJI)*(IV1-QJI)+(IW1-QKI)*(IW1-QKI)<1600 thencall KillUnit(IG1)call UBI(t)endifendfunctionfunction YN3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real QXI=PTI(GetUnitX(SFI))local real QYI=PUI(GetUnitY(SFI))local location AM3=GetSpellTargetLoc()local real QJI=GetLocationX(AM3)local real QKI=GetLocationY(AM3)local real RM2=Atan2(QKI-QYI,QJI-QXI)local timer t=CreateTimer()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(SFI),(1747988533),QXI,QYI,RM2*bj_RADTODEG)set CRI[GetPlayerId(GetOwningPlayer(SFI))]=CRI[GetPlayerId(GetOwningPlayer(SFI))]+1call FL1("AA_Total"+I2S(GetPlayerId(GetOwningPlayer(SFI))),CRI[GetPlayerId(GetOwningPlayer(SFI))])call RemoveLocation(AM3)call SetUnitFacing(IG1,RM2*bj_RADTODEG)call SetUnitPathing(IG1,false)set QJI=PTI(QXI+3000*Cos(RM2))set QKI=PUI(QYI+3000*Sin(RM2))call SaveReal(LY,(S5I),(191),((QXI)*1.0))call SaveReal(LY,(S5I),(192),((QYI)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(45),(IG1))call TimerStart(t,0.035,true,function YM3)endfunctionfunction YS3 takes nothing returns booleanlocal integer YT3=CTI[GetPlayerId(GetTriggerPlayer())]local integer QHI=CRI[GetPlayerId(GetTriggerPlayer())]if GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781206 and QHI>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848657741)+" "+R2S(I2R(YT3)/I2R(QHI)*100)+"% ("+I2S(YT3)+"/"+I2S(QHI)+")")endifreturn falseendfunctionfunction NZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YJ3))call TriggerAddAction(t,function YN3)call Q1I((1093684279))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function YS3))set t=nullendfunctionfunction YR3 takes nothing returns booleanreturn GetSpellAbilityId()==1093682766endfunctionfunction YP3 takes nothing returns booleanlocal unit YQ3=GetFilterUnit()if IsUnitInGroup(YQ3,B2)thenreturn falseendifif IsUnitEnemy(YQ3,GetOwningPlayer(XO))and GetUnitAbilityLevel(YQ3,1093678162)!=1 and GetUnitState(YQ3,UNIT_STATE_LIFE)>0 and IsUnitType(YQ3,UNIT_TYPE_STRUCTURE)==false thenreturn trueendifreturn falseendfunctionfunction YU3 takes nothing returns nothingcall UnitDamageTarget(XO,GetEnumUnit(),JO,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction J03 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit PKI=(LoadUnitHandle(LY,(S5I),(221)))local real RM2=(LoadReal(LY,(S5I),(13)))local integer BQO=(LoadInteger(LY,(S5I),(194)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local real IO3=GetUnitX(PKI)local real I23=GetUnitY(PKI)local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real IV1=II3+1000*0.05*Cos(RM2)local real IW1=I13+1000*0.05*Sin(RM2)local group Z51local unit ZK3=(LoadUnitHandle(LY,(S5I),(239)))if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093683011 or GetSpellAbilityId()==0 thencall RemoveUnit(ZK3)call SetUnitVertexColor(PKI,255,255,255,255)call SaveBoolean(LY,(GetHandleId(PKI)),(225),(false))call SetUnitInvulnerable(PKI,false)call SetUnitPathing(PKI,true)call NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)endifreturn falseendifset Z51=NTI()call SaveReal(LY,(S5I),(23),((IV1)*1.0))call SaveReal(LY,(S5I),(24),((IW1)*1.0))set XO=PKIset JO=GetUnitAbilityLevel(PKI,1093682766)*75+25set B2=JAOcall GroupEnumUnitsInRange(Z51,IO3,I23,200+25,Condition(function YP3))call ForGroup(Z51,function YU3)call GroupAddGroup(Z51,JAO)call NSI(Z51)set BQO=BQO-1call SaveInteger(LY,(S5I),(194),(BQO))call SetUnitX(PKI,PTI(IV1))call SetUnitY(PKI,PUI(IW1))call SetUnitX(ZK3,GetUnitX(PKI))call SetUnitY(ZK3,GetUnitY(PKI))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",IO3,I23))if BQO==0 thencall RemoveUnit(ZK3)call SetUnitVertexColor(PKI,255,255,255,255)call SaveBoolean(LY,(GetHandleId(PKI)),(225),(false))call SetUnitInvulnerable(PKI,false)call SetUnitPathing(PKI,true)call NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset PKI=nullset JAO=nullset Z51=nullset t=nullreturn falseendfunctionfunction JI3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local real QXI=GetUnitX(PKI)local real QYI=GetUnitY(PKI)local location AM3=GetSpellTargetLoc()local real QJI=GetLocationX(AM3)local real QKI=GetLocationY(AM3)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group JAO=NTI()local integer pid=GetPlayerId(GetOwningPlayer(PKI))local unit ZK3=CreateUnit(GetOwningPlayer(PKI),1697656901,QXI,QYI,0)call RemoveLocation(AM3)if GetSpellTargetUnit()!=null thenset QJI=GetUnitX(GetSpellTargetUnit())set QKI=GetUnitY(GetSpellTargetUnit())endifcall SetUnitVertexColor(PKI,255,255,255,0)call SaveBoolean(LY,(GetHandleId(PKI)),(225),(true))call SetUnitInvulnerable(PKI,true)call SetUnitPathing(PKI,false)call SaveUnitHandle(LY,(S5I),(221),(PKI))call SaveReal(LY,(S5I),(23),((QXI)*1.0))call SaveReal(LY,(S5I),(24),((QYI)*1.0))call SaveGroupHandle(LY,(S5I),(133),(JAO))call SaveReal(LY,(S5I),(13),((Atan2(QKI-QYI,QJI-QXI))*1.0))call SaveInteger(LY,(S5I),(194),(QAI(R2I(SquareRoot((QJI-QXI)*(QJI-QXI)+(QKI-QYI)*(QKI-QYI))/50),1)))call SaveUnitHandle(LY,(S5I),(239),(ZK3))call TriggerRegisterTimerEvent(t,0.04,true)call TriggerRegisterUnitEvent(t,PKI,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J03))call ShowUnit(PKI,false)call ShowUnit(PKI,true)call SelectUnitAddForPlayer(PKI,GetOwningPlayer(PKI))set t=nullendfunctionfunction Y61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YR3))call TriggerAddAction(t,function JI3)endfunctionconstant function ReplicateAbilityId takes nothing returns integerreturn 1093683000endfunctionconstant function ReplicateMorphAbilityId takes nothing returns integerreturn 1093683011endfunctionconstant function ReplicateMorphBuffId takes nothing returns integerreturn 1110455088endfunctionfunction J13 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(S5I),(34)))-1local texttag ttcall SaveInteger(LY,(S5I),(34),(NPI))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset tt=CreateTextTag()call SetTextTagText(tt,I2S(NPI),0.03)call SetTextTagPosUnit(tt,P7I,0)call SetTextTagColorBJ(tt,0,29,255,15)call SetTextTagVelocity(tt,0,0.035)call SetTextTagFadepoint(tt,3)call SetTextTagLifespan(tt,0.9)call SetTextTagPermanent(tt,false)call SetTextTagVisibility(tt,false)if GetOwningPlayer(P7I)==GetLocalPlayer()thencall SetTextTagVisibility(tt,true)endifset tt=CreateTextTag()call SetTextTagText(tt,I2S(NPI),0.03)call SetTextTagPosUnit(tt,P8I,0)call SetTextTagColorBJ(tt,0,29,255,15)call SetTextTagVelocity(tt,0,0.035)call SetTextTagFadepoint(tt,3)call SetTextTagLifespan(tt,0.9)call SetTextTagPermanent(tt,false)call SetTextTagVisibility(tt,false)if GetOwningPlayer(P7I)==GetLocalPlayer()thencall SetTextTagVisibility(tt,true)endifendifset t=nullset tt=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction JO3 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit SFI=(LoadUnitHandle(LY,(GetHandleId(t)),(14)))local unit J23=(LoadUnitHandle(LY,(GetHandleId(SFI)),(229)))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(J23),GetUnitY(J23)))call RemoveUnit(J23)call UnitRemoveAbility(SFI,(1093683011))if(LoadInteger(LY,(GetHandleId(SFI)),(704)))==0 or(LoadInteger(LY,(GetHandleId(SFI)),(704)))==(1093683000)thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),(1093683000),true)endifcall FlushChildHashtable(LY,(GetHandleId(t)))call S0I((t))set SFI=nullset J23=nullendfunctionfunction J33 takes nothing returns booleanif GetSpellAbilityId()==(1093683011)thenreturn trueendifreturn falseendfunctionfunction J43 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local unit J23=(LoadUnitHandle(LY,(S5I),(229)))local real x=GetUnitX(J23)local real y=GetUnitY(J23)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(SFI),GetUnitY(SFI)))call KillUnit(J23)call SetUnitX(SFI,x)call SetUnitY(SFI,y)call PanCameraToTimedForPlayer(GetOwningPlayer(SFI),x,y,0)call IssueImmediateOrder(SFI,"stop")set SFI=nullset J23=nullendfunctionfunction J53 takes nothing returns booleanreturn GetUnitAbilityLevel(GetSummonedUnit(),(1110455088))>0 and GetUnitState(GetSummonedUnit(),UNIT_STATE_LIFE)>0endfunctionfunction J63 takes nothing returns nothinglocal unit SFI=GetSummoningUnit()local integer S5I=GetHandleId(SFI)local unit P8I=(LoadUnitHandle(LY,(S5I),(228)))local unit J23=GetSummonedUnit()local trigger tcall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),(1093683000),false)call IA1(SFI,(1093683011))call SetUnitColor(J23,GetPlayerColor(GetOwningPlayer(P8I)))call SaveUnitHandle(LY,(S5I),(229),(J23))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,J23,EVENT_UNIT_DEATH)call TriggerAddAction(t,function JO3)call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,J23,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J13))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(SFI))call SaveUnitHandle(LY,(GetHandleId(t)),(17),(J23))call SaveInteger(LY,(GetHandleId(t)),(34),(GetUnitAbilityLevel(SFI,(1093683000))*15+15-1))set SFI=nullset P8I=nullset J23=nullset t=nullendfunctionfunction J73 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683000)endfunctionfunction J83 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call SaveUnitHandle(LY,(GetHandleId(SFI)),(228),(P8I))set SFI=nullset P8I=nullendfunctionfunction J93 takes nothing returns booleanif GetSpellAbilityId()==(1093683000)thenif GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659014))endifendifreturn falseendfunctionfunction Y91 takes nothing returns nothinglocal trigger tset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J73))call TriggerAddAction(t,function J83)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function J53))call TriggerAddAction(t,function J63)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J33))call TriggerAddAction(t,function J43)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function J93))set t=nullendfunctionfunction JA3 takes unit SFI,integer JB3,real JC3 returns nothinglocal integer JD3=GetHeroAgi(SFI,false)local integer JE3=GetHeroStr(SFI,false)local real KWO=GetUnitState(SFI,UNIT_STATE_MANA)if JB3==0 thenif KWO>=JC3 and JD3>2 and IC1(SFI)==false thencall SetUnitState(SFI,UNIT_STATE_MANA,KWO-JC3)call SetHeroAgi(SFI,JD3-2,true)call SetHeroStr(SFI,JE3+2,true)endifelseif JB3==1 thenif KWO>=JC3 and JE3>2 and IC1(SFI)==false thencall SetUnitState(SFI,UNIT_STATE_MANA,KWO-JC3)call SetHeroAgi(SFI,JD3+2,true)call SetHeroStr(SFI,JE3-2,true)endifendifendfunctionfunction JF3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=GetUnitAbilityLevel(SFI,1093684056)call JA3(SFI,1,30.0/SUI)set t=nullset SFI=nullreturn falseendfunctionfunction JG3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=GetUnitAbilityLevel(SFI,1093684056)call JA3(SFI,0,30.0/SUI)set t=nullset SFI=nullreturn falseendfunctionfunction JH3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local trigger JZ3=(LoadTriggerHandle(LY,(S5I),(226)))local integer SUI=GetUnitAbilityLevel(SFI,1093684056)local integer L=(LoadInteger(LY,(S5I),(227)))local real JV3=1.0/SUIif SUI==4 thenset JV3=0.2endifif GetIssuedOrderId()==852549 thenif JZ3!=null thencall FlushChildHashtable(LY,(GetHandleId(JZ3)))call S0I(JZ3)endifset JZ3=CreateTrigger()call TriggerRegisterTimerEvent(JZ3,JV3,true)call TriggerAddCondition(JZ3,Condition(function JF3))call SaveUnitHandle(LY,(GetHandleId(JZ3)),(14),(SFI))call SaveTriggerHandle(LY,(S5I),(226),(JZ3))call SaveInteger(LY,(S5I),(227),(GetIssuedOrderId()))call UnitAddAbility(SFI,1093808716)call UnitRemoveAbility(SFI,1093808724)elseif GetIssuedOrderId()==852546 thenif JZ3!=null thencall FlushChildHashtable(LY,(GetHandleId(JZ3)))call S0I(JZ3)endifset JZ3=CreateTrigger()call TriggerRegisterTimerEvent(JZ3,JV3,true)call TriggerAddCondition(JZ3,Condition(function JG3))call SaveUnitHandle(LY,(GetHandleId(JZ3)),(14),(SFI))call SaveTriggerHandle(LY,(S5I),(226),(JZ3))call SaveInteger(LY,(S5I),(227),(GetIssuedOrderId()))call UnitAddAbility(SFI,1093808724)call UnitRemoveAbility(SFI,1093808716)elseif GetIssuedOrderId()==852550 thenif JZ3!=null thencall FlushChildHashtable(LY,(GetHandleId(JZ3)))call S0I(JZ3)endifcall SaveTriggerHandle(LY,(S5I),(226),(null))call SaveInteger(LY,(S5I),(227),(GetIssuedOrderId()))call UnitRemoveAbility(SFI,1093808716)call UnitRemoveAbility(SFI,1093808724)elseif GetIssuedOrderId()==852547 thenif JZ3!=null thencall FlushChildHashtable(LY,(GetHandleId(JZ3)))call S0I(JZ3)endifcall SaveTriggerHandle(LY,(S5I),(226),(null))call SaveInteger(LY,(S5I),(227),(GetIssuedOrderId()))call UnitRemoveAbility(SFI,1093808716)call UnitRemoveAbility(SFI,1093808724)elseif GetIssuedOrderId()==852548 and L!=852546 and L!=852546 thencall JA3(SFI,1,30*JV3)elseif GetIssuedOrderId()==852545 and L!=852546 and L!=852546 thencall JA3(SFI,0,30*JV3)endifset t=nullset SFI=nullset JZ3=nullreturn falseendfunctionfunction JW3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093684056)if SUI==1 thencall SetHeroAgi(SFI,GetHeroAgi(SFI,false)+3,true)call SetHeroStr(SFI,GetHeroStr(SFI,false)+3,true)elsecall SetHeroAgi(SFI,GetHeroAgi(SFI,false)+1,true)call SetHeroStr(SFI,GetHeroStr(SFI,false)+1,true)endifif SUI==1 thenset t=CreateTrigger()set S5I=GetHandleId(t)call IA1(SFI,1093684055)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function JH3))call SaveTriggerHandle(LY,(S5I),(226),(null))elsecall SetUnitAbilityLevel(SFI,1093684055,SUI)endifset t=nullendfunctionfunction JX3 takes nothing returns booleanif GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false thencall JW3()endifreturn falseendfunctionfunction Y71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function JX3))set t=nullendfunctionfunction JY3 takes nothing returns nothinglocal unit PKI=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(326)))local real rlocal real glocal real blocal integer JJ3local integer JK3local real JL3local real JM3if GetUnitTypeId(PKI)!=1328558160 thencall DisableTrigger(GetTriggeringTrigger())elseif IC1(PKI)==false and(LoadBoolean(LY,(GetHandleId(PKI)),(225)))==false thenset JJ3=GetHeroAgi(PKI,true)set JK3=GetHeroStr(PKI,true)set JL3=RMaxBJ(75+2*(JJ3-JK3),35)set r=JL3set g=JL3set b=JL3call SetUnitVertexColorBJ(PKI,r,g,b,GetRandomReal(0.00,10.00))endifendfunctionfunction JN3 takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())==1328558160 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction JS3 takes nothing returns nothinglocal trigger tif((LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(327)))==false)thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(326),(GetTriggerUnit()))call SaveTriggerHandle(LY,(GetHandleId(GetTriggerUnit())),(328),(t))call TriggerAddAction(t,function JY3)call TriggerRegisterTimerEvent(t,1.0,true)call SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(327),(true))call UnitAddItem(GetTriggerUnit(),CreateItem(1227894853,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))endifendfunctionfunction Y51 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function JN3))call TriggerAddAction(t,function JS3)endfunctionfunction JT3 takes nothing returns booleanreturn GetSpellAbilityId()==1093682998 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and NNI(GetSpellTargetUnit())==falseendfunctionfunction JR3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(PKI,1093682998)local unit I01local location JP3local real RM2local integer JJ3=GetHeroAgi(PKI,true)local integer JK3=GetHeroStr(PKI,true)local real JL3=I2R(JJ3)/I2R(JK3)local real JM3=I2R(JK3)/I2R(JJ3)local real JQ3local real JU3local real K03local real IT3local real KI3local real K13local integer i1local integer i2local integer i3local string s1local string s2local string s3local real KO3=0.25+SUIif JL3<0.5 thenset JQ3=0.25set JU3=20*SUIelseif JL3>1.5 thenset JQ3=0.5*SUIset JU3=20*SUIelseset JQ3=0.25+(JL3-0.5)*(0.5*SUI-0.25)set JU3=20*SUIendifif JM3<0.5 thenset K03=0.25set IT3=100elseif JM3>1.5 thenset K03=KO3set IT3=300elseset IT3=100+(JM3-0.5)*200set K03=0.25+(JM3-0.5)*(KO3-0.25)endifset KI3=JU3+JQ3*JJ3set K13=K03set i1=R2I(K13)set i2=R2I(10*K13-i1*10)set i3=R2I(100*K13-i2*10-i1*100)set s1=I2S(i1)set s2=I2S(i2)set s3=I2S(i3)set RM2=Atan2(GetUnitY(P8I)-GetUnitY(PKI),GetUnitX(P8I)-GetUnitX(PKI))set JP3=Location(GetUnitX(P8I)+IT3*Cos(RM2),GetUnitY(P8I)+IT3*Sin(RM2))call SetUnitPositionLoc(P8I,JP3)call UPI(GetLocationX(JP3),GetLocationY(JP3),200)call RemoveLocation(JP3)call UYI("|c001ce6b9+"+I2S(R2I(KI3))+"|r |c00ff0303+"+s1+"."+s2+s3+"|r",1,P8I,0.023,255,255,255,216)call P6I(PKI,P8I,1,KI3)call DD1(PKI,P8I,K13)set PKI=nullset P8I=nullset I01=nullset JP3=nullendfunctionfunction Y81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JT3))call TriggerAddAction(t,function JR3)call Q1I(1093687350)endfunctionfunction K23 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),D0I)==false thencall GroupAddUnit(DII,GetEnumUnit())call UnitRemoveAbility(GetEnumUnit(),1110454858)call UnitRemoveAbility(GetEnumUnit(),1112896368)call UnitRemoveAbility(GetEnumUnit(),1114993524)endifendfunctionfunction K33 takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),1110454858)call UnitRemoveAbility(GetEnumUnit(),1112896368)call UnitRemoveAbility(GetEnumUnit(),1114993524)endfunctionfunction K43 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),CUI)==false thencall GroupAddUnit(CUI,GetEnumUnit())call SetUnitOwner(CQI,GetOwningPlayer(GetEnumUnit()),false)call IssueTargetOrder(CQI,"sleep",GetEnumUnit())endifendfunctionfunction K53 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group glocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))if GetTriggerEvalCount(t)==10 thencall IA1(P7I,1093809221)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093678933,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809221,true)endifif GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>140 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093809221)thenif(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093678933 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093678933,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809221,false)call ForGroup(PR2,function K33)call NSI(PR2)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Iset CPI=P7Iset CQI=I01set CUI=PR2call GroupEnumUnitsInRange(g,x,y,1250+25,Condition(function C31))call ForGroup(g,function K43)set D0I=gset DII=NTI()call ForGroup(PR2,function K23)call GroupRemoveGroup(DII,PR2)call NSI(g)call NSI(DII)endifset t=nullset g=nullset P7I=nullset PR2=nullset I01=nullreturn falseendfunctionfunction K63 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call UnitAddAbility(I01,1093678932)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function K53))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\SongOfTheSiren_2.mdx",P7I,"origin")))set t=nullset P7I=nullendfunctionfunction K73 takes nothing returns booleanif GetSpellAbilityId()==1093678933 thencall K63()endifreturn falseendfunctionfunction YA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function K73))set t=nullendfunctionfunction K83 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093815125)local integer id=1093809204call P6I(P7I,P8I,1,100+30*SUI)if SUI==2 thenset id=1093809205elseif SUI==3 thenset id=1093809206elseif SUI==4 thenset id=1093809207endifif BJ1(P8I)==false thencall AH1(P8I,id,1,8)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),id,false)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",P8I,"chest"))set P7I=nullset P8I=nullendfunctionfunction K93 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),DOI)==false and RKI(GetEnumUnit())==false thencall GroupAddUnit(DOI,GetEnumUnit())call K83(D1I,GetEnumUnit())endifendfunctionfunction KA3 takes nothing returns nothinglocal unit P7I=GetEnumUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()call DestroyEffect(AddSpecialEffect("war3mapImported\\RipTide09.mdx",x,y))set GK=P7Icall GroupEnumUnitsInRange(g,x,y,320+25,Condition(function CA1))call ForGroup(g,function K93)call NSI(g)set t=nullset g=nullendfunctionfunction KB3 takes nothing returns booleanreturn IsUnitIllusion(GetFilterUnit())and IC1(GetFilterUnit())==falseendfunctionfunction KC3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()local integer i=0set DOI=NTI()set D1I=P7Icall GroupEnumUnitsOfPlayer(g,GetOwningPlayer(P7I),Condition(function KB3))call GroupAddUnit(g,P7I)call ForGroup(g,function KA3)call NSI(g)call NSI(DOI)set P7I=nullset g=nullendfunctionfunction KD3 takes nothing returns booleanif GetSpellAbilityId()==1093815125 thencall KC3()endifreturn falseendfunctionfunction YB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function KD3))set t=nullendfunctionfunction KE3 takes unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093681729)call SetUnitAbilityLevel(I01,1093681729,SUI)call IssueTargetOrder(I01,"ensnare",P8I)set I01=nullendfunctionfunction KF3 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thencall KE3(GetFilterUnit(),D3I,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))endifreturn falseendfunctionfunction KG3 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thencall SetUnitFacing(GetFilterUnit(),AK)call SetUnitAnimation(GetFilterUnit(),"spell")endifreturn falseendfunctionfunction KH3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group g=NTI()set AK=UEI(GetUnitX(SFI),GetUnitY(SFI),GetUnitX(D3I),GetUnitY(D3I))call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),700,Condition(function KG3))call NSI(g)set SFI=nullset g=nullendfunctionfunction KZ3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=D3Ilocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),700,Condition(function KF3))call NSI(g)set SFI=nullset g=nullendfunctionfunction KV3 takes nothing returns booleanif GetSpellAbilityId()==1093809220 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif NNI(GetSpellTargetUnit())==false thenset D2I=0set D3I=GetSpellTargetUnit()call KE3(GetTriggerUnit(),D3I,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))call KZ3()endifelsecall KH3()endifendifreturn falseendfunctionfunction YC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function KV3))set t=nullendfunctionfunction KW3 takes unit SWI returns integerlocal real r=GetRandomReal(0,100)local integer SUI=GetUnitAbilityLevel(SWI,1093679160)local boolean CK3=ES1(SWI,FR0[JJ0])!=nulllocal integer KX3=0local integer id=GetPlayerId(GetOwningPlayer(SWI))set CK3=falseif SUI==1 thenset D8I[id]=D8I[id]+1if CK3 thenif r<30 thenset D5I[id]=D5I[id]+1set KX3=3elseif r<60 thenset D4I[id]=D4I[id]+1set KX3=2endifelseif r<40 thenset KX3=2set D4I[id]=D4I[id]+1endifendifelseif SUI==2 thenset D8I[id]=D8I[id]+1if CK3 thenif r<17.5 thenset KX3=4set D6I[id]=D6I[id]+1elseif r<35 thenset KX3=3set D5I[id]=D5I[id]+1elseif r<70 thenset KX3=2set D4I[id]=D4I[id]+1endifelseif r<20 thenset KX3=3set D5I[id]=D5I[id]+1elseif r<50 thenset KX3=2set D4I[id]=D4I[id]+1endifendifelseif SUI==3 thenset D8I[id]=D8I[id]+1if CK3 thenif r<10 thenset KX3=5set D7I[id]=D7I[id]+1elseif r<20 thenset KX3=4set D6I[id]=D6I[id]+1elseif r<40 thenset KX3=3set D5I[id]=D5I[id]+1elseif r<80 thenset KX3=2set D4I[id]=D4I[id]+1endifelseif r<12.5 thenset KX3=4set D6I[id]=D6I[id]+1elseif r<25 thenset KX3=3set D5I[id]=D5I[id]+1elseif r<60 thenset KX3=2set D4I[id]=D4I[id]+1endifendifendifreturn KX3endfunctionfunction KY3 takes nothing returns booleanreturn(RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110455114)==0 and GetFilterUnit()!=D9Iendfunctionfunction KJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer KK3=(LoadInteger(LY,(S5I),(300)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer KL3=(LoadInteger(LY,(S5I),(299)))local unit I01local group g=NTI()set GK=P7Iset D9I=P8Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1425,Condition(function KY3))set P8I=GroupPickRandomUnit(g)if P8I==null thencall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1425,Condition(function CF1))set P8I=GroupPickRandomUnit(g)endifcall NSI(g)call SaveUnitHandle(LY,(S5I),(17),(P8I))if GetTriggerEvalCount(t)>KK3 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)if KL3==1093815121 thenset KL3=1093815122endifcall IA1(I01,KL3)call SetUnitAbilityLevel(I01,KL3,SUI)call IssueTargetOrder(I01,"acidbomb",P8I)endifset t=nullset P8I=nullset P7I=nullset I01=nullset g=nullreturn falseendfunctionfunction KM3 takes integer r returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer KL3=GetSpellAbilityId()local integer SUI=GetUnitAbilityLevel(P7I,KL3)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if r==2 thencall UYI(GetObjectName(1848658743),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==3 thencall UYI(GetObjectName(1848658516),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==4 thencall UYI(GetObjectName(1848658744),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==5 thencall UYI(GetObjectName(1848658511),5,GetTriggerUnit(),0.03,255,0,0,255)endifset r=r-1call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(300),(r))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(299),(KL3))call TriggerRegisterTimerEvent(t,0.4,true)call TriggerAddCondition(t,Condition(function KJ3))set t=nullset P8I=nullset P7I=nullendfunctionfunction KN3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093815122)call IssueTargetOrder(I01,"thunderbolt",P8I)call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)*0.4)set P7I=nullset P8I=nullset I01=nullendfunctionfunction FVO takes nothing returns nothinglocal unit P7I=GKcall IA1(P7I,1093815121)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815121,true)set P7I=nullendfunctionfunction FWO takes nothing returns nothinglocal unit P7I=GKcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815121,false)set P7I=nullendfunctionfunction KS3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer KK3=(LoadInteger(LY,(S5I),(300)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer KL3=(LoadInteger(LY,(S5I),(299)))local unit I01if GetTriggerEvalCount(t)>KK3 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)if KL3==1093815121 thenset KL3=1093815122endifcall IA1(I01,KL3)call SetUnitAbilityLevel(I01,KL3,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)endifset t=nullset P8I=nullset P7I=nullset I01=nullreturn falseendfunctionfunction KT3 takes integer r returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer KL3=GetSpellAbilityId()local integer SUI=GetUnitAbilityLevel(P7I,KL3)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if r==2 thencall UYI(GetObjectName(1848658743),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==3 thencall UYI(GetObjectName(1848658516),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==4 thencall UYI(GetObjectName(1848658744),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==5 thencall UYI(GetObjectName(1848658511),5,GetTriggerUnit(),0.03,255,0,0,255)endifset r=r-1call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(300),(r))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(299),(KL3))call TriggerRegisterTimerEvent(t,0.4,true)call TriggerAddCondition(t,Condition(function KS3))set t=nullset P8I=nullset P7I=nullendfunctionfunction KR3 takes nothing returns booleanlocal integer rif GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and NNI(GetSpellTargetUnit())==false thenif GetSpellAbilityId()==1093678167 or GetSpellAbilityId()==1093679172 or GetSpellAbilityId()==1093679169 or GetSpellAbilityId()==1093679161 or GetSpellAbilityId()==1093815121 thenset r=KW3(GetTriggerUnit())if r>1 and((LoadInteger(LY,(GetHandleId((GetSpellTargetUnit()))),((4322))))==1)==false thencall KT3(r)endifelseif GetSpellAbilityId()==1093677361 or GetSpellAbilityId()==1093677111 or GetSpellAbilityId()==1093744471 or GetSpellAbilityId()==1093677396 or GetSpellAbilityId()==1093744472 or GetSpellAbilityId()==1093677126 or GetSpellAbilityId()==1093744473 or GetSpellAbilityId()==1093744470 thenset r=KW3(GetTriggerUnit())if r>1 and((LoadInteger(LY,(GetHandleId((GetSpellTargetUnit()))),((4322))))==1)==false thencall KM3(r)endifendifendifif NNI(GetSpellTargetUnit())==false and GetSpellAbilityId()==1093815121 thencall KN3()endifreturn falseendfunctionfunction KP3 takes nothing returns booleanlocal integer id=GetPlayerId(GetTriggerPlayer())local string s1local string s2local string s3local string s4local string s5local string s6if D8I[id]>0 thenset s1=GetObjectName(1848658504)+" "+I2S(D8I[id])set s2=GetObjectName(1848658509)+" "+I2S(D4I[id]+D5I[id]+D6I[id]+D7I[id])+" ("+I2S((D4I[id]+D5I[id]+D6I[id]+D7I[id])*100/D8I[id])+"%)"set s3=GetObjectName(1848658508)+" "+I2S(D4I[id])+" ("+I2S(100*D4I[id]/D8I[id])+"%)"set s4=GetObjectName(1848658507)+" "+I2S(D5I[id])+" ("+I2S(100*D5I[id]/D8I[id])+"%)"set s5=GetObjectName(1848658506)+" "+I2S(D6I[id])+" ("+I2S(100*D6I[id]/D8I[id])+"%)"call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,s1)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,s2)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,s3)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,s4)call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,s5)endifreturn falseendfunctionfunction YD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function KR3))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function KP3))set t=nullendfunctionfunction KQ3 takes nothing returns booleanlocal unit YQ3=GetFilterUnit()local unit PKI=GetTriggerUnit()if IsUnitAlly(YQ3,GetOwningPlayer(PKI))and GetUnitState(YQ3,UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(YQ3,1113746543)==0 thenif(GetOwningPlayer(YQ3)==BO[0]or GetOwningPlayer(YQ3)==CO[0])thenif(GetUnitTypeId(YQ3)==1969711215 or GetUnitTypeId(YQ3)==1966092337 or GetUnitTypeId(YQ3)==1970169187 or GetUnitTypeId(YQ3)==1966092338)thenreturn trueendifif(GetUnitTypeId(YQ3)==1702061422 or GetUnitTypeId(YQ3)==1697656918 or GetUnitTypeId(YQ3)==1701081721 or GetUnitTypeId(YQ3)==1697656919)thenreturn trueendifreturn falseelseif IsUnitType(YQ3,UNIT_TYPE_HERO)==true thenreturn trueelseif GetOwningPlayer(YQ3)==GetOwningPlayer(PKI)thenreturn trueendifendifreturn falseendfunctionfunction KU3 takes integer r returns nothinglocal unit PKI=GetTriggerUnit()local integer SUI=rlocal group Z51=NTI()local unit I01local unit WH1local integer TPI=GetSpellAbilityId()local integer TGI=1if r==2 thencall UYI(GetObjectName(1848658743),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==3 thencall UYI(GetObjectName(1848658516),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==4 thencall UYI(GetObjectName(1848658744),5,GetTriggerUnit(),0.03,255,0,0,255)elseif r==5 thencall UYI(GetObjectName(1848658511),5,GetTriggerUnit(),0.03,255,0,0,255)endifset r=r-1call GroupEnumUnitsInRange(Z51,GetUnitX(PKI),GetUnitY(PKI),600,Condition(function KQ3))if PKI!=GetSpellTargetUnit()thencall GroupAddUnit(Z51,PKI)endifloopexitwhen TGI>SUIset TGI=TGI+1set I01=CreateUnit(GetOwningPlayer(PKI),1697656899,GetUnitX(PKI),GetUnitY(PKI),270)call IA1(I01,TPI)call SetUnitAbilityLevel(I01,TPI,GetUnitAbilityLevel(PKI,TPI))call UnitApplyTimedLife(I01,1112820806,1.0)set WH1=GroupPickRandomUnit(Z51)call IssueTargetOrder(I01,"bloodlust",WH1)call SetUnitPathing(I01,false)call SetUnitInvulnerable(I01,true)call IA1(I01,1097625443)call GroupRemoveUnit(Z51,WH1)endloopcall NSI(Z51)endfunctionfunction L03 takes nothing returns booleanlocal integer rif GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and(GetSpellAbilityId()==1093679155 or GetSpellAbilityId()==1093679177 or GetSpellAbilityId()==1093679175 or GetSpellAbilityId()==1093679174)thenset r=KW3(GetTriggerUnit())if r>1 thencall KU3(r)endifendifreturn falseendfunctionfunction YE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function L03))set t=nullendfunctionconstant function Purification_RawCode takes nothing returns integerreturn 1093679182endfunctionfunction LI3 takes nothing returns booleanreturn GetSpellAbilityId()==(1093679182)endfunctionfunction L13 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction LO3 takes nothing returns nothingcall P6I(GetTriggerUnit(),GetEnumUnit(),3,JO)endfunctionfunction L23 takes nothing returns nothinglocal boolexpr QL1=Condition(function L13)local group Z51=NTI()local real x=GetUnitX(GetSpellTargetUnit())local real y=GetUnitY(GetSpellTargetUnit())set JO=90*GetUnitAbilityLevel(GetTriggerUnit(),(1093679182))if GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)>1 thencall SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+JO)endifcall GroupEnumUnitsInRange(Z51,x,y,260+25,QL1)call ForGroup(Z51,function LO3)call NSI(Z51)endfunctionfunction YF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function LI3))call TriggerAddAction(t,function L23)endfunctionfunction L33 takes nothing returns booleanlocal unit IYO=GetSummonedUnit()local unit I01local unit P8Iif GetUnitAbilityLevel(IYO,1110456632)>0 thenset I01=GetSummoningUnit()set P8I=(LoadUnitHandle(LY,(GetHandleId(I01)),(303)))call SetUnitX(IYO,GetUnitX(P8I))call SetUnitY(IYO,GetUnitY(P8I))call IssueTargetOrder(IYO,"attack",P8I)endifset IYO=nullset I01=nullset P8I=nullreturn falseendfunctionfunction L43 takes player p,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(p,1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer IB1call SaveUnitHandle(LY,(GetHandleId(I01)),(303),(P8I))if SUI==1 thenset IB1=1093742664elseif SUI==2 thenset IB1=1093742663elseif SUI==3 thenset IB1=1093742665elseset IB1=1093742662endifcall IA1(I01,IB1)call IssueTargetOrderById(I01,852274,K1[GetPlayerId(p)])set I01=nullendfunctionfunction L53 takes player p,unit P8I,integer SUI,boolean L63,boolean L73 returns nothinglocal real PAI=50+50*SUIlocal unit I01local integer IB1if L73 thenset I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093742659)call SetUnitAbilityLevel(I01,1093742659,SUI)call IssueTargetOrder(I01,"cripple",P8I)call P6I(K1[GetPlayerId(p)],P8I,1,PAI)if L63 thencall L43(p,P8I,SUI)endifendifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",P8I,"origin"))set I01=nullendfunctionfunction L83 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer SUI=(LoadInteger(LY,(S5I),(5)))local boolean DH1=(LoadBoolean(LY,(S5I),(302)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real IH1=1000*0.035local real IZ1=UEI(x,y,QJI,QKI)local real IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)local real IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)local boolean ZXO=(LoadBoolean(LY,(S5I),(249)))call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,IZ1)if((LoadInteger(LY,(GetHandleId((P8I))),((4422))))==1)==true thenset ZXO=falsecall SaveBoolean(LY,(S5I),(249),(ZXO))endifif UTI(QJI,QKI,IV1,IW1)<=IH1 thenif ZXO thencall L53(p,P8I,SUI,true,DH1)endifcall KillUnit(IG1)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction L93 takes unit P7I,integer SUI,unit P8I,boolean DH1 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747990092,GetUnitX(P7I),GetUnitY(P7I),UEI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I)))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveBoolean(LY,(S5I),(302),(DH1))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveInteger(LY,(S5I),(5),(SUI))call SaveBoolean(LY,(S5I),(249),(true))call TriggerRegisterTimerEvent(t,0.035,true)call TriggerAddCondition(t,Condition(function L83))set t=nullendfunctionfunction LA3 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thencall L93(GetFilterUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093742660),GetSpellTargetUnit(),false)endifreturn falseendfunctionfunction LB3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093742660)local unit P8I=GetSpellTargetUnit()local group g=NTI()local boolean LC3=NNI(GetSpellTargetUnit())call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),700,Condition(function LA3))if LC3 thencall L93(SFI,SUI,P8I,false)elsecall L93(SFI,SUI,P8I,true)endifcall NSI(g)set SFI=nullset P8I=nullset g=nullendfunctionfunction LD3 takes nothing returns booleanif IsUnitIllusion(GetFilterUnit())==true and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thencall SetUnitFacing(GetFilterUnit(),AK)call SetUnitAnimation(GetFilterUnit(),"spell")endifreturn falseendfunctionfunction LE3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group g=NTI()set AK=UEI(GetUnitX(SFI),GetUnitY(SFI),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),700,Condition(function LD3))call NSI(g)set SFI=nullset g=nullendfunctionfunction LF3 takes nothing returns booleanif GetSpellAbilityId()==1093742660 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall LB3()elsecall LE3()endifendifreturn falseendfunctionfunction YH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function LF3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function LF3))call Q1I(1093742659)call Q1I(1093742664)call Q1I(1093742663)call Q1I(1093742665)call Q1I(1093742662)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function L33))set t=nullendfunctionfunction LG3 takes nothing returns booleanif GetUnitAbilityLevel(GetFilterUnit(),1110455106)>0 and IsUnitIllusion(GetFilterUnit())==true thenset UJ=UJ+1endifreturn falseendfunctionfunction LH3 takes nothing returns nothinglocal unit LZ3=GetAttacker()local group g=NTI()local integer TJI=GetRandomInt(1,100)local integer LV3=GetUnitAbilityLevel(LZ3,1093682242)local unit I01local integer LW3=4+2*LV3local integer LX3=35+5*LV3local integer LY3=8set UJ=0call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(LZ3),Condition(function LG3))call NSI(g)if UJ<LW3 and GetUnitAbilityLevel(LZ3,1112433775)==0 thenif IsUnitIllusion(LZ3)==false and TJI<=LX3 thenset I01=CreateUnit(GetOwningPlayer(LZ3),1697656901,GetUnitX(LZ3),GetUnitY(LZ3),0)call IA1(I01,1093682244)call IssueTargetOrderById(I01,852274,LZ3)endifif IsUnitIllusion(LZ3)==true and TJI<=LY3 thenset I01=CreateUnit(GetOwningPlayer(LZ3),1697656901,GetUnitX(LZ3),GetUnitY(LZ3),0)call IA1(I01,1093873730)call IssueTargetOrderById(I01,852274,LZ3)endifendifset LZ3=nullset g=nullset I01=nullendfunctionfunction LJ3 takes nothing returns booleanif(GetUnitAbilityLevel(GetAttacker(),1110455106)>0)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==true thencall LH3()endifreturn falseendfunctionfunction YG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function LJ3))set t=nullendfunctionfunction LK3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real QWI=QLI(P7I,P8I)local real II3=(LoadReal(LY,(S5I),(6)))local real I13=(LoadReal(LY,(S5I),(7)))local real xlocal real ylocal real a=UDI(P7I,P8I)if IC1(P7I)or IC1(P8I)or QWI<175 or GetTriggerEvalCount(t)>250 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset x=PTI(II3+800*0.02*Cos(a*bj_DEGTORAD))set y=PUI(I13+800*0.02*Sin(a*bj_DEGTORAD))call SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitFacing(P7I,a)call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction LL3 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IssueTargetOrder(P7I,"attack",P8I)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function LK3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set t=nullset P7I=nullset P8I=nullendfunctionfunction LM3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(GetHandleId(P7I)),(831)))local integer SUI=GetUnitAbilityLevel(P7I,1093687627)local real PD2=(LoadReal(LY,(GetHandleId(P7I)),(832)))local boolean LN3=(TimerGetElapsed(M))>(PD2+20-4*SUI)local integer LS3=500+100*SUIlocal integer LT3=300local real QWIif IsUnitIllusion(P7I)==true and IC1(P7I)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif P8I==null or IC1(P8I)==true thencall SaveUnitHandle(LY,(GetHandleId(P7I)),(831),(null))elseif LN3 thenset QWI=QLI(P7I,P8I)if QWI>LT3 and QWI<LS3 thencall SaveReal(LY,(GetHandleId(P7I)),(832),(((TimerGetElapsed(M)))*1.0))call SaveUnitHandle(LY,(GetHandleId(P7I)),(831),(null))call RemoveSavedHandle(LY,(GetHandleId(P7I)),(831))call LL3(P7I,P8I)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction LR3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function LM3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction LP3 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1093687627)>0 thenif GetIssuedOrderId()==851971 and GetOrderTargetUnit()!=null and IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetOrderTargetUnit()))==false thencall SaveUnitHandle(LY,(GetHandleId(GetTriggerUnit())),(831),(GetOrderTargetUnit()))elseif GetIssuedOrderId()==851983 and GetOrderTargetUnit()!=null and IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetOrderTargetUnit()))==false thencall SaveUnitHandle(LY,(GetHandleId(GetTriggerUnit())),(831),(GetOrderTargetUnit()))elsecall SaveUnitHandle(LY,(GetHandleId(GetTriggerUnit())),(831),(null))call RemoveSavedHandle(LY,(GetHandleId(GetTriggerUnit())),(831))endifendifreturn falseendfunctionfunction LQ3 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1093687627)==1 thencall LR3()endifreturn falseendfunctionfunction YZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call UMI(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call UMI(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(t,Condition(function LP3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function LQ3))set t=nullendfunctionfunction LU3 takes nothing returns nothingcall SetUnitX(GetEnumUnit(),DBI+GetRandomInt(0,500)-250)call SetUnitY(GetEnumUnit(),DCI+GetRandomInt(0,500)-250)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DG_Reappear.mdx",GetEnumUnit(),"chest"))endfunctionfunction M03 takes nothing returns booleanreturn GetOwningPlayer(DAI)==GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==trueendfunctionfunction MI3 takes nothing returns nothingcall SetUnitInvulnerable(GetEnumUnit(),false)call PauseUnit(GetEnumUnit(),false)call ShowUnit(GetEnumUnit(),true)call SetUnitX(GetEnumUnit(),DBI+GetRandomInt(0,250))call SetUnitY(GetEnumUnit(),DCI+GetRandomInt(0,250))endfunctionfunction M13 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01call I41(GetOwningPlayer(P7I),1,x,y,925)call UPI(x,y,225)set DBI=xset DCI=ycall ForGroup(g,function MI3)call GroupAddUnit(g,P7I)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(I01,1093873733)call IssueTargetOrderById(I01,852274,P7I)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(I01,1093873732)call IssueTargetOrderById(I01,852274,P7I)call NSI(g)call S0I(t)call FlushChildHashtable(LY,(S5I))set g=NTI()call GroupEnumUnitsInRange(g,x,y,925,Condition(function M03))call GroupAddUnit(g,P7I)call ForGroup(g,function LU3)call NSI(g)call ClearSelectionForPlayer(GetOwningPlayer(P7I))call SelectUnitAddForPlayer(P7I,GetOwningPlayer(P7I))set t=nullset P7I=nullset g=nullset I01=nullreturn falseendfunctionfunction MO3 takes nothing returns nothingcall SelectUnitRemoveForPlayer(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))call SetUnitInvulnerable(GetEnumUnit(),true)call PauseUnit(GetEnumUnit(),true)call ShowUnit(GetEnumUnit(),false)call DestroyEffect(AddSpecialEffect("war3mapImported\\DG_Disappear.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))endfunctionfunction M23 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01call FlushChildHashtable(LY,(S5I))call S0I(t)call ForGroup(g,function MO3)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function M13))set t=nullset P7I=nullset g=nullset I01=nullreturn falseendfunctionfunction M33 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetSpellTargetX()local real y=GetSpellTargetY()set DAI=P7Icall GroupEnumUnitsInRange(g,x,y,925,Condition(function M03))call GroupAddUnit(g,P7I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call TriggerRegisterTimerEvent(t,.01,false)call TriggerAddCondition(t,Condition(function M23))set t=nullset P7I=nullset g=nullendfunctionfunction M43 takes nothing returns booleanif GetSpellAbilityId()==1093873731 thencall M33()endifreturn falseendfunctionfunction YV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function M43))set t=nullendfunctionfunction M53 takes nothing returns booleanreturn GetSpellAbilityId()==1093678938endfunctionfunction M63 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0endfunctionfunction M73 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(PKI),1697657394,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)call IA1(I01,1093678676)call SetUnitAbilityLevel(I01,1093678676,GetUnitAbilityLevel(PKI,1093678938))call IssueTargetOrder(I01,"entanglingroots",GetEnumUnit())endfunctionfunction M83 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local group Z51=NTI()local boolexpr QL1=Condition(function M63)call GroupEnumUnitsInRange(Z51,GetUnitX(PKI),GetUnitY(PKI),700,QL1)call ForGroup(Z51,function M73)call NSI(Z51)endfunctionfunction YW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function M53))call TriggerAddAction(t,function M83)endfunctionfunction M93 takes unit P7I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093748546)call SetUnitAbilityLevel(I01,1093748546,SUI)call IssueTargetOrder(I01,"invisibility",P7I)call IA1(P7I,1093808975)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808975,false)set I01=nullendfunctionfunction MA3 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1747993172endfunctionfunction MB3 takes unit SFI returns booleanlocal group g=NTI()local boolean FB1=falsecall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),375,Condition(function MA3))if FirstOfGroup(g)!=null thenset FB1=trueendifcall NSI(g)set g=nullreturn FB1endfunctionfunction MC3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit SFI=NYI(PCI)local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real Z7O=(LoadReal(LY,(S5I),(442)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and(LoadBoolean(LY,(S5I),(329)))and GetAttacker()==SFI thencall UnitRemoveAbility(SFI,1110454833)call UnitRemoveAbility(SFI,1093748545)call UnitRemoveAbility(SFI,1093808975)call UnitRemoveAbility(SFI,1110459705)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED and GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677402 and GetTriggerUnit()==SFI thencall SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+1.0)*1.0))call DisableTrigger(GetTriggeringTrigger())call M93(SFI,SUI)call EnableTrigger(GetTriggeringTrigger())call SaveInteger(LY,(S5I),(34),(0))endifif I61(GetUnitX(SFI),GetUnitY(SFI),375)==false and MB3(SFI)==false thenif Z7O<(TimerGetElapsed(M))or GetTriggerEvalCount(t)==1 thencall UnitRemoveAbility(SFI,1110454833)call UnitRemoveAbility(SFI,1093748545)call UnitRemoveAbility(SFI,1093808975)call UnitRemoveAbility(SFI,1110459705)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif(LoadBoolean(LY,(S5I),(329)))and NPI>(150*SUI)thencall UnitRemoveAbility(SFI,1110454833)call UnitRemoveAbility(SFI,1093748545)call UnitRemoveAbility(SFI,1093808975)call UnitRemoveAbility(SFI,1110459705)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif(LoadBoolean(LY,(S5I),(329)))and GetUnitAbilityLevel(SFI,1110454833)==0 and GetUnitAbilityLevel(SFI,1093748545)>0 thencall SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+1.0)*1.0))call DisableTrigger(GetTriggeringTrigger())call M93(SFI,SUI)call EnableTrigger(GetTriggeringTrigger())elseif GetUnitAbilityLevel(SFI,1110454833)==0 thencall UnitRemoveAbility(SFI,1110454833)call UnitRemoveAbility(SFI,1093748545)call UnitRemoveAbility(SFI,1093808975)call UnitRemoveAbility(SFI,1110459705)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+1.0)*1.0))endifendifset t=nullset SFI=nullreturn falseendfunctionfunction MD3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()!=EVENT_WIDGET_DEATH thenif GetUnitAbilityLevel(P7I,1110454833)>0 thencall IA1(P7I,1093748545)endifendifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction ME3 takes nothing returns nothinglocal trigger tlocal integer S5Iset t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(30),(NKI(GetSpellTargetUnit())))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(GetTriggerUnit(),1093677402)))call SaveInteger(LY,(S5I),(34),(0))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+1.0)*1.0))call TriggerAddCondition(t,Condition(function MC3))call TriggerRegisterTimerEvent(t,0.1,true)call IA1(GetSpellTargetUnit(),1093808975)call SetPlayerAbilityAvailable(GetOwningPlayer(GetSpellTargetUnit()),1093808975,false)if GetTriggerUnit()==GetSpellTargetUnit()thencall SaveBoolean(LY,(S5I),(329),(true))call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call TriggerAddCondition(t,Condition(function MD3))call TriggerRegisterTimerEvent(t,2,false)call TriggerRegisterDeathEvent(t,GetTriggerUnit())endifset t=nullendfunctionfunction MF3 takes nothing returns booleanif GetSpellAbilityId()==1093677402 thencall ME3()endifreturn falseendfunctionfunction YX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MF3))set t=nullendfunctionfunction MG3 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(DDI),1697657394,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)call IA1(I01,1093873974)call SetUnitAbilityLevel(I01,1093873974,GetUnitAbilityLevel(DDI,1093678938))call IssueTargetOrder(I01,"entanglingroots",GetEnumUnit())set I01=nullendfunctionfunction MH3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local destructable d=(LoadDestructableHandle(LY,(S5I),(834)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group gif GetDestructableLife(d)<=0 thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093678938 thenset DDI=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(I01),GetUnitY(I01),825,Condition(function M63))call ForGroup(g,function MG3)call NSI(g)endifset t=nullset d=nullset g=nullset I01=nullset P7I=nullreturn falseendfunctionfunction MZ3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local destructable d=GetSpellTargetDestructable()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429573,GetDestructableX(d),GetDestructableY(d),0)call SaveDestructableHandle(LY,(S5I),(834),(d))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MH3))set t=nullset P7I=nullset d=nullset I01=nullendfunctionfunction MV3 takes nothing returns booleanif GetSpellAbilityId()==1093677398 thencall MZ3()endifreturn falseendfunctionfunction YL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MV3))set t=nullendfunctionfunction XBO takes nothing returns nothingcall IA1(GK,1093677398)endfunctionfunction MW3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(686)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))or RKI(P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SaveReal(LY,(GetHandleId(P8I)),(686),((0)*1.0))call UnitRemoveAbility(P8I,1093809232)call UnitRemoveAbility(P8I,1093809232)call UnitRemoveAbility(P8I,1093809232)call UnitRemoveAbility(P8I,1093809232)call UnitRemoveAbility(P8I,1110459719)elsecall P6I(P7I,P8I,1,15+15*SUI)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction MX3 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real LVO=(LoadReal(LY,(GetHandleId(P8I)),(686)))local integer SUI=GetUnitAbilityLevel(P7I,1093748535)if LVO>(TimerGetElapsed(M))thencall SaveReal(LY,(GetHandleId(P8I)),(686),(((TimerGetElapsed(M))+4)*1.0))elseset t=CreateTrigger()set S5I=GetHandleId(t)call SaveReal(LY,(GetHandleId(P8I)),(686),(((TimerGetElapsed(M))+4)*1.0))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function MW3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl",P8I,"overhead")))if SUI==1 thencall IA1(P8I,1093809232)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809232,false)elseif SUI==2 thencall IA1(P8I,1093809232)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809232,false)elseif SUI==3 thencall IA1(P8I,1093809232)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809232,false)elseif SUI==4 thencall IA1(P8I,1093809232)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809232,false)endifendifset t=nullendfunctionfunction Sentinel_FindClosest takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(DFI)and(GetUnitTypeId(GetFilterUnit())==1747993172 or GetUnitTypeId(GetFilterUnit())==1747993173)thenif QNI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),DGI,DHI)<DZI thenset DEI=GetFilterUnit()set DZI=QNI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),DGI,DHI)endifendifreturn falseendfunctionfunction MY3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8Ilocal group glocal real GW1=(LoadReal(LY,(S5I),(442)))local real xlocal real ylocal integer RIIlocal real hplocal integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()!=EVENT_PLAYER_UNIT_DEATH thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))endifif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH thenif GetTriggerUnit()==I01 thencall UnitRemoveAbility(I01,1097886070)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetUnitTypeId(I01)==1747993172 thenset GK=I01set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(I01),GetUnitY(I01),110,Condition(function CA1))set P8I=AU1(g,GetUnitX(I01),GetUnitY(I01))call NSI(g)if P8I!=null thencall MX3(P7I,P8I)set x=GetUnitX(I01)set y=GetUnitY(I01)set hp=GetUnitState(I01,UNIT_STATE_LIFE)call ShowUnit(I01,false)call DisableTrigger(t)call KillUnit(I01)call EnableTrigger(t)set I01=CreateUnit(GetOwningPlayer(P7I),1747993173,x,y,0)call SetUnitState(I01,UNIT_STATE_LIFE,hp)call UnitApplyTimedLife(I01,1112820806,480-((TimerGetElapsed(M))-GW1))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(411),(((TimerGetElapsed(M))+4)*1.0))endifelseif GetUnitTypeId(I01)==1747993173 and(LoadReal(LY,(S5I),(411)))<(TimerGetElapsed(M))thenset x=GetUnitX(I01)set y=GetUnitY(I01)set hp=GetUnitState(I01,UNIT_STATE_LIFE)call ShowUnit(I01,false)call DisableTrigger(t)call KillUnit(I01)call EnableTrigger(t)set I01=CreateUnit(GetOwningPlayer(P7I),1747993172,x,y,0)call SetUnitState(I01,UNIT_STATE_LIFE,hp)call UnitApplyTimedLife(I01,1112820806,480-((TimerGetElapsed(M))-GW1))call SaveUnitHandle(LY,(S5I),(19),(I01))endifset t=nullset P7I=nullset P8I=nullset I01=nullset g=nullreturn falseendfunctionfunction MJ3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093748535)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit I01=CreateUnit(GetOwningPlayer(P7I),1747993172,x,y,0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UnitApplyTimedLife(I01,1112820806,480)call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function MY3))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M)))*1.0))call SaveInteger(LY,(S5I),(34),(0))set t=nullset P7I=nullset I01=nullendfunctionfunction MK3 takes nothing returns booleanif GetSpellAbilityId()==1093748535 thencall MJ3()endifreturn falseendfunctionfunction YJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MK3))set t=nullendfunctionfunction ML3 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real d=QNI(GetUnitX(P8I),GetUnitY(P8I),DXI,DYI)if d<DWI and IsUnitVisible(P8I,GetOwningPlayer(DJI))==true and(IsUnitType(P8I,UNIT_TYPE_HERO)==true or(IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==true and BQ1(P8I)))thenset DVI=GetEnumUnit()set DWI=dendifset P8I=nullendfunctionfunction MM3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093815628)if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>5 thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call QGI(P8I,RMinBJ(GetEventDamage(),20*GetUnitAbilityLevel(P7I,1093815628)))endifendifif GetTriggerEventId()!=EVENT_UNIT_DAMAGED or NPI>(SUI+3-1)thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093815640)call UnitRemoveAbility(P8I,1093815641)call UnitRemoveAbility(P8I,1093815639)call UnitRemoveAbility(P8I,1093815638)call UnitRemoveAbility(P8I,1110460213)endifset t=nullset P8I=nullreturn falseendfunctionfunction MN3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer OO1=1093815640local integer SUI=GetUnitAbilityLevel(P7I,1093815628)local group gif P8I==null thenset DVI=nullset DJI=P7Iset DWI=999999set DXI=GetSpellTargetX()set DYI=GetSpellTargetY()set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function CW1))call ForGroup(g,function ML3)call NSI(g)set P8I=DVIset g=nullendifif SUI==2 thenset OO1=1093815641elseif SUI==3 thenset OO1=1093815639elseif SUI==4 thenset OO1=1093815638endifcall IA1(P8I,OO1)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),OO1,false)call TriggerRegisterTimerEvent(t,15,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function MM3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(0))set t=nullset P7I=nullendfunctionfunction MS3 takes nothing returns booleanif GetSpellAbilityId()==1093815628 thencall MN3()endifreturn falseendfunctionfunction YY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MS3))set t=nullendfunctionfunction MT3 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real MR3=(LoadReal(LY,(S5I),(21)))call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+MR3)set P7I=nullset P8I=nullendfunctionfunction MP3 takes nothing returns nothinglocal trigger t=IJ1(DKI,GetEnumUnit(),1747993656,"MT3",400,false)local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(21),((DLI)*1.0))set t=nullendfunctionfunction MQ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093809971)call UnitRemoveAbility(P8I,1110459724)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))elseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI>5 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093809971)call UnitRemoveAbility(P8I,1110459724)endifcall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",P8I,"origin"))set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),525,Condition(function CT1))set DKI=P8Iset DLI=15*SUIcall ForGroup(g,function MP3)call NSI(g)call P6I(P7I,P8I,1,DLI)endifset t=nullset P7I=nullset P8I=nullset g=nullreturn falseendfunctionfunction MU3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093809742)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,1093809971)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809971,false)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerRegisterTimerEvent(t,4.5,false)call TriggerAddCondition(t,Condition(function MQ3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M)))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))set t=nullset P7I=nullendfunctionfunction LeechSeed takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call IJ1(P7I,P8I,1747993657,"MU3",600,false)set P7I=nullset P8I=nullendfunctionfunction N03 takes nothing returns booleanif GetSpellAbilityId()==1093809742 and NNI(GetSpellTargetUnit())==false thencall MU3()endifreturn falseendfunctionfunction YK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function N03))set t=nullendfunctionfunction NI3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815892)call FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(P7I,P8I,1,100+50*SUI)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction N13 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093815892)local boolean NO3=(LoadBoolean(LY,(S5I),(95)))call FlushChildHashtable(LY,(S5I))call S0I(t)call IA1(I01,1093684307)call SetUnitAbilityLevel(I01,1093684307,SUI)call IssueTargetOrder(I01,"soulburn",P8I)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function NI3))call TriggerRegisterTimerEvent(t,0.01,false)call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call SaveUnitHandle(LY,(GetHandleId(t)),(17),(P8I))call SaveInteger(LY,(GetHandleId(t)),(5),(SUI))if NO3 thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageSpell.mdx",P8I,"overhead"))endifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction N23 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01local integer SUI=GetUnitAbilityLevel(P7I,1093815892)if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093815893)call UnitRemoveAbility(P8I,1110455638)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093815893)call UnitRemoveAbility(P8I,1110455638)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function N13))call TriggerRegisterTimerEvent(t,0.01,false)call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call SaveUnitHandle(LY,(GetHandleId(t)),(17),(P8I))call SaveInteger(LY,(GetHandleId(t)),(5),(SUI))call SaveBoolean(LY,(S5I),(95),(false))set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093815895)call SetUnitAbilityLevel(I01,1093815895,SUI)call IssueTargetOrder(I01,"drunkenhaze",P8I)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageDuration.mdx",P8I,"overhead"))set I01=nullelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and V61(GetSpellAbilityId())==false and V81(GetSpellAbilityId())==false and GetSpellAbilityId()!=1095328363 and GetSpellAbilityId()!=1093678426 and GetSpellAbilityId()!=1093682768 and GetSpellAbilityId()!=1093685593 and GetSpellAbilityId()!=1093678680 and GetSpellAbilityId()!=1093681489 and GetSpellAbilityId()!=1093808472 and GetSpellAbilityId()!=1093808471 and GetSpellAbilityId()!=1093808470 and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093678667 and GetSpellAbilityId()!=1097163124 and GetSpellAbilityId()!=1093683801 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750345 and GetSpellAbilityId()!=1093750089 and GetSpellAbilityId()!=1093816645 and GetSpellAbilityId()!=1093751096 and GetSpellAbilityId()!=1093751361 and GetSpellAbilityId()!=1093751126 and GetSpellAbilityId()!=1093808473 and GetSpellAbilityId()!=1093748565 and GetSpellAbilityId()!=1093753177 and BZ1(GetSpellAbilityId())==false thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093815893)call UnitRemoveAbility(P8I,1110455638)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)if GetSpellAbilityId()==1093685846 or GetSpellAbilityId()==1093684302 thencall TriggerRegisterTimerEvent(t,0.01,false)elsecall TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_SPELL_ENDCAST)endifcall TriggerAddCondition(t,Condition(function N13))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveBoolean(LY,(S5I),(95),(true))endifset P8I=nullset P7I=nullset t=nullreturn falseendfunctionfunction N33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetUnitAbilityLevel(P8I,1093815893)==0 or GetTriggerEvalCount(t)>250 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)elsecall SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))endifset t=nullset I01=nullset P8I=nullreturn falseendfunctionfunction N43 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429305,GetUnitX(P8I),GetUnitY(P8I),0)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,5,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function N23))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093815893)call UnitMakeAbilityPermanent(P8I,true,1093815894)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815893,false)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\LastWordDebuff_6.mdx",P8I,"overhead")))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function N33))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset t=nullendfunctionfunction N53 takes nothing returns booleanif GetSpellAbilityId()==1093815892 and NNI(GetSpellTargetUnit())==false thencall N43()endifreturn falseendfunctionfunction LastWord_Process takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))call SetHeroInt(P7I,GetHeroInt(P7I,false)+1,true)call UYI("+1 "+GetObjectName(1848658512),3,P7I,0.023,0,255,0,230)set P7I=nullendfunctionfunction N63 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))call SetHeroInt(P7I,GetHeroInt(P7I,false)+2,true)call UYI("+2 "+GetObjectName(1848658512),3,P7I,0.023,0,255,0,230)set P7I=nullendfunctionfunction N73 takes unit P7I,unit IFO returns nothingif IsUnitType(IFO,UNIT_TYPE_HERO)==true and V51(GetUnitTypeId(IFO))==false and IsUnitIllusion(IFO)==false and(IsUnitInRange(P7I,IFO,900)or GetOwningPlayer(P7I)==GetOwningPlayer(GetKillingUnit()))and IC1(P7I)==false and IsUnitAlly(P7I,GetOwningPlayer(IFO))==false thenif GetUnitTypeId(P7I)==1311781185 thenset DMI[GetPlayerId(GetOwningPlayer(P7I))]=DMI[GetPlayerId(GetOwningPlayer(P7I))]+2call UYI("-2 "+GetObjectName(1848658512),3,IFO,0.023,255,0,0,230)call SetHeroInt(IFO,GetHeroInt(IFO,false)-2,true)call IJ1(IFO,P7I,1747993424,"N63",450,false)endifendifendfunctionfunction N83 takes nothing returns nothingcall N73(GetEnumUnit(),GetTriggerUnit())endfunctionfunction N93 takes nothing returns booleanlocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1000,Condition(function D51))call GroupAddUnit(g,K1[GetPlayerId(GetOwningPlayer(GetKillingUnit()))])call ForGroup(g,function N83)call NSI(g)set g=nullreturn falseendfunctionfunction NA3 takes nothing returns booleanlocal integer QHI=DMI[GetPlayerId(GetTriggerPlayer())]if GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1311781185 and QHI>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848657997)+" "+I2S(QHI))endifreturn falseendfunctionfunction YS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function N53))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function N93))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function NA3))set t=nullendfunctionfunction NB3 takes nothing returns booleanlocal real dif GetUnitAbilityLevel(GetTriggerUnit(),1110455640)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093684314)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall UnitRemoveAbility(GetTriggerUnit(),1110455640)set d=(0.1+0.2*I2R(GetUnitAbilityLevel(GetEventDamageSource(),1093684314)))*GetHeroInt(GetEventDamageSource(),true)call UYI("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,3,216,216,216)call DisableTrigger(GetTriggeringTrigger())call P6I(GetEventDamageSource(),GetTriggerUnit(),3,d)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction NC3 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function NB3))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction ND3 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),1093684314)>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall NC3()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093684314 thencall NC3()endifreturn falseendfunctionfunction NE3 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function ND3))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction NF3 takes nothing returns booleanif GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 thencall NE3()endifreturn falseendfunctionfunction YN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function NF3))set t=nullendfunctionfunction NG3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and NPI<(6)thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-8*SUI)call P6I(P7I,P8I,1,5+15*SUI)elseif NPI>=(6)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750095 and GetSpellAbilityId()!=1093747504 and GetSpellAbilityId()!=1093753417 and GetSpellAbilityId()!=1093810265 and V81(GetSpellAbilityId())==false and(TRI(GetSpellAbilityId())or GetSpellAbilityId()==1093678667))thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093750867)call UnitRemoveAbility(P8I,1110459217)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction NH3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093743692)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,1093750867)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function NG3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl",P8I,"overhead")))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))set P7I=nullset P8I=nullset t=nullendfunctionfunction NZ3 takes nothing returns nothinglocal group glocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093743692)if SUI>0 thenset g=NTI()set GK=GetTriggerUnit()set DNI=GetTriggerUnit()call GroupEnumUnitsInRange(g,0,0,9999,Condition(function DI1))call ForGroup(g,function NH3)call NSI(g)endifset g=nullendfunctionfunction NV3 takes nothing returns nothinglocal group g=NTI()local location l=GetSpellTargetLoc()set GK=GetTriggerUnit()set DNI=GetTriggerUnit()call GroupEnumUnitsInRange(g,GetLocationX(l),GetLocationY(l),375,Condition(function DI1))call ForGroup(g,function NH3)call U7I("war3mapImported\\CotS.mdx",GetLocationX(l),GetLocationY(l),5)call NSI(g)call RemoveLocation(l)set g=nullset l=nullendfunctionfunction NW3 takes nothing returns booleanif GetSpellAbilityId()==1093743692 thencall NV3()endifreturn falseendfunctionfunction YM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NW3))set t=nullendfunctionfunction NX3 takes nothing returns booleanreturn GetSpellAbilityId()==1093684275 or GetSpellAbilityId()==1093816643endfunctionfunction NY3 takes nothing returns booleancall S0I(GetTriggeringTrigger())call VolumeGroupReset()return falseendfunctionfunction NJ3 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())local trigger t=CreateTrigger()local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093684275)if SUI==0 thenset SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093816643)call NZ3()endifcall TriggerRegisterTimerEvent(t,SUI+2,false)call TriggerAddCondition(t,Condition(function NY3))call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call ShowUnitHide(bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(5.00,1112820806,bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,1093684274)call SetUnitAbilityLevelSwapped(1093684274,bj_lastCreatedUnit,SUI)call IssuePointOrderLoc(bj_lastCreatedUnit,"silence",BFO)call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS,.0)call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT,.0)call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS,.0)call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_MUSIC,.0)call RemoveLocation(BFO)set t=nullset BFO=nullendfunctionfunction GS takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NX3))call TriggerAddAction(t,function NJ3)endfunctionfunction NK3 takes nothing returns booleanreturn GetLearnedSkill()==1093677909endfunctionfunction NL3 takes nothing returns nothingcall SetPlayerTechResearchedSwap(1378889781,GetUnitAbilityLevelSwapped(1093677909,GetTriggerUnit()),GetOwningPlayer(GetLearningUnit()))endfunctionfunction YQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function NK3))call TriggerAddAction(t,function NL3)endfunctionfunction NM3 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false thenif(LoadInteger(LY,(GetHandleId(GetEnumUnit())),(836)))==DQI or(TimerGetElapsed(M))>(1.1+(LoadReal(LY,(GetHandleId(GetEnumUnit())),(837))))thencall SaveInteger(LY,(GetHandleId(GetEnumUnit())),(836),(DQI))call SaveReal(LY,(GetHandleId(GetEnumUnit())),(837),(((TimerGetElapsed(M)))*1.0))call P6I(DTI,GetEnumUnit(),1,DPI)call IssueTargetOrder(DRI,"slow",GetEnumUnit())endifendifendfunctionfunction NN3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=NTI()local real dlocal real alocal real x2local real y2set DQI=S5Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,450+25,Condition(function CZ1))set DTI=P7Iset DPI=SUI*12set DRI=I01call ForGroup(g,function NM3)call NSI(g)call DestroyEffect((LoadEffectHandle(LY,(S5I),(309))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(178))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(179))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(180))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(330))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(331))))if GetTriggerEvalCount(t)==10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset d=0set a=0set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(309),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=150set a=45set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=275set a=90set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=150set a=135set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=275set a=180set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(178),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=150set a=225set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(179),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=275set a=270set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(180),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=150set a=305set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(330),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))set d=275set a=360set x2=x+d*Cos(a*bj_DEGTORAD)set y2=y+d*Sin(a*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(331),(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2)))endifset t=nullset P7I=nullset I01=nullset g=nullreturn falseendfunctionfunction NS3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093818959)local real x1=(LoadReal(LY,(S5I),(6)))local real y1=(LoadReal(LY,(S5I),(7)))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x1,y1,0)local real x2local real y2local real dlocal real alocal integer icall IA1(I01,1093744966)call SetUnitAbilityLevel(I01,1093744966,SUI)if GetTriggerEvalCount(t)==1 thenset i=1loopexitwhen i>10set d=GetRandomReal(0,450)set a=GetRandomReal(0,360)set x2=x1+d*Cos(a*bj_DEGTORAD)set y2=y1+d*Sin(a*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(P7I),1697656906,GetUnitX(P7I),GetUnitY(P7I),90)call IssuePointOrder(I01,"attackground",x2,y2)call UnitApplyTimedLife(I01,1112820806,0.5)set i=i+1endloopelsecall FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(6),((x1)*1.0))call SaveReal(LY,(S5I),(7),((y1)*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function NN3))call TriggerEvaluate(t)endifset P7I=nullset I01=nullset t=nullreturn falseendfunctionfunction NT3 takes nothing returns nothinglocal trigger tlocal integer S5Ilocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(829)))if JGO>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call I41(GetOwningPlayer(P7I),9.4,x,y,360)call TriggerRegisterTimerEvent(t,0.4,true)call TriggerAddCondition(t,Condition(function NS3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call UnitRemoveAbility(P7I,DSI[JGO])set JGO=JGO-1call SaveInteger(LY,(GetHandleId(P7I)),(829),(JGO))call IA1(P7I,DSI[JGO])elsecall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659545))endifcall RemoveLocation(l)set t=nullset P7I=nullset l=nullendfunctionfunction NR3 takes nothing returns booleanif GetSpellAbilityId()==1093818962 or GetSpellAbilityId()==1093818961 or GetSpellAbilityId()==1093678644 or GetSpellAbilityId()==1093818960 thencall NT3()endifreturn falseendfunctionfunction NP3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(829)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer NQ3=3if JGO<NQ3 thenset NPI=NPI-1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==0 thencall UnitRemoveAbility(P7I,DSI[JGO])set NPI=40call SaveInteger(LY,(S5I),(34),(NPI))set JGO=JGO+1call SaveInteger(LY,(GetHandleId(P7I)),(829),(JGO))call IA1(P7I,DSI[JGO])endifendifset t=nullset P7I=nullreturn falseendfunctionfunction NU3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(P7I)),(829),(3))call IA1(P7I,DSI[3])call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function NP3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(40))set P7I=nullset t=nullendfunctionfunction S03 takes nothing returns booleanif GetLearnedSkill()==1093818959 and IsUnitIllusion(GetTriggerUnit())==false thenif GetUnitAbilityLevel(GetTriggerUnit(),1093818959)==1 thencall NU3()endifendifreturn falseendfunctionfunction YT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NR3))call Q1I(1093744966)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function S03))set t=nullset DSI[0]=1093818962set DSI[1]=1093818961set DSI[2]=1093678644set DSI[3]=1093818960endfunctionfunction SI3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local effect FX=(LoadEffectHandle(LY,(S5I),(32)))local player p=GetOwningPlayer(SFI)call UnitShareVision(P8I,p,false)call DestroyEffect(FX)call RemoveUnit(I01)call UnitRemoveAbility(P8I,1110455880)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset I01=nullset P8I=nullset FX=nullset p=nullreturn falseendfunctionfunction S13 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local player p=GetOwningPlayer(SFI)local unit I01local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local string s="effects\\Snipe Target.mdx"if IsPlayerAlly(GetLocalPlayer(),p)==false and P0I(GetLocalPlayer())==false thenset s=""endifcall UnitShareVision(P8I,p,true)set I01=CreateUnit(GetOwningPlayer(P8I),1697657170,0,0,0)call IA1(I01,1093684809)call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(s,P8I,"overhead")))call TriggerRegisterTimerEvent(t,4,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function SI3))set t=nullset SFI=nullset P8I=nullset I01=nullset p=nullendfunctionfunction SO3 takes nothing returns booleanif GetSpellAbilityId()==1093678160 or GetSpellAbilityId()==1093747029 thencall S13()endifreturn falseendfunctionfunction YR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function SO3))set t=nullendfunctionfunction S23 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(827)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or Z7O<(TimerGetElapsed(M))thencall UnitRemoveAbility(P7I,1093818699)call UnitRemoveAbility(P7I,1110460484)call UnitRemoveAbility(P7I,1093818701)call SaveReal(LY,(GetHandleId(P7I)),(827),((0)*1.0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction S33 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real Z7O=(LoadReal(LY,(GetHandleId(P7I)),(827)))local integer SUI=GetUnitAbilityLevel(P7I,1093677907)call SaveReal(LY,(GetHandleId(P7I)),(827),(((TimerGetElapsed(M))+0.5)*1.0))call P6I(P7I,P8I,2,25*SUI-10)if BJ1(P8I)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5+0.01,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function S23))call SaveUnitHandle(LY,(S5I),(2),(P8I))call IA1(P8I,1093818699)call IA1(P8I,1093818701)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093818699,false)endifset t=nullendfunctionfunction S43 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call S33(P7I,P8I)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction S53 takes nothing returns booleanlocal unit P7I=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))local unit P8I=GetTriggerUnit()local trigger tlocal integer S5Iif GetAttacker()==P7I and((LoadInteger(LY,(GetHandleId((P7I))),((4347))))==1)==false and IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(P8I,1093678162)==0 thenif GetRandomReal(0,100)<40 thencall SCI(P7I,4347,0.1)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function S43))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifendifset P7I=nullset P8I=nullreturn falseendfunctionfunction S63 takes nothing returns booleanlocal trigger tlocal integer S5Iif GetLearnedSkill()==1093677907 and GetUnitAbilityLevel(GetTriggerUnit(),1093677907)==1 and IsUnitIllusion(GetTriggerUnit())==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function S53))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))set t=nullendifreturn falseendfunctionfunction YP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function S63))set t=nullendfunctionfunction S73 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656883,x,y,0)local integer SUI=GetUnitAbilityLevel(SFI,1093685831)local real S83=(83+17*SUI)*0.01call SetUnitVertexColor(I01,255,255,255,150)call UnitApplyTimedLife(I01,1112820806,6)call SetUnitScale(I01,S83,S83,S83)if TOI(GetOwningPlayer(SFI))thencall IA1(I01,1093677369)call SetUnitAbilityLevel(I01,1093677369,SUI)elsecall IA1(I01,1093682487)call SetUnitAbilityLevel(I01,1093682487,SUI)endifcall IssuePointOrder(I01,"cloudoffog",x,y)call RemoveLocation(l)set SFI=nullset l=nullset I01=nullendfunctionfunction S93 takes nothing returns booleanif GetSpellAbilityId()==1093685831 thencall P32()call S73()endifreturn falseendfunctionfunction JI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function S93))endfunctionfunction SA3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local player plocal integer SUI=GetUnitAbilityLevel(P7I,1093677130)local real HJ3=(SUI+3)/4if(TimerGetElapsed(M))>(10-2*SUI)+E0I thencall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+HJ3)endifset p=nullset t=nullset P7I=nullreturn falseendfunctionfunction SB3 takes nothing returns booleanlocal unit P7I=GetAttacker()local integer SUI=GetUnitAbilityLevel(P7I,1093677130)if SUI>0 thenset E0I=(TimerGetElapsed(M))call UnitRemoveAbility(P7I,DUI[SUI])call UnitRemoveAbility(P7I,1093677130)call IA1(P7I,DUI[SUI])call IA1(P7I,1093677130)call SetUnitAbilityLevel(P7I,1093677130,SUI)endifset P7I=nullreturn falseendfunctionfunction SC3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093677130)local trigger tlocal integer S5Iif SUI==1 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function SA3))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendifif GetUnitAbilityLevel(P7I,1093684546)==0 thencall IA1(P7I,1093684546)endifif SUI==2 thencall UnitRemoveAbility(P7I,DUI[1])elseif SUI==3 thencall UnitRemoveAbility(P7I,DUI[1])call UnitRemoveAbility(P7I,DUI[2])elseif SUI==4 thencall UnitRemoveAbility(P7I,DUI[1])call UnitRemoveAbility(P7I,DUI[2])call UnitRemoveAbility(P7I,DUI[3])endifcall SetUnitAbilityLevel(P7I,1093684546,SUI)call IA1(P7I,DUI[SUI])set P7I=nullendfunctionfunction SD3 takes nothing returns booleanif GetLearnedSkill()==1093677130 and IsUnitIllusion(GetTriggerUnit())==false thencall SC3()endifreturn falseendfunctionfunction YU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function SD3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function SB3))set DUI[1]=1093817682set DUI[2]=1093817683set DUI[3]=1093817684set DUI[4]=1093818709set t=nullendfunctionfunction SE3 takes integer id returns booleanreturn id==1093818714 or id==1093818711 or id==1093818710 or id==1093818713 or id==1093818712 or id==1093818928 or id==1093818956endfunctionfunction SF3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real PAI=10+30*GetUnitAbilityLevel(P7I,1093684025)local trigger tlocal integer S5Ilocal real x=GetUnitX(P8I)-75*Cos(GetUnitFacing(P8I)*bj_DEGTORAD)local real y=GetUnitY(P8I)-75*Sin(GetUnitFacing(P8I)*bj_DEGTORAD)local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(828)))if JGO>0 thencall SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitFacing(P7I,GetUnitFacing(P8I))call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",x,y))if IsUnitEnemy(P8I,GetOwningPlayer(P7I))thencall P6I(P7I,P8I,1,PAI)call SaveBoolean(LY,(GetHandleId(P7I)),(332),(true))call IssueTargetOrder(P7I,"attack",P8I)endifcall UnitRemoveAbility(P7I,EII[JGO])set JGO=JGO-1call SaveInteger(LY,(GetHandleId(P7I)),(828),(JGO))call IA1(P7I,EII[JGO])elsecall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659545))endifset P7I=nullset P8I=nullset t=nullendfunctionfunction SG3 takes nothing returns booleanif SE3(GetSpellAbilityId())thencall SF3()endifreturn falseendfunctionfunction SH3 takes nothing returns booleanif SE3(GetSpellAbilityId())thencall DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))endifreturn falseendfunctionfunction SZ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(828)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer NQ3=3+GetUnitAbilityLevel(P7I,1093684025)if JGO<NQ3 thenset NPI=NPI-1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==0 thencall UnitRemoveAbility(P7I,EII[JGO])set NPI=35call SaveInteger(LY,(S5I),(34),(NPI))set JGO=JGO+1call SaveInteger(LY,(GetHandleId(P7I)),(828),(JGO))call IA1(P7I,EII[JGO])endifendifset t=nullset P7I=nullreturn falseendfunctionfunction SV3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(P7I)),(828),(4))call IA1(P7I,EII[4])call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function SZ3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(35))set P7I=nullset t=nullendfunctionfunction SW3 takes nothing returns booleanif GetLearnedSkill()==1093684025 and IsUnitIllusion(GetTriggerUnit())==false thenif GetUnitAbilityLevel(GetTriggerUnit(),1093684025)==1 thencall SV3()endifendifreturn falseendfunctionfunction J11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SG3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function SH3))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function SW3))set t=nullset EII[0]=1093818714set EII[1]=1093818711set EII[2]=1093818710set EII[3]=1093818713set EII[4]=1093818712set EII[5]=1093818928set EII[6]=1093818956endfunctionfunction SX3 takes nothing returns nothinglocal unit P7I=GetAttacker()local unit P8I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093682266)local boolean SY3=(LoadBoolean(LY,(GetHandleId(P7I)),(332)))local real d=RAbsBJ(GetUnitFacing(P8I)-GetUnitFacing(P7I))if d>180 thenset d=360-dendifif d<=105 or SY3 thencall SaveBoolean(LY,(GetHandleId(P7I)),(332),(false))if GetUnitAbilityLevel(P8I,1093678162)==0 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",P8I,"chest"))call P6I(P7I,P8I,2,GetHeroAgi(P7I,true)*(0.25*SUI+0.25))endifendifset P7I=nullset P8I=nullendfunctionfunction SJ3 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093682266)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false thenif IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false or(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)<0.5)thencall SX3()endifendifreturn falseendfunctionfunction J01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function SJ3))set t=nullendfunctionfunction SK3 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifcall AX1(GetEnumUnit(),E1I,1,8,1110458966)call UnitMakeAbilityPermanent(GetEnumUnit(),true,E1I)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),E1I,false)endfunctionfunction SL3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093814611)local group g=NTI()if SUI==1 thenset E1I=1093748278elseif SUI==2 thenset E1I=1093748279elseif SUI==3 thenset E1I=1093748275elseif SUI==4 thenset E1I=1093748277endifcall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),925,Condition(function CK1))call ForGroup(g,function SK3)call NSI(g)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",P7I,"overhead"))set P7I=nullset g=nullendfunctionfunction SM3 takes nothing returns booleanif GetSpellAbilityId()==1093814611 thencall SL3()endifreturn falseendfunctionfunction SU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SM3))set t=nullendfunctionfunction SN3 takes unit SWI returns booleanif ES1(SWI,FR0[L50])!=null thenreturn trueendifreturn falseendfunctionfunction SS3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local boolean CK3=SN3(SFI)if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))endifif(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and NPI>1)or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and E31(GetSpellAbilityId())and GetSpellTargetUnit()==SFI)thenif(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and NPI>1)thenif IC1(SFI)==false thencall UnitRemoveAbility(SFI,1093818935)call UnitRemoveAbility(SFI,1093818937)call UnitRemoveAbility(SFI,1093818936)call UnitRemoveAbility(SFI,1093687119)call UnitRemoveAbility(SFI,1093873989)call UnitRemoveAbility(SFI,1110454329)call UnitRemoveAbility(SFI,1110459472)call UnitRemoveAbility(SFI,1110460494)call UnitRemoveAbility(SFI,1110460495)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BattleCryCaster.mdx",SFI,"overhead"))if CK3 thenif SUI==1 thencall IA1(SFI,1093818935)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818935,false)call IA1(SFI,1093874006)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093874006,false)endifif SUI==2 thencall IA1(SFI,1093818937)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818937,false)call IA1(SFI,1093874005)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093874005,false)endifif SUI==3 thencall IA1(SFI,1093818936)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818936,false)call IA1(SFI,1093874007)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093874007,false)endifelsecall IA1(SFI,1093687119)call SetUnitAbilityLevel(SFI,1093687119,SUI)call UnitMakeAbilityPermanent(SFI,true,1093687119)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093687119,false)endifendifset t=nullset SFI=nullreturn falseendfunctionfunction ST3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit I01local integer SUI=GetUnitAbilityLevel(SFI,1093752648)call TriggerRegisterTimerEvent(t,25,false)call TriggerRegisterTimerEvent(t,0.31,false)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SS3))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(34),(0))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullset SFI=nullendfunctionfunction SR3 takes nothing returns booleanif GetSpellAbilityId()==1093752648 and GetUnitTypeId(GetTriggerUnit())==1211117617 thencall ST3()endifreturn falseendfunctionfunction T01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SR3))set t=nullendfunctionfunction SP3 takes nothing returns nothingcall DD1(EOI,GetEnumUnit(),2)call P6I(EOI,GetEnumUnit(),1,E2I*75+25)endfunctionfunction SQ3 takes player p,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(p,1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer IB1local group g=NTI()set E2I=SUIset GK=K1[GetPlayerId(p)]call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),280,Condition(function CA1))call GroupAddUnit(g,P8I)set EOI=I01call ForGroup(g,function SP3)call NSI(g)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",P8I,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",P8I,"origin"))set I01=nullset g=nullendfunctionfunction SU3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real IH1=1000*0.035local real IZ1=UEI(x,y,QJI,QKI)local real IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)local real IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)local boolean ZXO=(LoadBoolean(LY,(S5I),(249)))call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,IZ1)if((LoadInteger(LY,(GetHandleId((P8I))),((4422))))==1)==true thenset ZXO=falsecall SaveBoolean(LY,(S5I),(249),(ZXO))endifif UTI(QJI,QKI,IV1,IW1)<=IH1 thenif ZXO thencall SQ3(p,P8I,SUI)endifcall KillUnit(IG1)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction T03 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093744944)local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747990353,GetUnitX(P7I),GetUnitY(P7I),UEI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I)))local boolean ZXO=NNI(GetSpellTargetUnit())==falsecall SaveBoolean(LY,(S5I),(249),(ZXO))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveInteger(LY,(S5I),(5),(SUI))call TriggerRegisterTimerEvent(t,0.035,true)call TriggerAddCondition(t,Condition(function SU3))set t=nullset P7I=nullset P8I=nullset IG1=nullendfunctionfunction TI3 takes nothing returns booleanif GetSpellAbilityId()==1093744944 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetTriggerUnit(),"weapon"))elsecall T03()endifendifreturn falseendfunctionfunction SQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function TI3))set t=nullendfunctionfunction T13 takes nothing returns booleanif((GetUnitTypeId(GetFilterUnit())==1848652103))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848652099))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848652088))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651828))thenreturn trueendifreturn falseendfunctionfunction TO3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit ZOOlocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,GetSpellAbilityId())local group g=NTI()call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(P7I),Condition(function T13))set ZOO=FirstOfGroup(g)call NSI(g)if GetSpellAbilityId()==1093748038 thencall IA1(I01,1093681473)call SetUnitAbilityLevel(I01,1093681473,SUI)elseif GetSpellAbilityId()==1093748037 thencall IA1(I01,1093681474)call SetUnitAbilityLevel(I01,1093681474,SUI)elseif GetSpellAbilityId()==1093748040 thencall IA1(I01,1093681475)call SetUnitAbilityLevel(I01,1093681475,SUI)elseif GetSpellAbilityId()==1093748041 thencall IA1(I01,1093681476)call SetUnitAbilityLevel(I01,1093681476,SUI)elseif GetSpellAbilityId()==1093748039 thencall IA1(I01,1093681477)call SetUnitAbilityLevel(I01,1093681477,SUI)endifcall IssueTargetOrder(I01,"bloodlust",P7I)if ZOO!=null and IC1(ZOO)==false thencall IssueTargetOrder(I01,"bloodlust",ZOO)endifset g=nullset P7I=nullset ZOO=nullset I01=nullendfunctionfunction T23 takes nothing returns booleanif GetSpellAbilityId()==1093748038 or GetSpellAbilityId()==1093748037 or GetSpellAbilityId()==1093748040 or GetSpellAbilityId()==1093748041 or GetSpellAbilityId()==1093748039 thencall TO3()endifreturn falseendfunctionfunction JO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function T23))set t=nullendfunctionfunction T33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit ZOO=(LoadUnitHandle(LY,(S5I),(2)))local real T43if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and T2I(GetOwningPlayer(GetEventDamageSource()))thencall SaveReal(LY,(S5I),(714),(((TimerGetElapsed(M)))*1.0))endifendifset T43=(LoadReal(LY,(S5I),(714)))if T43+3<(TimerGetElapsed(M))thenif(LoadInteger(LY,(S5I),(34)))==2 thencall SaveInteger(LY,(S5I),(34),(1))call SaveInteger(LY,(GetHandleId((ZOO))),((4327)),(2))call SetPlayerAbilityAvailable(GetOwningPlayer(ZOO),1093681463,true)endifelseif(LoadInteger(LY,(S5I),(34)))==1 thencall SaveInteger(LY,(S5I),(34),(2))call SaveInteger(LY,(GetHandleId((ZOO))),((4327)),(1))call SetPlayerAbilityAvailable(GetOwningPlayer(ZOO),1093681463,false)endifendifset t=nullset ZOO=nullreturn falseendfunctionfunction T53 takes unit ZOO returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerRegisterUnitEvent(t,ZOO,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,ZOO,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function T33))call SaveUnitHandle(LY,(S5I),(2),(ZOO))call SaveReal(LY,(S5I),(714),((0)*1.0))call SaveInteger(LY,(S5I),(34),(1))call SetPlayerAbilityAvailable(GetOwningPlayer(ZOO),1093681463,true)set t=nullendfunctionfunction T63 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110459185)>0endfunctionfunction T73 takes nothing returns nothingcall P6I(E3I,GetEnumUnit(),2,30)endfunctionfunction T83 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit ZOO=(LoadUnitHandle(LY,(S5I),(53)))local group g=NTI()set GK=ZOOset E3I=ZOOcall GroupEnumUnitsInRange(g,GetUnitX(ZOO),GetUnitY(ZOO),2000,Condition(function T63))call ForGroup(g,function T73)call NSI(g)set t=nullset g=nullset ZOO=nullreturn falseendfunctionfunction T93 takes nothing returns nothinglocal unit ZOO=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function T83))call SaveUnitHandle(LY,(S5I),(53),(ZOO))set ZOO=nullset t=nullendfunctionfunction TA3 takes nothing returns booleanreturn GetLearnedSkill()==1093681461 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction TB3 takes nothing returns booleanif IC1(GetFilterUnit())thenreturn falseendifif((GetUnitTypeId(GetFilterUnit())==1848652099))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848652088))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651828))thenreturn trueendifreturn falseendfunctionfunction TC3 takes nothing returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))local unit TD3=(LoadUnitHandle(LY,(S5I),(334)))local unit ZOO=(LoadUnitHandle(LY,(S5I),(333)))if TD3!=null and X0==false thencall UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,0))call UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,1))call UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,2))call UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,3))call UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,4))call UnitAddItem(ZOO,UnitRemoveItemFromSlot(TD3,5))endifendfunctionfunction TE3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local location BFO=GetUnitLoc(PKI)local boolexpr QL1=Condition(function TB3)local group Z51=NTI()local integer SUI=GetUnitAbilityLevel(PKI,1093681461)local integer S5I=GetHandleId(T4I)local integer TF3local unit ZOOlocal real Z43call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(PKI),QL1)call DestroyBoolExpr(QL1)if(SUI==1)thencall T93()endifset TF3=CountUnitsInGroup(Z51)if(TF3==1)thenset ZOO=FirstOfGroup(Z51)set Z43=GetUnitLifePercent(ZOO)set BFO=GetUnitLoc(ZOO)call ShowUnit(ZOO,false)call KillUnit(ZOO)if(SUI==2)thencall CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif(SUI==3)thencall CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif(SUI==4)thencall CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)endifcall SetUnitLifePercentBJ(bj_lastCreatedUnit,Z43)call SaveUnitHandle(LY,(S5I),(333),(bj_lastCreatedUnit))call TC3()endifcall NSI(Z51)endfunctionfunction J51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function TA3))call TriggerAddAction(t,function TE3)endfunctionfunction TG3 takes nothing returns booleanreturn GetLearnedSkill()==1093681464 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction TH3 takes nothing returns nothingcall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889776,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889776,true)+1)call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889777,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889777,true)+1)endfunctionfunction J61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function TG3))call TriggerAddAction(t,function TH3)endfunctionfunction TZ3 takes nothing returns booleanreturn GetSpellAbilityId()==1093681461endfunctionfunction TV3 takes nothing returns booleanif IC1(GetFilterUnit())thenreturn falseendifif((GetUnitTypeId(GetFilterUnit())==1848652103))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848652099))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848652088))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651828))thenreturn trueendifreturn falseendfunctionfunction TW3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local location BFO=GetUnitLoc(PKI)local boolexpr QL1=Condition(function TV3)local group Z51=NTI()local integer SUI=GetUnitAbilityLevel(PKI,1093681461)local integer S5I=GetHandleId(T4I)local boolean TX3local unit ZOOcall GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(PKI),QL1)set TX3=CountUnitsInGroup(Z51)==0if(SUI==1 and TX3)thencall CreateNUnitsAtLoc(1,1848651828,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call SaveUnitHandle(LY,(S5I),(333),(bj_lastCreatedUnit))call TC3()call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif(SUI==2 and TX3)thencall CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call SaveUnitHandle(LY,(S5I),(333),(bj_lastCreatedUnit))call TC3()call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif(SUI==3 and TX3)thencall CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call SaveUnitHandle(LY,(S5I),(333),(bj_lastCreatedUnit))call TC3()call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif(SUI==4 and TX3)thencall CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),BFO,bj_UNIT_FACING)call SaveUnitHandle(LY,(S5I),(333),(bj_lastCreatedUnit))call TC3()call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call T53(bj_lastCreatedUnit)elseif TX3==false thenset ZOO=FirstOfGroup(Z51)call AddSpecialEffectTargetUnitBJ("chest",ZOO,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")call SetUnitState(ZOO,UNIT_STATE_LIFE,GetUnitState(ZOO,UNIT_STATE_MAX_LIFE))call SetUnitPosition(ZOO,GetUnitX(PKI),GetUnitY(PKI))set ZOO=nullendifcall SetUnitAbilityLevel(bj_lastCreatedUnit,1093679449,SUI)call NSI(Z51)call RemoveLocation(BFO)set PKI=nullset T4I=nullset BFO=nullset Z51=nullendfunctionfunction TY3 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local player T4I=GetOwningPlayer(PKI)local location BFO=GetUnitLoc(PKI)local boolexpr QL1=Condition(function TV3)local group Z51=NTI()local integer SUI=GetUnitAbilityLevel(PKI,1093681461)local integer S5I=GetHandleId(T4I)local boolean TX3local unit ZOOcall GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(PKI),QL1)if CountUnitsInGroup(Z51)!=0 thenset ZOO=FirstOfGroup(Z51)if ZOO!=null and((LoadInteger(LY,(GetHandleId((ZOO))),((4327))))==1)==true thencall PJI(PKI)call PZI(T4I,GetObjectName(1848659278))endifendifcall NSI(Z51)call RemoveLocation(BFO)endfunctionfunction J31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TZ3))call TriggerAddAction(t,function TW3)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function TZ3))call TriggerAddAction(t,function TY3)endfunctionfunction TJ3 takes nothing returns booleanreturn GetSpellAbilityId()==1093681463endfunctionfunction TK3 takes nothing returns nothinglocal unit ZOO=GetTriggerUnit()local unit Z2O=K1[GetPlayerId(GetOwningPlayer(ZOO))]call SetUnitX(ZOO,GetUnitX(Z2O)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))call SetUnitY(ZOO,GetUnitY(Z2O)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))endfunctionfunction J41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TJ3))call TriggerAddAction(t,function TK3)endfunctionfunction TL3 takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==1311781171 or GetUnitTypeId(GetTriggerUnit())==1311781199 or GetUnitTypeId(GetTriggerUnit())==1311781173 or GetUnitTypeId(GetTriggerUnit())==1311781172)and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction TM3 takes nothing returns nothinglocal unit ZOO=(LoadUnitHandle(LY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(333)))call KillUnit(ZOO)endfunctionfunction J81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TL3))call TriggerAddAction(t,function TM3)endfunctionfunction TN3 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call SCI(P7I,4343,5)call UnitAddAbility(I01,1093748570)call IssueTargetOrder(I01,"ensnare",P8I)set I01=nullendfunctionfunction TS3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call TN3(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction TT3 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function TS3))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction TR3 takes nothing returns nothinglocal unit P7I=GetAttacker()if GetUnitTypeId(P7I)!=1848652103 and GetUnitTypeId(P7I)!=1848652099 thenreturnendifif((LoadInteger(LY,(GetHandleId((P7I))),((4342))))==1)==false and((LoadInteger(LY,(GetHandleId((P7I))),((4343))))==1)==false and GetRandomInt(0,100)<20 thencall SCI(P7I,4342,.3)call TT3()endifreturnendfunctionfunction TP3 takes nothing returns booleanreturn GetUnitTypeId(GetAttacker())==1848652103 or GetUnitTypeId(GetAttacker())==1848652099 or GetUnitTypeId(GetAttacker())==1848652088 or GetUnitTypeId(GetAttacker())==1848651828endfunctionfunction TQ3 takes nothing returns nothinglocal unit ZOO=GetAttacker()local unit Z2O=K1[GetPlayerId(GetOwningPlayer(ZOO))]if((GetUnitX(Z2O)-GetUnitX(ZOO))*(GetUnitX(Z2O)-GetUnitX(ZOO))+(GetUnitY(Z2O)-GetUnitY(ZOO))*(GetUnitY(Z2O)-GetUnitY(ZOO))>=(1100*1100))thencall IssueImmediateOrder(ZOO,"stop")elsecall TR3()endifendfunctionfunction J21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function TP3))call TriggerAddAction(t,function TQ3)endfunctionfunction TU3 takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==1848652103 or GetUnitTypeId(GetTriggerUnit())==1848652099 or GetUnitTypeId(GetTriggerUnit())==1848652088 or GetUnitTypeId(GetTriggerUnit())==1848651828)and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction R03 takes nothing returns nothinglocal location I2Oif TII(GetOwningPlayer(GetTriggerUnit()))thenset I2O=GetRectCenter(O4)elseset I2O=GetRectCenter(S3)endifif F41(GetEnumItem())==false thencall SetItemPositionLoc(GetEnumItem(),I2O)endifcall RemoveLocation(I2O)set I2O=nullendfunctionfunction RI3 takes nothing returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))local unit TD3=(LoadUnitHandle(LY,(S5I),(334)))local unit ZOO=(LoadUnitHandle(LY,(S5I),(333)))local integer xlocal integer yif TD3==null thenif TII(GetOwningPlayer(ZOO))thenset x=-6390set y=-5615elseset x=5875set y=5000endifset TD3=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657158,x,y,0)call SaveUnitHandle(LY,(S5I),(334),(TD3))endifif F41(GetEnumItem())==false thencall UnitAddItem(TD3,GetEnumItem())endifcall ShowUnit(TD3,true)endfunctionfunction R13 takes nothing returns nothinglocal integer E81=EB1(GetEnumItem())if GetWidgetLife(GetEnumItem())>0 and E81!=VL0 thenif X0==true thencall R03()elsecall RI3()endifelseendifendfunctionfunction RO3 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())local rect R23=RectFromCenterSizeBJ(BFO,400.00,400.00)local unit Z2O=K1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]call SetHeroXP(Z2O,(GetHeroXP(Z2O)-(GetHeroXP(Z2O)/(125-(25*GetUnitAbilityLevel(Z2O,1093681461))))),false)call P6I(GetKillingUnit(),Z2O,3,0.1*GetUnitState(Z2O,UNIT_STATE_MAX_LIFE))call EnumItemsInRectBJ(R23,function R13)call RemoveLocation(BFO)call RemoveRect(R23)endfunctionfunction J71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TU3))call TriggerAddAction(t,function RO3)endfunctionfunction R33 takes nothing returns booleanif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif T2I(GetOwningPlayer(GetEventDamageSource()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true and EWI==false thenif EXI==false thencall UnitRemoveAbility(GetTriggerUnit(),1110458957)call S0I(GetTriggeringTrigger())endifendifif EXI==true thenset EXI=falseendifif EWI==true thenset EWI=falseendifelsecall S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction R43 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function R33))set P8I=nullset t=nullendfunctionfunction R53 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1110458957)>0 and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0endfunctionfunction R63 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=NTI()call GroupEnumUnitsInRange(g,x,y,1000,Condition(function R53))call ForGroup(g,function R43)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset g=nullreturn falseendfunctionfunction R73 takes nothing returns nothingif E4I==1 or E4I==2 thencall P6I(GetTriggerUnit(),GetEnumUnit(),2,70+10*E5I)endifif E4I==1 or E4I==3 thencall P6I(GetTriggerUnit(),GetEnumUnit(),1,70+10*E5I)endifendfunctionfunction R83 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit I01=CreateUnit(GetOwningPlayer(P7I),1747990362,x,y,0)local group g=NTI()local unit uset E5I=GetUnitAbilityLevel(P7I,1093747009)if((LoadInteger(LY,(GetHandleId((P7I))),((4270))))==1)==false thencall SetUnitTimeScale(I01,2.5)call UnitApplyTimedLife(I01,1112820806,2)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(I01,1093747001)call SetUnitAbilityLevel(I01,1093747001,GetUnitAbilityLevel(P7I,1093747009))call IssueImmediateOrder(I01,"stomp")call GroupEnumUnitsInRange(g,x,y,500,Condition(function C51))set E4I=1call ForGroup(g,function R73)call NSI(g)call TriggerRegisterTimerEvent(t,0.65,false)call TriggerAddCondition(t,Condition(function R63))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))elsecall SetUnitTimeScale(I01,2.5)call UnitApplyTimedLife(I01,1112820806,2)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(I01,1093747001)call SetUnitAbilityLevel(I01,1093747001,GetUnitAbilityLevel(P7I,1093747009))call IssueImmediateOrder(I01,"stomp")call GroupEnumUnitsInRange(g,x,y,500,Condition(function C51))set E4I=2call ForGroup(g,function R73)call TriggerRegisterTimerEvent(t,0.65,false)call TriggerAddCondition(t,Condition(function R63))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)set u=(EVI[GetPlayerId(GetOwningPlayer((P7I)))])call IssueImmediateOrder(u,"stop")set x=GetUnitX(u)set y=GetUnitY(u)set I01=CreateUnit(GetOwningPlayer(P7I),1747990362,x,y,0)call SetUnitTimeScale(I01,2.5)call UnitApplyTimedLife(I01,1112820806,2)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call IA1(I01,1093747001)call SetUnitAbilityLevel(I01,1093747001,GetUnitAbilityLevel(P7I,1093747009))call IssueImmediateOrder(I01,"stomp")call GroupEnumUnitsInRange(g,x,y,500,Condition(function C51))set E4I=3call ForGroup(g,function R73)call NSI(g)call TriggerRegisterTimerEvent(t,0.65,false)call TriggerAddCondition(t,Condition(function R63))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SetUnitAnimationByIndex(u,3)endifset t=nullset P7I=nullset I01=nullset g=nullendfunctionfunction R93 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IYO=(LoadUnitHandle(LY,(S5I),(335)))local boolean RA3=(LoadBoolean(LY,(S5I),(336)))if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thencall SaveInteger(LY,(GetHandleId((P7I))),((4269)),(2))call SaveBoolean(LY,(GetHandleId(IYO)),(337),(true))if RA3 thencall ShowUnit(IYO,false)call KillUnit(IYO)elsecall ShowUnit(IYO,false)call UnitRemoveAbility(IYO,1097625443)call ShowUnit(IYO,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elseif RA3 thencall SetUnitFacing(IYO,GetUnitFacing(P7I))endifendifset t=nullset IYO=nullreturn falseendfunctionfunction RB3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit IYOlocal boolean KillImagecall SaveBoolean(LY,(S5I),(336),(false))if((LoadInteger(LY,(GetHandleId((P7I))),((4270))))==1)==false thencall SaveBoolean(LY,(S5I),(336),(true))set IYO=CreateUnit(GetOwningPlayer(P7I),1747990357,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call IA1(IYO,1097625443)call IA1(IYO,1097167980)call SetUnitPosition(IYO,GetUnitX(P7I),GetUnitY(P7I))call SetUnitScale(IYO,1.4,1.4,1.4)elseset IYO=(EVI[GetPlayerId(GetOwningPlayer((P7I)))])call UnitAddAbility(IYO,1097625443)endifcall IssueImmediateOrder(IYO,"stop")call SaveInteger(LY,(GetHandleId((P7I))),((4269)),(1))call SetUnitAnimation(IYO,"spell slam")call QueueUnitAnimation(IYO,"spell slam")call SaveUnitHandle(LY,(S5I),(335),(IYO))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function R93))call SaveUnitHandle(LY,(S5I),(335),(IYO))set t=nullset P7I=nullset IYO=nullendfunctionfunction RC3 takes nothing returns booleanlocal integer CCOif GetSpellAbilityId()==1093747009 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_FINISH thencall R83()elsecall RB3()endifendifreturn falseendfunctionfunction TU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function RC3))set t=nullendfunctionfunction RD3 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif GetUnitAbilityLevel(GetEnumUnit(),1093747521)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093747521)call UnitRemoveAbility(GetEnumUnit(),1110458960)endifif GetUnitAbilityLevel(GetEnumUnit(),1093747513)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093747513)call UnitRemoveAbility(GetEnumUnit(),1110458960)endifif GetUnitAbilityLevel(GetEnumUnit(),1093747522)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093747522)call UnitRemoveAbility(GetEnumUnit(),1110458960)endifif GetUnitAbilityLevel(GetEnumUnit(),1093747523)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093747523)call UnitRemoveAbility(GetEnumUnit(),1110458960)endifcall GA1(GetEnumUnit(),0)endfunctionfunction RE3 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif E6I==1 thenif GetUnitAbilityLevel(GetEnumUnit(),1093747521)==0 thencall IA1(GetEnumUnit(),1093747521)endifelseif E6I==2 thenif GetUnitAbilityLevel(GetEnumUnit(),1093747513)==0 thencall IA1(GetEnumUnit(),1093747513)endifelseif E6I==3 thenif GetUnitAbilityLevel(GetEnumUnit(),1093747522)==0 thencall IA1(GetEnumUnit(),1093747522)endifelseif E6I==4 thenif GetUnitAbilityLevel(GetEnumUnit(),1093747523)==0 thencall IA1(GetEnumUnit(),1093747523)endifendifif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall GA1(GetEnumUnit(),R2I((I2R(GetHeroAgi(GetEnumUnit(),true))/7)*I2R(E6I)/4))endifendfunctionfunction RF3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group RG3=(LoadGroupHandle(LY,(S5I),(340)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()local group g2if P7I==null or GetUnitTypeId(P7I)!=1328558389 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call NSI(RG3)call NSI(g)return falseendifset GK=P7Iset E6I=GetUnitAbilityLevel(P7I,1093747524)call GroupEnumUnitsInRange(g,x,y,300,Condition(function CA1))if((LoadInteger(LY,(GetHandleId((P7I))),((4270))))==1)==true thenset g2=NTI()call GroupEnumUnitsInRange(g2,GetUnitX((EVI[GetPlayerId(GetOwningPlayer((P7I)))])),GetUnitY((EVI[GetPlayerId(GetOwningPlayer((P7I)))])),300,Condition(function CA1))call GroupAddGroup(g2,g)call NSI(g2)set g2=nullendifcall GroupRemoveGroup(g,RG3)call ForGroup(RG3,function RD3)if IC1(P7I)==false thencall ForGroup(g,function RE3)endifcall SaveGroupHandle(LY,(S5I),(340),(g))call NSI(RG3)set t=nullset P7I=nullset RG3=nullreturn falseendfunctionfunction RH3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer ilocal player pcall IA1(P7I,1093747537)call TriggerRegisterTimerEvent(t,0.3,true)call TriggerAddCondition(t,Condition(function RF3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(340),(NTI()))call SaveTriggerHandle(LY,(GetHandleId(P7I)),(338),(t))call SaveBoolean(LY,(GetHandleId(P7I)),(339),(true))set i=0loopexitwhen i>5set p=BO[i]call SetPlayerAbilityAvailable(p,1093747521,false)call SetPlayerAbilityAvailable(p,1093747513,false)call SetPlayerAbilityAvailable(p,1093747522,false)call SetPlayerAbilityAvailable(p,1093747523,false)set p=CO[i]call SetPlayerAbilityAvailable(p,1093747521,false)call SetPlayerAbilityAvailable(p,1093747513,false)call SetPlayerAbilityAvailable(p,1093747522,false)call SetPlayerAbilityAvailable(p,1093747523,false)set i=i+1endloopset t=nullset P7I=nullendfunctionfunction RZ3 takes nothing returns booleanif GetLearnedSkill()==1093747524 and GetUnitAbilityLevel(GetTriggerUnit(),1093747524)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall RH3()endifreturn falseendfunctionfunction TQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function RZ3))set t=nullendfunctionfunction RV3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)call BP1(P8I)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction RW3 takes nothing returns nothinglocal real x1=E9Ilocal real y1=EAIlocal real x2=EBIlocal real y2=ECIlocal real x3=GetUnitX(GetEnumUnit())local real y3=GetUnitY(GetEnumUnit())local real u=((x3-x1)*(x2-x1)+(y3-y1)*(y2-y1))/((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))local real x4=x1+u*(x2-x1)local real y4=y1+u*(y2-y1)local real VZ3=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*0.35/2local trigger tlocal integer S5Ilocal integer RX3=GetUnitAbilityLevel(E8I,1093818952)if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall SetUnitPosition(GetEnumUnit(),x4,y4)elsecall SetUnitX(GetEnumUnit(),x4)call SetUnitY(GetEnumUnit(),y4)endifif RX3>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call BT1(GetEnumUnit())call TriggerRegisterTimerEvent(t,RX3+3,false)call TriggerRegisterDeathEvent(t,GetEnumUnit())call TriggerAddCondition(t,Condition(function RV3))call SaveUnitHandle(LY,(S5I),(2),(E8I))call SaveUnitHandle(LY,(S5I),(17),(GetEnumUnit()))set t=nullendifcall IssueTargetOrder(E7I,"slow",GetEnumUnit())call P6I(E8I,GetEnumUnit(),1,VZ3)call P6I(E8I,GetEnumUnit(),2,VZ3)endfunctionfunction RY3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local real a0=(LoadReal(LY,(S5I),(341)))local integer i=0local real xlocal real ylocal group g=NTI()local group PR2=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093746993)local integer MKO=(LoadInteger(LY,(S5I),(34)))local integer RJ3=1093747525if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093818952)set RJ3=1093818953endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set GK=P7Iset E8I=P7Iset E7I=CreateUnit(GetOwningPlayer(P7I),1697656901,x0,y0,0)call IA1(E7I,RJ3)call SetUnitAbilityLevel(E7I,RJ3,SUI)loopexitwhen i>MKOset x=x0+i*200*Cos(a0)set y=y0+i*200*Sin(a0)call U7I("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",x,y,1.6)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y-250))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x+250,y))call UPI(x,y,300)call GroupEnumUnitsInRange(g,x,y,325,Condition(function CA1))call GroupAddGroup(g,PR2)call GroupClear(g)set i=i+1endloopset E9I=x0set EAI=y0set EBI=xset ECI=ycall ForGroup(PR2,function RW3)call NSI(PR2)call NSI(g)set t=nullset P7I=nullreturn falseendfunctionfunction RK3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real a=(LoadReal(LY,(S5I),(137)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local real a0local real RL3local real RM3local real RN3local real RS3local real RT3local real RR3local real RP3local real RQ3local real RU3local real P03local real PI3local real P13local real xlocal real ylocal ubersplat AR1local integer NPI=GetTriggerEvalCount(t)local integer MKO=(LoadInteger(LY,(S5I),(34)))set x=x0+200*NPI*Cos(a)set y=y0+200*NPI*Sin(a)set AR1=CreateUbersplat(x,y,"THNE",255,255,255,255,false,false)call SetUbersplatRenderAlways(AR1,true)set RL3=x+250*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))set RM3=y+250*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))set RN3=x+250*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))set RS3=y+250*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))set RT3=x-125*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))set RR3=y-125*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))set RP3=x-125*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))set RQ3=y-125*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))set RU3=xset P03=yset PI3=xset P13=ycall I41(GetOwningPlayer(P7I),4,x,y,500)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",RL3,RM3))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",RN3,RS3))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",RT3,RR3))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",RP3,RQ3))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",RU3,P03))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PI3,P13))if GetTriggerEvalCount(t)>MKO thenset x0=(LoadReal(LY,(S5I),(282)))set y0=(LoadReal(LY,(S5I),(283)))set a0=(LoadReal(LY,(S5I),(341)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,false)call TriggerAddCondition(t,Condition(function RY3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(282),((x0)*1.0))call SaveReal(LY,(S5I),(283),((y0)*1.0))call SaveReal(LY,(S5I),(341),((a0)*1.0))call SaveInteger(LY,(S5I),(34),(MKO))endifset t=nullset P7I=nullreturn falseendfunctionfunction PO3 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local real d=QNI(x,y,GetUnitX(P7I),GetUnitY(P7I))local integer MKO=11call TriggerRegisterTimerEvent(t,0.22,true)call TriggerAddCondition(t,Condition(function RK3))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(282),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(283),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(341),((a)*1.0))call SaveInteger(LY,(S5I),(34),(MKO))set t=nullset P7I=nullendfunctionfunction P23 takes nothing returns booleanif GetSpellAbilityId()==1093746993 or GetSpellAbilityId()==1093818952 thencall PO3()endifreturn falseendfunctionfunction TR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function P23))set t=nullendfunctionfunction P33 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093815881)call UnitAddAbility(P7I,1093815881)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction P43 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function P33))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendfunctionfunction P53 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call G21(P7I,0)set t=nullset P7I=nullreturn falseendfunctionfunction P63 takes unit P7I,unit IYO,unit P73,integer P83,integer P93 returns nothinglocal trigger tlocal integer S5Ilocal unit I01call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",IYO,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P7I,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P7I,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P7I,"hand,left"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P7I,"hand,right"))call ShowUnit(IYO,false)call KillUnit(IYO)call KillUnit(P73)call SaveInteger(LY,(GetHandleId((P7I))),((4270)),(2))if P93>0 or P83>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,9.1,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function P53))call SaveUnitHandle(LY,(S5I),(2),(P7I))set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093748537)call SetUnitAbilityLevel(I01,1093748537,P93)call IssueTargetOrder(I01,"bloodlust",P7I)call G21(P7I,P83)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\RadianceHands.mdx",P7I,"weapon")))endifset t=nullset I01=nullendfunctionfunction PA3 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),EDI)==false thenif IsUnitIllusion(GetEnumUnit())==false thenif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thenset EHI=EHI+(EGI*10)set EZI=EZI+5elseset EHI=EHI+(EGI*3)set EZI=EZI+1endifendifcall GroupAddUnit(EDI,GetEnumUnit())call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",GetEnumUnit(),"chest"))set EWI=trueset EXI=truecall P6I(EEI,GetEnumUnit(),1,EFI)set EWI=falseset EXI=falseendifendfunctionfunction PB3 takes real PC3,real PD3,real PE3,real PF3,real PG3,real PH3 returns reallocal real PZ3local real PV3local real PW3local real PX3local real PY3local real PJ3local real PK3local real REFLECTED_SCALED_V_Xlocal real REFLECTED_SCALED_V_Ylocal real PL3local real PM3local real PN3local real PS3local real PT3local real PR3local real PP3local real PQ3set PN3=PE3-PG3set PS3=PF3-PH3set PT3=-1*PS3set PR3=PN3set PP3=SquareRoot(PT3*PT3+PR3*PR3)set PT3=PT3/PP3set PR3=PR3/PP3set PZ3=PC3-PE3set PV3=PD3-PF3set PW3=SquareRoot(PZ3*PZ3+PV3*PV3)set PX3=PZ3/PW3set PY3=PV3/PW3set PQ3=PZ3*PT3+PV3*PR3set PJ3=-1*PC3+2*PE3+2*PT3*PQ3set PK3=-1*PD3+2*PF3+2*PR3*PQ3set PL3=PG3+PE3-PJ3set PM3=PH3+PF3-PK3return PL3endfunctionfunction PU3 takes real PC3,real PD3,real PE3,real PF3,real PG3,real PH3 returns reallocal real PZ3local real PV3local real PW3local real PX3local real PY3local real PJ3local real PK3local real REFLECTED_SCALED_V_Xlocal real REFLECTED_SCALED_V_Ylocal real PL3local real PM3local real PN3local real PS3local real PT3local real PR3local real PP3local real PQ3set PN3=PE3-PG3set PS3=PF3-PH3set PT3=-1*PS3set PR3=PN3set PP3=SquareRoot(PT3*PT3+PR3*PR3)set PT3=PT3/PP3set PR3=PR3/PP3set PZ3=PC3-PE3set PV3=PD3-PF3set PW3=SquareRoot(PZ3*PZ3+PV3*PV3)set PX3=PZ3/PW3set PY3=PV3/PW3set PQ3=PZ3*PT3+PV3*PR3set PJ3=-1*PC3+2*PE3+2*PT3*PQ3set PK3=-1*PD3+2*PF3+2*PR3*PQ3set PL3=PG3+PE3-PJ3set PM3=PH3+PF3-PK3return PM3endfunctionfunction Q03 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IYO=(LoadUnitHandle(LY,(S5I),(335)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=GetUnitX(IYO)local real y2=GetUnitY(IYO)local real x3local real y3local real alocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group glocal real dlocal integer SUI=GetUnitAbilityLevel(P7I,1093747000)local real QI3=(LoadReal(LY,(S5I),(342)))local real GW1=(TimerGetElapsed(M))call SetUnitX(I01,GetUnitX(IYO))call SetUnitY(I01,GetUnitY(IYO))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(IYO,false)call KillUnit(IYO)call KillUnit(I01)call SaveInteger(LY,(GetHandleId((P7I))),((4270)),(2))if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093747000 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093747000,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815881,false)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093815881 thencall IssueImmediateOrder(IYO,"stop")call SaveBoolean(LY,(S5I),(249),(true))call SetUnitAnimationByIndex(IYO,3)call P43(GetTriggerUnit())elseif GetSpellAbilityId()==1093815371 thenif IssueImmediateOrder(P7I,"charm")thencall UnitRemoveAbility(IYO,1093815371)endifendifelseif QNI(x1,y1,x2,y2)<100 thencall P63(P7I,IYO,I01,(LoadInteger(LY,(S5I),(344))),(LoadInteger(LY,(S5I),(345))))call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093747000 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093747000,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815881,false)elseif GetTriggerEvalCount(t)>400 or(LoadBoolean(LY,(S5I),(249)))==true thencall IA1(IYO,1097625443)if GetTriggerEvalCount(t)==401 and(LoadBoolean(LY,(S5I),(249)))==false thencall IssueImmediateOrder(IYO,"stop")call SetUnitAnimationByIndex(IYO,3)endifset g=NTI()set EGI=SUIset EHI=(LoadInteger(LY,(S5I),(344)))set EZI=(LoadInteger(LY,(S5I),(345)))set EFI=30+30*SUIset EEI=P7Iset GK=P7Iset EDI=PR2call GroupEnumUnitsInRange(g,GetUnitX(IYO),GetUnitY(IYO),300,Condition(function CA1))call ForGroup(g,function PA3)call NSI(g)set g=nullcall SaveInteger(LY,(S5I),(344),(EHI))call SaveInteger(LY,(S5I),(345),(EZI))if((LoadInteger(LY,(GetHandleId((P7I))),((4269))))==1)==false thenset a=Atan2(y1-y2,x1-x2)call SetUnitFacing(IYO,a*bj_RADTODEG)set x3=GetUnitX(IYO)+12*Cos(a)set y3=GetUnitY(IYO)+12*Sin(a)call SetUnitX(IYO,PTI(x3))call SetUnitY(IYO,PUI(y3))call SaveReal(LY,(S5I),(282),((x1)*1.0))call SaveReal(LY,(S5I),(283),((y1)*1.0))endifelsecall SetUnitMoveSpeed(IYO,GetUnitMoveSpeed(P7I))call UnitRemoveAbility(IYO,1097625443)set g=NTI()set EGI=SUIset EHI=(LoadInteger(LY,(S5I),(344)))set EZI=(LoadInteger(LY,(S5I),(345)))set EFI=30+30*SUIset EEI=P7Iset GK=P7Iset EDI=PR2call GroupEnumUnitsInRange(g,GetUnitX(IYO),GetUnitY(IYO),300,Condition(function CA1))call ForGroup(g,function PA3)call NSI(g)set g=nullcall SaveInteger(LY,(S5I),(344),(EHI))call SaveInteger(LY,(S5I),(345),(EZI))if x0!=x1 or y0!=y1 thenset QI3=GW1call SaveReal(LY,(S5I),(342),((QI3)*1.0))endifif((LoadInteger(LY,(GetHandleId((P7I))),((4269))))==1)==false thenif QI3==GW1 thenset x3=PB3(x0,y0,x1,y1,x2,y2)set y3=PU3(x0,y0,x1,y1,x2,y2)set a=Atan2(y3-y2,x3-x2)*bj_RADTODEGcall SaveReal(LY,(S5I),(282),((x1)*1.0))call SaveReal(LY,(S5I),(283),((y1)*1.0))endifif(QI3+0.3)<GW1 thencall SaveInteger(LY,(S5I),(343),(1))elseif(QI3+0.3)>GW1 and(LoadInteger(LY,(S5I),(343)))==1 thencall SaveInteger(LY,(S5I),(343),(2))elseif(LoadInteger(LY,(S5I),(343)))==3 thencall SaveInteger(LY,(S5I),(343),(1))endifelsecall SaveInteger(LY,(S5I),(343),(3))endifendifset t=nullset P7I=nullset IYO=nullset PR2=nullset I01=nullreturn falseendfunctionfunction Q13 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x0=GetUnitX(P7I)local real y0=GetUnitY(P7I)local location l=GetSpellTargetLoc()local real lx=GetLocationX(l)local real ly=GetLocationY(l)local real a=Atan2(ly-y0,lx-x0)local real d=QDI(QNI(x0,y0,lx,ly),300)local real x1=PTI(x0+d*Cos(a))local real y1=PUI(y0+d*Sin(a))local unit IYO=CreateUnit(GetOwningPlayer(P7I),1747990357,x1,y1,(a*bj_RADTODEG)-180)local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429572,x1,y1,(a*bj_RADTODEG)-180)call SetUnitMoveSpeed(IYO,GetUnitMoveSpeed(P7I))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",IYO,"chest"))if GetUnitAbilityLevel(P7I,1093747524)>0 thencall IA1(IYO,1093747537)endifif GetUnitAbilityLevel(P7I,1093747009)==0 thencall UnitRemoveAbility(IYO,1093815371)endifcall UnitAddAbility(P7I,1093815881)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093747000,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815881,true)call RemoveLocation(l)set EVI[GetPlayerId(GetOwningPlayer(P7I))]=IYOcall SaveInteger(LY,(GetHandleId((P7I))),((4270)),(1))call IA1(IYO,1098282348)call IA1(IYO,1097167980)if(LoadBoolean(LY,(GetHandleId(P7I)),(339)))==true thencall TriggerEvaluate((LoadTriggerHandle(LY,(S5I),(338))))endifcall TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Q03))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(335),(IYO))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(282),((x0)*1.0))call SaveReal(LY,(S5I),(283),((y0)*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveInteger(LY,(S5I),(343),(2))call SaveReal(LY,(S5I),(342),(((TimerGetElapsed(M))-5)*1.0))call SaveBoolean(LY,(S5I),(249),(false))set t=nullset P7I=nullset IYO=nullset I01=nullendfunctionfunction QO3 takes nothing returns booleanif GetSpellAbilityId()==1093747000 thencall Q13()endifreturn falseendfunctionfunction TP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QO3))call Q1I(1093748537)set t=nullendfunctionfunction Q23 takes nothing returns nothinglocal unit P8I=GetOrderTargetUnit()local real xlocal real yif GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER thenset x=GetUnitX(GetOrderTargetUnit())set y=GetUnitY(GetOrderTargetUnit())elseset x=GetOrderPointX()set y=GetOrderPointY()endifif QNI(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),x,y)<700 thencall IO1(ZE,x,y)endifendfunctionfunction Q33 takes nothing returns booleanif GetIssuedOrderId()==852040 thencall Q23()endifreturn falseendfunctionfunction Q43 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Condition(function ULI))call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function ULI))call TriggerAddCondition(t,Condition(function Q33))set t=nullendfunctionfunction Q53 takes nothing returns booleanif GetLearnedSkill()==1093678658 and GetUnitAbilityLevel(GetTriggerUnit(),1093678658)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall Q43()endifreturn falseendfunctionfunction JC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Q53))set t=nullendfunctionfunction Q63 takes nothing returns booleanreturn(GetLearnedSkill()==1093681483 or GetLearnedSkill()==1093748313)and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction Q73 takes nothing returns nothingif(GetUnitAbilityLevel(GetTriggerUnit(),1093681483)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093748313)==1)thencall IA1(GetTriggerUnit(),1093752646)endifendfunctionfunction J91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Q63))call TriggerAddAction(t,function Q73)endfunctionfunction Q83 takes nothing returns booleanif(GetSpellAbilityId()==1093681485 or GetSpellAbilityId()==1093681459 or GetSpellAbilityId()==1093681460 or GetSpellAbilityId()==1093677652 or GetSpellAbilityId()==1093748314 or GetSpellAbilityId()==1093752646)thenreturn trueelseif GetSpellAbilityId()==1093681483 or GetSpellAbilityId()==1093748313 thenif GetUnitAbilityLevel(GetTriggerUnit(),1093752646)==0 thencall IA1(GetTriggerUnit(),1093752646)endifendifreturn falseendfunctionfunction Q93 takes nothing returns booleanif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)thenif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)thenif(GetUnitAbilityLevelSwapped(1093678162,GetFilterUnit())==0)thenreturn trueendifendifendifreturn falseendfunctionfunction QA3 takes nothing returns nothingcall IssueImmediateOrder(GetEnumUnit(),"locustswarm")endfunctionfunction QB3 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),300.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction QC3 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),450.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction QD3 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),600.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction QE3 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),750.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction QF3 takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==EKI and GetUnitTypeId(GetFilterUnit())==EJI and IC1(GetFilterUnit())==falseendfunctionfunction QG3 takes player p,integer RII,real x,real y returns nothinglocal group g=NTI()set EKI=pset EJI=RIIcall GroupEnumUnitsInRange(g,x,y,716,Condition(function QF3))call ForGroup(g,function QA3)call NSI(g)set g=nullendfunctionfunction QH3 takes nothing returns nothinglocal real x=GetUnitX(GetTriggerUnit())local real y=GetUnitY(GetTriggerUnit())local group Z51call DisableTrigger(EYI)set VN=trueif(GetSpellAbilityId()==1093681485)thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)call I41(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QB3)call RemoveUnit(GetTriggerUnit())call NSI(Z51)endifif(GetSpellAbilityId()==1093681459)thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)call I41(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QC3)call RemoveUnit(GetTriggerUnit())call NSI(Z51)endifif(GetSpellAbilityId()==1093681460)thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)call I41(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QD3)call RemoveUnit(GetTriggerUnit())call NSI(Z51)endifif(GetSpellAbilityId()==1093748314)thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)call I41(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QE3)call RemoveUnit(GetTriggerUnit())call NSI(Z51)endifif(GetSpellAbilityId()==1093677652)thenset Z51=NTI()set bj_groupEnumTypeId=1865429304call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)call ForGroup(Z51,function QA3)call NSI(Z51)set Z51=NTI()set bj_groupEnumTypeId=1865429042call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)call ForGroup(Z51,function QA3)call NSI(Z51)set Z51=NTI()set bj_groupEnumTypeId=1865429058call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)call ForGroup(Z51,function QA3)call NSI(Z51)set Z51=NTI()set bj_groupEnumTypeId=1865429314call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(GetTriggerUnit()),filterGetUnitsOfPlayerAndTypeId)call ForGroup(Z51,function QA3)call NSI(Z51)endifif(GetSpellAbilityId()==1093752646)thenset x=GetSpellTargetX()set y=GetSpellTargetY()call QG3(GetOwningPlayer(GetTriggerUnit()),1865429304,x,y)call QG3(GetOwningPlayer(GetTriggerUnit()),1865429042,x,y)call QG3(GetOwningPlayer(GetTriggerUnit()),1865429058,x,y)call QG3(GetOwningPlayer(GetTriggerUnit()),1865429314,x,y)endifset VN=falsecall EnableTrigger(EYI)endfunctionfunction QZ3 takes nothing returns nothinglocal integer id=GetUnitTypeId(GetTriggerUnit())local real x=GetUnitX(GetTriggerUnit())local real y=GetUnitY(GetTriggerUnit())local group Z51if id==1865429304 thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QB3)call NSI(Z51)endifif id==1865429042 thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QC3)call NSI(Z51)endifif id==1865429058 thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QD3)call NSI(Z51)endifif id==1865429314 thencall U7I("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,450,Condition(function Q93))call ForGroup(Z51,function QE3)call NSI(Z51)endifendfunctionfunction QV3 takes nothing returns booleanlocal integer id=GetUnitTypeId(GetTriggerUnit())if id==1865429304 or id==1865429042 or id==1865429058 or id==1865429314 thencall QZ3()endifreturn falseendfunctionfunction JA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(t,function QH3)call TriggerAddCondition(t,Condition(function Q83))call AM1("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav")set EYI=CreateTrigger()call UMI(EYI,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(EYI,Condition(function QV3))endfunctionfunction QW3 takes nothing returns nothinglocal real QWI=QLI(EMI,GetEnumUnit())local real PAI=ENIlocal real QX3=225if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==true thenset QX3=440endifif QWI>QX3 thenset PAI=PAI/2endifcall P6I(EMI,GetEnumUnit(),2,PAI)endfunctionfunction QY3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit QJ3=(LoadUnitHandle(LY,(S5I),(347)))local group g=NTI()local integer SUI=(LoadInteger(LY,(S5I),(5)))set GK=QJ3set EMI=QJ3set ENI=225+75*SUIcall GroupEnumUnitsInRange(g,GetUnitX(QJ3),GetUnitY(QJ3),500+25,Condition(function CV1))call ForGroup(g,function QW3)call NSI(g)set t=nullset QJ3=nullset g=nullreturn falseendfunctionfunction QK3 takes nothing returns booleanif GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and(GetUnitTypeId(GetFilterUnit())==1848651855 or GetUnitTypeId(GetFilterUnit())==1848651856 or GetUnitTypeId(GetFilterUnit())==1848651857 or GetUnitTypeId(GetFilterUnit())==1848651854)thenset ELI=ELI+1endifreturn falseendfunctionfunction QL3 takes nothing returns booleanlocal group g=NTI()set ELI=0call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function QK3))if ELI>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848657475)+": "+I2S(ELI))endifcall NSI(g)set g=nullreturn falseendfunctionfunction QM3 takes nothing returns booleanif((GetUnitTypeId(GetTriggerUnit())==1848651855))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())==1848651856))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())==1848651857))thenreturn trueendifif((GetUnitTypeId(GetTriggerUnit())==1848651854))thenreturn trueendifif GetUnitTypeId(GetTriggerUnit())==1865429304 or GetUnitTypeId(GetTriggerUnit())==1865429042 or GetUnitTypeId(GetTriggerUnit())==1865429058 or GetUnitTypeId(GetTriggerUnit())==1865429314 thenif RW0[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]thenendifendifreturn falseendfunctionfunction QN3 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())thenif((GetUnitTypeId(GetFilterUnit())==1848651855))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651856))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651857))thenreturn trueendifif((GetUnitTypeId(GetFilterUnit())==1848651854))thenreturn trueendifendifreturn falseendfunctionfunction QS3 takes nothing returns booleanreturn(GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502 or GetUnitTypeId(GetFilterUnit())==1211122767 or GetUnitTypeId(GetFilterUnit())==1311788343 or GetUnitTypeId(GetFilterUnit())==1311788354 or GetUnitTypeId(GetFilterUnit())==1311788355 or GetUnitTypeId(GetFilterUnit())==1311788367 or GetUnitTypeId(GetFilterUnit())==1311788353 or GetUnitTypeId(GetFilterUnit())==1311788375)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GK))endfunctionfunction QT3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit QJ3=(LoadUnitHandle(LY,(S5I),(347)))local group gif GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect(AddSpecialEffect("war3mapImported\\NewGroundEX.mdx",GetUnitX(QJ3),GetUnitY(QJ3)))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=QJ3call GroupEnumUnitsInRange(g,GetUnitX(QJ3),GetUnitY(QJ3),200,Condition(function QS3))if FirstOfGroup(g)!=null thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitExploded(QJ3,true)call KillUnit(QJ3)endifcall NSI(g)endifset t=nullset QJ3=nullset g=nullreturn falseendfunctionfunction QR3 takes nothing returns nothinglocal integer S5I=GetHandleId(GetOwningPlayer(GetTriggerUnit()))local group Z51=NTI()local integer QP3=(LoadInteger(LY,(S5I),(346)))local integer QQ3=0local unit QU3local integer UI3local unit WH1local integer U13local integer TGIlocal integer THIlocal trigger t=CreateTrigger()local unit SFI=K1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]local integer SUI=GetUnitAbilityLevel(SFI,1093678410)call GroupEnumUnitsInRect(Z51,bj_mapInitialPlayableArea,Condition(function QN3))call TriggerRegisterTimerEvent(t,0.4,true)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function QT3))call SaveUnitHandle(LY,(GetHandleId(t)),(347),(GetTriggerUnit()))set QP3=(QP3+1)call StartTimerBJ((LoadTimerHandle(LY,(S5I),(1500+QP3))),false,15000.00)call SaveUnitHandle(LY,(S5I),(1600+QP3),(GetTriggerUnit()))set QQ3=CountUnitsInGroup(Z51)if(QQ3>20)thenset UI3=99999set TGI=1set THI=QP3loopexitwhen TGI>THIset WH1=(LoadUnitHandle(LY,(S5I),(1600+TGI)))set U13=R2I(TimerGetRemaining((LoadTimerHandle(LY,(S5I),(1500+TGI)))))if(GetUnitState(WH1,UNIT_STATE_LIFE)>0 and U13<UI3)thenset QU3=WH1set UI3=U13endifset TGI=TGI+1endloopcall ExplodeUnitBJ(QU3)endifcall SaveInteger(LY,(S5I),(346),(QP3))call NSI(Z51)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function QY3))call SaveUnitHandle(LY,(S5I),(347),(GetTriggerUnit()))call SaveInteger(LY,(S5I),(5),(SUI))endfunctionfunction JB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function QL3))set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function QM3))call TriggerAddAction(t,function QR3)set t=nullendfunctionfunction UO3 takes nothing returns nothinglocal real QWI=QLI(ESI,GetEnumUnit())local real PAI=ETIif QWI>225 thenset PAI=ERIendifcall P6I(ESI,GetEnumUnit(),2,PAI)endfunctionfunction U23 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093678658)local real U33local real U43local group g=NTI()if SUI==1 thenset U33=500set U43=260elseif SUI==2 thenset U33=650set U43=300elseif SUI==3 thenset U33=850set U43=340elseif SUI==4 thenset U33=1150set U43=380endifset ETI=U33set ERI=U43set GK=P7Iset ESI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),525,Condition(function CA1))call ForGroup(g,function UO3)call NSI(g)set g=nullset P7I=nullendfunctionfunction U53 takes nothing returns booleanif GetSpellAbilityId()==1093678658 thencall U23()endifreturn falseendfunctionfunction JD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U53))set t=nullendfunctionfunction U63 takes nothing returns booleanreturn GetSpellAbilityId()==1093678645endfunctionfunction U73 takes nothing returns nothinglocal integer i=0local unit SFI=GetTriggerUnit()local item HLOlocal integer E81loopexitwhen i>5set HLO=UnitItemInSlot(SFI,i)set E81=F01(HLO)if E81==GK0 thencall DisableTrigger(LY0)set JK=GetItemPlayer(HLO)call RemoveItem(HLO)set VK=FD1(SFI,FR0[GJ0],i)call SetItemPlayer(VK,JK,false)call SetItemUserData(VK,1)call EnableTrigger(LY0)endifset i=i+1endloopset SFI=nullset HLO=nullendfunctionfunction U83 takes nothing returns nothinglocal integer TGI=0local integer THI=5local integer array U93local player array UA3local integer E81local item FH1call SaveReal(LY,(GetHandleId(GetTriggerUnit())),(785),((0)*1.0))call U73()set U93[0]=0set U93[1]=0set U93[2]=0set U93[3]=0set U93[4]=0set U93[5]=0call DisableTrigger(LY0)loopexitwhen TGI>THIset E81=F01(UnitItemInSlot(GetTriggerUnit(),TGI))if E81==VZ0 or E81==VV0 or E81==VW0 or E81==VX0 or E81==VY0 or E81==VJ0 or E81==V80 or E81==W00 or E81==WI0 or E81==W10 or E81==ZS0 or E81==WH0 or E81==WX0 or E81==X90 thenset U93[TGI]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),TGI))set UA3[TGI]=GetItemPlayer(UnitItemInSlot(GetTriggerUnit(),TGI))call RemoveItem(UnitItemInSlot(GetTriggerUnit(),TGI))endifset TGI=TGI+1endloopcall UnitResetCooldown(GetTriggerUnit())set TGI=0set THI=5loopexitwhen TGI>THIif U93[TGI]>0 thenset FH1=CreateItem(U93[TGI],0,0)call SetItemPlayer(FH1,UA3[TGI],false)call SetItemUserData(FH1,1)call UnitAddItem(GetTriggerUnit(),FH1)endifset TGI=TGI+1endloopcall EnableTrigger(LY0)set FH1=nullendfunctionfunction JH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function U63))call TriggerAddAction(t,function U83)endfunctionfunction UB3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local integer i=0local real a=0local real r=0local integer SUI=GetUnitAbilityLevel(SFI,1093681745)call IA1(I01,1093678406)call SetUnitAbilityLevel(I01,1093678406,SUI)loopexitwhen i>40exitwhen IssuePointOrder(I01,"stampede",x+r*Cos(a),y+r*Sin(a))set i=i+1set a=a+0.4set r=r+10endloopcall RemoveLocation(l)set SFI=nullset I01=nullset l=nullendfunctionfunction UC3 takes nothing returns booleanif GetSpellAbilityId()==1093681745 thencall UB3()endifreturn falseendfunctionfunction JF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UC3))set t=nullendfunctionfunction UD3 takes nothing returns booleanreturn(GetSpellAbilityId()==1093678137 or GetSpellAbilityId()==1093818178)and NNI(GetSpellTargetUnit())==falseendfunctionfunction UE3 takes nothing returns nothingcall UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())*80,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction JG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UD3))call TriggerAddAction(t,function UE3)endfunctionfunction UF3 takes nothing returns booleanreturn(RKI(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))endfunctionfunction UG3 takes nothing returns nothinglocal unit P7I=GKlocal unit P8I=HKlocal integer SUI=GetUnitAbilityLevel(P7I,1093678405)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093818177)endifcall P6I(P7I,P8I,1,50+75*SUI)set P7I=nullset P8I=nullendfunctionfunction UH3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=nulllocal group g=NTI()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local integer NPI=2if GetUnitAbilityLevel(P7I,1093678405)==0 thenset NPI=4endifset GK=P7Icall GroupEnumUnitsInRange(g,x,y,2500+25,Condition(function UF3))loopexitwhen FirstOfGroup(g)==null or NPI==0set P8I=AU1(g,x,y)set NPI=NPI-1call GroupRemoveUnit(g,P8I)call IJ1(P7I,P8I,1747993940,"UG3",1000,false)endloopcall NSI(g)set g=nullset P8I=nullset P7I=nullendfunctionfunction UZ3 takes nothing returns booleanif GetSpellAbilityId()==1093678405 or GetSpellAbilityId()==1093818177 thencall UH3()endifreturn falseendfunctionfunction JE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UZ3))set t=nullendfunctionfunction UV3 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==true thencall P6I(EPI,GetEnumUnit(),1,EQI/3)elsecall P6I(EPI,GetEnumUnit(),1,EQI)endifendfunctionfunction UW3 takes unit P7I,real x,real y,real r,real d returns nothinglocal group g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,r,Condition(function CZ1))set EPI=P7Iset EQI=dcall ForGroup(g,function UV3)call NSI(g)set g=nullendfunctionfunction UX3 takes nothing returns booleanif((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and RYI(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))thenreturn trueendifreturn falseendfunctionfunction UY3 takes unit SFI returns unitlocal unit P7I=nulllocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),275,Condition(function UX3))call GroupRemoveUnit(g,SFI)set P7I=GroupPickRandomUnit(g)call NSI(g)set GK=P7Iset P7I=nullset g=nullreturn GKendfunctionfunction UJ3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=0local real y2=0local real RM2local real RN2local real RS2local real RT2local real IV1local real IW1local location lif P8I!=null thenset x2=GetUnitX(P8I)set y2=GetUnitY(P8I)endifif P8I==null or QNI(x0,y0,x2,y2)>1000 thenset x2=x0set y2=y0endifset RM2=UEI(x1,y1,x2,y2)set RN2=QNI(x1,y1,x2,y2)set RS2=RN2/IMaxBJ((65-NPI),1)set RT2=(NPI-33)*(NPI-33)set IV1=x1+RS2*Cos(RM2*bj_DEGTORAD)set IW1=y1+RS2*Sin(RM2*bj_DEGTORAD)if NPI<65 thenif RNI(P7I)==false thencall SetUnitFlyHeight(P7I,775-RT2,0)endifcall SetUnitPosition(P7I,IV1,IW1)elseif RNI(P7I)==false thencall SetUnitFlyHeight(P7I,GetUnitDefaultFlyHeight(P7I),0)endifcall PauseUnit(P7I,false)call SetUnitPathing(P7I,true)call SetUnitPosition(P7I,x2,y2)call SaveInteger(LY,(GetHandleId((P7I))),((4268)),(2))set l=Location(x2,y2)call TerrainDeformationRippleBJ(0.2,true,l,1.00,300.00,96.00,1,64.00)call RemoveLocation(l)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(P7I),GetUnitY(P7I)))if IsUnitAlly(P7I,GetOwningPlayer(SFI))thenelseif(ES1((SFI),FR0[KJ0])!=null)thencall P6I(SFI,P7I,1,(0.2+0.15*(GetUnitAbilityLevel(SFI,1093682009)+1))*75*GetUnitAbilityLevel(SFI,1093681754))elsecall P6I(SFI,P7I,1,(0.2+0.15*GetUnitAbilityLevel(SFI,1093682009))*75*GetUnitAbilityLevel(SFI,1093681754))endifendifcall UPI(x2,y2,300)call UW3(SFI,x2,y2,300,75*GetUnitAbilityLevel(SFI,1093681754))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset P7I=nullset P8I=nullset l=nullreturn falseendfunctionfunction UK3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P7I=EUIlocal unit P8Ilocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real xlocal real ycall SetUnitAnimationByIndex(SFI,4)call PauseUnit(P7I,true)call SetUnitPathing(P7I,false)if RNI(P7I)==false thencall IA1(P7I,1097691750)call UnitRemoveAbility(P7I,1097691750)endifcall SaveInteger(LY,(GetHandleId((P7I))),((4268)),(1))if GetSpellTargetItem()==null thenset P8I=GetSpellTargetUnit()set x=GetUnitX(P8I)set y=GetUnitY(P8I)elseset x=GetItemX(GetSpellTargetItem())set y=GetItemY(GetSpellTargetItem())set P8I=nullendifcall SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",P7I,"origin")))call SaveReal(LY,(S5I),(282),((x)*1.0))call SaveReal(LY,(S5I),(283),((y)*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function UJ3))set SFI=nullset P7I=nullset P8I=nullset t=nullendfunctionfunction UL3 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P7I=UY3(SFI)local unit P8I=GetSpellTargetUnit()if GetSpellTargetItem()!=null and C8O(GetItemTypeId(GetSpellTargetItem()))==false thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848659507))endifset EUI=P7Iif P7I==null thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848656961))elseif GetOwningPlayer(P8I)==GetOwningPlayer(SFI)thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848656729))endifset SFI=nullset P7I=nullset P8I=nullendfunctionfunction UM3 takes nothing returns booleanif GetSpellAbilityId()==1093681754 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall UL3()elsecall UK3()endifendifreturn falseendfunctionfunction JW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UM3))set t=nullendfunctionfunction UN3 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()call BI1(1093815115)endfunctionfunction US3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer UT3=(LoadInteger(LY,(S5I),(375)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPIif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>20 thenset NPI=(LoadInteger(LY,(GetHandleId(P7I)),(674)))if((LoadInteger(LY,(GetHandleId((P7I))),((4297))))==1)==false thencall SCI(P7I,4297,0.1)call SaveInteger(LY,(GetHandleId(P7I)),(674),(NPI+1))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction UR3 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local trigger t2local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(GetHandleId(P7I)),(674)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and NPI<6 thenif GetAttacker()==P7I and((LoadInteger(LY,(GetHandleId((P7I))),((4297))))==1)==false thenset t2=CreateTrigger()call TriggerRegisterUnitEvent(t2,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t2,1,false)call TriggerAddCondition(t2,Condition(function US3))call SaveUnitHandle(LY,(GetHandleId(t2)),(2),(P7I))endifendifif NPI>5 thencall SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(674),(0))call UnitRemoveAbility(P7I,1093752625)if(LoadInteger(LY,(S5I),(34)))==1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifendifif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED thencall SaveInteger(LY,(S5I),(34),(1))if NPI>5 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall UnitRemoveAbility(P7I,1093752391)if(ES1((P7I),FR0[KJ0])!=null)thencall IA1(P7I,1093752392)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093752392,true)endifset t=nullset P7I=nullreturn falseendfunctionfunction WarClub_Animation takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(t)==1 thencall SetUnitTimeScalePercent(P7I,250)elsecall SetUnitTimeScalePercent(P7I,100)call SetUnitAnimationByIndex(P7I,12)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction UP3 takes nothing returns booleanlocal trigger tif GetSpellAbilityId()==1093752392 thencall SCI(GetTriggerUnit(),4296,29.9)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752392,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752391,true)call IA1(GetTriggerUnit(),1093752391)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752625,false)call IA1(GetTriggerUnit(),1093752625)call IssueTargetOrder(GetTriggerUnit(),"grabtree",GetSpellTargetDestructable())set t=CreateTrigger()call TriggerRegisterTimerEvent(t,30,false)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function UR3))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(GetTriggerUnit()))call SaveInteger(LY,(GetHandleId(t)),(34),(0))call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(674),(0))set t=nullelseif GetSpellAbilityId()==1093815105 thencall RemoveDestructable(GetSpellTargetDestructable())call ShowUnit(GetTriggerUnit(),false)call ShowUnit(GetTriggerUnit(),true)call UnitRemoveAbility(GetTriggerUnit(),1097625443)call UnitAddAbility(GetTriggerUnit(),1093815106)call UnitRemoveAbility(GetTriggerUnit(),1093815106)call UnitAddAbility(GetTriggerUnit(),1093815107)call UnitRemoveAbility(GetTriggerUnit(),1093815107)call AddUnitAnimationProperties(GetTriggerUnit(),"upgrade",false)endifreturn falseendfunctionfunction WarClub_Scan takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if(ES1((P7I),FR0[KJ0])!=null)thenif((LoadInteger(LY,(GetHandleId((P7I))),((4296))))==1)==false thenif GetUnitAbilityLevel(P7I,1093752392)==0 and GetUnitAbilityLevel(P7I,1093752391)==0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093752392,true)call IA1(P7I,1093752392)endifendifelsecall UnitRemoveAbility(P7I,1093752392)call UnitRemoveAbility(P7I,1093752391)endifset t=nullreturn falseendfunctionfunction GX2 takes nothing returns nothinglocal unit P7I=XMlocal unit P8I=YMlocal unit I01=(LoadUnitHandle(LY,(GetHandleId(P7I)),(297)))call SaveUnitHandle(LY,(GetHandleId(P8I)),(297),(I01))call SetUnitOwner(I01,GetOwningPlayer(P8I),true)set P7I=nullset P8I=nullset I01=nullendfunctionfunction AVO takes nothing returns nothinglocal unit SFI=NKlocal unit I01=(LoadUnitHandle(LY,(GetHandleId(SFI)),(297)))if I01!=null and GetUnitTypeId(I01)==1697657174 thencall RemoveUnit(I01)endifendfunctionfunction UQ3 takes nothing returns booleanreturn GetLearnedSkill()==1093682009 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction UU3 takes nothing returns nothinglocal unit I04=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(298)))local integer SUI=GetUnitAbilityLevel(I04,1093682009)if GetUnitState(I04,UNIT_STATE_LIFE)>1 thencall SetUnitScale(I04,0.5+0.25*SUI,0.5+0.25*SUI,0.5+0.25*SUI)endifendfunctionfunction II4 takes nothing returns booleanlocal integer SUIif IsUnitIllusion(GetTriggerUnit())and(GetUnitTypeId(GetTriggerUnit())==1432580716 or GetUnitTypeId(GetTriggerUnit())==1429221720)thenset SUI=GetUnitAbilityLevel((LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(298))),1093682009)call SetUnitScale(GetTriggerUnit(),0.5+0.25*SUI,0.5+0.25*SUI,0.5+0.25*SUI)endifreturn falseendfunctionfunction I14 takes nothing returns nothinglocal trigger tlocal unit I04=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(I04,1093682009)local unit I01local unit SFI=GetTriggerUnit()local region S5Oif SUI==1 thenset I01=CreateUnit(GetOwningPlayer(SFI),1697657174,0,0,0)call IA1(I01,1093742658)call SaveUnitHandle(LY,(GetHandleId(SFI)),(297),(I01))elseset I01=(LoadUnitHandle(LY,(GetHandleId(SFI)),(297)))endifif SUI==2 thencall UnitRemoveAbility(I01,1093742658)call IA1(I01,1093742657)elseif SUI==3 thencall UnitRemoveAbility(I01,1093742658)call UnitRemoveAbility(I01,1093742657)call IA1(I01,1093687891)endifcall SetPlayerTechResearched(GetOwningPlayer(I04),1378889797,SUI)if SUI==1 thenset t=CreateTrigger()call TriggerAddAction(t,function UU3)call TriggerRegisterTimerEvent(t,2.00,true)call SaveUnitHandle(LY,(GetHandleId(t)),(298),(I04))call SetUnitScale(I04,0.5+0.25*SUI,0.5+0.25*SUI,0.5+0.25*SUI)set t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,GetWorldBounds())call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function II4))call SaveUnitHandle(LY,(GetHandleId(t)),(298),(I04))set t=nullset S5O=nullset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(I04))call TriggerRegisterTimerEvent(t,0.5,true)set t=nullendifset SFI=nullset I01=nullendfunctionfunction JZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function UQ3))call TriggerAddAction(t,function I14)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UP3))call UN3()set t=nullendfunctionfunction IO4 takes nothing returns booleanlocal unit P7I=GetTriggerUnit()local unit P8I=GetAttacker()local integer SUI=GetUnitAbilityLevel(P7I,1093744977)local unit I01if GetRandomInt(1,100)<=(5+SUI*5)and QLI(P7I,P8I)<325 thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093681750)call SetUnitAbilityLevel(I01,1093681750,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendifset P7I=nullset P8I=nullreturn falseendfunctionfunction I24 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P7I=GetTriggerUnit()call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function IO4))set t=nullset P7I=nullendfunctionfunction I34 takes nothing returns booleanif GetLearnedSkill()==1093744977 and GetUnitAbilityLevel(GetTriggerUnit(),1093744977)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall I24()endifreturn falseendfunctionfunction JX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function I34))set t=nullendfunctionfunction I44 takes nothing returns booleanif((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4268))))==1)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(F0I))==true thencall P6I(F0I,GetFilterUnit(),1,FII)endifreturn falseendfunctionfunction I54 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x,y,0)local integer SUI=GetUnitAbilityLevel(SFI,1093684300)local group g=NTI()call IA1(I01,1093742666)call SetUnitAbilityLevel(I01,1093742666,SUI)set F0I=SFIif SUI==1 thenset FII=25elseif SUI==2 thenset FII=45elseif SUI==3 thenset FII=65elseif SUI==4 thenset FII=75endifcall GroupEnumUnitsInRange(g,x,y,275+24,Condition(function I44))call NSI(g)if GetTriggerEvalCount(t)>6 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset I01=nullset g=nullreturn falseendfunctionfunction I64 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)local integer SUI=GetUnitAbilityLevel(SFI,1093684300)call IA1(I01,1093742669)call SetUnitAbilityLevel(I01,1093742669,SUI)call IssuePointOrder(I01,"clusterrockets",GetLocationX(l),GetLocationY(l))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function I54))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((GetLocationX(l))*1.0))call SaveReal(LY,(S5I),(7),((GetLocationY(l))*1.0))call TriggerEvaluate(t)call RemoveLocation(l)set SFI=nullset l=nullset t=nullset I01=nullendfunctionfunction I74 takes nothing returns booleanif GetSpellAbilityId()==1093684300 thencall I64()endifreturn falseendfunctionfunction JV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function I74))set t=nullendfunctionfunction I84 takes nothing returns nothingif GetEnumUnit()==GetTriggerUnit()thencall AX1(GetEnumUnit(),1093687365,FOI,F1I,1110454338)elsecall AX1(GetEnumUnit(),1093687365,FOI,F1I,1110454338)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093687365,false)endfunctionfunction I94 takes nothing returns nothinglocal group g=NTI()set FOI=GetUnitAbilityLevel(GetTriggerUnit(),1093748042)set F1I=7call GroupEnumUnitsInRange(g,0,0,9999,Condition(function CQ1))call ForGroup(g,function I84)call NSI(g)set g=nullendfunctionfunction IA4 takes nothing returns booleanif GetSpellAbilityId()==1093748042 thencall I94()endifreturn falseendfunctionfunction KO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IA4))set t=nullendfunctionfunction IB4 takes nothing returns booleanreturn GetSpellAbilityId()==1093681733endfunctionfunction IC4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitAbilityLevel(P7I,1093679429,GetUnitAbilityLevel(P7I,1093681733))call UnitRemoveAbility(P7I,1110456665)set t=nullset P7I=nullreturn falseendfunctionfunction ID4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function IC4))set t=nullset P7I=nullendfunctionfunction JU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IB4))call TriggerAddAction(t,function ID4)endfunctionfunction IE4 takes nothing returns booleanreturn GetLearnedSkill()==1093681733 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction IF4 takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093679429,GetUnitAbilityLevel(GetTriggerUnit(),1093681733))endfunctionfunction K01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function IE4))call TriggerAddAction(t,function IF4)endfunctionconstant function BeastRage_AbilityCode takes nothing returns integerreturn 1093685040endfunctionconstant function BeastRage_EffectCode takes nothing returns integerreturn 1093684826endfunctionfunction IG4 takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),(1093685040))>0 and((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4271))))==1)==falseendfunctionfunction IH4 takes nothing returns nothinglocal unit Z4O=GetAttacker()local unit P8I=GetTriggerUnit()local integer S5I=GetHandleId(Z4O)local integer IZ4=(LoadInteger(LY,(S5I),(237)))local unit IV4=NYI(IZ4)local integer QX2=QAI((LoadInteger(LY,(S5I),(236))),0)local integer SUI=GetUnitAbilityLevel(Z4O,(1093685040))local integer IW4=1if IV4!=P8I thenset QX2=1elseset QX2=Q9I(QX2+1,1+4)endifif QX2>1 thenset IW4=QX2+4*(SUI-1)endifcall Q6I(Z4O,(1093684826),IW4)call SaveInteger(LY,(S5I),(236),(QX2))if IV4!=P8I thencall NXI(IZ4)set IZ4=NKI(P8I)call SaveInteger(LY,(S5I),(237),(IZ4))endifcall SCI(Z4O,4271,0.4)endfunctionfunction KI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function IG4))call TriggerAddAction(t,function IH4)call Q1I((1093684826))endfunctionfunction IX4 takes unit P7I,unit P8I,unit I01,integer SUI returns nothingcall SetUnitOwner(I01,GetOwningPlayer(P8I),false)call SetUnitAbilityLevel(I01,1093808463,SUI)call IssueTargetOrder(I01,"curse",P8I)call P6I(P7I,P8I,1,25+50*SUI)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P8I,"overhead"))endfunctionfunction IY4 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),F5I)==false thencall GroupAddUnit(F5I,GetEnumUnit())call IX4(F2I,GetEnumUnit(),F3I,F6I)endifendfunctionfunction IJ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit IK4=(LoadUnitHandle(LY,(S5I),(675)))local unit IL4=(LoadUnitHandle(LY,(S5I),(676)))local real a=(LoadReal(LY,(S5I),(13)))local real d=(LoadReal(LY,(S5I),(433)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group g=NTI()if GetTriggerEvalCount(t)<=50 thenset a=a+20set d=d+7call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveReal(LY,(S5I),(433),((d)*1.0))elseif GetTriggerEvalCount(t)<=100 thenset a=a+20set d=d-7call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveReal(LY,(S5I),(433),((d)*1.0))endifcall SetUnitX(IK4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IK4,PUI(y+d*Sin(a*bj_DEGTORAD)))set a=a+180call SetUnitX(IL4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IL4,PUI(y+d*Sin(a*bj_DEGTORAD)))set GK=P7Iset F2I=P7Iset F3I=I01set F5I=PR2set F6I=SUIcall GroupEnumUnitsInRange(g,GetUnitX(IK4),GetUnitY(IK4),125,Condition(function CA1))call ForGroup(g,function IY4)set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(IL4),GetUnitY(IL4),125,Condition(function CA1))call ForGroup(g,function IY4)call NSI(g)if GetTriggerEvalCount(t)>100 thencall KillUnit(IK4)call KillUnit(IL4)call KillUnit(I01)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset IK4=nullset IL4=nullset I01=nullreturn falseendfunctionfunction IM4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit IK4=CreateUnit(GetOwningPlayer(P7I),1697657433,x,y,0)local unit IL4=CreateUnit(GetOwningPlayer(P7I),1697657433,x,y,0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call UnitAddAbility(I01,1093808463)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(675),(IK4))call SaveUnitHandle(LY,(S5I),(676),(IL4))call SaveReal(LY,(S5I),(13),((0)*1.0))call SaveReal(LY,(S5I),(433),((0)*1.0))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(P7I,1093808462)))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function IJ4))set P7I=nullset IK4=nullset IL4=nullset t=nullset I01=nullendfunctionfunction IN4 takes unit P7I,unit P8I,unit I01,integer SUI returns nothingcall SetUnitOwner(I01,GetOwningPlayer(P8I),false)call SetUnitAbilityLevel(I01,1093808464,SUI)call IssueTargetOrder(I01,"slow",P8I)call P6I(P7I,P8I,1,75)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P8I,"overhead"))endfunctionfunction IS4 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),F5I)==false and F4I!=null and IC1(F4I)==false thencall GroupAddUnit(F5I,GetEnumUnit())call IN4(F2I,GetEnumUnit(),F3I,F6I)endifendfunctionfunction IT4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit IK4=(LoadUnitHandle(LY,(S5I),(393)))local unit IL4=(LoadUnitHandle(LY,(S5I),(394)))local unit IR4=(LoadUnitHandle(LY,(S5I),(395)))local unit IP4=(LoadUnitHandle(LY,(S5I),(396)))local unit IQ4=(LoadUnitHandle(LY,(S5I),(397)))local real a=(LoadReal(LY,(S5I),(13)))-12.5local real d=(LoadReal(LY,(S5I),(433)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit UC2local group glocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))set d=d+900/20.0call SaveReal(LY,(S5I),(433),((d)*1.0))call SetUnitX(IK4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IK4,PUI(y+d*Sin(a*bj_DEGTORAD)))set a=a+6.25call SetUnitX(IL4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IL4,PUI(y+d*Sin(a*bj_DEGTORAD)))set a=a+6.25call SetUnitX(IR4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IR4,PUI(y+d*Sin(a*bj_DEGTORAD)))set a=a+6.25call SetUnitX(IP4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IP4,PUI(y+d*Sin(a*bj_DEGTORAD)))set a=a+6.25call SetUnitX(IQ4,PTI(x+d*Cos(a*bj_DEGTORAD)))call SetUnitY(IQ4,PUI(y+d*Sin(a*bj_DEGTORAD)))set F2I=P7Iset F3I=I01set F5I=PR2set F6I=SUIset UC2=IK4if UC2!=null and IC1(UC2)==false thenset x=GetUnitX(UC2)set y=GetUnitY(UC2)set F4I=UC2set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function CA1))call ForGroup(g,function IS4)call NSI(g)endifset UC2=IL4if UC2!=null and IC1(UC2)==false thenset x=GetUnitX(UC2)set y=GetUnitY(UC2)set F4I=UC2set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function CA1))call ForGroup(g,function IS4)call NSI(g)endifset UC2=IR4if UC2!=null and IC1(UC2)==false thenset x=GetUnitX(UC2)set y=GetUnitY(UC2)set F4I=UC2set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function CA1))call ForGroup(g,function IS4)call NSI(g)endifset UC2=IP4if UC2!=null and IC1(UC2)==false thenset x=GetUnitX(UC2)set y=GetUnitY(UC2)set F4I=UC2set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function CA1))call ForGroup(g,function IS4)call NSI(g)endifset UC2=IQ4if UC2!=null and IC1(UC2)==false thenset x=GetUnitX(UC2)set y=GetUnitY(UC2)set F4I=UC2set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function CA1))call ForGroup(g,function IS4)call NSI(g)endifif GetTriggerEvalCount(t)>20 thencall KillUnit(IK4)call KillUnit(IL4)call KillUnit(IR4)call KillUnit(IP4)call KillUnit(IQ4)call KillUnit(I01)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset IK4=nullset IL4=nullset IR4=nullset IP4=nullset IQ4=nullset I01=nullreturn falseendfunctionfunction IU4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x0=GetUnitX(P7I)local real y0=GetUnitY(P7I)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=UEI(x0,y0,x1,y1)local unit IK4=CreateUnit(GetOwningPlayer(P7I),1697657434,x0,y0,a-12.5)local unit IL4=CreateUnit(GetOwningPlayer(P7I),1697657434,x0,y0,a-6.25)local unit IR4=CreateUnit(GetOwningPlayer(P7I),1697657434,x0,y0,a)local unit IP4=CreateUnit(GetOwningPlayer(P7I),1697657434,x0,y0,a+6.25)local unit IQ4=CreateUnit(GetOwningPlayer(P7I),1697657434,x0,y0,a+12.5)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x0,y0,0)call UnitAddAbility(I01,1093808464)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(393),(IK4))call SaveUnitHandle(LY,(S5I),(394),(IL4))call SaveUnitHandle(LY,(S5I),(395),(IR4))call SaveUnitHandle(LY,(S5I),(396),(IP4))call SaveUnitHandle(LY,(S5I),(397),(IQ4))call SaveReal(LY,(S5I),(6),((x0)*1.0))call SaveReal(LY,(S5I),(7),((y0)*1.0))call SaveReal(LY,(S5I),(433),((0)*1.0))call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(P7I,1093808461)))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function IT4))set P7I=nullset IK4=nullset IL4=nullset IR4=nullset IP4=nullset IQ4=nullset t=nullset I01=nullendfunctionfunction O04 takes nothing returns booleanif GetSpellAbilityId()==1093808461 thencall IU4()elseif GetSpellAbilityId()==1093808462 thencall IM4()endifreturn falseendfunctionfunction OI4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093808460)local player p=(LoadPlayerHandle(LY,(S5I),(54)))if GetUnitTypeId(P7I)==1311781175 or GetUnitTypeId(P7I)==1311781442 thenif((LoadInteger(LY,(GetHandleId((P7I))),((4416))))==1)==false or p!=GetOwningPlayer(P7I)thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808462,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808461,false)call SaveInteger(LY,(GetHandleId((P7I))),((4416)),(1))call SaveInteger(LY,(GetHandleId((P7I))),((4417)),(2))if p!=GetOwningPlayer(P7I)thencall SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))endifendifif GetUnitAbilityLevel(P7I,1093808462)!=SUI thencall SetUnitAbilityLevel(P7I,1093808462,SUI)endifelseif GetUnitTypeId(P7I)==1311781174 thenif((LoadInteger(LY,(GetHandleId((P7I))),((4417))))==1)==false or p!=GetOwningPlayer(P7I)thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808462,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808461,true)call SaveInteger(LY,(GetHandleId((P7I))),((4417)),(1))call SaveInteger(LY,(GetHandleId((P7I))),((4416)),(2))if p!=GetOwningPlayer(P7I)thencall SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))endifendifif GetUnitAbilityLevel(P7I,1093808461)!=SUI thencall SetUnitAbilityLevel(P7I,1093808461,SUI)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction O14 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call IA1(P7I,1093808462)call IA1(P7I,1093808461)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808462,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808461,false)call SaveInteger(LY,(GetHandleId((P7I))),((4416)),(2))call SaveInteger(LY,(GetHandleId((P7I))),((4417)),(2))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function OI4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))set t=nullset P7I=nullendfunctionfunction OO4 takes nothing returns booleanif GetLearnedSkill()==1093808460 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808460)==1 thencall O14()endifreturn falseendfunctionfunction K11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OO4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O04))set t=nullendfunctionfunction O24 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer MKO=2+SUIif GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,1093750323)call UnitRemoveAbility(P7I,1093750326)call UnitRemoveAbility(P7I,1093750327)call UnitRemoveAbility(P7I,1110459208)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==P7I thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI>=MKO thencall UnitRemoveAbility(P7I,1093750323)call UnitRemoveAbility(P7I,1093750326)call UnitRemoveAbility(P7I,1093750327)call UnitRemoveAbility(P7I,1110459208)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetTriggerUnit()==P7I and GetSpellAbilityId()==1093750841 and(TimerGetElapsed(M))>(LoadReal(LY,(S5I),(442)))thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif E31(GetSpellAbilityId())and P7I==GetSpellTargetUnit()thencall UnitRemoveAbility(P7I,1093750323)call UnitRemoveAbility(P7I,1093750326)call UnitRemoveAbility(P7I,1093750327)call UnitRemoveAbility(P7I,1110459208)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall UnitRemoveAbility(P7I,1093750323)call UnitRemoveAbility(P7I,1093750326)call UnitRemoveAbility(P7I,1093750327)call UnitRemoveAbility(P7I,1110459208)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction O34 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093750841)call IA1(P7I,1093750323)call IA1(P7I,1093750326)call IA1(P7I,1093750327)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750326,false)call TriggerRegisterTimerEvent(t,15,false)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O24))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+1)*1.0))set t=nullset P7I=nullendfunctionfunction O44 takes nothing returns booleanif GetSpellAbilityId()==1093750841 thencall O34()endifreturn falseendfunctionfunction JY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O44))call Q1I(1093750323)set t=nullendfunctionfunction O54 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093684291)local integer EB2local integer O64if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(P7I,1110454856)==0 or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and P7I==GetSpellTargetUnit()and E31(GetSpellAbilityId()))thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1110454856)call G21(P7I,0)elseset EB2=R2I(GetUnitState(P7I,UNIT_STATE_LIFE)*(0.04+0.01*SUI))set O64=(LoadInteger(LY,(S5I),(238)))if EB2!=O64 thencall SaveInteger(LY,(S5I),(238),(EB2))call G21(P7I,EB2)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction O74 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O54))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveInteger(LY,(S5I),(238),(0))set t=nullendfunctionfunction O84 takes nothing returns booleanif GetSpellAbilityId()==1093684291 thencall O74()endifreturn falseendfunctionfunction O94 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1110454856)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 thenendifreturn falseendfunctionfunction JJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O84))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function O94))set t=nullendfunctionfunction OA4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call G41(P7I,0)set P7I=nullreturn falseendfunctionfunction OB4 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer OC4=(LoadInteger(LY,(GetHandleId(P8I)),(824)))local real OD4=(LoadReal(LY,(GetHandleId(P8I)),(825)))local integer SUI=GetUnitAbilityLevel(P7I,1093818418)if GetTriggerEventId()==EVENT_WIDGET_DEATH or OD4<(TimerGetElapsed(M))thencall SaveInteger(LY,(GetHandleId(P8I)),(824),(0))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.31,true)call TriggerAddCondition(t,Condition(function OA4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call G41(P7I,IMinBJ((10+5*SUI)*OC4,500))endifset t=nullset P7I=nullset P8I=nullendfunctionfunction OE4 takes nothing returns booleanif GetTriggerEventId()!=EVENT_UNIT_ATTACKED thencall OB4()endifif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))thencall OB4()endifreturn falseendfunctionfunction OF4 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal integer OC4=(LoadInteger(LY,(GetHandleId(P8I)),(824)))local integer SUI=GetUnitAbilityLevel(P7I,1093818418)call SaveInteger(LY,(GetHandleId(P8I)),(824),(OC4+1))call SaveReal(LY,(GetHandleId(P8I)),(825),(((TimerGetElapsed(M))+15)*1.0))if OC4==0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarTarget.mdl",P8I,"overhead")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_ATTACKED)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function OE4))call SaveInteger(LY,(GetHandleId(P8I)),(824),(2))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.31,true)call TriggerAddCondition(t,Condition(function OA4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call G41(P7I,IMinBJ((10+5*SUI),500))endifset t=nullendfunctionfunction OG4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call OF4(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction OH4 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function OG4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P8I=nullset P7I=nullset t=nullendfunctionfunction OZ4 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4274))))==1)==false thencall SCI(P7I,4274,0.2)call OH4()endifendfunctionfunction OV4 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093818418)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall OZ4()endifreturn falseendfunctionfunction OW4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function OV4))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction OX4 takes nothing returns booleanif GetLearnedSkill()==1093818418 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093818418)==1 thencall OW4()endifreturn falseendfunctionfunction JK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OX4))set t=nullendfunctionfunction OY4 takes unit I01,real x,real y,integer SUI returns nothingcall SetUnitPosition(I01,x,y)call IssueImmediateOrder(I01,"howlofterror")call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",x,y))set I01=nullendfunctionfunction OJ4 takes nothing returns booleanif(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),F7I)==false thencall GroupAddUnit(F7I,GetFilterUnit())call P6I(F8I,GetFilterUnit(),7,F9I)endifreturn falseendfunctionfunction OK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real RM2=(LoadReal(LY,(S5I),(13)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local group gif GetTriggerEvalCount(t)>10 thencall NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset F7I=JAOset F8I=P7Iset F9I=SUI*20+10set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,x,y,325,Condition(function OJ4))call NSI(g)set g=nullcall OY4(I01,x,y,SUI)if ModuloInteger(GetTriggerEvalCount(t),2)==0 thencall KillUnit(CreateUnit(GetOwningPlayer(P7I),1697657409,x,y,0))endifset x=PTI(x+200*Cos(RM2*bj_DEGTORAD))set y=PUI(y+200*Sin(RM2*bj_DEGTORAD))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))endifset t=nullset P7I=nullset I01=nullset JAO=nullreturn falseendfunctionfunction OL4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=GetLocationX(l)local real y2=GetLocationY(l)local real RM2=UEI(x1,y1,x2,y2)local integer SUI=GetUnitAbilityLevel(P7I,1093744463)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x1,y1,0)call IA1(I01,1093681488)call SetUnitAbilityLevel(I01,1093681488,SUI)call RemoveLocation(l)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(6),((x1)*1.0))call SaveReal(LY,(S5I),(7),((y1)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveGroupHandle(LY,(S5I),(133),(NTI()))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function OK4))set t=nullset P7I=nullset l=nullset I01=nullendfunctionfunction OM4 takes nothing returns booleanif GetSpellAbilityId()==1093744463 thencall OL4()endifreturn falseendfunctionfunction JM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OM4))set t=nullendfunctionfunction ON4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x1=(LoadReal(LY,(S5I),(64)))local real x2=(LoadReal(LY,(S5I),(66)))local real y1=(LoadReal(LY,(S5I),(65)))local real y2=(LoadReal(LY,(S5I),(67)))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",P7I,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",P8I,"origin"))call SetUnitPosition(P7I,x2,y2)call SCI(P8I,4407,1)call SetUnitPosition(P8I,x1,y1)if IsUnitInRegion(MN,P8I)thencall B41(P8I)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction OS4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=GetUnitX(P8I)local real y2=GetUnitY(P8I)local trigger tlocal integer S5Iif IsUnitAlly(P7I,GetOwningPlayer(P8I))==true or NNI(GetSpellTargetUnit())==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(64),((x1)*1.0))call SaveReal(LY,(S5I),(66),((x2)*1.0))call SaveReal(LY,(S5I),(65),((y1)*1.0))call SaveReal(LY,(S5I),(67),((y2)*1.0))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function ON4))call UGI("SPLK",x1,y1,x2,y2,0.5,0,1,1,0.3)call UPI(x1,y1,300)call UPI(x2,y2,300)endifset P7I=nullset P8I=nullset t=nullendfunctionfunction OT4 takes nothing returns booleanif GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 thencall OS4()endifreturn falseendfunctionfunction OR4 takes nothing returns nothingif(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652610))endifendfunctionfunction OP4 takes nothing returns booleanif GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 thencall OR4()endifreturn falseendfunctionfunction JN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OT4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function OP4))set t=nullendfunctionfunction MagicMissle takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))endfunctionfunction OQ4 takes nothing returns booleanif GetSpellAbilityId()==1093677633 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))endifreturn falseendfunctionfunction JL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerAddCondition(t,Condition(function OQ4))call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)set t=nullendfunctionfunction OU4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if IC1(P7I)==false or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitRemoveAbility(P8I,1093818198)call UnitRemoveAbility(P8I,1093818201)call UnitRemoveAbility(P8I,1093818199)call UnitRemoveAbility(P8I,1093818200)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction A04 takes nothing returns booleanlocal trigger tlocal integer S5Ilocal unit P7I=GetTriggerUnit()local unit P8I=GetKillingUnit()local integer SUI=GetUnitAbilityLevel(P7I,1094934883)set P8I=ZMO(P8I)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function OU4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))if SUI==1 thencall IA1(P8I,1093818198)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093818198,false)elseif SUI==2 thencall IA1(P8I,1093818201)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093818201,false)elseif SUI==3 thencall IA1(P8I,1093818199)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093818199,false)elseif SUI==4 thencall IA1(P8I,1093818200)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093818200,false)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AI4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function A04))set P7I=nullset t=nullendfunctionfunction A14 takes nothing returns booleanif GetLearnedSkill()==1094934883 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1094934883)==1 thencall AI4()endifreturn falseendfunctionfunction JS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerAddCondition(t,Condition(function A14))call UMI(t,EVENT_PLAYER_HERO_SKILL)set t=nullendfunctionfunction AO4 takes unit u returns nothinglocal unit SFI=K1[GetPlayerId(GetOwningPlayer(u))]local integer S5I=GetHandleId(SFI)local integer A24local integer ilocal integer xlocal integer A34local unit A44if GetUnitTypeId(SFI)!=1160786265 thenreturnendifset A24=(LoadInteger(LY,(S5I),(348)))set i=1loopexitwhen i>A24set A34=(LoadInteger(LY,(S5I),(7000+i)))set A44=NYI(A34)if A44==u thenset x=iloopexitwhen x==A24call SaveInteger(LY,(S5I),(7000+x),((LoadInteger(LY,(S5I),(7000+x+1)))))set x=x+1endloopset i=A24endifset i=i+1endloopcall SaveInteger(LY,(S5I),(348),(A24-1))set A44=nullset SFI=nullendfunctionfunction A54 takes unit u returns nothinglocal unit SFI=K1[GetPlayerId(GetOwningPlayer(u))]local integer S5I=GetHandleId(SFI)local integer A24=(LoadInteger(LY,(S5I),(348)))call SaveReal(LY,(GetHandleId(u)),(786),(((TimerGetElapsed(M)))*1.0))set A24=A24+1call SaveInteger(LY,(S5I),(7000+A24),(NKI(u)))call SaveInteger(LY,(S5I),(348),(A24))if RW0[GetPlayerId(GetOwningPlayer(SFI))]thencall SelectUnitAddForPlayer(u,GetOwningPlayer(SFI))endifset SFI=nullendfunctionfunction WardenTrap_DeathMain takes nothing returns nothingcall AO4(GetTriggerUnit())endfunctionfunction A64 takes unit u returns nothinglocal integer A74=GetUnitAbilityLevel(u,1093685840)*3+2local integer S5I=GetHandleId(u)local integer A24=(LoadInteger(LY,(S5I),(348)))local integer A34=(LoadInteger(LY,(S5I),(7000+1)))local unit A44=NYI(A34)if A24>=A74 thencall AO4(A44)call RemoveUnit(A44)endifset A44=nullendfunctionfunction A84 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093685845)call SetUnitAbilityLevel(I01,1093685845,FAI)call IssueTargetOrder(I01,"slow",GetEnumUnit())call IA1(I01,1093686071)set I01=nullendfunctionfunction A94 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()local real GW1=(LoadReal(LY,(GetHandleId(P7I)),(786)))local real TB2=(TimerGetElapsed(M))-GW1local integer SUI=1if TB2>4 thenset SUI=5elseif TB2>3 thenset SUI=4elseif TB2>2 thenset SUI=3elseif TB2>1 thenset SUI=2endifset FAI=SUIcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",x,y))call GroupEnumUnitsInRange(g,x,y,400,Condition(function C51))call ForGroup(g,function A84)call NSI(g)call AO4(P7I)call RemoveUnit(P7I)set g=nullset P7I=nullendfunctionfunction AA4 takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==JK and GetUnitTypeId(GetFilterUnit())==1697657392endfunctionfunction AB4 takes nothing returns nothinglocal real AC4=UTI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),AK,BK)local real AD4=UTI(GetUnitX(GK),GetUnitY(GK),AK,BK)if AC4<AD4 thenset GK=GetEnumUnit()endifendfunctionfunction AE4 takes nothing returns nothinglocal group g=NTI()set JK=GetOwningPlayer(GetTriggerUnit())call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),9000,Condition(function AA4))set GK=FirstOfGroup(g)set AK=GetUnitX(GetTriggerUnit())set BK=GetUnitY(GetTriggerUnit())call ForGroup(g,function AB4)call IssueImmediateOrder((GK),"locustswarm")call NSI(g)set g=nullendfunctionfunction WardenTrap_LearnMain takes nothing returns nothingcall IA1(GetTriggerUnit(),1093818442)endfunctionfunction AF4 takes nothing returns nothinglocal location l=GetSpellTargetLoc()call IA1(GetTriggerUnit(),1093818442)call A64(GetTriggerUnit())call A54(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657392,GetLocationX(l),GetLocationY(l),0))call RemoveLocation(l)set l=nullendfunctionfunction AG4 takes nothing returns booleanif GetSpellAbilityId()==1093685840 thencall AF4()endifif GetSpellAbilityId()==1093818442 thencall AE4()endifreturn falseendfunctionfunction AH4 takes nothing returns booleanif GetSpellAbilityId()==1093685841 thencall A94()endifreturn falseendfunctionfunction AZ4 takes nothing returns booleanif GetLearnedSkill()==1093685840 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685840)==1 thencall IA1(GetTriggerUnit(),1093818442)endifreturn falseendfunctionfunction AV4 takes nothing returns booleanif GetUnitTypeId(GetDyingUnit())==1697657392 thencall AO4(GetTriggerUnit())endifreturn falseendfunctionfunction SY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AG4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function AV4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AH4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function AZ4))set t=nullendfunctionfunction AW4 takes unit u,real AX4,real AY4,real AJ4,real AK4,real AL4 returns booleanlocal real AM4=AJ4-AX4local real AN4=AK4-AY4local real AS4=GetUnitX(u)-AX4local real AT4=GetUnitY(u)-AY4return AL4>=RAbsBJ(AM4*AT4-AN4*AS4)/RAbsBJ(Pow(Pow(AM4,2)+Pow(AN4,2),0.5))endfunctionfunction AR4 takes unit P7I,unit P8I,real PAI,real InitX,real InitY returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093685839)local real AP4=(300+20*SUI)*2local real AQ4=80+25local unit AU4local real dxlocal real dylocal real B04local real xlocal real ylocal group g=NTI()local boolean BI4local boolean B14set dx=GetUnitX(P8I)-GetUnitX(P7I)set dy=GetUnitY(P8I)-GetUnitY(P7I)set B04=Pow(Pow(dx,2)+Pow(dy,2),0.5)set x=GetUnitX(P8I)+(AP4/2-25)*(dx/B04)set y=GetUnitY(P8I)+(AP4/2-25)*(dy/B04)set GK=P7Iset AK=PAIcall GroupEnumUnitsInRange(g,x,y,Pow(Pow(AP4/2,2)+Pow(AQ4/2,2),0.5),Condition(function CA1))call GroupRemoveUnit(g,P8I)set AU4=FirstOfGroup(g)loopexitwhen AU4==nullset BI4=AW4(AU4,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I),AQ4/2)set B14=AW4(AU4,x,y,x-100,y+100*x*Pow(y,-1),0.01+AP4/2)if BI4 and B14 thencall P6I(P7I,AU4,3,PAI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",AU4,"chest"))endifcall GroupRemoveUnit(g,AU4)set AU4=FirstOfGroup(g)endloopcall NSI(g)set AU4=nullset g=nullendfunctionfunction BO4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>1 and IsUnitIllusion(P8I)==false thencall DisableTrigger(t)call AR4(P7I,P8I,GetEventDamage(),(LoadReal(LY,(S5I),(349))),(LoadReal(LY,(S5I),(350))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction B24 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.0,false)call TriggerAddCondition(t,Condition(function BO4))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(349),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(350),((GetUnitY(P7I))*1.0))set P8I=nullset P7I=nullset t=nullendfunctionfunction B34 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4272))))==1)==false thencall SCI(P7I,4272,0.4)call B24()endifendfunctionfunction B44 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093685839)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall B34()endifreturn falseendfunctionfunction B54 takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),1093685839)==1 thenset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function B44))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))endifcall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382379618,GetUnitAbilityLevel(GetTriggerUnit(),1093685839))set t=nullendfunctionfunction B64 takes nothing returns booleanif GetLearnedSkill()==1093685839 and IsUnitIllusion(GetTriggerUnit())==false thencall B54()endifreturn falseendfunctionfunction SX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function B64))set t=nullendfunctionfunction B74 takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local integer BQO=(LoadInteger(LY,(S5I),(352)))if BQO>0 and GetTriggerEventId()!=EVENT_UNIT_DEATH thenif GetEventDamage()>5 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",SFI,"right hand"))call QGI(SFI,GetEventDamage())call SaveInteger(LY,(S5I),(352),(BQO-1))endifelsecall UnitRemoveAbility(SFI,1093685838)call UnitRemoveAbility(SFI,1110456394)call SaveInteger(LY,(S5I),(352),(0))endifset SFI=nullreturn falseendfunctionfunction B84 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local unit SFI=(LoadUnitHandle(LY,(GetHandleId(t)),(14)))local integer S5I=GetHandleId(SFI)local integer BQO=(LoadInteger(LY,(S5I),(351)))if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==SFI and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false)thenif GetTriggerEventId()!=EVENT_UNIT_DEATH and BQO>0 and GetEventDamage()>0 thencall SaveInteger(LY,(S5I),(351),(BQO-1))elsecall UnitRemoveAbility(SFI,1093685830)call UnitRemoveAbility(SFI,1093685837)call UnitRemoveAbility(SFI,1110456393)call SaveInteger(LY,(S5I),(351),(0))endifendifset t=nullset SFI=nullreturn falseendfunctionfunction B94 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local unit SFI=(LoadUnitHandle(LY,(GetHandleId(t)),(14)))local integer S5I=GetHandleId(SFI)call SaveInteger(LY,(S5I),(352),(0))call SaveInteger(LY,(S5I),(351),(0))call UnitRemoveAbility(SFI,1093685830)call UnitRemoveAbility(SFI,1093685837)call UnitRemoveAbility(SFI,1093685838)call FlushChildHashtable(LY,(GetHandleId(t)))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction BA4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,17,false)call TriggerAddCondition(t,Condition(function B94))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))call IO1(FE,GetUnitX(SFI),GetUnitY(SFI))call IA1(SFI,1093685838)call SaveInteger(LY,(S5I),(352),(GetUnitAbilityLevel(SFI,1093748033)+2))call IA1(SFI,1093685830)call SetUnitAbilityLevel(SFI,1093685830,GetUnitAbilityLevel(SFI,1093748033))call IA1(SFI,1093685837)call SaveInteger(LY,(S5I),(351),(GetUnitAbilityLevel(SFI,1093748033)+2))set SFI=nullendfunctionfunction BB4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger tset t=CreateTrigger()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function B74))call SaveInteger(LY,(GetHandleId(SFI)),(352),(0))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function B84))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))call SaveInteger(LY,(GetHandleId(SFI)),(351),(0))set t=nullset SFI=nullendfunctionfunction BC4 takes nothing returns booleanif GetLearnedSkill()==1093748033 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748033)==1 thencall BB4()endifreturn falseendfunctionfunction BD4 takes nothing returns booleanif GetSpellAbilityId()==1093748033 thencall BA4()endifreturn falseendfunctionfunction SW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BD4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function BC4))set t=nullendfunctionfunction BE4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()call UnitRemoveAbility((LoadUnitHandle(LY,(GetHandleId(t)),(14))),1093685827)call FlushChildHashtable(LY,(GetHandleId(t)))call S0I(t)set t=nullreturn falseendfunctionfunction BF4 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(14),(P8I))call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function BE4))call IA1(P8I,1093685827)call SetUnitAbilityLevel(P8I,1093685827,GetUnitAbilityLevel(P7I,1093685846))call P6I(P7I,P8I,2,50*GetUnitAbilityLevel(P7I,1093685846))call UYI(I2S(50*GetUnitAbilityLevel(P7I,1093685846)),1,P8I,0.03,255,0,0,255)call UnitRemoveAbility(P7I,1110456395)set t=nullendfunctionfunction BG4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local trigger BH4=(LoadTriggerHandle(LY,(S5I),(353)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call FlushChildHashtable(LY,(GetHandleId(BH4)))call S0I(BH4)call BF4(P7I,P8I)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullset BH4=nullreturn falseendfunctionfunction BZ4 takes unit P7I,unit P8I,trigger BH4 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.0,false)call TriggerAddCondition(t,Condition(function BG4))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveTriggerHandle(LY,(S5I),(353),(BH4))set t=nullendfunctionfunction BV4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==SFI and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(SFI))==false)thenif GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_CAST and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false thencall BZ4(SFI,GetTriggerUnit(),t)call UnitRemoveAbility(SFI,1110456395)call FlushChildHashtable(LY,(S5I))call S0I(t)endifif GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_CAST thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED thenif x!=GetUnitX(SFI)or y!=GetUnitY(SFI)thencall UnitRemoveAbility(SFI,1110456395)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset SFI=nullreturn falseendfunctionfunction BW4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call DestroyEffect(AddSpecialEffectTarget("effects\\PurpleAura.mdx",SFI,"origin"))call IO1(UC,GetUnitX(SFI),GetUnitY(SFI))call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_CAST)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function BV4))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))call IssueImmediateOrder(SFI,"holdposition")set t=nullset SFI=nullendfunctionfunction BX4 takes nothing returns booleanif GetSpellAbilityId()==1093685846 thencall BW4()endifreturn falseendfunctionfunction SV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BX4))set t=nullendfunctionfunction BY4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer BJ4=(LoadInteger(LY,(S5I),(247)))call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",GetUnitX(P7I),GetUnitY(P7I)))if GetTriggerEvalCount(t)>10*(2+1*SUI)or GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,BJ4)call UnitRemoveAbility(P7I,1110456663)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction BK4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093743689)local integer BJ4if SUI==1 thenset BJ4=1093743413elseif SUI==2 thenset BJ4=1093743183elseif SUI==3 thenset BJ4=1093743412elseif SUI==4 thenset BJ4=1093743417endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),BJ4,false)call AH1(P7I,BJ4,1,2+SUI)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function BY4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(247),(BJ4))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("effects\\Tornado.mdx",P7I,"hand,left")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("effects\\Tornado.mdx",P7I,"hand,right")))set P7I=nullset t=nullendfunctionfunction BL4 takes nothing returns booleanif GetSpellAbilityId()==1093743689 thencall BK4()endifreturn falseendfunctionfunction TX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BL4))set t=nullendfunctionfunction BM4 takes nothing returns nothinglocal destructable P8I=GetEnumDestructable()local real a=Atan2(GetDestructableY(P8I)-GetUnitY(GK),GetDestructableX(P8I)-GetUnitX(GK))local real VOO=RAbsBJ((AK-a)*bj_RADTODEG)if(RJI(P8I)or GetDestructableTypeId(P8I)==1110454325)and GetDestructableLife(P8I)>1 and VOO<FDI and VOO<(FEI-5)thenset FDI=VOOset FBI=P8Iendifset P8I=nullendfunctionfunction BN4 takes unit IG1,unit P7I,real RM2 returns destructablelocal real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local rect r=Rect(x-FGI,y-FGI,x+FGI,y+FGI)set FDI=9999set GK=IG1set FBI=nullcall EnumDestructablesInRect(r,Condition(function N1I),function BM4)call RemoveRect(r)set r=nullreturn FBIendfunctionfunction BS4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real a=Atan2(GetUnitY(P8I)-GetUnitY(GK),GetUnitX(P8I)-GetUnitX(GK))local real VOO=RAbsBJ((AK-a)*bj_RADTODEG)if VOO<FDI and VOO<FEI and P8I!=HK thenset FDI=VOOset FCI=P8Iendifset P8I=nullendfunctionfunction BT4 takes unit IG1,unit P7I,real RM2 returns unitlocal group g=NTI()set FCI=nullset FDI=9999set GK=IG1set AK=Atan2(GetUnitY(P7I)-FZI,GetUnitX(P7I)-FHI)set HK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),FFI,Condition(function CE1))call ForGroup(g,function BS4)call NSI(g)set g=nullreturn FCIendfunctionfunction BR4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)if(LoadLightningHandle(LY,(S5I),(196)))!=null thencall DestroyLightning((LoadLightningHandle(LY,(S5I),(196))))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction BP4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real BQ4=(LoadReal(LY,(S5I),(248)))local real RM2=Atan2(GetUnitY(P8I)-GetUnitY(IG1),GetUnitX(P8I)-GetUnitX(IG1))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real x=GetUnitX(IG1)+50*Cos(RM2)local real y=GetUnitY(IG1)+50*Sin(RM2)local unit BU4local destructable dlocal lightning UZIlocal unit I01local boolean ZXO=(LoadBoolean(LY,(S5I),(249)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(IG1)elsecall SetUnitX(IG1,x)call SetUnitY(IG1,y)call SetUnitFacing(IG1,RM2*bj_RADTODEG)if QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))<45 thenset FHI=(LoadReal(LY,(S5I),(6)))set FZI=(LoadReal(LY,(S5I),(7)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetUnitTypeId(P8I)!=1848651852 and ZXO thenset BU4=BT4(IG1,P8I,BQ4)set d=BN4(IG1,P8I,BQ4)if BU4!=null thenset t=CreateTrigger()set S5I=GetHandleId(t)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093743177)call SetUnitAbilityLevel(I01,1093743177,SUI+1)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(BU4),GetUnitY(BU4),0)call IA1(I01,1093743177)call SetUnitAbilityLevel(I01,1093743177,SUI+1)call IssueTargetOrder(I01,"thunderbolt",BU4)call TriggerRegisterTimerEvent(t,0.25+SUI*0.75,false)call TriggerAddCondition(t,Condition(function BR4))set UZI=AddLightning("MFPB",true,GetUnitX(P8I),GetUnitY(P8I),GetUnitX(BU4),GetUnitY(BU4))call SetLightningColor(UZI,0.5,0.5,1,1)call SaveLightningHandle(LY,(S5I),(196),(UZI))elseif d!=null thenset t=CreateTrigger()set S5I=GetHandleId(t)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093743177)call SetUnitAbilityLevel(I01,1093743177,SUI+1)call IssueTargetOrder(I01,"thunderbolt",P8I)call TriggerRegisterTimerEvent(t,0.25+SUI*0.75,false)call TriggerAddCondition(t,Condition(function BR4))set UZI=AddLightning("MFPB",true,GetUnitX(P8I),GetUnitY(P8I),GetDestructableX(d),GetDestructableY(d))call SetLightningColor(UZI,0.5,0.5,1,1)call SaveLightningHandle(LY,(S5I),(196),(UZI))call SetDestructableAnimation(d,"stand hit")elseset I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093743177)call SetUnitAbilityLevel(I01,1093743177,1)call IssueTargetOrder(I01,"thunderbolt",P8I)endifendifcall KillUnit(IG1)endifendifset t=nullset IG1=nullset P8I=nullset UZI=nullset BU4=nullset d=nullset I01=nullreturn falseendfunctionfunction C04 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real RM2=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747990327,GetUnitX(P7I),GetUnitY(P7I),RM2*bj_RADTODEG)local integer SUI=GetUnitAbilityLevel(P7I,1093743178)local boolean ZXO=NNI(GetSpellTargetUnit())==falsecall SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(248),((RM2)*1.0))call SaveBoolean(LY,(S5I),(249),(ZXO))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call TriggerRegisterTimerEvent(t,0.033,true)call TriggerAddCondition(t,Condition(function BP4))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)set P7I=nullset P8I=nullset t=nullendfunctionfunction CI4 takes nothing returns booleanif GetSpellAbilityId()==1093743178 thencall C04()endifreturn falseendfunctionfunction TW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CI4))set t=nullendfunctionfunction C14 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),FVI)==false and GetUnitAbilityLevel(GetEnumUnit(),1113815395)==0 thencall P6I((FWI),(GetEnumUnit()),1,(((FXI)*1.0))*Pow(0.9,(FJI))*Pow(0.99,(FYI)))call GroupAddUnit(FVI,GetEnumUnit())set FJI=FJI+1endifendfunctionfunction CO4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real PAI=(LoadReal(LY,(S5I),(20)))local integer C24=(LoadInteger(LY,(S5I),(354)))local integer C34=(LoadInteger(LY,(S5I),(355)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local real x=PTI(GetUnitX(IG1)+(60*Pow(0.9,C34)*Pow(0.99,C24))*Cos(RM2))local real y=PUI(GetUnitY(IG1)+(60*Pow(0.9,C34)*Pow(0.99,C24))*Sin(RM2))local group g=NTI()local real dif GetTriggerEvalCount(t)>2 thenset d=150elseset d=75endifcall DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",x,y))set C24=C24+UPI(x,y,75)call SaveInteger(LY,(S5I),(354),(C24))set FVI=PR2set FWI=IG1set FXI=PAIset FYI=C24set FJI=C34set GK=IG1call GroupEnumUnitsInRange(g,x,y,d,Condition(function CA1))call ForGroup(g,function C14)call NSI(g)call SaveInteger(LY,(S5I),(355),(FJI))call SetUnitX(IG1,x)call SetUnitY(IG1,y)if GetTriggerEvalCount(t)>42 thencall KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset IG1=nullset PR2=nullset g=nullreturn falseendfunctionfunction C44 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x2=(LoadReal(LY,(GetHandleId(P7I)),(356)))local real y2=(LoadReal(LY,(GetHandleId(P7I)),(357)))local real C54=QCI((TimerGetElapsed(M))-(LoadReal(LY,(GetHandleId(P7I)),(358))),1.0)local real RM2=Atan2(y2-GetUnitY(P7I),x2-GetUnitX(P7I))local trigger tlocal integer S5Ilocal unit IG1local integer SUI=GetUnitAbilityLevel(P7I,1093743179)local real PAI=(40+80*SUI)*(C54)set t=CreateTrigger()set S5I=GetHandleId(t)set IG1=CreateUnit(GetOwningPlayer(P7I),1747990328,GetUnitX(P7I),GetUnitY(P7I),RM2*bj_RADTODEG)set x2=GetUnitX(P7I)+2475*Cos(RM2)set y2=GetUnitY(P7I)+2475*Sin(RM2)call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(47),((x2)*1.0))call SaveReal(LY,(S5I),(48),((y2)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveInteger(LY,(S5I),(354),(0))call SaveInteger(LY,(S5I),(355),(0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function CO4))set P7I=nullset t=nullset IG1=nullendfunctionfunction C64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call SetUnitTimeScale(SFI,1)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction C74 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call SetUnitAnimation(SFI,"attack")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction C84 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)call RemoveLocation(l)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.,false)call TriggerAddCondition(t,Condition(function C74))call SaveReal(LY,(GetHandleId(SFI)),(356),((x)*1.0))call SaveReal(LY,(GetHandleId(SFI)),(357),((y)*1.0))call SaveReal(LY,(GetHandleId(SFI)),(358),(((TimerGetElapsed(M)))*1.0))call SetUnitTimeScale(SFI,1)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,1,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function C64))set t=nullset SFI=nullendfunctionfunction C94 takes nothing returns booleanif GetSpellAbilityId()==1093743179 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CHANNEL thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(false))call C84()elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(true))elseif(LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(360)))==true thencall C44()endifendifreturn falseendfunctionfunction TY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C94))set t=nullendfunctionfunction CA4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real RS2=(LoadReal(LY,(S5I),(193)))local boolean CK3=(LoadBoolean(LY,(S5I),(15)))local integer SUIif GetTriggerEvalCount(t)==1 thencall TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)endifif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==P7I and GetTriggerUnit()==P8I thencall DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",P7I,"hand,left"))call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",P7I,"hand,right"))if GetUnitAbilityLevel(P7I,1093743186)==0 thencall IA1(P7I,1093743186)set SUI=GetUnitAbilityLevel(P7I,1093747766)endifelseif GetAttacker()==P7I and GetTriggerUnit()!=P8I thencall UnitRemoveAbility(P7I,1093743186)call UnitRemoveAbility(P7I,1110456664)call UnitRemoveAbility(P7I,1093748299)call UnitRemoveAbility(P7I,1093748300)call UnitRemoveAbility(P7I,1093748298)endifelseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+(RS2)*GetEventDamage())endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766 thencall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall UnitRemoveAbility(P7I,1093743186)call UnitRemoveAbility(P7I,1110456664)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093748299)call UnitRemoveAbility(P7I,1093748300)call UnitRemoveAbility(P7I,1093748298)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction CB4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093743184)local real RS2=0.6-SUI*0.1local boolean CK3=falsecall UnitRemoveAbility(P7I,1093743186)call UnitRemoveAbility(P7I,1110456664)if SUI==0 thenset CK3=trueset SUI=GetUnitAbilityLevel(P7I,1093747766)set RS2=0.45-SUI*0.15endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093743186,false)call IA1(P7I,1093743186)call IssueTargetOrder(P7I,"attack",P8I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveBoolean(LY,(S5I),(15),(CK3))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveReal(LY,(S5I),(193),((RS2)*1.0))call SaveInteger(LY,(S5I),(361),(0))call TriggerRegisterTimerEvent(t,20,false)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function CA4))set P7I=nullset P8I=nullset t=nullendfunctionfunction CC4 takes nothing returns booleanif(GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766)and NNI(GetSpellTargetUnit())==false thencall CB4()endifreturn falseendfunctionfunction TJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CC4))set t=nullendfunctionfunction CD4 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and V51(GetUnitTypeId(GetFilterUnit()))==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(FKI))==trueendfunctionfunction CE4 takes nothing returns nothinglocal real x=GetUnitX(GetEnumUnit())local real y=GetUnitY(GetEnumUnit())local unit RMI=CreateUnit(GetOwningPlayer(FKI),1697657657,x,y,0)call UnitAddAbility(RMI,1093678419)call SetUnitAbilityLevel(RMI,1093678419,FLI)call IssueTargetOrder(RMI,"chainlightning",GetEnumUnit())call UnitApplyTimedLife(RMI,1112820806,3)call UnitAddAbility(RMI,1097625443)set RMI=nullendfunctionfunction CF4 takes nothing returns nothinglocal group g=NTI()set FKI=GetTriggerUnit()if GetSpellAbilityId()==1093810503 thenset FLI=GetUnitAbilityLevel(GetTriggerUnit(),1093810503)+4elseset FLI=GetUnitAbilityLevel(GetTriggerUnit(),1093810504)+7endifcall GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function CD4))call ForGroup(g,function CE4)call NSI(g)set g=nullendfunctionfunction CG4 takes nothing returns booleanif GetSpellAbilityId()==1093810503 or GetSpellAbilityId()==1093810504 thencall CF4()endifreturn falseendfunctionfunction JR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CG4))set t=nullendfunctionconstant function StaticField_RawCode takes nothing returns integerreturn 1093684789endfunctionconstant function StaticField_LightningCode takes nothing returns integerreturn 1093818193endfunctionconstant function StaticField_ArcLightningCode takes nothing returns integerreturn 1093677616endfunctionconstant function StaticField_WrathOfGodCode takes nothing returns integerreturn 1093810503endfunctionconstant function StaticField_WrathOfGod2Code takes nothing returns integerreturn 1093810504endfunctionfunction CH4 takes nothing returns booleanreturn(GetSpellAbilityId()==(1093818193)or GetSpellAbilityId()==(1093677616)or GetSpellAbilityId()==(1093810503)or GetSpellAbilityId()==(1093810504))and GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))>0endfunctionfunction CZ4 takes nothing returns nothinglocal real CV4=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)local real CW4=0.03+0.02*GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))local real PAI=CV4*CW4call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),PAI,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl",GetEnumUnit(),"overhead"))endfunctionfunction CX4 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==falseendfunctionfunction CY4 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())local group Z51=NTI()local real x=GetLocationX(BFO)local real y=GetLocationY(BFO)local boolexpr QL1=Condition(function CX4)call GroupEnumUnitsInRange(Z51,x,y,1225,QL1)call ForGroup(Z51,function CZ4)call RemoveLocation(BFO)call NSI(Z51)endfunctionfunction JT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CH4))call TriggerAddAction(t,function CY4)endfunctionfunction CJ4 takes nothing returns booleanreturn(RKI(GetFilterUnit())==false and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsHeroUnitId(GetUnitTypeId(GetFilterUnit()))endfunctionfunction CK4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01local integer SUI=GetUnitAbilityLevel(P7I,1093818193)local real PAI=25+SUI*75local group glocal real xlocal real yif SUI>=3 thenset PAI=PAI+25endifif P8I==null thenset g=NTI()set x=GetSpellTargetX()set y=GetSpellTargetY()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,325+25,Condition(function CJ4))set P8I=AU1(g,x,y)call NSI(g)set g=nullendifif P8I!=null thenset x=GetUnitX(P8I)set y=GetUnitY(P8I)call UUI(P7I,P8I)call PDI(P7I,P8I,1,PAI,0.25)endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656880,x,y,0)call IA1(I01,1093678419)call UnitApplyTimedLife(I01,1112820806,4.5)call SetUnitPathing(I01,false)call IA1(I01,1097625443)if P8I==null or IssueTargetOrder(I01,"chainlightning",P8I)==false thenset P8I=CreateUnit(GetOwningPlayer(P7I),1697656899,x,y,0)call UnitApplyTimedLife(P8I,1112820806,0.2)call IssueTargetOrder(I01,"chainlightning",P8I)endifset P7I=nullset P8I=nullset I01=nullendfunctionfunction CL4 takes nothing returns booleanif GetSpellAbilityId()==1093818193 and(GetSpellTargetUnit()==null or NNI(GetSpellTargetUnit())==false)thencall CK4()endifreturn falseendfunctionfunction JP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CL4))set t=nullendfunctionfunction CM4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))if GetTriggerEvalCount(t)>80 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset I01=nullreturn falseendfunctionfunction CN4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697657411,GetUnitX(P7I),GetUnitY(P7I),0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(I01,1093748301)call SetUnitAbilityLevel(I01,1093748301,GetUnitAbilityLevel(P7I,1093677616))call IssueTargetOrder(I01,"chainlightning",P8I)call UnitApplyTimedLife(I01,1112820806,10)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function CM4))set P7I=nullset P8I=nullset I01=nullset t=nullendfunctionfunction CS4 takes nothing returns booleanif GetSpellAbilityId()==1093677616 and NNI(GetSpellTargetUnit())==false thencall CN4()endifreturn falseendfunctionfunction JQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerAddCondition(t,Condition(function CS4))call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)set t=nullendfunctionconstant function DeathCoil_AbilityCode takes nothing returns integerreturn 1093683507endfunctionfunction CT4 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683507)and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or NNI(GetSpellTargetUnit())==false)endfunctionfunction CR4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real PAI=(LoadReal(LY,(S5I),(20)))call UnitDamageTarget(SFI,SFI,PAI,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call FlushChildHashtable(LY,(S5I))call PauseTimer(t)call DestroyTimer(t)endfunctionfunction CP4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real PAI=50+50*GetUnitAbilityLevel(SFI,(1093683507))local real CQ4=50+25*GetUnitAbilityLevel(SFI,(1093683507))local timer t=CreateTimer()local integer S5I=GetHandleId(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",P8I,"origin"))if IsUnitAlly(P8I,GetOwningPlayer(SFI))and GetUnitState(P8I,UNIT_STATE_LIFE)>1.00 thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+PAI)elsecall UnitDamageTarget(SFI,P8I,PAI,false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifcall SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(20),((CQ4)*1.0))call TimerStart(t,0,false,function CR4)endfunctionfunction ML1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CT4))call TriggerAddAction(t,function CP4)endfunctionfunction CU4 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(FMI),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093684554)call SetUnitAbilityLevel(I01,1093684554,FNI)call IssueTargetOrder(I01,"forkedlightning",GetEnumUnit())set I01=nullendfunctionfunction D04 takes unit P7I,unit P8I,integer SUI returns nothinglocal group g=NTI()set GK=P7Iset FNI=SUIset FMI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),700,Condition(function C81))call ForGroup(g,function CU4)call NSI(g)set g=nullendfunctionfunction DI4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real D14=(LoadReal(LY,(S5I),(362)))local unit P7Ilocal integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer SUIif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4250))))==1)==false thenif D14<GetEventDamage()thenset P7I=(LoadUnitHandle(LY,(S5I),(2)))set SUI=(LoadInteger(LY,(S5I),(5)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SaveBoolean(LY,(GetHandleId(P8I)),(363),(false))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call QGI(GetTriggerUnit(),D14)call D04(P7I,GetTriggerUnit(),SUI)elseif GetEventDamage()>0 thencall QGI(GetTriggerUnit(),GetEventDamage())call SaveReal(LY,(S5I),(362),((D14-GetEventDamage())*1.0))endifendifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif E31(GetSpellAbilityId())==true and GetSpellTargetUnit()==P8I thenset P7I=(LoadUnitHandle(LY,(S5I),(2)))set SUI=(LoadInteger(LY,(S5I),(5)))call SaveBoolean(LY,(GetHandleId(P8I)),(363),(false))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call D04(P7I,P8I,SUI)endifelseset P7I=(LoadUnitHandle(LY,(S5I),(2)))set SUI=(LoadInteger(LY,(S5I),(5)))call SaveBoolean(LY,(GetHandleId(P8I)),(363),(false))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call D04(P7I,P8I,SUI)endifset t=nullreturn falseendfunctionfunction DO4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093684550)local integer KAO=GetHandleId(P8I)local real D14if(LoadBoolean(LY,(KAO),(363)))==true thencall TriggerEvaluate((LoadTriggerHandle(LY,(KAO),(364))))endifcall UnitRemoveBuffs(P8I,false,true)call DU1(P8I,0,0)if SUI==1 thenset D14=110elseif SUI==2 thenset D14=140elseif SUI==3 thenset D14=170elseset D14=200endifcall SaveReal(LY,(S5I),(362),((D14)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",P8I,"chest")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,15,false)call TriggerAddCondition(t,Condition(function DI4))call SaveTriggerHandle(LY,(KAO),(364),(t))call SaveBoolean(LY,(KAO),(363),(true))set t=nullset P8I=nullset P7I=nullendfunctionfunction D24 takes nothing returns booleanif GetSpellAbilityId()==1093684550 thencall DO4()endifreturn falseendfunctionfunction D34 takes nothing returns nothingif GetUnitAbilityLevel(GetSpellTargetUnit(),1112433775)>0 thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652617))endifendfunctionfunction D44 takes nothing returns booleanif GetSpellAbilityId()==1093684550 thencall D34()endifreturn falseendfunctionfunction MN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function D44))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D24))set t=nullendfunctionfunction D54 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local trigger bt=(LoadTriggerHandle(LY,(S5I),(35)))if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)thencall TriggerRegisterUnitEvent(bt,GetTriggerUnit(),EVENT_UNIT_DAMAGED)endifset t=nullset bt=nullreturn falseendfunctionfunction D64 takes nothing returns nothingcall TriggerRegisterUnitEvent(FTI,GetEnumUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction D74 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetTriggerEventId()==EVENT_UNIT_DEATH or IssueImmediateOrder(SFI,"windwalk")thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullreturn falseendfunctionfunction D84 takes unit SFI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function D74))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullendfunctionfunction D94 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093684819)local integer DC1=3+SUIlocal real OA2local boolean DA4=falseif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747777)set DC1=4+1*SUIset DA4=trueendifif GetTriggerEventId()==EVENT_UNIT_DAMAGED and((LoadInteger(LY,(GetHandleId((P7I))),((4250))))==1)thenif SFI==P7I thencall QGI(SFI,GetEventDamage())call QGI(SFI,GetEventDamage())elseif DA4 and QLI(SFI,P7I)<900 and IsUnitAlly(SFI,GetOwningPlayer(P7I))thencall QGI(SFI,GetEventDamage()*0.35)call QGI(P7I,GetEventDamage()*0.35)endifelseif SFI==P7I and((GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093684819 or GetSpellAbilityId()==1093747777))or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and((LoadInteger(LY,(GetHandleId((SFI))),((4251))))==1)==false and GetUnitState(SFI,UNIT_STATE_LIFE)<400 and GetUnitAbilityLevel(SFI,1112433775)==0))thencall TimerStart(EJ0[GetPlayerId(GetOwningPlayer(SFI))],70-10*SUI,false,null)call SCI(SFI,4250,DC1)call SCI(SFI,4251,70-10*SUI)call UnitRemoveBuffs(SFI,false,true)call DU1(SFI,0,0)if GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall DisableTrigger(t)set FSI=trueif IssueImmediateOrder(SFI,"windwalk")==false thencall D84(SFI)endifset FSI=falsecall EnableTrigger(t)endifcall U5I("Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl",SFI,"origin",DC1)endifset t=nullset SFI=nullset P7I=nullreturn falseendfunctionfunction DB4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local group glocal region rcall SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D94))set FTI=tset g=NTI()call GroupEnumUnitsInRange(g,0,0,999999,Condition(function D61))call ForGroup(g,function D64)call NSI(g)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveTriggerHandle(LY,(S5I),(35),(FTI))set r=CreateRegion()call RegionAddRect(r,GetWorldBounds())call TriggerRegisterEnterRegion(t,r,Condition(function N1I))call TriggerAddCondition(t,Condition(function D54))set t=nullset P7I=nullset g=nullset r=nullendfunctionfunction DC4 takes nothing returns booleanif(GetLearnedSkill()==1093684819 or GetLearnedSkill()==1093747777)and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitAbilityLevel(GetTriggerUnit(),1093684819)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093747777)==1)thencall DB4()endifreturn falseendfunctionfunction MS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function DC4))set t=nullendfunctionconstant function MarkOfTheAbyss_AttackBuff takes nothing returns integerreturn 1110455862endfunctionconstant function MarkOfTheAbyss_EffectCode takes nothing returns integerreturn 1093684552endfunctionconstant function MarkOfTheAbyss_FrostmourneCode takes nothing returns integerreturn 1093684551endfunctionfunction DD4 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),(1110455862))>0 or GetUnitAbilityLevel(GetAttacker(),(1093684551))>0endfunctionfunction DE4 takes nothing returns nothinglocal unit Z4O=GetAttacker()local unit P8I=GetTriggerUnit()local unit SourceHerolocal integer SUI=GetUnitAbilityLevel(Z4O,(1093684551))local unit I01=CreateUnit(GetOwningPlayer(Z4O),1697656901,GetUnitX(Z4O),GetUnitY(Z4O),0)if SUI>0 thencall SaveInteger(LY,(GetHandleId(P8I)),(203),(SUI))elseset SUI=(LoadInteger(LY,(GetHandleId(P8I)),(203)))endifif IsUnitEnemy(P8I,GetOwningPlayer(Z4O))==true thencall IA1(I01,(1093684552))call SetUnitAbilityLevel(I01,(1093684552),SUI)call IssueTargetOrder(I01,"bloodlust",Z4O)endifendfunctionfunction MM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function DD4))call TriggerAddAction(t,function DE4)endfunctionfunction DF4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local real PAIlocal integer DC1local unit IWOif SUI==1 thenset PAI=16set DC1=10elseif SUI==2 thenset PAI=24set DC1=10elseif SUI==3 thenset PAI=32set DC1=10elseif SUI==4 thenset PAI=40set DC1=10endifif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093686065 and NNI(GetSpellTargetUnit())==false and P8I==GetSpellTargetUnit()thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH thenset IWO=GetKillingUnit()if RLI(IWO)thenset IWO=(K1[GetPlayerId(GetOwningPlayer((IWO)))])endifif GetTriggerUnit()==P8I or IWO==P8I thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093752627)call UnitRemoveAbility(P8I,1110459471)endifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==DC1 or GetUnitAbilityLevel(P8I,1110459471)==0 or RKI(P8I)==true thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093752627)call UnitRemoveAbility(P8I,1110459471)endifcall P6I(P7I,P8I,1,PAI)endifset t=nullset P7I=nullset P8I=nullset IWO=nullreturn falseendfunctionfunction DG4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093686065)local real PAIlocal real DC1call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl",P8I,"overhead"))call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093752627,false)call IA1(P8I,1093752627)call UnitMakeAbilityPermanent(P8I,true,1093752626)call TriggerRegisterTimerEvent(t,1,true)call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DF4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",P8I,"overhead")))set P7I=nullset P8I=nullset t=nullendfunctionfunction DH4 takes nothing returns nothingif GetUnitAbilityLevel(GetEnumUnit(),1110459471)>0 thenset FRI=FRI+1endifendfunctionfunction DZ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=NTI()set GK=P7Iset FRI=0call GroupEnumUnitsInRange(g,0,0,9999,Condition(function CA1))call ForGroup(g,function DH4)call NSI(g)if FRI==0 thenif GetUnitAbilityLevel(P7I,1110459738)>0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)endifelseif FRI==1 thenif GetUnitAbilityLevel(P7I,1093812562)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812562)endifelseif FRI==2 thenif GetUnitAbilityLevel(P7I,1093812563)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812563)endifelseif FRI==3 thenif GetUnitAbilityLevel(P7I,1093812565)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812565)endifelseif FRI==4 thenif GetUnitAbilityLevel(P7I,1093812564)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812564)endifelseif FRI==5 thenif GetUnitAbilityLevel(P7I,1093812561)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812561)endifelseif FRI>=6 thenif GetUnitAbilityLevel(P7I,1093812560)==0 thencall UnitRemoveAbility(P7I,1093812562)call UnitRemoveAbility(P7I,1093812563)call UnitRemoveAbility(P7I,1093812565)call UnitRemoveAbility(P7I,1093812564)call UnitRemoveAbility(P7I,1093812561)call UnitRemoveAbility(P7I,1093812560)call UnitRemoveAbility(P7I,1110459738)call UnitAddAbility(P7I,1093812560)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction DV4 takes nothing returns booleanif GetSpellAbilityId()==1093686065 and NNI(GetSpellTargetUnit())==false thencall DG4()endifreturn falseendfunctionfunction DW4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function DZ4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812562,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812563,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812565,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812564,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812561,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812560,false)set t=nullendfunctionfunction DX4 takes nothing returns booleanif GetLearnedSkill()==1093686065 and GetUnitAbilityLevel(GetTriggerUnit(),1093686065)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall DW4()endifreturn falseendfunctionfunction K21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DV4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function DX4))set t=nullendfunctionfunction DY4 takes nothing returns booleanreturn(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110454328)==0 and GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0 and GetUnitAbilityLevel(GetFilterUnit(),1113815346)==0endfunctionfunction DJ4 takes integer S5I,integer DK4 returns nothinglocal integer i=1loopexitwhen i>DK4call DestroyEffect((LoadEffectHandle(LY,(S5I),(2700+i))))set i=i+1endloopendfunctionfunction DL4 takes nothing returns nothingcall UnitWakeUp(GetEnumUnit())call IssueTargetOrder(GetEnumUnit(),"attack",FPI)endfunctionfunction DM4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(220)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer DK4=(LoadInteger(LY,(S5I),(365)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_ORDER thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==(8+2*SUI)or IC1(SFI)thencall UnitRemoveAbility(SFI,1093683509)call NSI(g)call DJ4(S5I,DK4)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DisableTrigger(t)set FPI=SFIcall ForGroup(g,function DL4)call EnableTrigger(t)endifelseif IsUnitInGroup(GetTriggerUnit(),g)==true and UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=851973 and FSI==false thencall DisableTrigger(t)call IssueTargetOrder(GetTriggerUnit(),"attack",SFI)call EnableTrigger(t)endifendifset t=nullset g=nullset SFI=nullreturn falseendfunctionfunction DN4 takes nothing returns nothingset UJ=UJ+1call SaveEffectHandle(LY,(SK),(2700+UJ),(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl",GetEnumUnit(),"chest")))endfunctionfunction DS4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093683510)local group g=NTI()call IA1(SFI,1093683509)call SetUnitAbilityLevel(SFI,1093683509,SUI)set GK=SFIset FPI=SFIset UJ=0set SK=S5Icall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),325,Condition(function DY4))call ForGroup(g,function DN4)call ForGroup(g,function DL4)call SaveInteger(LY,(S5I),(365),(UJ))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveGroupHandle(LY,(S5I),(220),(g))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))call TriggerRegisterTimerEvent(t,0.2,true)call UMI(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call UMI(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call UMI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function DM4))set t=nullset g=nullset SFI=nullendfunctionfunction DT4 takes nothing returns booleanif GetSpellAbilityId()==1093683510 thencall DS4()endifreturn falseendfunctionfunction K41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DT4))set t=nullendfunctionfunction DR4 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))call P6I(GetTriggerUnit(),GetEnumUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),1093681974)*35+65)endfunctionfunction DP4 takes nothing returns nothinglocal group glocal unit SFI=GetTriggerUnit()local integer NPI=(LoadInteger(LY,(GetHandleId(SFI)),(823)))if GetRandomReal(0,100)<(NPI+1)*5.570 thenset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),300,Condition(function C71))call ForGroup(g,function DR4)call SetUnitAnimation(SFI,"spin")call OE1(SFI,0.6)call SCI(SFI,4267,0.5-0.05*GetUnitAbilityLevel(GetTriggerUnit(),1093681974))call SaveInteger(LY,(GetHandleId(SFI)),(823),(0))call NSI(g)elsecall SaveInteger(LY,(GetHandleId(SFI)),(823),(NPI+1))endifset g=nullset SFI=nullendfunctionfunction DQ4 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1110455120)>0 and IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetAttacker(),UNIT_TYPE_MECHANICAL)==false and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4267))))==1)==false thencall DP4()endifreturn falseendfunctionfunction K31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function DQ4))set t=nullendfunctionfunction DU4 takes nothing returns nothingcall SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093814595,false)call AX1(GetEnumUnit(),1093814595,1,FQI,1110459990)endfunctionconstant function CullingBlade_RawCode takes nothing returns integerreturn 1093682482endfunctionfunction E04 takes nothing returns booleanreturn NNI(GetSpellTargetUnit())==false and(GetSpellAbilityId()==(1093682482)or GetSpellAbilityId()==1093750098)endfunctionfunction EI4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real D14=GetUnitState(P8I,UNIT_STATE_LIFE)local integer SUI=GetUnitAbilityLevel(SFI,(1093682482))local unit I01local boolean E14=falselocal group glocal integer EO4=250local integer E24=325local integer E34=400set FQI=6if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093750098)set E14=trueset EO4=300set E24=425set E34=550set FQI=10endifif(D14<=EO4 and SUI==1)or(D14<=E24 and SUI==2)or(D14<=E34 and SUI==3)thenif IsUnitType(P8I,UNIT_TYPE_HERO)thenif E14 thencall UnitRemoveAbility(SFI,1093750098)call UnitAddAbility(SFI,1093750098)call SetUnitAbilityLevel(SFI,1093750098,SUI)elsecall UnitRemoveAbility(SFI,1093682482)call UnitAddAbility(SFI,1093682482)call SetUnitAbilityLevel(SFI,1093682482,SUI)endifendifcall PlaySoundOnUnitBJ(FC,100,P8I)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",P8I,"overhead"))set I01=CreateUnit(GetOwningPlayer(SFI),1697656901,0,0,0)call UnitRemoveBuffs(P8I,true,true)call UnitRemoveAbility(P8I,1097167980)call UnitDamageTarget(I01,P8I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\AxeUltiMSFX_01.mdx",SFI,"origin"))set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),925,Condition(function CR1))call ForGroup(g,function DU4)call NSI(g)set g=nullendifendfunctionfunction K51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E04))call TriggerAddAction(t,function EI4)endfunctionfunction E44 takes nothing returns booleanreturn GetSpellAbilityId()==1093683019 and NNI(GetSpellTargetUnit())==falseendfunctionfunction E54 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 thencall SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019))endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetSpellTargetUnit(),"origin"))endfunctionfunction E64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01if GetUnitAbilityLevel(P8I,1110454854)==0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093678169,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816121,false)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetTriggerUnit()==P8I thencall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093678169,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816121,false)call UnitRemoveAbility(P8I,1110454854)set I01=CreateUnit(p,1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093678169)call SetUnitAbilityLevel(I01,1093678169,SUI)call IssueTargetOrder(I01,"sleep",GetAttacker())call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitState(P8I,UNIT_STATE_LIFE)>21 thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)-20)elsecall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093678169,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816121,false)call UnitRemoveAbility(P8I,1110454854)call P6I(P7I,P8I,1,50)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset p=nullset I01=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction E74 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)set S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(P7I)))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(P7I,1093678169)))call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function E64))if GetUnitAbilityLevel(P8I,1093678169)>0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093678169,false)call IA1(P8I,1093816121)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816121,true)endifset NY0=truecall P6I(P7I,P8I,2,0)set NY0=falseset P7I=nullset P8I=nullset t=nullendfunctionfunction E84 takes nothing returns booleanif GetSpellAbilityId()==1093678169 and RYI(GetSpellTargetUnit())==false thencall E74()endifreturn falseendfunctionfunction E94 takes nothing returns booleanif GetSpellAbilityId()==1093678169 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thenif GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetSpellTargetUnit())and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendifreturn falseendfunctionfunction EA4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1110454854)call UnitRemoveAbility(P7I,1093816121)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093678169,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093816121,false)set t=nullset P7I=nullreturn falseendfunctionfunction EB4 takes nothing returns booleanlocal trigger tif GetIssuedOrderId()==String2OrderIdBJ("manashieldon")and GetUnitAbilityLevel(GetTriggerUnit(),1093816121)>0 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function EA4))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(GetTriggerUnit()))endifreturn falseendfunctionfunction K61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E84))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function E94))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function EB4))set t=nullendfunctionfunction EC4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real OA2local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer MKO=6local unit I01local integer SUIlocal fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))if GetUnitAbilityLevel(P7I,1093747769)>0 thenset MKO=8endifif GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thencall FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)call SaveBoolean(LY,(GetHandleId(P7I)),(4344),(false))elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif(LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(4344)))thenset SUI=GetUnitAbilityLevel(P7I,1093678169)if SUI>0 and GetUnitAbilityLevel(P7I,1093747769)>0 thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),0)call IA1(I01,1093678169)call SetUnitAbilityLevel(I01,1093678169,SUI)call IssueTargetOrder(I01,"sleep",GetAttacker())endifendifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI>MKO thencall FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)call PJI(P7I)elseset OA2=RMinBJ(0.05*GetUnitState(P8I,UNIT_STATE_MAX_MANA),GetUnitState(P8I,UNIT_STATE_MANA))if GetUnitAbilityLevel(P7I,1093747769)>0 thenset OA2=RMinBJ(0.1*GetUnitState(P8I,UNIT_STATE_MAX_MANA),GetUnitState(P8I,UNIT_STATE_MANA))endifif OA2>0 thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+OA2)call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-OA2)endifendifendifset t=nullset P7I=nullset P8I=nullset I31=nullreturn falseendfunctionfunction ED4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local fogmodifier I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,GetUnitX(P8I),GetUnitY(P8I),350,true,true)call FogModifierStart(I31)call UnitRemoveAbility(P8I,1110454854)call UnitRemoveAbility(P8I,1112896368)call UnitRemoveAbility(P8I,1114993524)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function EC4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveFogModifierHandle(LY,(S5I),(42),(I31))call SaveBoolean(LY,(GetHandleId(P7I)),(4344),(true))set P7I=nullset P8I=nullset t=nullset I31=nullendfunctionfunction EE4 takes nothing returns booleanif GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769 thencall ED4()endifreturn falseendfunctionfunction K71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EE4))set t=nullendfunctionfunction EF4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(789)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))thencall UnitRemoveAbility(P8I,1093816135)call UnitRemoveAbility(P8I,1093816129)call UnitRemoveAbility(P8I,1093816134)call UnitRemoveAbility(P8I,1093816136)call UnitRemoveAbility(P8I,1110460229)endifset t=nullset P8I=nullreturn falseendfunctionfunction EG4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093816137)if SUI==1 thencall UnitRemoveAbility(P8I,1110460229)call UnitRemoveAbility(P8I,1093816129)call UnitRemoveAbility(P8I,1093816134)call UnitRemoveAbility(P8I,1093816136)call IA1(P8I,1093816135)call UnitMakeAbilityPermanent(P8I,true,1093816132)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816135,false)elseif SUI==2 thencall UnitRemoveAbility(P8I,1110460229)call UnitRemoveAbility(P8I,1093816135)call UnitRemoveAbility(P8I,1093816134)call UnitRemoveAbility(P8I,1093816136)call IA1(P8I,1093816129)call UnitMakeAbilityPermanent(P8I,true,1093816133)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816129,false)elseif SUI==3 thencall UnitRemoveAbility(P8I,1110460229)call UnitRemoveAbility(P8I,1093816135)call UnitRemoveAbility(P8I,1093816129)call UnitRemoveAbility(P8I,1093816136)call IA1(P8I,1093816134)call UnitMakeAbilityPermanent(P8I,true,1093816131)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816134,false)elseif SUI==4 thencall UnitRemoveAbility(P8I,1110460229)call UnitRemoveAbility(P8I,1093816135)call UnitRemoveAbility(P8I,1093816129)call UnitRemoveAbility(P8I,1093816134)call IA1(P8I,1093816136)call UnitMakeAbilityPermanent(P8I,true,1093816130)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093816136,false)endifcall TriggerRegisterTimerEvent(t,20,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function EF4))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(GetHandleId(P8I)),(789),((19.9+(TimerGetElapsed(M)))*1.0))set t=nullset P7I=nullset P8I=nullendfunctionfunction EH4 takes nothing returns booleanif GetSpellAbilityId()==1093816137 and NNI(GetSpellTargetUnit())==false thencall EG4()endifreturn falseendfunctionfunction K81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EH4))set t=nullendfunctionfunction EZ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(GetHandleId(P8I)),(281)))local boolean EV4=(LoadBoolean(LY,(S5I),(280)))local real DH1if GetTriggerEventId()==EVENT_UNIT_DEATH thencall SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I))call SaveInteger(LY,(GetHandleId(P8I)),(281),(0))call FlushChildHashtable(LY,(S5I))call S0I(t)call DU1(P8I,0,0)elseif NPI==0 thencall SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I))call SaveInteger(LY,(GetHandleId(P8I)),(281),(0))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and EV4==false thenif NPI>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093748044)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall SaveBoolean(LY,(S5I),(280),(true))if G8I thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",P8I,"chest"))set DH1=0.5*(5+5*GetUnitAbilityLevel(P7I,1093748044))*NPIelseif MZ0==false and GetEventDamage()>12 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",P8I,"chest"))set DH1=(5+5*GetUnitAbilityLevel(P7I,1093748044))*NPIendifif IsUnitType(P8I,UNIT_TYPE_HERO)==false thenset DH1=DH1*0.5endifif G8I thencall P6I(P7I,P8I,1,DH1)elseif MZ0==false and GetEventDamage()>12 thencall P6I(P7I,P8I,1,DH1)endifcall SaveBoolean(LY,(S5I),(280),(false))endifelsecall SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I)*0.3)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction EW4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real Z7O=(LoadReal(LY,(GetHandleId(P8I)),(675)))local integer StickyCount=(LoadInteger(LY,(GetHandleId(P8I)),(281)))if(TimerGetElapsed(M))-Z7O>=8 thencall SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I))call SaveInteger(LY,(GetHandleId(P8I)),(281),(0))call DU1(P8I,0,0)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction EX4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093748044)local integer NPI=IMinBJ((LoadInteger(LY,(GetHandleId(P8I)),(281)))+1,10)if RKI(P8I)thenset P7I=nullset P8I=nullreturnendifcall DU1(P8I,SUI,NPI)call SaveInteger(LY,(GetHandleId(P8I)),(281),(NPI))call SaveReal(LY,(GetHandleId(P8I)),(675),(((TimerGetElapsed(M)))*1.0))call SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I)*0.3)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thencall UKI(GetOwningPlayer(P7I),I2S(NPI)+"!",2,P8I,0.026,50,0,255,216)endifif NPI==1 thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveBoolean(LY,(S5I),(280),(false))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function EZ4))endifset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,8,false)call TriggerAddCondition(t,Condition(function EW4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction EY4 takes nothing returns nothinglocal group g=NTI()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local unit P7I=GetTriggerUnit()call GroupEnumUnitsInRange(g,x,y,400,Condition(function C51))call ForGroup(g,function EX4)call I41(GetOwningPlayer(P7I),2,x,y,500)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y+130))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y-130))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y+130))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+130,y-130))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y+130))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-130,y-130))call RemoveLocation(l)call NSI(g)set g=nullset l=nullset P7I=nullendfunctionfunction EJ4 takes nothing returns booleanif GetSpellAbilityId()==1093748044 thencall EY4()endifreturn falseendfunctionfunction TM1 takes nothing returns nothinglocal integer ilocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EJ4))set FUI[1]=1093752899set FUI[2]=1093752898set FUI[3]=1093752884set FUI[4]=1093752885set FUI[5]=1093752886set FUI[6]=1093752887set FUI[7]=1093752897set FUI[8]=1093752888set FUI[9]=1093752889set FUI[10]=1093752900set G0I[1]=1093752909set G0I[2]=1093752901set G0I[3]=1093752902set G0I[4]=1093752903set G0I[5]=1093752904set G0I[6]=1093752905set G0I[7]=1093752906set G0I[8]=1093752907set G0I[9]=1093752910set G0I[10]=1093752908set GII[1]=1093752911set GII[2]=1093752918set GII[3]=1093752919set GII[4]=1093752913set GII[5]=1093752914set GII[6]=1093752915set GII[7]=1093752920set GII[8]=1093752916set GII[9]=1093752917set GII[10]=1093752912set G1I[1]=1093752921set G1I[2]=1093752922set G1I[3]=1093753141set G1I[4]=1093753142set G1I[5]=1093753143set G1I[6]=1093753137set G1I[7]=1093753138set G1I[8]=1093753139set G1I[9]=1093753140set G1I[10]=1093753136set i=1loopexitwhen i>10call Q1I(FUI[i])set i=i+1endloopset i=1loopexitwhen i>10call Q1I(G0I[i])set i=i+1endloopset i=1loopexitwhen i>10call Q1I(GII[i])set i=i+1endloopset i=1loopexitwhen i>10call Q1I(G1I[i])set i=i+1endloopset t=nullendfunctionfunction EK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real a=(LoadReal(LY,(S5I),(137)))local real d=(LoadReal(LY,(S5I),(138)))local real x1=(LoadReal(LY,(S5I),(6)))local real y1=(LoadReal(LY,(S5I),(7)))local real x2local real y2local real xlocal real yif GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>10 thencall UPI(GetUnitX(P8I),GetUnitY(P8I),200)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset x2=x1+d*Cos(a)set y2=y1+d*Sin(a)if(IsPointInRegion(LN,((x2)*1.0),((y2)*1.0)))==false thencall SaveReal(LY,(S5I),(6),((x2)*1.0))call SaveReal(LY,(S5I),(7),((y2)*1.0))set x=x2set y=y2elseset x=x1set y=y1endifif IsUnitType(P8I,UNIT_TYPE_HERO)==true thencall SetUnitPosition(P8I,x,y)elsecall SetUnitX(P8I,x)call SetUnitY(P8I,y)endifendifset t=nullset P8I=nullreturn falseendfunctionfunction EL4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093744982)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function EK4))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(137),((Atan2(GetUnitY(P8I)-G5I,GetUnitX(P8I)-G4I))*1.0))call SaveReal(LY,(S5I),(138),((QDI((400-QNI(G4I,G5I,GetUnitX(P8I),GetUnitY(P8I))),10)/10)*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P8I))*1.0))set P7I=nullset P8I=nullset t=nullcall P6I(GOI,GetEnumUnit(),1,G3I*75)endfunctionfunction EM4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real a=(LoadReal(LY,(S5I),(137)))local group g=NTI()local unit P8Ilocal real x=GetUnitX(I01)local real y=GetUnitY(I01)local real EN4=(LoadReal(LY,(S5I),(6)))local real ES4=(LoadReal(LY,(S5I),(7)))set x=PTI(x+36*Cos(a))set y=PUI(y+36*Sin(a))call SetUnitX(I01,x)call SetUnitY(I01,y)set GK=I01call GroupEnumUnitsInRange(g,x,y,125,Condition(function CE1))set P8I=FirstOfGroup(g)call NSI(g)if QNI(x,y,EN4,ES4)<40 or GetTriggerEvalCount(t)>100 thenset P8I=nullset x=EN4set y=ES4set GOI=P7Iset G3I=(LoadInteger(LY,(S5I),(5)))set G2I=P8Iif P8I==null thenset G4I=xset G5I=yelseset G4I=GetUnitX(P8I)set G5I=GetUnitY(P8I)endifset g=NTI()call GroupEnumUnitsInRange(g,x,y,400,Condition(function CE1))if P8I!=null thencall GroupRemoveUnit(g,P8I)call DD1(P7I,P8I,0.3)call P6I(GOI,P8I,1,G3I*75)endifcall ForGroup(g,function EL4)call KillUnit(I01)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset I01=nullset P7I=nullset g=nullreturn falseendfunctionfunction ET4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093744982)local unit I01call RemoveLocation(l)set I01=CreateUnit(GetOwningPlayer(P7I),1747993924,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call TriggerRegisterTimerEvent(t,0.04,true)call TriggerAddCondition(t,Condition(function EM4))set P7I=nullset I01=nullset l=nullset t=nullendfunctionfunction ER4 takes nothing returns booleanif GetSpellAbilityId()==1093744982 thencall ET4()endifreturn falseendfunctionfunction TN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ER4))set t=nullendfunctionfunction EP4 takes nothing returns nothinglocal unit P7I=G6Ilocal unit JMO=GetEnumUnit()local unit P8Ilocal group gif GetUnitCurrentOrder(JMO)==0 thenset g=NTI()set GK=JMOcall GroupEnumUnitsInRange(g,GetUnitX(JMO),GetUnitY(JMO),825,Condition(function CA1))set P8I=FirstOfGroup(g)if P8I!=null thencall GroupRemoveUnit(g,P8I)endifif FirstOfGroup(g)==null and P8I==P7I thencall IssueTargetOrder(JMO,"attack",P8I)endifcall NSI(g)set P8I=nullset g=nullendifset P7I=nullset JMO=nullendfunctionfunction EQ4 takes unit P7I returns nothinglocal group g=NTI()set GK=P7Iset G6I=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1000,Condition(function DA1))call ForGroup(g,function EP4)call NSI(g)set g=nullendfunctionfunction EU4 takes nothing returns nothingcall P6I(G6I,GetEnumUnit(),1,G9I*10)endfunctionfunction F04 takes unit P7I,integer S5I,integer NPI returns nothinglocal group g1=NTI()local group g2=NTI()local integer i=0set GK=P7Iloopexitwhen i>NPIcall GroupEnumUnitsInRange(g2,(LoadReal(LY,(S5I),(2300+i))),(LoadReal(LY,(S5I),(2500+i))),225,Condition(function CA1))call GroupAddGroup(g2,g1)call GroupClear(g2)set i=i+1endloopcall NSI(g2)if FirstOfGroup(g1)!=null thenset G6I=P7Iset G9I=GetUnitAbilityLevel(P7I,1093744986)set G7I=CreateUnit(GetOwningPlayer(P7I),1697656901,0,0,0)call IA1(G7I,1093744981)call SetUnitAbilityLevel(G7I,1093744981,G9I)call ForGroup(g1,function EU4)endifcall NSI(g1)set g1=nullset g2=nullendfunctionfunction FI4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer ilocal real xlocal real yif GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>360 thenset i=0loopexitwhen i>NPIcall DestroyEffect((LoadEffectHandle(LY,(S5I),(2700+i))))set i=i+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)elseset x=GetUnitX(P7I)set y=GetUnitY(P7I)if C2==true thencall EQ4(P7I)endifif QNI(x,y,II3,I13)>125 thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))call SaveEffectHandle(LY,(S5I),(2700+NPI),(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y)))call SaveReal(LY,(S5I),(2300+NPI),((x)*1.0))call SaveReal(LY,(S5I),(2500+NPI),((y)*1.0))endifif ModuloInteger(GetTriggerEvalCount(t),10)==0 thenset G8I=truecall F04(P7I,S5I,NPI)set G8I=falseendifcall UPI(GetUnitX(P7I),GetUnitY(P7I),100)endifreturn falseendfunctionfunction F14 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function FI4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveEffectHandle(LY,(S5I),(2700),(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",GetUnitX(P7I),GetUnitY(P7I))))call SaveReal(LY,(S5I),(23),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(2300),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(2500),((GetUnitY(P7I))*1.0))set P7I=nullset t=nullendfunctionfunction FO4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if IC1(P7I)thenreturn falseendifif GetUnitTypeId(P7I)==1328558390 thencall SetUnitFlyHeight(P7I,170,0)elseif GetUnitTypeId(P7I)==1328558391 thencall SetUnitFlyHeight(P7I,220,0)endifset t=nullset P7I=nullreturn falseendfunctionfunction F24 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,2,true)call TriggerAddCondition(t,Condition(function FO4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction F34 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction F44 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function F34))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set P7I=nullset t=nullendfunctionfunction F54 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093744986 thenif GetUnitTypeId(GetTriggerUnit())==1328558390 thencall F14()elseif IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)thencall F44()endifendifelseif GetLearnedSkill()==1093744986 and GetUnitAbilityLevel(GetTriggerUnit(),1093744986)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall F24()endifendifreturn falseendfunctionfunction TS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function F54))set t=nullendfunctionfunction F64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real d=QNI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))local real alocal real DC1=(LoadReal(LY,(S5I),(57)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local real x1local real y1if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>R2I(20*DC1)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call SetUnitPathing(P8I,true)call BP1(P7I)call UPI(GetUnitX(P8I),GetUnitY(P8I),175)elsecall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))if QNI(x0,y0,GetUnitX(P7I),GetUnitY(P7I))>400 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call SetUnitPathing(P8I,true)call BP1(P7I)call UPI(GetUnitX(P8I),GetUnitY(P8I),175)elsecall SaveReal(LY,(S5I),(282),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(283),((GetUnitY(P7I))*1.0))if d>300 thenset a=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))set x1=GetUnitX(P7I)+300*Cos(a)set y1=GetUnitY(P7I)+300*Sin(a)if(IsPointInRegion(LN,((x1)*1.0),((y1)*1.0)))==false thencall SetUnitX(P8I,x1)call SetUnitY(P8I,y1)endifendifendifendifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction F74 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1966092377,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093744975)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093750102)+2endifcall IA1(I01,1093744974)call SetUnitAbilityLevel(I01,1093744974,GetUnitAbilityLevel(P7I,1093744975))call IssueTargetOrder(I01,"magicleash",P8I)call SetUnitPathing(I01,false)call SetUnitPathing(P8I,false)call BT1(P7I)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function F64))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(57),((2.5+SUI*0.5)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\AerialShackles\\AerialShacklesTarget.mdl",P8I,"chest")))call SaveReal(LY,(S5I),(282),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(283),((GetUnitY(P7I))*1.0))set t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction F84 takes nothing returns booleanif(GetSpellAbilityId()==1093744975 or GetSpellAbilityId()==1093750102)and NNI(GetSpellTargetUnit())==false and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 thencall F74()endifreturn falseendfunctionfunction TT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F84))set t=nullendfunctionfunction F94 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real d=SquareRoot((II3-x)*(II3-x)+(I13-y)*(I13-y))local real VZ3=0.2*SUI*dlocal integer KO2=(LoadInteger(LY,(S5I),(25)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitRemoveAbility(P8I,1093683528)call UnitRemoveAbility(P8I,1110456396)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendifif d>1300 thenset VZ3=0endifif VZ3>5 thencall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P8I,"origin"))endifif((LoadInteger(LY,(GetHandleId((P8I))),((2485))))==1)and VZ3>=GetUnitState(P8I,UNIT_STATE_LIFE)-2 thenset VZ3=GetUnitState(P8I,UNIT_STATE_LIFE)-2endifif RYI(P8I)thenset VZ3=0endifif VZ3>0 and IC1(P8I)==false and BL1(P8I)==false thencall P6I(P7I,P8I,6,VZ3)endifcall SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))call SaveInteger(LY,(S5I),(25),(KO2+1))if IC1(P8I)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif KO2>4*(12)thencall UnitRemoveAbility(P8I,1093683528)call UnitRemoveAbility(P8I,1110456396)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction FA4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093684296)local real PAI=50+100*SUIcall IA1(P8I,1093683528)call SetUnitAbilityLevel(P8I,1093683528,SUI)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P8I,"chest"))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call SaveInteger(LY,(S5I),(25),(0))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function F94))call TriggerRegisterDeathEvent(t,P8I)set P7I=nullset P8I=nullset t=nullendfunctionfunction FB4 takes nothing returns booleanif GetSpellAbilityId()==1093684296 and NNI(GetSpellTargetUnit())==false thencall FA4()endifreturn falseendfunctionfunction KC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FB4))set t=nullendfunctionfunction FC4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real H71=(LoadReal(LY,(S5I),(6)))local real H81=(LoadReal(LY,(S5I),(7)))call H61(P7I,H71,H81,H21(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set t=nullset P7I=nullreturn falseendfunctionfunction FD4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer i=0local player ploopexitwhen i>5set p=BO[i]if GGI[GetPlayerId(p)]==null or IsPlayerAlly(GetOwningPlayer(P7I),p)==true or BM1(GGI[GetPlayerId(p)])thencall SetUnitX(GFI[GetPlayerId(p)],P4I(P7I))call SetUnitY(GFI[GetPlayerId(p)],P5I(P7I))elseif IsUnitVisible(GGI[GetPlayerId(p)],GetOwningPlayer(P7I))==false thencall KillUnit(CreateUnit(GetOwningPlayer(P7I),1865429571,GetUnitX(GGI[GetPlayerId(p)]),GetUnitY(GGI[GetPlayerId(p)]),0))endifcall SetUnitX(GFI[GetPlayerId(p)],GetUnitX(GGI[GetPlayerId(p)]))call SetUnitY(GFI[GetPlayerId(p)],GetUnitY(GGI[GetPlayerId(p)]))endifset p=CO[i]if GGI[GetPlayerId(p)]==null or IsPlayerAlly(GetOwningPlayer(P7I),p)==true or BM1(GGI[GetPlayerId(p)])thencall SetUnitX(GFI[GetPlayerId(p)],P4I(P7I))call SetUnitY(GFI[GetPlayerId(p)],P5I(P7I))elseif IsUnitVisible(GGI[GetPlayerId(p)],GetOwningPlayer(P7I))==false thencall KillUnit(CreateUnit(GetOwningPlayer(P7I),1865429571,GetUnitX(GGI[GetPlayerId(p)]),GetUnitY(GGI[GetPlayerId(p)]),0))endifcall SetUnitX(GFI[GetPlayerId(p)],GetUnitX(GGI[GetPlayerId(p)]))call SetUnitY(GFI[GetPlayerId(p)],GetUnitY(GGI[GetPlayerId(p)]))endifset i=i+1endloopset p=nullset t=nullset P7I=nullreturn falseendfunctionfunction FE4 takes unit P8I,player p,boolean ZXO returns nothingif ZXO thenset GGI[GetPlayerId(GetOwningPlayer(P8I))]=P8Ielseset GGI[GetPlayerId(GetOwningPlayer(P8I))]=nullendifendfunctionfunction FF4 takes nothing returns nothinglocal unit I01if BU1(GetEnumUnit())==false thencall UnitRemoveAbility(GetEnumUnit(),1113875828)call FE4(GetEnumUnit(),GetOwningPlayer(GDI),true)elsecall FE4(GetEnumUnit(),GetOwningPlayer(GDI),true)if GetUnitAbilityLevel(GetEnumUnit(),1113875828)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454356)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454348)==0 thenset I01=CreateUnit(GetOwningPlayer(GDI),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call UnitAddAbility(I01,1093817943)call IssueImmediateOrderById(I01,852625)set I01=nullendifendifendfunctionfunction FG4 takes nothing returns nothinglocal real JC3=0.3if IC1(GDI)==true or IsUnitInGroup(GetEnumUnit(),GCI)==false or GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>JC3 or(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>JC3/2 and BU1(GetEnumUnit())==true)thencall GroupRemoveUnit(GBI,GetEnumUnit())call FE4(GetEnumUnit(),GetOwningPlayer(GDI),false)call UnitRemoveAbility(GetEnumUnit(),1113875828)endifendfunctionfunction FH4 takes nothing returns nothinglocal real JC3if IC1(GDI)==false and IsUnitInGroup(GetEnumUnit(),GBI)==false and IsUnitIllusion(GetEnumUnit())==false thenset JC3=0.3if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<JC3 thencall GroupAddUnit(GBI,GetEnumUnit())endifendifendfunctionfunction FZ4 takes nothing returns nothinglocal real JC3if IC1(GDI)==false and IsUnitIllusion(GetEnumUnit())==false thenset GZI=GZI+1set GHI=GHI+(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))endifendfunctionfunction FV4 takes unit P7I,integer E01 returns nothinglocal integer i=1if E01==0 thencall UnitRemoveAbility(P7I,1110455634)call G21(P7I,0)elsecall G21(P7I,E01*5)endifset i=1loopexitwhen i>20if i!=E01 thencall UnitRemoveAbility(P7I,GAI[i])elseif GetUnitAbilityLevel(P7I,GAI[i])==0 thencall UnitRemoveAbility(P7I,1110455634)call UnitAddAbility(P7I,GAI[i])endifset i=i+1endloopendfunctionfunction FW4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group FX4=(LoadGroupHandle(LY,(S5I),(22)))local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093683512)local integer E01=0local real FY4local real FJ4=0set GK=P7Iset GDI=P7Iset GBI=FX4set GEI=SUIset GHI=0set GZI=0call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),25+25000,Condition(function DO1))call ForGroup(g,function FZ4)call NSI(g)if GZI>0 thenset FY4=GZI-GHIset FJ4=(FY4*SUI*10)set E01=IMinBJ(R2I(FJ4/5),20)endifset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),25+25000,Condition(function DO1))call ForGroup(g,function FH4)set GCI=gcall ForGroup(GBI,function FG4)call ForGroup(GBI,function FF4)if E01==0 thencall FV4(P7I,E01)call SaveInteger(LY,(GetHandleId(P7I)),(814),(0))elsecall FV4(P7I,E01)call SaveInteger(LY,(GetHandleId(P7I)),(814),(E01))endifif E01<5 thencall UnitRemoveAbility(P7I,1093808436)elsecall IA1(P7I,1093808436)endifcall NSI(g)set t=nullset P7I=nullset g=nullset FX4=nullreturn falseendfunctionfunction FK4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local player pcall TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function FW4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(22),(NTI()))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.04,true)call TriggerAddCondition(t,Condition(function FD4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.005,true)call TriggerAddCondition(t,Condition(function FC4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set p=BO[1]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=BO[2]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=BO[3]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=BO[4]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=BO[5]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=CO[1]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=CO[2]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=CO[3]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=CO[4]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset p=CO[5]set GFI[GetPlayerId(p)]=CreateUnit(GetOwningPlayer(P7I),1865429570,P4I(P7I),P5I(P7I),0)set GGI[GetPlayerId(p)]=nullset t=nullset P7I=nullendfunctionfunction FL4 takes nothing returns booleanif GetLearnedSkill()==1093683512 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683512)==1 thencall FK4()endifreturn falseendfunctionfunction KA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function FL4))set GAI[1]=1093817656set GAI[2]=1093808215set GAI[3]=1093817657set GAI[4]=1093817654set GAI[5]=1093817655set GAI[6]=1093817667set GAI[7]=1093817668set GAI[8]=1093817665set GAI[9]=1093817666set GAI[10]=1093808218set GAI[11]=1093817670set GAI[12]=1093817669set GAI[13]=1093817671set GAI[14]=1093817672set GAI[15]=1093808216set GAI[16]=1093817676set GAI[17]=1093817676set GAI[18]=1093808217set GAI[19]=1093817674set GAI[20]=1093817673set t=nullendfunctionfunction FM4 takes nothing returns nothingcall P6I(GVI,GetEnumUnit(),1,80+40*GWI)endfunctionfunction FN4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093818425)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)local group g=NTI()call IA1(I01,1093873729)call SetUnitAbilityLevel(I01,1093873729,SUI)call IssuePointOrder(I01,"silence",x,y)set GK=P7Iset GVI=P7Iset GWI=SUIcall GroupEnumUnitsInRange(g,x,y,600+25,Condition(function CA1))call ForGroup(g,function FM4)call IO1(OG,x,y)call NSI(g)call DestroyEffect(AddSpecialEffect(GXI,x,y))call DestroyEffect(AddSpecialEffect(GXI,x+200,y))call DestroyEffect(AddSpecialEffect(GXI,x+200,y-200))call DestroyEffect(AddSpecialEffect(GXI,x+200,y+200))call DestroyEffect(AddSpecialEffect(GXI,x-200,y-200))call DestroyEffect(AddSpecialEffect(GXI,x,y+200))call DestroyEffect(AddSpecialEffect(GXI,x-200,y+200))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction FS4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call I41(GetOwningPlayer(P7I),3,x,y,600)call TriggerRegisterTimerEvent(t,3,false)call TriggerAddCondition(t,Condition(function FN4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call DestroyEffect(AddSpecialEffect("war3mapImported\\Bloodrite.mdx",x,y))call IO1(IG,x,y)set t=nullset P7I=nullendfunctionfunction FT4 takes nothing returns booleanif GetSpellAbilityId()==1093818425 thencall FS4()endifreturn falseendfunctionfunction K91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FT4))set t=nullendfunctionfunction FR4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093873969)if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GYI and(P8I==GetEventDamageSource()or P8I==GetTriggerUnit())thenset GYI=falsecall P6I(GetEventDamageSource(),GetTriggerUnit(),3,GetEventDamage()*(20+5*SUI)/100)set GYI=trueendifelseif GetTriggerEventId()==EVENT_UNIT_DEATH thenif GetKillingUnit()==P8I or GetTriggerUnit()==P8I thencall SetUnitState(GetKillingUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*0.25+GetUnitState(GetKillingUnit(),UNIT_STATE_LIFE))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetKillingUnit(),"origin"))elseif GetOwningPlayer(GetKillingUnit())==GetOwningPlayer(P8I)and GetUnitAbilityLevel(GetKillingUnit(),1093678162)>0 thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_MAX_LIFE)*0.25+GetUnitState(P8I,UNIT_STATE_LIFE))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",P8I,"origin"))endifif GetTriggerUnit()==P8I thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction FP4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093873969)local unit ucall TriggerRegisterTimerEvent(t,8+SUI,false)call TriggerAddCondition(t,Condition(function FR4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",P8I,"hand,right")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",P8I,"hand,left")))call GroupEnumUnitsInRange(g,0,0,99999,Condition(function CO1))loopset u=FirstOfGroup(g)exitwhen u==nullcall GroupRemoveUnit(g,u)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)endloopcall NSI(g)set u=nullset t=nullset P7I=nullset P8I=nullset g=nullendfunctionfunction FQ4 takes nothing returns booleanif GetSpellAbilityId()==1093873969 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or NNI(GetSpellTargetUnit())==false thencall FP4()endifendifreturn falseendfunctionfunction FU4 takes nothing returns booleanif GetSpellAbilityId()==1093873969 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifreturn falseendfunctionfunction KB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function FU4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FQ4))set t=nullendfunctionfunction G04 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit GI4local integer S5I=GetHandleId(P7I)local integer SUI=GetUnitAbilityLevel(P7I,1093818963)local integer G14=(LoadInteger(LY,(S5I),(279)))local unit GO4=(LoadUnitHandle(LY,(S5I),(1400+1)))local integer x=1local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(830)))if JGO>0 thenset GI4=CreateUnit(GetOwningPlayer(P7I),1865429043,GetSpellTargetX(),GetSpellTargetY(),GetRandomReal(0,360))set G14=G14+1call SaveUnitHandle(LY,(S5I),(1400+G14),(GI4))call SetUnitAbilityLevel(GI4,1093681734,SUI)if(G14>SUI*2)thencall KillUnit(GO4)loopexitwhen x==G14call SaveUnitHandle(LY,(S5I),(1400+x),((LoadUnitHandle(LY,(S5I),(1400+x+1)))))set x=x+1endloopset G14=G14-1endifcall SaveInteger(LY,(S5I),(279),(G14))call UnitRemoveAbility(P7I,GJI[JGO])set JGO=JGO-1call SaveInteger(LY,(GetHandleId(P7I)),(830),(JGO))call IA1(P7I,GJI[JGO])elsecall PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659545))endifset P7I=nullset GI4=nullset GO4=nullendfunctionfunction G24 takes nothing returns booleanif GetSpellAbilityId()==1093818965 or GetSpellAbilityId()==1093818968 or GetSpellAbilityId()==1093818967 or GetSpellAbilityId()==1093818964 or GetSpellAbilityId()==1093818966 thencall G04()endifreturn falseendfunctionfunction G34 takes unit G44 returns nothinglocal integer S5I=GetHandleId(G44)local integer SUI=GetUnitAbilityLevel(G44,1093818963)local integer G14=(LoadInteger(LY,(S5I),(279)))local integer x=1local unit GV2loopexitwhen x>G14set GV2=(LoadUnitHandle(LY,(S5I),(1400+x)))call SetUnitAbilityLevel(GV2,1093681734,SUI)set x=x+1endloopendfunctionfunction G54 takes nothing returns booleanreturn GetLearnedSkill()==1093818963 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction G64 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit G44=(LoadUnitHandle(LY,(S5I),(366)))local integer G74=GetHandleId(K1[GetPlayerId(GetOwningPlayer(G44))])local integer G14=(LoadInteger(LY,(G74),(279)))local integer x=1local boolean G84=falselocal player G94local boolean GA4=falselocal integer SUI=GetUnitAbilityLevel(K1[GetPlayerId(GetOwningPlayer(G44))],1093818963)local integer GB4=1093873716if SUI==2 thenset GB4=1093873717elseif SUI==3 thenset GB4=1093873715elseif SUI==4 thenset GB4=1093873714endifif G44==null thencall FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())elseif(LoadReal(LY,(GetHandleId(G44)),(785)))+6>(TimerGetElapsed(M))thenset GA4=trueendifloopexitwhen x>G14 or G84==trueset G84=IsUnitInRange(G44,(LoadUnitHandle(LY,(G74),(1400+x))),900)set x=x+1endloopif G84==false thencall UnitRemoveAbility(G44,1110454595)endifif IsUnitType(G44,UNIT_TYPE_HERO)==true thenif GetUnitAbilityLevel(G44,1110454595)>0 thencall IA1(G44,1093677617)if TII(GetOwningPlayer(G44))thenset G94=CO[0]elseset G94=BO[0]endifif GA4==false thencall IA1(G44,1097167976)call IA1(G44,GB4)call SetPlayerAbilityAvailable(GetOwningPlayer(G44),GB4,false)call SetUnitPathing(G44,false)if PQI(GetUnitX(G44))!=GetUnitX(G44)or QII(GetUnitY(G44))!=GetUnitY(G44)thencall SetUnitX(G44,PQI(GetUnitX(G44)))call SetUnitY(G44,QII(GetUnitY(G44)))endifelsecall UnitRemoveAbility(G44,1097167976)call UnitRemoveAbility(G44,1093873716)call UnitRemoveAbility(G44,1093873717)call UnitRemoveAbility(G44,1093873715)call UnitRemoveAbility(G44,1093873714)call UnitRemoveAbility(G44,1110460489)call SetUnitPathing(G44,true)call UPI(GetUnitX(G44),GetUnitY(G44),50)endifset G94=nullelsecall UnitRemoveAbility(G44,1093677617)call UnitRemoveAbility(G44,1097167976)call SetUnitPathing(G44,true)call UnitRemoveAbility(G44,1093873716)call UnitRemoveAbility(G44,1093873717)call UnitRemoveAbility(G44,1093873715)call UnitRemoveAbility(G44,1093873714)call UnitRemoveAbility(G44,1110460489)call UPI(GetUnitX(G44),GetUnitY(G44),50)endifelseif GetUnitAbilityLevel(G44,1110454595)>0 thencall IA1(G44,1093810499)if GA4==false thencall IA1(G44,1097167976)call IA1(G44,GB4)call SetPlayerAbilityAvailable(GetOwningPlayer(G44),GB4,false)call SetUnitPathing(G44,false)if PQI(GetUnitX(G44))!=GetUnitX(G44)or QII(GetUnitY(G44))!=GetUnitY(G44)thencall SetUnitX(G44,PQI(GetUnitX(G44)))call SetUnitY(G44,QII(GetUnitY(G44)))endifelsecall UnitRemoveAbility(G44,1097167976)call UnitRemoveAbility(G44,1093873716)call UnitRemoveAbility(G44,1093873717)call UnitRemoveAbility(G44,1093873715)call UnitRemoveAbility(G44,1093873714)call UnitRemoveAbility(G44,1110460489)call SetUnitPathing(G44,true)endifelsecall UnitRemoveAbility(G44,1093810499)call UnitRemoveAbility(G44,1097167976)call UnitRemoveAbility(G44,1093873716)call UnitRemoveAbility(G44,1093873717)call UnitRemoveAbility(G44,1093873715)call UnitRemoveAbility(G44,1093873714)call UnitRemoveAbility(G44,1110460489)call SetUnitPathing(G44,true)endifendifendifset G44=nullendfunctionfunction GC4 takes unit G44 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddAction(t,function G64)call SaveUnitHandle(LY,(S5I),(366),(G44))set t=nullendfunctionfunction GD4 takes nothing returns booleanif GetUnitTypeId(GetSummonedUnit())==1848652101 or GetUnitTypeId(GetSummonedUnit())==1848652089 thencall GC4(GetSummonedUnit())endifreturn falseendfunctionfunction GE4 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local trigger tif(GetUnitAbilityLevel(PKI,1093818963)==1)thencall GC4(PKI)elsecall G34(PKI)endifset PKI=nullendfunctionfunction GF4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(830)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer NQ3=GetUnitAbilityLevel(P7I,1093818963)if JGO<NQ3 thenset NPI=NPI-1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==0 thencall UnitRemoveAbility(P7I,GJI[JGO])set NPI=40call SaveInteger(LY,(S5I),(34),(NPI))set JGO=JGO+1call SaveInteger(LY,(GetHandleId(P7I)),(830),(JGO))call IA1(P7I,GJI[JGO])endifendifset t=nullset P7I=nullreturn falseendfunctionfunction GG4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(P7I)),(830),(1))call IA1(P7I,GJI[1])call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function GF4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(40))set P7I=nullset t=nullendfunctionfunction GH4 takes nothing returns booleanif GetLearnedSkill()==1093818963 and IsUnitIllusion(GetTriggerUnit())==false thenif GetUnitAbilityLevel(GetTriggerUnit(),1093818963)==1 thencall GG4()endifendifreturn falseendfunctionfunction KD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function G54))call TriggerAddAction(t,function GE4)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function GD4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function G24))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function GH4))set GJI[0]=1093818965set GJI[1]=1093818968set GJI[2]=1093818967set GJI[3]=1093818964set GJI[4]=1093818966endfunctionfunction GZ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and E31(GetSpellAbilityId())and GetSpellTargetUnit()==SFI)thenif IC1(SFI)==false thencall UnitRemoveAbility(SFI,1093687122)call UnitRemoveAbility(SFI,1110454597)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullreturn falseendfunctionfunction GV4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call TriggerRegisterTimerEvent(t,14,false)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GZ4))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",SFI,"origin")))call IA1(SFI,1093687122)call SetUnitAbilityLevel(SFI,1093687122,GetUnitAbilityLevel(SFI,1093687121))call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093687122,false)endfunctionfunction GW4 takes nothing returns booleanif GetSpellAbilityId()==1093687121 thencall GV4()endifreturn falseendfunctionfunction KE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GW4))set t=nullendfunctionfunction GX4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEvalCount(t)>300 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitAbilityLevel(P8I,1110459703)>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(P7I,P8I,1,GetUnitAbilityLevel(P7I,1093681736)*75)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction GY4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function GX4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction GJ4 takes nothing returns booleanif GetSpellAbilityId()==1093681736 thencall GY4()endifreturn falseendfunctionfunction KF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GJ4))set t=nullendfunctionfunction GK4 takes nothing returns booleanreturn GetSpellAbilityId()==1093678389endfunctionfunction GL4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real PAI=(LoadReal(LY,(S5I),(20)))local integer DC1=(LoadInteger(LY,(S5I),(188)))local texttag ttif GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==I01 thenset tt=CreateTextTag()call UYI(I2S(DC1),DC1,P8I,0.03,127,127,255,255)call SetTextTagText(tt,"+"+I2S(R2I(PAI)),0.025)call SetTextTagPosUnit(tt,P8I,10)call SetTextTagColor(tt,255,0,0,255)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,2)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2)if IsUnitVisible(P8I,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall P6I(P7I,P8I,1,PAI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullset tt=nullreturn falseendfunctionfunction GM4 takes nothing returns nothinglocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093678389)local integer GN4local unit PKI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location BFO=GetUnitLoc(PKI)local real PAIlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(PKI),1697656901,GetUnitX(PKI),GetUnitY(PKI),0)if SUI==1 thenset GN4=GetRandomInt(1,2)if GN4==1 thenset PAI=GetRandomReal(100,200)elseif GN4==2 thenset PAI=GetRandomReal(1,100)endifelseif SUI==2 thenset GN4=GetRandomInt(1,3)if GN4==1 thenset PAI=GetRandomReal(170,225)elseif GN4==2 thenset PAI=GetRandomReal(110,170)elseif GN4==3 thenset PAI=GetRandomReal(50,110)endifelseif SUI==3 thenset GN4=GetRandomInt(1,4)if GN4==1 thenset PAI=GetRandomReal(195,250)elseif GN4==2 thenset PAI=GetRandomReal(155,195)elseif GN4==3 thenset PAI=GetRandomReal(115,155)elseif GN4==4 thenset PAI=GetRandomReal(75,115)endifelseif SUI==4 thenset GN4=GetRandomInt(2,4)if GN4==2 thenset PAI=GetRandomReal(225,275)elseif GN4==3 thenset PAI=GetRandomReal(175,225)elseif GN4==4 thenset PAI=GetRandomReal(100,175)endifendifcall TriggerRegisterTimerEvent(t,10,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function GL4))call SaveUnitHandle(LY,(S5I),(2),(PKI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(20),((PAI)*1.0))if(SUI==4)thenendifcall SaveInteger(LY,(S5I),(188),(GN4))call IA1(I01,1093678165)call SetUnitAbilityLevel(I01,1093678165,GN4)call IssueTargetOrder(I01,"thunderbolt",P8I)set t=nullendfunctionfunction KZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GK4))call TriggerAddAction(t,function GM4)endfunctionfunction GS4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call G21(P7I,0)set t=nullset P7I=nullreturn falseendfunctionfunction GT4 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(GNI)and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GNI)and IsUnitIllusion(GetFilterUnit())==true thencall SetUnitX(GetFilterUnit(),GLI)call SetUnitY(GetFilterUnit(),GMI)call IssueTargetOrder(GetFilterUnit(),"attack",GSI)endifreturn falseendfunctionfunction GR4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real RM2=UEI(QXI,QYI,QJI,QKI)local real QWI=QNI(QXI,QYI,QJI,QKI)local real d=GetRandomReal(QWI*0.3,QWI*0.8)local integer SUI=GetUnitAbilityLevel(P7I,1093685847)local real IV1=QXI+d*Cos(RM2*bj_DEGTORAD)local real IW1=QYI+d*Sin(RM2*bj_DEGTORAD)local unit u=CreateUnit(GetOwningPlayer(P7I),GKI,IV1,IW1,0)local unit u2local group glocal trigger tlocal integer S5Icall SetUnitX(P7I,IV1)call SetUnitY(P7I,IW1)call SetUnitFacing(P7I,-RM2)call PlaySoundOnUnitBJ(CC,100,P8I)if IsUnitEnemy(P8I,GetOwningPlayer(P7I))and GetUnitTypeId(P8I)!=1848651852 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.2,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function GS4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullcall G21(P7I,40+20*SUI)set IV1=QXI+(d-25)*Cos(RM2*bj_DEGTORAD)set IW1=QYI+(d-25)*Sin(RM2*bj_DEGTORAD)call SCI(P8I,4405,1)call SetUnitX(P8I,IV1)call SetUnitY(P8I,IW1)call SetUnitFacing(P8I,RM2)call IssueTargetOrder(P7I,"attack",P8I)set g=NTI()set GLI=IV1set GMI=IW1set GNI=P7Iset GSI=P8Icall GroupEnumUnitsInRange(g,QXI,QYI,1400,Condition(function GT4))call NSI(g)set u2=CreateUnit(GetOwningPlayer(P7I),GKI,IV1,IW1,0)call KillUnit(u2)endifcall KillUnit(u)set P7I=nullset P8I=nullset u=nullset u2=nullset g=nullendfunctionfunction GP4 takes nothing returns booleanif GetSpellAbilityId()==1093685847 thencall GR4()endifreturn falseendfunctionfunction GQ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit u=CreateUnit(GetOwningPlayer(SFI),GKI,GetUnitX(SFI),GetUnitY(SFI),0)call PlaySoundOnUnitBJ(CC,100,SFI)call KillUnit(u)call FlushChildHashtable(LY,(S5I))call S0I(t)set u=nullset t=nullset SFI=nullreturn falseendfunctionfunction GU4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function GQ4))call TriggerRegisterTimerEvent(t,0.3,false)call SaveUnitHandle(LY,(S5I),(14),(GetTriggerUnit()))set t=nullendfunctionfunction H04 takes nothing returns booleanif GetSpellAbilityId()==1093685847 thencall GU4()endifreturn falseendfunctionfunction KG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GP4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function H04))set t=nullendfunctionfunction HI4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call FlushChildHashtable(LY,(S5I))call S0I(t)call IA1(I01,1093818423)call IssueTargetOrderById(I01,852274,P7I)set t=nullset P7I=nullreturn falseendfunctionfunction H14 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger tlocal integer S5Iif GetRandomInt(0,1)==0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.65,false)call TriggerAddCondition(t,Condition(function HI4))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset t=nullset P7I=nullendfunctionfunction HO4 takes nothing returns booleanif GetSpellAbilityId()==1093677903 thencall H14()endifreturn falseendfunctionfunction KH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HO4))set t=nullendfunctionfunction H24 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()if GetUnitAbilityLevel(P7I,1095263841)==0 thencall IA1(P7I,1095263841)if GetUnitAbilityLevel(P7I,1112504171)>0 thencall UnitRemoveAbility(P7I,1112504171)endifendifcall SetUnitAbilityLevel(P7I,1095263841,GetUnitAbilityLevel(P7I,1093817679))set P7I=nullendfunctionfunction H34 takes nothing returns booleanif GetLearnedSkill()==1093817679 and IsUnitIllusion(GetTriggerUnit())==false thencall H24()endifreturn falseendfunctionfunction MJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function H34))set t=nullendfunctionfunction H44 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real H54=GetUnitState(P7I,UNIT_STATE_LIFE)call UnitRemoveAbility(P7I,1093751344)call UnitRemoveAbility(P7I,1110459445)call G21(P7I,0)call G61(P7I,0)call SetUnitState(P7I,UNIT_STATE_LIFE,H54)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction H64 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093678161)local real H74=GetUnitState(P8I,UNIT_STATE_LIFE)local real H54=GetUnitState(P7I,UNIT_STATE_LIFE)local integer H84=R2I((0.035+0.015*SUI)*H74)local integer H94=R2I((0.35+0.15*SUI)*H74)call G21(P7I,H84)call G61(P7I,H94)call IA1(P7I,1093751344)call SetUnitState(P8I,UNIT_STATE_LIFE,1)call P6I(P7I,P8I,2,20)call P6I(P7I,P8I,1,20)call P6I(P7I,P8I,3,20)call SetUnitState(P7I,UNIT_STATE_LIFE,H54+H94)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",P8I,"chest"))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,35,false)call TriggerAddCondition(t,Condition(function H44))set P7I=nullset P8I=nullset t=nullendfunctionfunction HA4 takes nothing returns booleanif GetSpellAbilityId()==1093678161 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>0.5 and RYI(GetSpellTargetUnit())==false thencall H64()endifreturn falseendfunctionfunction MK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HA4))set t=nullendfunctionfunction HB4 takes integer x returns booleanreturn x==1093678680 or x==1093681489 or x==1093743695 or x==1093684805 or x==1093743695 or x==1093747504 or x==1093686082endfunctionfunction HC4 takes nothing returns booleanreturn(GetLearnedSkill()==1093683526)and(IsUnitIllusion(GetTriggerUnit())==false)endfunctionfunction HD4 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),1110455896)>0 and(TQI(GetSpellAbilityId())or GetSpellAbilityId()==1093685065)and HB4(GetSpellAbilityId())==false and V81(GetSpellAbilityId())==falseendfunctionfunction HE4 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit PKI=GetTriggerUnit()local unit HF4=(LoadUnitHandle(LY,(S5I),(254)))local integer AK3=GetUnitAbilityLevel(HF4,1093683526)if GetRandomInt(1,100)<=40 and QVI(PKI,HF4,1400)thencall SetUnitState(PKI,UNIT_STATE_MANA,GetUnitState(PKI,UNIT_STATE_MANA)+(0.05+0.05*AK3)*GetUnitState(PKI,UNIT_STATE_MAX_MANA))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",PKI,"overhead"))endifendfunctionfunction HG4 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local integer AK3=GetUnitAbilityLevel(PKI,1093683526)local trigger tif(AK3==1)thenset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HD4))call TriggerAddAction(t,function HE4)call SaveUnitHandle(LY,(GetHandleId(t)),(254),(PKI))endifif(AK3==1)thencall IA1(PKI,1093685068)elseif(AK3==2)thencall IA1(PKI,1093685069)elseif(AK3==3)thencall IA1(PKI,1093685070)elseif(AK3==4)thencall IA1(PKI,1093685064)endifendfunctionfunction N21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function HC4))call TriggerAddAction(t,function HG4)endfunctionfunction HH4 takes nothing returns booleanlocal real dif GetUnitAbilityLevel(GetTriggerUnit(),1110455897)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685065)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall UnitRemoveAbility(GetTriggerUnit(),1110455897)set d=0.01*(5+GetUnitAbilityLevel(GetEventDamageSource(),1093685065))*(GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+100)if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_SUMMONED)==true or IsUnitIllusion(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1848651828 and GetUnitTypeId(GetTriggerUnit())!=1848652088 and GetUnitTypeId(GetTriggerUnit())!=1848652099 and GetUnitTypeId(GetTriggerUnit())!=1848652103 and GetUnitTypeId(GetTriggerUnit())!=1848651861 and GetUnitTypeId(GetTriggerUnit())!=1848651865 and GetUnitTypeId(GetTriggerUnit())!=1848651866 thenset d=d+100*GetUnitAbilityLevel(GetEventDamageSource(),1093685065)endifcall UYI("+"+I2S(R2I(d)),1,GetTriggerUnit(),0.023,191,64,255,216)if(GetRandomInt(1,100)<=GetUnitAbilityLevel(GetEventDamageSource(),1093683526)*10)and((LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(264)))==false)thencall SetUnitState(GetEventDamageSource(),UNIT_STATE_MANA,GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+0.25*GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_MANA))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",GetEventDamageSource(),"overhead"))endifcall DisableTrigger(GetTriggeringTrigger())call P6I(GetEventDamageSource(),GetTriggerUnit(),3,d)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction HZ4 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thencall SaveBoolean(LY,(GetHandleId(t)),(264),(true))elsecall SaveBoolean(LY,(GetHandleId(t)),(264),(false))endifcall SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function HH4))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction HV4 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),1093685065)>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall HZ4()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685065 thencall HZ4()endifreturn falseendfunctionfunction HW4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function HV4))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction HX4 takes nothing returns booleanif GetLearnedSkill()==1093685065 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685065)==1 thencall HW4()endifreturn falseendfunctionfunction N31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function HX4))set t=nullendfunctionfunction HY4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer HJ4=(LoadInteger(LY,(S5I),(262)))call SetHeroInt(P8I,GetHeroInt(P8I,false)+HJ4,true)call SetHeroInt(P7I,GetHeroInt(P7I,false)-HJ4,true)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction HK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call SaveInteger(LY,(GetHandleId((P8I))),((4303)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SetUnitInvulnerable(P8I,false)call PauseUnit(P8I,false)call ShowUnit(P8I,true)call ClearSelectionForPlayer(GetOwningPlayer(P8I))call SelectUnitAddForPlayer(P8I,GetOwningPlayer(P8I))call RemoveSavedHandle(LY,(GetHandleId(P7I)),(748))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction HL4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093685066)local integer HJ4=Q9I(GetHeroInt(P8I,false),1+SUI*3)local trigger tlocal integer S5Ilocal unit I01=CreateUnit(GetOwningPlayer(P8I),1865429305,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(I01,1112820806,(SUI+1))if(IsUnitEnemy(P8I,GetOwningPlayer(P7I)))==false or NNI(GetSpellTargetUnit())==false thencall SaveInteger(LY,(GetHandleId((P8I))),((4303)),(1))set t=CreateTrigger()set S5I=GetHandleId(t)call SelectUnitRemoveForPlayer(P8I,GetOwningPlayer(P8I))call SetUnitInvulnerable(P8I,true)call PauseUnit(P8I,true)call ShowUnit(P8I,false)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl",GetUnitX(P8I),GetUnitY(P8I))))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,SUI,false)call TriggerAddCondition(t,Condition(function HK4))if(IsUnitEnemy(P8I,GetOwningPlayer(P7I)))==true thencall SaveUnitHandle(LY,(GetHandleId(P7I)),(748),(P8I))call SetHeroInt(P8I,GetHeroInt(P8I,false)-HJ4,true)call SetHeroInt(P7I,GetHeroInt(P7I,false)+HJ4,true)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(262),(HJ4))call TriggerRegisterTimerEvent(t,50,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function HY4))endifendifset P7I=nullset P8I=nullset t=nullendfunctionfunction HM4 takes nothing returns booleanif GetSpellAbilityId()==1093685066 thencall HL4()endifreturn falseendfunctionfunction HN4 takes nothing returns nothingif IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and GetSpellTargetUnit()!=GetTriggerUnit()thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendfunctionfunction HS4 takes nothing returns booleanif GetSpellAbilityId()==1093685066 thencall HN4()endifreturn falseendfunctionfunction N41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HM4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function HS4))set t=nullendfunctionfunction HT4 takes nothing returns booleanreturn GetSpellAbilityId()==1093685067 or GetSpellAbilityId()==1093752407endfunctionfunction HR4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local unit HF4=GetTriggerUnit()local integer HP4=GetHeroInt(HF4,true)-GetHeroInt(P8I,true)local integer array HQ4local integer SUI=GetUnitAbilityLevel(HF4,1093685067)local integer HU4=7+1*SUIif SUI==0 thenset SUI=GetUnitAbilityLevel(HF4,1093752407)set HU4=7+1*SUI+1endifset HQ4[1]=10set HQ4[2]=30set HQ4[3]=50if(HP4>0)thencall UnitDamageTarget(HF4,P8I,HP4*HU4,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call UYI(I2S(R2I(HP4*HU4)),3,P8I,0.023,216,30,30,216)if(HP4<HQ4[SUI]or GetUnitAbilityLevel(HF4,1093752407)>0)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",P8I,"overhead"))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)*.25)endifendifendfunctionfunction Z04 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)thenif(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))thenreturn trueendifendifreturn falseendfunctionfunction ZI4 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local integer AK3=GetUnitAbilityLevel(PKI,1093685067)local real x=GetLocationX(GetSpellTargetLoc())local real y=GetLocationY(GetSpellTargetLoc())local group Z51=NTI()local integer DJ1=0local unit Z14=(LoadUnitHandle(LY,(GetHandleId(PKI)),(748)))if AK3==0 thenset AK3=GetUnitAbilityLevel(PKI,1093752407)endifcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))loopexitwhen DJ1>=360call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+(200+AK3*50)*Cos(DJ1*bj_DEGTORAD),y+(200+AK3*50)*Sin(DJ1*bj_DEGTORAD)))set DJ1=DJ1+45endloopcall GroupEnumUnitsInRange(Z51,x,y,300+AK3*100,Condition(function Z04))if Z14!=null and QNI(x,y,GetUnitX(Z14),GetUnitY(Z14))<(300+AK3*100)thencall SetUnitInvulnerable(Z14,false)call GroupAddUnit(Z51,Z14)endifcall ForGroup(Z51,function HR4)if Z14!=null and IC1(Z14)==false thencall SetUnitInvulnerable(Z14,true)endifcall NSI(Z51)endfunctionfunction N51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HT4))call TriggerAddAction(t,function ZI4)endfunctionfunction ZO4 takes nothing returns nothingcall P6I(GTI,GetEnumUnit(),1,GRI)endfunctionfunction Z24 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEvalCount(t)>200 or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685575 and GetSpellTargetUnit()==P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(31))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set g=NTI()set GK=P7Iset GTI=P7Iset GRI=1.0+2.0*GetUnitAbilityLevel(P7I,1093685575)call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),275,Condition(function CA1))call GroupRemoveUnit(g,P8I)call ForGroup(g,function ZO4)call NSI(g)set P8I=nullendifset t=nullset P7I=nullset g=nullreturn falseendfunctionfunction Z34 takes nothing returns nothinglocal trigger t=CreateTrigger()local effect fx=AddSpecialEffectTarget("war3mapImported\\NewSoulArmor.mdx",GetSpellTargetUnit(),"chest")local integer S5I=GetHandleId(t)call IO1(TC,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call SaveEffectHandle(LY,(S5I),(31),(fx))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Z24))set t=nullset fx=nullendfunctionfunction Z44 takes nothing returns booleanif GetSpellAbilityId()==1093685575 thencall Z34()endifreturn falseendfunctionfunction NP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Z44))set t=nullendfunctionfunction Z54 takes unit u returns booleanreturn GetUnitAbilityLevel(u,1110454858)>0 or GetUnitAbilityLevel(u,1112896368)>0 or GetUnitAbilityLevel(u,1114993524)>0 or PII(u)endfunctionfunction Z64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer SUIlocal unit P7Ilocal unit P8Ilocal real x1local real y1local real dlocal real aif GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset P8I=(LoadUnitHandle(LY,(S5I),(17)))set d=(LoadReal(LY,(S5I),(138)))set x=(LoadReal(LY,(S5I),(6)))set y=(LoadReal(LY,(S5I),(7)))set a=(LoadReal(LY,(S5I),(137)))set x1=GetUnitX(P8I)+d/12*Cos(a)set y1=GetUnitY(P8I)+d/12*Sin(a)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thencall SetUnitPosition(P8I,x1,y1)elsecall SetUnitX(P8I,x1)call SetUnitY(P8I,y1)endifif GetTriggerEvalCount(t)>19 thenset P7I=(LoadUnitHandle(LY,(S5I),(2)))set SUI=(LoadInteger(LY,(S5I),(5)))call FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(P7I,P8I,1,SUI*40)set P7I=nullendifset P8I=nullendifset t=nullreturn falseendfunctionfunction Z74 takes nothing returns nothinglocal trigger tlocal integer S5Ilocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()if Z54(P8I)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function Z64))call SaveReal(LY,(S5I),(6),((GPI)*1.0))call SaveReal(LY,(S5I),(7),((GQI)*1.0))call SaveReal(LY,(S5I),(138),((QNI(GPI,GQI,GetUnitX(P8I),GetUnitY(P8I)))*1.0))call SaveReal(LY,(S5I),(137),((Atan2(GQI-GetUnitY(P8I),GPI-GetUnitX(P8I)))*1.0))call SaveInteger(LY,(S5I),(5),(GUI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifset t=nullset P7I=nullset P8I=nullendfunctionfunction Z84 takes nothing returns nothinglocal group g=NTI()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093685573)local real r=150+100*SUI+25set GK=GetTriggerUnit()call IO1(FE,x,y)call DestroyEffect(AddSpecialEffect("war3mapImported\\Star Aura.mdx",x,y))call GroupEnumUnitsInRange(g,x,y,r,Condition(function CE1))set GPI=xset GQI=yset GUI=SUIcall ForGroup(g,function Z74)call UPI(x,y,200)call RemoveLocation(l)call NSI(g)set l=nullset g=nullendfunctionfunction Z94 takes nothing returns booleanif GetSpellAbilityId()==1093685573 thencall Z84()endifreturn falseendfunctionfunction ZA4 takes nothing returns nothinglocal location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)if UQI(x,y)==false or(IsPointInRegion(LN,((x)*1.0),((y)*1.0)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652619))endifcall RemoveLocation(l)set l=nullendfunctionfunction ZB4 takes nothing returns booleanif GetSpellAbilityId()==1093685573 thencall ZA4()endifreturn falseendfunctionfunction NR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Z94))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function ZB4))set t=nullendfunctionfunction ZC4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1110456151)call UnitRemoveAbility(P8I,1113746543)call UnitRemoveAbility(P8I,1110455858)call UnitRemoveAbility(P8I,1110455861)call UnitRemoveAbility(P8I,1113813619)call UnitRemoveAbility(P8I,1110454582)call UnitRemoveAbility(P8I,1110455634)return falseendfunctionfunction ZD4 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093685815)*1.5+1.5,false)call TriggerAddCondition(t,Condition(function ZC4))call SaveUnitHandle(LY,(GetHandleId(t)),(17),(GetSpellTargetUnit()))call IO1(UD,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))call DestroyEffect(AddSpecialEffectTarget("effects\\Surge.mdx",GetSpellTargetUnit(),"origin"))endfunctionfunction ZE4 takes nothing returns booleanif GetSpellAbilityId()==1093685815 thencall ZD4()endifreturn falseendfunctionfunction NQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZE4))set t=nullendfunctionfunction ZF4 takes boolean CK3 returns booleanlocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit ZG4=(LoadUnitHandle(LY,(S5I),(259)))local unit P8I=GetTriggerUnit()local unit ZH4=CreateUnit(GetOwningPlayer(ZG4),1697657171,GetUnitX(P8I),GetUnitY(P8I),0)local unit SFI=K1[GetPlayerId(GetOwningPlayer(ZG4))]local integer SUI=GetUnitAbilityLevel(SFI,1093685579)if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093808465)endifcall SetUnitAbilityLevel(ZG4,1093685580,SUI)set H0I=GetUnitX(P8I)set HII=GetUnitY(P8I)set H1I=P8Iif CK3 thencall SetUnitAbilityLevel(ZG4,1093685580,3+SUI)call IssueTargetOrderById(ZG4,852274,P8I)call P6I(ZG4,P8I,1,150)elsecall IssueTargetOrderById(ZG4,852274,P8I)call P6I(ZG4,P8I,1,150)endifcall UnitApplyTimedLife(ZH4,1112820806,0.5)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(P8I),GetUnitY(P8I)))set ZG4=nullset P8I=nullreturn falseendfunctionfunction ZZ4 takes nothing returns booleanlocal group gif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(259)))))and V51(GetUnitTypeId(GetFilterUnit()))==false thenset g=(LoadGroupHandle(LY,(GetHandleId(GetTriggeringTrigger())),(257)))if IsUnitInGroup(GetFilterUnit(),g)==false thencall GroupAddUnit(g,GetFilterUnit())call ZF4(false)endifendifset g=nullreturn falseendfunctionfunction ZV4 takes nothing returns booleanlocal group gif IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer((LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(259)))))and V51(GetUnitTypeId(GetFilterUnit()))==false thenset g=(LoadGroupHandle(LY,(GetHandleId(GetTriggeringTrigger())),(257)))if IsUnitInGroup(GetFilterUnit(),g)==false thencall GroupAddUnit(g,GetFilterUnit())call ZF4(true)endifendifset g=nullreturn falseendfunctionfunction WallOfReplica_FindSource takes nothing returns nothingif GetPlayerId(GetOwningPlayer(GetEnumUnit()))==UJ thencall GroupAddUnit(XK,GetEnumUnit())endifendfunctionfunction ZW4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call GroupRemoveUnit((LoadGroupHandle(LY,(S5I),(257))),(LoadUnitHandle(LY,(S5I),(261))))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))call FlushChildHashtable(LY,(S5I))call DisableTrigger(t)set t=nullreturn falseendfunctionfunction ZX4 takes nothing returns booleanlocal unit ZG4=GetSummoningUnit()local unit IYO=GetSummonedUnit()local integer S5I=GetHandleId(ZG4)local integer ZY4=(LoadInteger(LY,(S5I),(260)))local trigger t=CreateTrigger()call SetUnitVertexColor(IYO,255,255,255,100)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ZW4))call SaveGroupHandle(LY,(GetHandleId(t)),(257),((LoadGroupHandle(LY,(S5I),(257)))))call SaveUnitHandle(LY,(GetHandleId(t)),(261),(H1I))set ZY4=ZY4+1call SaveInteger(LY,(S5I),(260),(ZY4))call SaveInteger(LY,(S5I),(2800+ZY4),(NKI(IYO)))call SaveTriggerHandle(LY,(S5I),(2900+ZY4),(t))call SetUnitX(IYO,H0I)call SetUnitY(IYO,HII)set ZG4=nullset IYO=nullreturn falseendfunctionfunction ZJ4 takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction ZK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer DW3=GetHandleId(t)local trigger ZL4=(LoadTriggerHandle(LY,(DW3),(255)))local integer KAO=GetHandleId(ZL4)local trigger ZM4=(LoadTriggerHandle(LY,(KAO),(256)))local group ZN4=(LoadGroupHandle(LY,(KAO),(257)))local group ZS4=(LoadGroupHandle(LY,(KAO),(258)))local unit ZG4=(LoadUnitHandle(LY,(KAO),(259)))local integer ZT4=GetHandleId(ZG4)local integer ZY4=(LoadInteger(LY,(ZT4),(260)))local integer ZR4local integer ilocal unit ucall ForGroup(ZS4,function ZJ4)set i=1loopexitwhen i>ZY4set ZR4=(LoadInteger(LY,(ZT4),(2800+i)))set u=NYI(ZR4)call FlushChildHashtable(LY,(GetHandleId((LoadTriggerHandle(LY,(ZT4),(2900+i))))))call S0I((LoadTriggerHandle(LY,(ZT4),(2900+i))))if IsUnitIllusion(u)thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u)))call RemoveUnit(u)call NXI(ZR4)endifset i=i+1endloopcall FlushChildHashtable(LY,(DW3))call FlushChildHashtable(LY,(KAO))call FlushChildHashtable(LY,(ZT4))call RemoveUnit(ZG4)call NSI(ZN4)call NSI(ZS4)call S0I(ZL4)call S0I(ZM4)call S0I(t)set t=nullset ZL4=nullset ZM4=nullset ZN4=nullset ZS4=nullset ZG4=nullset u=nullreturn falseendfunctionfunction ZP4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real ZQ4=GetUnitFacing(SFI)-45local unit ZG4=CreateUnit(GetOwningPlayer(SFI),1747988559,x,y,ZQ4)local unit ulocal real UJ2local real UK2local integer ilocal real DJ1local trigger t=CreateTrigger()local group g1=NTI()local integer S5I=GetHandleId(t)local group g2=NTI()local trigger ZL4=tlocal integer SUI=GetUnitAbilityLevel(SFI,1093685579)local boolean CK3=falseif SUI==0 thenset CK3=trueset SUI=GetUnitAbilityLevel(SFI,1093808465)endifcall SetUnitAbilityLevel(ZG4,1093685580,SUI)call IO1(GE,x,y)call SaveGroupHandle(LY,(S5I),(257),(g1))call SaveGroupHandle(LY,(GetHandleId(ZG4)),(257),(g1))call SaveGroupHandle(LY,(S5I),(258),(g2))call SaveUnitHandle(LY,(S5I),(259),(ZG4))call SaveInteger(LY,(GetHandleId(ZG4)),(260),(0))set i=0loopexitwhen i>39set UJ2=x+(500-25*i)*Cos((ZQ4-45)*bj_DEGTORAD)set UK2=y+(500-25*i)*Sin((ZQ4-45)*bj_DEGTORAD)set u=CreateUnit(GetOwningPlayer(SFI),1747988560,UJ2,UK2,ZQ4)call SetUnitPathing(u,false)call SetUnitX(u,UJ2)call SetUnitY(u,UK2)call GroupAddUnit(g2,u)call TriggerRegisterUnitInRange(t,u,17,Condition(function N1I))set i=i+1endloopif CK3 thencall TriggerAddCondition(t,Condition(function ZV4))elsecall TriggerAddCondition(t,Condition(function ZZ4))endifset t=CreateTrigger()call TriggerRegisterUnitEvent(t,ZG4,EVENT_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function ZX4))call SaveTriggerHandle(LY,(S5I),(256),(t))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15*SUI,false)call TriggerAddCondition(t,Condition(function ZK4))call SaveTriggerHandle(LY,(GetHandleId(t)),(255),(ZL4))call RemoveLocation(l)set SFI=nullset l=nullset u=nullset t=nullset ZL4=nullset g1=nullset g2=nullset ZG4=nullendfunctionfunction ZU4 takes nothing returns booleanif GetSpellAbilityId()==1093685579 or GetSpellAbilityId()==1093808465 thencall ZP4()endifreturn falseendfunctionfunction NU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZU4))set t=nullendfunctionfunction V04 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer VI4=(LoadInteger(LY,(S5I),(29)))if GetTriggerEventId()==EVENT_UNIT_DEATH thenif(LoadBoolean(LY,(S5I),(276)))==false and GetTriggerUnit()==(LoadUnitHandle(LY,(S5I),(2)))thencall SaveBoolean(LY,(S5I),(276),(true))call SetHeroStr((LoadUnitHandle(LY,(S5I),(2))),GetHeroStr((LoadUnitHandle(LY,(S5I),(2))),false)-VI4,true)elseif(LoadBoolean(LY,(S5I),(277)))==false and GetTriggerUnit()==(LoadUnitHandle(LY,(S5I),(17)))thencall SaveBoolean(LY,(S5I),(277),(true))call SetHeroStr((LoadUnitHandle(LY,(S5I),(17))),GetHeroStr((LoadUnitHandle(LY,(S5I),(17))),false)+VI4,true)endifelseif(LoadBoolean(LY,(S5I),(276)))==false thencall SaveBoolean(LY,(S5I),(276),(true))call SetHeroStr((LoadUnitHandle(LY,(S5I),(2))),GetHeroStr((LoadUnitHandle(LY,(S5I),(2))),false)-VI4,true)endifif(LoadBoolean(LY,(S5I),(277)))==false thencall SaveBoolean(LY,(S5I),(277),(true))call SetHeroStr((LoadUnitHandle(LY,(S5I),(17))),GetHeroStr((LoadUnitHandle(LY,(S5I),(17))),false)+VI4,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullreturn falseendfunctionfunction V14 takes nothing returns nothinglocal unit P7I=HOIlocal unit P8I=GetEnumUnit()local integer VI4local integer SUI=H2Ilocal trigger tlocal integer S5Iif IsUnitType(P8I,UNIT_TYPE_HERO)==true and V51(GetUnitTypeId(P8I))==false thenset VI4=IMinBJ(GetHeroStr(P8I,false)-1,4)set t=CreateTrigger()set S5I=GetHandleId(t)call SetHeroStr(P7I,GetHeroStr(P7I,false)+VI4,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)-VI4,true)call TriggerRegisterTimerEvent(t,40,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function V04))call SaveBoolean(LY,(S5I),(276),(false))call SaveBoolean(LY,(S5I),(277),(false))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(29),(VI4))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",P7I,"origin"))endifcall P6I(P7I,P8I,1,40*SUI-20)set P7I=nullset P8I=nullset t=nullendfunctionfunction VO4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local group g=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093743955)local unit I01=CreateUnit(GetOwningPlayer(P7I),1747990346,x,y,0)call DestroyEffect(AddSpecialEffect("effects\\DecayGreen_Groundonly_1.mdx",x,y))call RemoveLocation(l)set GK=P7Iset HOI=P7Iset H2I=SUIcall GroupEnumUnitsInRange(g,x,y,325+25,Condition(function CE1))call ForGroup(g,function V14)call NSI(g)call KillUnit(I01)set P7I=nullset l=nullset g=nullset t=nullset I01=nullendfunctionfunction V24 takes nothing returns booleanif GetSpellAbilityId()==1093743955 thencall VO4()endifreturn falseendfunctionfunction SA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function V24))set t=nullendfunctionfunction V34 takes nothing returns nothingif H6I<=H7I thenset H6I=H6I+1call GroupAddUnit(H3I,GetEnumUnit())endifendfunctionfunction V44 takes unit P7I,unit P8I returns nothingcall UGI("SPLK",GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I),0.1,0.6,0.44,.9,0.6)endfunctionfunction V54 takes nothing returns nothinglocal integer PAI=14+4*GetUnitAbilityLevel(H4I,1093685813)call SetUnitState(H5I,UNIT_STATE_LIFE,GetUnitState(H5I,UNIT_STATE_LIFE)+PAI)if GetUnitTypeId(GetEnumUnit())!=1848657461 thencall A41(GetEnumUnit(),PAI)endifcall V44(GetEnumUnit(),H5I)endfunctionfunction V64 takes nothing returns nothinglocal integer PAI=14+4*GetUnitAbilityLevel(H4I,1093685813)call P6I(H4I,H5I,1,PAI)if GetUnitTypeId(GetEnumUnit())!=1848657461 thencall A41(GetEnumUnit(),PAI)endifcall V44(GetEnumUnit(),H5I)endfunctionfunction V74 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group g=NTI()local integer V84=GetUnitAbilityLevel(SFI,1093685813)*2+8set H3I=NTI()set H6I=0set H7I=V84set GK=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),1300+25,Condition(function D81))call GroupRemoveUnit(g,SFI)call GroupRemoveUnit(g,GetSpellTargetUnit())call ForGroup(g,function V34)call NSI(g)set g=H3Iset H5I=GetSpellTargetUnit()set H4I=SFIif IsUnitAlly(H5I,GetOwningPlayer(SFI))thencall ForGroup(g,function V54)elsecall ForGroup(g,function V64)endifcall NSI(g)set SFI=nullset g=nullendfunctionfunction V94 takes nothing returns booleanif GetSpellAbilityId()==1093685813 and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false or GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()))thencall V74()endifreturn falseendfunctionfunction SC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function V94))set t=nullendfunctionfunction VA4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit VB4=(LoadUnitHandle(LY,(S5I),(269)))local real CV4=GetUnitState(P8I,UNIT_STATE_LIFE)local real VC4=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()==P8I thencall KillUnit(VB4)endifelseif Q2==true thencall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call PauseUnit(VB4,true)elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER thencall DisableTrigger(t)call IssueTargetOrder(VB4,"attack",P8I)call EnableTrigger(t)elseif(CV4<(100*H9I)or CV4/VC4<(0.15+0.05*H9I))and GetUnitAbilityLevel(VB4,1110458702)==0 thencall IssueTargetOrder(HAI[GetPlayerId(GetOwningPlayer(VB4))],"bloodlust",VB4)elseif IsUnitVisible(P8I,GetOwningPlayer(VB4))==false thenif(LoadBoolean(LY,(S5I),(270)))==true thenif(LoadBoolean(LY,(S5I),(271)))==true thenif(LoadBoolean(LY,(S5I),(272)))==true thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(VB4)elsecall SaveBoolean(LY,(S5I),(272),(true))endifelsecall SaveBoolean(LY,(S5I),(271),(true))endifelsecall SaveBoolean(LY,(S5I),(270),(true))endifelsecall SaveBoolean(LY,(S5I),(270),(false))call SaveBoolean(LY,(S5I),(271),(false))call SaveBoolean(LY,(S5I),(272),(false))endifset t=nullset P8I=nullset VB4=nullreturn falseendfunctionfunction VD4 takes nothing returns booleanlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetEnumUnit()local unit VB4=CreateUnit(H8I,1848657461,GetUnitX(P8I),GetUnitY(P8I),0)call IssueTargetOrder(VB4,"attack",P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,VB4,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,VB4,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,VB4,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,VB4,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function VA4))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(269),(VB4))call SaveInteger(LY,(S5I),(5),(H9I))set t=nullset P8I=nullset VB4=nullreturn falseendfunctionfunction VE4 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1848657461 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 thencall KillUnit(GetFilterUnit())endifreturn falseendfunctionfunction VF4 takes player p returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,p,Condition(function VE4))call NSI(g)set g=nullendfunctionfunction VG4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit VH4=(LoadUnitHandle(LY,(S5I),(266)))local unit VZ4=(LoadUnitHandle(LY,(S5I),(267)))local unit VV4=(LoadUnitHandle(LY,(S5I),(268)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group glocal player VE2if TII(GetOwningPlayer(P7I))thenset VE2=CO[0]elseset VE2=BO[0]endifif GetTriggerEventId()==EVENT_UNIT_DEATH thenif(LoadBoolean(LY,(S5I),(265)))thencall I41(VE2,.4,GetUnitX(P7I),GetUnitY(P7I),600)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(P7I,false)call RemoveUnit(VH4)call RemoveUnit(VZ4)call RemoveUnit(VV4)call VF4(GetOwningPlayer(P7I))elseif IsUnitVisible(P7I,VE2)thencall SaveBoolean(LY,(S5I),(265),(true))endifset g=NTI()set GK=P7Iset H8I=GetOwningPlayer(P7I)set H9I=SUIcall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),25+400+200*SUI,Condition(function C81))if Q2==false thencall ForGroup(g,function VD4)endifcall NSI(g)set g=nullendifset t=nullset P7I=nullset VH4=nullset VZ4=nullset VV4=nullreturn falseendfunctionfunction VW4 takes nothing returns nothinglocal location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local unit P7Ilocal real UJ2local real UK2local real VX4local unit VH4local unit VZ4local unit VV4local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093743958)local integer idif SUI==1 thenset P7I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657482,x,y,0)elseif SUI==2 thenset P7I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657481,x,y,0)elseif SUI==3 thenset P7I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657462,x,y,0)elseset P7I=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657480,x,y,0)endifcall IO1(TF,x,y)set id=GetPlayerId(GetOwningPlayer(P7I))if HAI[id]==null thenset HAI[id]=CreateUnit(GetOwningPlayer(P7I),1697657174,x,y,0)call IA1(HAI[id],1093744438)endifcall SetUnitPosition(P7I,PTI(x),PUI(y))call UnitApplyTimedLife(P7I,1112820806,10+5*SUI)call RemoveLocation(l)call UPI(x,y,300)set UJ2=x+200*Cos(0*bj_DEGTORAD)set UK2=y+200*Sin(0*bj_DEGTORAD)set VX4=UEI(UJ2,UK2,x,y)set VH4=CreateUnit(GetOwningPlayer(P7I),1747990344,UJ2,UK2,VX4)call SetUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")call QueueUnitAnimation(VH4,"Stand Work Gold")set UJ2=x+200*Cos(120*bj_DEGTORAD)set UK2=y+200*Sin(120*bj_DEGTORAD)set VX4=UEI(UJ2,UK2,x,y)set VZ4=CreateUnit(GetOwningPlayer(P7I),1747990344,UJ2,UK2,VX4)call SetUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")call QueueUnitAnimation(VZ4,"Stand Work Gold")set UJ2=x+200*Cos(240*bj_DEGTORAD)set UK2=y+200*Sin(240*bj_DEGTORAD)set VX4=UEI(UJ2,UK2,x,y)set VV4=CreateUnit(GetOwningPlayer(P7I),1747990344,UJ2,UK2,VX4)call SetUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call QueueUnitAnimation(VV4,"Stand Work Gold")call SetUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call QueueUnitAnimation(P7I,"Stand Work")call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,3,true)call TriggerAddCondition(t,Condition(function VG4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(266),(VH4))call SaveUnitHandle(LY,(S5I),(267),(VZ4))call SaveUnitHandle(LY,(S5I),(268),(VV4))call SaveInteger(LY,(S5I),(5),(SUI))call SaveBoolean(LY,(S5I),(265),(false))call TriggerEvaluate(t)set P7I=nullset VH4=nullset VZ4=nullset VV4=nullset l=nullendfunctionfunction VY4 takes nothing returns booleanif GetSpellAbilityId()==1093743958 thencall VW4()endifreturn falseendfunctionfunction SB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VY4))set t=nullendfunctionfunction VJ4 takes unit SWI returns booleanif ES1(SWI,FR0[JL0])!=null thenreturn trueendifreturn falseendfunctionfunction FleshGolem_ValidCorpse takes nothing returns booleanif GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==true thenset HBI=HBI+1endifreturn falseendfunctionfunction VK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093743946)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093744449,false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction VL4 takes nothing returns nothingif IsUnitType(GK,UNIT_TYPE_HERO)==true thenif VJ4(HK)thencall SetUnitState(HK,UNIT_STATE_LIFE,GetUnitState(HK,UNIT_STATE_LIFE)+GetUnitState(HK,UNIT_STATE_MAX_LIFE)*0.10)elsecall SetUnitState(HK,UNIT_STATE_LIFE,GetUnitState(HK,UNIT_STATE_LIFE)+GetUnitState(HK,UNIT_STATE_MAX_LIFE)*0.06)endifelseif VJ4(HK)thencall SetUnitState(HK,UNIT_STATE_LIFE,GetUnitState(HK,UNIT_STATE_LIFE)+GetUnitState(HK,UNIT_STATE_MAX_LIFE)*0.03)elsecall SetUnitState(HK,UNIT_STATE_LIFE,GetUnitState(HK,UNIT_STATE_LIFE)+GetUnitState(HK,UNIT_STATE_MAX_LIFE)*0.02)endifendifendfunctionfunction VM4 takes nothing returns booleanlocal trigger t2=GetTriggeringTrigger()local integer KAO=GetHandleId(t2)local trigger t1=(LoadTriggerHandle(LY,(KAO),(274)))local integer DW3=GetHandleId(t1)local unit P7I=(LoadUnitHandle(LY,(KAO),(2)))local unit P8Ilocal real dlocal real alocal boolean VN4=(LoadBoolean(LY,(KAO),(273)))if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetTriggerUnit()==P7I)or(GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH)thencall FlushChildHashtable(LY,(DW3))call FlushChildHashtable(LY,(KAO))call S0I(t1)call S0I(t2)elseif GetTriggerEventId()==EVENT_UNIT_DEATH thenif IsUnitIllusion(GetDyingUnit())==false thencall IJ1(GetDyingUnit(),P7I,1747990361,"VL4",600,false)endifelseif VN4==false thenset P8I=GetTriggerUnit()set d=QLI(P7I,P8I)if d<775 and GetEventDamage()>4 thenif VJ4(P7I)thenset a=25+5*HCIelseset a=15+5*HCIendifif d>200 thenset a=a-15*((d-150)/(775-150))endifcall SaveBoolean(LY,(KAO),(273),(true))call P6I(GetEventDamageSource(),GetTriggerUnit(),7,GetEventDamage()*a/100)call SaveBoolean(LY,(KAO),(273),(false))endifendifset t2=nullset t1=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction VS4 takes nothing returns booleanlocal trigger t1=GetTriggeringTrigger()local integer DW3=GetHandleId(t1)local trigger t2=(LoadTriggerHandle(LY,(DW3),(275)))local integer KAO=GetHandleId(t2)local unit P8I=GetTriggerUnit()local unit P7I=(LoadUnitHandle(LY,(DW3),(2)))if IsUnitEnemy(P7I,GetOwningPlayer(P8I))==true and IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(P8I,1093678162)==0 thenif(LoadBoolean(LY,(KAO),(GetHandleId(P8I))))==false thencall TriggerRegisterUnitEvent(t2,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t2,P8I,EVENT_UNIT_DEATH)call SaveBoolean(LY,(KAO),(GetHandleId(P8I)),(true))endifendifset t1=nullset t2=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction VT4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t1=CreateTrigger()local integer DW3=GetHandleId(t1)local trigger t2=CreateTrigger()local integer KAO=GetHandleId(t2)local trigger t3=CreateTrigger()local integer ZT4=GetHandleId(t3)local integer SUI=GetUnitAbilityLevel(P7I,1093743946)set HCI=SUIcall TriggerRegisterUnitInRange(t1,P7I,750,Condition(function N1I))call TriggerAddCondition(t1,Condition(function VS4))call SaveTriggerHandle(LY,(DW3),(275),(t2))call SaveUnitHandle(LY,(DW3),(2),(P7I))call TriggerRegisterTimerEvent(t2,30,false)call TriggerRegisterUnitEvent(t2,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t2,Condition(function VM4))call SaveTriggerHandle(LY,(KAO),(274),(t1))call SaveUnitHandle(LY,(KAO),(2),(P7I))call SaveBoolean(LY,(KAO),(273),(false))call TriggerRegisterTimerEvent(t3,0.01,false)call TriggerAddCondition(t3,Condition(function VK4))call SaveUnitHandle(LY,(ZT4),(2),(P7I))set P7I=nullset t1=nullset t2=nullset t3=nullendfunctionfunction VR4 takes nothing returns booleanif GetSpellAbilityId()==1093743946 and GetUnitTypeId(GetTriggerUnit())==1211117650 thencall VT4()endifreturn falseendfunctionfunction SD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VR4))call Q1I(1093744449)set t=nullendfunctionfunction VP4 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),HEI)==false and RKI(GetEnumUnit())==false thencall GroupAddUnit(HEI,GetEnumUnit())call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),HFI,false)call AX1(GetEnumUnit(),HFI,1,3,1110455633)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",GetEnumUnit(),"overhead"))endifendfunctionfunction VQ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local real a=(LoadReal(LY,(S5I),(137)))local integer NPI=GetTriggerEvalCount(t)local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group g=NTI()local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local integer SUI=GetUnitAbilityLevel(SFI,1093684299)if QNI(x,y,x2,y2)<=HDI thenset x=x2set y=y2elseset x=PTI(II3+65*Cos(a*bj_DEGTORAD))set y=PUI(I13+65*Sin(a*bj_DEGTORAD))endifif SUI==1 thenset HFI=1093810497elseif SUI==2 thenset HFI=1093810489elseif SUI==3 thenset HFI=1093810498elseif SUI==4 thenset HFI=1093810488endifset GK=SFIset HEI=PR2call GroupEnumUnitsInRange(g,x,y,325,Condition(function CA1))call ForGroup(g,function VP4)call NSI(g)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))call SetUnitPosition(SFI,x,y)if(x==x2 and y==y2)or NPI>40 thencall SetUnitX(I01,x)call SetUnitY(I01,y)call IssueImmediateOrder(I01,"thunderclap")call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitAnimation(SFI,"stand")call SetUnitPathing(SFI,true)call SetUnitInvulnerable(SFI,false)if GetUnitTypeId(SFI)==1160786520 thencall SetUnitVertexColor(SFI,255,255,255,255)elsecall SetUnitVertexColor(SFI,0,255,150,255)endifcall SaveInteger(LY,(GetHandleId((SFI))),((4261)),(2))endifset t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction VU4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location llocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2local real y2local real alocal unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x1,y1,0)if GetSpellTargetUnit()==null thenset l=GetSpellTargetLoc()elseset l=GetUnitLoc(GetSpellTargetUnit())endifset x2=GetLocationX(l)set y2=GetLocationY(l)set a=UEI(x1,y1,x2,y2)call RemoveLocation(l)call SetUnitAnimationByIndex(SFI,0)call SetUnitPathing(SFI,false)call SetUnitInvulnerable(SFI,true)call SetUnitVertexColor(SFI,0,0,0,255)call SaveInteger(LY,(GetHandleId((SFI))),((4261)),(1))call SaveReal(LY,(S5I),(66),((PTI(x2))*1.0))call SaveReal(LY,(S5I),(67),((PUI(y2))*1.0))call SaveReal(LY,(S5I),(23),((x1)*1.0))call SaveReal(LY,(S5I),(24),((y1)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call IA1(I01,1093684289)call SetUnitAbilityLevel(I01,1093684289,GetUnitAbilityLevel(SFI,1093684299))call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function VQ4))set SFI=nullset l=nullset t=nullset I01=nullendfunctionfunction W04 takes nothing returns booleanif GetSpellAbilityId()==1093684299 thencall VU4()endifreturn falseendfunctionfunction KV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function W04))set t=nullendfunctionfunction WI4 takes nothing returns booleanreturn GetLearnedSkill()==1093682010 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction W14 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local real PAI=GetEventDamage()if(PAI>0)and GetUnitState(PKI,UNIT_STATE_LIFE)>1 and GetUnitAbilityLevel(PKI,1112433775)==0 thenif(GetRandomInt(1,100)<=(5+(5*GetUnitAbilityLevel(PKI,1093682010))))thencall SetUnitState(PKI,UNIT_STATE_LIFE,GetUnitState(PKI,UNIT_STATE_LIFE)+PAI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",PKI,"hand,left"))endifendifendfunctionfunction WO4 takes nothing returns nothinglocal trigger tif GetUnitAbilityLevel(GetTriggerUnit(),1093682010)==1 thenset t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddAction(t,function W14)endifendfunctionfunction KX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function WI4))call TriggerAddAction(t,function WO4)endfunctionconstant function Chronosphere_RawCode takes nothing returns integerreturn 1093683761endfunctionconstant function Chronosphere_SphereCode takes nothing returns integerreturn 1966092364endfunctionfunction W24 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit W34=(LoadUnitHandle(LY,(S5I),(19)))local real H71=(LoadReal(LY,(S5I),(6)))local real H81=(LoadReal(LY,(S5I),(7)))if W34==null or P7I==null thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif QLI(P7I,W34)<450 thencall SaveInteger(LY,(GetHandleId((P7I))),((4423)),(1))call H61(P7I,H71,H81,1000.)elsecall SaveInteger(LY,(GetHandleId((P7I))),((4423)),(2))endifcall SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))endifset t=nullset P7I=nullset W34=nullreturn falseendfunctionfunction W44 takes unit P7I,unit W34 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(W34))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call TriggerRegisterTimerEvent(t,0.005,true)call TriggerAddCondition(t,Condition(function W24))set t=nullendfunctionfunction W54 takes nothing returns booleanif GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(HHI)and GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(HHI)thencall W44(GetFilterUnit(),HGI)endifreturn falseendfunctionfunction W64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit W34=(LoadUnitHandle(LY,(S5I),(19)))local unit u=GetTriggerUnit()if W34==null thencall FlushChildHashtable(LY,(S5I))call S0I(t)set P7I=nullset u=nullreturn falseendifif GetOwningPlayer(u)==GetOwningPlayer(P7I)and GetUnitTypeId(u)==GetUnitTypeId(P7I)thencall W44(u,W34)endifset P7I=nullset W34=nullset u=nullreturn falseendfunctionfunction W74 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683761)or GetSpellAbilityId()==1093747767endfunctionfunction W84 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit W34=(LoadUnitHandle(LY,(S5I),(19)))call PauseTimer(t)call FlushChildHashtable(LY,(S5I))call DestroyTimer(t)endfunctionfunction W94 takes unit SWI returns booleanlocal integer ID=GetUnitTypeId(SWI)return ID==1865429040 or ID==1865429041 or ID==1865429057 or ID==1865429080 or ID==1869836340 or ID==1865429048 or ID==1865429049 or ID==1700946284 or ID==1697657398 or ID==1970107511 or ID==1966092370 or ID==1162032181endfunctionfunction WA4 takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(XO)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or W94(GetFilterUnit()))endfunctionfunction WB4 takes nothing returns nothingif GetUnitTypeId(GetEnumUnit())!=1162032181 thencall PauseUnit(GetEnumUnit(),true)call SetUnitTimeScale(GetEnumUnit(),0)call UnitRemoveAbility(GetEnumUnit(),1112896364)call UnitRemoveAbility(GetEnumUnit(),1112896368)call UnitRemoveAbility(GetEnumUnit(),1112896372)call SaveInteger(LY,(GetHandleId((GetEnumUnit()))),((4306)),(1))endifendfunctionfunction WC4 takes nothing returns nothingif GetUnitTypeId(GetEnumUnit())!=1162032181 thencall SaveInteger(LY,(GetHandleId((GetEnumUnit()))),((4306)),(2))call PauseUnit(GetEnumUnit(),false)call SetUnitTimeScale(GetEnumUnit(),1)endifendfunctionfunction WD4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit W34=(LoadUnitHandle(LY,(S5I),(19)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group WE4=(LoadGroupHandle(LY,(S5I),(220)))local integer QX2=(LoadInteger(LY,(S5I),(28)))local real QJI=GetUnitX(W34)local real QKI=GetUnitY(W34)local boolexpr QL1=Condition(function WA4)local group H03=NTI()local integer DC1=35+SUI*5if GetUnitAbilityLevel(SFI,1093747767)>0 thenset DC1=30+SUI*10endifcall ForGroup(WE4,function WC4)set XO=SFIcall GroupEnumUnitsInRange(H03,QJI,QKI,450,QL1)call GroupClear(WE4)call GroupAddGroup(H03,WE4)call ForGroup(H03,function WB4)call NSI(H03)set QX2=QX2+1call SaveInteger(LY,(S5I),(28),(QX2))if QX2>DC1 thenif Q2==false thencall ForGroup(WE4,function WC4)endifcall RemoveUnit(W34)call NSI(WE4)call PauseTimer(t)call FlushChildHashtable(LY,(S5I))call DestroyTimer(t)endifendfunctionfunction WF4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,(1093683761))local location P8I=GetSpellTargetLoc()local real QJI=GetLocationX(P8I)local real QKI=GetLocationY(P8I)local unit W34=CreateUnit(GetOwningPlayer(SFI),(1966092364),QJI,QKI,0)local timer t=CreateTimer()local integer S5I=GetHandleId(t)local group WE4=NTI()local group glocal trigger WG4if SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093747767)endifcall SaveUnitHandle(LY,(GetHandleId(t)),(19),(W34))call TimerStart(t,0.8,false,function W84)set t=CreateTimer()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(19),(W34))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveGroupHandle(LY,(S5I),(220),(WE4))call SaveInteger(LY,(S5I),(28),(0))call SaveInteger(LY,(S5I),(5),(SUI))call TimerStart(t,0.1,true,function WD4)call RemoveLocation(P8I)set HGI=W34set HHI=SFIset g=NTI()call GroupEnumUnitsInRange(g,0,0,25000,Condition(function W54))call NSI(g)set WG4=CreateTrigger()set S5I=GetHandleId(WG4)call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveUnitHandle(LY,(S5I),(19),(W34))call TriggerRegisterEnterRectSimple(WG4,GetWorldBounds())call TriggerAddCondition(WG4,Condition(function W64))set g=nullset WG4=nullendfunctionfunction KY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function W74))call TriggerAddAction(t,function WF4)endfunctionfunction WH4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(P7I,1110459186)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1)call SaveInteger(LY,(GetHandleId((P7I))),((4280)),(2))elsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P7I,"origin"))endifset t=nullset P7I=nullreturn falseendfunctionfunction WZ4 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitTimeScale(P7I,0)call SaveInteger(LY,(GetHandleId((P7I))),((4280)),(1))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function WH4))call SaveUnitHandle(LY,(S5I),(2),(P7I))if((LoadInteger(LY,(GetHandleId((P7I))),((4306))))==1)==true thencall P6I(HZI,P7I,1,30+10*GetUnitAbilityLevel(HZI,1093679153))endifset t=nullendfunctionfunction WV4 takes nothing returns booleanif GetUnitAbilityLevel(GetFilterUnit(),1110459186)>0 and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4280))))==1)==false thencall WZ4(GetFilterUnit())endifreturn falseendfunctionfunction WW4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=NTI()set HZI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),450,Condition(function WV4))call NSI(g)set t=nullset P7I=nullset g=nullreturn falseendfunctionfunction WX4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function WW4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction WY4 takes nothing returns booleanif GetLearnedSkill()==1093679153 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093679153)==1 thencall WX4()endifreturn falseendfunctionfunction KW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function WY4))set t=nullendfunctionfunction WJ4 takes unit u,real WK4 returns nothinglocal integer d=R2I(WK4)local integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1local real VOOset HWI[0]=1093808968set HWI[1]=1093808971set HWI[2]=1093808972set HWI[3]=1093808970set HWI[4]=1093808969set HWI[5]=1093808973if d<1 thencall UnitRemoveAbility(u,HWI[0])call UnitRemoveAbility(u,HWI[1])call UnitRemoveAbility(u,HWI[2])call UnitRemoveAbility(u,HWI[3])call UnitRemoveAbility(u,HWI[4])call UnitRemoveAbility(u,HWI[5])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=5set i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,HWI[i])call SetPlayerAbilityAvailable(GetOwningPlayer(u),HWI[i],false)elsecall UnitRemoveAbility(u,HWI[i])endifset i=i+1endloopendfunctionfunction WL4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093808967)local real Z7O=(LoadReal(LY,(GetHandleId(P8I)),(682)))local integer NPI=(LoadInteger(LY,(GetHandleId(P8I)),(683)))-1call WJ4(P8I,NPI*SUI)call SaveInteger(LY,(GetHandleId(P8I)),(683),(NPI))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction WM4 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093808967)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(GetHandleId(P8I)),(683)))+1call WJ4(P8I,NPI*SUI)call SaveInteger(LY,(GetHandleId(P8I)),(683),(NPI))call SaveReal(LY,(GetHandleId(P8I)),(682),(((TimerGetElapsed(M))+HVI-0.01)*1.0))call TriggerRegisterTimerEvent(t,HVI,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function WL4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",P8I,"origin"))set t=nullendfunctionfunction WN4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)if GetUnitAbilityLevel(P8I,1093678162)==0 thencall WM4(P7I,P8I)endifcall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction WS4 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function WN4))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction WT4 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4307))))==1)==false thencall SCI(P7I,4307,0.3)call WS4()endifendfunctionfunction WR4 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093808967)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall WT4()endifreturn falseendfunctionfunction WP4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function WR4))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction WQ4 takes nothing returns booleanif GetLearnedSkill()==1093808967 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808967)==1 thencall WP4()endifreturn falseendfunctionfunction KJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function WQ4))set t=nullendfunctionfunction WU4 takes nothing returns nothinglocal real X04=QDI(QCI(GetUnitState(GetEnumUnit(),UNIT_STATE_MANA),HJI),0)local real XI4=X04*0.5if RKI(GetEnumUnit())==false and X04>0 and PII(GetEnumUnit())==false thenif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>(XI4+0.5)thencall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)-XI4)elsecall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,1)call P6I(HKI,GetEnumUnit(),1,XI4)endifcall SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)-X04)if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))thencall SetUnitState(HKI,UNIT_STATE_MANA,GetUnitState(HKI,UNIT_STATE_MANA)+X04*0.5)endifendifendfunctionfunction X14 takes unit P7I,unit I01,integer XO4,integer X24 returns nothinglocal group g=NTI()set HKI=P7Iset GK=P7Iset HJI=XO4*75+25call GroupEnumUnitsInRange(g,GetUnitX(I01),GetUnitY(I01),700,Condition(function CA1))call ForGroup(g,function WU4)call NSI(g)set g=nullendfunctionfunction X34 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit X44local real X54=2.9local real X64=HXI+(HYI-HXI)*NPI/(X54/0.05)call SetUnitScale(I01,X64,X64,X64)if NPI>(X54/0.05)thencall X14(P7I,I01,(LoadInteger(LY,(S5I),(3000))),(LoadInteger(LY,(S5I),(3002))))set X44=CreateUnit(GetOwningPlayer(I01),1697657167,GetUnitX(I01),GetUnitY(I01),0)call SetUnitTimeScale(X44,0.3)call RemoveUnit(I01)call KillUnit(X44)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset I01=nullset X44=nullreturn falseendfunctionfunction X74 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit P7I=GetTriggerUnit()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697657165,x,y,a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function X34))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(3000),((LoadInteger(LY,(GetHandleId(P7I)),(3000)))))call SaveInteger(LY,(S5I),(3001),((LoadInteger(LY,(GetHandleId(P7I)),(3001)))))call SaveInteger(LY,(S5I),(3002),((LoadInteger(LY,(GetHandleId(P7I)),(3002)))))call RemoveLocation(l)set t=nullset l=nullset P7I=nullendfunctionfunction X84 takes nothing returns booleanif GetSpellAbilityId()==1093686867 thencall X74()endifreturn falseendfunctionfunction X94 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function X84))set t=nullendfunctionfunction XA4 takes unit P7I,unit P8I,integer XO4,integer XB4 returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local unit XC4=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local real XD4=0.5+0.3*XB4if XB4==7 thenset XD4=2.5endifcall IA1(I01,1093687371)call SetUnitAbilityLevel(I01,1093687371,XB4)call IssueTargetOrder(I01,"cyclone",P8I)call PDI(XC4,P8I,1,70+(XO4+XO4+XO4)*15.0,XD4)set I01=nullset XC4=nullendfunctionfunction XE4 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())call XA4(GK,GetEnumUnit(),UJ,IK)endifendfunctionfunction XF4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local real a=(LoadReal(LY,(S5I),(137)))local integer XO4=(LoadInteger(LY,(S5I),(3000)))local integer XB4=(LoadInteger(LY,(S5I),(3001)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local real x=GetUnitX(I01)+25*Cos(a)local real y=GetUnitY(I01)+25*Sin(a)local group XG4=NTI()local real QWI=QNI(x,y,x2,y2)if QWI<=30 thenset x=x2set y=y2endifcall SetUnitX(I01,PTI(x))call SetUnitY(I01,PTI(y))set GK=I01set XK=gset UJ=XO4set IK=XB4call GroupEnumUnitsInRange(XG4,x,y,200+25,Condition(function CA1))call ForGroup(XG4,function XE4)call NSI(XG4)if QWI<=30 or GetTriggerEvalCount(t)>125 thencall NSI(g)call KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset I01=nullset g=nullset XG4=nullreturn falseendfunctionfunction XH4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit P7I=GetTriggerUnit()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local unit I01set x=GetUnitX(P7I)set y=GetUnitY(P7I)set I01=CreateUnit(GetOwningPlayer(P7I),1848652117,x,y,a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function XF4))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(66),((x+(400+400.0*(LoadInteger(LY,(GetHandleId((P7I))),(3000))))*Cos(a))*1.0))call SaveReal(LY,(S5I),(67),((y+(400+400.0*(LoadInteger(LY,(GetHandleId((P7I))),(3000))))*Sin(a))*1.0))call SaveInteger(LY,(S5I),(3000),((LoadInteger(LY,(GetHandleId(P7I)),(3000)))))call SaveInteger(LY,(S5I),(3001),((LoadInteger(LY,(GetHandleId(P7I)),(3001)))))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call RemoveLocation(l)set t=nullset l=nullset P7I=nullendfunctionfunction XZ4 takes nothing returns booleanif GetSpellAbilityId()==1093686859 thencall XH4()endifreturn falseendfunctionfunction XV4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XZ4))call Q3I(1093687371,GetRandomReal(1,25))set t=nullendfunctionfunction XW4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1093686858)call UnitRemoveAbility(P8I,1093742649)if GetUnitAbilityLevel(P8I,1093686858)==0 or GetUnitAbilityLevel(P8I,1093742649)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction XX4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093686858)call UnitRemoveAbility(P8I,1093742649)if GetUnitAbilityLevel(P8I,1093686858)>0 or GetUnitAbilityLevel(P8I,1093742649)>0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function XW4))endifset t=nullset P8I=nullreturn falseendfunctionfunction XY4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer XO4=(LoadInteger(LY,(GetHandleId(SFI)),(3000)))local integer X24=(LoadInteger(LY,(GetHandleId(SFI)),(3002)))call IA1(P8I,1093686858)call SetUnitAbilityLevel(P8I,1093686858,XO4)call IA1(P8I,1093742649)call SetUnitAbilityLevel(P8I,1093742649,X24)call TriggerRegisterTimerEvent(t,9,false)call TriggerAddCondition(t,Condition(function XX4))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",P8I,"origin")))set t=nullset SFI=nullset P8I=nullendfunctionfunction XJ4 takes nothing returns booleanif GetSpellAbilityId()==1093686865 thencall XY4()endifreturn falseendfunctionfunction XK4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XJ4))call Q3I(1093686858,GetRandomReal(1,25))call Q3I(1093742649,GetRandomReal(1,25))set t=nullendfunctionfunction XL4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetUnitAbilityLevel(SFI,1110456408)==0 thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitAbilityLevel(I01,1093686856,(LoadInteger(LY,(GetHandleId(SFI)),(3001))))call SetUnitX(I01,GetUnitX(SFI))call SetUnitY(I01,GetUnitY(SFI))endifset t=nullset I01=nullset SFI=nullreturn falseendfunctionfunction XM4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697657174,GetUnitX(SFI),GetUnitY(SFI),0)call IA1(I01,1093686856)call SetUnitAbilityLevel(I01,1093686856,(LoadInteger(LY,(GetHandleId(SFI)),(3001))))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function XL4))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullset SFI=nullendfunctionfunction XN4 takes nothing returns booleanif GetSpellAbilityId()==1093687372 thencall XM4()endifreturn falseendfunctionfunction XS4 takes unit SFI returns nothingif GetUnitAbilityLevel(SFI,1093687372)>0 thencall SetUnitAbilityLevel(SFI,1093687372,(LoadInteger(LY,(GetHandleId(SFI)),(3000))))endifendfunctionfunction XT4 takes nothing returns booleanif IsUnitIllusion(GetTriggerUnit())==false thencall XS4(GetTriggerUnit())endifreturn falseendfunctionfunction XR4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XN4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function XT4))call Q3I(1093686856,GetRandomReal(1,25))set t=nullendfunctionfunction XP4 takes unit P7I,unit P8I,integer XO4 returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093686868)call SetUnitAbilityLevel(I01,1093686868,XO4)call IssueTargetOrder(I01,"drunkenhaze",P8I)set I01=nullendfunctionfunction XQ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real RM2=(LoadReal(LY,(S5I),(13)))local real RS2=(LoadReal(LY,(S5I),(193)))local integer XO4=(LoadInteger(LY,(S5I),(3000)))local integer XB4=(LoadInteger(LY,(S5I),(3001)))local integer MKO=XB4*25/3local real xlocal real ylocal integer NPI=GetTriggerEvalCount(t)if NPI>MKO/3 thencall SaveReal(LY,(S5I),(193),((RS2*0.98)*1.0))endifif NPI>MKO or GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()!=EVENT_UNIT_DEATH thencall XP4(P7I,P8I,XO4)endifelseset x=PTI(GetUnitX(P8I)+RS2*Cos(RM2))set y=PUI(GetUnitY(P8I)+RS2*Sin(RM2))call UPI(x,y,150)call SetUnitPosition(P8I,x,y)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XU4 takes unit P7I,unit P8I,integer XO4,integer XB4,integer X24 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real RM2=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))call P6I(P7I,P8I,1,X24*40)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(193),((6)*1.0))call SaveInteger(LY,(S5I),(3000),(XO4))call SaveInteger(LY,(S5I),(3001),(XB4))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function XQ4))set t=nullendfunctionfunction Y04 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false and RKI(GetEnumUnit())==false thencall GroupAddUnit(XK,GetEnumUnit())call XU4(GK,GetEnumUnit(),UJ,IK,OK)endifendfunctionfunction YI4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real a=(LoadReal(LY,(S5I),(137)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local integer XO4=(LoadInteger(LY,(S5I),(3000)))local integer XB4=(LoadInteger(LY,(S5I),(3001)))local integer X24=(LoadInteger(LY,(S5I),(3002)))local real x=GetUnitX(I01)local real y=GetUnitY(I01)local group g2if QNI(x,y,x2,y2)<100 thenset x=x2set y=y2elseset x=x+33*Cos(a)set y=y+33*Sin(a)endifcall SetUnitX(I01,PTI(x))call SetUnitY(I01,PUI(y))set g2=NTI()set GK=I01set XK=gset UJ=XO4set IK=XB4set OK=X24call GroupEnumUnitsInRange(g2,x,y,200,Condition(function CA1))call ForGroup(g2,function Y04)call NSI(g2)if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 thenset g2=NTI()set GK=I01set XK=gset UJ=XO4set IK=XB4set OK=X24call GroupEnumUnitsInRange(g2,x,y,250,Condition(function CA1))call ForGroup(g2,function Y04)call NSI(g2)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call NSI(g)endifset t=nullset I01=nullset g=nullset g2=nullreturn falseendfunctionfunction Y14 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit P7I=GetTriggerUnit()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local unit I01=CreateUnit(GetOwningPlayer(P7I),1848652120,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function YI4))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(66),((GetUnitX(P7I)+1000*Cos(a))*1.0))call SaveReal(LY,(S5I),(67),((GetUnitY(P7I)+1000*Sin(a))*1.0))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call SaveInteger(LY,(S5I),(3000),((LoadInteger(LY,(GetHandleId(P7I)),(3000)))))call SaveInteger(LY,(S5I),(3001),((LoadInteger(LY,(GetHandleId(P7I)),(3001)))))call SaveInteger(LY,(S5I),(3002),((LoadInteger(LY,(GetHandleId(P7I)),(3002)))))call RemoveLocation(l)set t=nullset l=nullset P7I=nullendfunctionfunction YO4 takes nothing returns booleanif GetSpellAbilityId()==1093686861 thencall Y14()endifreturn falseendfunctionfunction Y24 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YO4))call Q3I(1093686868,GetRandomReal(1,25))set t=nullendfunctionfunction Y34 takes unit SFI returns reallocal integer X24=(LoadInteger(LY,(GetHandleId(SFI)),(3002)))return(80+X24*35.0)/2endfunctionfunction Y44 takes unit SFI returns reallocal integer XO4=(LoadInteger(LY,(GetHandleId(SFI)),(3000)))local integer XB4=(LoadInteger(LY,(GetHandleId(SFI)),(3001)))local integer X24=(LoadInteger(LY,(GetHandleId(SFI)),(3002)))return 325+XO4*175.0endfunctionfunction Y54 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real PAI=(LoadReal(LY,(S5I),(20)))local effect FX=(LoadEffectHandle(LY,(S5I),(32)))local integer NPI=GetTriggerEvalCount(t)call P6I(P7I,P8I,1,PAI)if NPI==3 thencall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyEffect(FX)endifset t=nullset P7I=nullset P8I=nullset FX=nullreturn falseendfunctionfunction Y64 takes unit P7I,unit P8I,real PAI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Environment\\SmallBuildingFire\\SmallBuildingFire2.mdl",P8I,"chest")))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function Y54))set t=nullendfunctionfunction Y74 takes nothing returns nothingcall Y64(GK,GetEnumUnit(),AK/5)call P6I(GK,GetEnumUnit(),1,AK)endfunctionfunction Y84 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local integer NPI=GetTriggerEvalCount(t)-26local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real IV1local real IW1local unit I01local group gif NPI==1 thenset I01=CreateUnit(GetOwningPlayer(P7I),1697657164,x,y,a*bj_RADTODEG)call SaveUnitHandle(LY,(S5I),(19),(I01))elseif NPI>1 thenset I01=(LoadUnitHandle(LY,(S5I),(19)))endifif NPI>0 thenset IV1=PTI(GetUnitX(I01)+15*Cos(a))set IW1=PUI(GetUnitY(I01)+15*Sin(a))call SetUnitX(I01,IV1)call SetUnitY(I01,IW1)if(NPI>1 and ModuloInteger(NPI,10)==0)or NPI==1 thenset g=NTI()set GK=P7Iset AK=Y34(P7I)call GroupEnumUnitsInRange(g,IV1,IW1,300,Condition(function CA1))call ForGroup(g,function Y74)call NSI(g)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",IV1,IW1))endifif NPI>Y44(P7I)/16.6 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)endifendifset t=nullset g=nullset I01=nullset P7I=nullreturn falseendfunctionfunction Y94 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit P7I=GetTriggerUnit()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local unit YA4=CreateUnit(GetOwningPlayer(P7I),1697657163,x,y,a*bj_RADTODEG)call SetUnitTimeScale(YA4,0.58)call UnitApplyTimedLife(YA4,1112820806,1.75)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function Y84))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call RemoveLocation(l)set t=nullset l=nullset P7I=nullendfunctionfunction YB4 takes nothing returns booleanif GetSpellAbilityId()==1093686862 thencall Y94()endifreturn falseendfunctionfunction YC4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YB4))set t=nullendfunctionfunction YD4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real Z7O=(LoadReal(LY,(GetHandleId(P8I)),(3007)))if Z7O+5<=(TimerGetElapsed(M))thencall UnitRemoveAbility(P8I,1093686871)endifcall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction YE4 takes unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P8I,1093686871)if SUI==0 thencall IA1(P8I,1093686871)endifcall SetUnitAbilityLevel(P8I,1093686871,SUI+1)call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveReal(LY,(GetHandleId(P8I)),(3007),(((TimerGetElapsed(M)))*1.0))call TriggerRegisterTimerEvent(t,5,false)call TriggerAddCondition(t,Condition(function YD4))set t=nullendfunctionfunction YF4 takes nothing returns booleanlocal real dif GetUnitAbilityLevel(GetTriggerUnit(),1110456625)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093686870)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thencall UnitRemoveAbility(GetTriggerUnit(),1110456625)call DisableTrigger(GetTriggeringTrigger())call YE4(GetTriggerUnit())call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction YG4 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function YF4))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction YH4 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),1093686870)>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(3008)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))thencall YG4()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(3008),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(3008),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686870 thencall YG4()endifreturn falseendfunctionfunction YZ4 takes unit P7I returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function YH4))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call SaveBoolean(LY,(GetHandleId(t)),(3008),(true))set t=nullendfunctionfunction YV4 takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction YW4 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1848652343 thenreturn trueendifreturn falseendfunctionfunction YX4 takes player p returns nothinglocal group g=NTI()call GroupEnumUnitsOfPlayer(g,p,Condition(function YW4))call ForGroup(g,function YV4)call NSI(g)set g=nullendfunctionfunction YY4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit I01local integer XB4=(LoadInteger(LY,(GetHandleId(P7I)),(3001)))local integer X24=(LoadInteger(LY,(GetHandleId(P7I)),(3002)))call YX4(GetOwningPlayer(P7I))set I01=CreateUnit(GetOwningPlayer(P7I),1848652343,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call SetUnitColor(I01,GetPlayerColor(BO[0]))call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",I01,"chest")call UnitApplyTimedLife(I01,1112820806,10+10*XB4)call SetUnitAbilityLevel(I01,1093686870,X24)call YZ4(I01)if RW0[GetPlayerId(GetOwningPlayer(P7I))]thencall SelectUnitAddForPlayer(I01,GetOwningPlayer(P7I))endifif XB4>3 and X24>3 thenset I01=CreateUnit(GetOwningPlayer(P7I),1848652343,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call SetUnitColor(I01,GetPlayerColor(BO[0]))call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",I01,"chest")call UnitApplyTimedLife(I01,1112820806,10+10*XB4)call SetUnitAbilityLevel(I01,1093686870,X24)call YZ4(I01)if RW0[GetPlayerId(GetOwningPlayer(P7I))]thencall SelectUnitAddForPlayer(I01,GetOwningPlayer(P7I))endifendifcall SetPlayerTechResearched(GetOwningPlayer(P7I),1378889799,X24)call SetPlayerTechResearched(GetOwningPlayer(P7I),1378889800,XB4)set P7I=nullset I01=nullendfunctionfunction YJ4 takes nothing returns booleanif GetSpellAbilityId()==1093686863 thencall YY4()endifreturn falseendfunctionfunction YK4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YJ4))call Q3I(1093686870,GetRandomReal(1,25))call Q3I(1093686871,GetRandomReal(1,25))set t=nullendfunctionfunction YL4 takes unit P7I returns integerlocal integer SUI=(LoadInteger(LY,(GetHandleId(P7I)),(3001)))if SUI==1 thenreturn 1093808944elseif SUI==2 thenreturn 1093808730elseif SUI==3 thenreturn 1093808729elseif SUI==4 thenreturn 1093808725elseif SUI==5 thenreturn 1093808726elseif SUI==6 thenreturn 1093808727elseif SUI==7 thenreturn 1093808728endifreturn 1093808944endfunctionfunction YM4 takes unit P8I returns nothingcall UnitRemoveAbility(P8I,1093808944)call UnitRemoveAbility(P8I,1093808730)call UnitRemoveAbility(P8I,1093808729)call UnitRemoveAbility(P8I,1093808725)call UnitRemoveAbility(P8I,1093808726)call UnitRemoveAbility(P8I,1093808727)call UnitRemoveAbility(P8I,1093808728)call UnitRemoveAbility(P8I,1110456410)endfunctionfunction YN4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(681)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))thencall YM4(P8I)endifset t=nullset P8I=nullreturn falseendfunctionfunction YS4 takes nothing returns nothinglocal unit P7I=GKlocal unit P8I=GetEnumUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(681)))if LVO<(TimerGetElapsed(M))thencall IA1(P8I,YL4(P7I))endifcall SaveReal(LY,(GetHandleId(P8I)),(681),(((TimerGetElapsed(M))+2)*1.0))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,2.01,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function YN4))set t=nullset P7I=nullendfunctionfunction YT4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QXI=(LoadReal(LY,(S5I),(6)))local real QYI=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local real DC1=(LoadReal(LY,(S5I),(57)))local real xlocal real ylocal integer i=1local integer NPI=GetTriggerEvalCount(t)local group gif NPI*0.1>DC1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Iloopexitwhen i>7set x=QXI+80*i*Cos((a+90)*bj_DEGTORAD)set y=QYI+80*i*Sin((a+90)*bj_DEGTORAD)call GroupEnumUnitsInRange(g,x,y,105,Condition(function CE1))call ForGroup(g,function YS4)set x=QXI+80*i*Cos((a-90)*bj_DEGTORAD)set y=QYI+80*i*Sin((a-90)*bj_DEGTORAD)call GroupEnumUnitsInRange(g,x,y,105,Condition(function CE1))call ForGroup(g,function YS4)set i=i+1endloopcall NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction YR4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real a=GetUnitFacing(P7I)local integer i=1local unit I01local real xlocal real ylocal real QXI=GetUnitX(P7I)+225*Cos(a*bj_DEGTORAD)local real QYI=GetUnitY(P7I)+225*Sin(a*bj_DEGTORAD)local integer XB4=(LoadInteger(LY,(GetHandleId(P7I)),(3001)))local integer X24=(LoadInteger(LY,(GetHandleId(P7I)),(3002)))local real DC1=1.5+1.5*XB4local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)loopexitwhen i>7set x=QXI+80*i*Cos((a+90)*bj_DEGTORAD)set y=QYI+80*i*Sin((a+90)*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(P7I),1966092367,x,y,GetRandomReal(0,360))call SetUnitAbilityLevel(I01,1395667016,XB4)call SetUnitAbilityLevel(I01,1093687374,X24)call SetUnitAnimation(I01,"birth")call QueueUnitAnimation(I01,"stand")call UnitApplyTimedLife(I01,1112820806,DC1)set x=QXI+80*i*Cos((a-90)*bj_DEGTORAD)set y=QYI+80*i*Sin((a-90)*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(P7I),1966092367,x,y,GetRandomReal(0,360))call SetUnitAbilityLevel(I01,1395667016,XB4)call SetUnitAbilityLevel(I01,1093687374,X24)call SetUnitAnimation(I01,"birth")call QueueUnitAnimation(I01,"stand")call UnitApplyTimedLife(I01,1112820806,DC1)set i=i+1endloopcall TriggerAddCondition(t,Condition(function YT4))call TriggerRegisterTimerEvent(t,0.1,true)call SaveReal(LY,(S5I),(6),((QXI)*1.0))call SaveReal(LY,(S5I),(7),((QYI)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(57),((DC1)*1.0))set I01=nullset P7I=nullset t=nullendfunctionfunction YP4 takes nothing returns booleanif GetSpellAbilityId()==1093686864 thencall YR4()endifreturn falseendfunctionfunction YQ4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YP4))call Q3I(1395667016,GetRandomReal(1,25))call Q3I(1093687374,GetRandomReal(1,25))set t=nullendfunctionfunction YU4 takes nothing returns nothingif RYI(GetEnumUnit())==false thencall P6I(GK,GetEnumUnit(),3,AK)endifendfunctionfunction J04 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real PAI=(LoadReal(LY,(S5I),(20)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=NTI()local integer NPIset GK=SFIcall GroupEnumUnitsInRange(g,x,y,200,Condition(function CA1))set NPI=CountUnitsInGroup(g)if NPI<1 thenset NPI=1endifset AK=PAI/NPIcall ForGroup(g,function YU4)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",x,y))call NSI(g)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullset g=nullreturn falseendfunctionfunction JI4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real PAI=(LoadInteger(LY,(GetHandleId(SFI)),(3002)))*62.5+12.5+25local string s=""if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(SFI))==true or(C2 and(GetLocalPlayer()==D60 or GetLocalPlayer()==D70))thenset s="Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl"endifcall I41(GetOwningPlayer(SFI),5.7,x,y,400)call TriggerRegisterTimerEvent(t,1.7,false)call TriggerAddCondition(t,Condition(function J04))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect(s,x,y)))call RemoveLocation(l)set t=nullset SFI=nullset l=nullendfunctionfunction J14 takes nothing returns booleanif GetSpellAbilityId()==1093686855 thencall JI4()endifreturn falseendfunctionfunction JO4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J14))set t=nullendfunctionfunction J24 takes unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093686857)call IssueTargetOrder(I01,"thunderbolt",P8I)if RKI(P8I)==false thencall P6I(P7I,P8I,1,SUI*7)endifset I01=nullendfunctionfunction J34 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>10 and((LoadInteger(LY,(GetHandleId((t))),((4263))))==1)==false and GetOwningPlayer(GetEventDamageSource())!=GetOwningPlayer(GetTriggerUnit())thencall DisableTrigger(t)call J24(P7I,P8I,SUI)call EnableTrigger(t)call S6I(t,4263,0.8-SUI*0.0285)endifelsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction J44 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=(LoadInteger(LY,(GetHandleId(SFI)),(3001)))call TriggerRegisterTimerEvent(t,2.5+SUI*0.5,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function J34))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",P8I,"overhead")))call J24(SFI,P8I,SUI)set t=nullset SFI=nullset P8I=nullendfunctionfunction J54 takes nothing returns booleanif GetSpellAbilityId()==1093686874 thencall J44()endifreturn falseendfunctionfunction J64 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J54))call Q3I(1093686857,GetRandomReal(1,25))set t=nullendfunctionfunction J74 takes unit SFI returns nothinglocal integer S5I=GetHandleId(SFI)local boolean J84=(LoadBoolean(LY,(S5I),(3003)))local trigger tif J84 thencall SaveBoolean(LY,(S5I),(3003),(false))set t=(LoadTriggerHandle(LY,(S5I),(3006)))call FlushChildHashtable(LY,(GetHandleId(t)))call S0I(t)endifset t=nullendfunctionfunction J94 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))call SetUnitState(SFI,UNIT_STATE_LIFE,GetUnitState(SFI,UNIT_STATE_LIFE)+SUI*1)return falseendfunctionfunction JA4 takes unit SFI,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(SFI)call SaveBoolean(LY,(S5I),(3003),(true))call SaveTriggerHandle(LY,(S5I),(3006),(t))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(SFI))call SaveInteger(LY,(GetHandleId(t)),(5),(SUI))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function J94))set t=nullendfunctionfunction JB4 takes nothing returns nothinglocal integer JC4=0local unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local integer JD4=(LoadInteger(LY,(S5I),(3013)))local integer JE4=(LoadInteger(LY,(S5I),(3014)))local integer JF4=(LoadInteger(LY,(S5I),(3015)))local integer JG4=(LoadInteger(LY,(S5I),(3016)))local integer JH4=(LoadInteger(LY,(S5I),(3017)))if JD4==3 and JE4==0 and JF4==0 thenset JC4=1elseif JD4==2 and JE4==1 and JF4==0 thenset JC4=2elseif JD4==2 and JE4==0 and JF4==1 thenset JC4=3elseif JD4==1 and JE4==2 and JF4==0 thenset JC4=4elseif JD4==1 and JE4==1 and JF4==1 thenset JC4=5elseif JD4==1 and JE4==0 and JF4==2 thenset JC4=6elseif JD4==0 and JE4==1 and JF4==2 thenset JC4=7elseif JD4==0 and JE4==2 and JF4==1 thenset JC4=8elseif JD4==0 and JE4==0 and JF4==3 thenset JC4=9elseif JD4==0 and JE4==3 and JF4==0 thenset JC4=10endifif HLI[JC4]==JH4 thenreturnendifif JG4!=0 and JH4!=0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JG4,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JH4,false)set JG4=JH4set JH4=HLI[JC4]call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JG4,true)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JH4,true)elseif JG4==0 and JH4!=0 thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JH4,false)set JG4=JH4set JH4=HLI[JC4]call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JG4,true)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JH4,true)elseset JH4=HLI[JC4]call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),JH4,true)endifcall SaveInteger(LY,(S5I),(3016),(JG4))call SaveInteger(LY,(S5I),(3017),(JH4))call XS4(SFI)set SFI=nullendfunctionfunction JZ4 takes unit SFI returns nothinglocal integer S5I=GetHandleId(SFI)local integer JD4=(LoadInteger(LY,(S5I),(3013)))local integer JE4=(LoadInteger(LY,(S5I),(3014)))local integer JF4=(LoadInteger(LY,(S5I),(3015)))local integer XO4=GetUnitAbilityLevel(SFI,1093808472)local integer XB4=GetUnitAbilityLevel(SFI,1093808471)local integer X24=GetUnitAbilityLevel(SFI,1093808470)call UnitRemoveAbility(SFI,1093687108)call UnitRemoveAbility(SFI,1093686853)call J74(SFI)call UnitRemoveAbility(SFI,1093686839)if JD4>0 thencall IA1(SFI,1093687108)call IA1(SFI,1093686853)call SetUnitAbilityLevel(SFI,1093687108,JD4*XO4)call SetUnitAbilityLevel(SFI,1093686853,JD4*XO4)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093687108,false)endifif JE4>0 thencall JA4(SFI,JE4*XB4)endifif JF4>0 thencall IA1(SFI,1093686839)call SetUnitAbilityLevel(SFI,1093686839,JF4*X24)endifendfunctionfunction JV4 takes unit SFI,integer JD4,integer JE4,integer JF4 returns nothinglocal integer Orb1=0local integer Orb2=0local integer Orb3=0local integer JW4local integer JX4local integer JY4local integer JJ4local integer JK4local integer JL4local integer JM4local integer JN4local integer JS4call UnitRemoveAbility(SFI,1093682254)call UnitRemoveAbility(SFI,1093682247)call UnitRemoveAbility(SFI,1093683544)call UnitRemoveAbility(SFI,1093683505)call UnitRemoveAbility(SFI,1093683504)call UnitRemoveAbility(SFI,1093683290)call UnitRemoveAbility(SFI,1093683523)call UnitRemoveAbility(SFI,1093683522)call UnitRemoveAbility(SFI,1093683524)call UnitRemoveAbility(SFI,1093808707)call UnitRemoveAbility(SFI,1093808708)call UnitRemoveAbility(SFI,1093808709)call UnitRemoveAbility(SFI,1093808710)call UnitRemoveAbility(SFI,1093808711)call UnitRemoveAbility(SFI,1093808712)call UnitRemoveAbility(SFI,1093808713)call UnitRemoveAbility(SFI,1093808714)call UnitRemoveAbility(SFI,1093808715)if EP1(SFI,K70)==null thenset JW4=1093682254set JX4=1093682247set JY4=1093683544set JJ4=1093683505set JK4=1093683504set JL4=1093683290set JM4=1093683523set JN4=1093683522set JS4=1093683524elseset JW4=1093808707set JX4=1093808708set JY4=1093808709set JJ4=1093808710set JK4=1093808711set JL4=1093808712set JM4=1093808713set JN4=1093808714set JS4=1093808715endifif JD4==1 and JE4==0 and JF4==0 thencall IA1(SFI,JW4)elseif JD4==0 and JE4==1 and JF4==0 thencall IA1(SFI,JJ4)elseif JD4==0 and JE4==0 and JF4==1 thencall IA1(SFI,JM4)elseif JD4==2 and JE4==0 and JF4==0 thencall IA1(SFI,JW4)call IA1(SFI,JX4)elseif JD4==1 and JE4==1 and JF4==0 thencall IA1(SFI,JW4)call IA1(SFI,JK4)elseif JD4==1 and JE4==0 and JF4==1 thencall IA1(SFI,JW4)call IA1(SFI,JN4)elseif JD4==0 and JE4==2 and JF4==0 thencall IA1(SFI,JJ4)call IA1(SFI,JK4)elseif JD4==0 and JE4==1 and JF4==1 thencall IA1(SFI,JJ4)call IA1(SFI,JN4)elseif JD4==0 and JE4==0 and JF4==2 thencall IA1(SFI,JM4)call IA1(SFI,JN4)elseif JD4==3 and JE4==0 and JF4==0 thencall IA1(SFI,JW4)call IA1(SFI,JX4)call IA1(SFI,JY4)elseif JD4==2 and JE4==1 and JF4==0 thencall IA1(SFI,JW4)call IA1(SFI,JX4)call IA1(SFI,JL4)elseif JD4==2 and JE4==0 and JF4==1 thencall IA1(SFI,JW4)call IA1(SFI,JX4)call IA1(SFI,JS4)elseif JD4==1 and JE4==2 and JF4==0 thencall IA1(SFI,JW4)call IA1(SFI,JK4)call IA1(SFI,JL4)elseif JD4==1 and JE4==1 and JF4==1 thencall IA1(SFI,JW4)call IA1(SFI,JK4)call IA1(SFI,JS4)elseif JD4==1 and JE4==0 and JF4==2 thencall IA1(SFI,JW4)call IA1(SFI,JN4)call IA1(SFI,JS4)elseif JD4==0 and JE4==1 and JF4==2 thencall IA1(SFI,JM4)call IA1(SFI,JN4)call IA1(SFI,JL4)elseif JD4==0 and JE4==2 and JF4==1 thencall IA1(SFI,JJ4)call IA1(SFI,JK4)call IA1(SFI,JS4)elseif JD4==0 and JE4==0 and JF4==3 thencall IA1(SFI,JM4)call IA1(SFI,JN4)call IA1(SFI,JS4)elseif JD4==0 and JE4==3 and JF4==0 thencall IA1(SFI,JJ4)call IA1(SFI,JK4)call IA1(SFI,JL4)endifendfunctionfunction JT4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer S5I=GetHandleId(SFI)local integer JR4=GetSpellAbilityId()local integer JP4=(LoadInteger(LY,(S5I),(3010)))local integer JQ4=(LoadInteger(LY,(S5I),(3011)))local integer JU4=(LoadInteger(LY,(S5I),(3012)))local integer JD4=0local integer JE4=0local integer JF4=0set JP4=JQ4set JQ4=JU4set JU4=JR4if JP4==1093808472 thenset JD4=JD4+1elseif JP4==1093808471 thenset JE4=JE4+1elseif JP4==1093808470 thenset JF4=JF4+1endifif JQ4==1093808472 thenset JD4=JD4+1elseif JQ4==1093808471 thenset JE4=JE4+1elseif JQ4==1093808470 thenset JF4=JF4+1endifif JU4==1093808472 thenset JD4=JD4+1elseif JU4==1093808471 thenset JE4=JE4+1elseif JU4==1093808470 thenset JF4=JF4+1endifcall SaveInteger(LY,(S5I),(3010),(JP4))call SaveInteger(LY,(S5I),(3011),(JQ4))call SaveInteger(LY,(S5I),(3012),(JU4))call SaveInteger(LY,(S5I),(3013),(JD4))call SaveInteger(LY,(S5I),(3014),(JE4))call SaveInteger(LY,(S5I),(3015),(JF4))call JV4(SFI,JD4,JE4,JF4)call JZ4(SFI)call XS4(SFI)endfunctionfunction FZO takes nothing returns nothinglocal unit SFI=GKlocal integer S5I=GetHandleId(SFI)local integer JP4=(LoadInteger(LY,(S5I),(3010)))local integer JQ4=(LoadInteger(LY,(S5I),(3011)))local integer JU4=(LoadInteger(LY,(S5I),(3012)))local integer JD4=0local integer JE4=0local integer JF4=0if JP4==1093808472 thenset JD4=JD4+1elseif JP4==1093808471 thenset JE4=JE4+1elseif JP4==1093808470 thenset JF4=JF4+1endifif JQ4==1093808472 thenset JD4=JD4+1elseif JQ4==1093808471 thenset JE4=JE4+1elseif JQ4==1093808470 thenset JF4=JF4+1endifif JU4==1093808472 thenset JD4=JD4+1elseif JU4==1093808471 thenset JE4=JE4+1elseif JU4==1093808470 thenset JF4=JF4+1endifcall JV4(SFI,JD4,JE4,JF4)set SFI=nullendfunctionfunction K04 takes nothing returns booleanif IsUnitIllusion(GetTriggerUnit())==false and(GetLearnedSkill()==1093808472 or GetLearnedSkill()==1093808471 or GetLearnedSkill()==1093808470)thencall JZ4(GetTriggerUnit())if GetLearnedSkill()==1093808472 thencall SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+2,true)call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(3000),(GetUnitAbilityLevel(GetTriggerUnit(),1093808472)))endifif GetLearnedSkill()==1093808471 thencall SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+2,true)call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(3001),(GetUnitAbilityLevel(GetTriggerUnit(),1093808471)))endifif GetLearnedSkill()==1093808470 thencall SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+2,true)call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(3002),(GetUnitAbilityLevel(GetTriggerUnit(),1093808470)))endifendifreturn falseendfunctionfunction KI4 takes nothing returns booleanif GetSpellAbilityId()==1093808472 or GetSpellAbilityId()==1093808471 or GetSpellAbilityId()==1093808470 thencall JT4()elseif GetSpellAbilityId()==1093808473 or GetSpellAbilityId()==1093748565 thencall JB4()endifreturn falseendfunctionfunction QU1 takes nothing returns nothinglocal unit SFI=GKlocal integer i=1local integer OO1if GetUnitTypeId(SFI)!=1211117653 thenreturnendifloopexitwhen i>11set OO1=HLI[i]call IA1(SFI,OO1)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),OO1,false)set i=i+1endloopset SFI=nullendfunctionfunction K14 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1211117653 and IsUnitIllusion(GetTriggerUnit())==false thenset GK=GetTriggerUnit()call QU1()elseif(GetUnitTypeId(GetTriggerUnit())==1432510828 or GetUnitTypeId(GetTriggerUnit())==1160786520)and IsUnitIllusion(GetTriggerUnit())==false thenset GK=GetTriggerUnit()call ExecuteFunc("KO4")elseif GetUnitTypeId(GetTriggerUnit())==1211117641 and IsUnitIllusion(GetTriggerUnit())==false thenset GK=GetTriggerUnit()call ExecuteFunc("K24")endifreturn falseendfunctionfunction SP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call Q1I((HLI[1]))call Q1I((HLI[2]))call Q1I((HLI[3]))call Q1I((HLI[4]))call Q1I((HLI[5]))call Q1I((HLI[6]))call Q1I((HLI[7]))call Q1I((HLI[8]))call Q1I((HLI[9]))call Q1I((HLI[10]))call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function KI4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function K04))set t=nullcall QRI(bj_FORCE_ALL_PLAYERS,15.00,GetObjectName(1848653383))call Q3I(1093687375,GetRandomReal(1,25))call Q3I(1093687108,GetRandomReal(1,25))call Q3I(1093686853,GetRandomReal(1,25))call Q3I(1093686839,GetRandomReal(1,25))call Q3I(1093808470,GetRandomReal(1,25))call Q3I(1093808472,GetRandomReal(1,25))call Q3I(1093808471,GetRandomReal(1,25))call X94()call XV4()call XK4()call XR4()call Y24()call YC4()call YK4()call YQ4()call JO4()call J64()endfunctionfunction K34 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real PAIif SUI==1 thenset PAI=15elseif SUI==2 thenset PAI=30elseif SUI==3 thenset PAI=40elseif SUI==4 thenset PAI=50endifif GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 thencall P6I(P7I,P8I,1,PAI)endifif GetTriggerEvalCount(t)==4 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093752403)call UnitRemoveAbility(P8I,1110459470)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction K44 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1095267426)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function K34))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",P8I,"chest")))call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093752403,false)call IA1(P8I,1093752403)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction K54 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real d=QLI(P7I,P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function K44))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction K64 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"weapon"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"hand"))endfunctionfunction K74 takes nothing returns booleanif GetSpellAbilityId()==1095267426 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall K64()elseif NNI(GetSpellTargetUnit())==false thencall K54()endifendifreturn falseendfunctionfunction T81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function K74))set t=nullendfunctionfunction K84 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SelectUnitForPlayerSingle(P7I,GetOwningPlayer(P7I))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction K94 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093677401)local real DC1=360-100*SUIlocal unit I01if SUI==3 thenendifif TimerGetRemaining(EJ0[GetPlayerId(GetOwningPlayer(P7I))])==0 and GetUnitState(P7I,UNIT_STATE_MANA)>=140 thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093809972)call IssueImmediateOrder(I01,"thunderclap")call TimerStart(EJ0[GetPlayerId(GetOwningPlayer(P7I))],DC1,false,null)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3+0.01,false)call TriggerAddCondition(t,Condition(function K84))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset t=nullset P7I=nullset I01=nullreturn falseendfunctionfunction KA4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function K94))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction KB4 takes nothing returns booleanif GetLearnedSkill()==1093677401 and GetUnitAbilityLevel(GetTriggerUnit(),1093677401)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall KA4()endifreturn falseendfunctionfunction TA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function KB4))set t=nullendfunctionfunction KC4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093817136)local real KD4=(LoadReal(LY,(S5I),(797)))local real KE4=(LoadReal(LY,(S5I),(798)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall SaveInteger(LY,(GetHandleId((P7I))),((4338)),(2))call IA1(P7I,1093816922)call SetUnitAbilityLevel(P7I,1093816922,SUI)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif KD4>0 thencall SaveInteger(LY,(GetHandleId((P7I))),((4338)),(2))if GetUnitTypeId(P7I)==1313026096 thencall IA1(P7I,1093816922)call SetUnitAbilityLevel(P7I,1093816922,SUI)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)if IC1(P7I)==false thencall SetUnitState(P7I,UNIT_STATE_LIFE,QDI(1,GetUnitState(P7I,UNIT_STATE_LIFE)-KD4))endifif IC1(P8I)==false thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+KD4)endifelseset KD4=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)*0.2call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+KD4)call SetUnitState(P8I,UNIT_STATE_LIFE,QDI(1,GetUnitState(P8I,UNIT_STATE_LIFE)-KD4))call SaveReal(LY,(S5I),(797),((KD4)*1.0))call SaveReal(LY,(S5I),(798),((KE4)*1.0))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction KF4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call TriggerRegisterTimerEvent(t,0.01,false)call TriggerRegisterTimerEvent(t,7,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function KC4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(797),((0)*1.0))call SaveReal(LY,(S5I),(798),((0)*1.0))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\MortalStrikeCaster.mdx",P7I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\MortalStrikeTarget.mdx",P8I,"overhead")))call SaveInteger(LY,(GetHandleId((P7I))),((4338)),(1))call UnitRemoveAbility(P7I,1093816922)set t=nullset P7I=nullset P8I=nullendfunctionfunction KG4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093817136)if SUI==1 thencall IA1(P7I,1093816922)elseif((LoadInteger(LY,(GetHandleId((P7I))),((4338))))==1)==false thencall SetUnitAbilityLevel(P7I,1093816922,SUI)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093816922,false)set P7I=nullendfunctionfunction KH4 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL thenif GetLearnedSkill()==1093817136 and IsUnitIllusion(GetTriggerUnit())==false thencall KG4()endifelseif GetSpellAbilityId()==1093817136 thenif NNI(GetSpellTargetUnit())==false thencall KF4()endifendifendifreturn falseendfunctionfunction T91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function KH4))set t=nullendfunctionfunction KZ4 takes unit u returns booleanreturn GetUnitTypeId(u)==1160785973 or GetUnitTypeId(u)==1211117637 or GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1211119684 or GetUnitTypeId(u)==1211119683 or GetUnitTypeId(u)==1211119668 or GetUnitTypeId(u)==1211119682 or GetUnitTypeId(u)==1160786511endfunctionfunction KV4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+GetEventDamage()*(0.1+0.05*SUI))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",P7I,"origin"))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifreturn falseendfunctionfunction KW4 takes unit P7I,unit P8I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function KV4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullendfunctionfunction KX4 takes nothing returns booleanif(KZ4(GetAttacker())==true or IsUnitIllusion(GetAttacker())==true)and GetUnitAbilityLevel(GetAttacker(),1110460249)>0 and((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4419))))==1)==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall KW4(GetAttacker(),GetTriggerUnit(),(LoadInteger(LY,(GetHandleId(GetAttacker())),(819))))call SCI(GetAttacker(),4419,0.25)endifreturn falseendfunctionfunction KY4 takes nothing returns nothingif HTI or(IC1(GetEnumUnit())or IsUnitInRangeXY(GetEnumUnit(),GetUnitX(HNI),GetUnitY(HNI),900)==false or IsUnitType(GetEnumUnit(),UNIT_TYPE_RANGED_ATTACKER)==false)thencall GroupRemoveUnit(HMI,GetEnumUnit())call UnitRemoveAbility(GetEnumUnit(),1093817932)if IsUnitType(GetEnumUnit(),UNIT_TYPE_RANGED_ATTACKER)==false thencall UnitRemoveAbility(GetEnumUnit(),1110460249)call UnitRemoveAbility(GetEnumUnit(),1110460468)endifendifendfunctionfunction KJ4 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_RANGED_ATTACKER)and IsUnitInGroup(GetEnumUnit(),HMI)==false thencall GroupAddUnit(HMI,GetEnumUnit())endifendfunctionfunction KK4 takes unit SWI,integer U9I returns booleanlocal item BA1local boolean F81=falselocal boolean F91=trueset BA1=CreateItem(U9I,GetUnitX(SWI),GetUnitY(SWI))if GetUnitAbilityLevel(SWI,1095331446)==0 thenset F81=truecall IA1(SWI,1095331446)endifif UnitAddItem(SWI,BA1)==false thencall RemoveItem(BA1)set F91=falseelseif GetWidgetLife(BA1)>0 thencall RemoveItem(BA1)set F91=falseelsecall RemoveItem(BA1)endifif F81 thencall UnitRemoveAbility(SWI,1095331446)endifset BA1=nullreturn F91endfunctionfunction KL4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if KZ4(P8I)or IsUnitIllusion(P8I)==true thencall UnitRemoveAbility(P8I,1110460468)call IA1(P8I,1093817932)call SaveInteger(LY,(GetHandleId(P8I)),(819),(HSI))elsecall UnitRemoveAbility(P8I,1093817932)call UnitRemoveAbility(P8I,1110460249)call DisableTrigger(LY0)call KK4(P8I,HRI[HSI])call EnableTrigger(LY0)endifset P8I=nullendfunctionfunction KM4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group FX4=(LoadGroupHandle(LY,(S5I),(22)))local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH or P7I==null thenset HTI=truecall ForGroup(FX4,function KY4)call NSI(FX4)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset HMI=FX4set HSI=GetUnitAbilityLevel(P7I,1096114550)set HTI=falseset HNI=P7Iset GK=P7Icall ForGroup(FX4,function KY4)set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),900+25,Condition(function CT1))call ForGroup(g,function KJ4)call NSI(g)set g=nullcall ForGroup(FX4,function KL4)endifset t=nullset P7I=nullset FX4=nullreturn falseendfunctionfunction KN4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()if IsUnitIllusion(P7I)thencall TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,1,true)elsecall TriggerRegisterTimerEvent(t,0.2,true)endifcall TriggerAddCondition(t,Condition(function KM4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(22),(NTI()))set t=nullset P7I=nullendfunctionfunction KS4 takes nothing returns booleanif GetLearnedSkill()==1096114550 and GetUnitAbilityLevel(GetTriggerUnit(),1096114550)==1 thencall KN4()endifreturn falseendfunctionfunction TB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function KS4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function KX4))set HRI[1]=1227903297set HRI[2]=1227903298set HRI[3]=1227903299set HRI[4]=1227903300set t=nullendfunctionconstant function Poof_RawCode takes nothing returns integerreturn 1093684792endfunctionconstant function Poof_PrimaryUnitCode takes nothing returns integerreturn 1211117641endfunctionconstant function Poof_SecondaryUnitCode takes nothing returns integerreturn 1211117642endfunctionfunction KT4 takes unit SWI returns booleanreturn(GetUnitTypeId(SWI)==(1211117641)or GetUnitTypeId(SWI)==(1211117642)or GetUnitTypeId(SWI)==GetUnitTypeId(GetTriggerUnit()))and GetUnitState(SWI,UNIT_STATE_LIFE)>0.5 and GetOwningPlayer(SWI)==GetOwningPlayer(GetTriggerUnit())endfunctionfunction KR4 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684792)endfunctionfunction KP4 takes nothing returns booleanreturn KT4(GetFilterUnit())endfunctionfunction KQ4 takes nothing returns nothinglocal unit HO2=GetEnumUnit()local real KU4=QMI(HO2,X3)if KU4<JO thenset JO=KU4set XO=HO2endifendfunctionfunction L04 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0endfunctionfunction LI4 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),JO,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)endfunctionfunction L14 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local location AM3local real xlocal real ylocal real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local group Z51local boolexpr QL1local boolean LO4=falseif P8I!=null and KT4(P8I)thenset x=GetUnitX(P8I)set y=GetUnitY(P8I)set LO4=trueelseset QL1=Condition(function KP4)set Z51=NTI()call GroupEnumUnitsInRange(Z51,0,0,999999,QL1)if P8I!=null thenset AM3=GetUnitLoc(P8I)elseset AM3=GetSpellTargetLoc()endifset XO=FirstOfGroup(Z51)if XO!=null thenset LO4=truecall GroupRemoveUnit(Z51,XO)set JO=QMI(XO,AM3)set X3=AM3call ForGroup(Z51,function KQ4)set P8I=XOset x=GetUnitX(P8I)set y=GetUnitY(P8I)endifcall NSI(Z51)call RemoveLocation(AM3)endifif LO4 thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",QXI,QYI))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",x,y))call SetUnitX(P7I,x)call SetUnitY(P7I,y)set JO=60+GetUnitAbilityLevel(GetTriggerUnit(),(1093684792))*20set QL1=Condition(function L04)set Z51=NTI()call GroupEnumUnitsInRange(Z51,QXI,QYI,400,QL1)call ForGroup(Z51,function LI4)call NSI(Z51)set Z51=NTI()call GroupEnumUnitsInRange(Z51,x,y,400,QL1)call ForGroup(Z51,function LI4)call NSI(Z51)endifendfunctionfunction L24 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684792)endfunctionfunction L34 takes nothing returns nothingcall SetUnitAnimationByIndex((LoadUnitHandle(LY,(GetHandleId(GetExpiredTimer())),(221))),2)endfunctionfunction L44 takes nothing returns nothinglocal timer t=CreateTimer()call SetUnitAnimationByIndex(GetTriggerUnit(),2)call SaveUnitHandle(LY,(GetHandleId(t)),(221),(GetTriggerUnit()))call TimerStart(t,1,false,function L34)endfunctionfunction NW1 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=1call UMI(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function L24))call TriggerAddAction(t,function L44)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function KR4))call TriggerAddAction(t,function L14)loopexitwhen i>5call SetPlayerAbilityAvailable(BO[i],1093816641,false)call SetPlayerAbilityAvailable(CO[i],1093816641,false)set i=i+1endloopendfunctionconstant function Trap_CastCode takes nothing returns integerreturn 1093684802endfunctionconstant function Trap_EffectCode takes nothing returns integerreturn 1093684803endfunctionconstant function Trap_Projectile takes nothing returns integerreturn 1747988547endfunctionconstant function Trap_DummyNet takes nothing returns integerreturn 1747988537endfunctionconstant function Trap_Radius takes nothing returns integerreturn 245endfunctionfunction L54 takes nothing returns booleanreturn GetSpellAbilityId()==(1093684802)endfunctionfunction L64 takes nothing returns booleanreturn RKI(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and(BU1(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(XO))==true)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0.5 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848651852endfunctionfunction L74 takes nothing returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,JO,Y3,0)call IA1(I01,(1093684803))call IssueTargetOrder(I01,"ensnare",GetEnumUnit())endfunctionfunction L84 takes unit IG1,real x,real y returns nothinglocal boolexpr QL1=Condition(function L64)local group Z51=NTI()set XO=IG1call GroupEnumUnitsInRange(Z51,x,y,(245),QL1)set JO=xset Y3=ycall ForGroup(Z51,function L74)call NSI(Z51)endfunctionfunction L94 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real QXI=GetUnitX(IG1)local real QYI=GetUnitY(IG1)local real IV1=GetUnitX(IG1)+30*Cos(RM2)local real IW1=GetUnitY(IG1)+30*Sin(RM2)if(IV1-QJI)*(IV1-QJI)+(IW1-QKI)*(IW1-QKI)<1200 thencall SetUnitX(IG1,QJI)call SetUnitY(IG1,QKI)call L84(IG1,QJI,QKI)call PauseTimer(t)call FlushChildHashtable(LY,(S5I))call KillUnit(IG1)call DestroyTimer(t)elsecall SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)endifendfunctionfunction LA4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location AM3=GetSpellTargetLoc()local real QJI=PTI(GetLocationX(AM3))local real QKI=PUI(GetLocationY(AM3))local real QXI=PTI(GetUnitX(SFI))local real QYI=PUI(GetUnitY(SFI))local unit IG1=CreateUnit(GetOwningPlayer(SFI),(1747988547),QXI,QYI,0)local real RM2=Atan2(QKI-QYI,QJI-QXI)local timer t=CreateTimer()local integer S5I=GetHandleId(t)call SetUnitScale(IG1,2,2,2)call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call TimerStart(t,0.035,true,function L94)call RemoveLocation(AM3)endfunctionfunction NX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function LA4)call TriggerAddCondition(t,Condition(function L54))endfunctionfunction LB4 takes unit u returns booleanreturn GetUnitTypeId(u)==1211117641 or GetUnitTypeId(u)==1211117642endfunctionconstant function DoubleTrouble_RawCode takes nothing returns integerreturn 1093684567endfunctionconstant function DoubleTrouble_PrimaryUnitCode takes nothing returns integerreturn 1211117641endfunctionconstant function DoubleTrouble_SecondaryUnitCode takes nothing returns integerreturn 1211117642endfunctionconstant function DoubleTrouble_Ability1 takes nothing returns integerreturn 1093684792endfunctionconstant function DoubleTrouble_Ability2 takes nothing returns integerreturn 1093684802endfunctionconstant function DoubleTrouble_Ability3 takes nothing returns integerreturn 1093684791endfunctionconstant function DoubleTrouble_Item9 takes nothing returns integerreturn FR0[ZI0]endfunctionconstant function DoubleTrouble_Item8 takes nothing returns integerreturn FR0[Z00]endfunctionconstant function DoubleTrouble_Item7 takes nothing returns integerreturn FR0[X90]endfunctionconstant function DoubleTrouble_Item6 takes nothing returns integerreturn FR0[XI0]endfunctionconstant function DoubleTrouble_Item5 takes nothing returns integerreturn FR0[ZL0]endfunctionconstant function DoubleTrouble_Item4 takes nothing returns integerreturn FR0[ZM0]endfunctionconstant function DoubleTrouble_Item3 takes nothing returns integerreturn FR0[ZN0]endfunctionconstant function DoubleTrouble_Item2 takes nothing returns integerreturn FR0[ZK0]endfunctionconstant function DoubleTrouble_Item1 takes nothing returns integerreturn FR0[G40]endfunctionfunction LC4 takes unit SWI returns booleanreturn GetUnitTypeId(SWI)==(1211117641)or GetUnitTypeId(SWI)==(1211117642)endfunctionfunction DoubleTrouble_IsKoboldCondition takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(XO)and GetFilterUnit()!=XO and(GetUnitTypeId(GetFilterUnit())==(1211117641)or GetUnitTypeId(GetFilterUnit())==(1211117642))endfunctionfunction DoubleTrouble_UnshareXPCondition takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(XO))==true and LC4(GetFilterUnit())==falseendfunctionfunction DoubleTrouble_UnshareXPGive takes nothing returns nothingcall AddHeroXP(GetEnumUnit(),YO,true)endfunctionfunction LD4 takes nothing returns nothinglocal integer LE4=GetHandleId(GetTriggeringTrigger())local player T4I=(LoadPlayerHandle(LY,(LE4),(370)))local integer LF4=GetHandleId(T4I)local unit W41=(LoadUnitHandle(LY,(LF4),(699)))local unit W51=(LoadUnitHandle(LY,(LF4),(700)))local unit W61=(LoadUnitHandle(LY,(LF4),(701)))local unit W71=(LoadUnitHandle(LY,(LF4),(702)))local unit W81=(LoadUnitHandle(LY,(LF4),(703)))local integer LG4=GetUnitAbilityLevel(W41,1096904043)*2local integer JJ3=GetHeroAgi(W41,false)local integer LH4=GetHeroAgi(W41,true)-JJ3-LG4local integer JK3=GetHeroStr(W41,false)local integer LZ4=GetHeroStr(W41,true)-JK3-LG4local integer LV4=GetHeroInt(W41,false)local integer LW4=GetHeroInt(W41,true)-LV4-LG4local real LX4=0local integer LY4local integer LJ4local integer LK4if Z0I thenset LX4=1.0endifset LY4=R2I(JJ3+LH4*LX4)set LJ4=R2I(JK3+LZ4*LX4)set LK4=R2I(LV4+LW4*LX4)if GetUnitState(W41,UNIT_STATE_LIFE)>1 thenif W51!=null thencall SetHeroAgi(W51,LY4,false)call SetHeroStr(W51,LJ4,false)call SetHeroInt(W51,LK4,false)endifif W61!=null thencall SetHeroAgi(W61,LY4,false)call SetHeroStr(W61,LJ4,false)call SetHeroInt(W61,LK4,false)endifif W71!=null thencall SetHeroAgi(W71,LY4,false)call SetHeroStr(W71,LJ4,false)call SetHeroInt(W71,LK4,false)endifif W81!=null thencall SetHeroAgi(W81,LY4,false)call SetHeroStr(W81,LJ4,false)call SetHeroInt(W81,LK4,false)endifendifendfunctionfunction LL4 takes nothing returns nothinglocal integer LE4=GetHandleId(GetTriggeringTrigger())local player T4I=(LoadPlayerHandle(LY,(LE4),(370)))local integer LF4=GetHandleId(T4I)local unit W41=(LoadUnitHandle(LY,(LF4),(699)))local unit W51=(LoadUnitHandle(LY,(LF4),(700)))local unit W61=(LoadUnitHandle(LY,(LF4),(701)))local unit W71=(LoadUnitHandle(LY,(LF4),(702)))local unit W81=(LoadUnitHandle(LY,(LF4),(703)))local integer LM4=GetHandleId(W41)local integer LN4=GetHandleId(W51)local integer LS4=GetHandleId(W61)local integer LT4=GetHandleId(W71)local integer LR4=GetHandleId(W81)local integer LP4=(LoadInteger(LY,(LM4),(367)))local integer LQ4=(LoadInteger(LY,(LM4),(368)))local integer LU4=(LoadInteger(LY,(LN4),(367)))local integer M04=(LoadInteger(LY,(LN4),(368)))local integer MI4=(LoadInteger(LY,(LS4),(367)))local integer M14=(LoadInteger(LY,(LS4),(368)))local integer MO4=(LoadInteger(LY,(LT4),(367)))local integer M24=(LoadInteger(LY,(LT4),(368)))local integer M34=(LoadInteger(LY,(LR4),(367)))local integer M44=(LoadInteger(LY,(LR4),(368)))local integer M54=GetHeroXP(W41)local integer M64=GetHeroXP(W51)local integer M74=GetHeroXP(W61)local integer M84=GetHeroXP(W71)local integer M94=GetHeroXP(W81)local integer MA4=M54-LP4-LQ4local integer MB4=M64-LU4-M04local integer MC4=M74-MI4-M14local integer MD4=M84-MO4-M24local integer ME4=M94-M34-M44if GetUnitState(W41,UNIT_STATE_LIFE)>1 thenset LP4=LP4+MA4set LU4=LU4+MB4set MI4=MI4+MC4set MO4=MO4+MD4set M34=M34+ME4if W41!=null thencall AddHeroXP(W51,MA4,false)if GetHeroXP(W51)!=M64 thenset M04=M04+MA4endifcall AddHeroXP(W61,MA4,false)if GetHeroXP(W61)!=M74 thenset M14=M14+MA4endifcall AddHeroXP(W71,MA4,false)if GetHeroXP(W71)!=M84 thenset M24=M24+MA4endifcall AddHeroXP(W81,MA4,false)if GetHeroXP(W81)!=M94 thenset M44=M44+MA4endifendifif W51!=null thencall AddHeroXP(W41,MB4,false)if GetHeroXP(W41)!=M54 thenset LQ4=LQ4+MB4endifcall AddHeroXP(W61,MB4,false)if GetHeroXP(W61)!=M74 thenset M14=M14+MB4endifcall AddHeroXP(W71,MB4,false)if GetHeroXP(W71)!=M84 thenset M24=M24+MB4endifcall AddHeroXP(W81,MB4,false)if GetHeroXP(W81)!=M94 thenset M44=M44+MB4endifendifif W61!=null thencall AddHeroXP(W51,MC4,false)if GetHeroXP(W51)!=M64 thenset M04=M04+MC4endifcall AddHeroXP(W41,MC4,false)if GetHeroXP(W41)!=M54 thenset LQ4=LQ4+MC4endifcall AddHeroXP(W71,MC4,false)if GetHeroXP(W71)!=M84 thenset M24=M24+MC4endifcall AddHeroXP(W81,MC4,false)if GetHeroXP(W81)!=M94 thenset M44=M44+MC4endifendifif W71!=null thencall AddHeroXP(W51,MD4,false)if GetHeroXP(W51)!=M64 thenset M04=M04+MD4endifcall AddHeroXP(W61,MD4,false)if GetHeroXP(W61)!=M74 thenset M14=M14+MD4endifcall AddHeroXP(W41,MD4,false)if GetHeroXP(W41)!=M54 thenset LQ4=LQ4+MD4endifcall AddHeroXP(W81,MD4,false)if GetHeroXP(W81)!=M94 thenset M44=M44+MD4endifendifif W81!=null thencall AddHeroXP(W51,ME4,false)if GetHeroXP(W51)!=M64 thenset M04=M04+ME4endifcall AddHeroXP(W61,ME4,false)if GetHeroXP(W61)!=M74 thenset M14=M14+ME4endifcall AddHeroXP(W41,ME4,false)if GetHeroXP(W41)!=M54 thenset LQ4=LQ4+ME4endifcall AddHeroXP(W71,ME4,false)if GetHeroXP(W71)!=M84 thenset M24=M24+ME4endifendifcall SaveInteger(LY,(LM4),(367),(LP4))call SaveInteger(LY,(LM4),(368),(LQ4))call SaveInteger(LY,(LN4),(367),(LU4))call SaveInteger(LY,(LN4),(368),(M04))call SaveInteger(LY,(LS4),(367),(MI4))call SaveInteger(LY,(LS4),(368),(M14))call SaveInteger(LY,(LT4),(367),(MO4))call SaveInteger(LY,(LT4),(368),(M24))call SaveInteger(LY,(LR4),(367),(M34))call SaveInteger(LY,(LR4),(368),(M44))endifendfunctionfunction MF4 takes nothing returns booleanreturn LC4(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction MG4 takes nothing returns nothinglocal unit AD1=GetTriggerUnit()local integer S5I=GetHandleId(GetOwningPlayer(AD1))local unit W41=(LoadUnitHandle(LY,(S5I),(699)))local unit W51=(LoadUnitHandle(LY,(S5I),(700)))local unit W61=(LoadUnitHandle(LY,(S5I),(701)))local unit W71=(LoadUnitHandle(LY,(S5I),(702)))local unit W81=(LoadUnitHandle(LY,(S5I),(703)))local boolean I4O=falsecall DisableTrigger(EG)if W41!=null and W41!=AD1 thencall KillUnit(W41)endifif W51!=null and W51!=AD1 thencall KillUnit(W51)endifif W61!=null and W61!=AD1 thencall KillUnit(W61)endifif W71!=null and W71!=AD1 thencall KillUnit(W71)endifif W81!=null and W81!=AD1 thencall KillUnit(W81)endifcall EnableTrigger(EG)endfunctionfunction MH4 takes nothing returns booleanreturn LC4(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction MZ4 takes unit MV4,unit SFI returns nothinglocal trigger t=(LoadTriggerHandle(LY,(GetHandleId(GetOwningPlayer(SFI))),(369)))local integer i=0local boolean MW4=falselocal boolean MX4=falselocal boolean MY4=falselocal boolean MJ4=falselocal boolean MK4=falselocal boolean ML4=falselocal boolean MM4=falselocal boolean MN4=falselocal boolean MS4=falsecall DisableTrigger(t)call DisableTrigger(LY0)loopexitwhen i>5if GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[G40])thenset MW4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[ZK0])thenset MX4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[ZN0])thenset MY4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[ZM0])thenset MJ4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[ZL0])thenset MK4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[XI0])thenset ML4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[X90])thenset MM4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[Z00])thenset MN4=trueendifif GetItemTypeId(UnitItemInSlot(SFI,i))==(FR0[ZI0])thenset MS4=trueendifset i=i+1endloopif MS4 thencall UnitAddItem(MV4,CreateItem((FR0[ZI0]),0,0))elseif MN4 thencall UnitAddItem(MV4,CreateItem((FR0[Z00]),0,0))elseif MM4 thencall UnitAddItem(MV4,CreateItem((FR0[X90]),0,0))elseif ML4 thencall UnitAddItem(MV4,CreateItem((FR0[XI0]),0,0))elseif MK4 thencall UnitAddItem(MV4,CreateItem((FR0[ZL0]),0,0))elseif MJ4 thencall UnitAddItem(MV4,CreateItem((FR0[ZM0]),0,0))elseif MY4 thencall UnitAddItem(MV4,CreateItem((FR0[ZN0]),0,0))elseif MX4 thencall UnitAddItem(MV4,CreateItem((FR0[ZK0]),0,0))elseif MW4 thencall UnitAddItem(MV4,CreateItem((FR0[G40]),0,0))endifcall EnableTrigger(t)call EnableTrigger(LY0)endfunctionfunction MT4 takes nothing returns nothinglocal unit W91=GetTriggerUnit()local integer i=0local boolean MW4=falselocal boolean MX4=falselocal boolean MY4=falselocal boolean MJ4=falselocal boolean MK4=falselocal boolean ML4=falselocal boolean MM4=falselocal boolean MN4=falselocal boolean MS4=falselocal integer LF4=GetHandleId(GetOwningPlayer(W91))local unit W41=(LoadUnitHandle(LY,(LF4),(699)))local unit W51=(LoadUnitHandle(LY,(LF4),(700)))local unit W61=(LoadUnitHandle(LY,(LF4),(701)))local unit W71=(LoadUnitHandle(LY,(LF4),(702)))local unit W81=(LoadUnitHandle(LY,(LF4),(703)))local integer FH1local boolean MR4=falselocal integer MP4=0local integer MQ4=0local integer MU4=0local integer N04=0local integer NI4=0local integer N14=0local integer NO4=0local integer N24=0local integer N34=0call DisableTrigger(GetTriggeringTrigger())if GetUnitTypeId(W91)==(1211117642)thencall UnitRemoveItemFromSlot(W91,0)call EnableTrigger(GetTriggeringTrigger())returnendifif not(GetItemTypeId(GetManipulatedItem())==(FR0[G40])or GetItemTypeId(GetManipulatedItem())==(FR0[ZK0])or GetItemTypeId(GetManipulatedItem())==(FR0[ZN0])or GetItemTypeId(GetManipulatedItem())==(FR0[ZM0])or GetItemTypeId(GetManipulatedItem())==(FR0[ZL0])or GetItemTypeId(GetManipulatedItem())==(FR0[XI0])or GetItemTypeId(GetManipulatedItem())==(FR0[X90])or GetItemTypeId(GetManipulatedItem())==(FR0[Z00])or GetItemTypeId(GetManipulatedItem())==(FR0[ZI0]))thencall EnableTrigger(GetTriggeringTrigger())returnendifcall DisableTrigger(LY0)if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM thenset MR4=trueendifloopexitwhen i>5set FH1=GetItemTypeId(UnitItemInSlot(W91,i))if FH1==(FR0[G40])thenset MP4=MP4+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(MP4>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MW4=trueendifendifif FH1==(FR0[ZK0])thenset MQ4=MQ4+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(MQ4>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MX4=trueendifendifif FH1==(FR0[ZN0])thenset MU4=MU4+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(MU4>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MY4=trueendifendifif FH1==(FR0[ZM0])thenset N04=N04+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(N04>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MJ4=trueendifendifif FH1==(FR0[ZL0])thenset NI4=NI4+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(NI4>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MK4=trueendifendifif FH1==(FR0[XI0])thenset N14=N14+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(N14>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset ML4=trueendifendifif FH1==(FR0[X90])thenset NO4=NO4+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(NO4>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MM4=trueendifendifif FH1==(FR0[Z00])thenset N24=N24+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(N24>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MN4=trueendifendifif FH1==(FR0[ZI0])thenset N34=N34+1if(not(MR4 and FH1==GetItemTypeId(GetManipulatedItem())))or(N24>1 and FH1==GetItemTypeId(GetManipulatedItem()))thenset MS4=trueendifendifset i=i+1endloopcall RemoveItem(UnitRemoveItemFromSlot(W51,0))if W61!=null thencall RemoveItem(UnitRemoveItemFromSlot(W61,0))endifif W71!=null thencall RemoveItem(UnitRemoveItemFromSlot(W71,0))endifif W81!=null thencall RemoveItem(UnitRemoveItemFromSlot(W81,0))endifif MS4 thencall UnitAddItem(W51,CreateItem((FR0[ZI0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[ZI0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[ZI0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[ZI0]),0,0))endifelseif MN4 thencall UnitAddItem(W51,CreateItem((FR0[Z00]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[Z00]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[Z00]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[Z00]),0,0))endifelseif MM4 thencall UnitAddItem(W51,CreateItem((FR0[X90]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[X90]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[X90]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[X90]),0,0))endifelseif ML4 thencall UnitAddItem(W51,CreateItem((FR0[XI0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[XI0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[XI0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[XI0]),0,0))endifelseif MK4 thencall UnitAddItem(W51,CreateItem((FR0[ZL0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[ZL0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[ZL0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[ZL0]),0,0))endifelseif MJ4 thencall UnitAddItem(W51,CreateItem((FR0[ZM0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[ZM0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[ZM0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[ZM0]),0,0))endifelseif MY4 thencall UnitAddItem(W51,CreateItem((FR0[ZN0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[ZN0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[ZN0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[ZN0]),0,0))endifelseif MX4 thencall UnitAddItem(W51,CreateItem((FR0[ZK0]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[ZK0]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[ZK0]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[ZK0]),0,0))endifelseif MW4 thencall UnitAddItem(W51,CreateItem((FR0[G40]),0,0))if W61!=null thencall UnitAddItem(W61,CreateItem((FR0[G40]),0,0))endifif W71!=null thencall UnitAddItem(W71,CreateItem((FR0[G40]),0,0))endifif W81!=null thencall UnitAddItem(W81,CreateItem((FR0[G40]),0,0))endifendifcall EnableTrigger(GetTriggeringTrigger())call EnableTrigger(LY0)endfunctionfunction N44 takes unit N54,integer N64 returns nothinglocal integer LF4=GetHandleId(GetOwningPlayer(N54))local unit W41=(LoadUnitHandle(LY,(LF4),(699)))local unit W51=(LoadUnitHandle(LY,(LF4),(700)))local unit W61=(LoadUnitHandle(LY,(LF4),(701)))local unit W71=(LoadUnitHandle(LY,(LF4),(702)))local unit W81=(LoadUnitHandle(LY,(LF4),(703)))if W41!=null and W41!=N54 thencall SelectHeroSkill(W41,N64)endifif W51!=null and W51!=N54 thencall SelectHeroSkill(W51,N64)endifif W61!=null and W61!=N54 thencall SelectHeroSkill(W61,N64)endifif W71!=null and W71!=N54 thencall SelectHeroSkill(W71,N64)endifif W81!=null and W81!=N54 thencall SelectHeroSkill(W81,N64)endifendfunctionfunction N74 takes integer IB1,unit H02,unit HI2 returns nothinglocal integer TGI=1local integer THI=GetUnitAbilityLevel(H02,IB1)loopexitwhen TGI>THIcall SelectHeroSkill(HI2,IB1)set TGI=TGI+1endloopendfunctionfunction N84 takes unit MV4,unit N94 returns nothingcall AddHeroXP(MV4,GetHeroXP(N94),false)call SaveInteger(LY,(GetHandleId(MV4)),(368),(GetHeroXP(N94)))call SaveInteger(LY,(GetHandleId(MV4)),(367),(0))call N74((1093684792),N94,MV4)call N74((1093684802),N94,MV4)call N74((1093684791),N94,MV4)call N74(1096904043,N94,MV4)call N74((1093684567),N94,MV4)call N74(1093809987,N94,MV4)endfunctionfunction NA4 takes unit W51,unit W61,integer N64,integer MP4,integer MQ4 returns nothingif MP4>MQ4 thencall SelectHeroSkill(W61,N64)elseif MQ4>MP4 thencall SelectHeroSkill(W51,N64)endifendfunctionfunction NB4 takes unit W51,unit W61 returns nothinglocal integer M64=GetHeroXP(W51)local integer M74=GetHeroXP(W61)local integer LN4=GetHandleId(W51)local integer LS4=GetHandleId(W61)local integer M04=(LoadInteger(LY,(LN4),(368)))local integer M14=(LoadInteger(LY,(LS4),(368)))local integer GV2if M64>M74 thenset GV2=M64-M74call AddHeroXP(W61,GV2,true)if M74!=GetHeroXP(W61)thencall SaveInteger(LY,(LS4),(368),(M14+GV2))endifelseif M64<M74 thenset GV2=M74-M64call AddHeroXP(W51,GV2,true)if M64!=GetHeroXP(W51)thencall SaveInteger(LY,(LN4),(368),(M04+GV2))endifendifendfunctionfunction NC4 takes unit W51,unit W61 returns nothinglocal integer ND4=GetUnitAbilityLevel(W51,(1093684792))local integer NE4=GetUnitAbilityLevel(W51,(1093684802))local integer NF4=GetUnitAbilityLevel(W51,(1093684791))local integer NG4=GetUnitAbilityLevel(W51,(1093684567))local integer NH4=GetUnitAbilityLevel(W51,1096904043)local integer NZ4=GetUnitAbilityLevel(W51,1093809987)local integer NV4=GetUnitAbilityLevel(W61,(1093684792))local integer NW4=GetUnitAbilityLevel(W61,(1093684802))local integer NX4=GetUnitAbilityLevel(W61,(1093684791))local integer NY4=GetUnitAbilityLevel(W61,(1093684567))local integer NJ4=GetUnitAbilityLevel(W61,1096904043)local integer NK4=GetUnitAbilityLevel(W61,1093809987)call NB4(W51,W61)call NA4(W51,W61,(1093684792),ND4,NV4)call NA4(W51,W61,(1093684802),NE4,NW4)call NA4(W51,W61,(1093684791),NF4,NX4)call NA4(W51,W61,(1093684567),NG4,NY4)call NA4(W51,W61,1093809987,NZ4,NK4)call NA4(W51,W61,1096904043,NH4,NJ4)endfunctionfunction NL4 takes unit W51,unit W61 returns nothingif W51!=null and W61!=null thencall NC4(W51,W61)endifendfunctionfunction NM4 takes nothing returns nothinglocal integer LF4=GetHandleId((LoadPlayerHandle(LY,(GetHandleId(GetTriggeringTrigger())),(370))))local unit W41=(LoadUnitHandle(LY,(LF4),(699)))local unit W51=(LoadUnitHandle(LY,(LF4),(700)))local unit W61=(LoadUnitHandle(LY,(LF4),(701)))local unit W71=(LoadUnitHandle(LY,(LF4),(702)))local unit W81=(LoadUnitHandle(LY,(LF4),(703)))call DisableTrigger(HQI)call NL4(W41,W51)call NL4(W41,W61)call NL4(W41,W71)call NL4(W41,W81)call NL4(W51,W61)call NL4(W51,W71)call NL4(W51,W81)call NL4(W61,W71)call NL4(W61,W81)call NL4(W71,W81)call EnableTrigger(HQI)endfunctionfunction NN4 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddAction(t,function NM4)call SavePlayerHandle(LY,(GetHandleId(t)),(370),(GetOwningPlayer(GetTriggerUnit())))endfunctionfunction NS4 takes unit P7I returns nothinglocal trigger tcall SaveUnitHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(699),(P7I))call SaveInteger(LY,(GetHandleId(P7I)),(367),(GetHeroXP(P7I)))call SaveInteger(LY,(GetHandleId(P7I)),(368),(0))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddAction(t,function LL4)call SavePlayerHandle(LY,(GetHandleId(t)),(370),(GetOwningPlayer(P7I)))call SaveTriggerHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(371),(t))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.3,true)call TriggerAddAction(t,function LD4)call SavePlayerHandle(LY,(GetHandleId(t)),(370),(GetOwningPlayer(P7I)))call SaveTriggerHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(372),(t))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function MG4)call TriggerAddCondition(t,Condition(function MF4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddAction(t,function MT4)call TriggerAddCondition(t,Condition(function MH4))call SaveTriggerHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(369),(t))call ExecuteFunc("NN4")endfunctionfunction NT4 takes unit P7I,boolean G4O returns nothinglocal player T4I=GetOwningPlayer(P7I)local integer S5I=GetHandleId(T4I)local unit MV4set HUI=HUI+1if HUI==1 thencall NS4(P7I)endifcall TriggerExecute((LoadTriggerHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(371))))call TriggerExecute((LoadTriggerHandle(LY,(GetHandleId(GetOwningPlayer(P7I))),(372))))if G4O==false thencall N44(P7I,1093684567)call N44(P7I,1093809987)endifset MV4=CreateUnit(GetOwningPlayer(P7I),1211117642,GetUnitX(P7I),GetUnitY(P7I),0)call N84(MV4,P7I)call MZ4(MV4,P7I)call SaveUnitHandle(LY,(S5I),(699+HUI),(MV4))endfunctionfunction X9O takes nothing returns nothingif Z0I==false thenset Z0I=truecall DisableTrigger(HQI)call NT4(GK,true)call EnableTrigger(HQI)endifendfunctionfunction NR4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if IsUnitIllusion(GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(P7I)and LB4(GetTriggerUnit())thenif GetLearnedSkill()==1093684567 or GetLearnedSkill()==1093809987 thencall DisableTrigger(GetTriggeringTrigger())call NT4(GetTriggerUnit(),false)call EnableTrigger(GetTriggeringTrigger())elseif GetLearnedSkill()==1096904043 or GetLearnedSkill()==1093684792 or GetLearnedSkill()==1093684802 or GetLearnedSkill()==1093684791 thencall TriggerExecute((LoadTriggerHandle(LY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(371))))call TriggerExecute((LoadTriggerHandle(LY,(GetHandleId(GetOwningPlayer(GetTriggerUnit()))),(372))))call DisableTrigger(GetTriggeringTrigger())call N44(GetTriggerUnit(),GetLearnedSkill())call EnableTrigger(GetTriggeringTrigger())endifendifreturn falseendfunctionfunction K24 takes nothing returns nothinglocal unit P7I=GKlocal integer S5Iset HPI=CreateTrigger()set HQI=HPIset S5I=GetHandleId(HPI)call UMI(HPI,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(HPI,Condition(function NR4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullendfunctionfunction NP4 takes nothing returns nothinglocal location l=GetSpellTargetLoc()call U7I("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",GetLocationX(l),GetLocationY(l),2)call TerrainDeformationRippleBJ(0.3,false,l,0,300,100,0.4,20)call RemoveLocation(l)set l=nullendfunctionfunction NQ4 takes nothing returns booleanif GetSpellAbilityId()==1093678679 thencall NP4()endifreturn falseendfunctionfunction KK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NQ4))endfunctionfunction GenericCondition_BasicsAndStructureNoInvul takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false and BL1(GetFilterUnit())==falseendfunctionfunction NU4 takes nothing returns booleanreturn IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false and BL1(GetFilterUnit())==false)endfunctionfunction S04 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group glocal unit ulocal real dlocal real alocal real UJ2local real UK2local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real PAIif GetTriggerEvalCount(t)>40 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=SFIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),500,Condition(function NU4))set u=GroupPickRandomUnit(g)if u==null thenset d=GetRandomReal(175,400)set a=GetRandomReal(0,6)set UJ2=GetUnitX(SFI)+d*Cos(a)set UK2=GetUnitY(SFI)+d*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",UJ2,UK2))elsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",u,"origin"))set PAI=9*SUIif IsUnitType(u,UNIT_TYPE_STRUCTURE)==true thenset PAI=PAI*1.4endifcall P6I(I01,u,2,PAI)endifcall NSI(g)endifset u=nullset g=nullset t=nullset SFI=nullreturn falseendfunctionfunction SI4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl",SFI,"hand right"))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(SFI,1093808212)))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function S04))set t=nullset SFI=nullendfunctionfunction S14 takes nothing returns booleanif GetSpellAbilityId()==1093808212 thencall SI4()endifreturn falseendfunctionfunction KL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function S14))endfunctionfunction SO4 takes unit P7I,unit P8I returns nothingcall AX1(P8I,1093818202,1,0.75,1110460470)endfunctionfunction S24 takes nothing returns nothinglocal real dif IsUnitInGroup(GetEnumUnit(),ZOI)==false thenset d=QLI(GetEnumUnit(),Z1I)if d<Z2I thenset Z2I=dset ZII=GetEnumUnit()endifendifendfunctionfunction S34 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093678678)call GroupAddUnit(PR2,P8I)call SO4(P7I,P8I)set GK=P7Iset ZII=nullset Z1I=P8Iset ZOI=PR2set Z2I=999999call GroupEnumUnitsInRange(g,x,y,650+25,Condition(function CF1))call ForGroup(g,function S24)call NSI(g)if ZII==null or GetTriggerEvalCount(t)>3+SUI thencall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset P8I=ZIIcall SaveUnitHandle(LY,(S5I),(17),(P8I))endifset g=nullset t=nullset P7I=nullset P8I=nullset PR2=nullreturn falseendfunctionfunction S44 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group PR2=NTI()call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveGroupHandle(LY,(S5I),(187),(PR2))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function S34))set P7I=nullset P8I=nullset t=nullendfunctionfunction S54 takes nothing returns booleanif GetSpellAbilityId()==1093678678 and NNI(GetSpellTargetUnit())==false thencall S44()endifreturn falseendfunctionfunction KM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function S54))set t=nullendfunctionfunction S64 takes nothing returns nothinglocal unit P7I=Z3Ilocal unit P8I=GetEnumUnit()call P6I(P7I,P8I,1,Z4I)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",P8I,"origin"))set P7I=nullset P8I=nullendfunctionfunction S74 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093808454)local group gif SUI!=0 thenif SUI==1 thenset Z4I=100elseif SUI==2 thenset Z4I=130elseset Z4I=160endifelseset SUI=GetUnitAbilityLevel(P7I,1093808455)if SUI==1 thenset Z4I=160elseif SUI==2 thenset Z4I=190elseset Z4I=220endifendifif GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(P7I,UNIT_STATE_MANA)<20*SUI or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==-1 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093808456 or GetSpellAbilityId()==1093809992))thenif(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093808454 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808454,true)endifif(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093808455 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808455,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808456,false)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)-20*SUI)set GK=P7Iset Z3I=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),475,Condition(function CA1))call ForGroup(g,function S64)call NSI(g)set g=nullendifset t=nullreturn falseendfunctionfunction S84 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",P7I,"origin"))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808454,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808455,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808456,true)call UnitAddAbility(P7I,1093808456)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function S74))call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerEvaluate(t)set P7I=nullset t=nullendfunctionfunction S94 takes nothing returns booleanif GetSpellAbilityId()==1093808454 or GetSpellAbilityId()==1093808455 thencall S84()endifreturn falseendfunctionfunction KN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function S94))set t=nullendfunctionfunction SA4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(813)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))thencall UnitRemoveAbility(P8I,1093817649)call UnitRemoveAbility(P8I,1110460246)call UnitRemoveAbility(P8I,1093817650)call UnitRemoveAbility(P8I,1110460247)call UnitRemoveAbility(P8I,1093817652)endifset t=nullset P8I=nullreturn falseendfunctionfunction SB4 takes unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real DC1=3.0local integer SC4=1093817650local integer SD4=1110460247if IsUnitType(P8I,UNIT_TYPE_HERO)thenset DC1=2.0endifset SC4=1093817649set SD4=1110460246call IA1(P8I,SC4)call IA1(P8I,SD4)call IA1(P8I,1093817652)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,DC1,false)call TriggerAddCondition(t,Condition(function SA4))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(GetHandleId(P8I)),(813),(((TimerGetElapsed(M))+DC1-0.1)*1.0))set t=nullendfunctionfunction SE4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(812)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetTriggerUnit()==P8I thencall SB4(GetAttacker())endifelseif(TimerGetElapsed(M))>LVO thencall UnitRemoveAbility(P8I,1093817648)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction SF4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger tlocal integer S5Ilocal integer DC1=40local integer SUI=GetUnitAbilityLevel(P7I,1093679186)local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(812)))call SaveReal(LY,(GetHandleId(P8I)),(812),(((TimerGetElapsed(M))+DC1)*1.0))call IA1(P8I,1093817648)call SetUnitAbilityLevel(P8I,1093817648,SUI)if LVO<(TimerGetElapsed(M))thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function SE4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifset P7I=nullset P8I=nullset t=nullendfunctionfunction SG4 takes nothing returns booleanif GetSpellAbilityId()==1093679186 thencall SF4()endifreturn falseendfunctionfunction KS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SG4))set t=nullendfunctionfunction SH4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit WF3=(LoadUnitHandle(LY,(S5I),(374)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer SZ4=(LoadInteger(LY,(S5I),(233)))local integer MKO=(LoadInteger(LY,(S5I),(12)))local unit I01local group glocal real alocal real xlocal real ylocal integer DT1=(LoadInteger(LY,(S5I),(720)))if DT1>0 thenset DT1=DT1-1call SaveInteger(LY,(S5I),(720),(DT1))return falseendifif QNI(GetUnitX(WF3),GetUnitY(WF3),GetUnitX(P8I),GetUnitY(P8I))>20 thenset a=UEI(GetUnitX(WF3),GetUnitY(WF3),GetUnitX(P8I),GetUnitY(P8I))call SetUnitFacing(WF3,a)set x=GetUnitX(WF3)+13.5*Cos(a*bj_DEGTORAD)set y=GetUnitY(WF3)+13.5*Sin(a*bj_DEGTORAD)call SetUnitX(WF3,x)call SetUnitY(WF3,y)elseif IC1(P8I)==false thenset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093679409)call SetUnitAbilityLevel(I01,1093679409,SUI)call IssueTargetOrder(I01,"frostnova",P8I)endifif SZ4>MKO thencall RemoveUnit(WF3)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),600,Condition(function C81))call GroupRemoveUnit(g,P8I)set P8I=GroupPickRandomUnit(g)call NSI(g)if P8I==null thencall RemoveUnit(WF3)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(720),(10))call SaveInteger(LY,(S5I),(233),(SZ4+1))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifendifendifset t=nullset P7I=nullset P8I=nullset WF3=nullset I01=nullset g=nullreturn falseendfunctionfunction SV4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093678420)local integer MKO=10local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit WF3if GetSpellAbilityId()==1093679176 thenset SUI=GetUnitAbilityLevel(P7I,1093679176)+1set MKO=100000endifset WF3=CreateUnit(GetOwningPlayer(P7I),1697656889,GetUnitX(P7I),GetUnitY(P7I),0)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(374),(WF3))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(233),(1))call SaveInteger(LY,(S5I),(12),(MKO))call SaveInteger(LY,(S5I),(720),(0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function SH4))set P7I=nullset P8I=nullset WF3=nullset t=nullendfunctionfunction SW4 takes nothing returns booleanif GetSpellAbilityId()==1093678420 or GetSpellAbilityId()==1093679176 thencall SV4()endifreturn falseendfunctionfunction KT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SW4))set t=nullendfunctionfunction SX4 takes nothing returns nothingif B81(GetUnitTypeId(GetEnumUnit()))==false thenset Z5I=Z5I+1endifendfunctionfunction SY4 takes nothing returns nothingif B81(GetUnitTypeId(GetFilterUnit()))==false thencall AddHeroXP(GetEnumUnit(),Z6I,true)endifendfunctionfunction SJ4 takes unit P8I returns nothinglocal group g=NTI()local integer SK4=ALO(P8I)set Z5I=0set GK=P8Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),1300+25,Condition(function DO1))call ForGroup(g,function SX4)if Z5I>0 thenset Z6I=SK4/Z5Icall ForGroup(g,function SY4)endifcall NSI(g)set Z5I=0set GK=P8Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),1300+25,Condition(function CU1))call ForGroup(g,function SX4)if Z5I>0 thenset Z6I=SK4/Z5Icall ForGroup(g,function SY4)endifcall NSI(g)set g=nullendfunctionfunction SL4 takes unit u,integer d returns nothinglocal texttag t=CreateTextTag()call SetTextTagText(t,"+"+I2S(d)+" "+GetObjectName(1848659025),0.03)call SetTextTagPosUnit(t,u,0)call SetTextTagColorBJ(t,50,75,255,15)call SetTextTagVelocity(t,0,0.035)call SetTextTagFadepoint(t,3)call SetTextTagLifespan(t,2.5)call SetTextTagPermanent(t,false)call SetTextTagVisibility(t,false)call SetTextTagVisibility(t,true)if IsUnitVisible(u,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(t,true)elsecall SetTextTagVisibility(t,false)endifset t=nullendfunctionfunction SM4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093678387)local real OA2=GetUnitState(P8I,UNIT_STATE_LIFE)*(SUI*0.15+0.1)call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+OA2)call SL4(P8I,R2I(OA2))call SJ4(P8I)call KillUnit(P8I)set P7I=nullset P8I=nullendfunctionfunction SN4 takes nothing returns booleanif GetSpellAbilityId()==1093678387 and RYI(GetSpellTargetUnit())==false thencall SM4()endifreturn falseendfunctionfunction KR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SN4))set t=nullendfunctionfunction SS4 takes nothing returns nothinglocal location llocal unit SFI=GetTriggerUnit()local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real alocal real x2local real y2local integer SUI=GetUnitAbilityLevel(SFI,1093687349)local real PAIlocal real DC1local unit DT1=nullif GetSpellTargetUnit()!=null thenset l=GetUnitLoc(GetSpellTargetUnit())elseset l=GetSpellTargetLoc()endifset x2=GetLocationX(l)set y2=GetLocationY(l)set a=Atan2(y2-y1,x2-x1)set x2=x1+700*Cos(a)set y2=y1+700*Sin(a)if SUI==1 thenset PAI=80set DC1=0.5elseif SUI==2 thenset PAI=140set DC1=1elseif SUI==3 thenset PAI=200set DC1=1.5elseif SUI==4 thenset PAI=260set DC1=2endifif GetSpellTargetUnit()!=null and NNI(GetSpellTargetUnit())thenset DT1=GetSpellTargetUnit()endifcall DS1(SFI,DT1,PAI,DC1,0.52,x1,y1,x2,y2,150,null,true,1600)call RemoveLocation(l)set l=nullset SFI=nullendfunctionfunction ST4 takes nothing returns booleanif GetSpellAbilityId()==1093687349 thencall SS4()endifreturn falseendfunctionfunction TI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ST4))call Q1I(1093687350)set t=nullendfunctionfunction SR4 takes nothing returns booleanif(GetSpellAbilityId()==1093679413 or GetSpellAbilityId()==1093679447)and RKI(GetSpellTargetUnit())thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))endifreturn falseendfunctionfunction T11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function SR4))set t=nullendfunctionfunction SP4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",SFI,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",SFI,"origin"))set t=nullset SFI=nullreturn falseendfunctionfunction SQ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall KillUnit(I01)endifcall UnitRemoveAbility(SFI,1093687875)call UnitRemoveAbility(SFI,1110454358)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.5,false)call TriggerRegisterDeathEvent(t,SFI)call TriggerAddCondition(t,Condition(function SP4))call SaveUnitHandle(LY,(S5I),(14),(SFI))set t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction SU4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real H71=(LoadReal(LY,(S5I),(6)))local real H81=(LoadReal(LY,(S5I),(7)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall H61(SFI,H71,H81,650)call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))endifset t=nullset SFI=nullreturn falseendfunctionfunction T04 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",SFI,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",SFI,"origin"))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,18-0.1,false)call TriggerRegisterDeathEvent(t,SFI)call TriggerAddCondition(t,Condition(function SQ4))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.005,true)call TriggerRegisterDeathEvent(t,I01)call TriggerAddCondition(t,Condition(function SU4))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))set t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction TI4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697657174,0,0,0)local real DC1=18call IA1(I01,1093687875)call UnitApplyTimedLife(I01,1112820806,DC1)call A91(SFI,DC1,175)call TriggerRegisterTimerEvent(t,0.1,false)call TriggerAddCondition(t,Condition(function T04))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))set t=nullset SFI=nullendfunctionfunction T14 takes nothing returns booleanif GetSpellAbilityId()==1093679411 and GetUnitTypeId(GetTriggerUnit())==1429221432 thencall TI4()endifreturn falseendfunctionfunction T51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function T14))set t=nullendfunctionfunction GW2 takes nothing returns nothinglocal unit P7I=XMlocal unit P8I=YMlocal unit I01=(LoadUnitHandle(LY,(GetHandleId(P7I)),(219)))call SaveUnitHandle(LY,(GetHandleId(P7I)),(219),(I01))call SetUnitOwner(I01,GetOwningPlayer(P8I),true)set P7I=nullset P8I=nullset I01=nullendfunctionfunction AZO takes nothing returns nothinglocal unit SFI=NKlocal unit I01=(LoadUnitHandle(LY,(GetHandleId(SFI)),(219)))if I01!=null and GetUnitTypeId(I01)==1697657174 thencall RemoveUnit(I01)endifendfunctionfunction TO4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if I01!=null and GetUnitTypeId(I01)==1697657174 thenif IC1(P7I)==false thencall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifendifset t=nullset I01=nullset P7I=nullreturn falseendfunctionfunction T24 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093677893)local unit I01local trigger tlocal integer S5Iif SUI==1 thenset I01=CreateUnit(GetOwningPlayer(SFI),1697657174,0,0,0)call IA1(I01,1093687882)call SaveUnitHandle(LY,(GetHandleId(SFI)),(219),(I01))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function TO4))call TriggerRegisterTimerEvent(t,0.2,true)call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))elseset I01=(LoadUnitHandle(LY,(GetHandleId(SFI)),(219)))endifif SUI==2 thencall UnitRemoveAbility(I01,1093687882)call IA1(I01,1093687881)elseif SUI==3 thencall UnitRemoveAbility(I01,1093687882)call UnitRemoveAbility(I01,1093687881)call IA1(I01,1093687880)elseif SUI==4 thencall UnitRemoveAbility(I01,1093687882)call UnitRemoveAbility(I01,1093687881)call UnitRemoveAbility(I01,1093687880)call IA1(I01,1093687879)endifset SFI=nullset I01=nullendfunctionfunction T34 takes nothing returns booleanif GetLearnedSkill()==1093677893 and IsUnitIllusion(GetTriggerUnit())==false thencall T24()endifreturn falseendfunctionfunction T61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function T34))set t=nullendfunctionfunction T44 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01local integer i=1local boolean RZI=TII(GetOwningPlayer(SFI))local player plocal integer T54local integer T64local integer SUI=GetUnitAbilityLevel(SFI,1093687878)if SUI==1 thenset T54=1093742644set T64=1093742647elseif SUI==2 thenset T54=1093742641set T64=1093742646elseif SUI==3 thenset T54=1093742642set T64=1093742645elseif SUI==4 thenset T54=1093742643set T64=1093742648endifloopexitwhen i>5if RZI thenset p=BO[i]elseset p=CO[i]endifset I01=CreateUnit(p,1697657174,0,0,0)call IA1(I01,T54)call IA1(I01,T64)call UnitApplyTimedLife(I01,1112820806,10)set i=i+1endloopset SFI=nullset I01=nullset p=nullendfunctionfunction T74 takes nothing returns booleanif GetSpellAbilityId()==1093687878 thencall T44()endifreturn falseendfunctionfunction T71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function T74))set t=nullendfunctionfunction T84 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093679412)local integer T94=GetHeroLevel(P8I)local real PAI=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)*0.2if ModuloInteger(T94,7-SUI)==0 or T94==25 thencall P6I(P7I,P8I,1,PAI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",P8I,"chest"))endifset P7I=nullset P8I=nullendfunctionfunction TA4 takes nothing returns booleanif GetSpellAbilityId()==1093679412 thencall T84()endifreturn falseendfunctionfunction KP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TA4))set t=nullendfunctionfunction TB4 takes unit P7I returns nothingcall UnitRemoveAbility(P7I,1093750609)call UnitRemoveAbility(P7I,1093750610)call UnitRemoveAbility(P7I,1093750611)call UnitRemoveAbility(P7I,1093750612)call UnitRemoveAbility(P7I,1093750613)call UnitRemoveAbility(P7I,1093750614)call UnitRemoveAbility(P7I,1093750615)call UnitRemoveAbility(P7I,1093750616)call UnitRemoveAbility(P7I,1093750617)call UnitRemoveAbility(P7I,1395667021)call UnitRemoveAbility(P7I,1093750618)call UnitRemoveAbility(P7I,1395667022)call UnitRemoveAbility(P7I,1093750832)call UnitRemoveAbility(P7I,1093750833)call UnitRemoveAbility(P7I,1093750839)call UnitRemoveAbility(P7I,1093750849)call UnitRemoveAbility(P7I,1093750835)call UnitRemoveAbility(P7I,1093750836)call UnitRemoveAbility(P7I,1093750837)call UnitRemoveAbility(P7I,1093750838)call UnitRemoveAbility(P7I,1093812551)endfunctionfunction TC4 takes unit P7I,unit P8I returns nothinglocal integer TD4=GetUnitTypeId(P8I)local integer TE4=0local integer TF4=0if TD4==1848658008 thenset TE4=1093750609elseif TD4==1852796263 thenset TE4=1093750610elseif TD4==1852207221 thenset TE4=1093750611set TF4=1395667022elseif TD4==1853060204 thenset TE4=1093750612elseif TD4==1853055348 thenset TE4=1093750613elseif TD4==1853060200 thenset TE4=1093750614set TF4=1093750615elseif TD4==1848651859 thenset TE4=1093750616set TF4=1093750617elseif TD4==1852534636 thenset TE4=1395667021elseif TD4==1852207976 thenset TE4=1093750618set TF4=1093812551elseif TD4==1852010091 thenset TE4=1093750832elseif TD4==1852272243 thenset TE4=1093750833elseif TD4==1852270641 thenset TE4=1093750839set TF4=1093750849elseif TD4==1852798821 thenset TE4=1093750835set TF4=1093750836elseif TD4==1852077175 thenset TE4=1093750837set TF4=1093750838elseif TD4==1853320295 thenset TE4=1093750617endifif TE4!=0 thencall TB4(P7I)call IA1(P7I,TE4)endifif TF4!=0 thencall IA1(P7I,TF4)endifendfunctionfunction TG4 takes real TH4 returns stringlocal string c1="|c00ff0303"local string c="||"local string p=" "local string s=c1+c+"|r"local string FB1if TH4>85 thenset FB1=s+p+s+p+s+p+s+p+s+p+s+p+selseif TH4>70 thenset FB1=s+p+s+p+s+p+s+p+s+p+s+p+celseif TH4>55 thenset FB1=s+p+s+p+s+p+s+p+s+p+c+p+celseif TH4>40 thenset FB1=s+p+s+p+s+p+s+p+c+p+c+p+celseif TH4>25 thenset FB1=s+p+s+p+s+p+c+p+c+p+c+p+celseif TH4>10 thenset FB1=s+p+s+p+c+p+c+p+c+p+c+p+celseif TH4>0 thenset FB1=s+p+c+p+c+p+c+p+c+p+c+p+celseset FB1=c+p+c+p+c+p+c+p+c+p+c+p+cendifreturn FB1endfunctionfunction TZ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer TV4=(LoadInteger(LY,(S5I),(230)))local real HP=(LoadReal(LY,(S5I),(232)))local texttag tt=(LoadTextTagHandle(LY,(S5I),(231)))local integer NPI=GetTriggerEvalCount(t)local real TW4=QDI(HP-NPI,0)local boolean TX4=truecall SetTextTagText(tt,TG4(100*TW4/HP),0.018)call SetTextTagPosUnit(tt,SFI,0)if IsUnitVisible(SFI,GetLocalPlayer())==false and P0I(GetLocalPlayer())==false thenset TX4=falseendifcall SetTextTagVisibility(tt,TX4)if TW4==0 thencall OL1(GetOwningPlayer(SFI),SFI,25*SUI)endifif TW4==0 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093742674,true)call UnitRemoveAbility(SFI,1093742675)call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyTextTag(tt)endifset t=nullset SFI=nullreturn falseendfunctionfunction TY4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093742674)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real HP=GetUnitState(P8I,UNIT_STATE_LIFE)local integer G33=GetUnitLevel(P8I)local integer TV4=GetUnitTypeId(P8I)local texttag tt=CreateTextTag()local boolean TX4=truelocal unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,0,0,0)call UGI("SPLK",GetUnitX(SFI),GetUnitY(SFI),GetUnitX(P8I),GetUnitY(P8I),0.1,0.1,0.2,.9,0.5)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",GetUnitX(P8I),GetUnitY(P8I)))if IsUnitVisible(SFI,GetLocalPlayer())==false thenset TX4=falseendifcall TC4(SFI,P8I)call SetTextTagText(tt,TG4(100),0.018)call SetTextTagPosUnit(tt,SFI,0)call SetTextTagVisibility(tt,TX4)call SetTextTagPermanent(tt,true)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093742674,false)call IA1(SFI,1093742675)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveTextTagHandle(LY,(S5I),(231),(tt))call SaveInteger(LY,(S5I),(230),(TV4))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(232),((HP)*1.0))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TZ4))call ShowUnit(P8I,false)call UnitRemoveBuffs(P8I,true,true)call UnitRemoveAbility(P8I,1097167980)call UnitDamageTarget(I01,P8I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set t=nullset SFI=nullset P8I=nullendfunctionfunction TJ4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093742674)local integer G33=GetUnitLevel(P8I)if(GetOwningPlayer(P8I)!=BO[0]and GetOwningPlayer(P8I)!=CO[0])and((SUI==1 and G33>2)or(SUI==2 and G33>4)or(SUI==3 and G33>5)or(SUI==4 and G33>6))thenendifset SFI=nullset P8I=nullendfunctionfunction TK4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer id=(LoadInteger(LY,(S5I),(34)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction TL4 takes nothing returns nothinglocal integer id=GetSpellAbilityId()local trigger tlocal integer S5Iif id==1093750609 or id==1093750610 or id==1093750611 or id==1093750612 or id==1093750613 or id==1093750614 or id==1093750615 or id==1093750616 or id==1093750617 or id==1395667021 or id==1093750618 or id==1395667022 or id==1093750832 or id==1093750833 or id==1093750834 or id==1093750835 or id==1093750836 or id==1093750837 or id==1093750838 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function TK4))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveInteger(LY,(S5I),(34),(id))set t=nullendifendfunctionfunction TM4 takes nothing returns booleanif GetSpellAbilityId()==1093742674 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall TJ4()elsecall TY4()endifelseif GetUnitTypeId(GetTriggerUnit())==1430467634 thencall TL4()endifreturn falseendfunctionfunction KQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function TM4))set t=nullendfunctionfunction TN4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093750604)call UnitRemoveAbility(P7I,1093750606)call UnitRemoveAbility(P7I,1093750607)call UnitRemoveAbility(P7I,1093750605)call UnitRemoveAbility(P7I,1110455370)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction TS4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093750608)if SUI==1 thencall IA1(P7I,1093750604)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750604,false)elseif SUI==2 thencall IA1(P7I,1093750606)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750606,false)elseif SUI==3 thencall IA1(P7I,1093750607)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750607,false)elseif SUI==4 thencall IA1(P7I,1093750605)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750605,false)endifcall TriggerRegisterTimerEvent(t,8+2*SUI,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TN4))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction TT4 takes nothing returns booleanif GetSpellAbilityId()==1093750608 thencall TS4()endifreturn falseendfunctionfunction KU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TT4))set t=nullendfunctionfunction TR4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if QLI(P7I,P8I)>900 or IC1(P7I)==true thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))endifif NPI>16*10 thencall UnitRemoveAbility(P8I,1112433775)call UnitRemoveAbility(P8I,1110460493)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitAbilityLevel(P8I,1112433775)==0 and GetUnitAbilityLevel(P8I,1110460493)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction TP4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093684565)local real PAI=5+15*SUIif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093681458)set PAI=20+20*SUIendifif GetUnitAbilityLevel(P8I,1112433775)==0 and GetUnitAbilityLevel(P8I,1110460493)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall P6I(P7I,P8I,7,PAI)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction TQ4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function TP4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))if GetSpellAbilityId()==1093681458 thenset t=CreateTrigger()set S5I=GetHandleId(t)call UnitRemoveBuffs(P8I,true,false)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function TR4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(0))endifset P7I=nullset P8I=nullset t=nullendfunctionfunction TU4 takes nothing returns booleanif GetSpellAbilityId()==1093684565 or GetSpellAbilityId()==1093681458 thenif NNI(GetSpellTargetUnit())==false thencall TQ4()endifendifreturn falseendfunctionfunction L01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TU4))set t=nullendfunctionfunction R04 takes nothing returns booleanlocal real xlocal real yif(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))thenset x=Z7I+GetRandomReal(20,70)*Cos(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)set y=Z8I+GetRandomReal(20,70)*Sin(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)call SetUnitPosition(GetFilterUnit(),x,y)endifreturn falseendfunctionfunction RI4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local group g=NTI()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x,y,0)local integer SUI=GetUnitAbilityLevel(SFI,1093810508)set Z7I=GetUnitX(SFI)+100*Cos(GetUnitFacing(SFI)*bj_DEGTORAD)set Z8I=GetUnitY(SFI)+100*Sin(GetUnitFacing(SFI)*bj_DEGTORAD)call GroupEnumUnitsInRange(g,x,y,410+24,Condition(function R04))call NSI(g)call IA1(I01,1093678662)call SetUnitAbilityLevel(I01,1093678662,SUI)call IssueImmediateOrder(I01,"stomp")set SFI=nullset g=nullendfunctionfunction R14 takes nothing returns booleanif GetSpellAbilityId()==1093810508 thencall RI4()endifreturn falseendfunctionfunction LI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function R14))set t=nullendfunctionfunction RO4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetUnitAbilityLevel(P8I,1110454357)==0 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P8I,1093751088)call UnitRemoveAbility(P8I,1093751089)call UnitRemoveAbility(P8I,1093751090)call UnitRemoveAbility(P8I,1093751091)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction R24 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093677879)local integer OO1if SUI==1 thenset OO1=1093751088elseif SUI==2 thenset OO1=1093751089elseif SUI==3 thenset OO1=1093751090elseif SUI==4 thenset OO1=1093751091endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),OO1,false)call IA1(P8I,OO1)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function RO4))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction R34 takes nothing returns booleanif GetSpellAbilityId()==1093677879 thencall R24()endifreturn falseendfunctionfunction L11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function R34))set t=nullendfunctionfunction R44 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitRemoveAbility(P8I,1093751094)call UnitRemoveAbility(P8I,1110459224)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction R54 takes unit P7I,unit P8I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitPathing(P8I,true)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function R44))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093751094)call UnitMakeAbilityPermanent(P8I,true,1093751094)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093751094,false)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",P8I,"chest"))call P6I(P7I,P8I,1,70*SUI)set t=nullendfunctionfunction R64 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit R74=(LoadUnitHandle(LY,(S5I),(393)))local unit R84=(LoadUnitHandle(LY,(S5I),(394)))local unit R94=(LoadUnitHandle(LY,(S5I),(395)))local unit RA4=(LoadUnitHandle(LY,(S5I),(396)))local unit RB4=(LoadUnitHandle(LY,(S5I),(397)))local unit RC4=(LoadUnitHandle(LY,(S5I),(398)))local unit RD4=(LoadUnitHandle(LY,(S5I),(399)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real IO3=(LoadReal(LY,(S5I),(6)))local real I23=(LoadReal(LY,(S5I),(7)))local real IV1=PPI(IO3+19*Cos(RM2))local real IW1=Q0I(I23+19*Sin(RM2))local group glocal integer RE4=(LoadInteger(LY,(S5I),(12)))local location lcall SetUnitPosition(P7I,IV1,IW1)call SetUnitFacing(P7I,RM2*bj_RADTODEG)call SaveReal(LY,(S5I),(6),((IV1)*1.0))call SaveReal(LY,(S5I),(7),((IW1)*1.0))if ModuloInteger(GetTriggerEvalCount(t),4)==0 thencall DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",IV1,IW1))endifif GetTriggerEvalCount(t)==2 thencall SetUnitAnimationByIndex(P7I,3)endifif R74==null or R84==null or R94==null or RA4==null or RB4==null or RC4==null or RD4==null thenset GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,IV1,IW1,125+25,Condition(function D21))if FirstOfGroup(g)!=null thenif R74!=null thencall GroupRemoveUnit(g,R74)endifif R84!=null thencall GroupRemoveUnit(g,R84)endifif R94!=null thencall GroupRemoveUnit(g,R94)endifif RA4!=null thencall GroupRemoveUnit(g,RA4)endifif RB4!=null thencall GroupRemoveUnit(g,RB4)endifif RC4!=null thencall GroupRemoveUnit(g,RC4)endifif RD4!=null thencall GroupRemoveUnit(g,RD4)endifif FirstOfGroup(g)!=null thenif R74==null thenset R74=FirstOfGroup(g)call SetUnitPathing(R74,false)call SCI(R74,4404,5)elseif R84==null thenset R84=FirstOfGroup(g)call SetUnitPathing(R84,false)call SCI(R84,4404,5)elseif R94==null thenset R94=FirstOfGroup(g)call SetUnitPathing(R94,false)call SCI(R94,4404,5)elseif RA4==null thenset RA4=FirstOfGroup(g)call SetUnitPathing(RA4,false)call SCI(RA4,4404,5)elseif RB4==null thenset RB4=FirstOfGroup(g)call SetUnitPathing(RB4,false)call SCI(RB4,4404,5)elseif RC4==null thenset RC4=FirstOfGroup(g)call SetUnitPathing(RC4,false)call SCI(RC4,4404,5)elseif RD4==null thenset RD4=FirstOfGroup(g)call SetUnitPathing(RD4,false)call SCI(RD4,4404,5)endifendifendifcall NSI(g)set g=nullendifcall SaveUnitHandle(LY,(S5I),(393),(R74))call SaveUnitHandle(LY,(S5I),(394),(R84))call SaveUnitHandle(LY,(S5I),(395),(R94))call SaveUnitHandle(LY,(S5I),(396),(RA4))call SaveUnitHandle(LY,(S5I),(397),(RB4))call SaveUnitHandle(LY,(S5I),(398),(RC4))call SaveUnitHandle(LY,(S5I),(399),(RD4))if R74!=null thencall SetUnitPosition(R74,IV1,IW1)endifif R84!=null thencall SetUnitPosition(R84,IV1,IW1)endifif R94!=null thencall SetUnitPosition(R94,IV1,IW1)endifif RA4!=null thencall SetUnitPosition(RA4,IV1,IW1)endifif RB4!=null thencall SetUnitPosition(RB4,IV1,IW1)endifif RC4!=null thencall SetUnitPosition(RC4,IV1,IW1)endifif RD4!=null thencall SetUnitPosition(RD4,IV1,IW1)endifif ModuloInteger(GetTriggerEvalCount(t),3)==0 thencall UPI(IV1,IW1,200)endifif GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>RE4 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call SetUnitAnimationByIndex(P7I,0)call SetUnitTimeScale(P7I,1.0)call SetUnitPathing(P7I,true)call FlushChildHashtable(LY,(S5I))call S0I(t)if R74!=null thenif IsPointInRegion(LN,GetUnitX(R74),GetUnitY(R74))==true thenset l=BN1(GetUnitX(R74),GetUnitY(R74))call SetUnitX(R74,PPI(GetLocationX(l)))call SetUnitY(R74,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,R74,SUI)call UPI(GetUnitX(R74),GetUnitY(R74),300)endifif R84!=null thenif IsPointInRegion(LN,GetUnitX(R84),GetUnitY(R84))==true thenset l=BN1(GetUnitX(R84),GetUnitY(R84))call SetUnitX(R84,PPI(GetLocationX(l)))call SetUnitY(R84,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,R84,SUI)call UPI(GetUnitX(R84),GetUnitY(R84),300)endifif R94!=null thenif IsPointInRegion(LN,GetUnitX(R94),GetUnitY(R94))==true thenset l=BN1(GetUnitX(R94),GetUnitY(R94))call SetUnitX(R94,PPI(GetLocationX(l)))call SetUnitY(R94,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,R94,SUI)call UPI(GetUnitX(R94),GetUnitY(R94),300)endifif RA4!=null thenif IsPointInRegion(LN,GetUnitX(RA4),GetUnitY(RA4))==true thenset l=BN1(GetUnitX(RA4),GetUnitY(RA4))call SetUnitX(RA4,PPI(GetLocationX(l)))call SetUnitY(RA4,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,RA4,SUI)call UPI(GetUnitX(RA4),GetUnitY(RA4),300)endifif RB4!=null thenif IsPointInRegion(LN,GetUnitX(RB4),GetUnitY(RB4))==true thenset l=BN1(GetUnitX(RB4),GetUnitY(RB4))call SetUnitX(RB4,PPI(GetLocationX(l)))call SetUnitY(RB4,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,RB4,SUI)call UPI(GetUnitX(RB4),GetUnitY(RB4),300)endifif RC4!=null thenif IsPointInRegion(LN,GetUnitX(RC4),GetUnitY(RC4))==true thenset l=BN1(GetUnitX(RC4),GetUnitY(RC4))call SetUnitX(RC4,PPI(GetLocationX(l)))call SetUnitY(RC4,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,RC4,SUI)call UPI(GetUnitX(RC4),GetUnitY(RC4),300)endifif RD4!=null thenif IsPointInRegion(LN,GetUnitX(RD4),GetUnitY(RD4))==true thenset l=BN1(GetUnitX(RD4),GetUnitY(RD4))call SetUnitX(RD4,PPI(GetLocationX(l)))call SetUnitY(RD4,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifcall R54(P7I,RD4,SUI)call UPI(GetUnitX(RD4),GetUnitY(RD4),300)endifif R74!=null and IC1(R74)==false thencall IssueTargetOrder(P7I,"attack",R74)elseif R84!=null and IC1(R84)==false thencall IssueTargetOrder(P7I,"attack",R84)elseif R94!=null and IC1(R94)==false thencall IssueTargetOrder(P7I,"attack",R94)elseif RA4!=null and IC1(RA4)==false thencall IssueTargetOrder(P7I,"attack",RA4)elseif RB4!=null and IC1(RB4)==false thencall IssueTargetOrder(P7I,"attack",RB4)elseif RC4!=null and IC1(RC4)==false thencall IssueTargetOrder(P7I,"attack",RC4)elseif RD4!=null and IC1(RD4)==false thencall IssueTargetOrder(P7I,"attack",RD4)endifcall UPI(IV1,IW1,375)if IsPointInRegion(LN,GetUnitX(P7I),GetUnitY(P7I))==true thenset l=BN1(GetUnitX(P7I),GetUnitY(P7I))call SetUnitX(P7I,PPI(GetLocationX(l)))call SetUnitY(P7I,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifendifset t=nullset P7I=nullreturn falseendfunctionfunction RF4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QJI=PPI(GetSpellTargetX())local real QKI=Q0I(GetSpellTargetY())local unit P7I=GetTriggerUnit()local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local integer SUI=GetUnitAbilityLevel(P7I,1093751364)local real a=UEI(QXI,QYI,QJI,QKI)*bj_DEGTORADlocal real QWI=600+150*SUI+25if QNI(QXI,QYI,QJI,QKI)>QWI thenset QJI=PPI(QXI+QWI*Cos(a))set QKI=Q0I(QYI+QWI*Sin(a))endifcall SetUnitPathing(P7I,false)call SetUnitAnimationByIndex(P7I,3)call SetUnitTimeScale(P7I,1.5)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function R64))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(393),(null))call SaveUnitHandle(LY,(S5I),(394),(null))call SaveUnitHandle(LY,(S5I),(395),(null))call SaveUnitHandle(LY,(S5I),(396),(null))call SaveUnitHandle(LY,(S5I),(397),(null))call SaveUnitHandle(LY,(S5I),(398),(null))call SaveUnitHandle(LY,(S5I),(399),(null))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(6),((QXI)*1.0))call SaveReal(LY,(S5I),(7),((QYI)*1.0))call SaveReal(LY,(S5I),(13),((Atan2(QKI-QYI,QJI-QXI))*1.0))call SaveInteger(LY,(S5I),(12),(R2I(QNI(QXI,QYI,QJI,QKI)/19.0)))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\SkewerTuskGlow_1.mdx",P7I,"head")))set t=nullset P7I=nullendfunctionfunction RG4 takes nothing returns booleanif GetSpellAbilityId()==1093751364 thencall RF4()endifreturn falseendfunctionfunction RH4 takes nothing returns booleanif GetSpellAbilityId()==1093751364 thencall SetUnitAnimationByIndex(GetTriggerUnit(),7)endifreturn falseendfunctionfunction LO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RG4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function RH4))set t=nullendfunctionfunction MysticSnake_DoNothing takes nothing returns nothingendfunctionfunction RZ4 takes nothing returns booleanlocal real dif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(ZAI))==true and IsUnitInGroup(GetFilterUnit(),ZCI)==false and C01(GetFilterUnit(),GetOwningPlayer(ZBI))==true thenset d=QNI(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),GetUnitX(ZAI),GetUnitY(ZAI))if d<ZDI thenset Z9I=GetFilterUnit()set ZDI=dendifendifreturn falseendfunctionfunction RV4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local real RW4=(LoadReal(LY,(S5I),(222)))local real RX4=(LoadReal(LY,(S5I),(223)))local real RY4=(LoadReal(LY,(S5I),(224)))local real OA2local group glocal real alocal real xlocal real ylocal integer RJ4=GetUnitAbilityLevel(P7I,1093747028)set a=Atan2(GetUnitY(P8I)-GetUnitY(I01),GetUnitX(P8I)-GetUnitX(I01))if P7I==P8I thenset x=GetUnitX(I01)+24*Cos(a)set y=GetUnitY(I01)+24*Sin(a)elseset x=GetUnitX(I01)+24*Cos(a)set y=GetUnitY(I01)+24*Sin(a)endifcall SetUnitX(I01,x)call SetUnitY(I01,y)if QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))<60 thencall SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))if P7I==P8I thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+RW4)call KillUnit(I01)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif BU1(P8I)==false or IsUnitVisible(P8I,GetOwningPlayer(I01))==true thenif(GetUnitAbilityLevel(P8I,1093817420)>0)thencall P6I(P7I,P8I,3,((40+40*SUI)+0.25*RY4*(40+40*SUI))/(1.2+0.1*RJ4))elsecall P6I(P7I,P8I,1,(40+40*SUI)+0.25*RY4*(40+40*SUI))endifset RY4=RY4+1if GetUnitState(P8I,UNIT_STATE_MANA)>0 thenset OA2=RMinBJ(GetUnitState(P8I,UNIT_STATE_MANA),(5+15*SUI)+0.25*RX4*(10+10*SUI))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-OA2)call IO1(RE,GetUnitX(P8I),GetUnitY(P8I))set RW4=RW4+OA2set RX4=RX4+1endifendifcall SaveReal(LY,(S5I),(222),((RW4)*1.0))call SaveReal(LY,(S5I),(224),((RY4)*1.0))call SaveReal(LY,(S5I),(223),((RX4)*1.0))set g=NTI()set Z9I=nullset ZAI=P8Iset ZCI=PR2set ZDI=99999set ZBI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),500,Condition(function RZ4))call NSI(g)if Z9I==null or RY4==(2+SUI)thencall SaveInteger(LY,(S5I),(30),(NKI(P7I)))elsecall SaveInteger(LY,(S5I),(30),(NKI(Z9I)))call GroupAddUnit(PR2,Z9I)endifendifcall NXI(PCI)endifset t=nullset P7I=nullset P8I=nullset g=nullreturn falseendfunctionfunction RK4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093682994)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local real RY4=0local real RX4=0local real OA2=0local real RW4=0local unit I01=CreateUnit(GetOwningPlayer(P7I),1747990832,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call IO1(TE,GetUnitX(P7I),GetUnitY(P7I))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function RV4))call SaveGroupHandle(LY,(S5I),(187),(g))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveInteger(LY,(S5I),(34),(0))call SaveReal(LY,(S5I),(222),((RW4)*1.0))call SaveReal(LY,(S5I),(224),((RY4)*1.0))call SaveReal(LY,(S5I),(223),((RX4)*1.0))call GroupAddUnit(g,P8I)set P7I=nullset P8I=nullset t=nullset g=nullendfunctionfunction RL4 takes nothing returns booleanif GetSpellAbilityId()==1093682994 thencall RK4()endifreturn falseendfunctionfunction L31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RL4))set t=nullendfunctionfunction RM4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()call SaveReal(LY,(GetHandleId(P8I)),(799),((0)*1.0))set P8I=nullendfunctionfunction RN4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()call UnitRemoveAbility(P8I,1093817139)call UnitRemoveAbility(P8I,1093817421)call UnitRemoveAbility(P8I,1110458961)call SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I))set P8I=nullendfunctionfunction RS4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093747028)if GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall DisableTrigger(t)call P6I(GetEventDamageSource(),P8I,7,GetEventDamage()*(0.2+0.1*SUI))call EnableTrigger(t)if IC1(P8I)==true thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093817137)call UnitRemoveAbility(P8I,1093817420)endifelsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093817137)call UnitRemoveAbility(P8I,1093817420)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction RT4 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal unit I01if IsUnitIllusion(P8I)==true thencall KillUnit(P8I)returnendifset t=CreateTrigger()set S5I=GetHandleId(t)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093817140)call IssueTargetOrder(I01,"thunderbolt",P8I)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,3,false)call TriggerAddCondition(t,Condition(function RS4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",P8I,"chest")))call IA1(P8I,1093817137)call IA1(P8I,1093817420)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093817137,false)set t=nullendfunctionfunction RR4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()call SaveReal(LY,(GetHandleId(P8I)),(799),(((LoadReal(LY,(GetHandleId(P8I)),(799)))+0.02)*1.0))if GetUnitAbilityLevel(P8I,1093817139)==0 thencall IA1(P8I,1093817139)call IA1(P8I,1093817421)call SetUnitTurnSpeed(P8I,GetUnitDefaultTurnSpeed(P8I)*0.5)endifif(LoadReal(LY,(GetHandleId(P8I)),(799)))==2.0 thencall RT4(ZEI,P8I)endifset P8I=nullendfunctionfunction RP4 takes unit P7I,unit P8I returns booleanlocal real a=UDI(P8I,P7I)local real V53=GetUnitFacing(P8I)local real c1local real c2local real d1=-1.0local real d2=-1.0local real e1local real e2local real f1=-1.0local real f2=-1.0set c1=RMaxBJ(V53-85,0)set c2=V53if V53-85<=0 thenset d1=360-(85-(c2-c1))set d2=360endifset e1=V53set e2=RMinBJ(V53+85,360)if V53+85>=360 thenset f1=0set f2=0+(85-(e2-e1))endifif a<0 thenset a=a+360elseif a>360 thenset a=a-360endifif(a>c1 and a<c2)or(d1!=-1 and a>d1 and a<d2)or(a>e1 and a<e2)or(f1!=-1 and a>f1 and a<f2)thenreturn trueendifreturn falseendfunctionfunction RQ4 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and RP4(GK,GetFilterUnit())endfunctionfunction RU4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093747028)local group g1=NTI()local group g2=NTI()local group PR2=(LoadGroupHandle(LY,(S5I),(187)))set ZFI=PR2set ZEI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g1,GetUnitX(P7I),GetUnitY(P7I),1025,Condition(function RQ4))call ForGroup(g1,function RR4)call GroupAddGroup(g1,PR2)call GroupAddGroup(PR2,g2)call GroupRemoveGroup(g1,g2)call NSI(g1)call NSI(g2)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))if GetTriggerEvalCount(t)>R2I(ZGI/0.02)thencall S0I(t)call FlushChildHashtable(LY,(S5I))call ForGroup(PR2,function RN4)call ForGroup(PR2,function RM4)call NSI(PR2)elsecall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",P7I,"chest")))endifset P7I=nullset g1=nullset g2=nullset PR2=nullset t=nullreturn falseendfunctionfunction P04 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function RU4))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",GetTriggerUnit(),"chest")))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call TriggerEvaluate(t)set t=nullendfunctionfunction PI4 takes nothing returns booleanif GetSpellAbilityId()==1093747028 thencall P04()endifreturn falseendfunctionfunction L41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PI4))set t=nullendfunctionfunction P14 takes nothing returns booleanif GetSpellAbilityId()==1093747504 thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748052,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748051,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748049,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748050,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093818188,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093808966,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093818187,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093818186,false)endifreturn falseendfunctionfunction L21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function P14))set t=nullendfunctionfunction PO4 takes integer NPI,unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)if NPI==0 thencall IssueTargetOrder(P7I,"attack",P8I)elseif NPI==1 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,1)call IssueTargetOrder(I01,"slow",P8I)elseif NPI==2 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,1)call IssueTargetOrder(I01,"slow",P8I)elseif NPI==3 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,2)call IssueTargetOrder(I01,"slow",P8I)elseif NPI==4 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,3)call IssueTargetOrder(I01,"slow",P8I)elseif NPI==5 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,4)call IssueTargetOrder(I01,"slow",P8I)elseif NPI==6 thencall IA1(I01,1093686344)call SetUnitAbilityLevel(I01,1093686344,5)call IssueTargetOrder(I01,"slow",P8I)endifset I01=nullendfunctionfunction P24 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real AB3=(10.0+SUI*5.0)/100.0if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thenset NPI=NPI+1call PO4(NPI,P7I,P8I)if NPI==9 thencall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(34),(NPI))endifelseif RSI(GetEventDamage())and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false thenif IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 thencall SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*AB3)elsecall SetUnitState(K1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE,GetUnitState(K1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE)+GetEventDamage()*AB3)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetEventDamageSource(),"origin"))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction P34 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call PO4(0,P7I,P8I)call SaveInteger(LY,(S5I),(375),(0))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(P7I,1093744948)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function P24))set t=nullset P7I=nullset P8I=nullendfunctionfunction P44 takes nothing returns booleanif GetSpellAbilityId()==1093744948 and NNI(GetSpellTargetUnit())==false thencall P34()endifreturn falseendfunctionfunction SR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function P44))set t=nullcall Q1I(1093686344)endfunctionfunction Snatch_Damage takes nothing returns nothingcall P6I(ZHI,GetEnumUnit(),1,ZZI*125+25)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",GetEnumUnit(),"overhead"))endfunctionfunction Snatch_Process takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))call P6I(P7I,P8I,1,PAI)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",P8I,"overhead"))set P7I=nullset P8I=nullendfunctionfunction P54 takes nothing returns nothinglocal unit P7I=ZHIlocal unit P8I=GetEnumUnit()local integer SUI=ZZIlocal trigger t=IJ1(P7I,P8I,1747993670,"P64",600,false)local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(20),((SUI*125+25)*1.0))set P7I=nullset P8I=nullendfunctionfunction P74 takes unit P7I,unit P8I,integer SUI returns nothinglocal group g=NTI()set GK=P7Iset ZHI=P7Iset ZZI=SUIcall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),700+25,Condition(function CA1))call ForGroup(g,function P54)call NSI(g)set g=nullendfunctionfunction P84 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitShareVision(P8I,GetOwningPlayer(SFI),false)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(P8I),GetUnitY(P8I)))call SetUnitPosition(SFI,GetUnitX(P8I),GetUnitY(P8I))call PauseUnit(SFI,false)call ShowUnit(SFI,true)call SetUnitPathing(SFI,true)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitForPlayerSingle(SFI,GetOwningPlayer(SFI))call SetUnitInvulnerable(SFI,false)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call RemoveUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)call P74(SFI,P8I,SUI)call SaveInteger(LY,(GetHandleId((SFI))),((4310)),(2))elseif IsUnitType(P8I,UNIT_TYPE_HERO)==true and IsUnitEnemy(P8I,GetOwningPlayer(SFI))==true thencall UnitShareVision(P8I,GetOwningPlayer(SFI),false)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(P8I),GetUnitY(P8I)))call SetUnitPosition(SFI,GetUnitX(P8I),GetUnitY(P8I))call PauseUnit(SFI,false)call ShowUnit(SFI,true)call SetUnitPathing(SFI,true)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitForPlayerSingle(SFI,GetOwningPlayer(SFI))call SetUnitInvulnerable(SFI,false)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call RemoveUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)call P74(SFI,P8I,SUI)call SaveInteger(LY,(GetHandleId((SFI))),((4310)),(2))elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686104 thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(P8I),GetUnitY(P8I)))if IsUnitType(P8I,UNIT_TYPE_HERO)==false thencall SetUnitState(SFI,UNIT_STATE_LIFE,GetUnitState(SFI,UNIT_STATE_LIFE)+GetUnitState(P8I,UNIT_STATE_LIFE))endifcall UnitShareVision(P8I,GetOwningPlayer(SFI),false)call SetUnitPosition(SFI,GetUnitX(P8I),GetUnitY(P8I))call PauseUnit(SFI,false)call ShowUnit(SFI,true)call SetUnitPathing(SFI,true)call SetUnitAnimation(SFI,"Stand Victory")call OE1(SFI,1.5)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitForPlayerSingle(SFI,GetOwningPlayer(SFI))call SetUnitInvulnerable(SFI,false)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call RemoveUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)call P74(SFI,P8I,SUI)if IsUnitType(P8I,UNIT_TYPE_HERO)==false thenif TII(GetOwningPlayer(SFI))thenset I01=CreateUnit(CO[0],1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call SetUnitOwner(P8I,CO[0],false)elseset I01=CreateUnit(BO[0],1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call SetUnitOwner(P8I,BO[0],false)endifcall UnitAddAbility(I01,1093873971)call IssueTargetOrder(I01,"charm",P8I)call UnitRemoveBuffs(P8I,true,true)call DU1(P8I,0,0)call P6I(SFI,P8I,1,100000)call P6I(SFI,P8I,2,100000)call P6I(SFI,P8I,3,100000)endifcall SaveInteger(LY,(GetHandleId((SFI))),((4310)),(2))elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELECTED thenif IsUnitType(P8I,UNIT_TYPE_HERO)==true or IsUnitIllusion(P8I)==true thencall ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitAddForPlayer(I01,GetOwningPlayer(SFI))endifelsecall SetUnitPosition(SFI,GetUnitX(P8I),GetUnitY(P8I))endifset t=nullset P8I=nullset SFI=nullreturn falseendfunctionfunction P94 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697657136,7260,-7732,0)local string PA4="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"local string PB4="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"local string PC4="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(SFI))and P0I(GetLocalPlayer())==false thenset PA4=""set PB4=""set PC4=""endifcall UnitRemoveBuffs(SFI,true,true)call DU1(SFI,0,0)call SetUnitInvulnerable(I01,true)call IA1(I01,1093686104)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitForPlayerSingle(I01,GetOwningPlayer(SFI))call UnitShareVision(P8I,GetOwningPlayer(SFI),true)call SetUnitInvulnerable(SFI,true)call ShowUnit(SFI,false)call PauseUnit(SFI,true)call SetUnitPathing(SFI,false)call DestroyEffect(AddSpecialEffectTarget(PA4,P8I,"overhead"))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(PB4,P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget(PC4,P8I,"overhead")))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(SFI,1093686103)))call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(SFI),EVENT_PLAYER_UNIT_SELECTED,Condition(function N1I))call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function P84))call SaveInteger(LY,(GetHandleId((SFI))),((4310)),(1))if IsUnitType(P8I,UNIT_TYPE_HERO)==false and IsUnitIllusion(P8I)==false thencall IA1(P8I,1093686104)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_SPELL_EFFECT)set I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093873971)call IssueTargetOrder(I01,"charm",P8I)call ClearSelectionForPlayer(GetOwningPlayer(SFI))call SelectUnitForPlayerSingle(P8I,GetOwningPlayer(SFI))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MAX_MANA))endifset t=nullset SFI=nullset P8I=nullendfunctionfunction PD4 takes nothing returns booleanif GetSpellAbilityId()==1093686103 thencall P94()endifreturn falseendfunctionfunction PE4 takes nothing returns booleanif GetSpellAbilityId()==1093686103 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true or IsUnitIllusion(GetSpellTargetUnit()))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659030))endifreturn falseendfunctionfunction ST1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PD4))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function PE4))set t=nullendfunctionfunction PF4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetUnitTypeId(SFI)==1160786520 thencall SetUnitVertexColor(SFI,255,255,255,255)elsecall SetUnitVertexColor(SFI,100,100,100,255)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitRemoveAbility(SFI,1093686098)call UnitRemoveAbility(SFI,1093686100)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction PG4 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093817428)call SetUnitVertexColor(SFI,0,0,0,255)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093686100,false)call IA1(SFI,1093686100)call IA1(SFI,1093686098)call SetUnitAbilityLevel(SFI,1093686098,SUI)call DU1(SFI,0,0)call UnitRemoveAbility(SFI,1112044643)call UnitRemoveAbility(SFI,1110454869)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",SFI,"right hand")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",SFI,"left hand")))call TriggerRegisterTimerEvent(t,2+SUI,false)call TriggerAddCondition(t,Condition(function PF4))set SFI=nullset t=nullendfunctionfunction PH4 takes nothing returns booleanif GetSpellAbilityId()==1093817428 thencall PG4()endifreturn falseendfunctionfunction SS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PH4))set t=nullendfunctionfunction PZ4 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093686099)local real PAI=(0.03+0.01*SUI)*GetUnitState(P8I,UNIT_STATE_LIFE)if GetUnitAbilityLevel(P8I,1093678162)==0 and GetUnitAbilityLevel(P7I,1112433775)==0 thencall P6I(P7I,P8I,2,PAI)call SetUnitState(P7I,UNIT_STATE_LIFE,PAI+GetUnitState(P7I,UNIT_STATE_LIFE))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",P7I,"origin"))endifendfunctionfunction PV4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call PZ4(P7I,P8I)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction PW4 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function PV4))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction PX4 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4274))))==1)==false thencall SCI(P7I,4274,0.4)call PW4()endifendfunctionfunction PY4 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093686099)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall PX4()endifreturn falseendfunctionfunction PJ4 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function PY4))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction PK4 takes nothing returns booleanif GetLearnedSkill()==1093686099 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686099)==1 thencall PJ4()endifreturn falseendfunctionfunction SN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function PK4))set t=nullendfunctionfunction PL4 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local unit P7I=ZVIlocal real KMO=GetUnitState(P8I,UNIT_STATE_LIFE)local real PM4=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)local real PN4=((0.003+0.003*ZWI)*PM4)/2if KMO<PN4 thencall SetUnitState(P8I,UNIT_STATE_LIFE,1)call P6I(P7I,P8I,3,100)call P6I(P7I,P8I,1,100)call P6I(P7I,P8I,2,100)elsecall SetUnitState(P8I,UNIT_STATE_LIFE,QDI(GetUnitState(P8I,UNIT_STATE_LIFE)-PN4,1))endifset P8I=nullset P7I=nullendfunctionfunction PS4 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110456372)>0endfunctionfunction PT4 takes nothing returns booleanlocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group gif IC1(P7I)==false thenset g=NTI()set GK=P7Iset ZVI=P7Iset ZWI=GetUnitAbilityLevel(P7I,1093677390)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1225,Condition(function PS4))call ForGroup(g,function PL4)call NSI(g)endifset g=nullset P7I=nullreturn falseendfunctionfunction PR4 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function PT4))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(GetTriggerUnit()))set t=nullendfunctionfunction PP4 takes nothing returns booleanif GetLearnedSkill()==1093677390 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677390)==1 thencall PR4()endifreturn falseendfunctionfunction L81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function PP4))set t=nullendfunctionfunction PQ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093678640)local real PU4=2*SUIlocal real Q04=SUIlocal integer AB3=(LoadInteger(LY,(S5I),(34)))if SUI==4 thenset PU4=10endifset Q04=Q04*AB3set PU4=PU4*AB3call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+PU4)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+Q04)if GetTriggerEvalCount(t)>5 or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction QI4 takes unit P7I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093678640)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",P7I,"origin"))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function PQ4))call SaveUnitHandle(LY,(S5I),(2),(P7I))if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thencall SaveInteger(LY,(S5I),(34),(10))elsecall SaveInteger(LY,(S5I),(34),(1))endifset t=nullendfunctionfunction Q14 takes nothing returns booleanif GetUnitAbilityLevel(GetKillingUnit(),1110454866)>0 thencall QI4(GetKillingUnit())elseif((LoadInteger(LY,(GetHandleId((GetTriggerUnit()))),((4333))))==1)thencall QI4(ZJI)endifreturn falseendfunctionfunction L51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Q14))set t=nullendfunctionfunction P64 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))local real MR3=(LoadReal(LY,(S5I),(21)))if IsUnitAlly(P8I,GetOwningPlayer(P7I))thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+MR3)elsecall P6I(P7I,P8I,1,PAI)endifset P7I=nullset P8I=nullendfunctionfunction QO4 takes nothing returns nothinglocal trigger t=IJ1(GK,GetEnumUnit(),1747988567,"P64",400,false)local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(20),((AK)*1.0))call SaveReal(LY,(S5I),(21),((BK)*1.0))set t=nullendfunctionfunction Q24 takes nothing returns nothingcall QO4()endfunctionfunction Q34 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group g=NTI()local integer SUI=GetUnitAbilityLevel(SFI,ZXI)local real rlocal real PAIlocal real MR3if SUI==1 thenset PAI=75set MR3=70set r=500elseif SUI==2 thenset PAI=125set MR3=90set r=500elseif SUI==3 thenset PAI=200set MR3=110set r=500elseif SUI==4 thenset PAI=275set MR3=130set r=500endifset GK=SFIset AK=PAIset BK=MR3call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),r,Condition(function D41))call GroupRemoveUnit(g,SFI)call ForGroup(g,function Q24)call NSI(g)call SetUnitState(SFI,UNIT_STATE_LIFE,GetUnitState(SFI,UNIT_STATE_LIFE)+MR3)set SFI=nullset g=nullendfunctionfunction Q44 takes nothing returns booleanif GetSpellAbilityId()==ZXI thencall Q34()endifreturn falseendfunctionfunction L61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Q44))set t=nullendfunctionfunction Q54 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real AB3=(LoadReal(LY,(S5I),(680)))local integer Q64=GetUnitAbilityLevel(P7I,1093679184)call FlushChildHashtable(LY,(S5I))call S0I(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",P8I,"origin"))if Q64>0 thenset ZYI=truecall P6I(P7I,P8I,1,AB3*(GetUnitState(P8I,UNIT_STATE_MAX_LIFE)-GetUnitState(P8I,UNIT_STATE_LIFE)))set ZYI=falseelsecall P6I(P7I,P8I,1,AB3*(GetUnitState(P8I,UNIT_STATE_MAX_LIFE)-GetUnitState(P8I,UNIT_STATE_LIFE)))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction Q74 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer Q84=GetUnitAbilityLevel(P7I,1093678647)local integer Q94=GetUnitAbilityLevel(P7I,1093679184)local real AB3if Q84==1 thenset AB3=0.4elseif Q84==2 or Q94==1 thenset AB3=0.6elseif Q84==3 or Q94==2 thenset AB3=0.9elseif Q94==3 thenset AB3=1.2endifcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(680),((AB3)*1.0))call TriggerRegisterTimerEvent(t,1.5,false)call TriggerAddCondition(t,Condition(function Q54))call SCI(P8I,4333,1.5)if Q94>0 thencall SCI(P8I,4418,1.51)endifset ZJI=P7Iset t=nullset P7I=nullset P8I=nullendfunctionfunction QA4 takes nothing returns booleanif(GetSpellAbilityId()==1093678647 or GetSpellAbilityId()==1093679184)and NNI(GetSpellTargetUnit())==false thencall Q74()endifreturn falseendfunctionfunction L71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QA4))set t=nullendfunctionfunction QB4 takes nothing returns nothinglocal location llocal unit SFI=GetTriggerUnit()local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real alocal real x2local real y2local integer SUI=GetUnitAbilityLevel(SFI,1093687351)local real PAIlocal real DC1local unit DT1=nullif GetSpellTargetUnit()!=null thenset l=GetUnitLoc(GetSpellTargetUnit())elseset l=GetSpellTargetLoc()endifset x2=GetLocationX(l)set y2=GetLocationY(l)set a=Atan2(y2-y1,x2-x1)set x2=x1+700*Cos(a)set y2=y1+700*Sin(a)if SUI==1 thenset PAI=80set DC1=0.75elseif SUI==2 thenset PAI=140set DC1=1.25elseif SUI==3 thenset PAI=200set DC1=1.75elseif SUI==4 thenset PAI=260set DC1=2.25endifif GetSpellTargetUnit()!=null and NNI(GetSpellTargetUnit())thenset DT1=GetSpellTargetUnit()endifcall DS1(SFI,DT1,PAI,DC1,0.52,x1,y1,x2,y2,150,null,true,1600)call RemoveLocation(l)set l=nullset SFI=nullendfunctionfunction QC4 takes nothing returns booleanif GetSpellAbilityId()==1093687351 thencall QB4()endifreturn falseendfunctionfunction TO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QC4))call Q1I(1093687350)set t=nullendfunctionfunction QD4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093748789)local real r=GetHeroInt(P8I,true)*(3+0.5*SUI)local integer ZCO=IMinBJ(R2I(r),R2I(GetUnitState(P8I,UNIT_STATE_MANA)))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)-ZCO)call P6I(P7I,P8I,1,ZCO)call AL1("MBUR",P7I,P8I,1,1,1,1,0.5)call UYI("-"+I2S(ZCO),3,P8I,0.023,82,82,255,255)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl",P8I,"chest"))set P7I=nullset P8I=nullendfunctionfunction QE4 takes nothing returns booleanif GetSpellAbilityId()==1093748789 and NNI(GetSpellTargetUnit())==false thencall QD4()endifreturn falseendfunctionfunction T21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QE4))set t=nullendfunctionfunction QF4 takes nothing returns nothingcall IssueTargetOrder(ZKI,"soulburn",GetEnumUnit())endfunctionfunction QG4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)local group g=NTI()set ZKI=I01call IA1(I01,1093748551)call GroupEnumUnitsInRange(g,x,y,325,Condition(function C51))call ForGroup(g,function QF4)call NSI(g)call KillUnit(P7I)call SetUnitAnimation(P7I,"death")call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl",x,y))set P7I=nullset I01=nullset g=nullendfunctionfunction QH4 takes nothing returns booleanif GetSpellAbilityId()==1093748808 thencall QG4()endifreturn falseendfunctionfunction T31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QH4))call Q1I(1093748551)set t=nullendfunctionfunction QZ4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093815119)local group PR2=(LoadGroupHandle(LY,(S5I),(22)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>0 and IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),GetOwningPlayer(P7I))==true thenif T2I(GetOwningPlayer(GetEventDamageSource()))and RSI(GetEventDamage())thenset P8I=GetEventDamageSource()if GetUnitAbilityLevel(P8I,1093678162)>0 thenset P8I=K1[GetPlayerId(GetOwningPlayer(P8I))]endifif IsUnitInGroup(P8I,PR2)==false thencall GroupAddUnit(PR2,P8I)call QGI(P7I,GetEventDamage())if IC1(P8I)==false thencall DD1(P7I,P8I,0.6*SUI)call P6I(P7I,P8I,3,GetEventDamage())endifendifendifendifelsecall UnitRemoveAbility(P7I,1093815120)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction QV4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,2.25,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function QZ4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call IA1(P7I,1093815120)set P7I=nullset t=nullendfunctionfunction QW4 takes nothing returns booleanif GetSpellAbilityId()==1093815119 thencall QV4()endifreturn falseendfunctionfunction T41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QW4))set t=nullendfunctionconstant function Shadowraze_RawCode1 takes nothing returns integerreturn 1093682521endfunctionconstant function Shadowraze_RawCode2 takes nothing returns integerreturn 1093682760endfunctionconstant function Shadowraze_RawCode3 takes nothing returns integerreturn 1093682736endfunctionconstant function Shadowraze_Area takes nothing returns integerreturn 275endfunctionfunction QX4 takes nothing returns booleanreturn GetSpellAbilityId()==(1093682521)or GetSpellAbilityId()==(1093682760)or GetSpellAbilityId()==(1093682736)endfunctionfunction QY4 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1endfunctionfunction QJ4 takes nothing returns nothingcall UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),25+75*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH,WEAPON_TYPE_WHOKNOWS)endfunctionfunction QK4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01local group Z51=NTI()local boolexpr QL1=Condition(function QY4)local real MAI=GetUnitFacing(SFI)local real xlocal real yif GetSpellAbilityId()==(1093682521)thenset x=GetUnitX(SFI)+200*Cos(MAI*bj_DEGTORAD)set y=GetUnitY(SFI)+200*Sin(MAI*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(SFI),1697656886,x,y,0)call UnitApplyTimedLife(I01,1112820806,2)call GroupEnumUnitsInRange(Z51,x,y,(275),QL1)call ForGroup(Z51,function QJ4)call GroupClear(Z51)endifif GetSpellAbilityId()==(1093682760)thenset x=GetUnitX(SFI)+450*Cos(MAI*bj_DEGTORAD)set y=GetUnitY(SFI)+450*Sin(MAI*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(SFI),1697656886,x,y,0)call UnitApplyTimedLife(I01,1112820806,2)call GroupEnumUnitsInRange(Z51,x,y,(275),QL1)call ForGroup(Z51,function QJ4)call GroupClear(Z51)endifif GetSpellAbilityId()==(1093682736)thenset x=GetUnitX(SFI)+700*Cos(MAI*bj_DEGTORAD)set y=GetUnitY(SFI)+700*Sin(MAI*bj_DEGTORAD)set I01=CreateUnit(GetOwningPlayer(SFI),1697656886,x,y,0)call UnitApplyTimedLife(I01,1112820806,2)call GroupEnumUnitsInRange(Z51,x,y,(275),QL1)call ForGroup(Z51,function QJ4)call GroupClear(Z51)endifcall NSI(Z51)endfunctionfunction LA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function QK4)call TriggerAddCondition(t,Condition(function QX4))endfunctionfunction QL4 takes nothing returns nothingif(GetLearnedSkill()==1093682521)thenif(GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit())==1)thencall UnitAddAbility(GetTriggerUnit(),1093682736)call UnitAddAbility(GetTriggerUnit(),1093682760)elsecall SetUnitAbilityLevelSwapped(1093682736,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))call SetUnitAbilityLevelSwapped(1093682760,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))endifendifif(GetLearnedSkill()==1093681746)thenif(GetUnitAbilityLevelSwapped(1093681746,GetTriggerUnit())==1)thencall UnitAddAbility(GetTriggerUnit(),1093682001)endifendifendfunctionfunction NL takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddAction(t,function QL4)endfunctionfunction QM4 takes nothing returns booleanreturn GetSpellAbilityId()==1093810506 or GetSpellAbilityId()==1093750096endfunctionfunction QN4 takes unit PKI,integer QS4 returns nothinglocal integer QT4=QS4local integer QR4local integer THIlocal location BFO=GetUnitLoc(GetTriggerUnit())local location OM3local integer SUI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())if SUI==0 thenreturnendifset QT4=QT4/2set QR4=1set THI=QT4loopexitwhen QR4>THIset OM3=M7I(BFO,50.00,(I2R(QR4)*(360/QT4)))call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(PKI),BFO,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093683271)call SetUnitAbilityLevelSwapped(1093683271,bj_lastCreatedUnit,SUI)call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)call IssuePointOrderLoc(bj_lastCreatedUnit,"carrionswarm",OM3)call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,1097625443)call RemoveLocation(OM3)set QR4=QR4+1endloopcall RemoveLocation(BFO)endfunctionfunction QP4 takes nothing returns nothinglocal integer QT4=(LoadInteger(LY,(GetHandleId(GetTriggerUnit())),(710)))local unit PKI=GetTriggerUnit()call QN4(PKI,QT4)set PKI=nullendfunctionfunction LB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QM4))call TriggerAddAction(t,function QP4)endfunctionfunction QQ4 takes nothing returns booleanreturn GetSpellAbilityId()==1093810506 or GetSpellAbilityId()==1093750096endfunctionfunction QU4 takes nothing returns booleanif(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==true)thenreturn falseendifif(GetUnitAbilityLevelSwapped(1093678162,GetFilterUnit())==1)thenreturn falseendifif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn falseendifif(GetUnitTypeId(GetFilterUnit())==1865429043)thenreturn falseendifif(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==false)thenreturn falseendifif(GetTriggerUnit()==GetFilterUnit())thenreturn falseendifif(IsUnitVisible(GetFilterUnit(),GetTriggerPlayer())==false)thenreturn falseendifreturn trueendfunctionfunction UI4 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local location BFO=GetUnitLoc(PKI)local integer SUI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())if SUI==0 thenset SUI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())endifcall CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),BFO,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093683272)call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,SUI)call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,1097625443)call RemoveLocation(BFO)endfunctionfunction U14 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local location BFO=GetUnitLoc(PKI)local integer SUI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())if SUI==0 thenset SUI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())endifcall CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),BFO,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093683272)call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,SUI)call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,1097625443)call RemoveLocation(BFO)endfunctionfunction UO4 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local location BFO=GetUnitLoc(PKI)local integer SUI=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())if SUI==0 thenset SUI=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())endifcall CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),BFO,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093683272)call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,SUI)call UnitApplyTimedLifeBJ(2.00,1112820806,bj_lastCreatedUnit)call IssueTargetOrder(bj_lastCreatedUnit,"cripple",GetEnumUnit())call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitInvulnerable(bj_lastCreatedUnit,true)call UnitAddAbility(bj_lastCreatedUnit,1097625443)call RemoveLocation(BFO)endfunctionfunction U24 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetTriggerUnit())local unit PKI=GetTriggerUnit()local group Z51set Z51=NTI()call GroupEnumUnitsInRangeOfLoc(Z51,BFO,700,Condition(function QU4))call ForGroup(Z51,function UI4)call NSI(Z51)set Z51=NTI()call GroupEnumUnitsInRangeOfLoc(Z51,BFO,400,Condition(function QU4))call ForGroup(Z51,function U14)call NSI(Z51)set Z51=NTI()call GroupEnumUnitsInRangeOfLoc(Z51,BFO,200,Condition(function QU4))call ForGroup(Z51,function UO4)call NSI(Z51)call RemoveLocation(BFO)endfunctionfunction LC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QQ4))call TriggerAddAction(t,function U24)endfunctionfunction U34 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=HKlocal unit P8I=GKlocal integer QT4=GetUnitAbilityLevel(P7I,1093682001)local integer U44local integer SUI=GetUnitAbilityLevel(P7I,1093681746)if SUI==1 thenset U44=15elseif SUI==2 thenset U44=22elseif SUI==3 thenset U44=29elseset U44=36endifset U44=U44+1if IsUnitType(P8I,UNIT_TYPE_HERO)==false thenset QT4=QT4+1elseset QT4=QT4+12endifset QT4=IMinBJ(U44,QT4)call SetUnitAbilityLevel(P7I,1093682001,QT4)call SaveInteger(LY,(GetHandleId(P7I)),(710),(QT4))set P7I=nullendfunctionfunction U54 takes nothing returns nothinglocal integer QT4local integer SUIlocal integer U44local trigger tlocal integer S5Ilocal unit P7I=GetKillingUnit()if GetUnitTypeId(P7I)==1697656899 thenset P7I=K1[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]endifset QT4=GetUnitAbilityLevel(P7I,1093682001)set SUI=GetUnitAbilityLevel(P7I,1093681746)if SUI==1 thenset U44=15elseif SUI==2 thenset U44=22elseif SUI==3 thenset U44=29elseset U44=36endifif QT4<=U44 thenset t=IJ1(GetTriggerUnit(),P7I,1747993426,"U34",500,false)set S5I=GetHandleId(t)set t=nullcall DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))endifendfunctionfunction U64 takes nothing returns nothinglocal integer U74=(LoadInteger(LY,(GetHandleId(GetTriggerUnit())),(710)))call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(710),(R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*0.5)+1))call SetUnitAbilityLevel(GetTriggerUnit(),1093682001,R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*0.5)+1)call QN4(GetTriggerUnit(),U74-(LoadInteger(LY,(GetHandleId(GetTriggerUnit())),(710))))endfunctionfunction U84 takes nothing returns booleanif GetUnitAbilityLevel(GetKillingUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false thencall U54()elseif GetUnitAbilityLevel(K1[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],1093681746)>0 and GetUnitTypeId(GetKillingUnit())==1697656899 thencall U54()endifif GetUnitAbilityLevel(GetTriggerUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false thencall U64()endifreturn falseendfunctionfunction U94 takes nothing returns booleanlocal unit SFI=K1[GetPlayerId(GetTriggerPlayer())]local integer UA4=GetUnitAbilityLevel(SFI,1093682001)-1local integer UB4=0local integer SUI=GetUnitAbilityLevel(SFI,1093681746)if SUI==1 thenset UB4=12elseif SUI==2 thenset UB4=20elseif SUI==3 thenset UB4=28elseif SUI==4 thenset UB4=36endifset UA4=IMaxBJ(IMinBJ(UA4,UB4),0)if GetUnitTypeId(SFI)==1315334514 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848658757)+" "+I2S(UA4)+"/"+I2S(UB4))endifreturn falseendfunctionfunction L91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function U84))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function U94))set t=nullendfunctionfunction UC4 takes nothing returns booleanreturn GetSpellAbilityId()==1093677640endfunctionfunction UD4 takes nothing returns nothinglocal unit I01if(PLI()==false)thenset I01=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)call IA1(I01,1093677650)call IssueTargetOrder(I01,"slow",GetSpellTargetUnit())elseset I01=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)call IA1(I01,1093748785)call IssueTargetOrder(I01,"slow",GetSpellTargetUnit())endifendfunctionfunction LE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UC4))call TriggerAddAction(t,function UD4)endfunctionfunction UE4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call ResetUnitAnimation(P7I)call RemoveUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)set P7I=nullset I01=nullset t=nullreturn falseendfunctionfunction UF4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1966092617,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function UE4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SetUnitVertexColorBJ(I01,0,0,0,75)call SetUnitAnimation(I01,"spell third")set P7I=nullset I01=nullset t=nullendfunctionfunction UG4 takes nothing returns booleanif GetSpellAbilityId()==1093679171 and GetUnitAbilityLevel(GetTriggerUnit(),1093679171)<5 thencall UF4()endifreturn falseendfunctionfunction LF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function UG4))set t=nullendfunctionfunction UH4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction UZ4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer DC1local integer SUI=GetUnitAbilityLevel(P7I,1093677899)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747248)endifif SUI==1 thenset DC1=25elseif SUI==2 thenset DC1=50elseif SUI==3 thenset DC1=80endifcall TriggerRegisterTimerEvent(t,DC1,false)call TriggerAddCondition(t,Condition(function UH4))set P7I=nullset t=nullendfunctionfunction UV4 takes nothing returns booleanif GetSpellAbilityId()==1093677899 or GetSpellAbilityId()==1093747248 thencall UZ4()endifreturn falseendfunctionfunction LG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function UV4))set t=nullendfunctionfunction UW4 takes nothing returns booleanreturn(GetLearnedSkill()==1093679158 or GetLearnedSkill()==1093679173)and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction UX4 takes nothing returns booleanlocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit UY4=(LoadUnitHandle(LY,(S5I),(304)))local unit XO3=(LoadUnitHandle(LY,(S5I),(305)))if UY4==null or IC1(UY4)or PLI()or ES1(UY4,FR0[K30])==null thencall ShowUnit(XO3,false)elsecall ShowUnit(XO3,true)call SetUnitX(XO3,GetUnitX(UY4))call SetUnitY(XO3,GetUnitY(UY4))endifif GetOwningPlayer(XO3)!=GetOwningPlayer(UY4)thencall SetUnitOwner(XO3,GetOwningPlayer(UY4),true)endifreturn falseendfunctionfunction UJ4 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit UY4=(LoadUnitHandle(LY,(S5I),(304)))if UY4!=null and PLI()and IC1(UY4)==false thencall UnitRemoveAbility(UY4,1093742902)call UnitRemoveAbility(UY4,1093742903)call SetUnitAbilityLevel(UY4,1395667009,5)call SetUnitAbilityLevel(UY4,1093679171,5)elseif UY4!=null and PLI()==false and IC1(UY4)==false thencall IA1(UY4,1093742902)call IA1(UY4,1093742903)call SetUnitAbilityLevel(UY4,1395667009,GetUnitAbilityLevel(UY4,1093679158))call SetUnitAbilityLevel(UY4,1093679171,GetUnitAbilityLevel(UY4,1093679173))endifendfunctionfunction UK4 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggerUnit())local trigger tif((LoadBoolean(LY,(S5I),(306)))==false)thencall SaveBoolean(LY,(S5I),(306),(true))set t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,2.00)call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.00)call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.00)call TriggerAddAction(t,function UJ4)call SaveUnitHandle(LY,(GetHandleId(t)),(304),(GetTriggerUnit()))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function UX4))call SaveUnitHandle(LY,(S5I),(304),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(305),(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1865429313,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)))endifif(GetLearnedSkill()==1093679158)thencall IA1(GetTriggerUnit(),1395667009)if(PLI())thencall SetUnitAbilityLevel(GetTriggerUnit(),1395667009,5)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1395667009,GetUnitAbilityLevel(GetTriggerUnit(),1093679158))endifendifif(GetLearnedSkill()==1093679173)thencall UnitAddAbility(GetTriggerUnit(),1093679171)if(PLI())thencall SetUnitAbilityLevel(GetTriggerUnit(),1093679171,5)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1093679171,GetUnitAbilityLevel(GetTriggerUnit(),1093679173))endifendifendfunctionfunction LD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function UW4))call TriggerAddAction(t,function UK4)endfunctionfunction UL4 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal integer SUI=(LoadInteger(LY,(S5I),(5)))local real PAI=20+SUI*40local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer UM4=GetUnitAbilityLevel(P7I,1093677905)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset PAI=PAI/2endifif UM4>0 and GetRandomReal(0,100)<15 thenset PAI=PAI*(1.2+1.1*UM4)call UYI(I2S(R2I(PAI))+"!",3,P8I,0.02,255,0,0,255)endifcall IA1(I01,1093687628)call SetUnitAbilityLevel(I01,1093687628,SUI)call IssueTargetOrder(I01,"slow",P8I)call P6I(P7I,P8I,3,PAI)set P7I=nullset P8I=nullset I01=nullendfunctionfunction UN4 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=IJ1(SFI,P8I,1747988784,"UL4",1200,true)local integer S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(SFI,1093687629)))set SFI=nullset P8I=nullset t=nullendfunctionfunction US4 takes nothing returns booleanif GetSpellAbilityId()==1093687629 and NNI(GetSpellTargetUnit())==false thencall UN4()endifreturn falseendfunctionfunction LZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function US4))set t=nullendfunctionfunction UT4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,1093747535)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetTriggerUnit()!=P8I and GetAttacker()==P7I thencall UnitRemoveAbility(P7I,1093747535)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerUnit()==P8I and GetAttacker()==P7I thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==4 thencall UnitRemoveAbility(P7I,1093747535)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifelsecall UnitRemoveAbility(P7I,1093747535)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction UR4 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093685324)local trigger tlocal integer S5Icall DestroyEffect(AddSpecialEffect("war3mapImported\\PhantomStrike.mdx",GetUnitX(P7I),GetUnitY(P7I)))call SetUnitX(P7I,GetUnitX(P8I))call SetUnitY(P7I,GetUnitY(P8I))if IsUnitAlly(P7I,GetOwningPlayer(P8I))==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call IA1(P7I,1093747535)call IssueTargetOrder(P7I,"attack",P8I)call TriggerRegisterTimerEvent(t,3,false)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UT4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))endifset P7I=nullset P8I=nullset t=nullendfunctionfunction UP4 takes nothing returns booleanif GetSpellAbilityId()==1093685324 thencall UR4()endifreturn falseendfunctionfunction LV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UP4))set t=nullendfunctionfunction UQ4 takes unit P7I,boolean SG2 returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093677904)if SG2==false thencall UnitRemoveAbility(P7I,1093743430)call UnitRemoveAbility(P7I,1110458674)elsecall IA1(P7I,1093743430)endifendfunctionfunction UU4 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))local boolean I05=(LoadBoolean(LY,(S5I),(674)))set NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if P7I!=null and IC1(P7I)==false and GetUnitAbilityLevel(P7I,1093677904)>0 thenset GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1625,Condition(function CB1))if FirstOfGroup(g)!=null thenif I05==true and NPI>7 thenset I05=falsecall SaveBoolean(LY,(S5I),(674),(I05))set NPI=0call SaveInteger(LY,(S5I),(34),(NPI))endifif I05==false thenset NPI=0call SaveInteger(LY,(S5I),(34),(NPI))call SaveInteger(LY,(GetHandleId((P7I))),((4302)),(2))call UQ4(P7I,false)call SetUnitVertexColorBJ(P7I,100,100,100,0)if GetUnitAbilityLevel(P7I,1093808211)==0 thencall UnitSetUsesAltIcon(P7I,false)endifendifelseif I05==false and NPI>7 thenset I05=trueset NPI=0call SaveBoolean(LY,(S5I),(674),(I05))call SaveInteger(LY,(S5I),(34),(NPI))endifif I05==true thenset NPI=0call SaveInteger(LY,(S5I),(34),(NPI))call SaveInteger(LY,(GetHandleId((P7I))),((4302)),(1))call UQ4(P7I,true)call SetUnitVertexColorBJ(P7I,100,100,100,75)if IsPlayerEnemy(GetOwningPlayer(P7I),GetLocalPlayer())==true and P0I(GetLocalPlayer())==false thencall UnitSetUsesAltIcon(P7I,true)elsecall UnitSetUsesAltIcon(P7I,false)endifendifendifcall NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction II5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function UU4))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(0))call SaveBoolean(LY,(S5I),(674),(false))set t=nullset P7I=nullendfunctionfunction I15 takes nothing returns booleanif GetLearnedSkill()==1093677904 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677904)==1 thencall II5()endifreturn falseendfunctionfunction LH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function I15))set t=nullendfunctionfunction IO5 takes nothing returns nothinglocal unit I01if IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())set I01=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call IA1(I01,1093685833)call SetUnitAbilityLevel(I01,1093685833,GetUnitAbilityLevel(ZNI,1093685825))call IssueTargetOrder(I01,"ensnare",GetEnumUnit())call P6I(ZNI,GetEnumUnit(),1,100)endifset I01=nullendfunctionfunction I25 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer ilocal group g=(LoadGroupHandle(LY,(S5I),(22)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group DY1=NTI()local unit PKI=(LoadUnitHandle(LY,(S5I),(221)))set GK=PKIset ZNI=PKIcall GroupEnumUnitsInRange(DY1,x,y,300,Condition(function CA1))set XK=gcall ForGroup(DY1,function IO5)call NSI(DY1)if GetTriggerEvalCount(t)>ZLI*10 thenset i=1loopexitwhen i>16call DestroyEffect((LoadEffectHandle(LY,(S5I),(2700+i))))set i=i+1endloopcall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset g=nullset DY1=nullset PKI=nullreturn falseendfunctionfunction I35 takes nothing returns nothinglocal integer i=1local location l=GetSpellTargetLoc()local real I45=GetLocationX(l)local real I55=GetLocationY(l)local real xlocal real ylocal integer JF2=16local string fx="Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl"local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()call IO1(EC,I45,I55)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function I25))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveUnitHandle(LY,(S5I),(221),(GetTriggerUnit()))call SaveReal(LY,(S5I),(6),((I45)*1.0))call SaveReal(LY,(S5I),(7),((I55)*1.0))loopexitwhen i>JF2set x=I45+ZMI*Cos(i*360/JF2*bj_DEGTORAD)set y=I55+ZMI*Sin(i*360/JF2*bj_DEGTORAD)call SaveEffectHandle(LY,(S5I),(2700+i),(AddSpecialEffect(fx,x,y)))if i==1 or i==5 or i==9 or i==13 thenset x=I45+275*Cos(i*360/JF2*bj_DEGTORAD)set y=I55+275*Sin(i*360/JF2*bj_DEGTORAD)endifset i=i+1endloopset t=nullset g=nullendfunctionfunction I65 takes nothing returns booleanif GetSpellAbilityId()==1093685825 thencall I35()endifreturn falseendfunctionfunction S41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function I65))set t=nullendfunctionfunction I75 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(393)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer R2O=90local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815618 thencall KillUnit(I01)call S0I(t)call FlushChildHashtable(LY,(S5I))elseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))endifif SUI==1 thenset R2O=160elseif SUI==2 thenset R2O=120endifcall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))if NPI>R2O thencall KillUnit(I01)call S0I(t)call FlushChildHashtable(LY,(S5I))elseif NPI>30 thencall UnitRemoveAbility(I01,1097625443)call ShowUnit(I01,true)call IA1(I01,1097625443)endifset t=nullset I01=nullset P7I=nullreturn falseendfunctionfunction I85 takes nothing returns nothingcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))call SCI(GetEnumUnit(),4406,1)call SetUnitPosition(GetEnumUnit(),AK,BK)call PanCameraToTimedForPlayer(GetOwningPlayer(GetEnumUnit()),AK,BK,0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))endfunctionfunction I95 takes unit P7I,unit P8I returns nothinglocal group g=NTI()call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(P7I),GetUnitY(P7I)))call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(P8I),GetUnitY(P8I)))set AK=GetUnitX(P8I)set BK=GetUnitY(P8I)set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),475,Condition(function CU1))call ForGroup(g,function I85)call NSI(g)set g=nullendfunctionfunction IA5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))if GetTriggerEventId()==EVENT_UNIT_DEATH or P8I==null or IC1(P8I)thencall S0I(t)call FlushChildHashtable(LY,(S5I))call UnitRemoveType(P8I,UNIT_TYPE_PEON)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093685808,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815618,false)call PZI(GetOwningPlayer(P7I),GetObjectName(1848652614))elseif P7I==null or IC1(P7I)thencall S0I(t)call FlushChildHashtable(LY,(S5I))call UnitRemoveType(P8I,UNIT_TYPE_PEON)call PZI(GetOwningPlayer(P7I),GetObjectName(1848652615))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093685808,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815618,false)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093815618 thencall S0I(t)call FlushChildHashtable(LY,(S5I))call UnitRemoveType(P8I,UNIT_TYPE_PEON)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093685808,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815618,false)endifelsecall S0I(t)call FlushChildHashtable(LY,(S5I))call UnitRemoveType(P8I,UNIT_TYPE_PEON)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093685808,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815618,false)call I95(P7I,P8I)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IB5 takes nothing returns booleanlocal real dif IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false or GetUnitAbilityLevel(GetFilterUnit(),1093678162)>0 or GetOwningPlayer(GetFilterUnit())==Player(15)thenreturn falseendifif(IC1(GetFilterUnit()))thenreturn falseendifif IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)or(UJ>0 and C92(GetFilterUnit()))thenset d=QNI(BK,CK,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))if d<AK thenset AK=dset GK=GetFilterUnit()endifendifreturn falseendfunctionfunction IC5 takes unit P7I returns unitlocal location llocal group glocal real xlocal real yset l=GetSpellTargetLoc()set x=GetLocationX(l)set y=GetLocationY(l)set g=NTI()set UJ=GetUnitAbilityLevel(P7I,1093685808)set GK=nullset AK=9999set BK=xset CK=ycall GroupEnumUnitsInRange(g,x,y,4000,Condition(function IB5))call NSI(g)call RemoveLocation(l)set l=nullset g=nullreturn GKendfunctionfunction ID5 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()local real xlocal real ylocal unit uif P8I==null thenset P8I=IC5(P7I)endifif P8I==null thencall PZI(GetOwningPlayer(P7I),GetObjectName(1848652616))returnendifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093685808,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093815618,true)call IA1(P7I,1093815618)call TriggerRegisterTimerEvent(t,6-GetUnitAbilityLevel(P7I,1093685808),false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IA5))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdl",P8I,"overhead")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call UnitAddType(P8I,UNIT_TYPE_PEON)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,.03,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function I75))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(P7I,1093685808)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set u=CreateUnit(GetOwningPlayer(P7I),1747990840,GetUnitX(P7I),GetUnitY(P7I),0)call SaveUnitHandle(LY,(S5I),(393),(u))call ShowUnit(u,false)set t=nullset P8I=nullendfunctionfunction IE5 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit SFI=GetTriggerUnit()if P8I!=null thenif IsUnitAlly(P8I,GetOwningPlayer(SFI))==false thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848652849))elseif GetUnitAbilityLevel(SFI,1093685808)>0 and C92(P8I)==false thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848652849))endifendifif P8I==null thenset P8I=IC5(SFI)endifif P8I==null thencall PJI(SFI)call PZI(GetOwningPlayer(SFI),GetObjectName(1848652848))endifset P8I=nullset SFI=nullendfunctionfunction IF5 takes nothing returns booleanif GetSpellAbilityId()==1093685808 thencall IE5()endifreturn falseendfunctionfunction IG5 takes nothing returns booleanif GetSpellAbilityId()==1093685808 thencall ID5(GetTriggerUnit())endifreturn falseendfunctionfunction S21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function IF5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IG5))set t=nullcall A51(1747990836)call A51(1747990837)call A51(1747990838)endfunctionfunction IH5 takes nothing returns nothingcall P6I(ZTI,GetEnumUnit(),1,ZSI)endfunctionfunction IZ5 takes nothing returns nothingcall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+ZSI*0.5)endfunctionfunction IV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=NTI()local real r1=600local real r2=600local unit IW5set x=GetUnitX(SFI)set y=GetUnitY(SFI)call GroupEnumUnitsInRange(g,x,y,r1,Condition(function D91))set IW5=FirstOfGroup(g)call NSI(g)if IW5==null thenif(LoadBoolean(LY,(S5I),(307)))==true and(LoadBoolean(LY,(S5I),(308)))==true thencall UnitRemoveAbility(SFI,1093810227)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif(LoadBoolean(LY,(S5I),(307)))==false thencall SaveBoolean(LY,(S5I),(307),(true))elsecall SaveBoolean(LY,(S5I),(308),(true))endifendifelseset x=GetUnitX(IW5)set y=GetUnitY(IW5)call SaveBoolean(LY,(S5I),(307),(false))call SaveBoolean(LY,(S5I),(308),(false))call FlushChildHashtable(LY,(GetHandleId(IW5)))call DestroyEffect(AddSpecialEffect("war3mapImported\\CorpseExplosion.mdx",x,y))call RemoveUnit(IW5)set g=NTI()set GK=SFIset ZTI=SFIset ZSI=20*GetUnitAbilityLevel(SFI,1093810232)call GroupEnumUnitsInRange(g,x,y,r2,Condition(function CA1))call ForGroup(g,function IH5)set GK=SFIcall GroupEnumUnitsInRange(g,x,y,r2,Condition(function CT1))call ForGroup(g,function IZ5)call NSI(g)endifset g=nullset SFI=nullset IW5=nullset t=nullreturn falseendfunctionfunction IX5 takes nothing returns nothinglocal real x=GetUnitX(GetTriggerUnit())local real y=GetUnitY(GetTriggerUnit())local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IO1(QF,x,y)call TriggerRegisterTimerEvent(t,1.5,true)call TriggerAddCondition(t,Condition(function IV5))call IA1(GetTriggerUnit(),1093810227)call SaveUnitHandle(LY,(S5I),(14),(GetTriggerUnit()))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveBoolean(LY,(S5I),(307),(false))call SaveBoolean(LY,(S5I),(308),(false))set t=nullendfunctionfunction IY5 takes nothing returns booleanif GetSpellAbilityId()==1093810232 thencall IX5()endifreturn falseendfunctionfunction S31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IY5))set t=nullendfunctionfunction IJ5 takes nothing returns nothingendfunctionfunction IK5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group g=NTI()set GK=P7Iset ZRI=GetUnitAbilityLevel(P7I,1093677385)*10+10call GroupEnumUnitsInRange(g,GetUnitX(I01),GetUnitY(I01),475,Condition(function CT1))call ForGroup(g,function IJ5)call NSI(g)if GetTriggerEvalCount(t)==5 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset I01=nullreturn falseendfunctionfunction IL5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local integer SUI=GetUnitAbilityLevel(P7I,1093677385)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call TriggerAddCondition(t,Condition(function IK5))call TriggerRegisterTimerEvent(t,1,true)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call IA1(I01,1093809714)call SetUnitAbilityLevel(I01,1093809714,SUI)call IssuePointOrder(I01,"rainoffire",x,y)set P7I=nullset I01=nullendfunctionfunction IM5 takes nothing returns booleanif GetSpellAbilityId()==1093677385 thencall IL5()endifreturn falseendfunctionfunction S51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IM5))set t=nullendfunctionfunction IN5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093809233)local integer JV3local real IS5local real IT5=3+SUIif GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>4*IT5 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093809242)call UnitRemoveAbility(P8I,1093809456)call UnitRemoveAbility(P8I,1093809240)call UnitRemoveAbility(P8I,1093809457)call UnitRemoveAbility(P8I,1093809241)call UnitRemoveAbility(P8I,1110459720)elseset IS5=100*GetUnitState(P8I,UNIT_STATE_LIFE)/GetUnitState(P8I,UNIT_STATE_MAX_LIFE)if IS5<20 thenset JV3=5elseif IS5<40 thenset JV3=4elseif IS5<60 thenset JV3=3elseif IS5<80 thenset JV3=2elseset JV3=1endifif JV3==1 thenif GetUnitAbilityLevel(P8I,1093809242)==0 thencall UnitRemoveAbility(P8I,1093809456)call UnitRemoveAbility(P8I,1093809240)call UnitRemoveAbility(P8I,1093809457)call UnitRemoveAbility(P8I,1093809241)call UnitRemoveAbility(P8I,1110459720)call UnitAddAbility(P8I,1093809242)endifelseif JV3==2 thenif GetUnitAbilityLevel(P8I,1093809456)==0 thencall UnitRemoveAbility(P8I,1093809242)call UnitRemoveAbility(P8I,1093809240)call UnitRemoveAbility(P8I,1093809457)call UnitRemoveAbility(P8I,1093809241)call UnitRemoveAbility(P8I,1110459720)call UnitAddAbility(P8I,1093809456)endifelseif JV3==3 thenif GetUnitAbilityLevel(P8I,1093809240)==0 thencall UnitRemoveAbility(P8I,1093809242)call UnitRemoveAbility(P8I,1093809456)call UnitRemoveAbility(P8I,1093809457)call UnitRemoveAbility(P8I,1093809241)call UnitRemoveAbility(P8I,1110459720)call UnitAddAbility(P8I,1093809240)endifelseif JV3==4 thenif GetUnitAbilityLevel(P8I,1093809457)==0 thencall UnitRemoveAbility(P8I,1093809242)call UnitRemoveAbility(P8I,1093809456)call UnitRemoveAbility(P8I,1093809240)call UnitRemoveAbility(P8I,1093809241)call UnitRemoveAbility(P8I,1110459720)call UnitAddAbility(P8I,1093809457)endifelseif JV3==5 thenif GetUnitAbilityLevel(P8I,1093809241)==0 thencall UnitRemoveAbility(P8I,1093809242)call UnitRemoveAbility(P8I,1093809456)call UnitRemoveAbility(P8I,1093809240)call UnitRemoveAbility(P8I,1093809457)call UnitRemoveAbility(P8I,1110459720)call UnitAddAbility(P8I,1093809241)endifendifcall P6I(P7I,P8I,1,0.01*4*0.25*GetUnitState(P8I,UNIT_STATE_MAX_LIFE))if ModuloInteger(GetTriggerEvalCount(t),4)==0 thencall CreateCorpse(GetOwningPlayer(P7I),1969711215,GetUnitX(P8I),GetUnitY(P8I),0)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IR5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093809233)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\EntanglingBonesTarget.mdx",P8I,"chest")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function IN5))call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809242,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809456,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809240,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809457,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809241,false)set P7I=nullset P8I=nullset t=nullendfunctionfunction IP5 takes nothing returns booleanif GetSpellAbilityId()==1093809233 and NNI(GetSpellTargetUnit())==false thencall IR5()endifreturn falseendfunctionfunction S61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IP5))set t=nullendfunctionfunction IQ5 takes unit P7I,integer IU5 returns nothingcall SaveInteger(LY,(GetHandleId(P7I)),(687),(IU5))call UnitRemoveAbility(P7I,1093809496)call UnitRemoveAbility(P7I,1093809497)call UnitRemoveAbility(P7I,1093809498)call UnitRemoveAbility(P7I,1093809492)call UnitRemoveAbility(P7I,1093809494)call UnitRemoveAbility(P7I,1093809493)call UnitRemoveAbility(P7I,1093809491)call UnitRemoveAbility(P7I,1093809490)call UnitRemoveAbility(P7I,1093809495)call UnitRemoveAbility(P7I,1093809712)call UnitRemoveAbility(P7I,1093809741)call UnitRemoveAbility(P7I,1093809740)call UnitRemoveAbility(P7I,1093809735)call UnitRemoveAbility(P7I,1093809736)call UnitRemoveAbility(P7I,1093809734)call UnitRemoveAbility(P7I,1093809733)call UnitRemoveAbility(P7I,1093809462)call UnitRemoveAbility(P7I,1093809737)call UnitRemoveAbility(P7I,1093809738)call UnitRemoveAbility(P7I,1093809739)call UnitRemoveAbility(P7I,1093809732)if IU5==0 thencall UnitAddAbility(P7I,1093809741)endifif IU5==1 thencall IA1(P7I,1093809496)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809496,false)call UnitAddAbility(P7I,1093809740)elseif IU5==2 thencall IA1(P7I,1093809497)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809497,false)call UnitAddAbility(P7I,1093809735)elseif IU5==3 thencall IA1(P7I,1093809498)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809498,false)call UnitAddAbility(P7I,1093809736)elseif IU5==4 thencall IA1(P7I,1093809492)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809492,false)call UnitAddAbility(P7I,1093809734)elseif IU5==5 thencall IA1(P7I,1093809494)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809494,false)call UnitAddAbility(P7I,1093809733)elseif IU5==6 thencall IA1(P7I,1093809493)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809493,false)call UnitAddAbility(P7I,1093809462)elseif IU5==7 thencall IA1(P7I,1093809491)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809491,false)call UnitAddAbility(P7I,1093809737)elseif IU5==8 thencall IA1(P7I,1093809490)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809490,false)call UnitAddAbility(P7I,1093809738)elseif IU5==9 thencall IA1(P7I,1093809495)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809495,false)call UnitAddAbility(P7I,1093809739)elseif IU5==10 thencall IA1(P7I,1093809712)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809712,false)call UnitAddAbility(P7I,1093809732)endifendfunctionfunction O05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer IU5=(LoadInteger(LY,(GetHandleId(P7I)),(687)))local group glocal unit IW5local integer SUI=GetUnitAbilityLevel(P7I,1093809713)local integer OI5=2+2*SUIif IU5<OI5 and IC1(P7I)==false thenset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),925,Condition(function D91))set IW5=FirstOfGroup(g)call NSI(g)if IW5!=null thenset IU5=IU5+1call IQ5(P7I,IU5)call IJ1((IW5),(P7I),1747993654,"CorpseCollector_FX_Nothing",400,false)call RemoveUnit(IW5)endifendifset t=nullset P7I=nullset IW5=nullreturn falseendfunctionfunction O15 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,4,true)call TriggerAddCondition(t,Condition(function O05))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction OO5 takes nothing returns nothingcall P6I(ZPI,GetEnumUnit(),1,ZQI)endfunctionfunction O25 takes unit P7I,integer SUI,real QJI,real QKI,integer IU5,boolean EB2 returns nothinglocal group g=NTI()set ZPI=P7Iset ZQI=30*IU5if EB2 thenset ZQI=ZQI+10*IU5endifset GK=P7Icall GroupEnumUnitsInRange(g,QJI,QKI,350,Condition(function CA1))call ForGroup(g,function OO5)call NSI(g)endfunctionfunction O35 takes unit P7I,real IO3,real I23 returns booleanlocal real QJI=(LoadReal(LY,(GetHandleId(P7I)),(690)))local real QKI=(LoadReal(LY,(GetHandleId(P7I)),(691)))if QJI==0 and QKI==0 thenreturn falseendifif QNI(IO3,I23,QJI,QKI)<425 thenreturn trueendifreturn falseendfunctionfunction O45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer IU5=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093809713)local integer i=1local unit I01local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real xlocal real ylocal real a=(LoadReal(LY,(S5I),(137)))local boolean EB2=(LoadBoolean(LY,(S5I),(688)))local boolean O55=(LoadBoolean(LY,(S5I),(689)))local real O65=(LoadReal(LY,(S5I),(549)))local real O75=(LoadReal(LY,(S5I),(567)))set O65=PTI(O65+10*Cos(a))set O75=PUI(O75+10*Sin(a))call SaveReal(LY,(S5I),(549),((O65)*1.0))call SaveReal(LY,(S5I),(567),((O75)*1.0))if EB2==false thenset EB2=O35(P7I,O65,O75)if EB2==true thencall SaveBoolean(LY,(S5I),(688),(EB2))endifendifif EB2 and O55==false thenset O55=truecall SaveBoolean(LY,(S5I),(689),(O55))loopexitwhen i>IU5set I01=(LoadUnitHandle(LY,(S5I),(393+i)))call SaveEffectHandle(LY,(S5I),(609+i),(AddSpecialEffectTarget("war3mapImported\\CorpseFire.mdx",I01,"origin")))set i=i+1endloopendifset i=1if QNI(O65,O75,QJI,QKI)<15 thenloopexitwhen i>IU5if EB2 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(609+i))))endifcall KillUnit((LoadUnitHandle(LY,(S5I),(393+i))))set i=i+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)call O25(P7I,SUI,QJI,QKI,IU5,EB2)elseloopexitwhen i>IU5set I01=(LoadUnitHandle(LY,(S5I),(393+i)))set x=(LoadReal(LY,(S5I),(549+i)))set y=(LoadReal(LY,(S5I),(567+i)))set x=PTI(x+10*Cos(a))set y=PUI(y+10*Sin(a))call SaveReal(LY,(S5I),(549+i),((x)*1.0))call SaveReal(LY,(S5I),(567+i),((y)*1.0))call SetUnitX(I01,x)call SetUnitY(I01,y)set i=i+1endloopendifset t=nullset I01=nullset P7I=nullreturn falseendfunctionfunction O85 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local integer SUI=GetUnitAbilityLevel(P7I,1093809713)local integer IU5=(LoadInteger(LY,(GetHandleId(P7I)),(687)))local integer i=1local unit I01local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)*bj_DEGTORADcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(IU5))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(549),((x)*1.0))call SaveReal(LY,(S5I),(567),((y)*1.0))call SaveBoolean(LY,(S5I),(688),(false))call SaveBoolean(LY,(S5I),(689),(false))loopexitwhen i>IU5set I01=CreateUnit(GetOwningPlayer(P7I),1747993655,x+GetRandomInt(-200,200),y+GetRandomInt(-200,200),0)call SaveUnitHandle(LY,(S5I),(393+i),(I01))call SaveReal(LY,(S5I),(549+i),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(567+i),((GetUnitY(I01))*1.0))set i=i+1endloopcall TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function O45))call IQ5(P7I,0)set P7I=nullset t=nullset I01=nullendfunctionfunction O95 takes nothing returns booleanif GetSpellAbilityId()==1093809713 thencall O85()endifreturn falseendfunctionfunction OA5 takes nothing returns booleanif GetLearnedSkill()==1093809713 and GetUnitAbilityLevel(GetTriggerUnit(),1093809713)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall O15()endifreturn falseendfunctionfunction S71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O95))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OA5))set t=nullendfunctionfunction OB5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit X44if GetTriggerEventId()==EVENT_UNIT_SPELL_FINISH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call UnitApplyTimedLife(I01,1112820806,0.1)elseif IC1(I01)thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveReal(LY,(S5I),(6),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(I01))*1.0))if x!=GetUnitX(I01)or y!=GetUnitY(I01)thencall UnitRemoveAbility(I01,1093815348)elsecall UnitAddAbility(I01,1093815348)endifendifreturn falseendfunctionfunction OC5 takes nothing returns booleanreturn GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(ZUI)and GetUnitTypeId(GetFilterUnit())==1966092633endfunctionfunction OD5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1966092633,GetUnitX(P7I)+100,GetUnitY(P7I)+100,0)local group glocal integer SUI=GetUnitAbilityLevel(P7I,1093815350)local real GW1local unit OE5local unit OF5call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_SPELL_FINISH)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function OB5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(6),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(I01))*1.0))call UnitAddAbility(I01,1093815348)call SetUnitAbilityLevel(I01,1093815349,GetUnitAbilityLevel(P7I,1093815350))call SaveReal(LY,(GetHandleId(I01)),(34),(((TimerGetElapsed(M)))*1.0))set ZUI=P7Iset g=NTI()call GroupEnumUnitsInRange(g,0,0,99999,Condition(function OC5))if CountUnitsInGroup(g)>SUI+1 thenset OF5=FirstOfGroup(g)set GW1=(LoadReal(LY,(GetHandleId(OF5)),(34)))set OE5=OF5call GroupRemoveUnit(g,OF5)loopexitwhen OF5==nullif GW1>(LoadReal(LY,(GetHandleId(OF5)),(34)))thenset GW1=(LoadReal(LY,(GetHandleId(OF5)),(34)))set OE5=OF5endifset OF5=FirstOfGroup(g)call GroupRemoveUnit(g,OF5)endloopcall KillUnit(OE5)endifcall NSI(g)set g=nullset I01=nullset P7I=nullset t=nullendfunctionfunction OG5 takes nothing returns booleanif GetSpellAbilityId()==1093815350 thencall OD5()endifreturn falseendfunctionfunction S81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OG5))endfunctionfunction OH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer EB2=(LoadInteger(LY,(S5I),(34)))call SaveInteger(LY,(GetHandleId(P7I)),(783),((LoadInteger(LY,(GetHandleId(P7I)),(783)))-EB2))call FlushChildHashtable(LY,(S5I))call S0I(t)set P7I=nullset t=nullreturn falseendfunctionfunction OZ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IFO=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1095328612)local integer EB2local integer E01if IsUnitInRange(P7I,IFO,900+25)and IC1(P7I)==false and IsUnitAlly(P7I,GetOwningPlayer(IFO))==false and GetUnitTypeId(IFO)!=1848657461 and IsUnitIllusion(IFO)==false and V51(GetUnitTypeId(IFO))==false and GetUnitAbilityLevel(IFO,1093678162)==0 thenset E01=(LoadInteger(LY,(GetHandleId(P7I)),(783)))if IsUnitType(IFO,UNIT_TYPE_HERO)==true thenset EB2=30elseset EB2=5endifset E01=E01+EB2call SaveInteger(LY,(GetHandleId(P7I)),(783),(E01))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,25+SUI*5,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function OH5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(EB2))endifset t=nullset P7I=nullset IFO=nullreturn falseendfunctionfunction OV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer E01=(LoadInteger(LY,(GetHandleId(P7I)),(783)))local integer O64=(LoadInteger(LY,(S5I),(238)))if O64!=E01 thencall G21(P7I,E01)call SaveInteger(LY,(S5I),(238),(E01))endifset t=nullset P7I=nullreturn falseendfunctionfunction OW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function OZ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function OV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction OX5 takes nothing returns booleanif GetLearnedSkill()==1095328612 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095328612)==1 thencall OW5()endifreturn falseendfunctionfunction S91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OX5))set t=nullendfunctionfunction OY5 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),1093678667)>0endfunctionfunction OJ5 takes nothing returns nothingif(GetIssuedOrderId()==String2OrderIdBJ("immolation"))thencall IA1(GetTriggerUnit(),1093681498)endifif(GetIssuedOrderId()==String2OrderIdBJ("unimmolation"))thencall UnitRemoveAbility(GetTriggerUnit(),1093681498)endifendfunctionfunction LW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function OY5))call TriggerAddAction(t,function OJ5)endfunctionfunction OK5 takes nothing returns nothinglocal integer S5I=GetHandleId(GetEnumUnit())if GetTriggerUnit()!=GetEnumUnit()thencall SaveInteger(LY,(S5I),(672),((LoadInteger(LY,(S5I),(672)))+1))endifendfunctionfunction OL5 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1429221446 and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==trueendfunctionfunction OM5 takes nothing returns booleanlocal group gif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and V51(GetUnitTypeId(GetTriggerUnit()))==false and IsUnitIllusion(GetTriggerUnit())==false thenset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),475,Condition(function OL5))if GetUnitTypeId(GetKillingUnit())==1429221446 thencall GroupAddUnit(g,GetKillingUnit())endifcall ForGroup(g,function OK5)call NSI(g)set g=nullendifreturn falseendfunctionfunction ON5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(t)==1 thencall ShowUnit(P7I,false)elseif GetTriggerEvalCount(t)>80 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction OS5 takes nothing returns booleanlocal unit I01local unit P7Ilocal unit IFOlocal trigger tlocal integer S5Iif GetUnitTypeId(GetTriggerUnit())==1429221446 thenset P7I=GetTriggerUnit()set IFO=GetKillingUnit()if P7I==IFO thenset I01=CreateUnit(GetOwningPlayer(P7I),1747993154,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call SetUnitTimeScale(I01,0.75)call UnitApplyTimedLife(I01,1112820806,1.0)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodAbomination.mdl",I01,"origin"))set I01=nullcall SetSoundPosition(PE,GetUnitX(P7I),GetUnitY(P7I),50)call SetSoundVolumeBJ(PE,100)call PlaySoundBJ(PE)call SetSoundPosition(UE,GetUnitX(P7I),GetUnitY(P7I),50)call SetSoundVolumeBJ(UE,100)call PlaySoundBJ(UE)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,.1,true)call TriggerAddCondition(t,Condition(function ON5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendifset P7I=nullset IFO=nullendifreturn falseendfunctionfunction OT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local unit P7I=(LoadUnitHandle(LY,(GetHandleId(t)),(2)))local integer S5I=GetHandleId(P7I)local integer OR5=(LoadInteger(LY,(S5I),(672)))local integer OP5=(LoadInteger(LY,(S5I),(673)))local integer SUI=GetUnitAbilityLevel(P7I,1093678660)local integer OQ5=R2I(I2R(OR5)*(0.5+0.5*SUI))if OQ5>OP5 thencall ModifyHeroStat(0,P7I,0,OQ5-OP5)call SaveInteger(LY,(S5I),(673),(OQ5))call UYI("+"+I2S(OQ5-OP5)+" "+GetObjectName(1848659274),3,P7I,0.023,0,255,0,230)endifset t=nullset P7I=nullreturn falseendfunctionfunction OU5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function OT5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction A05 takes nothing returns booleanif GetLearnedSkill()==1093678660 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678660)==1 thencall OU5()endifreturn falseendfunctionfunction AI5 takes nothing returns booleanif GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1429221446 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848654162)+" "+I2S((LoadInteger(LY,(GetHandleId(K1[GetPlayerId(GetTriggerPlayer())])),(673))))+" "+GetObjectName(1848654163))endifreturn falseendfunctionfunction LX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function A05))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function AI5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function OS5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function OM5))set t=nullendfunctionfunction A15 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local unit X44=CreateUnit(GetOwningPlayer(P7I),1697657409,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093685338)call IssueTargetOrder(I01,"thunderbolt",P8I)call UnitApplyTimedLife(I01,1112820806,1)call UnitApplyTimedLife(X44,1112820806,1)set I01=nullset X44=nullendfunctionfunction AO5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer A25=(LoadInteger(LY,(S5I),(376)))local boolean A35=(LoadBoolean(LY,(S5I),(377)))local unit P8Ilocal unit A45=(LoadUnitHandle(LY,(S5I),(2100+A25)))if A35 thenset P8I=(LoadUnitHandle(LY,(S5I),(17)))call SetUnitX(P8I,GetUnitX(A45))call SetUnitY(P8I,GetUnitY(A45))endifcall RemoveUnit(A45)set A25=A25-1call SaveInteger(LY,(S5I),(376),(A25))if A25==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if IsUnitInRegion(MN,P8I)thencall B41(P8I)endifendifset t=nullset P8I=nullreturn falseendfunctionfunction A55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer A25=(LoadInteger(LY,(S5I),(376)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RM2=(LoadReal(LY,(S5I),(13)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local trigger CR3=(LoadTriggerHandle(LY,(S5I),(11)))local integer CN3=GetHandleId(CR3)local group glocal unit ulocal real xlocal real ylocal real zif A25<16+2*SUI thenset A25=A25+1call SaveInteger(LY,(S5I),(376),(A25))set x=GetUnitX(SFI)+A25*50*Cos(RM2*bj_DEGTORAD)set y=GetUnitY(SFI)+A25*50*Sin(RM2*bj_DEGTORAD)call SaveUnitHandle(LY,(CN3),(2100+A25),(CreateUnit(GetOwningPlayer(SFI),1966092360,x,y,RM2)))set g=NTI()call GroupEnumUnitsInRange(g,x,y,125,Condition(function D31))call GroupRemoveUnit(g,SFI)set u=GroupPickRandomUnit(g)call NSI(g)if u!=null thencall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(CR3,0.03,true)call TriggerAddCondition(CR3,Condition(function AO5))call SaveInteger(LY,(CN3),(376),(A25))call SaveBoolean(LY,(CN3),(377),(true))call SaveUnitHandle(LY,(CN3),(17),(u))if IsUnitEnemy(u,GetOwningPlayer(SFI))thenif IsUnitType(u,UNIT_TYPE_HERO)==true thencall FL1("HA_Hits"+I2S(GetPlayerId(GetOwningPlayer(SFI))),V0I[GetPlayerId(GetOwningPlayer(SFI))])set V0I[GetPlayerId(GetOwningPlayer(SFI))]=V0I[GetPlayerId(GetOwningPlayer(SFI))]+1call SCI(SFI,4400,1.5)endifset VII[GetPlayerId(GetOwningPlayer(SFI))]=VII[GetPlayerId(GetOwningPlayer(SFI))]+1call FL1("HA_Total"+I2S(GetPlayerId(GetOwningPlayer(SFI))),VII[GetPlayerId(GetOwningPlayer(SFI))])call A15(SFI,u)call P6I(SFI,u,3,90*SUI)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"origin"))endifendifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)set VII[GetPlayerId(GetOwningPlayer(SFI))]=VII[GetPlayerId(GetOwningPlayer(SFI))]+1call TriggerRegisterTimerEvent(CR3,0.03,true)call TriggerAddCondition(CR3,Condition(function AO5))call SaveInteger(LY,(CN3),(376),(A25))call SaveBoolean(LY,(CN3),(377),(false))endifset t=nullset SFI=nullset CR3=nullset g=nullset u=nullreturn falseendfunctionfunction A65 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real RM2=UEI(GetUnitX(SFI),GetUnitY(SFI),GetLocationX(l),GetLocationY(l))local integer SUI=GetUnitAbilityLevel(SFI,1093678665)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveInteger(LY,(S5I),(376),(0))call SaveTriggerHandle(LY,(S5I),(11),(CreateTrigger()))call TriggerRegisterTimerEvent(t,0.0375,true)call TriggerAddCondition(t,Condition(function A55))call RemoveLocation(l)set SFI=nullset l=nullset t=nullendfunctionfunction A75 takes nothing returns booleanif GetSpellAbilityId()==1093678665 thencall A65()endifreturn falseendfunctionfunction A85 takes nothing returns booleanlocal integer YT3=V0I[GetPlayerId(GetTriggerPlayer())]local integer QHI=VII[GetPlayerId(GetTriggerPlayer())]if GetUnitTypeId(K1[GetPlayerId(GetTriggerPlayer())])==1429221446 and QHI>0 thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,U2,10.00,GetObjectName(1848657228)+" "+R2S(I2R(YT3)/I2R(QHI)*100)+"% ("+I2S(YT3)+"/"+I2S(QHI)+")")endifreturn falseendfunctionfunction LY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function A75))set t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-stats",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-stats",true)call TriggerRegisterPlayerChatEvent(t,BO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,BO[5],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[1],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[2],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[3],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[4],"-st",true)call TriggerRegisterPlayerChatEvent(t,CO[5],"-st",true)call TriggerAddCondition(t,Condition(function A85))set t=nullendfunctionfunction A95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real PAI=(25+50*SUI)+(1.0)*GetHeroStr(P7I,true)local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thenif GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747544)thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetTriggerEvalCount(t)>4 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call PJI(P7I)elseif SUI>0 thenset NPI=NPI+1if(NPI<4 and IsUnitType(P8I,UNIT_TYPE_HERO)==true)or(NPI<8 and IsUnitType(P8I,UNIT_TYPE_HERO)==false)thencall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+PAI)call P6I(P7I,P8I,1,PAI)endifcall SaveInteger(LY,(S5I),(34),(NPI))endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AA5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093747544)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function A95))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))call TriggerEvaluate(t)set t=nullset P7I=nullset P8I=nullendfunctionfunction AB5 takes nothing returns booleanif GetSpellAbilityId()==1093747544 and NNI(GetSpellTargetUnit())==false thencall AA5()endifreturn falseendfunctionfunction LJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AB5))set t=nullendfunctionfunction AC5 takes nothing returns booleanif(GetUnitTypeId(GetSummonedUnit())==1865429068)thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())==1865429069)thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())==1865429070)thenreturn trueendifif(GetUnitTypeId(GetSummonedUnit())==1865429071)thenreturn trueendifreturn falseendfunctionfunction AD5 takes unit SWI,real PAI returns nothinglocal real QHI=GetUnitState(SWI,UNIT_STATE_MAX_LIFE)local real QZI=GetUnitState(SWI,UNIT_STATE_LIFE)if PAI>0 thenif PAI>(QHI-QZI)thenif PAI>=QZI thencall SetUnitState(SWI,UNIT_STATE_LIFE,QHI)call QFI(SWI,PAI-(QHI-QZI))elsecall QFI(SWI,PAI)endifelsecall SetUnitState(SWI,UNIT_STATE_LIFE,GetUnitState(SWI,UNIT_STATE_LIFE)+PAI)endifendifendfunctionfunction AE5 takes nothing returns nothingendfunctionfunction AF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)==true thencall AD5(I01,GetEventDamage()-1)elsecall AD5(I01,GetEventDamage()-0.25)endifelseset g=NTI()set GK=I01call GroupEnumUnitsInRange(g,GetUnitX(I01),GetUnitY(I01),400+300*4+25,Condition(function CA1))call ForGroup(g,function AE5)call NSI(g)set g=nullendifset t=nullset I01=nullreturn falseendfunctionfunction AG5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=GetSummonedUnit()call TriggerRegisterDeathEvent(t,I01)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function AF5))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(GetUnitAbilityLevel(GetSummoningUnit(),1093679428)))call SetUnitAbilityLevelSwapped(1093679188,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))call SetUnitAbilityLevelSwapped(1093681990,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))call IssueImmediateOrder(GetSummonedUnit(),"manaflareon")endfunctionfunction NW takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function AC5))call TriggerAddAction(t,function AG5)endfunctionfunction AH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DisableTrigger(t)if IsUnitAlly(P7I,GetOwningPlayer(P8I))==true thencall QGI(P8I,GetEventDamage()*0.107)elsecall P6I(GetEventDamageSource(),P8I,1,GetEventDamage()*0.071/1.4)endifcall EnableTrigger(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AZ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call SetUnitVertexColor(P8I,255,255,255,255)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction AV5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093817412)local trigger tlocal integer S5Iif IsUnitAlly(P8I,GetOwningPlayer(P8I))==true thencall UnitAddAbility(I01,1093818955)call SetUnitAbilityLevel(I01,1093818955,SUI)elsecall UnitAddAbility(I01,1093681989)call SetUnitAbilityLevel(I01,1093681989,SUI)endifcall IssueTargetOrder(I01,"banish",P8I)if GetUnitTypeId(P8I)==1848657482 or GetUnitTypeId(P8I)==1848657481 or GetUnitTypeId(P8I)==1848657462 or GetUnitTypeId(P8I)==1848657480 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1.5+0.5*SUI,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function AZ5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SetUnitVertexColor(P8I,50,255,50,150)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetUnitX(P8I),GetUnitY(P8I))))set t=nullendifset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1.5+0.5*SUI,false)call TriggerAddCondition(t,Condition(function AH5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset I01=nullendfunctionfunction AW5 takes nothing returns booleanif GetSpellAbilityId()==1093817412 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thenif(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false and RKI(GetSpellTargetUnit())==false)or GetUnitTypeId(GetSpellTargetUnit())==1848657482 or GetUnitTypeId(GetSpellTargetUnit())==1848657481 or GetUnitTypeId(GetSpellTargetUnit())==1848657462 or GetUnitTypeId(GetSpellTargetUnit())==1848657480 thenelsecall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))endifelsecall AV5()endifendifreturn falseendfunctionfunction LK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AW5))set t=nullendfunctionfunction AX5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093681987)local real ZO3=80+40*SUIif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093677658)set ZO3=120+60*SUIendifset ZO3=ZO3*0.25if GetUnitAbilityLevel(P7I,1113875308)==0 or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093681987 or GetSpellAbilityId()==1093677658))thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST thenif GetUnitState(P7I,UNIT_STATE_LIFE)+ZO3>=GetUnitState(P7I,UNIT_STATE_MAX_LIFE)thencall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+ZO3+GetUnitState(P7I,UNIT_STATE_LIFE)-GetUnitState(P7I,UNIT_STATE_MAX_LIFE))endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AY5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function AX5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset t=nullendfunctionfunction AJ5 takes nothing returns booleanif(GetSpellAbilityId()==1093681987 or GetSpellAbilityId()==1093677658)and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)thencall AY5()endifreturn falseendfunctionfunction LL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AJ5))set t=nullendfunctionfunction AK5 takes unit P7I,unit P8I returns nothinglocal real AL5=10+20*VOIlocal real AM5=80+50*VOIlocal real DH1=(AL5+AM5*V3I/700)*0.5call P6I(P7I,P8I,1,DH1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",P8I,"chest"))endfunctionfunction AN5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local group JAO=V1Ilocal unit P7I=V2Iif IsUnitInGroup(P8I,JAO)==false thencall GroupAddUnit(JAO,P8I)call AK5(P7I,P8I)endifset P8I=nullset JAO=nullset P7I=nullendfunctionfunction AS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local effect fxlocal integer NPI=GetTriggerEvalCount(t)local real xlocal real x0=GetUnitX(P7I)local real ylocal real y0=GetUnitY(P7I)local integer ilocal integer dlocal group g=NTI()call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))set V1I=JAOset V2I=P7Iset VOI=GetUnitAbilityLevel(P7I,1093748023)if NPI>20 thenset d=21*36+(20-NPI)*36set V3I=dset i=0loopexitwhen i>36set x=x0+d*Cos(360*i/36*bj_DEGTORAD)set y=y0+d*Sin(360*i/36*bj_DEGTORAD)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,100,Condition(function CH1))call ForGroup(g,function AN5)set i=i+1endloopelseset d=NPI*36set V3I=dset i=0loopexitwhen i>36set x=x0+d*Cos(360*i/36*bj_DEGTORAD)set y=y0+d*Sin(360*i/36*bj_DEGTORAD)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,100,Condition(function CH1))call ForGroup(g,function AN5)set i=i+1endloopendifcall NSI(g)if NPI==40 thencall KillUnit(I01)call NSI(JAO)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif NPI==20 thencall GroupClear(JAO)set fx=nullendifset t=nullset I01=nullset JAO=nullset P7I=nullset g=nullreturn falseendfunctionfunction AT5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local unit I01=CreateUnit(GetOwningPlayer(SFI),1747990834,x,y,0)local integer i=0local integer VB2=36local group JAO=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",SFI,"origin")))call SaveGroupHandle(LY,(S5I),(133),(JAO))call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))call TriggerRegisterTimerEvent(t,0.06,true)call TriggerAddCondition(t,Condition(function AS5))set t=nullset I01=nullset SFI=nullendfunctionfunction AR5 takes nothing returns booleanif GetSpellAbilityId()==1093748023 thencall AT5()endifreturn falseendfunctionfunction NM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AR5))set t=nullendfunctionfunction AP5 takes integer AQ5 returns booleanreturn AQ5!=1093679446 and AQ5!=1093677622 and AQ5!=1093684314 and AQ5!=1093685582 and AQ5!=1093685065 and AQ5!=1093682265 and AQ5!=1093752642 and AQ5!=1095263841endfunctionfunction AU5 takes unit R5I,unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(R5I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093747019)call SetUnitAbilityLevel(I01,1093747019,SUI)call IssueTargetOrder(I01,"chainlightning",P8I)call IA1(I01,1093744708)call SetUnitAbilityLevel(I01,1093744708,SUI)call IssueTargetOrder(I01,"purge",P8I)set I01=nullendfunctionfunction B05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUIif GetSpellTargetUnit()==P7I and AP5(GetSpellAbilityId())==true and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(P7I))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thenset SUI=GetUnitAbilityLevel(P7I,1093748022)call AU5(P7I,P7I,GetTriggerUnit(),SUI)endifset t=nullset P7I=nullreturn falseendfunctionfunction BI5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B05))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction B15 takes nothing returns booleanif GetLearnedSkill()==1093748022 and GetUnitAbilityLevel(GetTriggerUnit(),1093748022)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall BI5()endifreturn falseendfunctionfunction NN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function B15))set t=nullendfunctionfunction BO5 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,V4I[0])call UnitRemoveAbility(u,V4I[1])call UnitRemoveAbility(u,V4I[2])call UnitRemoveAbility(u,V4I[3])call UnitRemoveAbility(u,V4I[4])call UnitRemoveAbility(u,V4I[5])call UnitRemoveAbility(u,V4I[6])call UnitRemoveAbility(u,V4I[7])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=iset i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,V4I[i])elsecall UnitRemoveAbility(u,V4I[i])endifset i=i+1endloopendfunctionfunction B25 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,V5I[0])call UnitRemoveAbility(u,V5I[1])call UnitRemoveAbility(u,V5I[2])call UnitRemoveAbility(u,V5I[3])call UnitRemoveAbility(u,V5I[4])call UnitRemoveAbility(u,V5I[5])call UnitRemoveAbility(u,V5I[6])call UnitRemoveAbility(u,V5I[7])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=iset i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,V5I[i])elsecall UnitRemoveAbility(u,V5I[i])endifset i=i+1endloopendfunctionfunction B35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DEATH thenif GetTriggerUnit()==P7I thencall BO5(P7I,0)call SaveUnitHandle(LY,(S5I),(2),(null))elsecall B25(P8I,0)call SaveUnitHandle(LY,(S5I),(17),(null))endifelseif P7I!=null thencall BO5(P7I,0)endifif P8I!=null thencall B25(P8I,0)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction B45 takes unit P7I,unit P8I,unit QB2 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if QB2==null thencall TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))elseif QB2==P8I thencall B25(P8I,0)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(null))elsecall BO5(P7I,0)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(null))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifcall TriggerRegisterTimerEvent(t,18,false)call TriggerAddCondition(t,Condition(function B35))endfunctionfunction B55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=GetTriggerEvalCount(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))call MoveLightning(UZI,true,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))call SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))if QNI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))>700 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyLightning(UZI)call KillUnit(I01)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall B45(P7I,P8I,GetTriggerUnit())elsecall B45(P7I,P8I,null)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elseif NPI>160 thencall DestroyLightning(UZI)call KillUnit(I01)call B45(P7I,P8I,null)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif ModuloInteger(NPI,20)==0 or NPI==1 thencall BO5(P7I,(SUI*7)*R2I(NPI/20))call B25(P8I,(SUI*7)*R2I(NPI/20))endifset t=nullset P7I=nullset P8I=nullset UZI=nullset I01=nullreturn falseendfunctionfunction B65 takes unit P7I,unit P8I,lightning UZI,unit I01 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093747792)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function B55))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveUnitHandle(LY,(S5I),(19),(I01))set t=nullendfunctionfunction B75 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real x0=GetUnitX(P7I)local real y0=GetUnitY(P7I)local real x1=(LoadReal(LY,(S5I),(64)))local real y1=(LoadReal(LY,(S5I),(65)))local real a=(LoadReal(LY,(S5I),(137)))local unit P8I=nulllocal group g=NTI()set x1=PTI(x1+25*Cos(a))set y1=PUI(y1+25*Sin(a))call SaveReal(LY,(S5I),(64),((x1)*1.0))call SaveReal(LY,(S5I),(65),((y1)*1.0))call MoveLightning(UZI,true,x0,y0,x1,y1)call SetUnitX(I01,x1)call SetUnitY(I01,y1)set GK=P7Icall GroupEnumUnitsInRange(g,x1,y1,225,Condition(function DO1))set P8I=FirstOfGroup(g)call NSI(g)if P8I!=null thencall B65(P7I,P8I,UZI,I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)>25 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyLightning(UZI)call KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset UZI=nullset P8I=nullset g=nullset I01=nullreturn falseendfunctionfunction B85 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger tlocal integer S5Ilocal location llocal lightning UZI=AddLightning("CLSB",true,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P7I),GetUnitY(P7I))local unit I01=CreateUnit(GetOwningPlayer(P7I),1747990584,GetUnitX(P7I),GetUnitY(P7I),0)call SetLightningColor(UZI,0.3,0.5,1,1)if P8I==null thenset l=GetSpellTargetLoc()set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function B75))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(137),((Atan2(GetLocationY(l)-GetUnitY(P7I),GetLocationX(l)-GetUnitX(P7I)))*1.0))call SaveReal(LY,(S5I),(64),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(65),((GetUnitY(P7I))*1.0))call RemoveLocation(l)set l=nullset t=nullelsecall B65(P7I,P8I,UZI,I01)endifset P8I=nullendfunctionfunction B95 takes nothing returns booleanif GetSpellAbilityId()==1093747792 and NNI(GetSpellTargetUnit())==false thencall B85()endifreturn falseendfunctionfunction NS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B95))set t=nullset V4I[0]=1093747798set V4I[1]=1093747793set V4I[2]=1093747794set V4I[3]=1093747795set V4I[4]=1093747796set V4I[5]=1093747797set V4I[6]=1093747799set V4I[7]=1093747800set V5I[0]=1093748020set V5I[1]=1093748019set V5I[2]=1093748018set V5I[3]=1093748017set V5I[4]=1093748016set V5I[5]=1093748021set V5I[6]=1093747802set V5I[7]=1093747801endfunctionfunction BA5 takes integer S5I returns nothinglocal integer i=1local integer PY2=(LoadInteger(LY,(S5I),(136)))local unit P8Ilocal integer PCIif PY2==0 thenreturnendifloopexitwhen i>PY2set PCI=(LoadInteger(LY,(S5I),(2200+i)))set P8I=NYI(PCI)call NXI(PCI)call UnitRemoveAbility(P8I,WN[0])call UnitRemoveAbility(P8I,WN[1])call UnitRemoveAbility(P8I,WN[2])call UnitRemoveAbility(P8I,WN[3])call UnitRemoveAbility(P8I,WN[4])call UnitRemoveAbility(P8I,WN[5])set i=i+1endloopset P8I=nullendfunctionfunction BB5 takes unit P8I,integer S5I returns nothinglocal integer PCI=NKI(P8I)local integer PY2=(LoadInteger(LY,(S5I),(136)))set PY2=PY2+1call SaveInteger(LY,(S5I),(136),(PY2))call SaveInteger(LY,(S5I),(2200+PY2),(PCI))endfunctionfunction BC5 takes unit u returns integerreturn GetUnitAbilityLevel(u,WN[0])*1+GetUnitAbilityLevel(u,WN[1])*2+GetUnitAbilityLevel(u,WN[2])*4+GetUnitAbilityLevel(u,WN[3])*8+GetUnitAbilityLevel(u,WN[4])*16endfunctionfunction BD5 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,WN[0])call UnitRemoveAbility(u,WN[1])call UnitRemoveAbility(u,WN[2])call UnitRemoveAbility(u,WN[3])call UnitRemoveAbility(u,WN[4])call UnitRemoveAbility(u,WN[5])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=iset i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,WN[i])elsecall UnitRemoveAbility(u,WN[i])endifset i=i+1endloopendfunctionfunction BE5 takes unit u,integer d returns nothingif IsUnitType(u,UNIT_TYPE_STRUCTURE)==false thencall BD5(u,d+BC5(u))call BB5(u,VAI)endifendfunctionfunction BF5 takes unit P7I,unit I01,unit P8I,integer SUI returns nothingcall IssueTargetOrder(I01,"chainlightning",P8I)call PDI(P7I,P8I,2,(50+25*SUI)/2.0,0.3)call BE5(P8I,1)endfunctionfunction BG5 takes nothing returns booleanif(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1848651852 thenif GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<V9I thenset V9I=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)set V8I=GetFilterUnit()endifendifreturn falseendfunctionfunction BH5 takes nothing returns booleanif(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and GetUnitTypeId(GetFilterUnit())!=1848651852 thenif GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<V9I thenset V9I=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)set V8I=GetFilterUnit()endifendifreturn falseendfunctionfunction BZ5 takes unit P7I,unit I01,integer SUI returns nothinglocal group g=NTI()set V8I=nullset V9I=999999set V6I=30+30*SUIset V7I=P7Iset GK=P7Iif GetUnitAbilityLevel(P7I,1093752150)>0 thencall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),525,Condition(function BH5))elsecall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),525,Condition(function BG5))endifcall NSI(g)if V8I!=null thencall BF5(P7I,I01,V8I,SUI)endifset g=nullendfunctionfunction BV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=GetTriggerEvalCount(t)local real JV3if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall BA5(S5I)call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()==P7I thencall KillUnit(I01)endifelseif GetUnitAbilityLevel(P7I,1093752150)>0 thenif SUI==1 thenset JV3=0.55elseif SUI==2 thenset JV3=0.45elseset JV3=0.35endifelseif SUI==1 thenset JV3=0.7elseif SUI==2 thenset JV3=0.6elseset JV3=0.5endifendifset JV3=JV3/0.05if ModuloInteger(NPI,R2I(JV3))==0 or NPI==1 thenset VAI=S5Icall BZ5(P7I,I01,SUI)endifcall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifset t=nullset P7I=nullreturn falseendfunctionfunction BW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093747023)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1747990577,GetUnitX(P7I),GetUnitY(P7I),0)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093752150)endifcall UnitApplyTimedLife(I01,1112820806,30)call SetUnitAbilityLevel(I01,1093747786,SUI)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterDeathEvent(t,I01)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function BV5))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))set P7I=nullset t=nullendfunctionfunction BX5 takes nothing returns booleanif GetSpellAbilityId()==1093747023 or GetSpellAbilityId()==1093752150 thencall BW5()endifreturn falseendfunctionfunction NT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BX5))set t=nullset WN[0]=1093747787set WN[1]=1093747788set WN[2]=1093747790set WN[3]=1093747789set WN[4]=1093747791endfunctionfunction BY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))call SetUnitPosition(SFI,x,y)call SetUnitAnimation(SFI,"morph ALTERNATE")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction BJ5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093678671)local location llocal real RM2local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local real QJIlocal real QKIlocal real EN4local real ES4local real CasterXlocal real CasterYlocal integer CasterAbilitylocal unit I01local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real PAIlocal real DC1=1.65local unit DT1=nullif SUI==1 thenset PAI=100elseif SUI==2 thenset PAI=160elseif SUI==3 thenset PAI=220elseif SUI==4 thenset PAI=280endifif GetSpellTargetUnit()!=null thenset l=GetUnitLoc(GetSpellTargetUnit())elseset l=GetSpellTargetLoc()endifset QJI=GetLocationX(l)set QKI=GetLocationY(l)call RemoveLocation(l)set RM2=UEI(x,y,QJI,QKI)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveReal(LY,(S5I),(6),((QJI)*1.0))call SaveReal(LY,(S5I),(7),((QKI)*1.0))call TriggerRegisterTimerEvent(t,QNI(x,y,QJI,QKI)/2000,false)call TriggerAddCondition(t,Condition(function BY5))if QNI(x,y,QJI,QKI)<150 thenset QJI=x+150*Cos(RM2*bj_DEGTORAD)set QKI=y+150*Sin(RM2*bj_DEGTORAD)endifif GetSpellTargetUnit()!=null and NNI(GetSpellTargetUnit())thenset DT1=GetSpellTargetUnit()endifcall DS1(SFI,DT1,PAI,DC1,0.52,x,y,QJI,QKI,175,null,true,1600)set I01=nullset l=nullset SFI=nullset t=nullendfunctionfunction BK5 takes nothing returns booleanif GetSpellAbilityId()==1093678671 thencall BJ5()endifreturn falseendfunctionfunction LM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BK5))call Q1I(1093687350)set t=nullendfunctionfunction BL5 takes nothing returns nothingcall P6I(VCI,GetEnumUnit(),1,110)call IssueTargetOrder(VDI,"slow",GetEnumUnit())endfunctionfunction BM5 takes unit P7I,real x,real y,integer SUI,integer BN5 returns nothinglocal group g=NTI()local real rlocal string fxif BN5==8 thenset r=675elseif BN5==9 thenset r=700elseif BN5==10 thenset r=725elseset r=250+50*BN5endifif BN5<4 thenset fx="war3mapImported\\EpiPulse_1_4.mdx"elseif BN5<8 thenset fx="war3mapImported\\EpiPulse_5_8.mdx"elseset fx="war3mapImported\\EpiPulse_9_12.mdx"endifcall DestroyEffect(AddSpecialEffect(fx,x,y))set GK=P7Iset VCI=P7Iset VDI=VBI[GetPlayerId(GetOwningPlayer(P7I))]call GroupEnumUnitsInRange(g,x,y,r,Condition(function CA1))call ForGroup(g,function BL5)call NSI(g)call OF1(0.03,false,x,y,150+100*BN5,150+100*BN5,72,0.03,512)set g=nullendfunctionfunction BS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local player p=(LoadPlayerHandle(LY,(S5I),(54)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local boolean CK3=(LoadBoolean(LY,(S5I),(15)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer KO2=(LoadInteger(LY,(S5I),(25)))local integer BT5=4+SUI*2local real x=II3local real y=I13if CK3 thenset BT5=BT5+2endifif KO2>BT5 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif SFI!=null and IC1(SFI)==false thenset x=GetUnitX(SFI)set y=GetUnitY(SFI)endifcall BM5(SFI,x,y,SUI,KO2)call SaveInteger(LY,(S5I),(25),(KO2+1))call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))endifset t=nullset p=nullset SFI=nullreturn falseendfunctionfunction BR5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local player p=GetOwningPlayer(SFI)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(SFI,1093678674)local boolean CK3=falseif SUI==0 thenset CK3=trueset SUI=GetUnitAbilityLevel(SFI,1093747252)endifif TII(p)thenset VBI[GetPlayerId(p)]=CreateUnit(CO[0],1697656901,GetUnitX(SFI),GetUnitY(SFI),0)elseset VBI[GetPlayerId(p)]=CreateUnit(BO[0],1697656901,GetUnitX(SFI),GetUnitY(SFI),0)endifcall IA1(VBI[GetPlayerId(p)],1093744450)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(SFI)))call SaveReal(LY,(S5I),(23),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(SFI))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(25),(2))call SaveBoolean(LY,(S5I),(15),(CK3))call TriggerRegisterTimerEvent(t,0.35,true)call TriggerAddCondition(t,Condition(function BS5))call BM5(SFI,GetUnitX(SFI),GetUnitY(SFI),SUI,1)set SFI=nullset t=nullendfunctionfunction BP5 takes nothing returns booleanif GetSpellAbilityId()==1093678674 or GetSpellAbilityId()==1093747252 thencall BR5()endifreturn falseendfunctionfunction LN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function BP5))call Q1I(1093744450)set t=nullendfunctionfunction BQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if((LoadInteger(LY,(GetHandleId((SFI))),((4299))))==1)==false thencall UnitRemoveAbility(SFI,1110455378)endifcall RemoveUnit((LoadUnitHandle(LY,(S5I),(379))))call RemoveUnit((LoadUnitHandle(LY,(S5I),(380))))call RemoveUnit((LoadUnitHandle(LY,(S5I),(381))))call RemoveUnit((LoadUnitHandle(LY,(S5I),(382))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction BU5 takes unit SFI,integer SUI,unit C05,unit CI5,unit C15,unit CO5 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real DC1set DC1=1.5call SaveInteger(LY,(GetHandleId((SFI))),((4299)),(2))call TriggerRegisterTimerEvent(t,DC1,false)call TriggerAddCondition(t,Condition(function BQ5))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(379),(C05))call SaveUnitHandle(LY,(S5I),(380),(CI5))call SaveUnitHandle(LY,(S5I),(381),(C15))call SaveUnitHandle(LY,(S5I),(382),(CO5))set t=nullendfunctionfunction C25 takes nothing returns booleanif(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))thencall P6I(VFI,GetFilterUnit(),1,VEI)endifreturn falseendfunctionfunction C35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit C05=(LoadUnitHandle(LY,(S5I),(379)))local unit CI5=(LoadUnitHandle(LY,(S5I),(380)))local unit C15=(LoadUnitHandle(LY,(S5I),(381)))local unit CO5=(LoadUnitHandle(LY,(S5I),(382)))local integer SUI=GetUnitAbilityLevel(SFI,1093683248)local integer NPI=GetTriggerEvalCount(t)local group glocal integer C45=550if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST or NPI>SUI*20/0.5 thencall BU5(SFI,SUI,C05,CI5,C15,CO5)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=SFIset VFI=SFIset VEI=SUI*25*0.5call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),C45,Condition(function C25))call NSI(g)endifset t=nullset SFI=nullset C05=nullset CI5=nullset C15=nullset CO5=nullset g=nullreturn falseendfunctionfunction C55 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit C05=CreateUnit(GetOwningPlayer(SFI),1697656913,GetUnitX(SFI)+150,GetUnitY(SFI)+150,0)local unit CI5=CreateUnit(GetOwningPlayer(SFI),1697656913,GetUnitX(SFI)+150,GetUnitY(SFI)-150,0)local unit C15=CreateUnit(GetOwningPlayer(SFI),1697656913,GetUnitX(SFI)-150,GetUnitY(SFI)+150,0)local unit CO5=CreateUnit(GetOwningPlayer(SFI),1697656913,GetUnitX(SFI)-150,GetUnitY(SFI)-150,0)local integer SUI=GetUnitAbilityLevel(SFI,1093683248)local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(SFI),GetUnitY(SFI),0)call SaveInteger(LY,(GetHandleId((SFI))),((4299)),(1))call IA1(I01,1093683279)call SetUnitAbilityLevel(I01,1093683279,SUI)call IssueTargetOrder(I01,"invisibility",SFI)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function C35))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(379),(C05))call SaveUnitHandle(LY,(S5I),(380),(CI5))call SaveUnitHandle(LY,(S5I),(381),(C15))call SaveUnitHandle(LY,(S5I),(382),(CO5))call SetUnitTimeScale(C05,0)call SetUnitTimeScale(CI5,0)call SetUnitTimeScale(C15,0)call SetUnitTimeScale(CO5,0)set t=nullset SFI=nullset I01=nullset C05=nullset CI5=nullset C15=nullset CO5=nullendfunctionfunction C65 takes nothing returns booleanif GetSpellAbilityId()==1093683248 thencall C55()endifreturn falseendfunctionfunction LS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C65))set t=nullendfunctionfunction C75 takes nothing returns nothingcall P6I(VGI,GetEnumUnit(),2,50*VHI)endfunctionfunction C85 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093810507)call IA1(I01,1093684537)call SetUnitAbilityLevel(I01,1093684537,SUI)call IssueImmediateOrder(I01,"thunderclap")call IA1(I01,1093677399)call SetUnitAbilityLevel(I01,1093677399,SUI)call IssueImmediateOrder(I01,"stomp")set VGI=P7Iset VHI=SUIcall GroupEnumUnitsInRange(g,x,y,350+25,Condition(function C51))call ForGroup(g,function C75)call NSI(g)set P7I=nullset I01=nullset g=nullendfunctionfunction C95 takes nothing returns booleanif GetSpellAbilityId()==1093810507 thencall C85()endifreturn falseendfunctionfunction LT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C95))set t=nullendfunctionfunction CA5 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093683786)local real PAI=40+20*SUIif GetUnitAbilityLevel(P8I,1093678162)==0 thencall P6I(P7I,P8I,2,PAI)endifendfunctionfunction CB5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>0 and GetEventDamage()<=0.02 and GetUnitAbilityLevel(P8I,1110460231)>0 thencall DisableTrigger(t)call CA5(P7I,P8I)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction CC5 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function CB5))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction CD5 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4274))))==1)==false thencall SCI(P7I,4274,0.1)call CC5()endifendfunctionfunction CE5 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093683786)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall CD5()endifreturn falseendfunctionfunction CF5 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function CE5))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction CG5 takes nothing returns booleanif GetLearnedSkill()==1093683786 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683786)==1 thencall CF5()endifreturn falseendfunctionfunction LR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function CG5))set t=nullendfunctionfunction SpectralDagger_CastCode takes nothing returns integerreturn 1093683287endfunctionfunction SpectralDagger_PositiveEffect takes nothing returns integerreturn 1093683506endfunctionfunction SpectralDagger_NegativeEffect takes nothing returns integerreturn 1093683289endfunctionfunction SpectralDagger_PositiveBuff takes nothing returns integerreturn 1110455351endfunctionfunction SpectralDagger_ShadowPathUnit takes nothing returns integerreturn 1747988530endfunctionfunction SpectralDagger_DaggerUnit takes nothing returns integerreturn 1747988531endfunctionfunction CH5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit PKI=(LoadUnitHandle(LY,(S5I),(221)))local unit CZ5=(LoadUnitHandle(LY,(S5I),(383)))local unit I01local real DC1=(LoadReal(LY,(S5I),(57)))local integer SUI=GetUnitAbilityLevel(CZ5,(1093683287))local real CV5=(LoadReal(LY,(S5I),(6)))local real CW5=(LoadReal(LY,(S5I),(7)))local real IV1=GetUnitX(PKI)local real IW1=GetUnitY(PKI)if(IV1-CV5)*(IV1-CV5)+(IW1-CW5)*(IW1-CW5)>900 thenset I01=CreateUnit(GetOwningPlayer(CZ5),(1747988530),GetUnitX(PKI),GetUnitY(PKI),0)call SetUnitAbilityLevel(I01,(1093683506),SUI)call SetUnitAbilityLevel(I01,(1093683289),SUI)call UnitApplyTimedLife(I01,1112820806,7)call SaveReal(LY,(S5I),(6),((IV1)*1.0))call SaveReal(LY,(S5I),(7),((IW1)*1.0))endifset DC1=DC1+0.2call SaveReal(LY,(S5I),(57),((DC1)*1.0))if DC1>7 or GetUnitState(PKI,UNIT_STATE_LIFE)<1 thencall PauseTimer(t)call FlushChildHashtable(LY,(S5I))endifendfunctionfunction CX5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local sound PGIlocal timer tlocal integer S5Icall UnitDamageTarget(XO,P8I,JO,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call GroupAddUnit(B2,P8I)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset t=CreateTimer()set S5I=GetHandleId(t)set PGI=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,10,10,"DefaultEAXON")call SetSoundPosition(PGI,GetUnitX(P8I),GetUnitY(P8I),0)call SetSoundDistanceCutoff(PGI,700)call StartSound(PGI)call KillSoundWhenDone(PGI)call SaveUnitHandle(LY,(S5I),(221),(P8I))call SaveUnitHandle(LY,(S5I),(383),(XO))call SaveReal(LY,(S5I),(6),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P8I))*1.0))call TimerStart(t,0.2,true,function CH5)endifendfunctionfunction CY5 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and IsUnitInGroup(GetFilterUnit(),B2)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction CJ5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local group Z51=NTI()local boolexpr QL1=Condition(function CY5)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real QXI=GetUnitX(IG1)local real QYI=GetUnitY(IG1)local real RM2=Atan2(QKI-QYI,QJI-QXI)local real IV1=PTI(GetUnitX(IG1)+30*Cos(RM2))local real IW1=PUI(GetUnitY(IG1)+30*Sin(RM2))local unit I01local integer SUI=GetUnitAbilityLevel(SFI,(1093683287))if(LoadBoolean(LY,(S5I),(384)))thencall SaveBoolean(LY,(S5I),(384),(false))set I01=CreateUnit(GetOwningPlayer(SFI),(1747988530),QXI,QYI,0)call SetUnitAbilityLevel(I01,(1093683506),SUI)call SetUnitAbilityLevel(I01,(1093683289),SUI)call UnitApplyTimedLife(I01,1112820806,12)elsecall SaveBoolean(LY,(S5I),(384),(true))endifcall SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,RM2*bj_RADTODEG)set B2=JAOset XO=SFIset JO=50*GetUnitAbilityLevel(SFI,(1093683287))call GroupEnumUnitsInRange(Z51,IV1,IW1,150,QL1)call ForGroup(Z51,function CX5)call NSI(Z51)if(IV1-QJI)*(IV1-QJI)+(IW1-QKI)*(IW1-QKI)<1600 thencall PauseTimer(t)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call KillUnit(IG1)call NSI(JAO)endifendfunctionfunction CK5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local group Z51=NTI()local boolexpr QL1=Condition(function CY5)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real QXI=GetUnitX(IG1)local real QYI=GetUnitY(IG1)local real RM2=(LoadReal(LY,(S5I),(13)))local real IV1=PTI(GetUnitX(IG1)+30*Cos(RM2))local real IW1=PUI(GetUnitY(IG1)+30*Sin(RM2))local unit I01local integer SUI=GetUnitAbilityLevel(SFI,(1093683287))if(LoadBoolean(LY,(S5I),(384)))thencall SaveBoolean(LY,(S5I),(384),(false))set I01=CreateUnit(GetOwningPlayer(SFI),(1747988530),QXI,QYI,0)call SetUnitAbilityLevel(I01,(1093683506),SUI)call SetUnitAbilityLevel(I01,(1093683289),SUI)call UnitApplyTimedLife(I01,1112820806,12)elsecall SaveBoolean(LY,(S5I),(384),(true))endifcall SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)set B2=JAOset XO=SFIset JO=50*GetUnitAbilityLevel(SFI,(1093683287))call GroupEnumUnitsInRange(Z51,IV1,IW1,150,QL1)call ForGroup(Z51,function CX5)call NSI(Z51)if(IV1-QJI)*(IV1-QJI)+(IW1-QKI)*(IW1-QKI)<1600 thencall PauseTimer(t)call FlushChildHashtable(LY,(S5I))call KillUnit(IG1)call NSI(JAO)endifendfunctionfunction CL5 takes unit PKI,integer MLI returns booleanif(GetItemTypeId(UnitItemInSlot(PKI,MLI))==1886613604)thenreturn trueendifif(GetItemTypeId(UnitItemInSlot(PKI,MLI))==1868983399)thenreturn trueendifreturn falseendfunctionfunction CM5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real DC1=(LoadReal(LY,(S5I),(57)))local integer TGI=0loopexitwhen TGI>5if CL5(SFI,TGI)thenif GetUnitAbilityLevel(SFI,(1110455351))==0 thencall SetItemDropOnDeath(UnitItemInSlot(SFI,TGI),true)if GetItemTypeId(UnitItemInSlot(SFI,TGI))==1868983399 thencall SetItemDroppable(UnitItemInSlot(SFI,TGI),true)endifelsecall SetItemDropOnDeath(UnitItemInSlot(SFI,TGI),false)if GetItemTypeId(UnitItemInSlot(SFI,TGI))==1868983399 thencall SetItemDroppable(UnitItemInSlot(SFI,TGI),false)endifendifendifset TGI=TGI+1endloopset DC1=DC1+0.2call SaveReal(LY,(S5I),(57),((DC1)*1.0))if GetUnitAbilityLevel(SFI,(1110455351))==0 thencall SetUnitPathing(SFI,true)elsecall SetUnitPathing(SFI,false)endifif DC1>30 thencall PauseTimer(t)call FlushChildHashtable(LY,(S5I))call SetUnitPathing(SFI,true)set TGI=0loopexitwhen TGI>5if CL5(SFI,TGI)thencall SetItemDropOnDeath(UnitItemInSlot(SFI,TGI),true)if GetItemTypeId(UnitItemInSlot(SFI,TGI))==1868983399 thencall SetItemDroppable(UnitItemInSlot(SFI,TGI),true)endifendifset TGI=TGI+1endloopendifendfunctionfunction CN5 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683287)endfunctionfunction CS5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real QXI=PTI(GetUnitX(SFI))local real QYI=PUI(GetUnitY(SFI))local unit IG1=CreateUnit(GetOwningPlayer(SFI),(1747988531),QXI,QYI,0)local timer t=CreateTimer()local integer S5I=GetHandleId(t)local group JAO=NTI()local location AM3local real RM2local real QJIlocal real QKIcall SetUnitPathing(IG1,false)call SaveGroupHandle(LY,(S5I),(133),(JAO))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(45),(IG1))if P8I!=null thencall SaveInteger(LY,(S5I),(30),(NKI(P8I)))call TimerStart(t,0.0375,true,function CJ5)elseset AM3=GetSpellTargetLoc()set QJI=GetLocationX(AM3)set QKI=GetLocationY(AM3)set RM2=Atan2(QKI-QYI,QJI-QXI)call SetUnitFacing(IG1,RM2*bj_RADTODEG)set QJI=PTI(QXI+2100*Cos(RM2))set QKI=PUI(QYI+2100*Sin(RM2))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call TimerStart(t,0.035,true,function CK5)endifset t=CreateTimer()set S5I=GetHandleId(t)call SetUnitPathing(SFI,false)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TimerStart(t,0.2,true,function CM5)endfunctionfunction MT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CN5))call TriggerAddAction(t,function CS5)call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,10,10,"DefaultEAXON")call Q1I((1093683506))call Q1I((1093683289))endfunctionconstant function Desolate_AbilityId takes nothing returns integerreturn 1093682776endfunctionfunction CT5 takes nothing returns booleanreturn IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitAbilityLevel(GetAttacker(),(1093682776))>0endfunctionfunction CR5 takes nothing returns booleanreturn IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction CP5 takes nothing returns nothinglocal unit Z4O=GetAttacker()local unit OU3=GetTriggerUnit()local group Z51=NTI()local boolexpr QL1=Condition(function CR5)local integer S5Icall GroupEnumUnitsInRange(Z51,GetUnitX(OU3),GetUnitY(OU3),325+25,QL1)call GroupRemoveUnit(Z51,OU3)if FirstOfGroup(Z51)==null thenset S5I=GetHandleId(Z4O)if((LoadInteger(LY,(GetHandleId((Z4O))),((4275))))==1)==false thencall UnitDamageTarget(Z4O,OU3,5+15*GetUnitAbilityLevel(Z4O,(1093682776)),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",OU3,"overhead"))call SCI(Z4O,4275,0.3)endifendifcall NSI(Z51)endfunctionfunction MR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function CT5))call TriggerAddAction(t,function CP5)endfunctionfunction CQ5 takes nothing returns nothinglocal real d=QLI(GetTriggerUnit(),GetEnumUnit())-25local real VM2=0if d<300 thenset VM2=1elseif d<1000 thenset VM2=(1000-d)/700endifif VM2>0 thenset NJ0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=truecall P6I(GetTriggerUnit(),GetEnumUnit(),3,VZI*VM2)set NJ0[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=falsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",GetEnumUnit(),"chest"))endifendfunctionfunction CU5 takes nothing returns booleanlocal unit SFI=GetTriggerUnit()local real PAI=GetEventDamage()local integer SUI=GetUnitAbilityLevel(SFI,1093684801)local group gif RSI(PAI)and GetUnitAbilityLevel(SFI,1112433775)==0 thenset g=NTI()set VZI=PAI*(0.06+0.04*SUI)call QGI(SFI,VZI)call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),1025,Condition(function C51))call ForGroup(g,function CQ5)call NSI(g)endifset SFI=nullset g=nullreturn falseendfunctionfunction D05 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit SFI=GetTriggerUnit()call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function CU5))set t=nullset SFI=nullendfunctionfunction DI5 takes nothing returns booleanif GetLearnedSkill()==1093684801 and GetUnitAbilityLevel(GetTriggerUnit(),1093684801)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall D05()endifreturn falseendfunctionfunction MP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function DI5))set t=nullendfunctionconstant function Haunt_AbilityCode takes nothing returns integerreturn 1093683257endfunctionconstant function Haunt_ImageCode takes nothing returns integerreturn 1093684793endfunctionconstant function Haunt_ImageBuffCode takes nothing returns integerreturn 1110455884endfunctionconstant function Haunt_RealityCode takes nothing returns integerreturn 1093683265endfunctionfunction D15 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683257)endfunctionfunction DO5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local unit SFI=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call SaveUnitHandle(LY,(GetHandleId(I01)),(387),(P8I))call IA1(I01,(1093684793))call SetUnitAbilityLevel(I01,(1093684793),GetUnitAbilityLevel(SFI,(1093683257)))call IssueTargetOrderById(I01,852274,SFI)endfunctionfunction D25 takes nothing returns booleanreturn IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction D35 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit IYO=(LoadUnitHandle(LY,(S5I),(386)))local unit P8I=(LoadUnitHandle(LY,(S5I),(387)))local integer D45=(LoadInteger(LY,(S5I),(385)))if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER thenset D45=D45+1call SaveInteger(LY,(S5I),(385),(D45))endifif GetTriggerEventId()==EVENT_UNIT_DEATH thencall DisableTrigger(GetTriggeringTrigger())call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call SaveInteger(LY,(S5I),(385),(D45))if P8I==GetTriggerUnit()thencall KillUnit(IYO)endifelseif IsUnitPaused(IYO)==false thenif D45==2 thencall SetUnitVertexColor(IYO,255,255,255,255)endifif D45>1 thencall DisableTrigger(GetTriggeringTrigger())call IssueTargetOrder(IYO,"attack",P8I)call EnableTrigger(GetTriggeringTrigger())elsecall DisableTrigger(GetTriggeringTrigger())call IssueTargetOrderById(IYO,851986,P8I)call EnableTrigger(GetTriggeringTrigger())endifendifendfunctionfunction D55 takes nothing returns booleanreturn GetUnitAbilityLevel(GetSummonedUnit(),(1110455884))>0endfunctionfunction D65 takes nothing returns nothinglocal unit I01=GetSummoningUnit()local unit IYO=GetSummonedUnit()local unit P8I=(LoadUnitHandle(LY,(GetHandleId(I01)),(387)))local trigger t=CreateTrigger()call SaveUnitHandle(LY,(GetHandleId(K1[GetPlayerId(GetOwningPlayer(I01))])),(7100+GetHandleId(IYO)),(P8I))call SetUnitPathing(IYO,false)call SetUnitMoveSpeed(IYO,400)call SetUnitX(IYO,GetUnitX(P8I))call SetUnitY(IYO,GetUnitY(P8I))call IssueTargetOrderById(IYO,851986,P8I)call SetUnitVertexColor(IYO,255,255,255,50)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddAction(t,function D35)call DestroyEffect(AddSpecialEffect("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdl",GetUnitX(IYO),GetUnitY(IYO)))call SaveUnitHandle(LY,(GetHandleId(t)),(387),(P8I))call SaveUnitHandle(LY,(GetHandleId(t)),(386),(IYO))call SaveInteger(LY,(GetHandleId(t)),(385),(0))call FlushChildHashtable(LY,(GetHandleId(I01)))endfunctionfunction D75 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local group Z51=NTI()local boolexpr QL1=Condition(function D25)local sound PGIcall IA1(GetTriggerUnit(),(1093683265))call SetUnitPathing(SFI,false)call GroupEnumUnitsInRect(Z51,bj_mapInitialPlayableArea,QL1)call ForGroup(Z51,function DO5)call SetUnitPathing(SFI,true)if FirstOfGroup(Z51)!=null thenset PGI=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")call StartSound(PGI)call KillSoundWhenDone(PGI)endifcall NSI(Z51)endfunctionfunction D85 takes nothing returns booleanreturn GetLearnedSkill()==(1093683257)and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),(1093683257))==1endfunctionfunction D95 takes nothing returns nothingcall IA1(GetTriggerUnit(),(1093683265))endfunctionfunction MQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D15))call TriggerAddAction(t,function D75)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function D55))call TriggerAddAction(t,function D65)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function D85))call TriggerAddAction(t,function D95)call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,10,10,"DefaultEAXON")call Q1I((1093684793))endfunctionfunction DA5 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1110455884)>0endfunctionfunction DB5 takes nothing returns nothinglocal real QWI=QMI(GetEnumUnit(),GetSpellTargetLoc())if QWI<JO thenset XO=GetEnumUnit()set JO=QWIendifendfunctionfunction DC5 takes nothing returns unitlocal group Z51=NTI()set XO=nullset JO=9999999call GroupEnumUnitsOfPlayer(Z51,GetOwningPlayer(GetTriggerUnit()),Condition(function DA5))call ForGroup(Z51,function DB5)set VVI=Z51set Z51=nullreturn XOendfunctionfunction Reality_KillOtherImages takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction DD5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=DC5()local unit JXO=(LoadUnitHandle(LY,(GetHandleId(SFI)),(7100+GetHandleId(P8I))))local real QJIlocal real QKIif P8I==null thencall PZI(GetOwningPlayer(SFI),GetObjectName(1848652634))elseset QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)call KillUnit(P8I)call NSI(VVI)set VVI=nullcall SetUnitX(SFI,QJI)call SetUnitY(SFI,QKI)if QNI(GetCameraEyePositionX(),GetCameraEyePositionY(),GetUnitX(P8I),GetUnitY(P8I))>1400 thencall PanCameraToTimedForPlayer(GetOwningPlayer(SFI),QJI,QKI,0)endifcall IssueTargetOrder(SFI,"attack",JXO)endifset SFI=nullset P8I=nullendfunctionfunction DE5 takes nothing returns booleanif GetSpellAbilityId()==1093683265 thencall DD5()endifreturn falseendfunctionfunction MU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function DE5))set t=nullendfunctionfunction DF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093873734)call UnitRemoveAbility(P7I,1093873751)call UnitRemoveAbility(P7I,1093873744)call IA1(P7I,1093873751)call SetUnitAbilityLevel(P7I,1093873751,SUI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction DG5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093873734)call UnitRemoveAbility(P7I,1093873751)call UnitRemoveAbility(P7I,1093873736)call IA1(P7I,1093873744)call SetUnitAbilityLevel(P7I,1093873744,SUI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function DF5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullreturn falseendfunctionfunction DH5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093873734)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function DG5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call UnitRemoveAbility(P7I,1093873751)call UnitRemoveAbility(P7I,1093873744)call IA1(P7I,1093873736)call SetUnitAbilityLevel(P7I,1093873736,SUI)set t=nullset P7I=nullendfunctionfunction DZ5 takes nothing returns booleanif GetSpellAbilityId()==1093873734 thencall DH5()endifreturn falseendfunctionfunction DV5 takes nothing returns nothinglocal integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093873734)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093873736,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093873751,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093873744,false)call IA1(GetTriggerUnit(),1093873751)call SetUnitAbilityLevel(GetTriggerUnit(),1093873751,SUI)endfunctionfunction DW5 takes nothing returns booleanif GetLearnedSkill()==1093873734 and IsUnitIllusion(GetTriggerUnit())==false thencall DV5()endifreturn falseendfunctionfunction LQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function DW5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DZ5))set t=nullendfunctionfunction DX5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real LVO=(LoadReal(LY,(GetHandleId(P7I)),(685)))call FlushChildHashtable(LY,(S5I))call S0I(t)if LVO<(TimerGetElapsed(M))or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall SaveReal(LY,(GetHandleId(P7I)),(685),((0)*1.0))call UnitRemoveAbility(P7I,1093809224)call UnitRemoveAbility(P7I,1110459715)endifset t=nullset P7I=nullreturn falseendfunctionfunction DY5 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P7I,1093809224)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809224,false)call SaveReal(LY,(GetHandleId(P7I)),(685),(((TimerGetElapsed(M))+VWI-0.01)*1.0))call TriggerRegisterTimerEvent(t,VWI,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function DX5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullendfunctionfunction DJ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real RM2=(LoadReal(LY,(S5I),(13)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local integer NPI=GetTriggerEvalCount(t)local real RS2=(LoadReal(LY,(S5I),(193)))local integer MKO=(LoadInteger(LY,(S5I),(12)))if NPI>35 thencall SaveReal(LY,(S5I),(193),((RS2*0.98)*1.0))endifif GetTriggerEventId()==EVENT_UNIT_DEATH or NPI>MKO thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))call UPI(x,y,150)set x=PTI(x+RS2*Cos(RM2))set y=PUI(y+RS2*Sin(RM2))if(IsPointInRegion(LN,((x)*1.0),((y)*1.0)))==false thencall SetUnitX(P8I,x)call SetUnitY(P8I,y)endifif NPI==1 and(LoadBoolean(LY,(S5I),(698)))==false thencall IssueTargetOrder(P7I,"attack",P8I)endifendifset t=nullset P8I=nullreturn falseendfunctionfunction DK5 takes unit P7I,unit P8I,boolean DL5,boolean DM5 returns nothinglocal trigger tlocal integer S5Ilocal real RM2=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093682997)local unit I01if DL5 thenendifif SUI>0 and GetUnitAbilityLevel(P7I,1112433775)==0 thenset I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093752657)call SetUnitAbilityLevel(I01,1093752657,SUI)if IssueTargetOrder(I01,"thunderbolt",P8I)thenset t=CreateTrigger()set S5I=GetHandleId(t)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",P7I,"weapon"))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(193),((2)*1.0))call SaveBoolean(LY,(S5I),(698),(DM5))call SaveInteger(LY,(S5I),(12),(80+20*SUI))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function DJ5))call P6I(P7I,P8I,1,GetUnitMoveSpeed(P7I)*(0.16+0.06*SUI))call DY5(P7I)endifif DM5==false thencall SCI(P7I,4276,1.5)endifendifset t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction DN5 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093682997)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and GetRandomInt(1,100)<=17 and((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4276))))==1)==false thencall DK5(GetAttacker(),GetTriggerUnit(),false,false)endifreturn falseendfunctionfunction LU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function DN5))set t=nullendfunctionfunction DS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093873970)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750840,true)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction DT5 takes unit P7I returns nothinglocal trigger tlocal integer S5Iif IC1(P7I)==true thencall UnitRemoveAbility(P7I,1093873970)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750840,true)elseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,12,false)call TriggerAddCondition(t,Condition(function DS5))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset t=nullendfunctionfunction DR5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),VLI)==false thencall GroupAddUnit(VLI,GetEnumUnit())call DK5(VYI,GetEnumUnit(),false,true)endifendfunctionfunction DP5 takes integer id returns booleanif id==1093750840 or id==1093873734 or id==1093682996 or id==1093747768 or id==1093682997 or id==1096904043 thenreturn trueendifif id==852002 or id==852003 or id==852004 or id==852005 or id==852006 or id==852007 thenreturn trueendifif id>1000000 thenreturn trueendifreturn falseendfunctionfunction DQ5 takes nothing returns booleanif(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(VYI))==true thenif QLI(VJI,GetFilterUnit())<VKI thenset VKI=QLI(VJI,GetFilterUnit())set VXI=GetFilterUnit()endifendifreturn falseendfunctionfunction DU5 takes unit P7I,unit P8I returns unitlocal group g=NTI()set GK=P7Iset VYI=P7Iset VXI=nullset VKI=999999set VJI=P8Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),4000,Condition(function DQ5))call NSI(g)set g=nullreturn VXIendfunctionfunction E05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real JC3=(550+50*SUI)*0.02local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real xlocal real ylocal real alocal real dlocal string fxlocal group gif(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==P7I)or GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or BH1(P7I)or(LoadReal(LY,(S5I),(442)))<(TimerGetElapsed(M))thenif(GetTriggerEventId()!=EVENT_UNIT_ISSUED_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER)or((GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)and DP5(GetIssuedOrderId())==false)thencall DT5(P7I)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call UnitRemoveAbility(P8I,1093809228)call UnitRemoveAbility(P8I,1110459716)call NSI((LoadGroupHandle(LY,(S5I),(187))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1)call KillUnit(I01)call SetUnitPathing(P7I,true)call SetUnitVertexColor(P7I,255,255,255,255)call UnitRemoveAbility(P7I,1093744441)call UPI(GetUnitX(P7I),GetUnitY(P7I),200)if GetTriggerEventId()!=EVENT_WIDGET_DEATH thencall ResetUnitAnimation(P7I)endifendifelseif GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==P8I thenset fx=""if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))or P0I(GetLocalPlayer())thenset fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"endifcall UnitRemoveAbility(P8I,1093809228)call UnitRemoveAbility(P8I,1110459716)set P8I=DU5(P7I,P8I)if P8I!=null thencall SaveUnitHandle(LY,(S5I),(17),(P8I))call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget(fx,P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget(fx,P8I,"overhead")))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+50)*1.0))call TriggerRegisterDeathEvent(t,P8I)elsecall DT5(P7I)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call UnitRemoveAbility(P8I,1093809228)call UnitRemoveAbility(P8I,1110459716)call NSI((LoadGroupHandle(LY,(S5I),(187))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1)call KillUnit(I01)call SetUnitPathing(P7I,true)call ResetUnitAnimation(P7I)call SetUnitVertexColor(P7I,255,255,255,255)call UnitRemoveAbility(P7I,1093744441)call SetUnitPosition(P7I,GetUnitX(P7I),GetUnitY(P7I))call UPI(GetUnitX(P7I),GetUnitY(P7I),500)endifelseset d=QNI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))if d<100 thencall DT5(P7I)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call UnitRemoveAbility(P8I,1093809228)call UnitRemoveAbility(P8I,1110459716)call NSI((LoadGroupHandle(LY,(S5I),(187))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1)call KillUnit(I01)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093683027)call SetUnitAbilityLevel(I01,1093683027,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)call SetUnitPathing(P7I,true)call SetUnitVertexColor(P7I,255,255,255,255)call UnitRemoveAbility(P7I,1093744441)call SetUnitPosition(P7I,GetUnitX(P7I),GetUnitY(P7I))call UPI(GetUnitX(P7I),GetUnitY(P7I),200)set VMI=SUIcall IssueTargetOrder(P7I,"attack",P8I)elseif GetTriggerEvalCount(t)==1 thencall DisableTrigger(t)call IssueImmediateOrder(P7I,"holdposition")call EnableTrigger(t)endifif ModuloInteger(GetTriggerEvalCount(t),65)==0 thenif GetUnitTypeId(P7I)==1160786520 thencall SetUnitAnimationByIndex(P7I,1)elsecall SetUnitAnimationByIndex(P7I,2)endifendifset a=UDI(P7I,P8I)*bj_DEGTORADcall SetUnitFacing(P7I,a*bj_RADTODEG)set x=II3+JC3*Cos(a)set y=I13+JC3*Sin(a)call SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))set VLI=(LoadGroupHandle(LY,(S5I),(187)))set g=NTI()set GK=P7Iset VYI=P7Icall GroupEnumUnitsInRange(g,x,y,325,Condition(function CA1))set VMI=SUIcall ForGroup(g,function DR5)call NSI(g)set g=nullif d<3000 and GetUnitAbilityLevel(P8I,1093809228)==0 thenendifendifendifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction EI5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429073,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093750840)local string fx=""call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750840,false)call IA1(P7I,1093873970)if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))or P0I(GetLocalPlayer())thenset fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"call PingMinimapEx(GetUnitX(P8I),GetUnitY(P8I),2,255,255,255,false)endifcall IssueTargetOrder(P7I,"move",P8I)call SetUnitPathing(P7I,false)if GetUnitTypeId(P7I)==1160786520 thencall SetUnitAnimationByIndex(P7I,1)elsecall SetUnitAnimationByIndex(P7I,2)endifcall SetUnitTimeScale(P7I,2.5)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093744441,false)call SetUnitVertexColor(P7I,255,255,255,100)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+50)*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P7I))*1.0))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget(fx,P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget(fx,P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget("war3mapImported\\ShockwaveMissilePurple.mdx",P7I,"origin")))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(t,Condition(function E05))set t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction E15 takes nothing returns booleanif GetSpellAbilityId()==1093750840 and NNI(GetSpellTargetUnit())==false thencall EI5()endifreturn falseendfunctionfunction LP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E15))set t=nullcall Q1I(1093687350)endfunctionfunction EO5 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real RM2=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))local integer SUI=4call DK5(P7I,P8I,true,true)set t=nullendfunctionfunction E25 takes nothing returns nothingcall EO5(VNI,GetEnumUnit())endfunctionfunction E35 takes unit P7I,unit Targer returns nothinglocal group g=NTI()set GK=P7Iset VNI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),275,Condition(function CA1))call ForGroup(g,function E25)call NSI(g)set g=nullendfunctionfunction E45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=GetTriggerEvalCount(t)local integer E55local integer SUIlocal real RM2local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real d=QNI(x,y,II3,I13)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))if GetTriggerEventId()==EVENT_UNIT_DEATH or NPI==200 or d>1800 thencall SetUnitVertexColor(P7I,255,255,255,255)call UnitShareVision(P8I,GetOwningPlayer(P7I),false)call UnitRemoveAbility(P7I,1093744441)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif NPI<100 thenset E55=NPIelseset E55=200-NPIendifcall SetUnitVertexColor(P7I,255,255,255,255*(100-E55)/100)if NPI==100 thenset SUI=(LoadInteger(LY,(S5I),(5)))set RM2=Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I))call SetUnitPosition(P7I,GetUnitX(P8I)+80*Cos(RM2),GetUnitY(P8I)+80*Sin(RM2))call SetUnitAnimation(P7I,"attack")call IssueTargetOrder(P7I,"attack",P8I)if GetUnitAbilityLevel(P7I,1093682996)>0 thencall EO5(P7I,P8I)elsecall E35(P7I,P8I)endifcall P6I(P7I,P8I,1,50+100*SUI)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction E65 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093682996)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093747768)endifcall UnitShareVision(P8I,GetOwningPlayer(P7I),true)call IssueImmediateOrder(P7I,"halt")call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call TriggerRegisterTimerEvent(t,0.001,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function E45))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093744441,false)set t=nullset P7I=nullset P8I=nullendfunctionfunction E75 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetUnitAnimation(P7I,"spell morph")call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction E85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call UnitShareVision(P8I,GetOwningPlayer(P7I),false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction E95 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0.,true)call TriggerAddCondition(t,Condition(function E75))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call TriggerRegisterTimerEvent(t,1.,true)call TriggerAddCondition(t,Condition(function E85))call UnitShareVision(GetSpellTargetUnit(),GetOwningPlayer(P7I),true)set t=nullset P7I=nullendfunctionfunction EA5 takes nothing returns booleanif GetSpellAbilityId()==1093682996 or GetSpellAbilityId()==1093747768 thenif NNI(GetSpellTargetUnit())==false thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall E65()elsecall E95()endifendifendifreturn falseendfunctionfunction M01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerAddCondition(t,Condition(function EA5))set t=nullendfunctionfunction EB5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093809973)if SUI==1 thencall IA1(P7I,1093809974)elseif SUI==2 thencall UnitRemoveAbility(P7I,1093809974)call IA1(P7I,1093809977)elseif SUI==3 thencall UnitRemoveAbility(P7I,1093809974)call UnitRemoveAbility(P7I,1093809977)call IA1(P7I,1093809975)elseif SUI==4 thencall UnitRemoveAbility(P7I,1093809974)call UnitRemoveAbility(P7I,1093809977)call UnitRemoveAbility(P7I,1093809975)call IA1(P7I,1093809976)endifset P7I=nullendfunctionfunction EC5 takes nothing returns booleanif GetLearnedSkill()==1093809973 and IsUnitIllusion(GetTriggerUnit())==false thencall EB5()endifreturn falseendfunctionfunction MO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function EC5))set t=nullendfunctionfunction Sunder_SwitchConditions takes nothing returns booleanreturn GetSpellAbilityId()==1093678930endfunctionfunction ED5 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real EE5=(LoadReal(LY,(S5I),(295)))local real EF5=(LoadReal(LY,(S5I),(296)))local integer SUI=GetUnitAbilityLevel(P7I,1093678929)local real EG5=0.2if GetSpellTargetUnit()==P7I thencall SetUnitState(P7I,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(P7I,UNIT_STATE_MAX_LIFE)*EF5*0.01,GetUnitState(P7I,UNIT_STATE_MAX_LIFE)*EG5))endifif GetSpellTargetUnit()==P8I thencall SetUnitLifePercentBJ(P8I,EE5)if GetUnitLifePercent(P8I)<25.00 and SUI==1 and GetUnitState(P8I,UNIT_STATE_LIFE)>1 thencall SetUnitLifePercentBJ(P8I,20.00)endifif GetUnitLifePercent(P8I)<20.00 and SUI==2 and GetUnitState(P8I,UNIT_STATE_LIFE)>1 thencall SetUnitLifePercentBJ(P8I,20.00)endifif GetUnitLifePercent(P8I)<15.00 and SUI==3 and GetUnitState(P8I,UNIT_STATE_LIFE)>1 thencall SetUnitLifePercentBJ(P8I,20.00)endifendifif GetTriggerEvalCount(t)==2 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset P7I=nullset P8I=nullset t=nullendfunctionfunction EH5 takes nothing returns booleanif GetSpellAbilityId()==1093678930 thencall ED5()endifreturn falseendfunctionfunction EZ5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(295),((GetUnitLifePercent(P7I))*1.0))call SaveReal(LY,(S5I),(296),((GetUnitLifePercent(P8I))*1.0))call TriggerAddCondition(t,Condition(function EH5))set I01=CreateUnit(GetOwningPlayer(P8I),1697656921,GetUnitX(P8I),GetUnitY(P8I),0)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_SPELL_EFFECT)call IA1(I01,1093678930)call IssueTargetOrder(I01,"thunderbolt",P7I)call ShowUnit(I01,false)call SetUnitPathing(I01,false)call SetUnitInvulnerable(I01,true)call UnitApplyTimedLife(I01,1112820806,0.2)set I01=CreateUnit(GetOwningPlayer(P7I),1697656921,GetUnitX(P7I),GetUnitY(P7I),0)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_SPELL_EFFECT)call IA1(I01,1093678930)call IssueTargetOrder(I01,"thunderbolt",P8I)call ShowUnit(I01,false)call SetUnitPathing(I01,false)call SetUnitInvulnerable(I01,true)call UnitApplyTimedLife(I01,1112820806,0.2)set t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction EV5 takes nothing returns booleanif GetSpellAbilityId()==1093678929 thencall EZ5()endifreturn falseendfunctionfunction MI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EV5))endfunctionfunction EW5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IYO=(LoadUnitHandle(LY,(S5I),(335)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitRemoveAbility(P8I,1093809751)call UnitRemoveAbility(P8I,1110459722)call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()!=IYO thencall KillUnit(IYO)endifelsecall IssueTargetOrder(IYO,"attack",P8I)if RKI(P8I)thencall UnitRemoveAbility(P8I,1093809751)call UnitRemoveAbility(P8I,1110459722)endifendifset t=nullset IYO=nullset P8I=nullreturn falseendfunctionfunction EX5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit IYOif GetSummoningUnit()==I01 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set IYO=GetSummonedUnit()set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterDeathEvent(t,IYO)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function EW5))call SaveUnitHandle(LY,(S5I),(335),(IYO))call SaveUnitHandle(LY,(S5I),(17),(P8I))call UnitAddAbility(IYO,1097625443)call SetUnitPosition(IYO,GetUnitX(P8I)+100,GetUnitY(P8I)+100)call IssueTargetOrder(IYO,"attack",P8I)call SetUnitMoveSpeed(IYO,522)call SetUnitVertexColorBJ(IYO,100,100,100,60)endifset t=nullset P8I=nullset P7I=nullset I01=nullreturn falseendfunctionfunction EY5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093815130)local integer idlocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)local trigger tlocal integer S5Icall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809751,false)if BJ1(P8I)==false thencall AX1(P8I,1093809751,1,1.5+SUI,1110459722)endifset t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function EX5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call IA1(I01,1093809227)call SetUnitAbilityLevel(I01,1093809227,SUI)call IssueTargetOrderById(I01,852274,P8I)set P7I=nullset P8I=nullset I01=nullset t=nullcall IO1(MF,GetUnitX(P8I),GetUnitY(P8I))set P7I=nullendfunctionfunction EJ5 takes nothing returns booleanif GetSpellAbilityId()==1093815130 thencall EY5()endifreturn falseendfunctionfunction M11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EJ5))set t=nullendfunctionfunction EK5 takes nothing returns nothinglocal unit P7I=GetSummoningUnit()local unit IYO=GetSummonedUnit()call SelectUnitAddForPlayer(IYO,GetOwningPlayer(P7I))call UnitAddAbility(IYO,1093815129)call UnitRemoveAbility(IYO,1093815129)call SetUnitState(IYO,UNIT_STATE_LIFE,GetUnitState(IYO,UNIT_STATE_MAX_LIFE))call SetUnitPosition(IYO,GetUnitX(IYO),GetUnitY(IYO))set P7I=nullset IYO=nullendfunctionfunction EL5 takes nothing returns booleanif GetUnitAbilityLevel(GetSummonedUnit(),1110459721)>0 thencall EK5()endifreturn falseendfunctionfunction EM5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit I01local integer SUI=GetUnitAbilityLevel(P7I,1093815128)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093679185)call SetUnitAbilityLevel(I01,1093679185,SUI)call IssueTargetOrderById(I01,852274,P7I)set P7I=nullset I01=nullendfunctionfunction EN5 takes nothing returns booleanif GetSpellAbilityId()==1093815128 and GetUnitTypeId(GetTriggerUnit())==1164277353 thencall EM5()endifreturn falseendfunctionfunction M41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EN5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function EL5))set t=nullendfunctionfunction ES5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>(4*(4+SUI))or RKI(P8I)or QLI(P7I,P8I)>700 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093751361 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093751361)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750856,true)call KillUnit(I01)endifelseif IsUnitVisible(P8I,GetOwningPlayer(P7I))==false thenif(LoadInteger(LY,(S5I),(34)))==1 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)elsecall SaveInteger(LY,(S5I),(34),(1))endifelsecall SaveInteger(LY,(S5I),(34),(0))if IsUnitAlly(P7I,GetOwningPlayer(P8I))==false thencall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+SUI*25.0/4.0)elsecall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+SUI*50.0/4.0)endifendifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction ET5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,1093751361)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750856,true)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)==1 thencall IssueImmediateOrderById(P7I,851993)endifif IsUnitAlly(P7I,GetOwningPlayer(P8I))==false thencall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))elsecall SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))endifendifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction ER5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093750856)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01if IsUnitAlly(P7I,GetOwningPlayer(P8I))==false thenset I01=CreateUnit(GetOwningPlayer(P7I),1966092615,0,0,0)call IA1(I01,1093678156)call SetUnitAbilityLevel(I01,1093678156,SUI)call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))call IssueTargetOrderById(I01,852487,P8I)elsecall IA1(P7I,1093751361)call UnitMakeAbilityPermanent(P7I,true,1093751361)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750856,false)set I01=CreateUnit(DO,1966092615,0,0,0)call IA1(I01,1093678156)call SetUnitAbilityLevel(I01,1093678156,SUI)call SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))call IssueTargetOrderById(I01,852487,P7I)endifcall TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ES5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ET5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))set P7I=nullset P8I=nullset t=nullendfunctionfunction EP5 takes nothing returns booleanif GetSpellAbilityId()==1093750856 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or NNI(GetSpellTargetUnit())==false)thencall ER5()endifreturn falseendfunctionfunction M31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EP5))endfunctionfunction EQ5 takes nothing returns booleanreturn GetSpellAbilityId()==1093683252endfunctionfunction EU5 takes nothing returns nothinglocal unit PKI=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(PKI,1093683252)local unit I01=CreateUnit(GetOwningPlayer(PKI),1697656901,GetUnitX(PKI),GetUnitY(PKI),0)call UnitAddAbility(I01,1093814862)call SetUnitAbilityLevel(I01,1093814862,SUI)call IssueTargetOrderById(I01,852274,PKI)endfunctionfunction M21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EQ5))call TriggerAddAction(t,function EU5)endfunctionfunction F05 takes nothing returns booleanreturn GetSpellAbilityId()==1093678134 and NNI(GetSpellTargetUnit())==falseendfunctionfunction FI5 takes nothing returns nothinglocal unit t=GetSpellTargetUnit()local real F15=(60.00+(50.00*I2R(GetUnitAbilityLevelSwapped(1093678134,GetTriggerUnit()))))call UnitDamageTargetBJ(GetTriggerUnit(),t,F15,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_COLD)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",t,"chest"))endfunctionfunction M61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F05))call TriggerAddAction(t,function FI5)endfunctionfunction FO5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=GetEventDamageSource()local integer SUI=GetUnitAbilityLevel(P7I,1093678149)local real d=GetEventDamage()local real QHI=(LoadReal(LY,(S5I),(412)))local real Z7O=(LoadReal(LY,(S5I),(411)))local real F25=650-50*SUIif T2I(GetOwningPlayer(P8I))thenif(Z7O+VSI)<(TimerGetElapsed(M))thenset QHI=0endifset Z7O=(TimerGetElapsed(M))set QHI=QHI+dif QHI>F25 and GetUnitAbilityLevel(P7I,1112433775)==0 thenset QHI=0call EO1(P7I)call DU1(P7I,0,0)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",P7I,"origin"))endifcall SaveReal(LY,(S5I),(412),((QHI)*1.0))call SaveReal(LY,(S5I),(411),((Z7O)*1.0))endifset t=nullset P7I=nullreturn falseendfunctionfunction F35 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function FO5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(412),((0)*1.0))call SaveReal(LY,(S5I),(411),(((TimerGetElapsed(M)))*1.0))set t=nullset P7I=nullendfunctionfunction F45 takes nothing returns booleanif GetLearnedSkill()==1093678149 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678149)==1 thencall F35()endifreturn falseendfunctionfunction M51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function F45))set t=nullendfunctionfunction F55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset g=nullreturn falseendfunctionfunction F65 takes group g returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveGroupHandle(LY,(S5I),(22),(g))call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function F55))set t=nullendfunctionfunction F75 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit I01local integer i=1local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2local real y2local real PAIlocal real DC1local integer SUI=GetUnitAbilityLevel(SFI,1093810505)local group g=NTI()local real d=500if SUI==1 thenset DC1=1.5set PAI=200elseif SUI==2 thenset DC1=1.8set PAI=290elseif SUI==3 thenset DC1=2.25set PAI=380endifloopexitwhen i>16set x2=x1+(800)*Cos(22.5*i*bj_DEGTORAD)set y2=y1+(800)*Sin(22.5*i*bj_DEGTORAD)call DS1(SFI,null,PAI,DC1,0.52,x1,y1,x2,y2,250,g,false,775)set i=i+1endloopcall F65(g)set SFI=nullset I01=nullset g=nullendfunctionfunction F85 takes nothing returns booleanif GetSpellAbilityId()==1093810505 thencall F75()endifreturn falseendfunctionfunction M71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F85))call Q1I(1093687350)set t=nullendfunctionfunction F95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(715)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))thencall UnitRemoveAbility(P8I,1093808696)call UnitRemoveAbility(P8I,1093818679)call UnitRemoveAbility(P8I,1093818678)call UnitRemoveAbility(P8I,1093818677)call UnitRemoveAbility(P8I,1110460481)call UnitRemoveAbility(P8I,1110459704)call UnitRemoveAbility(P8I,1110460482)call UnitRemoveAbility(P8I,1110460473)endifset t=nullset P8I=nullreturn falseendfunctionfunction FA5 takes unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(VTI,1093808694)if SUI==1 thencall IA1(P8I,1093808696)elseif SUI==2 thencall IA1(P8I,1093818679)elseif SUI==3 thencall IA1(P8I,1093818678)elseif SUI==4 thencall IA1(P8I,1093818677)endifcall TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function F95))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(GetHandleId(P8I)),(715),((5.9+(TimerGetElapsed(M)))*1.0))set t=nullendfunctionfunction FB5 takes nothing returns nothingif GetUnitTypeId(GetEnumUnit())==1848651852 thenreturnendifif BJ1(GetEnumUnit())==false thencall FA5(GetEnumUnit())endifcall SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093808696,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093818679,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093818678,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093818677,false)call P6I(VTI,GetEnumUnit(),2,25+50*VRI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",GetEnumUnit(),"chest"))endfunctionfunction FC5 takes nothing returns nothinglocal group g=NTI()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093808694)set GK=P7Iset VRI=SUIset VTI=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),375+25,Condition(function CH1))call ForGroup(g,function FB5)call NSI(g)set g=nullset P7I=nullendfunctionfunction FD5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitTimeScale(P7I,1)set t=nullset P7I=nullreturn falseendfunctionfunction FE5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.3,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function FD5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SetUnitTimeScale(P7I,2)set t=nullset P7I=nullendfunctionfunction FF5 takes nothing returns booleanif GetSpellAbilityId()==1093808694 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall FC5()elsecall FE5()endifendifreturn falseendfunctionfunction M81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function FF5))set t=nullendfunctionconstant function Healing_RawCode takes nothing returns integerreturn 1093685074endfunctionfunction FG5 takes nothing returns booleanreturn GetSpellAbilityId()==(1093685074)endfunctionfunction FH5 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0endfunctionfunction FZ5 takes nothing returns nothingcall P6I(XO,GetEnumUnit(),2,JO)endfunctionfunction FV5 takes unit P7I,unit P8I,real PAI returns nothinglocal group Z51=NTI()local boolexpr QL1=Condition(function FH5)set XO=P7Iset JO=PAIcall GroupEnumUnitsInRange(Z51,GetUnitX(P8I),GetUnitY(P8I),185+25,QL1)call ForGroup(Z51,function FZ5)call NSI(Z51)endfunctionfunction FW5 takes nothing returns booleanreturn IsUnitInGroup(GetFilterUnit(),B2)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IC1(GetFilterUnit())==false and GetFilterUnit()!=VPIendfunctionfunction FX5 takes group FY5,unit FJ5,unit P7I,unit OriginalTargetreturns returns unitlocal group Z51=NTI()local boolexpr QL1=Condition(function FW5)local unit FK5=nulllocal unit FL5set B2=FY5set XO=P7Icall GroupEnumUnitsInRange(Z51,GetUnitX(FJ5),GetUnitY(FJ5),500,QL1)set FL5=FirstOfGroup(Z51)set FK5=FL5loopexitwhen FL5==nullif GetUnitState(FL5,UNIT_STATE_LIFE)!=GetUnitState(FL5,UNIT_STATE_MAX_LIFE)thenif FL5!=P7I and IsUnitType(FL5,UNIT_TYPE_HERO)==true and IsUnitType(FK5,UNIT_TYPE_HERO)==false thenset FK5=FL5elseif FL5!=P7I and GetUnitState(FL5,UNIT_STATE_LIFE)<GetUnitState(FK5,UNIT_STATE_LIFE)and IsUnitType(FL5,UNIT_TYPE_HERO)==true and IsUnitType(FK5,UNIT_TYPE_HERO)==true thenset FK5=FL5elseif FL5!=P7I and IsUnitType(FK5,UNIT_TYPE_HERO)==false and GetUnitState(FL5,UNIT_STATE_LIFE)<GetUnitState(FK5,UNIT_STATE_LIFE)thenset FK5=FL5elseif FL5==P7I thenset FK5=FL5endifendifcall GroupRemoveUnit(Z51,FL5)set FL5=FirstOfGroup(Z51)endloopcall NSI(Z51)return FK5endfunctionfunction FM5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local string FN5="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"local string FS5="origin"local unit array FT5local integer xlocal integer i=1local integer SUI=GetUnitAbilityLevel(SFI,(1093685074))local real PAI=60+SUI*20local group FY5=NTI()local integer FR5local boolean FP5=falseset VPI=SFIif SUI==1 thenset FR5=3elseif SUI==2 thenset FR5=4elseif SUI==3 thenset FR5=5elseif SUI==4 thenset FR5=6endifcall SetUnitState(SFI,UNIT_STATE_LIFE,GetUnitState(SFI,UNIT_STATE_LIFE)+PAI)call FV5(SFI,SFI,PAI)call GroupAddUnit(FY5,SFI)call U5I(FN5,SFI,FS5,2)if P8I==SFI thenset FT5[i]=FX5(FY5,SFI,SFI,P8I)elseset FT5[i]=P8Iendifif FT5[i]==null thencall NSI(FY5)returnendifcall SetUnitState(FT5[i],UNIT_STATE_LIFE,GetUnitState(FT5[i],UNIT_STATE_LIFE)+PAI)call FV5(SFI,FT5[i],PAI)call GroupAddUnit(FY5,FT5[i])call U5I(FN5,FT5[i],FS5,2)call UGI("SPLK",GetUnitX(SFI),GetUnitY(SFI),GetUnitX(FT5[i]),GetUnitY(FT5[i]),0.3,0.5,0.9,1,0.7)set i=2loopexitwhen i>FR5 or FP5set FT5[i]=FX5(FY5,FT5[i-1],SFI,P8I)if FT5[i]==null thenset FP5=trueelsecall GroupAddUnit(FY5,FT5[i])call U5I(FN5,FT5[i],FS5,2)call SetUnitState(FT5[i],UNIT_STATE_LIFE,GetUnitState(FT5[i],UNIT_STATE_LIFE)+PAI)call FV5(SFI,FT5[i],PAI)call UGI("SPLK",GetUnitX(FT5[i-1]),GetUnitY(FT5[i-1]),GetUnitX(FT5[i]),GetUnitY(FT5[i]),0.3,0.5,0.9,1,0.7)set i=i+1endifendloopcall NSI(FY5)endfunctionfunction NY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FG5))call TriggerAddAction(t,function FM5)endfunctionconstant function BlowDart_RawCode takes nothing returns integerreturn 1093818422endfunctionconstant function BlowDart_SlowCode takes nothing returns integerreturn 1093684810endfunctionconstant function BlowDart_StunCode takes nothing returns integerreturn 1093684811endfunctionconstant function BlowDart_IconCode takes nothing returns integerreturn 1093685079endfunctionfunction FQ5 takes nothing returns booleanreturn GetSpellAbilityId()==(1093818422)and NNI(GetSpellTargetUnit())==falseendfunctionfunction FU5 takes unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,(1093684810))call SetUnitAbilityLevel(I01,(1093684810),SUI)call IssueTargetOrder(I01,"slow",P8I)endfunctionfunction G05 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,(1093818422))local integer KO2=GetTriggerExecCount(t)local real PAI=8+6*SUIlocal unit I01=(LoadUnitHandle(LY,(S5I),(19)))if SUI==1 thencall IA1(P8I,(1093685079))if KO2==1 thencall FU5(P7I,P8I,1)endifif KO2==2 thencall FU5(P7I,P8I,1)endifif KO2>2 thencall P6I(I01,P8I,2,PAI)endifif KO2==8 thencall UnitRemoveAbility(P8I,(1093685079))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifif SUI==2 thencall IA1(P8I,(1093685079))if KO2==1 thencall FU5(P7I,P8I,1)endifif KO2==2 thencall FU5(P7I,P8I,2)endifif KO2>2 thencall P6I(I01,P8I,2,PAI)endifif KO2==8 thencall UnitRemoveAbility(P8I,(1093685079))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifif SUI==3 thencall IA1(P8I,(1093685079))if KO2==1 thencall FU5(P7I,P8I,2)endifif KO2==2 thencall FU5(P7I,P8I,3)endifif KO2>2 thencall P6I(I01,P8I,2,PAI)endifif KO2==8 thencall UnitRemoveAbility(P8I,(1093685079))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifif SUI==4 thencall IA1(P8I,(1093685079))if KO2==1 thencall FU5(P7I,P8I,2)endifif KO2==2 thencall DD1(P7I,P8I,1.0)endifif KO2>2 thencall P6I(I01,P8I,2,PAI)endifif KO2==8 thencall UnitRemoveAbility(P8I,(1093685079))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset I01=nullendfunctionfunction GI5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GKlocal unit P8I=HKlocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddAction(t,function G05)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call FU5(P7I,P8I,1)set I01=nullendfunctionfunction G15 takes nothing returns nothinglocal trigger t=IJ1(GetTriggerUnit(),GetSpellTargetUnit(),1747993937,"GI5",1300,true)local integer S5I=GetHandleId(t)set t=nullendfunctionfunction NJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FQ5))call TriggerAddAction(t,function G15)call Q1I((1093684810))call Q1I((1093684811))endfunctionfunction GO5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if IC1(P8I)==false thencall UnitRemoveAbility(P8I,1093684821)call UnitRemoveAbility(P8I,1093684823)elseif IsUnitType(P8I,UNIT_TYPE_HERO)==true thencall OC1(P8I,1093684821,5.1)call OC1(P8I,1093684823,5.1)endifset P8I=nullendfunctionfunction G25 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if IC1(P8I)==false thenif IsUnitAlly(P8I,JK)==false thenif UJ==0 thencall IA1(P8I,1093684821)elsecall SetUnitAbilityLevel(P8I,1093684821,R2I(VQI*(UJ+1)))endifelseif UJ==0 thencall IA1(P8I,1093684823)elsecall SetUnitAbilityLevel(P8I,1093684823,R2I(VQI*(UJ+1)))endifendifendifset P8I=nullendfunctionfunction G35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))local player p=(LoadPlayerHandle(LY,(S5I),(54)))local integer NPI=GetTriggerEvalCount(t)local integer DC1=(LoadInteger(LY,(S5I),(188)))local real G45=(LoadReal(LY,(S5I),(68)))set VQI=G45set JK=pset UJ=NPIif NPI>=DC1/1.0 thencall ForGroup(g,function GO5)call NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall ForGroup(g,function G25)endifset t=nullset g=nullset p=nullreturn falseendfunctionfunction G55 takes nothing returns nothingcall U5I(LK,GetEnumUnit(),"chest",3)call U5I(LK,GetEnumUnit(),"chest",3)call U5I(LK,GetEnumUnit(),"right hand",3)call U5I(LK,GetEnumUnit(),"left hand",3)endfunctionfunction G65 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local group g=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(SFI,1093742673)local integer DC1=24local real G45=0.5+0.25*SUIlocal real x=GetLocationX(l)local real y=GetLocationY(l)local unit I01=CreateUnit(GetOwningPlayer(SFI),1747988535,x,y,0)local integer a=0local boolean CK3=falseif SUI==0 thenset SUI=GetUnitAbilityLevel(SFI,1093747778)set DC1=24set G45=1.0+0.25*SUIset CK3=trueendifcall RemoveLocation(l)set LK=""set UJ=DC1set a=255set LK="Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"call SetUnitVertexColor(I01,255,255,255,a)call UnitApplyTimedLife(I01,1112820806,5)if CK3 thencall GroupEnumUnitsInRange(g,x,y,800,Condition(function D51))elsecall GroupEnumUnitsInRange(g,x,y,600,Condition(function D51))endifcall ForGroup(g,function G55)call SaveGroupHandle(LY,(S5I),(22),(g))call SavePlayerHandle(LY,(S5I),(54),(GetOwningPlayer(SFI)))call SaveInteger(LY,(S5I),(188),(DC1))call SaveReal(LY,(S5I),(68),((G45)*1.0))call TriggerRegisterTimerEvent(t,1.0,true)call TriggerAddCondition(t,Condition(function G35))call TriggerEvaluate(t)set SFI=nullset l=nullset g=nullset t=nullendfunctionfunction G75 takes nothing returns booleanif GetSpellAbilityId()==1093742673 or GetSpellAbilityId()==1093747778 thencall G65()endifreturn falseendfunctionfunction NK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function G75))call Q1I(1093684821)call Q1I(1093684823)set t=nullendfunctionfunction G85 takes string UWI,unit P8I,unit SFI returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,0.033)call SetTextTagPosUnit(tt,P8I,64)call SetTextTagColor(tt,160,0,255,255)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,0.15)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,0.65)if IsUnitAlly(SFI,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifset tt=nullendfunctionfunction G95 takes real DC1 returns stringif DC1>4.5 thenreturn"5.0"elseif DC1>4.0 thenreturn"4.5"elseif DC1>3.5 thenreturn"4.0"elseif DC1>3.0 thenreturn"3.5"elseif DC1>2.5 thenreturn"3.0"elseif DC1>2.0 thenreturn"2.5"elseif DC1>1.5 thenreturn"2.0"elseif DC1>1.0 thenreturn"1.5"elseif DC1>0.5 thenreturn"1.0"elseif DC1>0.0 thenreturn"0.5"elsereturn"0.0"endifreturn" "endfunctionfunction GA5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=GetTriggerEvalCount(t)if NPI>11 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall G85(G95(5.5-0.5*NPI),P8I,P8I)endifset t=nullset P8I=nullreturn falseendfunctionfunction GB5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real PAI=(LoadReal(LY,(S5I),(20)))local real GC5=QDI(GetUnitState(P8I,UNIT_STATE_LIFE)-PAI,1)local real GD5=(LoadReal(LY,(GetHandleId(P8I)),(243)))call SetUnitState(P8I,UNIT_STATE_LIFE,GC5)call SaveReal(LY,(GetHandleId(P8I)),(243),((GD5-PAI)*1.0))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction GE5 takes unit P8I,real PAI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real GD5=(LoadReal(LY,(GetHandleId(P8I)),(243)))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveReal(LY,(GetHandleId(P8I)),(243),((GD5+PAI)*1.0))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function GB5))set t=nullendfunctionfunction GF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8Ilocal real D14local real PAIlocal integer NPI=GetTriggerEvalCount(t)local real GD5local real GG5=(LoadReal(LY,(S5I),(389)))local real GH5=(LoadReal(LY,(S5I),(390)))if GG5!=(TimerGetElapsed(M))thenset GG5=(TimerGetElapsed(M))set GH5=0call SaveReal(LY,(S5I),(389),((GG5)*1.0))call SaveReal(LY,(S5I),(390),((GH5)*1.0))endifif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenset P8I=GetTriggerUnit()set GD5=(LoadReal(LY,(GetHandleId(P8I)),(243)))set D14=GetUnitState(P8I,UNIT_STATE_LIFE)set PAI=GetEventDamage()if((D14-GD5-GH5)-PAI)<1 thencall SetUnitState(P8I,UNIT_STATE_LIFE,D14+PAI+GH5)call GE5(P8I,PAI)elseset GH5=GH5+PAIcall SaveReal(LY,(S5I),(390),((GH5)*1.0))endifelsecall SaveInteger(LY,(GetHandleId(((LoadUnitHandle(LY,(S5I),(17)))))),((2485)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility((LoadUnitHandle(LY,(S5I),(17))),1093808457)call UnitRemoveAbility((LoadUnitHandle(LY,(S5I),(17))),1110456132)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset P8I=nullset t=nullreturn falseendfunctionfunction GZ5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()call IA1(P8I,1093808457)call TriggerRegisterTimerEvent(t,5,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function GF5))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\DarkHands.mdx",P8I,"overhead")))call SaveReal(LY,(GetHandleId(P8I)),(243),((0)*1.0))call SaveReal(LY,(S5I),(389),(((TimerGetElapsed(M)))*1.0))call SaveReal(LY,(S5I),(390),((0)*1.0))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(GetHandleId((P8I))),((2485)),(1))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function GA5))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction GV5 takes nothing returns booleanif GetSpellAbilityId()==1093742668 thencall GZ5()endifreturn falseendfunctionfunction NL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GV5))set t=nullendfunctionfunction GW5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEvalCount(t)>5 or GetUnitAbilityLevel(P8I,1110458705)==0 or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall S0I(t)call FlushChildHashtable(LY,(S5I))elsecall P6I(P7I,P8I,1,30*SUI-30)call UYI(I2S(30*SUI-30),3,P8I,0.025,160,255,0,230)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction GX5 takes unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local trigger tlocal integer S5Icall IA1(I01,1093744462)call SetUnitAbilityLevel(I01,1093744462,SUI)if IssueTargetOrder(I01,"shadowstrike",P8I)thencall P6I(P7I,P8I,1,25*SUI)call UYI(I2S(25*SUI)+"!",3,P8I,0.025,160,255,0,230)if SUI>1 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function GW5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullendifendifset I01=nullendfunctionfunction GY5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if IsUnitInGroup(P8I,XK)==false thencall GX5(W0I,P8I,VUI)call GroupAddUnit(XK,P8I)endifset P8I=nullendfunctionfunction GJ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RM2=(LoadReal(LY,(S5I),(13)))local group H03local real xlocal real ylocal real GK5local real GL5local real RS2=30local unit GM5set VUI=SUIif GetTriggerEvalCount(t)>28 thencall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(I01,false)call KillUnit(I01)elseset x=GetUnitX(I01)set y=GetUnitY(I01)set H03=NTI()set XK=gset GK=SFIset W0I=SFIcall GroupEnumUnitsInRange(H03,x,y,150,Condition(function CH1))call ForGroup(H03,function GY5)call NSI(H03)set GK5=PTI(x+RS2*Cos(RM2*bj_DEGTORAD))set GL5=PUI(y+RS2*Sin(RM2*bj_DEGTORAD))call SetUnitX(I01,GK5)call SetUnitY(I01,GL5)if ModuloInteger(GetTriggerEvalCount(t),3)==0 thenset GM5=CreateUnit(GetOwningPlayer(I01),1865429335,GK5,GL5,0)call KillUnit(GM5)set GM5=nullendifendifset t=nullset g=nullset H03=nullset I01=nullset SFI=nullreturn falseendfunctionfunction GN5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2=GetLocationX(l)local real y2=GetLocationY(l)local real RM2=UEI(x1,y1,x2,y2)local integer SUI=GetUnitAbilityLevel(SFI,1093744435)local unit I01=CreateUnit(GetOwningPlayer(SFI),1747990347,x1,y1,RM2)call IO1(VE,x1,y1)call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.025,true)call TriggerAddCondition(t,Condition(function GJ5))call RemoveLocation(l)set t=nullset I01=nullset g=nullset SFI=nullset l=nullendfunctionfunction GS5 takes nothing returns booleanif GetSpellAbilityId()==1093744435 thencall GN5()endifreturn falseendfunctionfunction M91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GS5))set t=nullendfunctionfunction GT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real PAI=(LoadReal(LY,(S5I),(20)))local real DC1=(LoadReal(LY,(S5I),(57)))local real IS5=0.75if IsUnitType(P8I,UNIT_TYPE_HERO)==false and IsUnitIllusion(P8I)==false thenset IS5=1.0endifif GetUnitState(P8I,UNIT_STATE_LIFE)<=PAI*IS5 thenset PAI=QDI(GetUnitState(P8I,UNIT_STATE_LIFE)/IS5-2,0)endifif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitRemoveAbility(P8I,1093752629)call UnitRemoveAbility(P8I,1110454840)call S0I(t)call FlushChildHashtable(LY,(S5I))elseset DC1=DC1-1call SaveReal(LY,(S5I),(57),((DC1)*1.0))call P6I(P7I,P8I,1,PAI)if DC1<=0 thencall UnitRemoveAbility(P8I,1093752629)call UnitRemoveAbility(P8I,1110454840)call S0I(t)call FlushChildHashtable(LY,(S5I))endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction GR5 takes unit P8I,unit P7I,real DC1,real PAI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,1093752629)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function GT5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveReal(LY,(S5I),(57),((DC1)*1.0))call TriggerEvaluate(t)set t=nullendfunctionfunction GP5 takes nothing returns nothingif GetUnitAbilityLevel(GetEnumUnit(),1093752629)==0 thencall GR5(GetEnumUnit(),WII,W1I,WOI)endifendfunctionfunction GQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real DC1=(LoadReal(LY,(S5I),(57)))local real PAI=(LoadReal(LY,(S5I),(20)))local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Iset WII=P7Iset W1I=DC1set WOI=PAIcall GroupEnumUnitsInRange(g,GetUnitX(IG1),GetUnitY(IG1),256+25,Condition(function CA1))call ForGroup(g,function GP5)call NSI(g)set g=nullendifset t=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction GU5 takes unit IG1,unit P7I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real DC1=12local real PAI=36if SUI==2 thenset DC1=14set PAI=58elseif SUI==3 thenset DC1=15set PAI=81elseif SUI==4 thenset DC1=16set PAI=108endifcall TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterDeathEvent(t,IG1)call TriggerAddCondition(t,Condition(function GQ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call SaveReal(LY,(S5I),(57),((DC1)*1.0))set t=nullendfunctionfunction H05 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local integer HI5local integer i=1local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local unit I01if GetSpellAbilityId()==1093677363 thenset HI5=GetUnitAbilityLevel(SFI,1093677363)elseset HI5=GetUnitAbilityLevel(SFI,1093681462)+1endifloopexitwhen i>18set I01=CreateUnit(GetOwningPlayer(SFI),1697657143,x,y,0)call IssuePointOrder(I01,"move",x+675*Cos(i*20*bj_DEGTORAD),y+675*Sin(i*20*bj_DEGTORAD))call UnitApplyTimedLife(I01,1112820806,1.15)call GU5(I01,SFI,HI5)set i=i+1endloopset SFI=nullset I01=nullendfunctionfunction H15 takes nothing returns booleanif GetSpellAbilityId()==1093677363 or GetSpellAbilityId()==1093681462 thencall H05()endifreturn falseendfunctionfunction MA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function H15))set t=nullendfunctionfunction HO5 takes nothing returns nothinglocal unit P7I=GetSummoningUnit()local unit P8I=GetSummonedUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093684569)if SUI>0 thencall IA1(P8I,1093684569)call SetUnitAbilityLevel(P8I,1093684569,SUI)endifset P7I=nullset P8I=nullendfunctionfunction H25 takes nothing returns booleanlocal integer RII=GetUnitTypeId(GetSummonedUnit())if RII==1865429076 or RII==1865429077 or RII==1865429078 or RII==1865429079 thencall HO5()endifreturn falseendfunctionfunction MB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function H25))set t=nullendfunctionfunction H35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call G21(P7I,0)call SaveInteger(LY,(GetHandleId((P7I))),((4277)),(2))set t=nullset P7I=nullreturn falseendfunctionfunction H45 takes unit Z4O,unit P8I returns nothinglocal real TH4=100*GetUnitState(P8I,UNIT_STATE_LIFE)/GetUnitState(P8I,UNIT_STATE_MAX_LIFE)local real EB2=2.5*GetUnitAbilityLevel(Z4O,1093746995)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer FinalBonuscall SaveInteger(LY,(GetHandleId((Z4O))),((4277)),(1))call TriggerRegisterTimerEvent(t,0.35,false)call TriggerAddCondition(t,Condition(function H35))call SaveUnitHandle(LY,(S5I),(2),(Z4O))if IsUnitType(P8I,UNIT_TYPE_HERO)==false thenset EB2=EB2/2endifif TH4>80 thencall G21(Z4O,R2I(EB2))elseif TH4>60 thencall G21(Z4O,R2I(EB2*2))elseif TH4>40 thencall G21(Z4O,R2I(EB2*2*2))elseif TH4>20 thencall G21(Z4O,R2I(EB2*2*2*2))elsecall G21(Z4O,R2I(EB2*2*2*2*2))endifset t=nullendfunctionfunction H55 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thenif GetSpellAbilityId()==1093679446 and GetUnitAbilityLevel(GetTriggerUnit(),1093746995)>0 thencall H45(GetTriggerUnit(),GetSpellTargetUnit())endifelseif GetUnitAbilityLevel(GetAttacker(),1093746995)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true and((LoadInteger(LY,(GetHandleId((GetAttacker()))),((4277))))==1)==false thencall H45(GetAttacker(),GetTriggerUnit())endifendifreturn falseendfunctionfunction MC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function H55))set t=nullendfunctionfunction H65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(684)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or LVO<(TimerGetElapsed(M))or RKI(P8I)thencall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveReal(LY,(GetHandleId(P8I)),(684),((0)*1.0))call UnitRemoveAbility(P8I,1093808983)call UnitRemoveAbility(P8I,1093808981)call UnitRemoveAbility(P8I,1093808982)call UnitRemoveAbility(P8I,1093808984)call UnitRemoveAbility(P8I,1110459713)elseset W3I=falsecall P6I(P7I,P8I,1,5+5*SUI)set W3I=trueendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction H75 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real LVO=(LoadReal(LY,(GetHandleId(P8I)),(684)))local integer SUI=GetUnitAbilityLevel(P7I,1093684557)if LVO>(TimerGetElapsed(M))thencall SaveReal(LY,(GetHandleId(P8I)),(684),(((TimerGetElapsed(M))+W2I)*1.0))elseset t=CreateTrigger()set S5I=GetHandleId(t)call SaveReal(LY,(GetHandleId(P8I)),(684),(((TimerGetElapsed(M))+W2I)*1.0))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function H65))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))if BJ1(P8I)==false thenif SUI==1 thencall IA1(P8I,1093808983)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093808983,false)elseif SUI==2 thencall IA1(P8I,1093808981)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093808981,false)elseif SUI==3 thencall IA1(P8I,1093808982)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093808982,false)elseif SUI==4 thencall IA1(P8I,1093808984)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093808984,false)endifendifendifset t=nullset P7I=nullset P8I=nullendfunctionfunction H85 takes nothing returns booleanlocal unit P7I=GetTriggerUnit()local unit P8I=GetEventDamageSource()if RLI(P8I)thenset P8I=(K1[GetPlayerId(GetOwningPlayer((P8I)))])endifif W3I and IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==false and QLI(P7I,P8I)<1400 and IsUnitEnemy(P7I,GetOwningPlayer(P8I))and RKI(P8I)==false and GetUnitAbilityLevel(P7I,1112433775)==0 thencall H75(P7I,P8I)endifreturn falseendfunctionfunction H95 takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function H85))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction HA5 takes nothing returns booleanif GetLearnedSkill()==1093684557 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684557)==1 thencall H95()endifreturn falseendfunctionfunction MD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function HA5))set t=nullendfunctionfunction HB5 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()call UnitRemoveAbility(P8I,1111847784)call UnitRemoveAbility(P8I,1110458705)set P8I=nullendfunctionfunction HC5 takes nothing returns booleanif GetSpellAbilityId()==1093679152 or GetSpellAbilityId()==1093752154 thencall HB5()endifreturn falseendfunctionfunction ME1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HC5))set t=nullendfunctionfunction HD5 takes nothing returns booleanreturn GetSpellAbilityId()==1093679192endfunctionfunction HE5 takes nothing returns nothinglocal location BFO=GetUnitLoc(GetSpellAbilityUnit())call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellAbilityUnit()),BFO,BFO)call RemoveLocation(BFO)call UnitAddAbility(bj_lastCreatedUnit,1093679427)call SetUnitAbilityLevelSwapped(1093679427,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093679192,GetSpellAbilityUnit()))call IssueTargetOrder(bj_lastCreatedUnit,"bloodlust",GetSpellAbilityUnit())endfunctionfunction MG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function HD5))call TriggerAddAction(t,function HE5)endfunctionfunction HF5 takes unit P8I,integer HG5 returns nothingcall UnitRemoveAbility(P8I,1093750067)call UnitRemoveAbility(P8I,1093750068)call UnitRemoveAbility(P8I,1093750083)call UnitRemoveAbility(P8I,1093750071)call UnitRemoveAbility(P8I,1093750072)call UnitRemoveAbility(P8I,1093750073)call UnitRemoveAbility(P8I,1093750081)call UnitRemoveAbility(P8I,1093750069)call UnitRemoveAbility(P8I,1093750082)call UnitRemoveAbility(P8I,1093750070)if HG5==1 thencall IA1(P8I,1093750067)elseif HG5==2 thencall IA1(P8I,1093750068)elseif HG5==3 thencall IA1(P8I,1093750083)elseif HG5==4 thencall IA1(P8I,1093750071)elseif HG5==5 thencall IA1(P8I,1093750072)elseif HG5==6 thencall IA1(P8I,1093750073)elseif HG5==7 thencall IA1(P8I,1093750081)elseif HG5==8 thencall IA1(P8I,1093750069)elseif HG5==9 thencall IA1(P8I,1093750082)elseif HG5==10 thencall IA1(P8I,1093750070)endifendfunctionfunction GravekeepersCloakEnemy_Decay takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer HG5call FlushChildHashtable(LY,(S5I))call S0I(t)set S5I=GetHandleId(P8I)set HG5=(LoadInteger(LY,(S5I),(427)))set HG5=QAI(HG5-1,0)call SaveInteger(LY,(S5I),(427),(HG5))call HF5(P8I,HG5)set t=nullset P8I=nullreturn falseendfunctionfunction HH5 takes unit P7I,integer SUI,integer HZ5 returns nothingcall UnitRemoveAbility(P7I,1093749586)call UnitRemoveAbility(P7I,1093749587)call UnitRemoveAbility(P7I,1093749585)call UnitRemoveAbility(P7I,1093749584)call UnitRemoveAbility(P7I,1093749553)call UnitRemoveAbility(P7I,1093749591)call UnitRemoveAbility(P7I,1093749592)call UnitRemoveAbility(P7I,1093749593)call UnitRemoveAbility(P7I,1093749812)call UnitRemoveAbility(P7I,1093749811)call UnitRemoveAbility(P7I,1093749810)call UnitRemoveAbility(P7I,1093749809)call UnitRemoveAbility(P7I,1093749816)call UnitRemoveAbility(P7I,1093749815)call UnitRemoveAbility(P7I,1093749817)call UnitRemoveAbility(P7I,1093749826)if SUI==1 thenif HZ5==1 thencall IA1(P7I,1093749586)elseif HZ5==2 thencall IA1(P7I,1093749587)elseif HZ5==3 thencall IA1(P7I,1093749585)elseif HZ5==4 thencall IA1(P7I,1093749584)endifelseif SUI==2 thenif HZ5==1 thencall IA1(P7I,1093749553)elseif HZ5==2 thencall IA1(P7I,1093749591)elseif HZ5==3 thencall IA1(P7I,1093749592)elseif HZ5==4 thencall IA1(P7I,1093749593)endifelseif SUI==3 thenif HZ5==1 thencall IA1(P7I,1093749812)elseif HZ5==2 thencall IA1(P7I,1093749811)elseif HZ5==3 thencall IA1(P7I,1093749810)elseif HZ5==4 thencall IA1(P7I,1093749809)endifelseif SUI==4 thenif HZ5==1 thencall IA1(P7I,1093749816)elseif HZ5==2 thencall IA1(P7I,1093749815)elseif HZ5==3 thencall IA1(P7I,1093749817)elseif HZ5==4 thencall IA1(P7I,1093749826)endifendifendfunctionfunction HV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer HW5=(LoadInteger(LY,(S5I),(426)))local unit P7I=(LoadUnitHandle(LY,(HW5),(2)))local integer HZ5=(LoadInteger(LY,(HW5),(425)))local integer SUI=GetUnitAbilityLevel(P7I,1093686872)set HZ5=Q9I(HZ5+1,4)call SaveInteger(LY,(HW5),(425),(HZ5))call HH5(P7I,SUI,HZ5)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction HX5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer HZ5=(LoadInteger(LY,(S5I),(425)))local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and T2I(GetOwningPlayer(GetEventDamageSource()))thenif HZ5>0 thenendifset HZ5=QAI(HZ5-1,0)call SaveInteger(LY,(S5I),(425),(HZ5))call HH5(P7I,SUI,HZ5)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function HV5))call SaveInteger(LY,(S5I),(426),(GetHandleId(GetTriggeringTrigger())))endifset t=nullset P7I=nullreturn falseendfunctionfunction HY5 takes nothing returns nothinglocal trigger tlocal integer S5Ilocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)if SUI==1 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function HX5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(425),(4))endifcall HH5(P7I,SUI,4)set t=nullset P7I=nullendfunctionfunction HJ5 takes nothing returns booleanif GetLearnedSkill()==1093686872 and IsUnitIllusion(GetTriggerUnit())==false thencall HY5()endifreturn falseendfunctionfunction HK5 takes player p returns nothingcall SetPlayerAbilityAvailable(p,1093749586,false)call SetPlayerAbilityAvailable(p,1093749587,false)call SetPlayerAbilityAvailable(p,1093749585,false)call SetPlayerAbilityAvailable(p,1093749584,false)call SetPlayerAbilityAvailable(p,1093749589,false)call SetPlayerAbilityAvailable(p,1093749590,false)call SetPlayerAbilityAvailable(p,1093749553,false)call SetPlayerAbilityAvailable(p,1093749591,false)call SetPlayerAbilityAvailable(p,1093749592,false)call SetPlayerAbilityAvailable(p,1093749593,false)call SetPlayerAbilityAvailable(p,1093749594,false)call SetPlayerAbilityAvailable(p,1093749588,false)call SetPlayerAbilityAvailable(p,1093749812,false)call SetPlayerAbilityAvailable(p,1093749811,false)call SetPlayerAbilityAvailable(p,1093749810,false)call SetPlayerAbilityAvailable(p,1093749809,false)call SetPlayerAbilityAvailable(p,1093749808,false)call SetPlayerAbilityAvailable(p,1093749813,false)call SetPlayerAbilityAvailable(p,1093749816,false)call SetPlayerAbilityAvailable(p,1093749815,false)call SetPlayerAbilityAvailable(p,1093749817,false)call SetPlayerAbilityAvailable(p,1093749826,false)call SetPlayerAbilityAvailable(p,1093749825,false)call SetPlayerAbilityAvailable(p,1093749814,false)call SetPlayerAbilityAvailable(p,1093749832,false)call SetPlayerAbilityAvailable(p,1093750067,false)call SetPlayerAbilityAvailable(p,1093750068,false)call SetPlayerAbilityAvailable(p,1093750083,false)call SetPlayerAbilityAvailable(p,1093750071,false)call SetPlayerAbilityAvailable(p,1093750072,false)call SetPlayerAbilityAvailable(p,1093750073,false)call SetPlayerAbilityAvailable(p,1093750081,false)call SetPlayerAbilityAvailable(p,1093750069,false)call SetPlayerAbilityAvailable(p,1093750082,false)call SetPlayerAbilityAvailable(p,1093750070,false)endfunctionfunction MZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0local player pcall UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function HJ5))loopexitwhen i>5set p=BO[i]call HK5(p)set p=CO[i]call HK5(p)set i=i+1endloopset t=nullendfunctionfunction HL5 takes nothing returns nothinglocal integer SUIlocal unit P7I=GetTriggerUnit()local unit I01if GetUnitTypeId(P7I)==1966092599 or GetUnitTypeId(P7I)==1966092601 or GetUnitTypeId(P7I)==1966092600 or GetUnitTypeId(P7I)==1966092609 or GetUnitTypeId(P7I)==1966092610 or GetUnitTypeId(P7I)==1966092611 or GetUnitTypeId(P7I)==1966092629 or GetUnitTypeId(P7I)==1966092630 or GetUnitTypeId(P7I)==1966092631 thenreturnendifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)if GetUnitTypeId(P7I)==1966092596 or GetUnitTypeId(P7I)==1966092612 or GetUnitTypeId(P7I)==1966092626 thenset SUI=1elseif GetUnitTypeId(P7I)==1966092597 or GetUnitTypeId(P7I)==1966092613 or GetUnitTypeId(P7I)==1966092627 thenset SUI=2elseset SUI=3endifcall IA1(I01,1093750342)call SetUnitAbilityLevel(I01,1093750342,SUI)call IssueImmediateOrder(I01,"stomp")set P7I=nullset I01=nullendfunctionfunction HM5 takes unit HN5,integer BQO,integer SUI returns nothinglocal integer HS5if SUI==1 thenset HS5=8elseif SUI==2 thenset HS5=14elseif SUI==3 thenset HS5=22endifcall G21(HN5,BQO*HS5)endfunctionfunction HT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit HN5=(LoadUnitHandle(LY,(S5I),(2)))local unit P7I=HN5local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer QX2=(LoadInteger(LY,(S5I),(28)))local integer BQO=(LoadInteger(LY,(S5I),(194)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==HN5 thenset BQO=IMaxBJ(BQO-1,0)call SaveInteger(LY,(S5I),(194),(BQO))call HM5(HN5,BQO,SUI)endifelseset QX2=QX2+1call SaveInteger(LY,(S5I),(28),(QX2))if ModuloInteger(QX2,15)==0 thenset BQO=IMinBJ(BQO+1,7)call SaveInteger(LY,(S5I),(194),(BQO))endifif GetUnitTypeId(P7I)==1966092599 or GetUnitTypeId(P7I)==1966092601 or GetUnitTypeId(P7I)==1966092600 or GetUnitTypeId(P7I)==1966092609 or GetUnitTypeId(P7I)==1966092610 or GetUnitTypeId(P7I)==1966092611 or GetUnitTypeId(P7I)==1966092629 or GetUnitTypeId(P7I)==1966092630 or GetUnitTypeId(P7I)==1966092631 thenset BQO=7call SaveInteger(LY,(S5I),(194),(BQO))endifcall HM5(HN5,BQO,SUI)if GetUnitTypeId(HN5)==1966092599 or GetUnitTypeId(HN5)==1966092601 or GetUnitTypeId(HN5)==1966092600 or GetUnitTypeId(HN5)==1966092609 or GetUnitTypeId(HN5)==1966092610 or GetUnitTypeId(HN5)==1966092611 or GetUnitTypeId(HN5)==1966092629 or GetUnitTypeId(HN5)==1966092630 or GetUnitTypeId(HN5)==1966092631 thencall SetUnitState(HN5,UNIT_STATE_LIFE,GetUnitState(HN5,UNIT_STATE_LIFE)+31.25+18.75*SUI)endifendifset t=nullset HN5=nullreturn falseendfunctionfunction HR5 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1966092596 or GetUnitTypeId(GetFilterUnit())==1966092597 or GetUnitTypeId(GetFilterUnit())==1966092598 or GetUnitTypeId(GetFilterUnit())==1966092612 or GetUnitTypeId(GetFilterUnit())==1966092613 or GetUnitTypeId(GetFilterUnit())==1966092614 or GetUnitTypeId(GetFilterUnit())==1966092626 or GetUnitTypeId(GetFilterUnit())==1966092627 or GetUnitTypeId(GetFilterUnit())==1966092628 or GetUnitTypeId(GetFilterUnit())==1966092599 or GetUnitTypeId(GetFilterUnit())==1966092601 or GetUnitTypeId(GetFilterUnit())==1966092600 or GetUnitTypeId(GetFilterUnit())==1966092609 or GetUnitTypeId(GetFilterUnit())==1966092610 or GetUnitTypeId(GetFilterUnit())==1966092611 or GetUnitTypeId(GetFilterUnit())==1966092629 or GetUnitTypeId(GetFilterUnit())==1966092630 or GetUnitTypeId(GetFilterUnit())==1966092631 thencall KillUnit(GetFilterUnit())endifreturn falseendfunctionfunction HP5 takes nothing returns nothinglocal group g=NTI()local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local integer SUI=GetUnitAbilityLevel(P7I,1093750341)local unit HQ5local unit HU5local unit Z05local trigger tlocal integer S5Ilocal boolean E14=falsecall GroupEnumUnitsOfPlayer(g,GetOwningPlayer(P7I),Condition(function HR5))call NSI(g)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093814599)set E14=trueendifif SUI==1 thenset HQ5=CreateUnit(GetOwningPlayer(P7I),1966092596,x+75,y+75,GetUnitFacing(P7I))set HU5=CreateUnit(GetOwningPlayer(P7I),1966092612,x-75,y-75,GetUnitFacing(P7I))elseif SUI==2 thenset HQ5=CreateUnit(GetOwningPlayer(P7I),1966092597,x+75,y+75,GetUnitFacing(P7I))set HU5=CreateUnit(GetOwningPlayer(P7I),1966092613,x-75,y-75,GetUnitFacing(P7I))elseif SUI==3 thenset HQ5=CreateUnit(GetOwningPlayer(P7I),1966092598,x+75,y+75,GetUnitFacing(P7I))set HU5=CreateUnit(GetOwningPlayer(P7I),1966092614,x-75,y-75,GetUnitFacing(P7I))endifcall SelectUnitAddForPlayer(HQ5,GetOwningPlayer(P7I))call SelectUnitAddForPlayer(HU5,GetOwningPlayer(P7I))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",HQ5,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",HU5,"origin"))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,HQ5,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function HT5))call SaveUnitHandle(LY,(S5I),(2),(HQ5))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(28),(0))call SaveInteger(LY,(S5I),(194),(7))call HM5(HQ5,7,SUI)set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,HU5,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function HT5))call SaveUnitHandle(LY,(S5I),(2),(HU5))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(28),(0))call SaveInteger(LY,(S5I),(194),(7))call HM5(HU5,7,SUI)if E14 thenif SUI==1 thenset Z05=CreateUnit(GetOwningPlayer(P7I),1966092626,x+75,y,GetUnitFacing(P7I))elseif SUI==2 thenset Z05=CreateUnit(GetOwningPlayer(P7I),1966092627,x+75,y,GetUnitFacing(P7I))elseif SUI==3 thenset Z05=CreateUnit(GetOwningPlayer(P7I),1966092628,x+75,y,GetUnitFacing(P7I))endifcall SelectUnitAddForPlayer(Z05,GetOwningPlayer(P7I))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",Z05,"origin"))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,Z05,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function HT5))call SaveUnitHandle(LY,(S5I),(2),(Z05))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(28),(0))call SaveInteger(LY,(S5I),(194),(7))call HM5(Z05,7,SUI)endifset g=nullset P7I=nullset HQ5=nullset HU5=nullendfunctionfunction ZI5 takes nothing returns booleanif GetSpellAbilityId()==1093750341 or GetSpellAbilityId()==1093814599 thencall HP5()elseif GetSpellAbilityId()==1093750338 or GetSpellAbilityId()==1093750339 or GetSpellAbilityId()==1093750340 or GetSpellAbilityId()==1093750348 or GetSpellAbilityId()==1093750349 or GetSpellAbilityId()==1093750350 or GetSpellAbilityId()==1093814618 or GetSpellAbilityId()==1093814832 or GetSpellAbilityId()==1093814833 thencall HL5()endifreturn falseendfunctionfunction MF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZI5))set t=nullendfunctionfunction Z15 takes unit P7I,integer JGO,integer ZO5 returns nothinglocal string c1="|c0000cc00"local string c="||"local string p=" "local string s=c1+"|||r"local string FB1local boolean TX4=falselocal texttag tt=(LoadTextTagHandle(LY,(GetHandleId(P7I)),(451)))if JGO==0 thenset FB1=" "elseif ZO5==1 thenif JGO==0 thenset FB1=c+p+c+p+celseif JGO==1 thenset FB1=s+p+c+p+celseif JGO==2 thenset FB1=s+p+s+p+celseif JGO==3 thenset FB1=s+p+s+p+sendifelseif ZO5==2 thenif JGO==0 thenset FB1=c+p+c+p+c+p+celseif JGO==1 thenset FB1=s+p+c+p+c+p+celseif JGO==2 thenset FB1=s+p+s+p+c+p+celseif JGO==3 thenset FB1=s+p+s+p+s+p+celseif JGO==4 thenset FB1=s+p+s+p+s+p+sendifelseif ZO5==3 thenif JGO==0 thenset FB1=c+p+c+p+c+p+c+p+celseif JGO==1 thenset FB1=s+p+c+p+c+p+c+p+celseif JGO==2 thenset FB1=s+p+s+p+c+p+c+p+celseif JGO==3 thenset FB1=s+p+s+p+s+p+c+p+celseif JGO==4 thenset FB1=s+p+s+p+s+p+s+p+celseif JGO==5 thenset FB1=s+p+s+p+s+p+s+p+sendifelseif ZO5==4 thenif JGO==0 thenset FB1=c+p+c+p+c+p+c+p+c+p+celseif JGO==1 thenset FB1=s+p+c+p+c+p+c+p+c+p+celseif JGO==2 thenset FB1=s+p+s+p+c+p+c+p+c+p+celseif JGO==3 thenset FB1=s+p+s+p+s+p+c+p+c+p+celseif JGO==4 thenset FB1=s+p+s+p+s+p+s+p+c+p+celseif JGO==5 thenset FB1=s+p+s+p+s+p+s+p+s+p+celseif JGO==6 thenset FB1=s+p+s+p+s+p+s+p+s+p+sendifendifcall SetTextTagText(tt,FB1,0.023)if GetOwningPlayer(P7I)==GetLocalPlayer()thenset TX4=trueendifif IC1(P7I)thenset TX4=falseendifcall SetTextTagPosUnit(tt,P7I,0)call SetTextTagVisibility(tt,TX4)call SetTextTagPermanent(tt,true)endfunctionfunction Z25 takes unit SFI,integer SUI returns nothinglocal integer ZO5=GetUnitAbilityLevel(SFI,1093750337)call Z15(SFI,SUI,ZO5)if SUI==0 or((LoadInteger(LY,(GetHandleId((SFI))),((2484))))==1)==true thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call IA1(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)call UnitRemoveAbility(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)elseif SUI==1 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093750577)call IA1(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)call IA1(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)elseif SUI==2 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call IA1(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)call UnitRemoveAbility(SFI,1093684306)call IA1(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)elseif SUI==3 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call IA1(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)if ZO5==1 thencall IA1(SFI,1093750583)elsecall IA1(SFI,1093750329)endifelseif SUI==4 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call IA1(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)if ZO5==2 thencall IA1(SFI,1093750584)elsecall IA1(SFI,1093750361)endifelseif SUI==5 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call IA1(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)call UnitRemoveAbility(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call IA1(SFI,1093684806)call UnitRemoveAbility(SFI,1093684548)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call UnitRemoveAbility(SFI,1093750579)if ZO5==3 thencall IA1(SFI,1093750585)elsecall IA1(SFI,1093750576)endifelseif SUI==6 thencall UnitRemoveAbility(SFI,1093750583)call UnitRemoveAbility(SFI,1093750584)call UnitRemoveAbility(SFI,1093750585)call UnitRemoveAbility(SFI,1093750577)call UnitRemoveAbility(SFI,1093750578)call UnitRemoveAbility(SFI,1093750362)call UnitRemoveAbility(SFI,1093750329)call UnitRemoveAbility(SFI,1093750361)call UnitRemoveAbility(SFI,1093750576)call IA1(SFI,1093750579)call UnitRemoveAbility(SFI,1093684306)call UnitRemoveAbility(SFI,1093687632)call UnitRemoveAbility(SFI,1093685063)call UnitRemoveAbility(SFI,1093687631)call UnitRemoveAbility(SFI,1093684806)call IA1(SFI,1093684548)endifif(GetUnitAbilityLevel(SFI,1093750337)+2)==SUI thencall IA1(SFI,1093750346)elsecall UnitRemoveAbility(SFI,1093750346)endifendfunctionfunction Z35 takes unit P7I,real PAI returns nothinglocal integer SUI=0local real Z45=110if PAI>Z45*6 thenset SUI=6elseif PAI>Z45*5 thenset SUI=5elseif PAI>Z45*4 thenset SUI=4elseif PAI>Z45*3 thenset SUI=3elseif PAI>Z45*2 thenset SUI=2elseif PAI>Z45*1 thenset SUI=1endifset SUI=Q9I(SUI,2+GetUnitAbilityLevel(P7I,1093750337))call SaveInteger(LY,(GetHandleId(P7I)),(450),(SUI))call Z25(P7I,SUI)endfunctionfunction Z55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer ZO5=GetUnitAbilityLevel(P7I,1093750337)call Z15(P7I,(LoadInteger(LY,(GetHandleId((P7I))),(450))),ZO5)call Z35(P7I,(LoadReal(LY,(GetHandleId(P7I)),(443))))set t=nullset P7I=nullreturn falseendfunctionfunction Z65 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))if IsUnitAlly(P8I,GetOwningPlayer(P7I))==false thenset W5I=truecall P6I(P7I,P8I,1,PAI)set W5I=falseelsecall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+PAI)endifset P7I=nullset P8I=nullendfunctionfunction Z75 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call Z35(P7I,(LoadReal(LY,(GetHandleId(P7I)),(443))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction Z85 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=(LoadInteger(LY,(GetHandleId((P7I))),(450)))local trigger t=IJ1(P7I,P8I,1747993157,"Z65",1000,false)local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(20),((20+SUI*65)*1.0))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AntiMagicShell\\AntiMagicShell.mdl",P7I,"chest"))call SaveReal(LY,(GetHandleId(P7I)),(443),((0)*1.0))call Z35(P7I,0)call SCI(P7I,2484,4)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function Z75))call TriggerRegisterTimerEvent(t,4,false)call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset P8I=nullset t=nullendfunctionfunction Z95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real PAI=(LoadReal(LY,(S5I),(20)))if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750337)thenif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT thencall SaveReal(LY,(GetHandleId(P7I)),(443),(((LoadReal(LY,(GetHandleId(P7I)),(443)))-PAI)*1.0))endifcall Z35(P7I,(LoadReal(LY,(GetHandleId(P7I)),(443))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction ZA5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer S5I=GetHandleId(P7I)local texttag tt=CreateTextTag()local boolean TX4=falselocal trigger t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function Z55))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))if GetOwningPlayer(P7I)==GetLocalPlayer()thenset TX4=trueendifcall SetTextTagText(tt," ",0.023)call SetTextTagPosUnit(tt,P7I,0)call SetTextTagVisibility(tt,TX4)call SetTextTagPermanent(tt,true)set W4I[GetPlayerId(GetOwningPlayer(P7I))]=P7Icall SaveReal(LY,(S5I),(443),((0)*1.0))call Z35(P7I,0)call SaveTextTagHandle(LY,(S5I),(451),(tt))set P7I=nullset t=nullset tt=nullendfunctionfunction ZB5 takes unit ZC5,unit ZD5 returns nothinglocal real PAI=GetEventDamage()local integer SUI=GetUnitAbilityLevel(ZC5,1093750337)local real ZE5=(LoadReal(LY,(GetHandleId(ZC5)),(443)))local trigger tlocal integer S5Iif QLI(ZC5,ZD5)<1400 and W5I==false thenif RSI(PAI)and GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(T2I(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)thenset ZE5=ZE5+PAIcall SaveReal(LY,(GetHandleId(ZC5)),(443),((ZE5)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(ZC5))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call TriggerRegisterTimerEvent(t,6,false)call TriggerRegisterUnitEvent(t,ZC5,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,ZC5,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Z95))call Z35(ZC5,ZE5)endifendifset t=nullendfunctionfunction ZF5 takes nothing returns nothinglocal integer i=0loopexitwhen i>12if W4I[i]!=null thencall ZB5(W4I[i],GetTriggerUnit())endifset i=i+1endloopendfunctionfunction ZG5 takes nothing returns booleanif GetLearnedSkill()==1093750337 and GetUnitAbilityLevel(GetTriggerUnit(),1093750337)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall ZA5()endifreturn falseendfunctionfunction ZH5 takes nothing returns booleanif GetSpellAbilityId()==1093750337 thencall Z85()endifreturn falseendfunctionfunction MH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function ZG5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZH5))set t=nullcall O42("ZF5")endfunctionconstant function Upheaval_RawCode takes nothing returns integerreturn 1093678672endfunctionconstant function Upheaval_EffectCode takes nothing returns integerreturn 1093683781endfunctionconstant function Upheaval_EffectModel takes nothing returns integerreturn 1697657159endfunctionfunction ZZ5 takes nothing returns booleanreturn GetSpellAbilityId()==(1093678672)endfunctionfunction ZV5 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XO))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction ZW5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local unit I01=CreateUnit(GetOwningPlayer(XO),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,(1093683781))call SetUnitAbilityLevel(I01,(1093683781),YO)call IssueTargetOrder(I01,"slow",P8I)endfunctionfunction ZX5 takes unit I01,unit SFI returns nothinglocal group Z51=NTI()local boolexpr QL1=Condition(function ZV5)set XO=SFIcall GroupEnumUnitsInRange(Z51,GetUnitX(I01),GetUnitY(I01),675,QL1)call ForGroup(Z51,function ZW5)call NSI(Z51)endfunctionfunction ZY5 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFIlocal unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I((t))elseif GetTriggerEvalCount(t)>32 thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I((t))call PJI((LoadUnitHandle(LY,(S5I),(14))))elsecall SetUnitAnimation(I01,"birth")set SFI=(LoadUnitHandle(LY,(S5I),(14)))set YO=GetTriggerExecCount(t)*GetUnitAbilityLevel(SFI,(1093678672))/2call ZX5(I01,SFI)endifset t=nullset I01=nullset SFI=nullendfunctionfunction ZJ5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location BFO=GetSpellTargetLoc()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetLocationX(BFO)local real y=GetLocationY(BFO)local unit I01=CreateUnit(GetOwningPlayer(SFI),(1697657159),x,y,0)call RemoveLocation(BFO)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddAction(t,function ZY5)call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(19),(I01))endfunctionfunction NC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddAction(t,function ZJ5)call TriggerAddCondition(t,Condition(function ZZ5))call Q1I((1093683781))endfunctionconstant function FatalBonds_RawCode takes nothing returns integerreturn 1093683765endfunctionconstant function FatalBonds_IconAbility takes nothing returns integerreturn 1093683769endfunctionconstant function FatalBonds_Icon takes nothing returns integerreturn 1093685298endfunctionfunction ZK5 takes nothing returns booleanreturn GetSpellAbilityId()==(1093683765)endfunctionfunction ZL5 takes nothing returns nothingcall IA1(GetEnumUnit(),(1093685298))endfunctionfunction ZM5 takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),(1093685298))endfunctionfunction ZN5 takes unit ZS5,unit ZT5 returns nothingif ZS5!=null and ZT5!=null thencall UGI("CLPB",GetUnitX(ZS5),GetUnitY(ZS5),GetUnitX(ZT5),GetUnitY(ZT5),0.7,0.1,0.9,1,0.3)endifendfunctionfunction ZR5 takes nothing returns nothinglocal unit SFI=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))local real PAI=0.25*GetEventDamage()set PAI=QCI(PAI,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()thenif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<PAI thencall P6I(SFI,GetEnumUnit(),3,PAI)elsecall A41(GetEnumUnit(),PAI)endifendifendfunctionfunction ZP5 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group Z51=(LoadGroupHandle(LY,(S5I),(220)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall ForGroup(Z51,function ZM5)call FlushChildHashtable(LY,(S5I))call NSI(Z51)call S0I((t))elseif GetEventDamage()>10 and GetEventDamage()<6000 thencall DisableTrigger(t)call ForGroup(Z51,function ZR5)call EnableTrigger(t)endifendfunctionfunction ZQ5 takes nothing returns booleanreturn IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1endfunctionfunction ZU5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local group Z51=NTI()local integer SUI=GetUnitAbilityLevel(SFI,(1093683765))local boolexpr QL1=Condition(function ZQ5)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer i=2local group XG4=NTI()local unit array V05local string VI5="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"call SaveUnitHandle(LY,(S5I),(14),(SFI))call ZN5(SFI,P8I)call U5I(VI5,P8I,"overhead",25)set V05[1]=P8Icall SaveUnitHandle(LY,(S5I),(246),(V05[1]))call TriggerRegisterUnitEvent(t,V05[1],EVENT_UNIT_DAMAGED)call GroupEnumUnitsInRange(Z51,GetUnitX(P8I),GetUnitY(P8I),700+25,QL1)call GroupRemoveUnit(Z51,P8I)call GroupAddUnit(XG4,P8I)call SaveGroupHandle(LY,(S5I),(220),(XG4))loopexitwhen i>(2+SUI)or FirstOfGroup(Z51)==nullset V05[i]=AU1(Z51,GetUnitX(P8I),GetUnitY(P8I))call ZN5(V05[i-1],V05[i])call TriggerRegisterUnitEvent(t,V05[i],EVENT_UNIT_DAMAGED)call GroupAddUnit(XG4,V05[i])call GroupRemoveUnit(Z51,V05[i])call U5I(VI5,V05[i],"overhead",25)set i=i+1endloopcall SaveInteger(LY,(S5I),(245),(i-1))set YO=GetUnitAbilityLevel(SFI,(1093683765))call ForGroup(XG4,function ZL5)call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function ZP5)call NSI(Z51)endfunctionfunction ND1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ZK5))call TriggerAddAction(t,function ZU5)call Q1I((1093683769))endfunctionfunction V15 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093681491)if GetTriggerEvalCount(t)>11 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093744459)call UnitRemoveAbility(P8I,1110458704)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall P6I(P7I,P8I,1,SUI*10+5)endifset P7I=nullset P8I=nullset t=nullreturn falseendfunctionfunction VO5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093681491)if GetTriggerEvalCount(t)>11 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093685296)call UnitRemoveAbility(P8I,1110456115)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall QUI(P8I,SUI*10+5)endifset P7I=nullset P8I=nullset t=nullreturn falseendfunctionfunction V25 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))if IsUnitAlly(P8I,GetOwningPlayer(P7I))thencall TriggerAddCondition(t,Condition(function VO5))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl",P8I,"chest")))call IA1(P8I,1093685296)elseif NNI(GetSpellTargetUnit())==false thencall TriggerAddCondition(t,Condition(function V15))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",P8I,"overhead")))call IA1(P8I,1093744459)endifset P7I=nullset P8I=nullset t=nullendfunctionfunction V35 takes nothing returns booleanif GetSpellAbilityId()==1093681491 thencall V25()endifreturn falseendfunctionfunction NE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function V35))call Q1I(1093685296)call Q1I(1093744459)set t=nullendfunctionfunction V45 takes nothing returns nothingcall P6I(W6I,GetEnumUnit(),1,20+10*W7I)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl",GetEnumUnit(),"head"))endfunctionfunction V55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUIlocal integer RII=GetUnitTypeId(P7I)local group gif RII==1848651861 or RII==1848658773 thenset SUI=1elseif RII==1848651865 or RII==1848658774 thenset SUI=2elseif RII==1848651866 or RII==1848658775 thenset SUI=3endifif GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset GK=P7Iset W6I=P7Iset W7I=SUIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),325,Condition(function CA1))call ForGroup(g,function V45)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction V65 takes unit u returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function V55))call SaveUnitHandle(LY,(S5I),(2),(u))set t=nullendfunctionfunction V75 takes nothing returns booleanlocal integer RII=GetUnitTypeId(GetTriggerUnit())if RII==1848651861 or RII==1848658773 or RII==1848651865 or RII==1848658774 or RII==1848651866 or RII==1848658775 thencall V65(GetTriggerUnit())endifreturn falseendfunctionfunction V85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real BA3=(LoadReal(LY,(S5I),(191)))local real BB3=(LoadReal(LY,(S5I),(192)))local integer SUI=GetUnitAbilityLevel(P7I,1395667029)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,BA3,BB3,0)call IA1(I01,1395667029)call SetUnitAbilityLevel(I01,1395667029,SUI)call IssuePointOrderById(I01,852224,x,y)call FlushChildHashtable(LY,(S5I))call S0I(t)set P7I=nullset I01=nullset t=nullreturn falseendfunctionfunction V95 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.3,false)call TriggerAddCondition(t,Condition(function V85))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetSpellTargetX())*1.0))call SaveReal(LY,(S5I),(7),((GetSpellTargetY())*1.0))call SaveReal(LY,(S5I),(191),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(192),((GetUnitY(P7I))*1.0))set P7I=nullset t=nullendfunctionfunction VA5 takes nothing returns booleanif GetSpellAbilityId()==1395667029 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true thencall V95()endifreturn falseendfunctionfunction NF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VA5))set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function V75))set t=nullendfunctionfunction VB5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetUnitAbilityLevel(SFI,1112041075)==0 thencall UnitRemoveAbility(SFI,1093681977)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullreturn falseendfunctionfunction VC5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call IA1(SFI,1093681977)call SetUnitAbilityLevel(SFI,1093681977,GetUnitAbilityLevel(SFI,1093681985))call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function VB5))set SFI=nullset t=nullendfunctionfunction VD5 takes nothing returns booleanif GetSpellAbilityId()==1093681985 thencall VC5()endifreturn falseendfunctionfunction MV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VD5))endfunctionfunction VE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)call SetUnitState((LoadUnitHandle(LY,(S5I),(26))),UNIT_STATE_MANA,(LoadReal(LY,(S5I),(242))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction VF5 takes unit u,real VG5 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function VE5))call SaveUnitHandle(LY,(S5I),(26),(u))call SaveReal(LY,(S5I),(242),((VG5)*1.0))set t=nullendfunctionfunction VH5 takes nothing returns booleanreturn GetSpellAbilityId()==1093682004endfunctionfunction VZ5 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggerUnit())local real D14=QDI((LoadReal(LY,(S5I),(7200+1))),1)local real OA2=QDI((LoadReal(LY,(S5I),(7250+1))),1)local real x=(LoadReal(LY,(S5I),(7300+1)))local real y=(LoadReal(LY,(S5I),(7350+1)))local unit PKI=GetTriggerUnit()if(LoadReal(LY,(S5I),(7200+1)))>1 and GetUnitState(PKI,UNIT_STATE_LIFE)>1 thencall AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(PKI),GetUnitY(PKI))call SetUnitX(PKI,x)call SetUnitY(PKI,y)call SetUnitState(PKI,UNIT_STATE_LIFE,D14)call SetUnitState(PKI,UNIT_STATE_MANA,OA2)call UnitRemoveBuffs(PKI,false,true)call EO1(PKI)call VF5(PKI,OA2)endifendfunctionfunction MW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VH5))call TriggerAddAction(t,function VZ5)endfunctionfunction VV5 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local unit PKI=(LoadUnitHandle(LY,(GetHandleId(t)),(221)))local integer S5I=GetHandleId(PKI)local integer TGI=1local integer THI=10loopexitwhen TGI>THIcall SaveReal(LY,(S5I),(7300+(TGI-1)),(((LoadReal(LY,(S5I),(7300+(TGI)))))*1.0))call SaveReal(LY,(S5I),(7350+(TGI-1)),(((LoadReal(LY,(S5I),(7350+(TGI)))))*1.0))call SaveReal(LY,(S5I),(7200+(TGI-1)),(((LoadReal(LY,(S5I),(7200+(TGI)))))*1.0))call SaveReal(LY,(S5I),(7250+(TGI-1)),(((LoadReal(LY,(S5I),(7250+(TGI)))))*1.0))set TGI=TGI+1endloopcall SaveReal(LY,(S5I),(7300+10),((GetUnitX(PKI))*1.0))call SaveReal(LY,(S5I),(7350+10),((GetUnitY(PKI))*1.0))call SaveReal(LY,(S5I),(7200+10),((GetUnitState(PKI,UNIT_STATE_LIFE))*1.0))call SaveReal(LY,(S5I),(7250+10),((GetUnitState(PKI,UNIT_STATE_MANA))*1.0))endfunctionfunction TimeLapseLearn_Conditions takes nothing returns booleanreturn GetLearnedSkill()==1093682004 and IsUnitIllusion(GetTriggerUnit())==falseendfunctionfunction KO4 takes nothing returns nothinglocal unit PKI=GKlocal integer SUI=GetUnitAbilityLevel(PKI,1093682004)local trigger tset t=CreateTrigger()call TriggerRegisterTimerEventPeriodic(t,0.50)call TriggerAddAction(t,function VV5)call SaveUnitHandle(LY,(GetHandleId(t)),(221),(PKI))endfunctionfunction MX1 takes nothing returns nothingendfunctionfunction VW5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real d=(LoadReal(LY,(S5I),(138)))local real VX5=(LoadReal(LY,(GetHandleId(P7I)),(508)))-dlocal fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))call FogModifierStop(I31)call DestroyFogModifier(I31)call SaveReal(LY,(GetHandleId(P7I)),(508),((VX5)*1.0))call G21(P7I,R2I(VX5/100.0*(0.3*GetUnitAbilityLevel(P7I,1093751095))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction VY5 takes unit P7I,real d returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real VX5=(LoadReal(LY,(GetHandleId(P7I)),(508)))+dlocal fogmodifier I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,GetUnitX(P7I),GetUnitY(P7I),400,true,true)call FogModifierStart(I31)call SaveReal(LY,(GetHandleId(P7I)),(508),((VX5)*1.0))call G21(P7I,R2I(VX5/100.0*(0.6*GetUnitAbilityLevel(P7I,1093751095))))call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function VW5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(138),((d)*1.0))call SaveFogModifierHandle(LY,(S5I),(42),(I31))set t=nullendfunctionfunction VJ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real IO3=GetUnitX(P7I)local real I23=GetUnitY(P7I)local real d=QNI(II3,I13,IO3,I23)if d<1500 thencall VY5(P7I,d)elsecall VY5(P7I,1500)endifcall SaveReal(LY,(S5I),(23),((IO3)*1.0))call SaveReal(LY,(S5I),(24),((I23)*1.0))set t=nullset P7I=nullreturn falseendfunctionfunction VK5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function VJ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(23),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P7I))*1.0))call SaveReal(LY,(GetHandleId(P7I)),(508),((0)*1.0))set t=nullset P7I=nullendfunctionfunction VL5 takes nothing returns booleanif GetLearnedSkill()==1093751095 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093751095)==1 thencall VK5()endifreturn falseendfunctionfunction Register_EchoStep takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function VL5))set t=nullendfunctionfunction VM5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P8I,1093751130)call SaveInteger(LY,(GetHandleId((P8I))),((4290)),(2))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()==P8I thencall KillUnit(P7I)endifelseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall SetUnitAbilityLevel(P8I,1093751130,GetUnitAbilityLevel(P8I,1093751130)+1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",P8I,"chest"))endifelsecall SetUnitX(P7I,GetUnitX(P8I)-40)call SetUnitY(P7I,GetUnitY(P8I)-40)if BU1(P8I)and IsUnitVisible(P8I,GetOwningPlayer(P7I))==false thencall KillUnit(P7I)elseif ModuloInteger(GetTriggerEvalCount(t),5)==0 thencall IssueTargetOrder(P7I,"attack",P8I)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction VN5 takes unit VS5,unit P8I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UnitRemoveAbility(VS5,1098282348)call SaveUnitHandle(LY,(S5I),(2),(VS5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093751130)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,VS5,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function VM5))call TriggerEvaluate(t)call UnitApplyTimedLife(VS5,1112820806,12+2*SUI)set t=nullendfunctionfunction VT5 takes nothing returns booleanreturn(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4290))))==1)==false and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))==true or BU1(GetFilterUnit())==false)endfunctionfunction VR5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group glocal integer i=1local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local unit VS5local unit P8Ilocal real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))set x=PTI(x+18*Cos(a))set y=PUI(y+18*Sin(a))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))if GetTriggerEvalCount(t)>166 thenloopexitwhen i>12if(LoadBoolean(LY,(S5I),(511+i-1)))==false thencall KillUnit((LoadUnitHandle(LY,(S5I),(393+i-1))))endifset i=i+1endloopcall FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,400,Condition(function VT5))loopexitwhen i>12if(LoadBoolean(LY,(S5I),(511+i-1)))==false thenset VS5=(LoadUnitHandle(LY,(S5I),(393+i-1)))set x=(LoadReal(LY,(S5I),(549+i-1)))set y=(LoadReal(LY,(S5I),(567+i-1)))set x=PTI(x+18*Cos(a))set y=PUI(y+18*Sin(a))call SaveReal(LY,(S5I),(549+i-1),((x)*1.0))call SaveReal(LY,(S5I),(567+i-1),((y)*1.0))call SetUnitX(VS5,x)call SetUnitY(VS5,y)set P8I=FirstOfGroup(g)if P8I!=null thencall GroupRemoveUnit(g,P8I)call SaveInteger(LY,(GetHandleId((P8I))),((4290)),(1))call SaveBoolean(LY,(S5I),(511+i-1),(true))call VN5(VS5,P8I,GetUnitAbilityLevel(P7I,1093751127))endifendifset i=i+1endloopcall NSI(g)set g=nullset VS5=nullset P8I=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction VP5 takes nothing returns nothinglocal location l=GetSpellTargetLoc()local real QJI=GetLocationX(l)local real QKI=GetLocationY(l)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=UEI(x,y,QJI,QKI)*bj_DEGTORADlocal unit I01local real IV1=PTI(x+3000*Cos(a))local real IW1=PUI(y+3000*Sin(a))local integer i=1local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real DJ1local integer SUI=GetUnitAbilityLevel(P7I,1093751127)local integer RIIcall RemoveLocation(l)if SUI==1 thenset RII=1966092619elseif SUI==2 thenset RII=1966092616elseif SUI==3 thenset RII=1966092618elseif SUI==4 thenset RII=1966092620endifloopexitwhen i>12set I01=CreateUnit(GetOwningPlayer(P7I),RII,x+GetRandomInt(-300,300),y+GetRandomInt(-300,300),a*bj_RADTODEG)call SaveUnitHandle(LY,(S5I),(393+i-1),(I01))call SaveBoolean(LY,(S5I),(511+i-1),(false))call SaveReal(LY,(S5I),(549+i-1),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(567+i-1),((GetUnitY(I01))*1.0))set i=i+1endloopcall TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function VR5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(47),((IV1)*1.0))call SaveReal(LY,(S5I),(48),((IW1)*1.0))set P7I=nullset I01=nullset l=nullset t=nullendfunctionfunction VQ5 takes nothing returns booleanif GetSpellAbilityId()==1093751127 thencall VP5()endifreturn falseendfunctionfunction MY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VQ5))call A51(1966092619)call A51(1966092616)call A51(1966092618)call A51(1966092620)call Q1I(1093751130)set t=nullendfunctionfunction VU5 takes unit P7I,unit WNO,unit IN3,integer SUI,boolean IS3 returns reallocal unit I01=CreateUnit(GetOwningPlayer(IN3),1697656901,GetUnitX(WNO),GetUnitY(WNO),0)if IS3 thencall IA1(I01,1093687129)elsecall IA1(I01,1093684812)endifcall IssueTargetOrder(I01,"thunderbolt",IN3)if IsUnitType(IN3,UNIT_TYPE_HERO)==false thencall PDI(P7I,IN3,1,50+25*SUI,0.4)elsecall PDI(P7I,IN3,1,50,0.4)endifif IS3 thenreturn((GetUnitX(IN3)-GetUnitX(WNO))*(GetUnitX(IN3)-GetUnitX(WNO))+(GetUnitY(IN3)-GetUnitY(WNO))*(GetUnitY(IN3)-GetUnitY(WNO)))/1000000endifset I01=nullreturn((GetUnitX(IN3)-GetUnitX(WNO))*(GetUnitX(IN3)-GetUnitX(WNO))+(GetUnitY(IN3)-GetUnitY(WNO))*(GetUnitY(IN3)-GetUnitY(WNO)))/360000endfunctionfunction W05 takes unit P7I,unit WNO returns unitlocal group g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(WNO),GetUnitY(WNO),600,Condition(function C91))call GroupRemoveUnit(g,WNO)set GK=GroupPickRandomUnit(g)call NSI(g)set g=nullreturn GKendfunctionfunction WI5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer W15=(LoadInteger(LY,(S5I),(391)))local unit WNO=NYI(W15)local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit IN3local real M5Icall FlushChildHashtable(LY,(S5I))call S0I(t)if NPI<(SUI*2+1)thenset IN3=W05(P7I,WNO)if IN3!=null thenset M5I=VU5(P7I,WNO,IN3,SUI,false)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(391),(NKI(IN3)))call SaveInteger(LY,(S5I),(34),(NPI+1))call TriggerRegisterTimerEvent(t,M5I+0.4,false)call TriggerAddCondition(t,Condition(function WI5))endifendifcall NXI(W15)set t=nullset P7I=nullset WNO=nullset IN3=nullreturn falseendfunctionfunction WO5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local unit IU3=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(SFI,1093684813)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real M5I=VU5(SFI,SFI,IU3,SUI,true)call SaveUnitHandle(LY,(S5I),(2),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(391),(NKI(IU3)))call SaveInteger(LY,(S5I),(34),(1))call TriggerRegisterTimerEvent(t,M5I,false)call TriggerAddCondition(t,Condition(function WI5))set SFI=nullset IU3=nullset t=nullendfunctionfunction W25 takes nothing returns booleanif GetSpellAbilityId()==1093684813 and NNI(GetSpellTargetUnit())==false thencall WO5()endifreturn falseendfunctionfunction N01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function W25))set t=nullendfunctionfunction W35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local integer SUI=GetUnitAbilityLevel(SFI,1093684805)call UnitRemoveAbility(SFI,1093684805)call IA1(SFI,1093684805)call SetUnitAbilityLevel(SFI,1093684805,SUI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction W45 takes unit P8I,integer SUI returns nothinglocal real HJ3=(8+SUI*8)/3call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+HJ3)endfunctionfunction W55 takes nothing returns booleanif(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))thencall W45(GetFilterUnit(),UJ)endifreturn falseendfunctionfunction W65 takes unit SFI returns nothinglocal integer SUI=GetUnitAbilityLevel(SFI,1093684805)local group g=NTI()set GK=SFIset UJ=SUIcall GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),525,Condition(function W55))call NSI(g)set g=nullendfunctionfunction W75 takes unit SFI returns nothinglocal integer SUI=GetUnitAbilityLevel(SFI,1093684805)local real W85=4+4*SUIcall SetUnitState(SFI,UNIT_STATE_MANA,GetUnitState(SFI,UNIT_STATE_MANA)-(W85/3))if GetUnitState(SFI,UNIT_STATE_MANA)<W85 thenif((LoadInteger(LY,(GetHandleId((SFI))),((4265))))==1)==false thencall IssueImmediateOrder(SFI,"unimmolation")endifendifendfunctionfunction W95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==852178 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function W35))endifelsecall W65(SFI)call W75(SFI)endifset t=nullreturn falseendfunctionfunction WA5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,0.33,true)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function W95))set SFI=nullset t=nullendfunctionfunction WB5 takes nothing returns booleanif GetSpellAbilityId()==1093684805 thencall WA5()endifreturn falseendfunctionfunction N11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WB5))set t=nullendfunctionfunction WC5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093684815)local integer NPI=GetTriggerEvalCount(t)local real WD5=(LoadReal(LY,(S5I),(392)))local real H84=0if GetTriggerEventId()==EVENT_UNIT_DEATH thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif NPI==4 or NPI==8 or NPI==12 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))if NPI==12 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif NPI==4 or NPI==8 thencall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\NetherInferno.mdx",P8I,"origin")))endifset H84=(0.08+SUI*0.08)*QDI(WD5-GetUnitState(P8I,UNIT_STATE_LIFE),0)if H84>0 thencall UYI("+"+I2S(R2I(H84)),2,P8I,0.023,68,0,187,216)endifendifcall P6I(P7I,P8I,1,5*SUI+H84)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction WE5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()call DestroyEffect(AddSpecialEffectTarget("effects\\NetherInferno.mdx",P8I,"origin"))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function WC5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(392),((GetUnitState(P8I,UNIT_STATE_LIFE))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\NetherInferno.mdx",P8I,"origin")))set t=nullset P7I=nullset P8I=nullendfunctionfunction WF5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093684815)call GroupEnumUnitsInRange(g,x,y,180+25,Condition(function D01))call ForGroup(g,function WE5)call NSI(g)call RemoveLocation(l)set l=nullset g=nullendfunctionfunction WG5 takes nothing returns booleanif GetSpellAbilityId()==1093684815 thencall WF5()endifreturn falseendfunctionfunction NI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WG5))set t=nullendfunctionfunction WH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST thencall PJI(P7I)endifset P7I=nullset t=nullreturn falseendfunctionfunction WZ5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function WH5))set t=nullset P7I=nullendfunctionfunction WV5 takes nothing returns booleanif GetSpellAbilityId()==1093684820 or GetSpellAbilityId()==1093684824 thencall WZ5()endifreturn falseendfunctionfunction WW5 takes nothing returns booleanif GetUnitTypeId(GetSummonedUnit())==1865429040 or GetUnitTypeId(GetSummonedUnit())==1865429041 or GetUnitTypeId(GetSummonedUnit())==1865429057 or GetUnitTypeId(GetSummonedUnit())==1865429080 thencall SCI(GetSummoningUnit(),4265,8)endifreturn falseendfunctionfunction NO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function WW5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function WV5))set t=nullendfunctionfunction WX5 takes nothing returns booleanlocal integer id=0local unit P8Ilocal real GW1=(TimerGetElapsed(M))local real mplocal real hploopexitwhen id>12set P8I=K1[id]if P8I!=null and GetUnitAbilityLevel(P8I,1110459204)==0 and W8I[id]>GW1 thenset W8I[id]=0endifif P8I!=null and GetUnitAbilityLevel(P8I,1110459204)>0 thenif W8I[id]>GW1 and IC1(P8I)==false thenset hp=GetUnitState(P8I,UNIT_STATE_LIFE)set mp=GetUnitState(P8I,UNIT_STATE_MANA)if hp<W9I[id]thenset W9I[id]=hpelseendifif mp<WAI[id]thenset WAI[id]=mpelseendifcall SetUnitState(P8I,UNIT_STATE_LIFE,W9I[id])set WCI[id]=WCI[id]+1if WCI[id]==10 thenset WCI[id]=0if WDI[id]==1 thencall P6I(WBI[id],P8I,1,12.5)elseif WDI[id]==2 thencall P6I(WBI[id],P8I,1,20)elseif WDI[id]==3 thencall P6I(WBI[id],P8I,1,32)endifendifelseif W8I[id]>GW1 and IC1(P8I)==true thenset W8I[id]=0set W9I[id]=9999set WAI[id]=9999endifif(GetUnitAbilityLevel(P8I,1110459204)>0 and W8I[id]<GW1)thencall UnitRemoveAbility(P8I,1093749313)call UnitRemoveAbility(P8I,1110459204)call UnitRemoveAbility(P8I,1093749828)endifendifset id=id+1endloopset P8I=nullreturn falseendfunctionfunction WY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01if GetUnitAbilityLevel(P8I,1110459204)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetOwningPlayer(P8I)!=GetOwningPlayer(GetEventDamageSource())and GetUnitState(P8I,UNIT_STATE_MAX_LIFE)*(0.09+0.01*SUI)>GetUnitState(P8I,UNIT_STATE_LIFE)and((LoadInteger(LY,(GetHandleId((P8I))),((2485))))==1)==false thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093749313)call UnitRemoveAbility(P8I,1110459204)call UnitRemoveAbility(P8I,1093749828)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"overhead"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"origin"))set I01=CreateUnit(GetOwningPlayer(GetEventDamageSource()),1697656901,0,0,0)call UnitRemoveBuffs(P8I,true,true)call UnitRemoveAbility(P8I,1097167980)call UnitDamageTarget(I01,P8I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set I01=nullendifset t=nullset P8I=nullreturn falseendfunctionfunction WJ5 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093750089)local integer id=GetPlayerId(GetOwningPlayer(P8I))local trigger tlocal integer S5Iif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093816645)endifif SUI>0 and IsUnitType(P8I,UNIT_TYPE_HERO)==true and IsUnitIllusion(P8I)==false and V51(GetUnitTypeId(P8I))==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function WY5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call IA1(P8I,1093749313)call IA1(P8I,1093749828)if GetUnitAbilityLevel(P7I,1093816645)>0 thenset W8I[id]=(TimerGetElapsed(M))+WEIelseset W8I[id]=(TimerGetElapsed(M))+7+SUIendifset W9I[id]=GetUnitState(P8I,UNIT_STATE_LIFE)set WAI[id]=GetUnitState(P8I,UNIT_STATE_MANA)set WBI[id]=P7Iset WDI[id]=SUIendifset t=nullendfunctionfunction WK5 takes nothing returns nothinglocal unit P7I=GKlocal unit P8I=GetEnumUnit()local integer id=GetPlayerId(GetOwningPlayer(P8I))local integer SUI=GetUnitAbilityLevel(P7I,1093750089)local trigger tlocal integer S5Iif IsUnitType(P8I,UNIT_TYPE_HERO)==true and IsUnitIllusion(P8I)==false and GetUnitAbilityLevel(P8I,1110459204)==0 and V51(GetUnitTypeId(P8I))==false thenif GetUnitAbilityLevel(P7I,1093816645)>0 thenset W8I[id]=WEIelseset W8I[id]=(TimerGetElapsed(M))+7+SUIendifcall IA1(P8I,1093749313)call IA1(P8I,1093749828)set W9I[id]=GetUnitState(P8I,UNIT_STATE_LIFE)set WAI[id]=GetUnitState(P8I,UNIT_STATE_MANA)set WBI[id]=P7Iset WDI[id]=SUIset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function WY5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullendifset P7I=nullset P8I=nullendfunctionfunction WL5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x0=(LoadReal(LY,(S5I),(282)))local real y0=(LoadReal(LY,(S5I),(283)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x0,y0,825,Condition(function DO1))call ForGroup(g,function WK5)call NSI(g)if GetTriggerEvalCount(t)>120 thencall KillUnit((LoadUnitHandle(LY,(S5I),(434))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset g=nullreturn falseendfunctionfunction Gust takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real RM2=GetUnitFacing(P7I)local real x2local real y2local unit WM5local unit X44local unit WN5local unit WS5local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093750089)call RemoveLocation(l)set x2=x+350*Cos(RM2*bj_DEGTORAD)set y2=y+350*Sin(RM2*bj_DEGTORAD)set WM5=CreateUnit(GetOwningPlayer(P7I),1747993139,x,y,RM2)set x2=x+350*Cos(RM2*bj_DEGTORAD)set y2=y-350*Sin(RM2*bj_DEGTORAD)set x2=x-350*Cos(RM2*bj_DEGTORAD)set y2=y+350*Sin(RM2*bj_DEGTORAD)set x2=x-350*Cos(RM2*bj_DEGTORAD)set y2=y-350*Sin(RM2*bj_DEGTORAD)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function WL5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(282),((x)*1.0))call SaveReal(LY,(S5I),(283),((y)*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(434),(WM5))set l=nullset P7I=nullset WM5=nullset X44=nullset WN5=nullset WS5=nullset t=nullendfunctionfunction Gust_Main takes nothing returns booleanif GetSpellAbilityId()==1093750328 thenendifreturn falseendfunctionfunction RO1 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer id=0local integer i=0local player pcall TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function WX5))loopexitwhen id>12set W9I[id]=9999set WAI[id]=9999set id=id+1endlooploopexitwhen i>5set p=BO[i]call SetPlayerAbilityAvailable(p,1093749828,false)set p=CO[i]call SetPlayerAbilityAvailable(p,1093749828,false)set i=i+1endloopset t=nullendfunctionfunction WT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real LVO=(LoadReal(LY,(GetHandleId(P7I)),(822)))if LVO+0.5<(TimerGetElapsed(M))or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)if BJ1(GetEnumUnit())thenreturn falseendifif GetUnitAbilityLevel(P7I,1093748826)>0 thencall UnitRemoveAbility(P7I,1093748826)call UnitRemoveAbility(P7I,1110459189)endifif GetUnitAbilityLevel(P7I,1093749044)>0 thencall UnitRemoveAbility(P7I,1093749044)call UnitRemoveAbility(P7I,1110459189)endifif GetUnitAbilityLevel(P7I,1093749043)>0 thencall UnitRemoveAbility(P7I,1093749043)call UnitRemoveAbility(P7I,1110459189)endifif GetUnitAbilityLevel(P7I,1093749046)>0 thencall UnitRemoveAbility(P7I,1093749046)call UnitRemoveAbility(P7I,1110459189)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction WR5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,GetEnumUnit())call TriggerAddCondition(t,Condition(function WT5))call SaveUnitHandle(LY,(S5I),(2),(GetEnumUnit()))set t=nullendfunctionfunction WP5 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif RKI(GetEnumUnit())==false thenif WFI==1 thenif GetUnitAbilityLevel(GetEnumUnit(),1093748826)==0 thencall UnitRemoveAbility(GetEnumUnit(),1110459189)call IA1(GetEnumUnit(),1093748826)call SaveReal(LY,(GetHandleId(GetEnumUnit())),(822),(((TimerGetElapsed(M)))*1.0))endifelseif WFI==2 thenif GetUnitAbilityLevel(GetEnumUnit(),1093749044)==0 thencall UnitRemoveAbility(GetEnumUnit(),1110459189)call IA1(GetEnumUnit(),1093749044)call SaveReal(LY,(GetHandleId(GetEnumUnit())),(822),(((TimerGetElapsed(M)))*1.0))endifelseif WFI==3 thenif GetUnitAbilityLevel(GetEnumUnit(),1093749043)==0 thencall UnitRemoveAbility(GetEnumUnit(),1110459189)call IA1(GetEnumUnit(),1093749043)call SaveReal(LY,(GetHandleId(GetEnumUnit())),(822),(((TimerGetElapsed(M)))*1.0))endifelseif WFI==4 thenif GetUnitAbilityLevel(GetEnumUnit(),1093749046)==0 thencall UnitRemoveAbility(GetEnumUnit(),1110459189)call IA1(GetEnumUnit(),1093749046)call SaveReal(LY,(GetHandleId(GetEnumUnit())),(822),(((TimerGetElapsed(M)))*1.0))endifendifendifendfunctionfunction WQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group RG3=(LoadGroupHandle(LY,(S5I),(340)))local real x=GetUnitX(I01)local real y=GetUnitY(I01)local group g=NTI()local group g2if GetTriggerEventId()==EVENT_UNIT_DEATH thencall ForGroup(RG3,function WR5)call NSI(g)call NSI(RG3)call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(I01,false)set t=nullset P7I=nullset I01=nullset RG3=nullreturn falseendifset WGI=P7Iset WFI=GetUnitAbilityLevel(P7I,1093748819)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,300,Condition(function CA1))call GroupRemoveGroup(g,RG3)call ForGroup(RG3,function WR5)call ForGroup(g,function WP5)call SaveGroupHandle(LY,(S5I),(340),(g))call NSI(RG3)set t=nullset P7I=nullset I01=nullset RG3=nullreturn falseendfunctionfunction WU5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local integer SUI=GetUnitAbilityLevel(P7I,1093748819)local unit I01=CreateUnit(GetOwningPlayer(P7I),1848658001,x,y,0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UnitApplyTimedLife(I01,1112820806,16)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,I01,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function WQ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveGroupHandle(LY,(S5I),(340),(NTI()))call RemoveLocation(l)set P7I=nullset l=nullendfunctionfunction X05 takes nothing returns booleanif GetSpellAbilityId()==1093748819 thencall WU5()endifreturn falseendfunctionfunction R01 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0local player pcall UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function X05))set t=nullloopexitwhen i>5set p=BO[i]call SetPlayerAbilityAvailable(p,1093748826,false)call SetPlayerAbilityAvailable(p,1093749044,false)call SetPlayerAbilityAvailable(p,1093749043,false)call SetPlayerAbilityAvailable(p,1093749046,false)set p=CO[i]call SetPlayerAbilityAvailable(p,1093748826,false)call SetPlayerAbilityAvailable(p,1093749044,false)call SetPlayerAbilityAvailable(p,1093749043,false)call SetPlayerAbilityAvailable(p,1093749046,false)set i=i+1endloopendfunctionfunction XI5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit I01local real PAI=(100+50*SUI)/4if GetTriggerEventId()==EVENT_UNIT_DEATH or QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))>765 or GetUnitAbilityLevel(P8I,1110459203)==0 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitRemoveAbility(P8I,1093749305)call UnitRemoveAbility(P8I,1110459203)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)==(10*0.8)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",P8I,"overhead")))call P6I(P7I,P8I,1,PAI)elseif GetTriggerEvalCount(t)==(10*1.6)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",P8I,"overhead")))call P6I(P7I,P8I,1,PAI)elseif GetTriggerEvalCount(t)==(10*2.5)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",P8I,"overhead")))call P6I(P7I,P8I,1,PAI)elseif GetTriggerEvalCount(t)==(10*3.4)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call P6I(P7I,P8I,1,PAI)elseif GetTriggerEvalCount(t)>(10*3.9)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitRemoveAbility(P8I,1093749305)call UnitRemoveAbility(P8I,1110459203)call FlushChildHashtable(LY,(S5I))call S0I(t)set I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093750090)call SetUnitAbilityLevel(I01,1093750090,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)set I01=nullendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction X15 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093750087)local string s="Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"if GetLocalPlayer()==GetOwningPlayer(P8I)thenendifcall IA1(P8I,1093749305)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(6),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P8I))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect(s,GetUnitX(P8I),GetUnitY(P8I))))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function XI5))set P7I=nullset P8I=nullset t=nullendfunctionfunction XO5 takes nothing returns booleanif GetSpellAbilityId()==1093750087 and NNI(GetSpellTargetUnit())==false thencall X15()endifreturn falseendfunctionfunction RI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XO5))set t=nullendfunctionfunction X25 takes nothing returns nothinglocal unit P7I=WZIlocal unit P8I=GetEnumUnit()local integer SUI=WHIcall WJ5(P7I,P8I)call P6I(P7I,P8I,1,150+100*SUI)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\PlasmaShot.mdl",P8I,"chest"))set P7I=nullset P8I=nullendfunctionfunction X35 takes nothing returns nothinglocal unit P7I=WZIlocal unit P8I=GetEnumUnit()local integer SUI=WHIcall WJ5(P7I,P8I)set P7I=nullset P8I=nullendfunctionfunction X45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real RM2=(LoadReal(LY,(S5I),(13)))local real CY3=(LoadReal(LY,(S5I),(432)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real x=GetUnitX(IG1)+30*Cos(RM2)local real y=GetUnitY(IG1)+30*Sin(RM2)local group glocal fogmodifier I31if QNI(x,y,QJI,QKI)<35 or x!=PTI(x)or y!=PUI(y)thenset x=QJIset y=QKIcall SetUnitX(IG1,x)call SetUnitY(IG1,y)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))set I31=(LoadFogModifierHandle(LY,(S5I),(440)))call FogModifierStop(I31)call DestroyFogModifier(I31)set I31=nullcall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(IG1)set GK=P7Iset WZI=P7Iset WHI=SUIset g=NTI()call GroupEnumUnitsInRange(g,x,y,CY3+25,Condition(function CA1))call ForGroup(g,function X25)call NSI(g)set g=nullelsecall SetUnitX(IG1,x)call SetUnitY(IG1,y)set GK=P7Iset WZI=P7Iset WHI=SUIset g=NTI()call GroupEnumUnitsInRange(g,x,y,300,Condition(function CA1))call ForGroup(g,function X35)call NSI(g)set g=nullendifset t=nullset IG1=nullset P7I=nullreturn falseendfunctionfunction X55 takes unit P7I,real x,real y,real C54,effect FX,fogmodifier I31 returns nothinglocal real RM2=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993142,GetUnitX(P7I),GetUnitY(P7I),RM2*bj_RADTODEG)local integer SUI=GetUnitAbilityLevel(P7I,1093750089)local real CY3=QCI(25+250+25*C54*2,1000)local real QWI=QNI(GetUnitX(P7I),GetUnitY(P7I),x,y)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093816645)endifif IsUnitEnemy(IG1,GetLocalPlayer())and P0I(GetLocalPlayer())==false thencall UnitSetUsesAltIcon(IG1,true)endifcall TriggerRegisterTimerEvent(t,QCI(2.0/(QWI/30),0.04),true)call TriggerAddCondition(t,Condition(function X45))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(47),((x)*1.0))call SaveReal(LY,(S5I),(48),((y)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(432),((CY3)*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveFogModifierHandle(LY,(S5I),(440),(I31))call SaveEffectHandle(LY,(S5I),(32),(FX))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750089,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093816645,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750094,false)set t=nullset IG1=nullendfunctionfunction X65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real RM2=(LoadReal(LY,(S5I),(13)))local real xlocal real ylocal real C54=(TimerGetElapsed(M))-(LoadReal(LY,(S5I),(431)))local string slocal fogmodifier I31local effect FXlocal real X75=GetUnitX(IG1)+30*Cos(RM2)local real X85=GetUnitY(IG1)+30*Sin(RM2)set x=PTI(X75)set y=PUI(X85)call SetUnitX(IG1,x)call SetUnitY(IG1,y)if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750094)or x!=X75 or y!=X85 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call RemoveUnit(IG1)set s=""if IsPlayerAlly(GetOwningPlayer(P7I),GetLocalPlayer())or P0I(GetLocalPlayer())thenset s="war3mapImported\\IceWindGroundFX.mdl"endifset I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,x,y,500,true,true)call FogModifierStart(I31)set FX=AddSpecialEffect(s,x,y)call X55(P7I,x,y,C54,FX,I31)set I31=nullset FX=nullendifset t=nullset IG1=nullset P7I=nullreturn falseendfunctionfunction X95 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1211122232,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)if IsUnitEnemy(IG1,GetLocalPlayer())and P0I(GetLocalPlayer())==false thencall UnitSetUsesAltIcon(IG1,true)endifcall SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveReal(LY,(S5I),(431),(((TimerGetElapsed(M)))*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function X65))call SetUnitColor(IG1,GetPlayerColor(Player(14)))call RemoveLocation(l)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750089,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093816645,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093750094,true)call IA1(P7I,1093750094)set P7I=nullset l=nullset t=nullset IG1=nullendfunctionfunction XA5 takes nothing returns booleanif GetSpellAbilityId()==1093750089 or GetSpellAbilityId()==1093816645 thencall X95()endifreturn falseendfunctionfunction R11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XA5))set t=nullendfunctionfunction ChillingTouch_DPS takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093748817)if GetTriggerEvalCount(t)==6 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall P6I(P7I,P8I,1,8+2*SUI)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XB5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer XC5=(LoadInteger(LY,(GetHandleId(P7I)),(449)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>1 thencall DisableTrigger(t)if XC5>0 thencall SaveInteger(LY,(GetHandleId(P7I)),(449),(XC5-1))call UYI("+"+I2S(40+10*SUI),1,P7I,0.024,100,200,255,255)call P6I(P7I,P8I,1,40+10*SUI)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XD5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED or(LoadInteger(LY,(GetHandleId(P7I)),(449)))==0 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call SaveInteger(LY,(GetHandleId(P7I)),(449),(0))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093748814)call UnitRemoveAbility(P7I,1110459210)call UnitRemoveAbility(P7I,1093749072)elseif GetAttacker()==P7I and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and((LoadInteger(LY,(GetHandleId((P7I))),((4289))))==1)==false thencall SCI(P7I,4289,0.4)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.0,false)call TriggerAddCondition(t,Condition(function XB5))call SaveUnitHandle(LY,(S5I),(17),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))endifset t=nullset P7I=nullreturn falseendfunctionfunction XE5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093748817)call IA1(P8I,1093748814)call IA1(P8I,1093749072)call SaveInteger(LY,(GetHandleId(P8I)),(449),(2+SUI))call SaveUnitHandle(LY,(S5I),(2),(P8I))call SaveUnitHandle(LY,(S5I),(19),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",P8I,"right,hand")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",P8I,"left,hand")))call TriggerRegisterTimerEvent(t,30,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function XD5))set P7I=nullset P8I=nullset t=nullendfunctionfunction XF5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)call RemoveLocation(l)call DestroyEffect(AddSpecialEffect("war3mapImported\\IcyWind.mdl",x,y))call GroupEnumUnitsInRange(g,x,y,525+25,Condition(function CR1))call GroupAddUnit(g,P7I)call ForGroup(g,function XE5)call NSI(g)set P7I=nullset g=nullset l=nullendfunctionfunction XG5 takes nothing returns booleanif GetSpellAbilityId()==1093748817 thencall XF5()endifreturn falseendfunctionfunction R21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XG5))set t=nullendfunctionfunction XH5 takes nothing returns nothingcall P6I(WVI,GetEnumUnit(),1,(GetUnitAbilityLevel(WVI,1093749069)*75)/10)endfunctionfunction XZ5 takes unit P7I returns nothinglocal real DH1=(GetUnitAbilityLevel(P7I,1093749069)*75)/2set DH1=DH1/10.0if GetUnitState(P7I,UNIT_STATE_LIFE)<=DH1*0.75 thenset DH1=GetUnitState(P7I,UNIT_STATE_LIFE)/0.75-10endifcall P6I(P7I,P7I,1,DH1)endfunctionfunction XV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group glocal real DH1local unit I01local integer SUI=0local integer NPI=GetTriggerEvalCount(t)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)return falseelseif GetTriggerEvalCount(t)==1 thenset I01=CreateUnit(GetOwningPlayer(P7I),1747993138,x,y,0)call UnitApplyTimedLife(I01,1112820806,1)set I01=nullcall TriggerRegisterTimerEvent(t,0.1,true)set g=NTI()set WVI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,350,Condition(function CA1))call ForGroup(g,function XH5)call XZ5(P7I)call NSI(g)elseif NPI==10 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset g=NTI()set WVI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,350,Condition(function CA1))call ForGroup(g,function XH5)call XZ5(P7I)call NSI(g)call EO1(P7I)call DU1(P7I,0,0)endifendifset t=nullset g=nullset P7I=nullreturn falseendfunctionfunction XW5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real DH1=(GetUnitAbilityLevel(P7I,1093749069)*75)/2call TriggerRegisterTimerEvent(t,1.5,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function XV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction XX5 takes nothing returns booleanif GetSpellAbilityId()==1093749069 thencall XW5()endifreturn falseendfunctionfunction R61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function XX5))set t=nullendfunctionfunction XY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local player VE2local integer SUI=GetUnitAbilityLevel(P7I,1093749070)local integer MainLevel=GetUnitAbilityLevel(P7I,1093749070)local real GW1=(TimerGetElapsed(M))local real XJ5=(LoadReal(LY,(S5I),(415)))local real XK5=(LoadReal(LY,(S5I),(416)))if IC1(P7I)thenset t=nullset P7I=nullreturn falseendifif TII(GetOwningPlayer(P7I))thenset VE2=CO[1]elseset VE2=BO[1]endifif GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetOwningPlayer(GetEventDamageSource())==DO thenif GetUnitAbilityLevel(P7I,1093749061)>0 thencall UnitRemoveAbility(P7I,1093749061)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749062)>0 thencall UnitRemoveAbility(P7I,1093749062)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749063)>0 thencall UnitRemoveAbility(P7I,1093749063)call UnitRemoveAbility(P7I,1110459193)endifcall SaveReal(LY,(S5I),(414),((GW1+2)*1.0))set t=nullset P7I=nullreturn falseendifif(LoadReal(LY,(S5I),(414)))>GW1 thenset t=nullset P7I=nullreturn falseendifif(IsUnitVisible(P7I,VE2)and BM1(P7I)==false)or GetUnitAbilityLevel(P7I,1112433775)>0 thenset XK5=0if GetUnitAbilityLevel(P7I,1093749061)>0 or GetUnitAbilityLevel(P7I,1093749062)>0 or GetUnitAbilityLevel(P7I,1093749063)>0 thenset XJ5=XJ5+0.1if XJ5>0.4 thenset XJ5=0if GetUnitAbilityLevel(P7I,1093749061)>0 thencall UnitRemoveAbility(P7I,1093749061)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749062)>0 thencall UnitRemoveAbility(P7I,1093749062)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749063)>0 thencall UnitRemoveAbility(P7I,1093749063)call UnitRemoveAbility(P7I,1110459193)endifendifendifcall SaveReal(LY,(S5I),(415),((XJ5)*1.0))call SaveReal(LY,(S5I),(416),((XK5)*1.0))elseif IsUnitVisible(P7I,VE2)==false or BM1(P7I)thenset XJ5=0if(SUI==1 and GetUnitAbilityLevel(P7I,1093749061)==0)or(SUI==2 and GetUnitAbilityLevel(P7I,1093749062)==0)or(SUI==3 and GetUnitAbilityLevel(P7I,1093749063)==0)thenset XK5=XK5+0.1if XK5>0.4 thenset XK5=0if SUI==1 thenif GetUnitAbilityLevel(P7I,1093749061)==0 thencall IA1(P7I,1093749061)call UnitMakeAbilityPermanent(P7I,true,1093749047)call UnitMakeAbilityPermanent(P7I,true,1093749048)call UnitMakeAbilityPermanent(P7I,true,1093749059)endifendifif SUI==2 thenif GetUnitAbilityLevel(P7I,1093749061)>0 thencall UnitRemoveAbility(P7I,1093749061)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749062)==0 thencall IA1(P7I,1093749062)call UnitMakeAbilityPermanent(P7I,true,1093749047)call UnitMakeAbilityPermanent(P7I,true,1093749049)call UnitMakeAbilityPermanent(P7I,true,1093749060)endifendifif SUI==3 thenif GetUnitAbilityLevel(P7I,1093749061)>0 thencall UnitRemoveAbility(P7I,1093749061)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749062)>0 thencall UnitRemoveAbility(P7I,1093749062)call UnitRemoveAbility(P7I,1110459193)endifif GetUnitAbilityLevel(P7I,1093749063)==0 thencall IA1(P7I,1093749063)call UnitMakeAbilityPermanent(P7I,true,1093749047)call UnitMakeAbilityPermanent(P7I,true,1093749057)call UnitMakeAbilityPermanent(P7I,true,1093749058)endifendifendifendifcall SaveReal(LY,(S5I),(415),((XJ5)*1.0))call SaveReal(LY,(S5I),(416),((XK5)*1.0))endifset t=nullset P7I=nullreturn falseendfunctionfunction XL5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveReal(LY,(S5I),(415),((0)*1.0))call SaveReal(LY,(S5I),(416),((0)*1.0))call SaveReal(LY,(S5I),(414),(((TimerGetElapsed(M)))*1.0))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function XY5))call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749061,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749062,false)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093749063,false)set t=nullendfunctionfunction XM5 takes nothing returns booleanif GetLearnedSkill()==1093749070 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093749070)==1 thencall XL5()endifreturn falseendfunctionfunction R51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function XM5))set t=nullendfunctionfunction XN5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=GetDyingUnit()if GetOwningPlayer(GetKillingUnit())==GetOwningPlayer(P7I)and IsUnitType(P8I,UNIT_TYPE_HERO)==true and IsUnitIllusion(P8I)==false thenendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer XT5=(LoadInteger(LY,(S5I),(422)))local integer XR5=(LoadInteger(LY,(S5I),(423)))local integer HJ4=(LoadInteger(LY,(S5I),(424)))if GetTriggerEventId()==EVENT_UNIT_DEATH thenif(LoadBoolean(LY,(S5I),(276)))==false and GetTriggerUnit()==P7I thencall SaveBoolean(LY,(S5I),(276),(true))call SetHeroAgi(P7I,GetHeroAgi(P7I,false)-XT5-XR5-HJ4,true)elseif(LoadBoolean(LY,(S5I),(277)))==false and GetTriggerUnit()==P8I thencall SaveBoolean(LY,(S5I),(277),(true))call SetHeroAgi(P8I,GetHeroAgi(P8I,false)+XT5,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)+XR5,true)call SetHeroInt(P8I,GetHeroInt(P8I,false)+HJ4,true)endifelseif(LoadBoolean(LY,(S5I),(276)))==false thencall SaveBoolean(LY,(S5I),(276),(true))call SetHeroAgi(P7I,GetHeroAgi(P7I,false)-XT5-XR5-HJ4,true)endifif(LoadBoolean(LY,(S5I),(277)))==false thencall SaveBoolean(LY,(S5I),(277),(true))call SetHeroAgi(P8I,GetHeroAgi(P8I,false)+XT5,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)+XR5,true)call SetHeroInt(P8I,GetHeroInt(P8I,false)+HJ4,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XP5 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093748818)local integer KBO=SEI(P8I)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer XT5local integer XR5local integer HJ4local real DC1if KBO==2 thenset XT5=IMinBJ(GetHeroAgi(P8I,false)-1,1)set XR5=IMinBJ(GetHeroStr(P8I,false)-1,1)set HJ4=IMinBJ(GetHeroInt(P8I,false)-1,1)elseif KBO==3 thenset XT5=IMinBJ(GetHeroAgi(P8I,false)-1,1)set XR5=IMinBJ(GetHeroStr(P8I,false)-1,1)set HJ4=IMinBJ(GetHeroInt(P8I,false)-1,1)elseif KBO==1 thenset XT5=IMinBJ(GetHeroAgi(P8I,false)-1,1)set XR5=IMinBJ(GetHeroStr(P8I,false)-1,1)set HJ4=IMinBJ(GetHeroInt(P8I,false)-1,1)endifcall SetHeroAgi(P7I,GetHeroAgi(P7I,false)+XT5+HJ4+XR5,true)call SetHeroAgi(P8I,GetHeroAgi(P8I,false)-XT5,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)-XR5,true)call SetHeroInt(P8I,GetHeroInt(P8I,false)-HJ4,true)call SaveInteger(LY,(S5I),(422),(XT5))call SaveInteger(LY,(S5I),(424),(HJ4))call SaveInteger(LY,(S5I),(423),(XR5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveBoolean(LY,(S5I),(276),(false))call SaveBoolean(LY,(S5I),(277),(false))if SUI==1 thenset DC1=15elseif SUI==2 thenset DC1=30elseif SUI==3 thenset DC1=60elseif SUI==4 thenset DC1=120endifcall TriggerRegisterTimerEvent(t,DC1,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function XS5))set t=nullendfunctionfunction XQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DEATH thencall XP5(P7I,P8I)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction XU5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function XQ5))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction Y05 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1,false)call TriggerAddCondition(t,Condition(function XU5))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction YI5 takes nothing returns nothinglocal unit P7I=GetAttacker()if((LoadInteger(LY,(GetHandleId((P7I))),((4274))))==1)==false thencall SCI(P7I,4274,0.45-GetUnitAbilityLevel(GetAttacker(),1093748818)*0.05)call Y05()endifendfunctionfunction Y15 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093748818)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall YI5()endifreturn falseendfunctionfunction YO5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5Icall UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function Y15))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function XN5))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))set t=nullendfunctionfunction Y25 takes nothing returns booleanif GetLearnedSkill()==1093748818 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748818)==1 thencall YO5()endifreturn falseendfunctionfunction R31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function Y25))set t=nullendfunctionfunction Y35 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if NPI>(4.0)/0.03 or GetTriggerEventId()==EVENT_WIDGET_DEATH thenif((LoadInteger(LY,(GetHandleId((P7I))),((4420))))==1)==false thencall UnitSetUsesAltIcon(P7I,false)endifcall SaveInteger(LY,(GetHandleId((P7I))),((4421)),(2))call UnitAddAbility(P7I,1093817942)call UnitRemoveAbility(P7I,1093817942)call KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetTriggerUnit()==P7I thencall IssueImmediateOrder(GetAttacker(),"stop")endifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifset t=nullset P7I=nullset I01=nullreturn falseendfunctionfunction Y45 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093749070)local real d=4.0local unit I01=CreateUnit(GetOwningPlayer(P7I),1747993137,GetUnitX(P7I),GetUnitY(P7I),0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))==false and P0I(GetLocalPlayer())==false thencall UnitSetUsesAltIcon(P7I,true)endifcall AH1(P7I,1093748823,1,d)call AH1(P7I,1093748824,1,d)call SaveInteger(LY,(GetHandleId((P7I))),((4421)),(1))call UnitAddAbility(P7I,1093817941)call UnitRemoveAbility(P7I,1093817941)if GetUnitTypeId(P7I)!=1160786520 thencall UnitAddAbility(P7I,1097625443)call UnitRemoveAbility(P7I,1097625443)endifcall ShowUnit(P7I,false)call ShowUnit(P7I,true)call SelectUnitAddForPlayer(P7I,GetOwningPlayer(P7I))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterDeathEvent(t,P7I)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function Y35))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))set P7I=nullendfunctionfunction Y55 takes nothing returns booleanif GetSpellAbilityId()==1093749070 thencall Y45()endifreturn falseendfunctionfunction R41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function Y55))set t=nullendfunctionfunction Y65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real IV1local real IW1local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real RM2local real QWI=QNI(II3,I13,QJI,QKI)call SaveReal(LY,(S5I),(23),((QJI)*1.0))call SaveReal(LY,(S5I),(24),((QKI)*1.0))if QWI>100 or NPI>(3.5/.03)or RKI(P8I)==true thencall DestroyLightning(UZI)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall MoveLightning(UZI,true,QXI,QYI,QJI,QKI)if QNI(QXI,QYI,QJI,QKI)>325 thenset RM2=Atan2(QKI-QYI,QJI-QXI)set IV1=QXI+(325)*Cos(RM2)set IW1=QYI+(325)*Sin(RM2)call SetUnitX(P8I,IV1)call SetUnitY(P8I,IW1)endifendifset t=nullset P7I=nullset P8I=nullset UZI=nullreturn falseendfunctionfunction Y75 takes unit P7I,unit P8I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local lightning UZI=AddLightning("PONC",true,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))call SetLightningColor(UZI,1,1,1,1)call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(189),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(190),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Y65))call P6I(P7I,P8I,1,50*SUI)call IssueTargetOrder(P7I,"attack",P8I)set t=nullset UZI=nullendfunctionfunction Y85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real RM2=(LoadReal(LY,(S5I),(13)))local real BA3=(LoadReal(LY,(S5I),(189)))local real BB3=(LoadReal(LY,(S5I),(190)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real IV1=BA3+(30*(20+4*2)/30)*NPI*Cos(RM2*bj_DEGTORAD)local real IW1=BB3+(30*(20+4*2)/30)*NPI*Sin(RM2*bj_DEGTORAD)local real YB3=SquareRoot((IV1-QJI)*(IV1-QJI)+(IW1-QKI)*(IW1-QKI))local real YC3=700local real YD3=175local real YE3=(1-YB3/YC3)*YD3*2local group g=NTI()local unit P8Iif NPI==1 thencall SetUnitAnimationByIndex(P7I,5)call SetUnitTimeScale(P7I,1.5)endifif YE3>YD3 thencall SetUnitAnimationByIndex(P7I,5)set YE3=YD3*2-YE3endifcall SetUnitFlyHeight(P7I,QDI(YE3,0),0)call SetUnitX(P7I,PTI(IV1))call SetUnitY(P7I,PUI(IW1))call SetUnitFacing(P7I,RM2)set GK=P7Icall GroupEnumUnitsInRange(g,IV1,IW1,120,Condition(function D21))set P8I=FirstOfGroup(g)call NSI(g)if YB3<30 or P8I!=null or GetTriggerEvalCount(t)>75 thencall SetUnitFlyHeight(P7I,0,0)call SetUnitFacing(P7I,RM2)call SetUnitTimeScale(P7I,1)call SetUnitAnimation(P7I,"stand")call SetUnitPathing(P7I,true)call UnitRemoveAbility(P7I,1093749302)call UPI(GetUnitX(P7I),GetUnitY(P7I),100)if P8I!=null and RKI(P8I)==false thencall SCI(P8I,4408,5)call Y75(P7I,P8I,SUI)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction Y95 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093749303)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QWI=700local real RM2=GetUnitFacing(P7I)local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=PTI(QXI+QWI*Cos(RM2*bj_DEGTORAD))local real QKI=PUI(QYI+QWI*Sin(RM2*bj_DEGTORAD))call IA1(P7I,1097691750)call UnitRemoveAbility(P7I,1097691750)call SetUnitPathing(P7I,false)call IA1(P7I,1093749302)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function Y85))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(189),((QXI)*1.0))call SaveReal(LY,(S5I),(190),((QYI)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))set P7I=nullset t=nullendfunctionfunction YA5 takes nothing returns booleanif GetSpellAbilityId()==1093749303 thencall Y95()endifreturn falseendfunctionfunction R71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YA5))set t=nullendfunctionfunction YB5 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real PAI=(LoadReal(LY,(S5I),(20)))call P6I(P7I,P8I,1,PAI)set P7I=nullset P8I=nullendfunctionfunction YC5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local trigger t=IJ1(P7I,P8I,1747993168,"YB5",700,false)local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093678145)local real PAIif SUI==1 thenset PAI=85elseif SUI==2 thenset PAI=165elseif SUI==3 thenset PAI=225elseif SUI==4 thenset PAI=300endifcall SaveReal(LY,(S5I),(20),((PAI)*1.0))set P7I=nullset P8I=nullset t=nullendfunctionfunction YD5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093678145)call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),500,Condition(function C51))call ForGroup(g,function YC5)call NSI(g)call PlaySoundOnUnitBJ(OF,100,P7I)set P7I=nullendfunctionfunction YE5 takes nothing returns booleanif GetSpellAbilityId()==1093678145 thencall YD5()endifreturn falseendfunctionfunction R81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YE5))set t=nullendfunctionfunction YF5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),WXI)==false thencall GroupAddUnit(WXI,GetEnumUnit())call P6I(WYI,GetEnumUnit(),7,WJI)endifendfunctionfunction YG5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local group PR2=(LoadGroupHandle(LY,(S5I),(22)))local real a=(LoadReal(LY,(S5I),(137)))local real IT3=QLI(P7I,IG1)local real IV1=GetUnitX(IG1)+WWI*0.02*Cos(a*bj_DEGTORAD)local real IW1=GetUnitY(IG1)+WWI*0.02*Sin(a*bj_DEGTORAD)local group glocal real r=100+350*IT3/900local integer SUI=GetUnitAbilityLevel(P7I,1093873718)local real PAIif SUI>0 thenset PAI=190+100*SUIelseset SUI=GetUnitAbilityLevel(P7I,1093873719)set PAI=200+125*SUIendifif IT3>900 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call NSI(PR2)call KillUnit(IG1)elsecall SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)set GK=P7Iset WYI=P7Iset WXI=PR2set WJI=PAIset g=NTI()call GroupEnumUnitsInRange(g,IV1,IW1,r,Condition(function CA1))call ForGroup(g,function YF5)call NSI(g)set g=nullendifset PR2=nullset t=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction YH5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993943,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),x,y)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function YG5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call SaveReal(LY,(S5I),(137),((a)*1.0))set P7I=nullset t=nullset IG1=nullendfunctionfunction YZ5 takes nothing returns booleanif GetSpellAbilityId()==1093873718 or GetSpellAbilityId()==1093873719 thencall YH5()endifreturn falseendfunctionfunction R91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YZ5))set t=nullendfunctionfunction YV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall FlushChildHashtable(LY,(S5I))call S0I(t)call PJI(P7I)endifset t=nullset P7I=nullreturn falseendfunctionfunction YW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093677136)call TriggerRegisterTimerEvent(t,1+1.75+0.75*SUI,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerAddCondition(t,Condition(function YV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction YX5 takes nothing returns booleanif GetSpellAbilityId()==1093677136 thencall YW5()endifreturn falseendfunctionfunction RA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YX5))set t=nullendfunctionfunction YY5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093677128)local integer RIIlocal real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local real xlocal real ylocal real dlocal real hlocal real M5I=40local unit uif SUI==0 thenset M5I=45set SUI=GetUnitAbilityLevel(P7I,1093681457)if SUI==1 thenset RII=1865429315elseif SUI==2 thenset RII=1865429316elseif SUI==3 thenset RII=1865429317endifelseif SUI==1 thenset RII=1869836340elseif SUI==2 thenset RII=1865429048elseif SUI==3 thenset RII=1865429049endifendifset d=65set h=65set x=QJI+0*dset y=QKI+1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI+1*dset y=QKI+1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI+2*dset y=QKI+1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI-1*dset y=QKI+1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI-2*dset y=QKI+1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI-1*dset y=QKI+0*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI+1*dset y=QKI+0*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI-1*dset y=QKI-1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI+0*dset y=QKI-1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set x=QJI+1*dset y=QKI-1*hset u=CreateUnit(GetOwningPlayer(P7I),RII,x,y,0)call UnitApplyTimedLife(u,1112820806,M5I)set P7I=nullendfunctionfunction YJ5 takes nothing returns booleanif GetSpellAbilityId()==1093677128 or GetSpellAbilityId()==1093681457 thencall YY5()endifreturn falseendfunctionfunction RB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YJ5))set t=nullendfunctionfunction YK5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)==4 or RKI(P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093816119)call UnitRemoveAbility(P8I,1110460227)call FlushChildHashtable(LY,(S5I))call S0I(t)endifif GetTriggerEventId()!=EVENT_WIDGET_DEATH thencall P6I(P7I,P8I,1,20*SUI-10)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction YL5 takes unit P7I,unit P8I,integer SUI returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P8I,1093816119)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function YK5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",P8I,"chest")))set t=nullendfunctionfunction YM5 takes nothing returns booleanif IsUnitInGroup(GetEnumUnit(),WKI)==false and RKI(GetEnumUnit())==false thencall GroupAddUnit(WKI,GetEnumUnit())call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireBlast.mdx",GetEnumUnit(),"chest"))call YL5(WMI,GetEnumUnit(),WLI)endifreturn falseendfunctionfunction YN5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real a=(LoadReal(LY,(S5I),(13)))local real YS5=(1-I2R(NPI)/50)*bj_PIlocal real YT5=1400/2*Cos(YS5)local real YR5=500/2*Sin(YS5)local real x=PTI(QJI+YT5*Cos(a)-YR5*Sin(a))local real y=PUI(QKI+YT5*Sin(a)+YR5*Cos(a))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local group glocal integer SUI=GetUnitAbilityLevel(P7I,1093751370)if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and NPI>0 and(GetSpellAbilityId()==1093808206 or GetSpellAbilityId()==1093751371))or NPI>100 or BH1(P7I)thencall UPI(x,y,300)call SetUnitVertexColor(P7I,255,255,255,255)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093751370 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751370,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808206,false)call SetUnitPathing(P7I,true)call NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif ModuloInteger(NPI,10)==0 thencall UPI(x,y,200)endifcall SaveInteger(LY,(S5I),(34),(NPI+1))call SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitFacing(P7I,(a+YS5-bj_PI/2)*bj_RADTODEG)set g=NTI()set WKI=JAOset GK=P7Iset WMI=P7Iset WLI=GetUnitAbilityLevel(P7I,1093751370)call GroupEnumUnitsInRange(g,x,y,200+25,Condition(function CE1))call ForGroup(g,function YM5)call NSI(g)endifset t=nullset P7I=nullset g=nullset JAO=nullreturn falseendfunctionfunction YP5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real a=UEI(QXI,QYI,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORADlocal real QJI=QXI+1400/2*Cos(a)local real QKI=QYI+1400/2*Sin(a)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)-GetUnitState(P7I,UNIT_STATE_LIFE)*0.15)call SCI(P7I,4301,2)call SCI(P7I,4415,2)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YN5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(189),((QXI)*1.0))call SaveReal(LY,(S5I),(190),((QYI)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveGroupHandle(LY,(S5I),(133),(NTI()))call SetUnitPathing(P7I,false)call SetUnitVertexColor(P7I,255,255,255,50)call IA1(P7I,1093808206)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751370,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808206,true)set t=nullset P7I=nullendfunctionfunction YQ5 takes nothing returns booleanif GetSpellAbilityId()==1093751370 thencall YP5()endifreturn falseendfunctionfunction RC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function YQ5))set t=nullendfunctionfunction YU5 takes nothing returns nothinglocal unit P7I=WNIlocal unit P8I=GetEnumUnit()call P6I(P7I,P8I,1,40+20*WSI)call U5I("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",P8I,"origin",1)set P7I=nullset P8I=nullendfunctionfunction J05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093751371)local group gif GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset GK=P7Iset WNI=P7Iset WSI=SUIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1000+25,Condition(function CA1))call ForGroup(g,function YU5)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction JI5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit J15=(LoadUnitHandle(LY,(S5I),(589)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif IsUnitIllusion(GetEventDamageSource())==true thencall QGI(J15,GetEventDamage())endifelseif GetUnitX(J15)!=x or GetUnitY(J15)!=y thencall SetUnitPosition(J15,x,y)endifif GetUnitY(P7I)!=x or GetUnitY(P7I)!=y thencall SetUnitPosition(P7I,x,y)endifcall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifif GetTriggerEvalCount(t)==1 thencall PauseUnit(P7I,true)endifset t=nullset J15=nullset P7I=nullset I01=nullreturn falseendfunctionfunction JO5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit J25=(LoadUnitHandle(LY,(S5I),(588)))local unit J15=(LoadUnitHandle(LY,(S5I),(589)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit ZK3=(LoadUnitHandle(LY,(S5I),(239)))local integer SUI=GetUnitAbilityLevel(P7I,1093751371)local group glocal unit I01local integer J35if GetTriggerEventId()==EVENT_UNIT_DEATH thencall StopSound(BF,false,false)call ShowUnit(J25,false)call ShowUnit(ZK3,false)call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(P7I,true)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(2))call UnitRemoveAbility(P7I,1093678162)call SetUnitInvulnerable(P7I,false)call PauseUnit(P7I,false)if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(P7I,true)endifcall SetUnitState(P7I,UNIT_STATE_LIFE,1)set I01=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)call UnitRemoveBuffs(P7I,true,true)call UnitRemoveAbility(P7I,1097167980)call UnitDamageTarget(I01,P7I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set I01=nullelseif GetTriggerEvalCount(t)==1 thencall SetUnitFlyHeight(J15,0,200)elseif GetTriggerEvalCount(t)==2 thencall PauseUnit(J15,false)call UnitApplyTimedLife(J15,1112820806,0.1)call StopSound(BF,false,false)call StartSound(CF)call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(J25),GetUnitY(J25)))call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(P7I,true)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(2))call UnitRemoveAbility(P7I,1093678162)call SetUnitInvulnerable(P7I,false)call SetUnitAnimationByIndex(P7I,8)call QueueUnitAnimation(P7I,"idle")call PauseUnit(P7I,false)if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(P7I,true)endifcall ShowUnit(J25,false)call ShowUnit(ZK3,false)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_MAX_LIFE))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MAX_MANA))set J35=GetUnitAbilityLevel(P7I,1093751370)if J35>0 thencall UnitRemoveAbility(P7I,1093751370)call UnitAddAbility(P7I,1093751370)call SetUnitAbilityLevel(P7I,1093751370,J35)endifset J35=GetUnitAbilityLevel(P7I,1093753176)if J35>0 thencall UnitRemoveAbility(P7I,1093753176)call UnitAddAbility(P7I,1093753176)call SetUnitAbilityLevel(P7I,1093753176,J35)endifset J35=GetUnitAbilityLevel(P7I,1093753177)if J35>0 thencall UnitRemoveAbility(P7I,1093753177)call UnitAddAbility(P7I,1093753177)call SetUnitAbilityLevel(P7I,1093753177,J35)endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093753428)call SetUnitAbilityLevel(I01,1093753428,SUI)call IssueImmediateOrder(I01,"stomp")set I01=nullendifendifset t=nullset P7I=nullset J25=nullset ZK3=nullset J15=nullreturn falseendfunctionfunction J45 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit J25local unit J15local unit ZK3=CreateUnit(GetOwningPlayer(P7I),1747993420,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093751371)local unit I01local unit J55=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)set J25=CreateUnit(GetOwningPlayer(P7I),1747993176,x,y,0)if SUI==1 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993430,x,y,0)elseif SUI==2 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993432,x,y,0)elseif SUI==3 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993431,x,y,0)endifcall AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",J25,"origin")if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(J15,true)endifcall UPI(x,y,400)call ShowUnit(P7I,false)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(1))call IA1(P7I,1093678162)call DU1(P7I,0,0)call SetUnitInvulnerable(P7I,true)call UnitRemoveBuffs(P7I,true,true)call StartSound(BF)call UnitRemoveAbility(J15,1098015094)call UnitApplyTimedLife(J25,1112820806,6.1)call UnitApplyTimedLife(ZK3,1112820806,6.1)call UnitApplyTimedLife(J15,1112820806,6.1)call TriggerRegisterTimerEvent(t,5.2,false)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function JO5))call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(588),(J25))call SaveUnitHandle(LY,(S5I),(589),(J15))call SaveUnitHandle(LY,(S5I),(239),(ZK3))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function J05))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,.02,true)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function JI5))call SaveUnitHandle(LY,(S5I),(589),(J15))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveUnitHandle(LY,(S5I),(19),(J55))if EA1(P7I,1227899192)thencall UnitAddAbility(J55,1093678153)endifset t=nullset P7I=nullset J25=nullset J15=nullendfunctionfunction J65 takes nothing returns booleanif GetSpellAbilityId()==1093751371 thencall J45()endifreturn falseendfunctionfunction RZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function J65))call Q1I(1093687350)call Q1I(1093753428)set t=nullendfunctionfunction J75 takes nothing returns nothinglocal unit P7I=WTIlocal unit P8I=GetEnumUnit()call P6I(P7I,P8I,1,40+20*WRI)call U5I("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",P8I,"origin",1)set P7I=nullset P8I=nullendfunctionfunction J85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093818706)local group gif GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseset GK=P7Iset WTI=P7Iset WRI=SUIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1000+25,Condition(function CA1))call ForGroup(g,function J75)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction J95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit J15=(LoadUnitHandle(LY,(S5I),(589)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif IsUnitIllusion(GetEventDamageSource())==true thencall QGI(J15,GetEventDamage())endifelseif GetUnitX(J15)!=x or GetUnitY(J15)!=y thencall SetUnitPosition(J15,x,y)endifif GetUnitY(P7I)!=x or GetUnitY(P7I)!=y thencall SetUnitPosition(P7I,x,y)endifcall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))if P8I!=null and(GetUnitY(P8I)!=x or GetUnitY(P8I)!=y)thencall SetUnitPosition(P8I,x,y)endifendifif GetTriggerEvalCount(t)==1 thencall PauseUnit(P7I,true)endifset t=nullset J15=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction JA5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit J25=(LoadUnitHandle(LY,(S5I),(588)))local unit J15=(LoadUnitHandle(LY,(S5I),(589)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local unit ZK3=(LoadUnitHandle(LY,(S5I),(239)))local integer SUI=GetUnitAbilityLevel(P7I,1093818706)local group glocal unit I01local integer J35if GetTriggerEventId()==EVENT_UNIT_DEATH thencall StopSound(BF,false,false)call ShowUnit(J25,false)call ShowUnit(ZK3,false)call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(P7I,true)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(2))call UnitRemoveAbility(P7I,1093678162)call SetUnitInvulnerable(P7I,false)call PauseUnit(P7I,false)if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(P7I,true)endifcall SetUnitState(P7I,UNIT_STATE_LIFE,1)set I01=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)call UnitRemoveBuffs(P7I,true,true)call UnitRemoveAbility(P7I,1097167980)call UnitDamageTarget(I01,P7I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if P8I!=null thencall ShowUnit(P8I,true)call SaveInteger(LY,(GetHandleId((P8I))),((4326)),(2))call UnitRemoveAbility(P8I,1093678162)call SetUnitInvulnerable(P8I,false)call PauseUnit(P8I,false)if GetLocalPlayer()==GetOwningPlayer(P8I)thencall ClearSelection()call SelectUnit(P8I,true)endifcall SetUnitState(P8I,UNIT_STATE_LIFE,1)set I01=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)call UnitRemoveBuffs(P8I,true,true)call UnitRemoveAbility(P8I,1097167980)call UnitDamageTarget(I01,P8I,100000000.00,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifset I01=nullelseif GetTriggerEvalCount(t)==1 thencall SetUnitFlyHeight(J15,0,200)elseif GetTriggerEvalCount(t)==2 thencall PauseUnit(J15,false)call UnitApplyTimedLife(J15,1112820806,0.1)call StopSound(BF,false,false)call StartSound(CF)call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(J25),GetUnitY(J25)))call FlushChildHashtable(LY,(S5I))call S0I(t)call ShowUnit(P7I,true)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(2))call UnitRemoveAbility(P7I,1093678162)call SetUnitInvulnerable(P7I,false)call SetUnitAnimationByIndex(P7I,8)call QueueUnitAnimation(P7I,"idle")call PauseUnit(P7I,false)if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(P7I,true)endifcall ShowUnit(J25,false)call ShowUnit(ZK3,false)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_MAX_LIFE))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MAX_MANA))if P8I!=null thencall ShowUnit(P8I,true)call SaveInteger(LY,(GetHandleId((P8I))),((4326)),(2))call UnitRemoveAbility(P8I,1093678162)call SetUnitInvulnerable(P8I,false)call PauseUnit(P8I,false)if GetLocalPlayer()==GetOwningPlayer(P8I)thencall ClearSelection()call SelectUnit(P8I,true)endifcall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_MAX_LIFE))call SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MAX_MANA))endifset J35=GetUnitAbilityLevel(P7I,1093751370)if J35>0 thencall UnitRemoveAbility(P7I,1093751370)call UnitAddAbility(P7I,1093751370)call SetUnitAbilityLevel(P7I,1093751370,J35)endifset J35=GetUnitAbilityLevel(P7I,1093753176)if J35>0 thencall UnitRemoveAbility(P7I,1093753176)call UnitAddAbility(P7I,1093753176)call SetUnitAbilityLevel(P7I,1093753176,J35)endifset J35=GetUnitAbilityLevel(P7I,1093753177)if J35>0 thencall UnitRemoveAbility(P7I,1093753177)call UnitAddAbility(P7I,1093753177)call SetUnitAbilityLevel(P7I,1093753177,J35)endifset I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093753428)call SetUnitAbilityLevel(I01,1093753428,SUI)call IssueImmediateOrder(I01,"stomp")set I01=nullendifendifset t=nullset P7I=nullset P8I=nullset J25=nullset ZK3=nullset J15=nullreturn falseendfunctionfunction JB5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit J25local unit J15local unit ZK3=CreateUnit(GetOwningPlayer(P7I),1747993420,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093818706)local unit I01local unit J55=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)if P8I==P7I thenset P8I=nullendifset J25=CreateUnit(GetOwningPlayer(P7I),1747993176,x,y,0)if SUI==1 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993430,x,y,0)elseif SUI==2 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993432,x,y,0)elseif SUI==3 thenset J15=CreateUnit(GetOwningPlayer(P7I),1747993431,x,y,0)endifcall AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",J25,"origin")if GetLocalPlayer()==GetOwningPlayer(P7I)thencall ClearSelection()call SelectUnit(J15,true)endifcall UPI(x,y,400)call ShowUnit(P7I,false)call SaveInteger(LY,(GetHandleId((P7I))),((4326)),(1))call IA1(P7I,1093678162)call DU1(P7I,0,0)call SetUnitInvulnerable(P7I,true)call UnitRemoveBuffs(P7I,true,true)if P8I!=null thencall ShowUnit(P8I,false)call SaveInteger(LY,(GetHandleId((P8I))),((4326)),(1))call IA1(P8I,1093678162)call DU1(P8I,0,0)call SetUnitInvulnerable(P8I,true)call UnitRemoveBuffs(P8I,true,true)endifcall StartSound(BF)call UnitRemoveAbility(J15,1098015094)call UnitApplyTimedLife(J25,1112820806,6.1)call UnitApplyTimedLife(ZK3,1112820806,6.1)call UnitApplyTimedLife(J15,1112820806,6.1)call TriggerRegisterTimerEvent(t,5.2,false)call TriggerRegisterTimerEvent(t,6,false)call TriggerAddCondition(t,Condition(function JA5))call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(588),(J25))call SaveUnitHandle(LY,(S5I),(589),(J15))call SaveUnitHandle(LY,(S5I),(239),(ZK3))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function J85))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,.02,true)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,J15,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function J95))call SaveUnitHandle(LY,(S5I),(589),(J15))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveUnitHandle(LY,(S5I),(19),(J55))if EA1(P7I,1227899192)thencall UnitAddAbility(J55,1093678153)endifset t=nullset P7I=nullset P8I=nullset J25=nullset J15=nullendfunctionfunction JC5 takes nothing returns booleanif GetSpellAbilityId()==1093818706 thencall JB5()endifreturn falseendfunctionfunction RV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JC5))call Q1I(1093687350)call Q1I(1093753428)set t=nullendfunctionfunction JD5 takes nothing returns nothingcall SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+WPI)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BirdShitTarget_1.mdx",GetEnumUnit(),"origin"))endfunctionfunction JE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group glocal integer SUI=GetUnitAbilityLevel(P7I,1093809986)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))call FlushChildHashtable(LY,(S5I))call S0I(t)set g=NTI()set WPI=50+75*SUIset GK=P7Icall GroupEnumUnitsInRange(g,x,y,425,Condition(function CT1))call ForGroup(g,function JD5)call NSI(g)set t=nullset P7I=nullset g=nullreturn falseendfunctionfunction JF5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()call TriggerRegisterTimerEvent(t,3,false)call TriggerAddCondition(t,Condition(function JE5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))if IsPlayerAlly(GetOwningPlayer(P7I),GetLocalPlayer())or P0I(GetLocalPlayer())thencall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\BirdShit_1.mdx",x,y)))elsecall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("",x,y)))endifif IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))or P0I(GetLocalPlayer())thencall PingMinimapEx(x,y,3,255,0,0,false)call IO1(KF,x,y)endifcall I41(GetOwningPlayer(P7I),4,x,y,500)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)*0.9)set t=nullset P7I=nullendfunctionfunction JG5 takes nothing returns booleanif GetSpellAbilityId()==1093809986 thencall JF5()endifreturn falseendfunctionfunction RE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JG5))set t=nullendfunctionfunction JH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall UnitRemoveAbility(P8I,1093809968)call UnitRemoveAbility(P8I,1110459723)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)>4 thencall UnitRemoveAbility(P8I,1093809968)call UnitRemoveAbility(P8I,1110459723)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(P7I,P8I,1,16+12*SUI)elsecall P6I(P7I,P8I,1,16+12*SUI)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction JZ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real a=(LoadReal(LY,(S5I),(137)))local real x=II3+12*Cos(a)local real y=I13+12*Sin(a)call SetUnitX(P8I,x)call SetUnitY(P8I,y)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))if GetTriggerEvalCount(t)>25 thencall UPI(x,y,100)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction JV5 takes unit P7I,unit P8I,real x,real y,real a returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093809969)call SetUnitPosition(P8I,GetUnitX(P8I),GetUnitY(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(137),((a*bj_DEGTORAD)*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function JZ5))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",P8I,"chest")))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function JH5))call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093809968,false)call IA1(P8I,1093809968)set t=nullendfunctionfunction JW5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),WQI)==false thenif QLI(X0I,GetEnumUnit())<24 or RAbsBJ(Cos(UDI(X0I,GetEnumUnit())-XOI))<0.26 thencall GroupAddUnit(WQI,GetEnumUnit())if Sin((UDI(X0I,GetEnumUnit())-XOI)*bj_DEGTORAD)<0 thencall JV5(WUI,GetEnumUnit(),XII,X1I,XOI-90)elsecall JV5(WUI,GetEnumUnit(),XII,X1I,XOI+90)endifendifendifendfunctionfunction JX5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real a=(LoadReal(LY,(S5I),(137)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group gif GetTriggerEvalCount(t)>125 thencall KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset x=x+8*Cos(a)set y=y+8*Sin(a)call SetUnitX(IG1,x)call SetUnitY(IG1,y)call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set GK=P7Iset XII=xset X1I=yset XOI=a*bj_RADTODEGset WQI=PR2set WUI=P7Iset X0I=IG1set g=NTI()call GroupEnumUnitsInRange(g,x,y,225,Condition(function CA1))call ForGroup(g,function JW5)call NSI(g)endifset t=nullset P7I=nullreturn falseendfunctionfunction JY5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local real RM2=Atan2(QKI-GetUnitY(P7I),QJI-GetUnitX(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093809969)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993665,GetUnitX(P7I),GetUnitY(P7I),RM2*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.01,true)call TriggerAddCondition(t,Condition(function JX5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(137),((RM2)*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(187),(NTI()))set t=nullset P7I=nullendfunctionfunction JJ5 takes nothing returns booleanif GetSpellAbilityId()==1093809969 thencall JY5()endifreturn falseendfunctionfunction RH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JJ5))set t=nullendfunctionfunction JK5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real GW1=(LoadReal(LY,(GetHandleId(P7I)),(681)))call FlushChildHashtable(LY,(S5I))call S0I(t)if((TimerGetElapsed(M))-GW1<0.49)==false or GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitRemoveAbility(P7I,1093753396)call UnitRemoveAbility(P7I,1093753409)call UnitRemoveAbility(P7I,1093753410)call UnitRemoveAbility(P7I,1093753401)call UnitRemoveAbility(P7I,1110459478)endifset t=nullset P7I=nullreturn falseendfunctionfunction JL5 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer JM5call TriggerRegisterTimerEvent(t,0.5,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function JK5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(GetHandleId(P7I)),(681),(((TimerGetElapsed(M)))*1.0))if X6I==1 thenset JM5=1093753396call UnitRemoveAbility(P7I,1093753409)call UnitRemoveAbility(P7I,1093753410)call UnitRemoveAbility(P7I,1093753401)elseif X6I==2 thenset JM5=1093753409call UnitRemoveAbility(P7I,1093753396)call UnitRemoveAbility(P7I,1093753410)call UnitRemoveAbility(P7I,1093753401)elseif X6I==3 thenset JM5=1093753410call UnitRemoveAbility(P7I,1093753396)call UnitRemoveAbility(P7I,1093753409)call UnitRemoveAbility(P7I,1093753401)elseif X6I==4 thenset JM5=1093753401call UnitRemoveAbility(P7I,1093753396)call UnitRemoveAbility(P7I,1093753409)call UnitRemoveAbility(P7I,1093753410)endifcall IA1(P7I,JM5)call UnitMakeAbilityPermanent(P7I,true,JM5)set t=nullendfunctionfunction JN5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real JS5=X9Ilocal real JT5=XAIlocal real PAI=JS5+JT5*GetUnitState(P8I,UNIT_STATE_MAX_LIFE)set PAI=PAI/5if IsUnitEnemy(P8I,GetOwningPlayer(X7I))==true thencall P6I(X7I,P8I,3,PAI)if RKI(P8I)==false thencall JL5(P8I)endifelsecall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+PAI*0.5)endifcall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireRayTarget.mdx",P8I,"origin"))call I41(GetOwningPlayer(P8I),2,GetUnitX(X7I),GetUnitY(X7I),500)set P8I=nullendfunctionfunction JR5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real JP5=GetUnitFacing(P7I)local real a=JP5*bj_DEGTORADlocal location l1=GetUnitLoc(P7I)local real JQ5=GetLocationZ(l1)local location l2=Location(GetUnitX(P7I)+X2I*Cos(a),GetUnitY(P7I)+X2I*Sin(a))local real JU5=GetLocationZ(l2)local lightning K05=(LoadLightningHandle(LY,(S5I),(676)))local lightning KI5=(LoadLightningHandle(LY,(S5I),(677)))local lightning K15=(LoadLightningHandle(LY,(S5I),(678)))local lightning KO5=(LoadLightningHandle(LY,(S5I),(679)))local lightning K25=(LoadLightningHandle(LY,(S5I),(680)))local real K35=1local real QXIlocal real QYIlocal real K45local real K55local real K65local real K75local real K85local real K95local real KA5local real KB5local real KC5local real KD5local real KE5local real KF5local real KG5local real KH5local real KZ5local real KV5local real KW5local real KX5local real KY5local real KJ5local real KK5local real KL5local real KM5local real KN5local real KS5local real KT5local real KR5local real KP5local real KQ5local real KU5local real L05local group glocal real xlocal real ylocal integer ilocal real LI5local real L15local real LO5local boolean L25=FALSElocal boolean L35=falselocal unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit NewTarget=nulllocal unit DriftTarget=nulllocal real L45local real L55local real L65local real L75=(LoadReal(LY,(S5I),(688)))local boolean L85=(LoadBoolean(LY,(S5I),(689)))local boolean L95=(LoadBoolean(LY,(S5I),(672)))local real LA5local ubersplat AR1local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real JS5local real JT5local real LB5local real LC5=5if GetUnitCurrentOrder(P7I)==852001 thencall DisableTrigger(t)call PJI(P7I)call EnableTrigger(t)endifcall RemoveLocation(l1)call RemoveLocation(l2)if IsUnitPaused(P7I)==false and(GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)thenset QXI=GetUnitX(P7I)set QYI=GetUnitY(P7I)if GetIssuedOrderId()!=852490 and GetIssuedOrderId()!=852185 and GetIssuedOrderId()!=852600 thencall DisableTrigger(t)call PJI(P7I)call EnableTrigger(t)endifif GetIssuedOrderId()==851971 thenif GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER thenset x=GetUnitX(GetOrderTargetUnit())set y=GetUnitY(GetOrderTargetUnit())elseset x=GetOrderPointX()set y=GetOrderPointY()endifset LI5=UEI(x,y,QXI,QYI)if LI5<0 thenset LI5=LI5+360endifset LO5=JP5-LI5if LO5<0 thenset LO5=LO5+360endifif LO5<180 thenset L25=trueset L15=JP5+6elseset L35=trueset L15=JP5-6endifset L75=UEI(x,y,QXI,QYI)+180call SaveReal(LY,(S5I),(688),((L75)*1.0))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==-1 or NPI>=6.0/.02 or BG1(P7I)or TLI(P7I)thenif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093753395 or GetSpellAbilityId()==1093751371 or GetSpellAbilityId()==1093809992))thencall SaveInteger(LY,(GetHandleId((P7I))),((4312)),(2))call BP1(P7I)call SetUnitPathing(P7I,true)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093808181)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753395,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808181,false)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093753177 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753177,true)endifcall DestroyLightning(K05)call DestroyLightning(KI5)call DestroyLightning(K15)call DestroyLightning(KO5)call DestroyLightning(K25)call StopSound(JF,false,true)endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==String2OrderIdBJ("immolation")thenset L85=trueendifif GetIssuedOrderId()==String2OrderIdBJ("unimmolation")thenset L85=falseendifcall SaveBoolean(LY,(S5I),(689),(L85))elseset LI5=JP5-L75if LI5<-180 thenset LI5=LI5+360elseif LI5>180 thenset LI5=LI5-360endifset LA5=1if NPI<35 and L95==true thenset LA5=7endifif LI5<(-1*LA5)thenset JP5=JP5+LA5elseif LI5>LA5 thenset JP5=JP5-LA5elseset L95=falsecall SaveBoolean(LY,(S5I),(672),(L95))set JP5=L75endifif((LoadInteger(LY,(GetHandleId((P7I))),((4301))))==1)==false thencall SetUnitFacing(P7I,JP5)endifset a=JP5*bj_DEGTORADset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set K45=X2Iset QXI=GetUnitX(P7I)+50*Cos(a)set QYI=GetUnitY(P7I)+50*Sin(a)if L85 and BE1(P7I)==false and BG1(P7I)==false thenif((LoadInteger(LY,(GetHandleId((P7I))),((4331))))==1)==true thenset LC5=LC5*2endifset L65=aset L45=PTI(GetUnitX(P7I)+LC5*Cos(L65))set L55=PUI(GetUnitY(P7I)+LC5*Sin(L65))call UPI(L45,L55,200)call SetUnitX(P7I,L45)call SetUnitY(P7I,L55)endifcall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)-GetUnitState(P7I,UNIT_STATE_LIFE)*0.06*0.02)call UPI(QXI,QYI,200)if ModuloInteger(NPI,10)==0 thenset X8I=NTI()set GK=P7Iset i=0loopexitwhen i*50>X2Iset x=QXI+i*50*Cos(a)set y=QYI+i*50*Sin(a)set g=NTI()call GroupEnumUnitsInRange(g,x,y,130+25,Condition(function CA1))call GroupAddGroup(g,X8I)call GroupEnumUnitsInRange(g,x,y,130+25,Condition(function CT1))call GroupAddGroup(g,X8I)call NSI(g)if ModuloInteger(i,3)==0 thencall I41(GetOwningPlayer(P7I),2,x,y,225)endifset i=i+1endloopset X7I=P7Iset X6I=GetUnitAbilityLevel(P7I,1093753177)set LB5=(I2R(NPI)/50.0)/6set X9I=(5*X6I+10)+(5*X6I+10)*LB5set XAI=(X6I+LB5*(X6I))/100call GroupRemoveUnit(X8I,P7I)call ForGroup(X8I,function JN5)call NSI(X8I)set g=nullset X8I=nullendifif IC1(P7I)==false thenif P8I!=null thenset K45=QLI(P7I,P8I)endifset K55=QXIset K65=QYIset K75=JQ5+200set K85=K55+K45*Cos(a)set K95=K65+K45*Sin(a)set KA5=JU5set KB5=QXI+X3I*Cos((JP5-90)*bj_DEGTORAD)set KC5=QYI+X4I*Cos((JP5-90)*bj_DEGTORAD)set KD5=JQ5+200set KE5=KB5+K45*Cos(a)set KF5=KC5+K45*Sin(a)set KG5=JU5set KH5=QXI+X3I*Cos((JP5+90)*bj_DEGTORAD)set KZ5=QYI+X4I*Cos((JP5+90)*bj_DEGTORAD)set KV5=JQ5+200set KW5=KH5+K45*Cos(a)set KX5=KZ5+K45*Sin(a)set KY5=JU5set KJ5=QXIset KK5=QYIset KL5=JQ5+200+X5Iset KM5=KJ5+K45*Cos(a)set KN5=KK5+K45*Sin(a)set KS5=JU5set KT5=QXIset KR5=QYIset KP5=JQ5+200-X5Iset KQ5=KT5+K45*Cos(a)set KU5=KR5+K45*Sin(a)set L05=JU5if ModuloInteger(NPI,10)==0 and K45==X2I thenset x=GetUnitX(P7I)+(X2I)*Cos(a)set y=GetUnitY(P7I)+(X2I)*Sin(a)call DestroyEffect(AddSpecialEffect("war3mapImported\\FireRayTarget.mdx",x,y))endifif ModuloInteger(NPI,10)==0 thencall SetSoundPosition(JF,GetUnitX(P7I),GetUnitY(P7I),100)set x=GetUnitX(P7I)+(K45)*Cos(a)set y=GetUnitY(P7I)+(K45)*Sin(a)set AR1=CreateUbersplat(x,y,"SRAY",255,255,255,255,false,false)call SetUbersplatRenderAlways(AR1,true)call AP1(AR1,10)set AR1=nullendifcall MoveLightningEx(K05,false,K55,K65,K75,K85,K95,KA5)call MoveLightningEx(KI5,false,KB5,KC5,KD5,KE5,KF5,KG5)call MoveLightningEx(K15,false,KH5,KZ5,KV5,KW5,KX5,KY5)call MoveLightningEx(KO5,false,KJ5,KK5,KL5,KM5,KN5,KS5)call MoveLightningEx(K25,false,KT5,KR5,KP5,KQ5,KU5,L05)if P0I(GetLocalPlayer())thenset K35=1endifcall SetLightningColor(K05,1.00,1.00,1.00,K35)call SetLightningColor(KI5,1.00,1.00,1.00,K35)call SetLightningColor(K15,1.00,1.00,1.00,K35)call SetLightningColor(KO5,1.00,1.00,1.00,K35)call SetLightningColor(K25,1.00,1.00,1.00,K35)endifendifset t=nullset P7I=nullset K05=nullset KI5=nullset K15=nullset KO5=nullset K25=nullset l1=nullset l2=nullreturn falseendfunctionfunction LD5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORADlocal real QJI=PTI(GetUnitX(P7I)+X2I*Cos(a))local real QKI=PUI(GetUnitY(P7I)+X2I*Sin(a))local lightning K05=AddLightning("SRAY",false,GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)local lightning KI5=AddLightning("SRAY",false,GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)local lightning K15=AddLightning("SRAY",false,GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)local lightning KO5=AddLightning("SRAY",false,GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)local lightning K25=AddLightning("SRAY",false,GetUnitX(P7I),GetUnitY(P7I),QJI,QKI)call SetUnitFacing(P7I,a*bj_RADTODEG)call StartSound(JF)call SetSoundPosition(JF,GetUnitX(P7I),GetUnitY(P7I),100)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function JR5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(13),((a)*1.0))call SaveReal(LY,(S5I),(688),((a*bj_RADTODEG)*1.0))call SaveLightningHandle(LY,(S5I),(676),(K05))call SaveLightningHandle(LY,(S5I),(677),(KI5))call SaveLightningHandle(LY,(S5I),(678),(K15))call SaveLightningHandle(LY,(S5I),(679),(KO5))call SaveLightningHandle(LY,(S5I),(680),(K25))call SaveBoolean(LY,(S5I),(689),(false))call SaveBoolean(LY,(S5I),(672),(true))call SaveReal(LY,(S5I),(688),((a*bj_RADTODEG)*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P7I))*1.0))call BT1(P7I)call SaveInteger(LY,(GetHandleId((P7I))),((4312)),(1))call SetUnitPathing(P7I,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753395,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093808181,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753177,false)call IA1(P7I,1093753395)call UnitMakeAbilityPermanent(P7I,true,1093753395)call IA1(P7I,1093808181)call UnitMakeAbilityPermanent(P7I,true,1093808181)call TriggerEvaluate(t)set t=nullset P7I=nullset P7I=nullset K05=nullset KI5=nullset K15=nullset KO5=nullset K25=nullendfunctionfunction LE5 takes nothing returns booleanif GetSpellAbilityId()==1093753177 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thenelsecall LD5()endifendifreturn falseendfunctionfunction RG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function LE5))call B01(1093753396)call B01(1093753409)call B01(1093753410)call B01(1093753401)set t=nullendfunctionfunction LF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093753176)if GetTriggerEventId()==EVENT_UNIT_DEATH or(TimerGetElapsed(M))>=(LoadReal(LY,(GetHandleId(P8I)),(757)))or RKI(P8I)==true thencall UnitRemoveAbility(P8I,1093818167)call UnitRemoveAbility(P8I,1093818169)call UnitRemoveAbility(P8I,1093815352)call UnitRemoveAbility(P8I,1093818168)call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifif ModuloInteger(GetTriggerEvalCount(t),4)==0 thencall P6I(P7I,P8I,1,20*SUI-10)endifset t=nullset P7I=nullreturn falseendfunctionfunction LG5 takes nothing returns nothinglocal unit P7I=XBIlocal unit P8I=GetEnumUnit()local trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093753176)local integer LH5call SaveReal(LY,(GetHandleId(P8I)),(757),(((TimerGetElapsed(M))+4)*1.0))if GetUnitAbilityLevel(P8I,1093818167)==0 and GetUnitAbilityLevel(P8I,1093818169)==0 and GetUnitAbilityLevel(P8I,1093815352)==0 and GetUnitAbilityLevel(P8I,1093818168)==0 thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function LF5))call TriggerRegisterDeathEvent(t,P8I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",P8I,"chest")))if BJ1(P8I)==false thenif SUI==1 thenset LH5=1093818167elseif SUI==2 thenset LH5=1093818169elseif SUI==3 thenset LH5=1093815352elseif SUI==4 thenset LH5=1093818168endifcall UnitAddAbility(P8I,LH5)call UnitMakeAbilityPermanent(P8I,true,LH5)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),LH5,false)endifset P7I=nullset P8I=nullset t=nullendfunctionfunction LZ5 takes unit P7I,unit IG1,real IS5,unit I01,unit P8I returns nothinglocal real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local group g=NTI()set GK=P7Iset XBI=P7Icall GroupEnumUnitsInRange(g,x,y,175+25,Condition(function CE1))call ForGroup(g,function LG5)call NSI(g)call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))call KillUnit(IG1)call ShowUnit(IG1,false)set g=nullendfunctionfunction LV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit LW5=(LoadUnitHandle(LY,(S5I),(393)))local real IS5=(LoadReal(LY,(S5I),(685)))local real QJIlocal real QKIlocal real xlocal real ylocal real alocal real r=18local integer SUI=GetUnitAbilityLevel(P7I,1093753176)if GetTriggerEventId()==EVENT_UNIT_DEATH thenset QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call RemoveSavedHandle(LY,(S5I),(17))call SaveUnitHandle(LY,(S5I),(17),(null))elseif P8I==null thenset QJI=(LoadReal(LY,(S5I),(47)))set QKI=(LoadReal(LY,(S5I),(48)))elseset QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)endifset a=UEI(GetUnitX(LW5),GetUnitY(LW5),QJI,QKI)call SetUnitFacing(LW5,a)set x=GetUnitX(LW5)+r*Cos(a*bj_DEGTORAD)set y=GetUnitY(LW5)+r*Sin(a*bj_DEGTORAD)call SetUnitX(LW5,x)call SetUnitY(LW5,y)if QNI(x,y,QJI,QKI)<r*2 thencall LZ5(P7I,LW5,IS5,I01,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullset LW5=nullset I01=nullreturn falseendfunctionfunction LX5 takes unit P7I,unit LW5,unit P8I,real IS5,unit I01 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group glocal unit NewTargetif P7I==P8I thencall KillUnit(LW5)call ShowUnit(LW5,false)elsecall SetUnitVertexColor(LW5,255,255,255,255)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function LV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(393),(LW5))call SaveReal(LY,(S5I),(47),((GetSpellTargetX())*1.0))call SaveReal(LY,(S5I),(48),((GetSpellTargetY())*1.0))call SaveReal(LY,(S5I),(685),((IS5)*1.0))call SaveUnitHandle(LY,(S5I),(19),(I01))endifset t=nullendfunctionfunction LY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=(LoadInteger(LY,(S5I),(34)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local unit LJ5=(LoadUnitHandle(LY,(S5I),(393)))local unit LK5=(LoadUnitHandle(LY,(S5I),(394)))local unit LL5=(LoadUnitHandle(LY,(S5I),(395)))local unit LM5=(LoadUnitHandle(LY,(S5I),(396)))local integer SUI=GetUnitAbilityLevel(P7I,1093753176)local real a=GetUnitFacing(P7I)local real xlocal real ylocal group glocal group g2local real JC3=-1*360*0.02/4local real a2local real DJ1local real IS5=(LoadReal(LY,(S5I),(685)))local real S83local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer LN5=800if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093753394 thenif IC1(LJ5)==false thencall LX5(P7I,LJ5,GetSpellTargetUnit(),IS5,I01)call RemoveSavedHandle(LY,(S5I),(393))elseif IC1(LK5)==false thencall LX5(P7I,LK5,GetSpellTargetUnit(),IS5,I01)call RemoveSavedHandle(LY,(S5I),(394))elseif IC1(LL5)==false thencall LX5(P7I,LL5,GetSpellTargetUnit(),IS5,I01)call RemoveSavedHandle(LY,(S5I),(395))elseif IC1(LM5)==false thencall LX5(P7I,LM5,GetSpellTargetUnit(),IS5,I01)call RemoveSavedHandle(LY,(S5I),(396))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753394,false)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093753176 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753176,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelseif GetSpellAbilityId()==1093751371 thenif LJ5!=null and IC1(LJ5)==false thencall LX5(P7I,LJ5,P7I,IS5,I01)endifif LK5!=null and IC1(LK5)==false thencall LX5(P7I,LK5,P7I,IS5,I01)endifif LL5!=null and IC1(LL5)==false thencall LX5(P7I,LL5,P7I,IS5,I01)endifif LM5!=null and IC1(LM5)==false thencall LX5(P7I,LM5,P7I,IS5,I01)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753394,false)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093753176 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753176,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if LJ5!=null and IC1(LJ5)==false thenset DJ1=360*4/4.0set a2=DJ1+JC3*NPIset x=PTI(QXI+200*Cos(a2*bj_DEGTORAD))set y=PUI(QYI+200*Sin(a2*bj_DEGTORAD))call SetUnitFacing(LJ5,a2-90)call SetUnitX(LJ5,x)call SetUnitY(LJ5,y)endifif LK5!=null and IC1(LK5)==false thenset DJ1=360*3/4.0set a2=DJ1+JC3*NPIset x=PTI(QXI+200*Cos(a2*bj_DEGTORAD))set y=PUI(QYI+200*Sin(a2*bj_DEGTORAD))call SetUnitFacing(LK5,a2-90)call SetUnitX(LK5,x)call SetUnitY(LK5,y)endifif LL5!=null and IC1(LL5)==false thenset DJ1=360*2/4.0set a2=DJ1+JC3*NPIset x=PTI(QXI+200*Cos(a2*bj_DEGTORAD))set y=PUI(QYI+200*Sin(a2*bj_DEGTORAD))call SetUnitFacing(LL5,a2-90)call SetUnitX(LL5,x)call SetUnitY(LL5,y)endifif LM5!=null and IC1(LM5)==false thenset DJ1=360*1/4.0set a2=DJ1+JC3*NPIset x=PTI(QXI+200*Cos(a2*bj_DEGTORAD))set y=PUI(QYI+200*Sin(a2*bj_DEGTORAD))call SetUnitFacing(LM5,a2-90)call SetUnitX(LM5,x)call SetUnitY(LM5,y)endifif NPI>LN5 or GetTriggerEventId()==EVENT_UNIT_DEATH thenif LJ5!=null and IC1(LJ5)==false thencall LX5(P7I,LJ5,P7I,IS5,I01)endifif LK5!=null and IC1(LK5)==false thencall LX5(P7I,LK5,P7I,IS5,I01)endifif LL5!=null and IC1(LL5)==false thencall LX5(P7I,LL5,P7I,IS5,I01)endifif LM5!=null and IC1(LM5)==false thencall LX5(P7I,LM5,P7I,IS5,I01)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753394,false)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093753176 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753176,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elseset IS5=RMinBJ(0.25+0.75*(I2R(NPI)/500.0),1)call SaveReal(LY,(S5I),(685),((IS5)*1.0))set S83=0.25+(1-0.2)*2.5call SetUnitScale(LJ5,S83,S83,S83)call SetUnitScale(LK5,S83,S83,S83)call SetUnitScale(LL5,S83,S83,S83)call SetUnitScale(LM5,S83,S83,S83)if NPI==(LN5-175)thencall OQ1(KF,GetOwningPlayer(P7I))endifif NPI>(LN5-200)thenif ModuloInteger(NPI,10)==0 or ModuloInteger(NPI,10)==1 or ModuloInteger(NPI,10)==2 or ModuloInteger(NPI,10)==3 or ModuloInteger(NPI,10)==4 thencall SetUnitVertexColor(LJ5,255,0,0,255)call SetUnitVertexColor(LK5,255,0,0,255)call SetUnitVertexColor(LL5,255,0,0,255)call SetUnitVertexColor(LM5,255,0,0,255)elsecall SetUnitVertexColor(LJ5,255,255,255,255)call SetUnitVertexColor(LK5,255,255,255,255)call SetUnitVertexColor(LL5,255,255,255,255)call SetUnitVertexColor(LM5,255,255,255,255)endifendifendifendifset t=nullset P7I=nullset LJ5=nullset LK5=nullset LL5=nullset LM5=nullset I01=nullreturn falseendfunctionfunction LS5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real xlocal real ylocal unit LJ5local unit LK5local unit LL5local unit LM5local real a=GetUnitFacing(P7I)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,QXI,QYI,0)call UnitAddAbility(I01,1093808469)call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)-GetUnitState(P7I,UNIT_STATE_LIFE)*0.20)call IA1(P7I,1093753394)call UnitMakeAbilityPermanent(P7I,true,1093753394)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753394,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753176,false)set x=GetUnitX(P7I)+200*Cos(bj_DEGTORAD*360*4/4.0*-1.0)set y=GetUnitY(P7I)+200*Sin(bj_DEGTORAD*360*4/4.0*-1.0)set LJ5=CreateUnit(GetOwningPlayer(P7I),1747993429,x,y,360*4/4.0*-1.0)set x=GetUnitX(P7I)+200*Cos(bj_DEGTORAD*360*3/4.0*-1.0)set y=GetUnitY(P7I)+200*Sin(bj_DEGTORAD*360*3/4.0*-1.0)set LK5=CreateUnit(GetOwningPlayer(P7I),1747993429,x,y,360*3/4.0*-1.0)set x=GetUnitX(P7I)+200*Cos(bj_DEGTORAD*360*2/4.0*-1.0)set y=GetUnitY(P7I)+200*Sin(bj_DEGTORAD*360*2/4.0*-1.0)set LL5=CreateUnit(GetOwningPlayer(P7I),1747993429,x,y,360*2/4.0*-1.0)set x=GetUnitX(P7I)+200*Cos(bj_DEGTORAD*360*1/4.0*-1.0)set y=GetUnitY(P7I)+200*Sin(bj_DEGTORAD*360*1/4.0*-1.0)set LM5=CreateUnit(GetOwningPlayer(P7I),1747993429,x,y,360*1/4.0*-1.0)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function LY5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(393),(LJ5))call SaveUnitHandle(LY,(S5I),(394),(LK5))call SaveUnitHandle(LY,(S5I),(395),(LL5))call SaveUnitHandle(LY,(S5I),(396),(LM5))call SaveUnitHandle(LY,(S5I),(19),(I01))set P7I=nullset LJ5=nullset LK5=nullset LL5=nullset LM5=nullset I01=nullendfunctionfunction LT5 takes nothing returns booleanif GetSpellAbilityId()==1093753176 thencall LS5()endifreturn falseendfunctionfunction RF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function LT5))set t=nullendfunctionfunction LR5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815345)if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>4 thencall UnitRemoveAbility(P8I,1093815352)call SaveInteger(LY,(GetHandleId((P8I))),((4311)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifcall P6I(P7I,P8I,1,20*SUI)set t=nullset P7I=nullreturn falseendfunctionfunction LP5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function LR5))call TriggerRegisterDeathEvent(t,P8I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",P8I,"chest")))call UnitAddAbility(P8I,1093815352)call UnitMakeAbilityPermanent(P8I,true,1093815352)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815352,false)call SaveInteger(LY,(GetHandleId((P8I))),((4311)),(1))set P7I=nullset P8I=nullset t=nullendfunctionfunction LQ5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local group g=NTI()call DestroyEffect(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y))call GroupEnumUnitsInRange(g,x,y,275+25,Condition(function C51))call ForGroup(g,function LP5)call NSI(g)set g=nullset P7I=nullendfunctionfunction LU5 takes nothing returns booleanif GetSpellAbilityId()==1093815345 thencall LQ5()endifreturn falseendfunctionfunction RD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function LU5))set t=nullendfunctionfunction M05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(GetHandleId(P8I)),(627)))local real MI5=(LoadReal(LY,(GetHandleId(P8I)),(628)))local integer SUI=GetUnitAbilityLevel(P7I,1093751604)local real PAI=(5+SUI*15)*Pow(2,IMinBJ(NPI,5)-1)set PAI=PAI+IMaxBJ(NPI-5,0)*50if GetTriggerEventId()==EVENT_UNIT_DEATH thenif IsUnitType(P8I,UNIT_TYPE_HERO)==true thenendifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId(P8I)),(627),(0))call SaveReal(LY,(GetHandleId(P8I)),(628),((0)*1.0))elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093751609 thenif IsUnitType(P8I,UNIT_TYPE_HERO)==true thenendifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId(P8I)),(627),(0))call SaveReal(LY,(GetHandleId(P8I)),(628),((0)*1.0))if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,false)endifcall P6I(P7I,P8I,1,PAI)if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,true)endifcall UYI(I2S(R2I(PAI))+"!",2,P8I,0.025,100,0,200,216)endifelseif(TimerGetElapsed(M))>MI5 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenendifcall FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId(P8I)),(627),(0))call SaveReal(LY,(GetHandleId(P8I)),(628),((0)*1.0))if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,false)endifcall P6I(P7I,P8I,1,PAI)if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,true)endifcall UYI(I2S(R2I(PAI))+"!",2,P8I,0.025,100,0,200,216)elseif IsUnitType(P8I,UNIT_TYPE_HERO)==true thenendifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction M15 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093751604)local unit IG1if(LoadInteger(LY,(GetHandleId(P8I)),(627)))>0 thencall SaveInteger(LY,(GetHandleId(P8I)),(627),((LoadInteger(LY,(GetHandleId(P8I)),(627)))+1))call SaveReal(LY,(GetHandleId(P8I)),(628),(((TimerGetElapsed(M))+10)*1.0))elseset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenendifcall SaveInteger(LY,(GetHandleId(P8I)),(627),(1))if IsUnitType(P8I,UNIT_TYPE_HERO)==true thencall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",P8I,"chest")))elsecall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",P8I,"origin")))endifcall SaveReal(LY,(GetHandleId(P8I)),(628),(((TimerGetElapsed(M))+10)*1.0))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function M05))set IG1=nullendifcall UYI("+"+I2S((LoadInteger(LY,(GetHandleId(P8I)),(627)))),3,P8I,0.025,100,0,200,216)call P6I(P7I,P8I,1,50)set t=nullendfunctionfunction MO5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XDI)==false thencall GroupAddUnit(XDI,GetEnumUnit())call M15(XCI,GetEnumUnit())endifendfunctionfunction M25 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local integer NPI=GetTriggerEvalCount(t)local real a=(LoadReal(LY,(S5I),(137)))local real x=PTI(GetUnitX(IG1)+(20)*Cos(a))local real y=PUI(GetUnitY(IG1)+(20)*Sin(a))local group glocal group JAO=(LoadGroupHandle(LY,(S5I),(133)))local unit P8Iif NPI==75 thencall NSI(JAO)call KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset GK=P7Iset XCI=P7Iset XDI=JAOcall SetUnitX(IG1,x)call SetUnitY(IG1,y)set g=NTI()call GroupEnumUnitsInRange(g,x,y,190+25,Condition(function CE1))call ForGroup(g,function MO5)set P8I=FirstOfGroup(g)call NSI(g)endifset t=nullset P7I=nullset IG1=nullset g=nullset P8I=nullset JAO=nullreturn falseendfunctionfunction M35 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),x,y)*bj_DEGTORADlocal unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993394,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function M25))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveGroupHandle(LY,(S5I),(133),(NTI()))call IA1(P7I,1093751609)set t=nullset P7I=nullset IG1=nullendfunctionfunction M45 takes nothing returns booleanif GetSpellAbilityId()==1093751604 thencall M35()endifreturn falseendfunctionfunction RW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function M45))set t=nullendfunctionfunction M55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit M65=GetSummonedUnit()if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SUMMON thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetUnitAbilityLevel(M65,1110459457)>0 and GetOwningPlayer(GetSummoningUnit())==GetOwningPlayer(P7I)thenif IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thencall SelectUnitAddForPlayer(M65,GetOwningPlayer(P7I))elsecall IssueTargetOrder(M65,"attack",P8I)endifendifset t=nullset P7I=nullset P8I=nullset M65=nullreturn falseendfunctionfunction M75 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call SaveInteger(LY,(GetHandleId((P8I))),((4293)),(2))call SetUnitInvulnerable(P8I,false)call PauseUnit(P8I,false)call ShowUnit(P8I,true)call RemoveSavedHandle(LY,(GetHandleId(P8I)),(673))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()!=EVENT_UNIT_DEATH thencall ClearSelectionForPlayer(GetOwningPlayer(P8I))call SelectUnitAddForPlayer(P8I,GetOwningPlayer(P8I))call IO1(DF,GetUnitX(P8I),GetUnitY(P8I))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3,false)call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function M55))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(I01,1093751605)call SetUnitAbilityLevel(I01,1093751605,GetUnitAbilityLevel(P7I,1093751608))call IssueTargetOrderById(I01,852274,P8I)call IssueTargetOrderById(I01,852274,P8I)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction M85 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093751608)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P8I),1865429305,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(I01,1112820806,2.6)if IsUnitAlly(P8I,GetOwningPlayer(P7I))==false thenset I01=CreateUnit(GetOwningPlayer(P7I),1865429305,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(I01,1112820806,2.6)endifcall SetUnitInvulnerable(P8I,true)call PauseUnit(P8I,true)call ShowUnit(P8I,false)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\WILLTHEALMIGHTY-Void5.mdx",GetUnitX(P8I),GetUnitY(P8I))))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,2.5,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function M75))call SaveUnitHandle(LY,(GetHandleId(P7I)),(673),(P8I))call SaveInteger(LY,(GetHandleId((P8I))),((4293)),(1))set P7I=nullset P8I=nullset t=nullset I01=nullendfunctionfunction M95 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093751608 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true or NNI(GetSpellTargetUnit())==false)thencall M85()endifelseif GetSpellAbilityId()==1093751608 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendifreturn falseendfunctionfunction RX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function M95))set t=nullendfunctionfunction MA5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093751618)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamage()>5 thencall DisableTrigger(t)call P6I(GetEventDamageSource(),GetTriggerUnit(),3,(0.1+0.1*SUI)*GetEventDamage())call EnableTrigger(t)endifset P7I=nullset t=nullreturn falseendfunctionfunction MB5 takes nothing returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local group g=NTI()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093751618)local unit P8Ilocal trigger tlocal integer S5Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,475,Condition(function CE1))set P8I=(LoadUnitHandle(LY,(GetHandleId(P7I)),(673)))if P8I!=null thenif QNI(GetUnitX(P8I),GetUnitY(P8I),x,y)<475 and IsUnitEnemy(P8I,GetOwningPlayer(P7I))==true thencall GroupAddUnit(g,P8I)endifendifset P8I=GroupPickRandomUnit(g)call NSI(g)call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x,y))if P8I!=null thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,12,false)call TriggerAddCondition(t,Condition(function MA5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\void.mdx",P8I,"chest")))endifset g=nullset P7I=nullset P8I=nullset t=nullendfunctionfunction MC5 takes nothing returns booleanif GetSpellAbilityId()==1093751618 thencall MB5()endifreturn falseendfunctionfunction RY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MC5))set t=nullendfunctionfunction MD5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=GetTriggerEvalCount(t)local integer SUI=GetUnitAbilityLevel(P7I,1093818441)if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093751617)endifif NPI==5 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,false)endifcall P6I(P7I,P8I,1,4*(25+25*SUI))if((LoadInteger(LY,(GetHandleId((P8I))),((4293))))==1)thencall SetUnitInvulnerable(P8I,true)endifelseendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction ME5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function MD5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerEvaluate(t)set t=nullset P7I=nullset P8I=nullendfunctionfunction MF5 takes nothing returns booleanif(GetSpellAbilityId()==1093818441 or GetSpellAbilityId()==1093751617)and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and NNI(GetSpellTargetUnit())==false thencall ME5()endifreturn falseendfunctionfunction MG5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(826)))local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093818437)if JGO>0 thencall UnitAddAbility(I01,1093751617)call SetUnitAbilityLevel(I01,1093751617,SUI)call IssueTargetOrder(I01,"purge",P8I)call UnitRemoveAbility(P7I,XEI[JGO])set JGO=JGO-1call SaveInteger(LY,(GetHandleId(P7I)),(826),(JGO))call IA1(P7I,XEI[JGO])endifset P7I=nullset P8I=nullendfunctionfunction MH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(826)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if JGO<3 thenset NPI=NPI-1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==0 thencall UnitRemoveAbility(P7I,XEI[JGO])set NPI=40call SaveInteger(LY,(S5I),(34),(NPI))set JGO=JGO+1call SaveInteger(LY,(GetHandleId(P7I)),(826),(JGO))call IA1(P7I,XEI[JGO])endifendifset t=nullset P7I=nullreturn falseendfunctionfunction MZ5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093818437)local trigger tlocal integer S5Ilocal integer MV5=GetUnitAbilityLevel(P7I,XEI[0])local integer MW5=GetUnitAbilityLevel(P7I,XEI[1])local integer MX5=GetUnitAbilityLevel(P7I,XEI[2])local integer MY5=GetUnitAbilityLevel(P7I,XEI[3])if SUI>0 and(MV5+MW5+MX5+MY5)==0 thencall UnitRemoveAbility(P7I,1093751617)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(P7I)),(826),(3))call IA1(P7I,XEI[3])call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function MH5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(40))set t=nullendifif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093818441)if SUI>0 thencall IA1(P7I,1093751617)call SetUnitAbilityLevel(P7I,1093751617,SUI)endifendifset P7I=nullendfunctionfunction MJ5 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL thenif(GetLearnedSkill()==1093818441 or GetLearnedSkill()==1093818437)and IsUnitIllusion(GetTriggerUnit())==false thencall MZ5()endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thenif GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and F01(GetManipulatedItem())==L30 thencall MZ5()endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif(GetSpellAbilityId()==XEI[0]or GetSpellAbilityId()==XEI[1]or GetSpellAbilityId()==XEI[2]or GetSpellAbilityId()==XEI[3])and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and NNI(GetSpellTargetUnit())==false thencall MG5()endifendifreturn falseendfunctionfunction RJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MF5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MJ5))set XEI[0]=1093818440set XEI[1]=1093818435set XEI[2]=1093818434set XEI[3]=1093818676set t=nullendfunctionfunction MK5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1093751632)set t=nullset P7I=nullreturn falseendfunctionfunction ML5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call IA1(P7I,1093751632)call UnitMakeAbilityPermanent(P7I,true,1093751632)call SetUnitAbilityLevel(P7I,1093751632,GetUnitAbilityLevel(P7I,1093751631))call TriggerRegisterTimerEvent(t,3,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function MK5))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction MM5 takes nothing returns booleanif GetSpellAbilityId()==1093751631 thencall ML5()endifreturn falseendfunctionfunction RK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MM5))set t=nullendfunctionfunction MN5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer NPI=GetTriggerEvalCount(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real xlocal real ylocal real dlocal real DH1local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real a=UEI(II3,I13,GetUnitX(P8I),GetUnitY(P8I))*bj_DEGTORADlocal integer SUI=GetUnitAbilityLevel(P7I,1093751633)if GetTriggerEventId()==EVENT_UNIT_DEATH thencall UnitShareVision(IG1,GetOwningPlayer(P8I),false)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()!=IG1 thencall KillUnit(IG1)endifelseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall UnitRemoveBuffs(IG1,true,true)elseif NPI<3/0.02 thencall SetUnitFacing(IG1,a*bj_RADTODEG)elseif NPI==4/0.02 thencall UnitShareVision(IG1,GetOwningPlayer(P8I),true)endifcall SetUnitFacing(IG1,a*bj_RADTODEG)set x=II3+(280+XFI*NPI*0.02)*0.02*Cos(a)set y=I13+(280+XFI*NPI*0.02)*0.02*Sin(a)call SetUnitPosition(IG1,x,y)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))if QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))<20 thenset d=RMinBJ(QNI(x,y,(LoadReal(LY,(S5I),(6))),(LoadReal(LY,(S5I),(7)))),1500)set DH1=d/1500*(125*GetUnitAbilityLevel(P7I,1093751633))set DH1=RMaxBJ(DH1,50)call KillUnit(IG1)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(P7I,P8I,1,DH1)call DD1(P7I,P8I,2+0.2*SUI)endifendifset t=nullset P7I=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction MS5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))*bj_DEGTORADlocal real x=PTI(GetUnitX(P7I)+150*Cos(a))local real y=PUI(GetUnitY(P7I)+150*Sin(a))local integer SUI=GetUnitAbilityLevel(P7I,1093751633)local unit IG1local integer RIIlocal string s="effects\\Snipe Target.mdx"if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))==false and P0I(GetLocalPlayer())==false thenset s=""endifif SUI==1 thenset RII=1747993415elseif SUI==2 thenset RII=1747993393elseif SUI==3 thenset RII=1747993414elseif SUI==4 thenset RII=1747993416endifset IG1=CreateUnit(GetOwningPlayer(P7I),RII,x,y,a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,IG1,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,IG1,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function MN5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(IG1))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(IG1))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(s,P8I,"overhead")))set t=nullset P7I=nullset IG1=nullendfunctionfunction MT5 takes nothing returns booleanif GetSpellAbilityId()==1093751633 and NNI(GetSpellTargetUnit())==false thencall MS5()endifreturn falseendfunctionfunction RL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function MT5))call Q1I(1093687350)set t=nullendfunctionfunction MR5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093751635)call UnitRemoveAbility(P8I,1110459461)set t=nullset P8I=nullreturn falseendfunctionfunction MP5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093751860)call UnitRemoveAbility(P8I,1110459463)set t=nullset P8I=nullreturn falseendfunctionfunction MQ5 takes nothing returns nothinglocal trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(XGI,1093751861)local boolean CK3=falseif SUI==0 thenset SUI=GetUnitAbilityLevel(XGI,1093808949)set CK3=trueendifif BJ1(GetEnumUnit())==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,2,false)call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function MR5))call SaveUnitHandle(LY,(S5I),(17),(GetEnumUnit()))call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751635,false)call IA1(GetEnumUnit(),1093751635)endifcall P6I(XGI,GetEnumUnit(),1,SUI*50+200)set t=nullendfunctionfunction MU5 takes nothing returns nothinglocal trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(XGI,1093751861)local boolean CK3=falseif SUI==0 thenset SUI=GetUnitAbilityLevel(XGI,1093808949)set CK3=trueendifif BJ1(GetEnumUnit())==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3,false)call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function MP5))call SaveUnitHandle(LY,(S5I),(17),(GetEnumUnit()))call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751860,false)call IA1(GetEnumUnit(),1093751860)endifif CK3 thencall P6I(XGI,GetEnumUnit(),1,SUI*50+50+75)elsecall P6I(XGI,GetEnumUnit(),1,SUI*50+50)endifset t=nullendfunctionfunction N05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group glocal integer NPI=GetTriggerEvalCount(t)local fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))if NPI==1 thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",P7I,"chest"))elseif NPI==2 thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",P7I,"chest"))elseif NPI==3 thencall DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))elseif NPI==4 thenset g=NTI()set GK=P7Iset XGI=P7Icall GroupEnumUnitsInRange(g,x,y,600+25,Condition(function CA1))call ForGroup(g,function MQ5)call NSI(g)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))elseif NPI==5 thencall DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))elseif NPI==6 thenset g=NTI()set GK=P7Iset XGI=P7Icall GroupEnumUnitsInRange(g,x,y,600+25,Condition(function CA1))call ForGroup(g,function MU5)call NSI(g)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset g=nullreturn falseendfunctionfunction NI5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local string s=""local fogmodifier I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,x,y,350,true,true)call FogModifierStart(I31)if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(P7I))==true or P0I(GetLocalPlayer())thenset s="war3mapImported\\CallDown_4.mdx"endifcall TriggerRegisterTimerEvent(t,0.1,false)call TriggerRegisterTimerEvent(t,0.8,false)call TriggerRegisterTimerEvent(t,1.6,false)call TriggerRegisterTimerEvent(t,2,false)call TriggerRegisterTimerEvent(t,3.6,false)call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function N05))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect(s,x,y)))call SaveFogModifierHandle(LY,(S5I),(42),(I31))set t=nullset P7I=nullendfunctionfunction N15 takes nothing returns booleanif GetSpellAbilityId()==1093751861 or GetSpellAbilityId()==1093808949 thencall NI5()endifreturn falseendfunctionfunction RM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function N15))set t=nullendfunctionfunction NO5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer UT3=(LoadInteger(LY,(S5I),(375)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPIif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and(GetEventDamage()>20 or IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true)thenset NPI=(LoadInteger(LY,(UT3),(34)))if NPI>0 thencall SaveInteger(LY,(UT3),(34),(NPI+1))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction N25 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if P2I(P7I)==false thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093808951)call UnitAddAbility(P7I,1093808706)call UnitRemoveAbility(P7I,1093808706)if(ES1((P7I),FR0[KN0])!=null)thencall UnitAddAbility(P7I,1093808951)endifendifset t=nullset P7I=nullreturn falseendfunctionfunction N35 takes unit P7I returns nothinglocal trigger tlocal integer S5Iif P2I(P7I)==false thencall UnitRemoveAbility(P7I,1093808951)call UnitAddAbility(P7I,1093808706)call UnitRemoveAbility(P7I,1093808706)if(ES1((P7I),FR0[KN0])!=null)thencall UnitAddAbility(P7I,1093808951)endifelseset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function N25))set t=nullendifendfunctionfunction N45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093808697)local integer UT3=S5Iif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif IsUnitIllusion(GetAttacker())==true and GetUnitAbilityLevel(GetAttacker(),1093751895)>0 thencall N35(GetAttacker())call UnitRemoveAbility(GetAttacker(),1093751895)endifif GetAttacker()==P7I thenset NPI=NPI+1if NPI>3+SUI thencall UnitRemoveAbility(P7I,1093751895)call UnitRemoveAbility(P7I,1110459466)call N35(P7I)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2,false)call TriggerAddCondition(t,Condition(function NO5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(375),(UT3))endifendifelsecall UnitRemoveAbility(P7I,1093751895)call UnitRemoveAbility(P7I,1110459466)call N35(P7I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction N55 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,15,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function N45))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(1))call UnitRemoveAbility(P7I,1093808951)call UnitAddAbility(P7I,1093808705)call UnitRemoveAbility(P7I,1093808705)if(ES1((P7I),FR0[KN0])!=null)thencall UnitAddAbility(P7I,1093808951)endifset t=nullset P7I=nullendfunctionfunction N65 takes nothing returns booleanif IsUnitIllusion(GetTriggerUnit())==true and GetUnitTypeId(GetTriggerUnit())==1160786511 thencall N35(GetTriggerUnit())endifreturn falseendfunctionfunction N75 takes nothing returns booleanif GetSpellAbilityId()==1093808697 and GetUnitTypeId(GetTriggerUnit())==1160786510 thencall N55()endifreturn falseendfunctionfunction RN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function N75))set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,GetWorldBounds())call TriggerAddCondition(t,Condition(function N65))set t=nullendfunctionfunction N85 takes nothing returns booleanlocal unit P8I=GetFilterUnit()local unit P7I=XHIlocal real QXI=XZIlocal real QYI=XVIlocal real IO3=XWIlocal real I23=XXIlocal real xlocal real ylocal real alocal real dif(RKI(GetFilterUnit())==false and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))thenif((LoadInteger(LY,(GetHandleId((P8I))),((4324))))==1)==false thencall SCI(P8I,4324,0.3)endifset d=QNI(QXI,QYI,GetUnitX(P8I),GetUnitY(P8I))set a=UEI(QXI,QYI,GetUnitX(P8I),GetUnitY(P8I))*bj_DEGTORADif d>XYI thenset x=GetUnitX(P8I)+11*Cos(a)set y=GetUnitY(P8I)+11*Sin(a)elseset x=GetUnitX(P8I)-11*Cos(a)set y=GetUnitY(P8I)-11*Sin(a)endifcall SetUnitX(P8I,x)call SetUnitY(P8I,y)endifset P8I=nullset P7I=nullreturn falseendfunctionfunction N95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QXI=(LoadReal(LY,(S5I),(6)))local real QYI=(LoadReal(LY,(S5I),(7)))local real xlocal real ylocal integer i=0local group gif GetTriggerEvalCount(t)>(50*(2+0.5*GetUnitAbilityLevel(P7I,1093751637)))thenloopexitwhen i>16set i=i+1endloopcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set XZI=QXIset XVI=QYIset XHI=P7Iset GK=P7Iloopexitwhen i>16set x=QXI+XYI*Cos(bj_DEGTORAD*360.0*i/16.0)set y=QYI+XYI*Sin(bj_DEGTORAD*360.0*i/16.0)set XWI=xset XXI=ycall GroupEnumUnitsInRange(g,x,y,75,Condition(function N85))set i=i+1endloopcall NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction NA5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QXI=(LoadReal(LY,(S5I),(6)))local real QYI=(LoadReal(LY,(S5I),(7)))local real xlocal real ylocal integer i=0call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)loopexitwhen i>16set x=QXI+XYI*Cos(bj_DEGTORAD*360.0*i/16.0)set y=QYI+XYI*Sin(bj_DEGTORAD*360.0*i/16.0)set i=i+1endloopcall SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Stand.mdx",QXI,QYI)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((QXI)*1.0))call SaveReal(LY,(S5I),(7),((QYI)*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function N95))set t=nullset P7I=nullreturn falseendfunctionfunction NB5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real QXI=GetSpellTargetX()local real QYI=GetSpellTargetY()call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Start.mdx",QXI,QYI)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((QXI)*1.0))call SaveReal(LY,(S5I),(7),((QYI)*1.0))call TriggerRegisterTimerEvent(t,1.2,false)call TriggerAddCondition(t,Condition(function NA5))call I41(GetOwningPlayer(P7I),5.5,QXI,QYI,300)set t=nullset P7I=nullendfunctionfunction NC5 takes nothing returns booleanif GetSpellAbilityId()==1093751637 thencall NB5()endifreturn falseendfunctionfunction RS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NC5))set t=nullendfunctionfunction ND5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real a=UEI(x,y,QJI,QKI)local real d=QNI(x,y,QJI,QKI)local real r=(LoadReal(LY,(S5I),(671)))call SetUnitFacing(IG1,a)set x=x+r*Cos(a*bj_DEGTORAD)set y=y+r*Sin(a*bj_DEGTORAD)call SetUnitX(IG1,x)call SetUnitY(IG1,y)if d<40 thencall KillUnit(IG1)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SCI(P8I,4411,1)call SetUnitPosition(P8I,QJI,QKI)call PanCameraToTimedForPlayer(GetOwningPlayer(P8I),QJI,QKI,0)elseif RKI(P8I)thencall KillUnit(IG1)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction NE5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local real x=(LoadReal(LY,(GetHandleId(P8I)),(7400)))local real y=(LoadReal(LY,(GetHandleId(P8I)),(7500)))local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993398,GetUnitX(P8I),GetUnitY(P8I),0)local real d=QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))local real r=0.02*(RMaxBJ(d/1.8,600))call TriggerAddCondition(t,Condition(function ND5))call TriggerRegisterTimerEvent(t,0.02,true)call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(671),((r)*1.0))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect("effects\\Lightning_Ball_Tail_FX.mdx",x,y)))call TriggerEvaluate(t)set P7I=nullset P8I=nullendfunctionfunction NF5 takes nothing returns booleanif GetSpellAbilityId()==1093751639 and NNI(GetSpellTargetUnit())==false thenif IsUnitIllusion(GetSpellTargetUnit())thencall KillUnit(GetSpellTargetUnit())elsecall NE5()endifendifreturn falseendfunctionfunction Y0O takes nothing returns nothinglocal unit P8I=GKlocal integer S5I=GetHandleId(P8I)local integer i=0loopexitwhen i>15set i=i+1endloopset P8I=nullendfunctionfunction NG5 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local integer S5I=GetHandleId(P8I)local integer i=1loopexitwhen i>15call SaveReal(LY,(S5I),(7400+i-1),(((LoadReal(LY,(S5I),(7400+i))))*1.0))call SaveReal(LY,(S5I),(7500+i-1),(((LoadReal(LY,(S5I),(7500+i))))*1.0))set i=i+1endloopcall SaveReal(LY,(S5I),(7400+15),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(7500+15),((GetUnitY(P8I))*1.0))set P8I=nullendfunctionfunction NH5 takes nothing returns booleanlocal group g=NTI()call GroupEnumUnitsInRange(g,0,0,99999,Condition(function D51))call ForGroup(g,function NG5)call NSI(g)set g=nullreturn falseendfunctionfunction RR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NF5))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function NH5))set t=nullendfunctionfunction NZ5 takes nothing returns nothingif XJI!=GetEnumUnit()thencall P6I(XKI,GetEnumUnit(),1,XLI*20+20)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetEnumUnit(),"chest"))endifendfunctionfunction NV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local group glocal integer NPI=GetTriggerEvalCount(t)local unit ZK3=nullcall SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))call SetUnitX(IG1,GetUnitX(P8I))call SetUnitY(IG1,GetUnitY(P8I))if NPI==1 or NPI==100 or NPI==200 or NPI==300 thenset g=NTI()if IC1(P8I)thenset ZK3=CreateUnit(GetOwningPlayer(P8I),1697656899,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(ZK3,1112820806,0.2)call IssueTargetOrder(I01,"chainlightning",ZK3)elsecall IssueTargetOrder(I01,"chainlightning",P8I)call P6I(P7I,P8I,1,SUI*20+20)endifcall U5I("war3mapImported\\ThunderStorm_Groundeffect.mdx",P8I,"origin",0.6)set GK=P7Iset XKI=P7Iset XJI=P8Iset XLI=SUIcall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),240+25,Condition(function CA1))call ForGroup(g,function NZ5)call NSI(g)if GetTriggerEvalCount(t)==300 thencall KillUnit(I01)call KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset P7I=nullset P8I=nullset I01=nullset IG1=nullreturn falseendfunctionfunction NW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093751894)local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1697657424,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(IG1,1097625443)call IA1(I01,1093752119)call SetUnitAbilityLevel(I01,1093752119,SUI)call IA1(I01,1097625443)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function NV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveInteger(LY,(S5I),(5),(SUI))set P7I=nullset P8I=nullset IG1=nullset t=nullendfunctionfunction NX5 takes nothing returns booleanif GetSpellAbilityId()==1093751894 and NNI(GetSpellTargetUnit())==false thencall NW5()endifreturn falseendfunctionfunction RP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NX5))set t=nullendfunctionfunction NY5 takes nothing returns nothinglocal unit I01if XTI thenset I01=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)call UnitRemoveAbility(GetEnumUnit(),1110460467)call IA1(I01,1093817926)call IssueTargetOrder(I01,"doom",GetEnumUnit())set I01=nullendifcall P6I(XNI,GetEnumUnit(),1,XMI)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Purge_NoBirth.mdx",GetEnumUnit(),"origin"))endfunctionfunction NJ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local boolean CK3=(LoadBoolean(LY,(S5I),(15)))local group glocal integer NPI=GetTriggerEvalCount(t)local integer MKO=20if CK3 thenset MKO=28endifif NPI>MKO thencall StopSound(EF,false,true)call KillUnit(IG1)call ShowUnit(IG1,false)call KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Iset XNI=P7Iset XMI=0.25*(150+50*SUI)*(NPI/I2R(MKO))set XSI=falseset XTI=CK3if ModuloInteger(NPI,4)==0 thenset XSI=trueendifcall GroupEnumUnitsInRange(g,GetUnitX(IG1),GetUnitY(IG1),475,Condition(function CH1))call ForGroup(g,function NY5)call NSI(g)set g=nullendifset t=nullset P7I=nullset IG1=nullset I01=nullreturn falseendfunctionfunction NK5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993419,QJI,QKI,0)local integer SUI=GetUnitAbilityLevel(P7I,1093752118)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,QJI,QKI,0)local boolean CK3=falseif SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093817912)set CK3=trueendifcall SetSoundVolume(EF,200)call StartSound(EF)call SetSoundPosition(EF,QJI,QKI,100)if TOI(GetOwningPlayer(P7I))thencall IA1(I01,1093752117)if CK3 thencall SetUnitAbilityLevel(I01,1093752117,2)endifelsecall IA1(I01,1093752116)if CK3 thencall SetUnitAbilityLevel(I01,1093752116,2)endifendifcall IssuePointOrder(I01,"cloudoffog",QJI,QKI)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(5),(SUI))call SaveBoolean(LY,(S5I),(15),(CK3))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function NJ5))set t=nullset P7I=nullendfunctionfunction NL5 takes nothing returns booleanif GetSpellAbilityId()==1093752118 or GetSpellAbilityId()==1093817912 thencall NK5()endifreturn falseendfunctionfunction RT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NL5))set t=nullendfunctionfunction NM5 takes nothing returns nothinglocal integer NN5=YIIlocal unit P8I=GetEnumUnit()local integer NS5=662-1+NN5local real NT5=(LoadReal(LY,(GetHandleId(P8I)),(NS5)))local real SOI=(TimerGetElapsed(M))if NT5<SOI thencall SaveReal(LY,(GetHandleId(P8I)),(NS5),((SOI+2)*1.0))if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false thencall P6I(XRI,P8I,1,2+6*Y0I)elseendifendifset P8I=nullendfunctionfunction Spirits_DamageHeroes takes nothing returns nothinglocal integer NN5=YIIlocal unit P8I=GetEnumUnit()local integer NS5=662-1+NN5local real NT5=(LoadReal(LY,(GetHandleId(P8I)),(NS5)))local real SOI=(TimerGetElapsed(M))if NT5<SOI thencall SaveReal(LY,(GetHandleId(P8I)),(NS5),((SOI+2)*1.0))if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false thencall P6I(XRI,P8I,1,15+10*Y0I)elseendifendifset P8I=nullendfunctionfunction NR5 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false thencall P6I(XRI,GetEnumUnit(),1,XQI)elseendifendfunctionfunction NP5 takes unit P7I,unit NQ5 returns nothinglocal group g=NTI()set GK=P7Iset XQI=25*Y0Iset XRI=P7Iset XPI=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(NQ5),GetUnitY(NQ5),0)call GroupEnumUnitsInRange(g,GetUnitX(NQ5),GetUnitY(NQ5),325,Condition(function CJ1))call IA1(XPI,1093751887)call ForGroup(g,function NR5)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(NQ5),GetUnitY(NQ5)))call KillUnit(NQ5)call NSI(g)call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(P7I),1865429073,GetUnitX(NQ5),GetUnitY(NQ5),0),1112820806,2)set g=nullendfunctionfunction NU5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit R74=(LoadUnitHandle(LY,(S5I),(393)))local unit R84=(LoadUnitHandle(LY,(S5I),(394)))local unit R94=(LoadUnitHandle(LY,(S5I),(395)))local unit RA4=(LoadUnitHandle(LY,(S5I),(396)))local unit RB4=(LoadUnitHandle(LY,(S5I),(397)))local real xlocal real ylocal real alocal real d=(LoadReal(LY,(S5I),(138)))local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real JC3local integer NPI=GetTriggerEvalCount(t)local real DJ1local group glocal integer S05=0local real Q4I=2.25local real SI5if IC1(R74)==false thenset S05=S05+1endifif IC1(R84)==false thenset S05=S05+1endifif IC1(R94)==false thenset S05=S05+1endifif IC1(RA4)==false thenset S05=S05+1endifif IC1(RB4)==false thenset S05=S05+1endifif S05==5 thenset Q4I=2.25elseif S05==4 thenset Q4I=2.1elseif S05==3 thenset Q4I=1.95elseif S05==2 thenset Q4I=1.8elseif S05==1 thenset Q4I=1.65endifset JC3=-1*360*0.02/Q4Iset SI5=(LoadReal(LY,(S5I),(137)))+JC3call SaveReal(LY,(S5I),(137),((SI5)*1.0))set Y0I=GetUnitAbilityLevel(P7I,1093751864)set XRI=P7Iif NPI==50 thencall ShowUnit(R84,true)call SaveBoolean(LY,(S5I),(512),(true))call IA1(R84,1097625443)endifif NPI==100 thencall ShowUnit(R94,true)call SaveBoolean(LY,(S5I),(513),(true))call IA1(R94,1097625443)endifif NPI==150 thencall ShowUnit(RA4,true)call SaveBoolean(LY,(S5I),(514),(true))call IA1(RA4,1097625443)endifif NPI==200 thencall ShowUnit(RB4,true)call SaveBoolean(LY,(S5I),(515),(true))call IA1(RB4,1097625443)endifif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093809217 thenif(LoadBoolean(LY,(S5I),(655)))==true thencall SaveBoolean(LY,(S5I),(655),(false))call SaveBoolean(LY,(S5I),(656),(false))elsecall SaveBoolean(LY,(S5I),(655),(true))call SaveBoolean(LY,(S5I),(656),(false))endifelseif GetSpellAbilityId()==1093809218 thenif(LoadBoolean(LY,(S5I),(656)))==true thencall SaveBoolean(LY,(S5I),(655),(false))call SaveBoolean(LY,(S5I),(656),(false))elsecall SaveBoolean(LY,(S5I),(655),(false))call SaveBoolean(LY,(S5I),(656),(true))endifendifendifif(LoadBoolean(LY,(S5I),(655)))thenset d=RMaxBJ(d-5,100)call SaveReal(LY,(S5I),(138),((d)*1.0))elseif(LoadBoolean(LY,(S5I),(656)))thenset d=RMinBJ(d+5,875)call SaveReal(LY,(S5I),(138),((d)*1.0))endifif GetTriggerEventId()==EVENT_UNIT_DEATH or NPI==950 or(IC1(R74)and IC1(R84)and IC1(R94)and IC1(RA4)and IC1(RB4))or(NPI>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751864)thenif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT thencall UnitRemoveAbility(P7I,1093809217)call UnitRemoveAbility(P7I,1093809218)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)if IC1(R74)==false thencall NP5(P7I,R74)endifif IC1(R84)==false thencall NP5(P7I,R84)endifif IC1(R94)==false thencall NP5(P7I,R94)endifif IC1(RA4)==false thencall NP5(P7I,RA4)endifif IC1(RB4)==false thencall NP5(P7I,RB4)endifelseset g=NTI()if IC1(R74)==false and(LoadBoolean(LY,(S5I),(511)))thenset DJ1=360*5/5.0set a=DJ1+SI5set x=PTI(QXI+d*Cos(a*bj_DEGTORAD))set y=PUI(QYI+d*Sin(a*bj_DEGTORAD))call SetUnitX(R74,x)call SetUnitY(R74,y)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,95,Condition(function D21))if FirstOfGroup(g)!=null thencall NP5(P7I,R74)endifcall GroupClear(g)set XUI=R74set YII=1set XRI=P7Icall GroupEnumUnitsInRange(g,x,y,175,Condition(function CY1))call ForGroup(g,function NM5)call GroupClear(g)endifif IC1(R84)==false and(LoadBoolean(LY,(S5I),(512)))thenset DJ1=360*4/5.0set a=DJ1+SI5set x=PTI(QXI+d*Cos(a*bj_DEGTORAD))set y=PUI(QYI+d*Sin(a*bj_DEGTORAD))call SetUnitX(R84,x)call SetUnitY(R84,y)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,95,Condition(function D21))if FirstOfGroup(g)!=null thencall NP5(P7I,R84)endifcall GroupClear(g)set XUI=R84set YII=2set XRI=P7Icall GroupEnumUnitsInRange(g,x,y,175,Condition(function CY1))call ForGroup(g,function NM5)call GroupClear(g)endifif IC1(R94)==false and(LoadBoolean(LY,(S5I),(513)))thenset DJ1=360*3/5.0set a=DJ1+SI5set x=PTI(QXI+d*Cos(a*bj_DEGTORAD))set y=PUI(QYI+d*Sin(a*bj_DEGTORAD))call SetUnitX(R94,x)call SetUnitY(R94,y)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,95,Condition(function D21))if FirstOfGroup(g)!=null thencall NP5(P7I,R94)endifcall GroupClear(g)set XUI=R94set YII=3set XRI=P7Icall GroupEnumUnitsInRange(g,x,y,175,Condition(function CY1))call ForGroup(g,function NM5)call GroupClear(g)endifif IC1(RA4)==false and(LoadBoolean(LY,(S5I),(514)))thenset DJ1=360*2/5.0set a=DJ1+SI5set x=PTI(QXI+d*Cos(a*bj_DEGTORAD))set y=PUI(QYI+d*Sin(a*bj_DEGTORAD))call SetUnitX(RA4,x)call SetUnitY(RA4,y)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,95,Condition(function D21))if FirstOfGroup(g)!=null thencall NP5(P7I,RA4)endifcall GroupClear(g)set XUI=RA4set YII=4set XRI=P7Icall GroupEnumUnitsInRange(g,x,y,175,Condition(function CY1))call ForGroup(g,function NM5)call GroupClear(g)endifif IC1(RB4)==false and(LoadBoolean(LY,(S5I),(515)))thenset DJ1=360*1/5.0set a=DJ1+SI5set x=PTI(QXI+d*Cos(a*bj_DEGTORAD))set y=PUI(QYI+d*Sin(a*bj_DEGTORAD))call SetUnitX(RB4,x)call SetUnitY(RB4,y)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,95,Condition(function D21))if FirstOfGroup(g)!=null thencall NP5(P7I,RB4)endifcall GroupClear(g)set XUI=RB4set YII=5set XRI=P7Icall GroupEnumUnitsInRange(g,x,y,175,Condition(function CY1))call ForGroup(g,function NM5)call GroupClear(g)endifcall NSI(g)endifset t=nullset P7I=nullset R74=nullset R84=nullset R94=nullset RA4=nullset RB4=nullreturn falseendfunctionfunction S15 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit R74local unit R84local unit R94local unit RA4local unit RB4local real xlocal real yset x=GetUnitX(P7I)+250*Cos(bj_DEGTORAD*360*5/5.0*-1.0)set y=GetUnitY(P7I)+250*Sin(bj_DEGTORAD*360*5/5.0*-1.0)set R74=CreateUnit(GetOwningPlayer(P7I),1747993418,x,y,360*5/5.0*-1.0)call IA1(R74,1097625443)set x=GetUnitX(P7I)+250*Cos(bj_DEGTORAD*360*4/5.0*-1.0)set y=GetUnitY(P7I)+250*Sin(bj_DEGTORAD*360*4/5.0*-1.0)set R84=CreateUnit(GetOwningPlayer(P7I),1747993418,x,y,360*4/5.0*-1.0)call ShowUnit(R84,false)call SetUnitInvulnerable(R84,true)set x=GetUnitX(P7I)+250*Cos(bj_DEGTORAD*360*3/5.0*-1.0)set y=GetUnitY(P7I)+250*Sin(bj_DEGTORAD*360*3/5.0*-1.0)set R94=CreateUnit(GetOwningPlayer(P7I),1747993418,x,y,360*3/5.0*-1.0)call ShowUnit(R94,false)call SetUnitInvulnerable(R84,true)set x=GetUnitX(P7I)+250*Cos(bj_DEGTORAD*360*2/5.0*-1.0)set y=GetUnitY(P7I)+250*Sin(bj_DEGTORAD*360*2/5.0*-1.0)set RA4=CreateUnit(GetOwningPlayer(P7I),1747993418,x,y,360*2/5.0*-1.0)call ShowUnit(RA4,false)call SetUnitInvulnerable(RA4,true)set x=GetUnitX(P7I)+250*Cos(bj_DEGTORAD*360*1/5.0*-1.0)set y=GetUnitY(P7I)+250*Sin(bj_DEGTORAD*360*1/5.0*-1.0)set RB4=CreateUnit(GetOwningPlayer(P7I),1747993418,x,y,360*1/5.0*-1.0)call ShowUnit(RB4,false)call SetUnitInvulnerable(RB4,true)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(393),(R74))call SaveUnitHandle(LY,(S5I),(394),(R84))call SaveUnitHandle(LY,(S5I),(395),(R94))call SaveUnitHandle(LY,(S5I),(396),(RA4))call SaveUnitHandle(LY,(S5I),(397),(RB4))call SaveBoolean(LY,(S5I),(511),(true))call SaveBoolean(LY,(S5I),(512),(false))call SaveBoolean(LY,(S5I),(513),(false))call SaveBoolean(LY,(S5I),(514),(false))call SaveBoolean(LY,(S5I),(515),(false))call SaveBoolean(LY,(S5I),(655),(false))call SaveBoolean(LY,(S5I),(656),(false))call SaveReal(LY,(S5I),(138),((150)*1.0))call IA1(P7I,1093809218)call IA1(P7I,1093809217)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NU5))set P7I=nullset t=nullset R74=nullset R84=nullset R94=nullset RA4=nullset RB4=nullendfunctionfunction SO5 takes nothing returns booleanif GetSpellAbilityId()==1093751864 thencall S15()endifreturn falseendfunctionfunction RQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SO5))set t=nullendfunctionfunction S25 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=(LoadInteger(LY,(S5I),(5)))call QGI(P7I,GetEventDamage()*0.05*SUI)set t=nullset P7I=nullreturn falseendfunctionfunction S35 takes unit u returns nothinglocal trigger tcall UnitRemoveAbility(u,1093751891)call UnitRemoveAbility(u,1093751890)call UnitRemoveAbility(u,1093751892)call UnitRemoveAbility(u,1093751888)if(LoadBoolean(LY,(GetHandleId(u)),(708)))thencall SaveBoolean(LY,(GetHandleId(u)),(708),(false))set t=(LoadTriggerHandle(LY,(GetHandleId(u)),(709)))call FlushChildHashtable(LY,(GetHandleId(t)))call S0I(t)call RemoveSavedHandle(LY,(GetHandleId(u)),(709))set t=nullendifendfunctionfunction S45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call S35(P7I)call FlushChildHashtable(LY,(S5I))call S0I(t)return falseendfunctionfunction S55 takes unit u,integer i returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(u))call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function S45))if i==1 thencall IA1(u,1093751891)call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751891,false)elseif i==2 thencall IA1(u,1093751890)call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751890,false)elseif i==3 thencall IA1(u,1093751892)call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751892,false)elseif i==4 thencall IA1(u,1093751888)call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751888,false)endifif(LoadBoolean(LY,(GetHandleId(u)),(708)))==false thencall SaveBoolean(LY,(GetHandleId(u)),(708),(true))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function S25))call SaveTriggerHandle(LY,(GetHandleId(u)),(709),(t))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(u))call SaveInteger(LY,(GetHandleId(t)),(5),(i))endifset t=nullendfunctionfunction S65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093810257)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit S75=(LoadUnitHandle(LY,(GetHandleId(P7I)),(652)))local boolean ZXO=falselocal real S85=0.2*(GetUnitState(P7I,UNIT_STATE_LIFE)*0.045)local real S95=0.2*(GetUnitState(P7I,UNIT_STATE_MANA)*0.045)if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif GetIssuedOrderId()==String2OrderIdBJ("manashieldon")thencall S55(P7I,SUI)elseif GetIssuedOrderId()==String2OrderIdBJ("manashieldoff")thencall S35(P7I)endifendifif GetUnitAbilityLevel(P7I,1093751891)>0 or GetUnitAbilityLevel(P7I,1093751890)>0 or GetUnitAbilityLevel(P7I,1093751892)>0 or GetUnitAbilityLevel(P7I,1093751888)>0 thenset ZXO=truecall SetUnitState(P7I,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(P7I,UNIT_STATE_LIFE)-S85,1))call SetUnitState(P7I,UNIT_STATE_MANA,RMaxBJ(GetUnitState(P7I,UNIT_STATE_MANA)-S95,1))endifif S75==null thenif P8I!=null thencall S35(P8I)set P8I=nullcall SaveUnitHandle(LY,(S5I),(17),(P8I))endifelseif P8I==null thenset P8I=S75if ZXO thencall SaveUnitHandle(LY,(S5I),(17),(P8I))call S55(P8I,SUI)elsecall S35(P8I)endifelseif P8I!=S75 thencall S35(P8I)if ZXO thenset P8I=S75call SaveUnitHandle(LY,(S5I),(17),(P8I))call S55(P8I,SUI)endifelseif ZXO==false thencall S35(P8I)elseif P8I==S75 thenif ZXO thenset P8I=S75call SaveUnitHandle(LY,(S5I),(17),(P8I))call S55(P8I,SUI)endifendifendifset t=nullset P7I=nullset P8I=nullset S75=nullreturn falseendfunctionfunction SA5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093810257)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(null))call TriggerRegisterTimerEvent(t,0.2,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function S65))set P7I=nullset t=nullendfunctionfunction SB5 takes nothing returns booleanif GetLearnedSkill()==1093810257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093810257)==1 thencall SA5()endifreturn falseendfunctionfunction RU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function SB5))set t=nullendfunctionfunction SC5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),YOI)==false thencall GroupAddUnit(YOI,GetEnumUnit())call IA1(GetEnumUnit(),1093817424)call AX1(GetEnumUnit(),1093817424,1,0.25+0.5*Y3I,1110460245)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",GetEnumUnit(),"chest"))endifendfunctionfunction SD5 takes unit P7I,unit P8I,group JAO returns nothinglocal real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=GetUnitX(P8I)local real y2=GetUnitY(P8I)local real a=UEI(x1,y1,x2,y2)*bj_DEGTORADlocal real xlocal real ylocal real d=QNI(x1,y1,x2,y2)local group g=NTI()local integer i=1set YOI=JAOset Y1I=P7Iset Y3I=GetUnitAbilityLevel(P7I,1093751873)set Y2I=Y3I*50+50loopexitwhen i>8set GK=P7Iset x=x1+d*i/8*Cos(a)set y=y1+d*i/8*Sin(a)call GroupEnumUnitsInRange(g,x,y,100,Condition(function CA1))call ForGroup(g,function SC5)call GroupClear(g)set i=i+1endloopcall NSI(g)set g=nullendfunctionfunction SE5 takes unit P7I,unit P8I returns booleanreturn((LoadInteger(LY,(GetHandleId((P7I))),((4294))))==1)endfunctionfunction SF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real d=QLI(P7I,P8I)local real a=UDI(P7I,P8I)*bj_DEGTORADlocal real x=GetUnitX(P7I)+20*Cos(a)local real y=GetUnitY(P7I)+20*Sin(a)local location lif d<300 or d>2150 thenset l=BN1(x,y)set x=GetLocationX(l)set y=GetLocationY(l)call SetUnitX(P7I,PTI(x))call SetUnitY(P7I,PUI(y))call UPI(x,y,350)call RemoveLocation(l)set l=nullcall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SaveInteger(LY,(GetHandleId((P7I))),((4295)),(2))elsecall SetUnitX(P7I,x)call SetUnitY(P7I,y)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction SG5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local lightning UZI=(LoadLightningHandle(LY,(S5I),(196)))local integer NPI=GetTriggerEvalCount(t)local real d=QLI(P7I,P8I)local real a=1local real Z33=GetUnitState(P7I,UNIT_STATE_LIFE)local real KWO=GetUnitState(P7I,UNIT_STATE_MANA)local real SH5=(LoadReal(LY,(S5I),(670)))local real SZ5=(LoadReal(LY,(S5I),(667)))local real SV5local real SW5local real SX5=1.5if P8I==null or P7I==null or IC1(P7I)==true or(NPI>600 and SE5(P7I,P8I)==false and((LoadInteger(LY,(GetHandleId((P7I))),((4295))))==1)==false)or(d>925 and((LoadInteger(LY,(GetHandleId((P7I))),((4295))))==1)==false)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751893)thencall NSI(JAO)call DestroyLightning(UZI)call UnitRemoveAbility(P8I,1093751880)call UnitRemoveAbility(P8I,1093751881)call UnitRemoveAbility(P8I,1093751879)call UnitRemoveAbility(P8I,1093751882)call UnitRemoveAbility(P8I,1110459464)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093751880)call UnitRemoveAbility(P7I,1093751881)call UnitRemoveAbility(P7I,1093751879)call UnitRemoveAbility(P7I,1093751882)call UnitRemoveAbility(P7I,1110459464)call UnitRemoveAbility(P7I,1093751893)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093751873 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751873,true)endifcall RemoveSavedHandle(LY,GetHandleId(P7I),652)elseset SV5=Z33/GetUnitState(P7I,UNIT_STATE_MAX_LIFE)set SW5=KWO/GetUnitState(P7I,UNIT_STATE_MAX_MANA)if SV5-SH5>0 and(SV5-SH5)<0.5 thenif((LoadInteger(LY,(GetHandleId((P7I))),((4298))))==1)==false thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+SX5*(SV5-SH5)*GetUnitState(P7I,UNIT_STATE_MAX_LIFE))endifendifif SW5-SZ5>0 and(SW5-SZ5)<0.5 thencall SetUnitState(P8I,UNIT_STATE_MANA,GetUnitState(P8I,UNIT_STATE_MANA)+SX5*(SW5-SZ5)*GetUnitState(P7I,UNIT_STATE_MAX_MANA))endifcall SaveReal(LY,(S5I),(670),((GetUnitState(P7I,UNIT_STATE_LIFE)/GetUnitState(P7I,UNIT_STATE_MAX_LIFE))*1.0))call SaveReal(LY,(S5I),(667),((GetUnitState(P7I,UNIT_STATE_MANA)/GetUnitState(P7I,UNIT_STATE_MAX_MANA))*1.0))call MoveLightning(UZI,true,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))call SD5(P7I,P8I,JAO)if IsUnitVisible(P7I,GetLocalPlayer())==false and IsUnitVisible(P8I,GetLocalPlayer())==false thenset a=0endifif P0I(GetLocalPlayer())thenset a=1endifif d<700 or((LoadInteger(LY,(GetHandleId((P7I))),((4295))))==1)==true thencall SetLightningColor(UZI,0.00,1.00,1.00,a)elsecall SetLightningColor(UZI,0.80,0.70,0.40,a)endifendifset t=nullset P7I=nullset P8I=nullset JAO=nullset UZI=nullreturn falseendfunctionfunction SY5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local lightning UZI=AddLightning("CHIM",true,GetUnitX(P7I),GetUnitY(P7I),GetUnitX(P8I),GetUnitY(P8I))local integer SUI=GetUnitAbilityLevel(P7I,1093751873)local integer X63local real d=QLI(P7I,P8I)local real a=UDI(P7I,P8I)*bj_DEGTORADlocal location llocal real xlocal real ycall SetLightningColor(UZI,0.00,1.00,1.00,1)call IA1(P7I,1093751893)if SUI==1 thenset X63=1093751880elseif SUI==2 thenset X63=1093751881elseif SUI==3 thenset X63=1093751879elseif SUI==4 thenset X63=1093751882endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751873,false)call IA1(P7I,X63)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),X63,false)call IA1(P8I,X63)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),X63,false)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveGroupHandle(LY,(S5I),(133),(NTI()))call SaveLightningHandle(LY,(S5I),(196),(UZI))call SaveReal(LY,(S5I),(670),((GetUnitState(P7I,UNIT_STATE_LIFE)/GetUnitState(P7I,UNIT_STATE_MAX_LIFE))*1.0))call SaveReal(LY,(S5I),(667),((GetUnitState(P7I,UNIT_STATE_MANA)/GetUnitState(P7I,UNIT_STATE_MAX_MANA))*1.0))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SG5))call SaveUnitHandle(LY,(GetHandleId(P7I)),(652),(P8I))if d>700 thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",P7I,"chest")))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function SF5))call SaveInteger(LY,(GetHandleId((P7I))),((4295)),(1))endifset P7I=nullset t=nullendfunctionfunction SJ5 takes nothing returns booleanif GetSpellAbilityId()==1093751873 thencall SY5()endifreturn falseendfunctionfunction P01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function SJ5))set t=nullendfunctionfunction SK5 takes unit P7I,real x,real y returns booleanlocal boolean FB1=falselocal player p=GetOwningPlayer(P7I)local unit I01=CreateUnit(p,1697657425,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093752372)if IssuePointOrder(I01,"blink",x,y)==true thencall KillUnit(I01)set I01=nullreturn trueelsecall KillUnit(I01)set I01=nullreturn falseendifendfunctionfunction SL5 takes string UWI,unit P8I returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,0.033)call SetTextTagPosUnit(tt,P8I,64)call SetTextTagColor(tt,0,50,255,255)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,0.15)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,0.85)call SetTextTagVisibility(tt,true)set tt=nullendfunctionfunction SM5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=GetTriggerEvalCount(t)if IC1(P7I)==false and NPI<12 thencall SL5(I2S(12-NPI),P7I)endifif NPI==12 thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction SN5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(GetHandleId(P7I)),(652)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall SaveInteger(LY,(GetHandleId((P7I))),((4294)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall UPI(QJI,QKI,250)call UPI(QXI,QYI,250)if GetTriggerEvalCount(t)==1 thenif IC1(P7I)==false thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P7I),GetUnitY(P7I)))call SetUnitPosition(P7I,QJI,QKI)call PanCameraToTimedForPlayer(GetOwningPlayer(P7I),QJI,QKI,0)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P7I),GetUnitY(P7I)))endifif P8I!=null and IC1(P8I)==false and GetOwningPlayer(P8I)!=BO[0]and GetOwningPlayer(P8I)!=CO[0]and((LoadBoolean(LY,(GetHandleId(GetOwningPlayer((P8I)))),(139)))==false)thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P8I),GetUnitY(P8I)))call SCI(P8I,4402,1)call SetUnitPosition(P8I,QJI,QKI)if IsUnitType(P8I,UNIT_TYPE_HERO)==true and IC1(P8I)==false thencall PanCameraToTimedForPlayer(GetOwningPlayer(P8I),QJI,QKI,0)endifcall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P8I),GetUnitY(P8I)))endifelseif IC1(P7I)==false thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P7I),GetUnitY(P7I)))call SetUnitPosition(P7I,QXI,QYI)call PanCameraToTimedForPlayer(GetOwningPlayer(P7I),QXI,QYI,0)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P7I),GetUnitY(P7I)))endifif P8I!=null and IC1(P8I)==false and GetOwningPlayer(P8I)!=BO[0]and GetOwningPlayer(P8I)!=CO[0]and((LoadBoolean(LY,(GetHandleId(GetOwningPlayer((P8I)))),(139)))==false)thencall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P8I),GetUnitY(P8I)))call SCI(P8I,4402,1)call SetUnitPosition(P8I,QXI,QYI)if IsUnitType(P8I,UNIT_TYPE_HERO)==true and IC1(P8I)==false thencall PanCameraToTimedForPlayer(GetOwningPlayer(P8I),QXI,QYI,0)endifcall DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(P8I),GetUnitY(P8I)))endifcall SaveInteger(LY,(GetHandleId((P7I))),((4294)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset P7I=nullset P8I=nullset I31=nullreturn falseendfunctionfunction SS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local fogmodifier I31local integer SUI=GetUnitAbilityLevel(P7I,1093751874)if BG1(P7I)or BE1(P7I)or IC1(P7I)thencall SaveInteger(LY,(GetHandleId((P7I))),((4294)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)==(2.75-0.25*SUI)/.05 thenset I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,GetUnitX(P7I),GetUnitY(P7I),400,true,true)call FogModifierStart(I31)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0.01,false)call TriggerRegisterTimerEvent(t,12,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function SN5))call SaveReal(LY,(S5I),(189),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(190),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",GetUnitX(P7I),GetUnitY(P7I))))call SaveFogModifierHandle(LY,(S5I),(42),(I31))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function SM5))endifset P7I=nullset t=nullset I31=nullreturn falseendfunctionfunction ST5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit P8I=(LoadUnitHandle(LY,(GetHandleId(P7I)),(652)))local integer id=GetPlayerId(GetOwningPlayer(P7I))local integer SUI=GetUnitAbilityLevel(P7I,1093751874)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",P7I,"chest"))if P8I!=null thenendifcall PingMinimapEx(x,y,4.0,255,0,0,false)call I41(BO[1],2.5,x,y,300)call I41(CO[1],2.5,x,y,300)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,.05,true)call TriggerAddCondition(t,Condition(function SS5))call SaveReal(LY,(S5I),(47),((x)*1.0))call SaveReal(LY,(S5I),(48),((y)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",x,y)))call SaveInteger(LY,(GetHandleId((P7I))),((4294)),(1))set P7I=nullset t=nullendfunctionfunction SR5 takes nothing returns booleanif GetSpellAbilityId()==1093751874 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall ST5()elseif SK5(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())==false thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658776))elseif TII(GetOwningPlayer(GetTriggerUnit()))thenif IsPointInRegion(Y5I,GetSpellTargetX(),GetSpellTargetY())==true thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))endifelseif IsPointInRegion(Y4I,GetSpellTargetX(),GetSpellTargetY())==true thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))endifendifendifendifendifreturn falseendfunctionfunction PI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function SR5))set Y4I=CreateRegion()call RegionAddRect(Y4I,F4)call RegionAddRect(Y4I,G5)set Y5I=CreateRegion()call RegionAddRect(Y5I,E4)call RegionAddRect(Y5I,H5)set t=nullendfunctionfunction SP5 takes unit P7I,unit P8I,real QXI,real QYI,real a2 returns nothinglocal integer i=0local real QJIlocal real QKI=GetUnitY(P8I)local real alocal real xlocal real ylocal real SQ5if P8I!=null thenset QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)set a=UEI(QXI,QYI,QJI,QKI)elseset a=a2set QJI=QXI+50*Cos(a*bj_DEGTORAD)set QKI=QYI+50*Sin(a*bj_DEGTORAD)endifset SQ5=aset x=QJI+200*Cos(SQ5*bj_DEGTORAD)set y=QKI+200*Sin(SQ5*bj_DEGTORAD)call OA1(CreateDestructable(1110454326,x,y,-1*SQ5,0.6,1),7)set SQ5=a-40set x=QJI+200*Cos(SQ5*bj_DEGTORAD)set y=QKI+200*Sin(SQ5*bj_DEGTORAD)call OA1(CreateDestructable(1110454326,x,y,-1*SQ5,0.6,1),7)set SQ5=a-80set x=QJI+200*Cos(SQ5*bj_DEGTORAD)set y=QKI+200*Sin(SQ5*bj_DEGTORAD)call OA1(CreateDestructable(1110454326,x,y,-1*SQ5,0.6,1),7)set SQ5=a+40set x=QJI+200*Cos(SQ5*bj_DEGTORAD)set y=QKI+200*Sin(SQ5*bj_DEGTORAD)call OA1(CreateDestructable(1110454326,x,y,-1*SQ5,0.6,1),7)set SQ5=a+80set x=QJI+200*Cos(SQ5*bj_DEGTORAD)set y=QKI+200*Sin(SQ5*bj_DEGTORAD)call OA1(CreateDestructable(1110454326,x,y,-1*SQ5,0.6,1),7)if P8I!=null thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",P8I,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",P8I,"chest"))call P6I(Y6I,P8I,1,Y8I*70)endifendfunctionfunction SU5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),Y9I)==false thencall GroupAddUnit(Y9I,GetEnumUnit())call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",GetEnumUnit(),"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetEnumUnit(),"chest"))call P6I(Y6I,GetEnumUnit(),1,Y8I*70)endifendfunctionfunction T05 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit TI5=(LoadUnitHandle(LY,(S5I),(45)))local real EN4=(LoadReal(LY,(S5I),(683)))local real ES4=(LoadReal(LY,(S5I),(684)))local real QXI=GetUnitX(TI5)local real QYI=GetUnitY(TI5)local real RM2=Atan2(ES4-QYI,EN4-QXI)local real IV1=QXI+22*Cos(RM2)local real IW1=QYI+22*Sin(RM2)local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local integer SUI=GetUnitAbilityLevel(P7I,1093753167)local group g=NTI()set GK=P7Iset Y6I=P7Iset Y9I=JAOset Y8I=SUIset Y7I=nullcall GroupEnumUnitsInRange(g,IV1,IW1,225,Condition(function CA1))call ForGroup(g,function SU5)call NSI(g)call SetUnitPosition(TI5,IV1,IW1)if QNI(IV1,IW1,EN4,ES4)<40 thencall KillUnit(TI5)call ShowUnit(TI5,false)call SetUnitPathing(TI5,true)call SP5(P7I,null,IV1,IW1,RM2*bj_RADTODEG)call NSI(JAO)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset TI5=nullset JAO=nullset g=nullreturn falseendfunctionfunction T15 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit TI5=CreateUnit(GetOwningPlayer(P7I),1747993427,GetUnitX(P7I),GetUnitY(P7I),0)local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local real RM2=Atan2(QKI-QYI,QJI-QXI)local real EN4=PTI(QJI)local real ES4=PUI(QKI)call SetUnitFacing(TI5,RM2*bj_RADTODEG)call SetUnitPathing(TI5,false)call TriggerRegisterTimerEvent(t,.02,true)call TriggerAddCondition(t,Condition(function T05))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(683),((EN4)*1.0))call SaveReal(LY,(S5I),(684),((ES4)*1.0))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(45),(TI5))call SaveGroupHandle(LY,(S5I),(133),(NTI()))set P7I=nullset TI5=nullset t=nullendfunctionfunction TO5 takes nothing returns booleanif GetSpellAbilityId()==1093753167 thencall T15()endifreturn falseendfunctionfunction P11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TO5))set t=nullendfunctionfunction T25 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093753169)local integer NPI=GetTriggerEvalCount(t)local real y=(NPI-50)*(NPI-50)/4.3local real PAIif SUI==1 thenset PAI=75elseif SUI==2 thenset PAI=150elseset PAI=225endifif NPI==1 thencall IssueTargetOrder(P7I,"attack",P8I)endifif NPI<50 thenif RNI(P8I)==false thencall SetUnitFlyHeight(P8I,700*NPI/50,0)endifelseif NPI<100 thenif RNI(P8I)==false thencall SetUnitFlyHeight(P8I,700-700*(NPI-50)/50,0)endifelseif RNI(P8I)==false thencall SetUnitFlyHeight(P8I,GetUnitDefaultFlyHeight(P8I),0)endifcall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call FlushChildHashtable(LY,(S5I))call S0I(t)call AX1(P8I,1093808180,1,1+SUI,1110459481)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093808180,false)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction T35 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093753169)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UYI("WALRUS PUNCH !!",3.5,P7I,0.03,255,0,0,255)call IO1(YF,GetUnitX(P8I),GetUnitY(P8I))call IA1(I01,1093752144)call IssueTargetOrder(I01,"thunderbolt",P8I)if RNI(P8I)==false thencall IA1(P8I,1097691750)call UnitRemoveAbility(P8I,1097691750)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"overhead"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"head"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"left,hand"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"right,hand"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",P8I,"origin"))call TriggerRegisterTimerEvent(t,.01,true)call TriggerAddCondition(t,Condition(function T25))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",P8I,"chest")))set t=nullendfunctionfunction T45 takes nothing returns booleanlocal trigger t2=GetTriggeringTrigger()local integer KAO=GetHandleId(t2)local unit P7I=(LoadUnitHandle(LY,(KAO),(2)))local unit P8I=(LoadUnitHandle(LY,(KAO),(17)))local effect T55=(LoadEffectHandle(LY,(KAO),(32)))local trigger t=(LoadTriggerHandle(LY,(KAO),(35)))local integer S5I=(LoadInteger(LY,(KAO),(375)))if GetTriggerEvalCount(t2)==1 thencall IssueTargetOrder(P7I,"attack",P8I)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and GetEventDamage()>30 thencall AH1(P7I,1093752136,1,0.1)call AH1(P7I,1093752137,1,0.1)call DestroyEffect(T55)call S0I(t2)call FlushChildHashtable(LY,(KAO))call S0I(t)call FlushChildHashtable(LY,(S5I))call T35(P7I,P8I)endifelseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==P7I and GetTriggerUnit()!=P8I thencall FlushChildHashtable(LY,(KAO))call S0I(t2)endifelsecall UnitRemoveAbility(P7I,1093752136)call UnitRemoveAbility(P7I,1093752137)call RemoveSavedHandle(LY,(S5I),(17))call FlushChildHashtable(LY,(KAO))call S0I(t2)endifendifset t2=nullset t=nullset P7I=nullset P8I=nullset T55=nullreturn falseendfunctionfunction T65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8Ilocal effect T55=(LoadEffectHandle(LY,(S5I),(32)))local trigger t2local integer KAOif GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED thencall DestroyEffect(T55)call UnitRemoveAbility(P7I,1093752136)call UnitRemoveAbility(P7I,1093752137)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetAttacker()==P7I and GetTriggerUnit()!=(LoadUnitHandle(LY,(S5I),(17)))and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(P7I))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false thenset P8I=GetTriggerUnit()call SaveUnitHandle(LY,(S5I),(17),(P8I))call UnitRemoveAbility(P7I,1093752136)call UnitRemoveAbility(P7I,1093752137)if GetUnitState(P8I,UNIT_STATE_LIFE)/GetUnitState(P8I,UNIT_STATE_MAX_LIFE)>0.5 thencall IA1(P7I,1093752136)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093752136,false)elsecall IA1(P7I,1093752137)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093752137,false)endifcall IssueImmediateOrder(P7I,"stop")set t2=CreateTrigger()set KAO=GetHandleId(t2)call TriggerRegisterTimerEvent(t2,0,false)call TriggerRegisterTimerEvent(t2,2,false)call TriggerRegisterUnitEvent(t2,P8I,EVENT_UNIT_DAMAGED)call UMI(t2,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t2,Condition(function T45))call SaveUnitHandle(LY,(KAO),(2),(P7I))call SaveUnitHandle(LY,(KAO),(17),(P8I))call SaveEffectHandle(LY,(KAO),(32),(T55))call SaveInteger(LY,(KAO),(375),(S5I))call SaveTriggerHandle(LY,(KAO),(35),(t))endifset t=nullset P7I=nullset P8I=nullset T55=nullreturn falseendfunctionfunction T75 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterTimerEvent(t,10,false)call TriggerAddCondition(t,Condition(function T65))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(null))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\WalrusPunchWeaponFX.mdx",P7I,"weapon")))set t=nullset P7I=nullendfunctionfunction T85 takes nothing returns booleanif GetSpellAbilityId()==1093753169 thencall T75()endifreturn falseendfunctionfunction PO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function T85))set t=nullendfunctionfunction T95 takes nothing returns nothingcall ShowUnit(GetEnumUnit(),true)call UnitRemoveAbility(GetEnumUnit(),1093678162)call SetUnitInvulnerable(GetEnumUnit(),false)call PauseUnit(GetEnumUnit(),false)if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thencall SetUnitPosition(GetEnumUnit(),YHI,YZI)call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))elsecall SetUnitX(GetEnumUnit(),YHI)call SetUnitY(GetEnumUnit(),YZI)endifif GetEnumUnit()==YCI and YDI!=null thencall IssueTargetOrder(YCI,"attack",YDI)endifif GetUnitTypeId(GetEnumUnit())==1160786505 thencall SetUnitVertexColor(GetEnumUnit(),255,255,255,255)endifcall DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))endfunctionfunction Snowball_Slow takes nothing returns nothinglocal integer OO1if YGI==1 thenset OO1=1093808198elseif YGI==2 thenset OO1=1093808197elseif YGI==3 thenset OO1=1093751628elseif YGI==4 thenset OO1=1093808196endifif IsUnitInGroup(GetEnumUnit(),YAI)==false thencall GroupAddUnit(YAI,GetEnumUnit())call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),OO1,false)call AX1(GetEnumUnit(),OO1,1,5,1110459459)endifendfunctionfunction TA5 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),YAI)==false thencall GroupAddUnit(YAI,GetEnumUnit())call P6I(YCI,GetEnumUnit(),1,40*YGI+40+YWI*(10+10*YGI))call SetUnitAbilityLevel(YEI,1093687350,DB1(0.25*YGI+0.25))call SetUnitX(YEI,GetUnitX(GetEnumUnit()))call SetUnitY(YEI,GetUnitY(GetEnumUnit()))call IssueTargetOrder(YEI,"thunderbolt",GetEnumUnit())endifendfunctionfunction TB5 takes nothing returns nothingcall SetUnitX(GetEnumUnit(),YHI)call SetUnitY(GetEnumUnit(),YZI)endfunctionfunction TC5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real r=(LoadReal(LY,(S5I),(671)))local real a=UEI(GetUnitX(IG1),GetUnitY(IG1),QJI,QKI)*bj_DEGTORADlocal real x=GetUnitX(IG1)+r*Cos(a)local real y=GetUnitY(IG1)+r*Sin(a)local group JAO=(LoadGroupHandle(LY,(S5I),(133)))local group glocal integer NPI=GetTriggerEvalCount(t)local real S83=RMinBJ(2.5+(NPI*0.02),10)local real CY3=225+40*(NPI*0.02)local integer TD5=(LoadInteger(LY,(S5I),(34)))set YWI=TD5set YGI=GetUnitAbilityLevel(P7I,1093751607)set GK=P7Iset YAI=JAOset YCI=P7Iset YDI=P8Iset YEI=(LoadUnitHandle(LY,(S5I),(19)))call SetUnitX(IG1,x)call SetUnitY(IG1,y)call SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitFacing(IG1,a*bj_RADTODEG-180)call SetUnitScale(IG1,S83,S83,S83)set YHI=xset YZI=ycall ForGroup((LoadGroupHandle(LY,(S5I),(22))),function TB5)if QNI(x,y,QJI,QKI)<r*2 or NPI==150 thencall UPI(x,y,300)set g=NTI()call GroupEnumUnitsInRange(g,x,y,CY3,Condition(function CA1))call ForGroup(g,function TA5)call NSI(g)set g=nullset YHI=xset YZI=ycall ForGroup((LoadGroupHandle(LY,(S5I),(22))),function T95)call NSI((LoadGroupHandle(LY,(S5I),(22))))call NSI(JAO)call KillUnit(IG1)call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitInvulnerable(P7I,false)call UnitRemoveAbility(P7I,1096971630)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753167,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753169,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753170,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751607,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093818443,false)elseif ModuloInteger(GetTriggerEvalCount(t),5)==0 thencall UPI(x,y,300)set g=NTI()call GroupEnumUnitsInRange(g,x,y,CY3,Condition(function CA1))call ForGroup(g,function TA5)call NSI(g)set g=nullendifendifset t=nullset P7I=nullset IG1=nullset JAO=nullreturn falseendfunctionfunction TE5 takes unit P7I,group g,unit TF5 returns nothingif IsUnitInGroup(TF5,g)==false thencall GroupAddUnit(g,TF5)call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(TF5),GetUnitY(TF5)))call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(TF5),GetUnitY(TF5)))if P7I!=TF5 thencall ShowUnit(TF5,false)call IA1(TF5,1093678162)call SetUnitInvulnerable(TF5,true)call PauseUnit(TF5,true)endifif P7I!=TF5 thenset YWI=YWI+1endifendifendfunctionfunction TG5 takes nothing returns nothingcall TE5(YCI,YBI,GetEnumUnit())endfunctionfunction TH5 takes nothing returns booleanreturn((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))or(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GK)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit()))))and((LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetFilterUnit()))),(139)))==false or YCI==GetFilterUnit())endfunctionfunction TZ5 takes unit P7I,unit P8I,integer TD5 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QXI=GetUnitX(P7I)local real QYI=GetUnitY(P7I)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real a=UEI(QXI,QYI,QJI,QKI)*bj_DEGTORADlocal group g=NTI()set YVI=0set YWI=TD5set YCI=P7Icall SetUnitVertexColor(P7I,255,255,255,0)set YVI=1.5*RMaxBJ(133,GetUnitMoveSpeed(P7I))+YWI*100call SetUnitTimeScale(YFI,2)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function TC5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(YEI))call SaveUnitHandle(LY,(S5I),(45),(YFI))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(671),((YVI*0.02)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveInteger(LY,(S5I),(34),(TD5))call SaveGroupHandle(LY,(S5I),(22),(YBI))call SaveGroupHandle(LY,(S5I),(133),(NTI()))set t=nullset g=nullendfunctionfunction TV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))local real S83=RMinBJ(2.5+(NPI*0.02),10)local real CY3=225+40*(NPI*0.02)local unit TF5call SetUnitX(P7I,x)call SetUnitY(P7I,y)set YGI=GetUnitAbilityLevel(P7I,1093751607)set GK=P7Iset YCI=P7Iset YDI=P8Iset YEI=(LoadUnitHandle(LY,(S5I),(19)))set YFI=IG1call SetUnitScale(IG1,S83,S83,S83)if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER thenif GetIssuedOrderId()==851971 thenset TF5=GetOrderTargetUnit()if QLI(P7I,TF5)<425 and IsUnitAlly(TF5,GetOwningPlayer(P7I))==true and(IsUnitType(TF5,UNIT_TYPE_HERO)==true or GetOwningPlayer(TF5)==GetOwningPlayer(P7I))thencall TE5(P7I,(LoadGroupHandle(LY,(S5I),(22))),TF5)endifendifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093818443 thencall TZ5(P7I,P8I,YWI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseset YBI=(LoadGroupHandle(LY,(S5I),(22)))set g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),100+25,Condition(function TH5))call ForGroup(g,function TG5)call NSI(g)set NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==200 thencall TZ5(P7I,P8I,YWI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction TW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993395,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local group g=NTI()set YVI=0set YWI=0set YCI=P7Iset YBI=NTI()set YVI=1.5*RMaxBJ(133,GetUnitMoveSpeed(P7I))set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),100+25,Condition(function TH5))call ForGroup(g,function TG5)call NSI(g)set YEI=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(YEI,1093687350)call SetUnitInvulnerable(P7I,true)call IA1(P7I,1096971630)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753167,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753169,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093753170,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093751607,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093818443,true)call IA1(P7I,1093818443)call SetUnitTimeScale(IG1,2)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(YEI))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveGroupHandle(LY,(S5I),(22),(YBI))set t=nullset g=nullendfunctionfunction TX5 takes nothing returns booleanif GetSpellAbilityId()==1093751607 thencall TW5()endifreturn falseendfunctionfunction P21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function TX5))call Q1I(1093687350)set t=nullendfunctionfunction TY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)call IssueTargetOrder(P7I,"move",P8I)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction TJ5 takes nothing returns nothinglocal unit P7I=GetSummonedUnit()local unit P8I=GetSummoningUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerAddCondition(t,Condition(function TY5))call TriggerRegisterTimerEvent(t,0.2,false)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction TK5 takes nothing returns booleanlocal integer id=GetUnitTypeId(GetSummonedUnit())if id==1865429322 or id==1865429323 or id==1865429324 or id==1865429325 thencall TJ5()endifreturn falseendfunctionfunction P31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function TK5))endfunctionfunction TL5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitX(P7I,GetUnitX(P8I))call SetUnitY(P7I,GetUnitY(P8I))call SetUnitX(I01,GetUnitX(P8I))call SetUnitY(I01,GetUnitY(P8I))endifset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction TM5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenset YXI=GetEventDamageSource()endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction TN5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetSummoningUnit()local unit P8I=GetSummonedUnit()local unit I01local integer TS5local integer TT5local integer TR5if GetUnitTypeId(P8I)==1852862003 or GetUnitTypeId(P8I)==1852862006 or GetUnitTypeId(P8I)==1848652080 thenset t=CreateTrigger()set S5I=GetHandleId(t)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function TL5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))if EA1(P7I,1227899192)thencall UnitAddAbility(I01,1093678153)endifendifif GetUnitAbilityLevel(P7I,1093747254)>0 thenif GetUnitTypeId(P8I)==1852862001 or GetUnitTypeId(P8I)==1852862004 or GetUnitTypeId(P8I)==1848652081 thenset TS5=GetUnitAbilityLevel(P7I,1093684568)if TS5>0 thencall IA1(P8I,1093684568)call SetUnitAbilityLevel(P8I,1093684568,TS5)endifendifif GetUnitTypeId(P8I)==1852862002 or GetUnitTypeId(P8I)==1852862005 or GetUnitTypeId(P8I)==1848652082 thenset TR5=GetUnitAbilityLevel(P7I,1097032808)if TR5>0 thencall IA1(P8I,1097032808)call SetUnitAbilityLevel(P8I,1097032808,TR5)endifendifif GetUnitTypeId(P8I)==1852862003 or GetUnitTypeId(P8I)==1852862006 or GetUnitTypeId(P8I)==1848652080 thenset TT5=GetUnitAbilityLevel(P7I,1093678669)if TT5>0 thencall IA1(P8I,1093678669)call SetUnitAbilityLevel(P8I,1093678669,TT5)endifendifendifset t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction TP5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetSummoningUnit()local unit P8I=GetSummonedUnit()local integer TS5call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function TM5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullendfunctionfunction TQ5 takes nothing returns booleanlocal integer RII=GetUnitTypeId(GetSummonedUnit())call TN5()if P3I(RII)thencall TP5()endifreturn falseendfunctionfunction P41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function TQ5))set t=nullendfunctionfunction TU5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer PCI=(LoadInteger(LY,(S5I),(30)))local unit P8I=NYI(PCI)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I and(GetEventDamage()>40 or IsUnitType(P8I,UNIT_TYPE_STRUCTURE)==true or GetUnitTypeId(P8I)==1970107511 or GetUnitTypeId(P8I)==1700946284)and(LoadBoolean(LY,(GetHandleId(P7I)),(183)))==true thencall SaveBoolean(LY,(GetHandleId(P7I)),(183),(false))call SaveReal(LY,(GetHandleId(P7I)),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(P7I,1093818451)call UnitRemoveAbility(P7I,1093818453)call FlushChildHashtable(LY,(GetHandleId((LoadTriggerHandle(LY,(S5I),(35))))))call S0I((LoadTriggerHandle(LY,(S5I),(35))))call NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall NXI(PCI)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction R05 takes nothing returns booleanlocal trigger tlocal integer S5Ilocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_DEATH thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(183),(false))call SaveReal(LY,(GetHandleId(GetTriggerUnit())),(184),(((TimerGetElapsed(M)))*1.0))call UnitRemoveAbility(GetTriggerUnit(),1093818451)call UnitRemoveAbility(GetTriggerUnit(),1093818453)call FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())elseif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(182)))thenif IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false thenset t=CreateTrigger()set S5I=GetHandleId(t)set P8I=GetTriggerUnit()set P7I=GetAttacker()call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function TU5))call SaveInteger(LY,(S5I),(30),(NKI(P8I)))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveTriggerHandle(LY,(S5I),(35),(GetTriggeringTrigger()))set P8I=nullset P7I=nullset t=nullendifendifreturn falseendfunctionfunction RI5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real QZI=(TimerGetElapsed(M))local integer SUI=GetUnitAbilityLevel(SFI,1093684568)local real PD2=(LoadReal(LY,(GetHandleId(SFI)),(184)))local boolean R15=(LoadBoolean(LY,(GetHandleId(SFI)),(183)))local real Z7O=(LoadReal(LY,(S5I),(411)))if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==SFI thenset Z7O=(TimerGetElapsed(M))call SaveReal(LY,(S5I),(411),((Z7O)*1.0))endifif((TimerGetElapsed(M))>(Z7O+18-2*SUI))and R15==false and GetUnitTypeId(SFI)==1315988077 and IC1(SFI)==false thencall SaveBoolean(LY,(GetHandleId(SFI)),(183),(true))set t=CreateTrigger()set S5I=GetHandleId(t)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function R05))call SaveUnitHandle(LY,(S5I),(182),(SFI))call IA1(SFI,1093818451)call IA1(SFI,1093818453)call SetPlayerAbilityAvailable(GetOwningPlayer(SFI),1093818451,false)elseif R15==false and(GetUnitAbilityLevel(SFI,1093818451)>0 or GetUnitAbilityLevel(SFI,1093818453)>0)thencall UnitRemoveAbility(SFI,1093818451)call UnitRemoveAbility(SFI,1093818453)endifset t=nullset SFI=nullreturn falseendfunctionfunction RO5 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function RI5))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(181),(0))call SaveReal(LY,(S5I),(411),(((TimerGetElapsed(M)))*1.0))set SFI=nullset t=nullendfunctionfunction R25 takes nothing returns booleanif GetLearnedSkill()==1093684568 and GetUnitAbilityLevel(GetTriggerUnit(),1093684568)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall RO5()endifreturn falseendfunctionfunction P51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function R25))set t=nullendfunctionfunction R35 takes nothing returns nothingcall DD1(YYI,GetEnumUnit(),0.75+0.25*GetUnitAbilityLevel(YYI,1093809990))endfunctionfunction R45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real a=(LoadReal(LY,(S5I),(137)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local group glocal real d=QNI(QXI,QYI,QJI,QKI)/25local location llocal integer NPI=GetTriggerEvalCount(t)local real x=QXI+d*NPI*Cos(a)local real y=QYI+d*NPI*Sin(a)call SetUnitX(P8I,PTI(x))call SetUnitY(P8I,PUI(y))if RNI(P8I)==false thencall SetUnitFlyHeight(P8I,325-13*NPI,0)endifif NPI==25 thencall SetUnitX(P8I,PTI(QJI))call SetUnitY(P8I,PUI(QKI))if IsPointInRegion(LN,GetUnitX(P8I),GetUnitY(P8I))==true thenset l=BN1(GetUnitX(P8I),GetUnitY(P8I))call SetUnitX(P8I,PPI(GetLocationX(l)))call SetUnitY(P8I,Q0I(GetLocationY(l)))call RemoveLocation(l)set l=nullendifset GK=P7Iset YYI=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),350,Condition(function CA1))call GroupRemoveUnit(g,P8I)call ForGroup(g,function R35)call NSI(g)call UPI(GetUnitX(P8I),GetUnitY(P8I),150)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(P8I),GetUnitY(P8I)))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)if RNI(P8I)==false thencall SetUnitFlyHeight(P8I,GetUnitDefaultFlyHeight(P8I),0)endifcall SetUnitPathing(P8I,true)endifset t=nullset P7I=nullset P8I=nullset g=nullreturn falseendfunctionfunction R55 takes unit P7I,unit P8I,unit Target2,real R65,real R75,effect FX,effect RU2 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QJI=R65local real QKI=R75local real a=UEI(GetUnitX(P8I),GetUnitY(P8I),R65,R75)*bj_DEGTORADif QNI(GetUnitX(P8I),GetUnitY(P8I),R65,R75)>375 thenset QJI=GetUnitX(P8I)+375*Cos(a)set QKI=GetUnitY(P8I)+375*Sin(a)endifcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveReal(LY,(S5I),(189),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(190),((GetUnitY(P8I))*1.0))call SaveEffectHandle(LY,(S5I),(32),(FX))call SaveEffectHandle(LY,(S5I),(176),(RU2))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function R45))set t=nullendfunctionfunction R85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer MKO=(LoadInteger(LY,(S5I),(12)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local integer R95=(LoadInteger(LY,(S5I),(706)))local real aif GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and BG1(P8I)==false)thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809990,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810008,false)call R55(P7I,P8I,(LoadUnitHandle(LY,(S5I),(711))),QJI,QKI,(LoadEffectHandle(LY,(S5I),(32))),(LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093810008 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))set a=UEI(GetUnitX(P8I),GetUnitY(P8I),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORADif QNI(GetUnitX(P8I),GetUnitY(P8I),GetSpellTargetX(),GetSpellTargetY())>375 thenset QJI=GetUnitX(P8I)+375*Cos(a)set QKI=GetUnitY(P8I)+375*Sin(a)elseset QJI=GetSpellTargetX()set QKI=GetSpellTargetY()endifcall SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",QJI,QKI)))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))call SaveUnitHandle(LY,(S5I),(711),(GetSpellTargetUnit()))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetSpellTargetUnit(),"origin")))endifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SetUnitPathing(P8I,false)if(LoadInteger(LY,(S5I),(707)))==1 thenset R95=R95+3elseset R95=R95-3endifcall SaveInteger(LY,(S5I),(706),(R95))if R95==30 thencall SaveInteger(LY,(S5I),(707),(-1))elseif R95==-30 thencall SaveInteger(LY,(S5I),(707),(1))endifif RNI(P8I)==false thenif NPI<15 thencall SetUnitFlyHeight(P8I,NPI*20,0)elsecall SetUnitFlyHeight(P8I,300+R95,0)endifendifif NPI>(MKO-25)thenif RNI(P8I)==false thencall SetUnitFlyHeight(P8I,300,0)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809990,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810008,false)call R55(P7I,P8I,(LoadUnitHandle(LY,(S5I),(711))),QJI,QKI,(LoadEffectHandle(LY,(S5I),(32))),(LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction RA5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093809990)local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093810226)call SetUnitAbilityLevel(I01,1093810226,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093809990,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810008,true)call UnitAddAbility(P7I,1093810008)call SetUnitPathing(P8I,false)if RNI(P8I)==false thencall IA1(P8I,1097691750)call UnitRemoveAbility(P8I,1097691750)endifcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(711),(P8I))call SaveInteger(LY,(S5I),(12),(R2I((1.25+0.25*SUI)/.02)))call SaveInteger(LY,(S5I),(34),(0))call SaveInteger(LY,(S5I),(706),(0))call SaveInteger(LY,(S5I),(707),(1))call SaveReal(LY,(S5I),(47),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(48),((GetUnitY(P8I))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\AntiGravityTarget.mdx",P8I,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetUnitX(P8I),GetUnitY(P8I))))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function R85))set P7I=nullset P8I=nullendfunctionfunction RB5 takes nothing returns booleanif GetSpellAbilityId()==1093809990 and NNI(GetSpellTargetUnit())==false thencall RA5()endifreturn falseendfunctionfunction P61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RB5))call Q1I(1093687350)call Q1I(1093810226)set t=nullendfunctionfunction RC5 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093809991)if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenif SUI==1 thencall AH1(P8I,1093810007,1,10)elseif SUI==2 thencall AH1(P8I,1093810230,1,10)elseif SUI==3 thencall AH1(P8I,1093810229,1,10)elseif SUI==4 thencall AH1(P8I,1093810231,1,10)endifelseif SUI==1 thencall AH1(P8I,1093810481,1,10)elseif SUI==2 thencall AH1(P8I,1093810266,1,10)elseif SUI==3 thencall AH1(P8I,1093810482,1,10)elseif SUI==4 thencall AH1(P8I,1093810480,1,10)endifendifcall IO1(PF,GetUnitX(P8I),GetUnitY(P8I))endfunctionfunction RD5 takes nothing returns nothinglocal real dif IsUnitInGroup(GetEnumUnit(),YLI)==false thenset d=QLI(GetEnumUnit(),YKI)if d<YMI thenset YMI=dset YJI=GetEnumUnit()endifendifendfunctionfunction RE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local group g=NTI()call GroupAddUnit(PR2,P8I)call RC5(P7I,P8I)set GK=P7Iset YJI=nullset YKI=P8Iset YLI=PR2set YMI=999999call GroupEnumUnitsInRange(g,x,y,440+25,Condition(function CF1))call ForGroup(g,function RD5)call NSI(g)if YJI==null or GetTriggerEvalCount(t)>26 thencall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset P8I=YJIcall SaveUnitHandle(LY,(S5I),(17),(P8I))endifset g=nullset t=nullset P7I=nullset P8I=nullset PR2=nullreturn falseendfunctionfunction RF5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group PR2=NTI()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))call IO1(PF,GetUnitX(P7I),GetUnitY(P7I))call IA1(I01,1093810228)call SetUnitAbilityLevel(I01,1093810228,GetUnitAbilityLevel(P7I,1093809991))call IssueTargetOrder(I01,"chainlightning",P8I)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveGroupHandle(LY,(S5I),(187),(PR2))call TriggerRegisterTimerEvent(t,0.25,true)call TriggerAddCondition(t,Condition(function RE5))set P7I=nullset P8I=nullset t=nullset I01=nullendfunctionfunction RG5 takes nothing returns booleanif GetSpellAbilityId()==1093809991 and NNI(GetSpellTargetUnit())==false thencall RF5()endifreturn falseendfunctionfunction P71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RG5))set t=nullendfunctionfunction RH5 takes nothing returns booleanif IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 thenif GetLearnedSkill()==1093809990 thencall UnitRemoveAbility(GetTriggerUnit(),1093809993)elseif GetLearnedSkill()==1093809991 thencall UnitRemoveAbility(GetTriggerUnit(),1093809995)elseif GetLearnedSkill()==1093810006 thencall UnitRemoveAbility(GetTriggerUnit(),1093809994)endifendifreturn falseendfunctionfunction RZ5 takes integer RV5,integer RW5 returns nothingset YTI[YPI]=RV5set YRI[YPI]=RW5set YPI=YPI+1endfunctionfunction RX5 takes integer id returns integerlocal integer i=0loopexitwhen i==YPIif id==YTI[i]or id==YRI[i]thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction RY5 takes integer id returns nothingset YNI[YSI]=idset YSI=YSI+1endfunctionfunction RJ5 takes integer id returns booleanlocal integer i=0loopexitwhen i==YSIif id==YNI[i]thenreturn trueendifset i=i+1endloopreturn falseendfunctionfunction RK5 takes nothing returns booleanif IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and RJ5(GetSpellAbilityId())==false thencall SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(705),(GetSpellAbilityId()))call SaveInteger(LY,(GetHandleId(GetTriggerUnit())),(712),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())))endifreturn falseendfunctionfunction RL5 takes unit u returns nothingcall UnitRemoveAbility(u,1093743428)call UnitRemoveAbility(u,1093815881)call UnitRemoveAbility(u,1093751126)call UnitRemoveAbility(u,1093751893)call UnitRemoveAbility(u,1093809217)call UnitRemoveAbility(u,1093809218)call UnitRemoveAbility(u,1093750344)call UnitRemoveAbility(u,1093808206)call UnitRemoveAbility(u,1093753394)call UnitRemoveAbility(u,1093753395)call UnitRemoveAbility(u,1093808181)call UnitRemoveAbility(u,1093752405)call UnitRemoveAbility(u,1093683011)call UnitRemoveAbility(u,1093809221)call UnitRemoveAbility(u,1093685844)call UnitRemoveAbility(u,1093751361)call UnitRemoveAbility(u,1093683265)call UnitRemoveAbility(u,1093686081)call UnitRemoveAbility(u,1093743153)call UnitRemoveAbility(u,1093752646)call UnitRemoveAbility(u,1093677652)call UnitRemoveAbility(u,1093751609)call UnitRemoveAbility(u,1093808456)call UnitRemoveAbility(u,1093750094)call UnitRemoveAbility(u,1093678667)call UnitRemoveAbility(u,1093684805)call UnitRemoveAbility(u,1093684560)call UnitRemoveAbility(u,1093815618)endfunctionfunction RM5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer RN5=(LoadInteger(LY,(S5I),(704)))local integer XD4=(LoadInteger(LY,(S5I),(713)))if RN5==(LoadInteger(LY,(GetHandleId(P7I)),(704)))thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEvalCount(t)>(15-XD4)and IC1(P7I)==false thencall UnitRemoveAbility(P7I,RN5)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction RS5 takes unit P7I,integer RN5,real Z7O returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function RM5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(704),(RN5))call SaveInteger(LY,(GetHandleId(P7I)),(704),(-1))call SaveInteger(LY,(S5I),(713),(R2I((TimerGetElapsed(M))-Z7O)))set t=nullendfunctionfunction RT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer RN5=(LoadInteger(LY,(S5I),(704)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093809992)local real Z7O=(LoadReal(LY,(S5I),(411)))if SUI==0 thenset SUI=GetUnitAbilityLevel(P7I,1093817913)endifif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and GetTriggerEventId()!=EVENT_WIDGET_DEATH thenif NPI==0 thencall SaveInteger(LY,(S5I),(34),(1))call DisplayTimedTextToPlayer(GetOwningPlayer(P7I),0,0,10,"|c00ff0303"+GetObjectName(1848659031)+"|r")elsecall RL5(P7I)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),RN5,false)call FlushChildHashtable(LY,(S5I))call S0I(t)call RS5(P7I,RN5,Z7O)endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093809992 or GetSpellAbilityId()==1093817913 thencall RL5(P7I)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),RN5,false)call FlushChildHashtable(LY,(S5I))call S0I(t)call RS5(P7I,RN5,Z7O)elseif GetSpellAbilityId()==RN5 thencall SaveReal(LY,(S5I),(411),(((TimerGetElapsed(M)))*1.0))endifelseif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall RL5(P7I)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),RN5,false)call FlushChildHashtable(LY,(S5I))call S0I(t)call RS5(P7I,RN5,Z7O)endifset t=nullset P7I=nullreturn falseendfunctionfunction RR5 takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer RN5=(LoadInteger(LY,(S5I),(704)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RP5=60*(2+GetUnitAbilityLevel(P7I,1093809992))if GetUnitAbilityLevel(P7I,1093809992)==0 thenset RP5=60*(2+GetUnitAbilityLevel(P7I,1093817913))endifif(LoadInteger(LY,(GetHandleId(P8I)),(3000)))>0 thencall SaveInteger(LY,(GetHandleId(P7I)),(3000),((LoadInteger(LY,(GetHandleId(P8I)),(3000)))))endifif(LoadInteger(LY,(GetHandleId(P8I)),(3001)))>0 thencall SaveInteger(LY,(GetHandleId(P7I)),(3001),((LoadInteger(LY,(GetHandleId(P8I)),(3001)))))endifif(LoadInteger(LY,(GetHandleId(P8I)),(3002)))>0 thencall SaveInteger(LY,(GetHandleId(P7I)),(3002),((LoadInteger(LY,(GetHandleId(P8I)),(3002)))))endifif(LoadInteger(LY,(GetHandleId(P8I)),(710)))>0 thencall SaveInteger(LY,(GetHandleId(P7I)),(710),((LoadInteger(LY,(GetHandleId(P8I)),(710)))))endifcall IO1(SF,GetUnitX(P7I),GetUnitY(P7I))call UYI(GetObjectName(RN5),3.5,P7I,0.024,170,0,255,216)call SaveInteger(LY,(GetHandleId(P7I)),(704),(RN5))call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),RN5,true)call IA1(P7I,RN5)call SetUnitAbilityLevel(P7I,RN5,SUI)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(0))call SaveInteger(LY,(S5I),(704),(RN5))call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,RP5,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,RP5-20,false)call TriggerAddCondition(t,Condition(function RT5))set t=nullset P7I=nullset P8I=nullendfunctionfunction RQ5 takes unit P7I,unit P8I,integer RN5,integer SUI returns nothinglocal trigger t=IJ1(P8I,P7I,1747993666,"RR5",900,false)local integer S5I=GetHandleId(t)call IO1(NF,GetUnitX(P8I),GetUnitY(P8I))call UYI(GetObjectName(RN5),3.75,P8I,0.024,170,0,255,216)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(704),(RN5))call SaveInteger(LY,(S5I),(5),(SUI))set t=nullendfunctionfunction RU5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif RJ5(GetSpellAbilityId())==true thenelsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction P05 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer PI5local integer P15=(LoadInteger(LY,(GetHandleId(P8I)),(705)))if P15!=0 thencall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Nebula.mdx",P8I,"origin"))set PI5=RX5(P15)if PI5!=-1 thenif GetSpellAbilityId()==1093809992 thenset P15=YTI[PI5]elseset P15=YRI[PI5]endifendifcall RQ5(P7I,P8I,P15,(LoadInteger(LY,(GetHandleId(P8I)),(712))))endifset P7I=nullset P8I=nullendfunctionfunction SpellSteal takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local string fx=""if IsPlayerAlly(GetOwningPlayer(P7I),GetLocalPlayer())or P0I(GetLocalPlayer())thenset fx="war3mapImported\\Nebula.mdx"endifcall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget(fx,P8I,"origin")))call TriggerRegisterTimerEvent(t,20,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RU5))set P7I=nullset P8I=nullendfunctionfunction PO5 takes nothing returns booleanif(GetSpellAbilityId()==1093809992 or GetSpellAbilityId()==1093817913)and NNI(GetSpellTargetUnit())==false thencall P05()endifreturn falseendfunctionfunction P25 takes nothing returns nothingcall RY5(1093752648)call RY5(1095656306)call RY5(1093677895)call RY5(1093679411)call RY5(1093743946)call RY5(1093681479)call RY5(1093681733)call RY5(1093751896)call RY5(1093808697)call RY5(1093751369)call RY5(1093747504)call RY5(1093742932)call RY5(1093744986)call RY5(1093815877)call RY5(1093743428)call RY5(1093815881)call RY5(1093751126)call RY5(1093751893)call RY5(1093809217)call RY5(1093809218)call RY5(1093750344)call RY5(1093808206)call RY5(1093753394)call RY5(1093753395)call RY5(1093808181)call RY5(1093752405)call RY5(1093683011)call RY5(1093809221)call RY5(1093685844)call RY5(1093751361)call RY5(1093683265)call RY5(1093686081)call RY5(1093743153)call RY5(1093752646)call RY5(1093677652)call RY5(1093751609)call RY5(1093808456)call RY5(1093750094)call RY5(1093684056)call RY5(1093684055)call RY5(1093681461)call RY5(1093681735)call RY5(1093808471)call RY5(1093808472)call RY5(1093808470)call RY5(1093808473)call RY5(1093748565)call RY5(1093752392)call RY5(1093752391)call RY5(1093815600)call RY5(1093815618)call RY5(1093816114)call RY5(1093816121)call RY5(1093751607)call RY5(1093818443)call RY5(1093685582)call RY5(1093677622)call RY5(1095263841)call RY5(1093679446)call RY5(1093682265)call RY5(1093752642)call RY5(1093684314)call RY5(1093685065)call RY5(1093817677)call RY5(1093750337)call RY5(1093748033)call RY5(1093684819)call RY5(1093747777)call RY5(1093810257)call RY5(1093687121)call RY5(1093751864)call RY5(1093742674)call RY5(1093742926)call RY5(1093682521)call RY5(1093682760)call RY5(1093686859)call RY5(1093686865)call RY5(1093678899)call RY5(1093677898)call RY5(1093678154)call RY5(1093678157)call RY5(1093678158)call RY5(1093809990)call RY5(1093810008)call RY5(1093809991)call RY5(1093809992)call RY5(1093685557)call RY5(1093686347)call RY5(1095328363)call RY5(1093683801)call RY5(1093747011)call RY5(1095331948)call RY5(1095331954)call RY5(1097163124)call RY5(1093684016)call RY5(1093683255)call RY5(1093683254)call RY5(1093682767)call RY5(1093677656)call RY5(1095332727)call RY5(1095332962)call RY5(1093681718)call RY5(1093751349)call RY5(1093808182)call RY5(1093748292)call RY5(1093748303)call RY5(1093748305)call RY5(1093749071)call RY5(1093681720)call RY5(1093752645)call RY5(1093686328)call RY5(1093686327)call RY5(1093677367)call RY5(1093751108)call RY5(1093748304)call RY5(1093683788)call RY5(1094935400)call RY5(1095333995)call RY5(1095331943)call RY5(1093742918)call RY5(1093742917)call RY5(1093686067)call RY5(1093742916)call RY5(1093742919)call RY5(1093742920)call RY5(1093686329)call RY5(1093743959)call RY5(1094936696)call RY5(1093682756)call RY5(1093686341)call RY5(1093751863)call RY5(1093744973)call RY5(1093677647)call RY5(1093679193)call RY5(1093679194)call RY5(1093679408)call RY5(1093679410)call RY5(1093683266)call RY5(1093682227)call RY5(1093682246)call RY5(1093677655)call RY5(1093681995)call RY5(1093684023)call RY5(1093683796)call RY5(1095328865)call RY5(1093809721)call RY5(1093752655)call RY5(1093748055)call RY5(1093750095)call RY5(1093753417)call RY5(1093753416)call RY5(1093753431)call RY5(1093808945)call RY5(1093743191)call RY5(1093743681)call RY5(1093751096)call RY5(1093810265)call RY5(1093810244)call RY5(1093810246)call RY5(1093815857)call RY5(1093817925)call RY5(1093818184)call RY5(1093818185)call RY5(1093814863)call RY5(1093814865)call RY5(1093814864)call RY5(1093814866)call RY5(1093814860)call RY5(1093813848)call RY5(1093815089)call RY5(1093815092)call RY5(1093815095)call RY5(1093815111)call RY5(1093815109)call RY5(1093815112)call RY5(1093815097)call RY5(1093813569)call RY5(1093817416)call RY5(1093817418)call RY5(1093817419)call RY5(1093815369)call RZ5(1093752632,1093752633)call RZ5(1093808454,1093808455)call RZ5(1093678420,1093679176)call RZ5(1093677392,1093679450)call RZ5(1093679413,1093679447)call RZ5(1093684565,1093681458)call RZ5(1093678388,1093677141)call RZ5(1093678647,1093679184)call RZ5(1093681987,1093677658)call RZ5(1093810258,1093810259)call RZ5(1093677128,1093681457)call RZ5(1093677906,1093681494)call RZ5(1093677363,1093681462)call RZ5(1093684820,1093684824)call RZ5(1093810503,1093810504)call RZ5(1093678160,1093747029)call RZ5(1093687864,1093747542)call RZ5(1093683534,1093747031)call RZ5(1093684529,1093747032)call RZ5(1093677903,1093747033)call RZ5(1093684308,1093747539)call RZ5(1093677899,1093747248)call RZ5(1093685045,1093747249)call RZ5(1093678674,1093747252)call RZ5(1093685586,1093747251)call RZ5(1093808473,1093748565)call RZ5(1093677401,1093747034)call RZ5(1093684561,1093747254)call RZ5(1093682764,1093747544)call RZ5(1093743184,1093747766)call RZ5(1093683761,1093747767)call RZ5(1093682996,1093747768)call RZ5(1093677649,1093747769)call RZ5(1093684819,1093747777)call RZ5(1093742673,1093747778)call RZ5(1093681483,1093748313)call RZ5(1093682482,1093750098)call RZ5(1093744975,1093750102)call RZ5(1093682248,1093750594)call RZ5(1093686072,1093751120)call RZ5(1395667000,1395667029)call RZ5(1093747023,1093752150)call RZ5(1093679152,1093752154)call RZ5(1093685067,1093752407)call RZ5(1093682265,1093752642)call RZ5(1093685579,1093808465)call RZ5(1093751861,1093808949)call RZ5(1093684567,1093809987)call RZ5(1093685042,1093810233)call RZ5(1093750341,1093814599)call RZ5(1093684275,1093816643)call RZ5(1093750089,1093816645)call RZ5(1093682514,1093817144)call RZ5(1093812807,1093817429)call RZ5(1093747288,1093817432)call RZ5(1093809992,1093817913)call RZ5(1093752118,1093817912)call RZ5(1093678137,1093818178)call RZ5(1093678405,1093818177)endfunctionfunction P81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PO5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function RK5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function RH5))set t=nullcall P25()endfunctionfunction P35 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif GetUnitAbilityLevel(GetEnumUnit(),1093810003)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093810003)endifif GetUnitAbilityLevel(GetEnumUnit(),1093810001)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093810001)endifif GetUnitAbilityLevel(GetEnumUnit(),1093810002)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093810002)endifif GetUnitAbilityLevel(GetEnumUnit(),1093810004)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093810004)endifendfunctionfunction P45 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif YQI==1 thenif GetUnitAbilityLevel(GetEnumUnit(),1093810003)==0 thencall IA1(GetEnumUnit(),1093810003)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810003,false)endifelseif YQI==2 thenif GetUnitAbilityLevel(GetEnumUnit(),1093810001)==0 thencall UnitRemoveAbility(GetEnumUnit(),1093810003)call IA1(GetEnumUnit(),1093810001)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810001,false)endifelseif YQI==3 thenif GetUnitAbilityLevel(GetEnumUnit(),1093810002)==0 thencall UnitRemoveAbility(GetEnumUnit(),1093810003)call UnitRemoveAbility(GetEnumUnit(),1093810001)call IA1(GetEnumUnit(),1093810002)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810002,false)endifelseif YQI==4 thenif GetUnitAbilityLevel(GetEnumUnit(),1093810004)==0 thencall UnitRemoveAbility(GetEnumUnit(),1093810003)call UnitRemoveAbility(GetEnumUnit(),1093810001)call UnitRemoveAbility(GetEnumUnit(),1093810002)call IA1(GetEnumUnit(),1093810004)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810004,false)endifendifendfunctionfunction P55 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group RG3=(LoadGroupHandle(LY,(S5I),(340)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()if P7I==null or GetUnitTypeId(P7I)!=1160786520 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call ForGroup(RG3,function P35)call NSI(RG3)call NSI(g)return falseendifset GK=P7Iset YQI=GetUnitAbilityLevel(P7I,1093810006)if IC1(P7I)==false thencall GroupEnumUnitsInRange(g,x,y,925,Condition(function CU1))endifcall GroupRemoveGroup(g,RG3)call ForGroup(RG3,function P35)if IC1(P7I)==false thencall ForGroup(g,function P45)endifcall SaveGroupHandle(LY,(S5I),(340),(g))call NSI(RG3)set t=nullset P7I=nullset RG3=nullset g=nullreturn falseendfunctionfunction P65 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer ilocal player pcall TriggerRegisterTimerEvent(t,0.3,true)call TriggerAddCondition(t,Condition(function P55))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(340),(NTI()))set i=0loopexitwhen i>5set p=BO[i]call SetPlayerAbilityAvailable(p,1093810003,false)call SetPlayerAbilityAvailable(p,1093810001,false)call SetPlayerAbilityAvailable(p,1093810002,false)call SetPlayerAbilityAvailable(p,1093810004,false)set p=CO[i]call SetPlayerAbilityAvailable(p,1093810003,false)call SetPlayerAbilityAvailable(p,1093810001,false)call SetPlayerAbilityAvailable(p,1093810002,false)call SetPlayerAbilityAvailable(p,1093810004,false)set i=i+1endloopset t=nullset P7I=nullendfunctionfunction P75 takes nothing returns booleanif GetLearnedSkill()==1093810006 and GetUnitAbilityLevel(GetTriggerUnit(),1093810006)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall P65()endifreturn falseendfunctionfunction P91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function P75))set t=nullendfunctionfunction P85 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call AddUnitAnimationProperties(P7I,"alternate",false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction P95 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function P85))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction PA5 takes nothing returns booleanif(GetSpellAbilityId()==1093678899 or GetSpellAbilityId()==1093677898 or GetSpellAbilityId()==1093678154 or GetSpellAbilityId()==1093678157 or GetSpellAbilityId()==1093678158)and GetUnitTypeId(GetTriggerUnit())==1160786520 thencall P95()endifreturn falseendfunctionfunction PA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PA5))set t=nullendfunctionfunction PB5 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))endfunctionfunction PC5 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1211117651 thencall PB5()endifreturn falseendfunctionfunction SZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function PC5))set t=nullendfunctionfunction PD5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093810518)if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093810519 thencall UnitRemoveAbility(P7I,1093810519)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810519,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810518,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)call DD1(P7I,P8I,0.5+0.5*SUI)call SetUnitX(P7I,GetUnitX(P8I))call SetUnitY(P7I,GetUnitY(P8I))call IssueTargetOrder(P7I,"attack",P8I)call UnitShareVision(P8I,GetOwningPlayer(P7I),false)endifelsecall UnitRemoveAbility(P7I,1093810519)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810519,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810518,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call UnitShareVision(P8I,GetOwningPlayer(P7I),false)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction PE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEvalCount(GetTriggeringTrigger())>30 thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall EO1(P7I)endifset t=nullset P7I=nullreturn falseendfunctionfunction PF5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8Ilocal integer NPI=(LoadInteger(LY,(S5I),(34)))local integer SUI=GetUnitAbilityLevel(P7I,1093810518)if NPI>60 thencall UnitRemoveAbility(P7I,1110459734)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>100 and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false thencall QGI(P7I,GetEventDamage())set P8I=K1[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call EO1(P7I)call FlushChildHashtable(LY,(S5I))call S0I(t)if IC1(P8I)==false thencall UnitShareVision(P8I,GetOwningPlayer(P7I),true)call IA1(P7I,1093810519)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810519,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093810518,false)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function PD5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",P7I,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",P8I,"origin")))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function PE5))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifendifelsecall SaveInteger(LY,(S5I),(34),(NPI+1))endifset t=nullset P7I=nullreturn falseendfunctionfunction PG5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function PF5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\RetaliationShield.mdx",P7I,"chest")))set P7I=nullset t=nullendfunctionfunction PH5 takes nothing returns booleanif GetSpellAbilityId()==1093810518 thencall PG5()endifreturn falseendfunctionfunction Register_Retaliation takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PH5))set t=nullendfunctionfunction PZ5 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedDamage.mdl",GetEnumUnit(),"chest"))call P6I(YUI,GetEnumUnit(),1,(20+10*J0I)/5)endfunctionfunction PV5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer SUI=GetUnitAbilityLevel(P7I,1093814355)local group gif GetUnitAbilityLevel(P7I,1110459984)==0 and GetUnitAbilityLevel(P7I,1110459985)==0 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093814327)call UnitRemoveAbility(P7I,1110459983)call UnitRemoveAbility(P7I,1093814616)call UnitRemoveAbility(P7I,1093814615)call UnitRemoveAbility(P7I,1093814614)call UnitRemoveAbility(P7I,1093814617)elseset GK=P7Iset YUI=P7Iset J0I=SUIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),400+25,Condition(function CA1))call ForGroup(g,function PZ5)call NSI(g)endifset g=nullset t=nullset P7I=nullreturn falseendfunctionfunction PW5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093814355)call UnitAddAbility(I01,1093814325)call SetUnitAbilityLevel(I01,1093814325,SUI)call IssueTargetOrder(I01,"antimagicshell",P7I)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function PV5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\FlameGuard.mdx",P7I,"origin")))if SUI==1 thenelseif SUI==2 thenelseif SUI==3 thenelseif SUI==4 thenendifset P7I=nullset I01=nullset t=nullendfunctionfunction PX5 takes nothing returns booleanif GetSpellAbilityId()==1093814355 thencall PW5()endifreturn falseendfunctionfunction PC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PX5))set t=nullendfunctionfunction PY5 takes unit P7I returns nothingcall UnitRemoveAbility(P7I,1112500344)call UnitRemoveAbility(P7I,1110454344)endfunctionfunction PJ5 takes unit P7I returns nothingcall UnitRemoveAbility(P7I,1093814329)call UnitRemoveAbility(P7I,1110459981)endfunctionfunction PK5 takes unit P7I returns nothingcall UnitRemoveAbility(P7I,1093814856)call UnitRemoveAbility(P7I,1093814855)call UnitRemoveAbility(P7I,1093814858)call UnitRemoveAbility(P7I,1093814857)call UnitRemoveAbility(P7I,1110459980)endfunctionfunction PL5 takes unit P7I returns nothingcall IA1(P7I,1093814329)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814329,false)endfunctionfunction PM5 takes unit P7I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093814320)if SUI==1 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814856,false)call IA1(P7I,1093814856)elseif SUI==2 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814855,false)call IA1(P7I,1093814855)elseif SUI==3 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814858,false)call IA1(P7I,1093814858)elseif SUI==4 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814857,false)call IA1(P7I,1093814857)endifendfunctionfunction PN5 takes unit P7I,unit P8I returns nothinglocal real a=GetRandomReal(0,360)local real x=GetUnitX(P8I)+50*Cos(a*bj_DEGTORAD)local real y=GetUnitY(P8I)+50*Sin(a*bj_DEGTORAD)call SetUnitPosition(P7I,x,y)call SetUnitFacing(P7I,bj_RADTODEG*Atan2(GetUnitY(P8I)-GetUnitY(P7I),GetUnitX(P8I)-GetUnitX(P7I)))call SetUnitAnimation(P7I,"Attack")call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Fire_Blink_2.mdx",P7I,"chest"))call PK5(P7I)if IsUnitType(P8I,UNIT_TYPE_HERO)==true or IsUnitIllusion(P8I)==true thencall PM5(P7I)call UnitRemoveAbility(P7I,1093814854)elsecall IA1(P7I,1093814854)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093814854,false)endifcall IssueTargetOrder(P7I,"attack",P8I)endfunctionfunction PS5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real QXI=(LoadReal(LY,(S5I),(189)))local real QYI=(LoadReal(LY,(S5I),(190)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local unit P8I=nulllocal boolean FW1=falselocal fogmodifier I31=(LoadFogModifierHandle(LY,(S5I),(42)))local integer SUI=GetUnitAbilityLevel(P7I,1093814320)loopexitwhen FirstOfGroup(g)==null or FW1set P8I=FirstOfGroup(g)call GroupRemoveUnit(g,P8I)if IsUnitInGroup(P8I,PR2)and P8I!=null thenset P8I=nullset FW1=falseelseset FW1=trueendifendloopcall SetUnitPathing(P7I,false)call SetUnitInvulnerable(P7I,true)call BF1(P7I)if FW1==false or((LoadInteger(LY,(GetHandleId((P7I))),((4319))))==1)==true thencall SaveInteger(LY,(GetHandleId((P7I))),((4318)),(2))call PJ5(P7I)call UnitRemoveAbility(P7I,1093814854)call PK5(P7I)call BF1(P7I)call PY5(P7I)call UnitAddAbility(P7I,1093814322)call UnitRemoveAbility(P7I,1093814322)call BF1(P7I)if((LoadInteger(LY,(GetHandleId((P7I))),((4319))))==1)==false thencall SetUnitX(P7I,QXI)call SetUnitY(P7I,QYI)endifcall SetUnitVertexColor(P7I,255,255,255,255)call SetUnitPathing(P7I,true)call SetUnitInvulnerable(P7I,false)call SetUnitTimeScale(P7I,1)call NSI(PR2)call NSI(g)call RemoveUnit((LoadUnitHandle(LY,(S5I),(19))))call FogModifierStop(I31)call DestroyFogModifier(I31)call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall GroupAddUnit(PR2,P8I)call PN5(P7I,P8I)endifset t=nullset P7I=nullset P8I=nullset g=nullset PR2=nullreturn falseendfunctionfunction PT5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local fogmodifier I31=CreateFogModifierRadius(GetOwningPlayer(P7I),FOG_OF_WAR_VISIBLE,x,y,600,true,true)local unit I01=CreateUnit(GetOwningPlayer(P7I),1747993911,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093814320)call SetUnitVertexColor(I01,255,255,255,100)call FogModifierStart(I31)call SaveInteger(LY,(GetHandleId((P7I))),((4318)),(1))set GK=P7Icall GroupEnumUnitsInRange(g,x,y,150+100*SUI+25,Condition(function CG1))call BF1(P7I)call PY5(P7I)call UnitAddAbility(P7I,1093814321)call UnitRemoveAbility(P7I,1093814321)call SetUnitVertexColor(P7I,255,255,255,125)call SetUnitPathing(P7I,false)call SetUnitInvulnerable(P7I,true)call SetUnitTimeScale(P7I,3)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function PS5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(189),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(190),((GetUnitY(P7I))*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveFogModifierHandle(LY,(S5I),(42),(I31))call SaveUnitHandle(LY,(S5I),(19),(I01))call PL5(P7I)call TriggerEvaluate(t)set P7I=nullset t=nullset I31=nullset I01=nullset g=nullendfunctionfunction PR5 takes nothing returns booleanif GetSpellAbilityId()==1093814320 thencall PT5()endifreturn falseendfunctionfunction PP5 takes nothing returns booleanlocal unit IYO=GetSummonedUnit()if IsUnitIllusion(IYO)==true and GetUnitTypeId(IYO)==1311788360 thencall PJ5(IYO)call UnitRemoveAbility(IYO,1093814854)call PK5(IYO)call UnitAddAbility(IYO,1093814322)call UnitRemoveAbility(IYO,1093814322)endifset IYO=nullreturn falseendfunctionfunction PD1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function PR5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function PP5))set t=nullendfunctionfunction PQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093814323)local integer MKO=1local real PAIif SUI==1 thenset MKO=1set PAI=80endifif SUI==2 thenset MKO=2set PAI=60endifif SUI==3 thenset MKO=2set PAI=120endifif SUI==4 thenset MKO=3set PAI=100endifif GetTriggerEvalCount(t)==MKO thencall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall P6I(P7I,P8I,1,PAI)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction PU5 takes nothing returns nothinglocal unit P7I=GKlocal unit P8I=HKlocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093814323)call UnitAddAbility(I01,1093814324)call SetUnitAbilityLevel(I01,1093814324,SUI)call IssueTargetOrder(I01,"ensnare",P8I)call TriggerAddCondition(t,Condition(function PQ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,0,false)call TriggerRegisterTimerEvent(t,1,true)set I01=nullset P7I=nullset P8I=nullendfunctionfunction Q05 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local unit u1=nulllocal unit u2=nulllocal unit u3=nulllocal integer VB2=0local unit ulocal trigger tset GK=P7Icall GroupEnumUnitsInRange(g,x,y,425,Condition(function CF1))loopexitwhen FirstOfGroup(g)==null or VB2==2set u=GroupPickRandomUnit(g)if u!=null thenif VB2==0 thenset u1=uelseif VB2==1 thenset u2=uelseif VB2==2 thenset u3=uendifset VB2=VB2+1call GroupRemoveUnit(g,u)endifendloopcall NSI(g)if u1!=null thencall IJ1(P7I,u1,1747993904,"PU5",9000,false)endifif u2!=null thencall IJ1(P7I,u2,1747993904,"PU5",9000,false)endifif u3!=null thenendifset g=nullset P7I=nullset u=nullset u1=nullset u2=nullset u3=nullendfunctionfunction QI5 takes nothing returns booleanif GetSpellAbilityId()==1093814323 thencall Q05()endifreturn falseendfunctionfunction PB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QI5))set t=nullendfunctionfunction Q15 takes nothing returns booleanlocal unit P7I=(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))local integer S5I=GetHandleId(P7I)local integer i=0local real SOI=(TimerGetElapsed(M))local integer QO5=(LoadInteger(LY,(S5I),(749)))local real xlocal real ylocal real tloopexitwhen i>QO5set t=(LoadReal(LY,(S5I),(10000+i)))if t+10>SOI thenset x=(LoadReal(LY,(S5I),(11000+i)))set y=(LoadReal(LY,(S5I),(12000+i)))endifset i=i+1endloopset P7I=nullreturn falseendfunctionfunction Q25 takes integer S5I,integer QO5,real IV1,real IW1 returns booleanlocal real xlocal real ylocal real tlocal integer i=0local real SOI=(TimerGetElapsed(M))loopexitwhen i>QO5set t=(LoadReal(LY,(S5I),(10000+i)))if t+10>SOI thenset x=(LoadReal(LY,(S5I),(11000+i)))set y=(LoadReal(LY,(S5I),(12000+i)))if QNI(x,y,IV1,IW1)<75 thenreturn trueendifendifset i=i+1endloopreturn falseendfunctionfunction Q35 takes integer S5I,integer QO5 returns integerlocal real tlocal integer i=0local real SOI=(TimerGetElapsed(M))loopexitwhen i>QO5set t=(LoadReal(LY,(S5I),(10000+i)))if t+10<SOI thenreturn iendifset i=i+1endloopreturn-1endfunctionfunction Q45 takes unit P7I,integer Q55,real x,real y returns nothinglocal integer S5I=GetHandleId(P7I)local integer QO5=(LoadInteger(LY,(S5I),(749)))local integer Q65if Q25(S5I,QO5,x,y)thenreturnendifset Q65=Q35(S5I,QO5)if Q65==-1 thenset Q65=QO5set QO5=QO5+1call SaveInteger(LY,(S5I),(749),(QO5))endifcall SaveInteger(LY,(S5I),(13000),(Q55))call SaveReal(LY,(S5I),(10000),(((TimerGetElapsed(M)))*1.0))call SaveReal(LY,(S5I),(11000),((x)*1.0))call SaveReal(LY,(S5I),(11000),((y)*1.0))endfunctionfunction Q75 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function Q15))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction Q85 takes nothing returns nothingcall P6I(J1I,GetEnumUnit(),1,50+JII*50)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",GetEnumUnit(),"origin"))endfunctionfunction Q95 takes unit P7I,unit DX3,real x,real y returns nothinglocal group gcall KillUnit(DX3)call U7I("war3mapImported\\Firaga_2.mdx",x,y,2)set g=NTI()set GK=P7Iset J1I=P7Iset JII=GetUnitAbilityLevel(P7I,1093814859)call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function CA1))call UnitRemoveAbility(P7I,1093678162)call ForGroup(g,function Q85)call IA1(P7I,1093678162)call NSI(g)set g=nullendfunctionfunction QA5 takes unit P7I,unit QB5 returns nothinglocal integer S5I=GetHandleId(P7I)local integer QC5=(LoadInteger(LY,(S5I),(746)))local unit QD5local integer i=1local integer xloopexitwhen i>QC5set QD5=(LoadUnitHandle(LY,(S5I),(1450+i)))if QD5==QB5 thenset QC5=QC5-1call SaveUnitHandle(LY,(S5I),(1450+i),((LoadUnitHandle(LY,(S5I),(1450+i+1)))))call SaveInteger(LY,(S5I),(746),(QC5))set x=i+1loopexitwhen x>QC5call SaveUnitHandle(LY,(S5I),(1450+x),((LoadUnitHandle(LY,(S5I),(1450+x+1)))))set x=x+1endloopendifset i=i+1endloopset QD5=nullendfunctionfunction QE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit DX3=(LoadUnitHandle(LY,(S5I),(19)))local real IO3=GetUnitX(DX3)local real I23=GetUnitY(DX3)local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real a=UEI(IO3,I23,QJI,QKI)*bj_DEGTORADlocal real IV1local real IW1local real d=QNI(IO3,I23,QJI,QKI)local real JC3=GetUnitMoveSpeed(P7I)*2.5*0.02local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall QA5(P7I,DX3)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif d<2 thencall SetUnitAnimationByIndex(DX3,1)elseif d<JC3 thenset IV1=QJIset IW1=QKIelseset IV1=IO3+JC3*Cos(a)set IW1=I23+JC3*Sin(a)endifcall SetUnitX(DX3,IV1)call SetUnitY(DX3,IW1)endifset t=nullset P7I=nullset DX3=nullreturn falseendfunctionfunction QF5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORADlocal integer S5I=GetHandleId(P7I)local integer QC5=(LoadInteger(LY,(S5I),(746)))local integer SUI=GetUnitAbilityLevel(P7I,1093814859)local unit QD5=(LoadUnitHandle(LY,(S5I),(1450+1)))local unit QG5=CreateUnit(GetOwningPlayer(P7I),1747993912,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)local trigger tlocal integer i=1set QC5=QC5+1call SaveUnitHandle(LY,(S5I),(1450+QC5),(QG5))call SaveInteger(LY,(S5I),(746),(QC5))set t=CreateTrigger()set S5I=GetHandleId(t)call SetUnitVertexColor(QG5,255,255,255,75)call SetUnitTimeScale(QG5,2)call SetUnitAnimationByIndex(QG5,0)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function QE5))call TriggerRegisterDeathEvent(t,QG5)call UnitApplyTimedLife(QG5,1112820806,45)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",QG5,"hand right alternate")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",QG5,"hand left alternate")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",QG5,"origin")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(QG5))call SaveReal(LY,(S5I),(47),((GetSpellTargetX())*1.0))call SaveReal(LY,(S5I),(48),((GetSpellTargetY())*1.0))set P7I=nullset t=nullset QD5=nullset QG5=nullendfunctionfunction QH5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(747)))if JGO>0 thencall QF5()call UnitRemoveAbility(P7I,J5I[JGO])set JGO=JGO-1call SaveInteger(LY,(GetHandleId(P7I)),(747),(JGO))call IA1(P7I,J5I[JGO])elsecall PZI(GetOwningPlayer(GetTriggerUnit()),"No more charges")endifset P7I=nullendfunctionfunction QZ5 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1747993912endfunctionfunction QV5 takes nothing returns nothinglocal real QWI=QNI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),JOI,J2I)if QWI>J3I and IC1(GetEnumUnit())==false thenset J4I=GetEnumUnit()set J3I=QWIendifendfunctionfunction QW5 takes unit P7I,real x,real y returns unitlocal group g=NTI()set J4I=nullset J3I=-1set JOI=xset J2I=ycall GroupEnumUnitsOfPlayer(g,GetOwningPlayer(P7I),Condition(function QZ5))call ForGroup(g,function QV5)call NSI(g)set g=nullreturn J4Iendfunctionfunction FireRemnant_FindTargetClosest takes nothing returns nothinglocal real QWI=QNI(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),JOI,J2I)if QWI<J3I and IC1(GetEnumUnit())==false thenset J4I=GetEnumUnit()set J3I=QWIendifendfunctionfunction QX5 takes unit u1,unit u2 returns reallocal real IT3=QLI(u1,u2)local real Q4I=IT3/1300.0if Q4I>0.4 thenreturn IT3/0.4endifreturn 1300.0endfunctionfunction QY5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real EN4=(LoadReal(LY,(S5I),(47)))local real ES4=(LoadReal(LY,(S5I),(48)))local unit DX3=(LoadUnitHandle(LY,(S5I),(19)))local real IO3=GetUnitX(P7I)local real I23=GetUnitY(P7I)local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real alocal real IV1local real IW1local real dlocal real IF1=(LoadReal(LY,(S5I),(44)))local real JC3=IF1*0.02local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))if DX3!=null thenset QJI=GetUnitX(DX3)set QKI=GetUnitY(DX3)call SaveReal(LY,(S5I),(6),((QJI)*1.0))call SaveReal(LY,(S5I),(7),((QKI)*1.0))endifset a=UEI(IO3,I23,QJI,QKI)*bj_DEGTORADset d=QNI(IO3,I23,QJI,QKI)if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall SaveInteger(LY,(GetHandleId((P7I))),((4319)),(2))call SetUnitVertexColor(P7I,255,255,255,255)call SetUnitTimeScale(P7I,1)call SetUnitAnimationByIndex(P7I,0)call SetUnitPathing(P7I,true)call SetUnitInvulnerable(P7I,false)call UnitRemoveAbility(P7I,1093678162)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif d<JC3 thencall SetUnitX(P7I,QJI)call SetUnitY(P7I,QKI)call Q95(P7I,DX3,QJI,QKI)set DX3=QW5(P7I,EN4,ES4)if DX3==null thencall SaveInteger(LY,(GetHandleId((P7I))),((4319)),(2))call UPI(QJI,QKI,100)call SetUnitVertexColor(P7I,255,255,255,255)call SetUnitTimeScale(P7I,1)call SetUnitAnimationByIndex(P7I,1)call SetUnitPathing(P7I,true)call SetUnitInvulnerable(P7I,false)call UnitRemoveAbility(P7I,1093678162)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SaveInteger(LY,(S5I),(34),(NPI+1))call SaveUnitHandle(LY,(S5I),(19),(DX3))call SaveReal(LY,(S5I),(44),((QX5(P7I,DX3))*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(DX3))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(DX3))*1.0))endifelsecall SetUnitAnimationByIndex(P7I,0)call SetUnitPathing(P7I,false)set IV1=IO3+JC3*Cos(a)set IW1=I23+JC3*Sin(a)call SetUnitX(P7I,IV1)call SetUnitY(P7I,IW1)call SetUnitFacing(P7I,a*bj_RADTODEG)call UPI(IV1,IW1,100)endifcall Q45(P7I,NPI,GetUnitX(P7I),GetUnitY(P7I))set t=nullset P7I=nullset DX3=nullreturn falseendfunctionfunction QJ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+150)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction QK5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger tlocal integer S5I=GetHandleId(P7I)local integer QC5=(LoadInteger(LY,(S5I),(746)))local unit DX3if QC5>0 and((LoadInteger(LY,(GetHandleId((P7I))),((4319))))==1)==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call SetUnitVertexColor(P7I,255,0,0,75)call SetUnitTimeScale(P7I,2)call SetUnitAnimationByIndex(P7I,0)call SetUnitPathing(P7I,false)call SetUnitInvulnerable(P7I,true)call IA1(P7I,1093678162)call SaveInteger(LY,(GetHandleId((P7I))),((4319)),(1))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function QY5))call TriggerRegisterDeathEvent(t,P7I)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",P7I,"hand right alternate")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",P7I,"hand left alternate")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",P7I,"origin")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(47),((GetSpellTargetX())*1.0))call SaveReal(LY,(S5I),(48),((GetSpellTargetY())*1.0))set DX3=QW5(P7I,GetSpellTargetX(),GetSpellTargetY())call SaveUnitHandle(LY,(S5I),(19),(DX3))call SaveReal(LY,(S5I),(44),((QX5(P7I,DX3))*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(DX3))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(DX3))*1.0))call SaveInteger(LY,(S5I),(34),(1))elseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.0,false)call TriggerAddCondition(t,Condition(function QJ5))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset t=nullset P7I=nullset DX3=nullendfunctionfunction QL5 takes nothing returns booleanif GetSpellAbilityId()==J5I[0]or GetSpellAbilityId()==J5I[1]or GetSpellAbilityId()==J5I[2]or GetSpellAbilityId()==J5I[3]thencall QH5()elseif GetSpellAbilityId()==1093814860 thencall QK5()endifreturn falseendfunctionfunction QM5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(747)))local integer NPI=(LoadInteger(LY,(S5I),(34)))if JGO<3 thenset NPI=NPI-1call SaveInteger(LY,(S5I),(34),(NPI))if NPI==0 thencall UnitRemoveAbility(P7I,J5I[JGO])set NPI=35call SaveInteger(LY,(S5I),(34),(NPI))set JGO=JGO+1call SaveInteger(LY,(GetHandleId(P7I)),(747),(JGO))call IA1(P7I,J5I[JGO])endifendifset t=nullset P7I=nullreturn falseendfunctionfunction QN5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveInteger(LY,(GetHandleId(P7I)),(747),(3))call IA1(P7I,J5I[3])call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function QM5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(S5I),(34),(30))set P7I=nullset t=nullendfunctionfunction QS5 takes nothing returns booleanif GetLearnedSkill()==1093814859 and IsUnitIllusion(GetTriggerUnit())==false thencall IA1(GetTriggerUnit(),1093814860)call SetUnitAbilityLevel(GetTriggerUnit(),1093814860,GetUnitAbilityLevel(GetTriggerUnit(),1093814859))if GetUnitAbilityLevel(GetTriggerUnit(),1093814859)==1 thencall QN5()call Q75()endifendifreturn falseendfunctionfunction PE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QL5))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function QS5))set t=nullset J5I[0]=1093814863set J5I[1]=1093814865set J5I[2]=1093814864set J5I[3]=1093814866endfunctionfunction QT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamage()>2 and J6I thenset J6I=falsecall P6I(GetEventDamageSource(),P8I,3,GetEventDamage()*0.25)set J6I=trueendifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction QR5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093812536)set J6I=truecall UnitAddAbility(I01,1093812535)call SetUnitAbilityLevel(I01,1093812535,SUI)call IssueTargetOrder(I01,"soulburn",P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,2+SUI,false)call TriggerAddCondition(t,Condition(function QT5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset t=nullendfunctionfunction QP5 takes nothing returns booleanif GetSpellAbilityId()==1093812536 thencall QR5()endifreturn falseendfunctionfunction Register_ArcaneSeal takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function QP5))set t=nullendfunctionfunction QQ5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real a=(LoadReal(LY,(S5I),(137)))local real d=(LoadReal(LY,(S5I),(138)))local real x=PTI(GetUnitX(P8I)+d/10*Cos(a))local real y=PUI(GetUnitY(P8I)+d/10*Sin(a))if GetTriggerEvalCount(t)==11 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall DestroyEffect(AddSpecialEffect("war3mapImported\\ThrustMovement.mdx",x,y))call UPI(x,y,150)call SetUnitX(P8I,x)call SetUnitY(P8I,y)endifset P8I=nullset t=nullreturn falseendfunctionfunction QU5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093812537)local real alocal real xlocal real ylocal real dlocal integer i=-1local boolean K3O=falseif P7I==P8I thenset a=GetUnitFacing(P7I)*bj_DEGTORADelseset a=UDI(P7I,P8I)*bj_DEGTORADendifloopexitwhen K3O or i==23set i=i+1set x=PTI(GetUnitX(P8I)+(350-i*25)*Cos(a))set y=PUI(GetUnitY(P8I)+(350-i*25)*Sin(a))if(IsPointInRegion(LN,((x)*1.0),((y)*1.0)))==false thenset K3O=trueendifendloopset d=QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function QQ5))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(138),((d)*1.0))if IsUnitAlly(P7I,GetOwningPlayer(P8I))==true thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+50+50*SUI)elsecall P6I(P7I,P8I,3,50+50*SUI)endifset P7I=nullset P8I=nullset t=nullendfunctionfunction UI5 takes nothing returns booleanif GetSpellAbilityId()==1093812537 thencall QU5()endifreturn falseendfunctionfunction Register_Thrust takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UI5))set t=nullendfunctionfunction U15 takes nothing returns nothingcall IssueTargetOrder(J7I,"ensnare",GetEnumUnit())call P6I(GetTriggerUnit(),GetEnumUnit(),1,60*J8I)endfunctionfunction UO5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g1=NTI()local group g2=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093812534)local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)set J8I=SUIset J7I=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call UnitAddAbility(J7I,1093812549)call SetUnitAbilityLevel(J7I,1093812549,SUI)call GroupEnumUnitsInRange(g1,x,y,425,Condition(function C51))call GroupEnumUnitsInRange(g2,x,y,825,Condition(function C51))call GroupRemoveGroup(g1,g2)call ForGroup(g2,function U15)call NSI(g1)call NSI(g2)call DestroyEffect(AddSpecialEffect("war3mapImported\\ConjureForceAoE.mdx",x,y))set P7I=nullset g1=nullset g2=nullendfunctionfunction U25 takes nothing returns booleanif GetSpellAbilityId()==1093812534 thencall UO5()endifreturn falseendfunctionfunction Register_ConjureForce takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U25))set t=nullendfunctionfunction U35 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),JAI)==false thencall GroupAddUnit(JAI,GetEnumUnit())call P6I(J9I,GetEnumUnit(),3,JBI)endifendfunctionfunction U45 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group g=(LoadGroupHandle(LY,(S5I),(22)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real RM2=(LoadReal(LY,(S5I),(13)))local real PAI=(LoadReal(LY,(S5I),(20)))local group H03local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real xlocal real yif GetTriggerEvalCount(t)>67 thencall NSI(g)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(IG1)elseset x=GetUnitX(IG1)set y=GetUnitY(IG1)set H03=NTI()set JAI=gset GK=IG1set J9I=P7Iset JBI=PAIcall GroupEnumUnitsInRange(H03,x,y,225,Condition(function CH1))call ForGroup(H03,function U35)call NSI(H03)call SetUnitX(IG1,PTI(x+15*Cos(RM2*bj_DEGTORAD)))call SetUnitY(IG1,PUI(y+15*Sin(RM2*bj_DEGTORAD)))endifset t=nullset g=nullset H03=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction U55 takes unit P7I,real PAI,real x,real y returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local group g=NTI()local real x1=GetUnitX(P7I)local real y1=GetUnitY(P7I)local real x2=xlocal real y2=ylocal real RM2=UEI(x1,y1,x2,y2)local integer SUI=GetUnitAbilityLevel(P7I,1093812545)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993673,x1,y1,RM2)call SetUnitScale(IG1,1.5,1.5,1.5)call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(22),(g))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(20),((PAI)*1.0))call TriggerRegisterTimerEvent(t,0.015,true)call TriggerAddCondition(t,Condition(function U45))set t=nullset IG1=nullset g=nullendfunctionfunction U65 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local boolean PK2=(LoadBoolean(LY,(S5I),(95)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812546,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812545,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif PK2==false and GetEventDamage()>2 and GetEventDamage()<3000 and IsUnitIllusion(P8I)==false thencall SaveReal(LY,(S5I),(20),(((LoadReal(LY,(S5I),(20)))+GetEventDamage())*1.0))call QGI(P8I,GetEventDamage())endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST thenif GetSpellAbilityId()==1093812545 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call SaveBoolean(LY,(S5I),(95),(true))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093812546 thencall U55(P7I,(LoadReal(LY,(S5I),(20))),GetSpellTargetX(),GetSpellTargetY())call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812546,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812545,true)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812546,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812545,true)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction U75 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P7I,1093812546)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812546,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812545,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,20,false)call TriggerAddCondition(t,Condition(function U65))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveBoolean(LY,(S5I),(95),(false))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\WispShellBlue_2.mdx",P7I,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\DivineWrathTarget.mdx",P8I,"origin")))set P7I=nullset P8I=nullset t=nullendfunctionfunction U85 takes nothing returns booleanif GetSpellAbilityId()==1093812545 thencall U75()endifreturn falseendfunctionfunction Register_DivineWrath takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U85))set t=nullendfunctionfunction U95 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or GetSpellAbilityId()==1093812804 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812803,true)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812804,false)call UnitRemoveAbility(P7I,1097167980)call UnitRemoveAbility(P7I,1093812787)call UnitRemoveAbility(P7I,1093812784)call UnitRemoveAbility(P7I,1093812785)call UnitRemoveAbility(P7I,1093812786)call UnitRemoveAbility(P7I,1110459954)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction UA5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093812803)call TriggerRegisterTimerEvent(t,5,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function U95))call SaveUnitHandle(LY,(S5I),(2),(P7I))call UnitAddAbility(P7I,1093812804)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812803,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812804,true)call UnitAddAbility(P7I,1097167980)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1097167980,false)if SUI==1 thencall UnitAddAbility(P7I,1093812787)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812787,false)elseif SUI==2 thencall UnitAddAbility(P7I,1093812784)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812784,false)elseif SUI==3 thencall UnitAddAbility(P7I,1093812785)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812785,false)elseif SUI==4 thencall UnitAddAbility(P7I,1093812786)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093812786,false)endifset t=nullset P7I=nullendfunctionfunction UB5 takes nothing returns booleanif GetSpellAbilityId()==1093812803 thencall UA5()endifreturn falseendfunctionfunction Register_Wraith takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UB5))set t=nullendfunctionfunction UC5 takes unit P7I,unit VS5,unit P8I,integer SUI returns nothingcall GroupAddUnit(JCI,P8I)call DD1(P7I,P8I,1.25+0.25*SUI)call P6I(P7I,P8I,1,40*SUI)call KillUnit(VS5)endfunctionfunction UD5 takes nothing returns booleanif(IsUnitEnemy(GK,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IC1(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CI1(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GK))==true or BU1(GetFilterUnit())==false)thenreturn IsUnitInGroup(GetFilterUnit(),JCI)==falseendifreturn falseendfunctionfunction UE5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local group glocal integer i=1local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real a=(LoadReal(LY,(S5I),(137)))local unit VS5local unit P8Ilocal real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))set JCI=PR2set x=PTI(x+12*Cos(a))set y=PUI(y+12*Sin(a))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))if GetTriggerEvalCount(t)>39 thenloopexitwhen i>3call KillUnit((LoadUnitHandle(LY,(S5I),(393+i-1))))set i=i+1endloopcall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,275,Condition(function UD5))loopexitwhen i>3if(LoadBoolean(LY,(S5I),(511+i-1)))==false thenset VS5=(LoadUnitHandle(LY,(S5I),(393+i-1)))set x=(LoadReal(LY,(S5I),(549+i-1)))set y=(LoadReal(LY,(S5I),(567+i-1)))set x=PTI(x+12*Cos(a))set y=PUI(y+12*Sin(a))call SaveReal(LY,(S5I),(549+i-1),((x)*1.0))call SaveReal(LY,(S5I),(567+i-1),((y)*1.0))call SetUnitX(VS5,x)call SetUnitY(VS5,y)set P8I=GroupPickRandomUnit(g)if P8I!=null thencall GroupRemoveUnit(g,P8I)call SaveInteger(LY,(GetHandleId((P8I))),((4314)),(1))call SaveBoolean(LY,(S5I),(511+i-1),(true))call UC5(P7I,VS5,P8I,GetUnitAbilityLevel(P7I,1093812788))endifendifset i=i+1endloopcall NSI(g)set g=nullset VS5=nullset P8I=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction UF5 takes nothing returns nothinglocal real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=UEI(x,y,QJI,QKI)*bj_DEGTORADlocal real blocal unit I01local real IV1=PTI(x+500*Cos(a))local real IW1=PUI(y+500*Sin(a))local integer i=0local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real DJ1local integer SUI=GetUnitAbilityLevel(P7I,1093812788)local integer RII=1747993678set i=i+1set b=a*bj_RADTODEG+90if b>360 thenset b=b-360endifset b=b*bj_DEGTORADset I01=CreateUnit(GetOwningPlayer(P7I),RII,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)call SaveUnitHandle(LY,(S5I),(393+i-1),(I01))call SaveBoolean(LY,(S5I),(511+i-1),(false))call SaveReal(LY,(S5I),(549+i-1),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(567+i-1),((GetUnitY(I01))*1.0))set i=i+1set b=a*bj_RADTODEG-90if b<0 thenset b=360+bendifset b=b*bj_DEGTORADset I01=CreateUnit(GetOwningPlayer(P7I),RII,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)call SaveUnitHandle(LY,(S5I),(393+i-1),(I01))call SaveBoolean(LY,(S5I),(511+i-1),(false))call SaveReal(LY,(S5I),(549+i-1),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(567+i-1),((GetUnitY(I01))*1.0))set i=i+1set I01=CreateUnit(GetOwningPlayer(P7I),RII,x+100*Cos(a),y+100*Sin(a),a*bj_RADTODEG)call SaveUnitHandle(LY,(S5I),(393+i-1),(I01))call SaveBoolean(LY,(S5I),(511+i-1),(false))call SaveReal(LY,(S5I),(549+i-1),((GetUnitX(I01))*1.0))call SaveReal(LY,(S5I),(567+i-1),((GetUnitY(I01))*1.0))call TriggerRegisterTimerEvent(t,0.015,true)call TriggerAddCondition(t,Condition(function UE5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(47),((IV1)*1.0))call SaveReal(LY,(S5I),(48),((IW1)*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))set P7I=nullset I01=nullset t=nullendfunctionfunction UG5 takes nothing returns booleanif GetSpellAbilityId()==1093812788 thencall UF5()endifreturn falseendfunctionfunction Q31 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UG5))set t=nullendfunctionfunction UH5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=GetTriggerEvalCount(t)local integer SUI=GetUnitAbilityLevel(P7I,1093812789)if NPI==6 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitShareVision(P8I,GetOwningPlayer(P7I),false)endifcall P6I(P7I,P8I,1,20+10*SUI)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction UZ5 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function UH5))call SaveUnitHandle(LY,(S5I),(2),(GetTriggerUnit()))call SaveUnitHandle(LY,(S5I),(17),(GetEnumUnit()))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl",GetEnumUnit(),"overhead")))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetEnumUnit(),"origin"))call UnitShareVision(GetEnumUnit(),GetOwningPlayer(GetTriggerUnit()),true)set t=nullendfunctionfunction UV5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093812791)call IssueImmediateOrderById(I01,852625)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetUnitX(P7I),GetUnitY(P7I)))call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),625,Condition(function C51))call ForGroup(g,function UZ5)call NSI(g)set g=nullset P7I=nullset I01=nullendfunctionfunction UW5 takes nothing returns booleanif GetSpellAbilityId()==1093812789 thencall UV5()endifreturn falseendfunctionfunction Register_Miasma takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UW5))set t=nullendfunctionfunction GetTotalMinutes takes nothing returns integerreturn R2I((TimerGetElapsed(M))/60)endfunctionfunction UX5 takes unit P7I,integer ZO3 returns nothinglocal integer JD3=GetHeroAgi(P7I,false)local integer JE3=GetHeroStr(P7I,false)local integer UY5=GetHeroInt(P7I,false)call SetHeroAgi(P7I,JD3-ZO3,true)call SetHeroStr(P7I,JE3-ZO3,true)call SetHeroInt(P7I,UY5-ZO3,true)endfunctionfunction UJ5 takes unit P7I,integer ZO3 returns nothinglocal integer JD3=GetHeroAgi(P7I,false)local integer JE3=GetHeroStr(P7I,false)local integer UY5=GetHeroInt(P7I,false)call SetHeroAgi(P7I,JD3+ZO3,true)call SetHeroStr(P7I,JE3+ZO3,true)call SetHeroInt(P7I,UY5+ZO3,true)endfunctionfunction UK5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer UL5=(LoadInteger(LY,(S5I),(744)))local integer SUI=GetUnitAbilityLevel(P7I,1093814066)local integer BX1=(R2I((TimerGetElapsed(M))/60))local real HJ3=SUI+1+(0.1+0.1*SUI)*BX1local integer UM5=3+3*SUI+R2I((0.1+0.1*SUI)*BX1)if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093814066 thenif P8I!=null and P8I!=GetSpellTargetUnit()thencall UnitRemoveAbility(P8I,1093814607)call UX5(P8I,UL5)call UX5(P7I,UL5)call SaveInteger(LY,(S5I),(744),(0))endifset P8I=GetSpellTargetUnit()call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093814607)call U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P7I,"chest",1.9)call U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P8I,"chest",1.9)return falseelsereturn falseendifendifif P8I==null thenelseif IC1(P8I)or IC1(P7I)or QLI(P7I,P8I)>1400 thencall UX5(P7I,UL5)call UX5(P8I,UL5)call SaveInteger(LY,(S5I),(744),(0))call UnitRemoveAbility(P7I,1093814607)call UnitRemoveAbility(P8I,1093814607)elseif GetUnitAbilityLevel(P7I,1093814607)==0 thencall IA1(P7I,1093814607)endifif GetUnitAbilityLevel(P8I,1093814607)==0 thencall IA1(P8I,1093814607)endifif UL5!=UM5 thencall UJ5(P7I,UM5-UL5)call UJ5(P8I,UM5-UL5)call SaveInteger(LY,(S5I),(744),(UM5))endifcall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+HJ3)call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+HJ3)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction UN5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UK5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(null))call SaveInteger(LY,(S5I),(744),(0))set t=nullset P7I=nullendfunctionfunction US5 takes nothing returns booleanif GetLearnedSkill()==1093814066 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093814066)==1 thencall UN5()endifreturn falseendfunctionfunction Register_Brotherhood takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function US5))set t=nullendfunctionfunction UT5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or(GetEventDamage()>30 and GetEventDamageSource()!=GetTriggerUnit()and T2I(GetOwningPlayer(GetEventDamageSource())))thenif GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall QGI(P7I,GetEventDamage())endifcall UnitRemoveAbility(P7I,1093814604)call UnitRemoveAbility(P7I,1093814605)call UnitRemoveAbility(P7I,1093812825)call UnitRemoveAbility(P7I,1093814606)call UnitRemoveAbility(P7I,1110459956)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullreturn falseendfunctionfunction UR5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093812822)local real dlocal integer idlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)if SUI==1 thenset d=4set id=1093814604elseif SUI==2 thenset d=5set id=1093814605elseif SUI==3 thenset d=6set id=1093812825elseif SUI==4 thenset d=7set id=1093814606endifcall IA1(P8I,id)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),id,false)call TriggerAddCondition(t,Condition(function UT5))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,d,false)call SaveUnitHandle(LY,(S5I),(2),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",P8I,"origin")))set P7I=nullset P8I=nullset t=nullendfunctionfunction UP5 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),375,Condition(function CR1))call ForGroup(g,function UR5)call NSI(g)set g=nullset P7I=nullendfunctionfunction UQ5 takes nothing returns booleanif GetSpellAbilityId()==1093812822 thencall UP5()endifreturn falseendfunctionfunction Register_Gallop takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function UQ5))endfunctionfunction UU5 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit Z4O=(LoadUnitHandle(LY,(S5I),(17)))local integer AF1=(LoadInteger(LY,(S5I),(59)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,AF1)call UnitRemoveAbility(P7I,1110459978)call UnitRemoveAbility(P7I,1110459979)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall TriggerRegisterTimerEvent(t,0.3,false)endifset t=nullset P7I=nullset Z4O=nullreturn falseendfunctionfunction I06 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit Z4O=GetAttacker()local integer SUI=GetUnitAbilityLevel(P7I,1093813593)local integer idlocal integer NPI=(LoadInteger(LY,(S5I),(34)))if P7I==GetTriggerUnit()and((LoadInteger(LY,(GetHandleId((P7I))),((4316))))==1)==false and IsUnitAlly(P7I,GetOwningPlayer(Z4O))==false thenif GetRandomReal(0,100)<(NPI+1)*JDI[SUI]thencall SaveInteger(LY,(S5I),(34),(0))call SCI(P7I,4316,0.9)if SUI==1 thenset id=1093814084elseif SUI==2 thenset id=1093814085elseif SUI==3 thenset id=1093814086elseif SUI==4 thenset id=1093814083endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),id,false)call IA1(P7I,id)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,Z4O,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1.0,false)call TriggerAddCondition(t,Condition(function UU5))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(Z4O))call SaveInteger(LY,(S5I),(59),(id))elsecall SaveInteger(LY,(S5I),(34),(NPI+1))endifendifset t=nullset P7I=nullset Z4O=nullreturn falseendfunctionfunction II6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function I06))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset t=nullendfunctionfunction I16 takes nothing returns booleanif GetLearnedSkill()==1093813593 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093813593)==1 thencall II6()endifreturn falseendfunctionfunction PH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function I16))set t=nullset JDI[1]=3.646set JDI[2]=4.562set JDI[3]=5.570set JDI[4]=6.668endfunctionfunction IO6 takes unit u,integer d returns nothinglocal integer array blocal integer a=dlocal integer c=1local integer i=0local integer EU1if d<1 thencall UnitRemoveAbility(u,JEI[0])call UnitRemoveAbility(u,JEI[1])call UnitRemoveAbility(u,JEI[2])call UnitRemoveAbility(u,JEI[3])call UnitRemoveAbility(u,JEI[4])call UnitRemoveAbility(u,JEI[5])call UnitRemoveAbility(u,JEI[6])call UnitRemoveAbility(u,JEI[7])call UnitRemoveAbility(u,JEI[8])returnendifloopexitwhen c==0set c=a/2set b[i]=a-c*2set a=cset i=i+1endloopset EU1=8set i=0loopexitwhen i>EU1if b[i]==1 thencall IA1(u,JEI[i])elsecall UnitRemoveAbility(u,JEI[i])endifset i=i+1endloopendfunctionfunction I26 takes unit P7I,integer SUI,unit P8I returns nothinglocal integer S5I=GetHandleId(P7I)local integer I36=(LoadInteger(LY,(S5I),(739)))if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset I36=I36+6+4*SUIcall SaveInteger(LY,(S5I),(739),(I36))call UYI(GetUnitName(P7I)+" Won The Duel!!",5,P7I,0.03,255,0,0,255)call IO6(P7I,I36)endifendfunctionfunction I46 takes unit u returns booleanreturn GetUnitAbilityLevel(u,1113815395)==0 or PII(u)==falseendfunctionfunction I56 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real GW1=(LoadReal(LY,(S5I),(442)))local unit I01call BP1(P7I)call BP1(P8I)if GetTriggerEvalCount(t)==1 thenset I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093814069)call IssueTargetOrder(I01,"doom",P8I)set I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call UnitAddAbility(I01,1093814069)call IssueTargetOrder(I01,"doom",P7I)set I01=nullendifif GetTriggerEventId()==EVENT_WIDGET_DEATH or GW1<(TimerGetElapsed(M))or I46(P7I)==false or I46(P8I)==false thenif GetTriggerEventId()==EVENT_WIDGET_DEATH thenif GetTriggerUnit()==P7I thencall I26(P8I,SUI,GetTriggerUnit())elsecall I26(P7I,SUI,GetTriggerUnit())endifendifcall UnitRemoveAbility(P7I,1110459975)call UnitRemoveAbility(P8I,1110459975)call DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)call SetUnitPathing(P7I,true)call SetUnitPathing(P8I,true)elseif GetIssuedOrderId()!=851973 thencall SetUnitPathing(P7I,false)call SetUnitPathing(P8I,false)call DisableTrigger(t)call IssueTargetOrder(P7I,"attack",P8I)call IssueTargetOrder(P8I,"attack",P7I)call EnableTrigger(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction I66 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093813065)local trigger tlocal integer S5Icall SetUnitPathing(P7I,false)call SetUnitPathing(P8I,false)call IssueTargetOrder(P7I,"attack",P8I)call IssueTargetOrder(P8I,"attack",P7I)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",P7I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",P8I,"overhead")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+0.75*SUI+3.25)*1.0))call TriggerAddCondition(t,Condition(function I56))call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterTimerEvent(t,0.01,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ISSUED_ORDER)set P7I=nullset P8I=nullset t=nullendfunctionfunction I76 takes nothing returns booleanif GetSpellAbilityId()==1093813065 and NNI(GetSpellTargetUnit())==false thencall I66()endifreturn falseendfunctionfunction PV1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function I76))set t=nullset JEI[0]=1093814091set JEI[1]=1093814090set JEI[2]=1093814089set JEI[3]=1093814088set JEI[4]=1093814094set JEI[5]=1093814095set JEI[6]=1093814093set JEI[7]=1093814092set JEI[8]=1093814096endfunctionfunction I86 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local real dlocal unit Z4Oif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenset d=GetEventDamage()if RSI(d)and d>50 thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set Z4O=GetEventDamageSource()if IsUnitType(Z4O,UNIT_TYPE_HERO)==false and GetUnitAbilityLevel(Z4O,1093678162)!=0 thenset Z4O=K1[GetPlayerId(GetOwningPlayer(Z4O))]endifcall QGI(P7I,d)set d=d*(0.4+0.2*SUI)if IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thencall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+d)elsecall P6I(P7I,P8I,3,d)endifendifendifif GetTriggerEventId()!=EVENT_UNIT_DAMAGED or NPI==3 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction I96 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093814609)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P7I,"chest",1.9)call U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P8I,"chest",1.9)call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",P7I,"chest")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",P8I,"chest")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))call TriggerAddCondition(t,Condition(function I86))call TriggerRegisterTimerEvent(t,10,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)set P7I=nullset P8I=nullset t=nullendfunctionfunction IA6 takes nothing returns booleanif GetSpellAbilityId()==1093814609 thencall I96()endifreturn falseendfunctionfunction Register_Deflection takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IA6))set t=nullendfunctionfunction IB6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer MKO=5if P7I==P8I thenset MKO=5endifset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))if GetTriggerEventId()==EVENT_WIDGET_DEATH or NPI>MKO thencall UnitRemoveAbility(P8I,JFI[SUI])call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+20+10*SUI)call U5I("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",P8I,"chest",1.9)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IC6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093814834)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call EO1(P8I)call DU1(P8I,0,0)call IA1(P8I,JFI[SUI])call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),JFI[SUI],false)call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",P8I,"overhead")))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveInteger(LY,(S5I),(34),(0))call TriggerAddCondition(t,Condition(function IB6))call TriggerRegisterTimerEvent(t,1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerEvaluate(t)set P7I=nullset P8I=nullset t=nullendfunctionfunction ID6 takes nothing returns booleanif GetSpellAbilityId()==1093814834 thencall IC6()endifreturn falseendfunctionfunction PG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ID6))set JFI[1]=1093814841set JFI[2]=1093814849set JFI[3]=1093814840set JFI[4]=1093814839set t=nullendfunctionfunction IE6 takes unit P7I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),0)call IA1(I01,1093814851)call SetUnitAbilityLevel(I01,1093814851,SUI/3)call IssueTargetOrder(I01,"bloodlust",P7I)set I01=nullendfunctionfunction IF6 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_SUMMONED)==true or IsUnitIllusion(GetEnumUnit())==true thencall P6I(GetTriggerUnit(),GetEnumUnit(),1,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*0.25)endifcall P6I(GetTriggerUnit(),GetEnumUnit(),1,40*JZI+(12+2*JZI)*JGI+(5+15*JZI)*JHI)endfunctionfunction IG6 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thenset JHI=JHI+1elseset JGI=JGI+1endifendfunctionfunction IH6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local integer SUI=GetUnitAbilityLevel(P7I,1093814850)local group g=NTI()call DestroyEffect(AddSpecialEffect("war3mapImported\\OverwhelmingOdds.mdx",x,y))call GroupEnumUnitsInRange(g,x,y,330+25,Condition(function C51))set JGI=0set JHI=0set JZI=SUIcall ForGroup(g,function IG6)call ForGroup(g,function IF6)call NSI(g)call IE6(P7I,9*JHI+3*JGI)set P7I=nullset g=nullendfunctionfunction IZ6 takes nothing returns booleanif GetSpellAbilityId()==1093814850 thencall IH6()endifreturn falseendfunctionfunction PZ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IZ6))call Q1I(1093814851)set t=nullendfunctionfunction IV6 takes nothing returns nothingset JJI=truecall P6I(JVI,GetEnumUnit(),1,((200+400*JXI)/JWI)/22)set JJI=falseendfunctionfunction IW6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group gif GetTriggerEvalCount(t)>22 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,170+25,Condition(function DO1))set JXI=GetUnitAbilityLevel(P7I,1093812807)if JXI==0 thenset JXI=GetUnitAbilityLevel(P7I,1093817429)endifset JVI=P7Iset JWI=CountUnitsInGroup(g)call ForGroup(g,function IV6)call NSI(g)set g=nullendifset t=nullset P7I=nullreturn falseendfunctionfunction IX6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local string s="war3mapImported\\DivineWrathTarget.mdx"local location l=GetSpellTargetLoc()call PlaySoundAtPointBJ(JYI,100,l,0)call RemoveLocation(l)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function IW6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call DestroyEffect(AddSpecialEffect(s,x,y))set t=nullset P7I=nullendfunctionfunction IY6 takes nothing returns booleanif GetSpellAbilityId()==1093812807 or GetSpellAbilityId()==1093817429 thencall IX6()endifreturn falseendfunctionfunction PX1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IY6))set t=nullset JYI=CreateSound("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget2.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(JYI,"StarfallTarget")call SetSoundDuration(JYI,3000)endfunctionfunction IJ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093812820)local real dif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenset d=GetEventDamage()*(0.2+0.05*SUI)elsecall SaveInteger(LY,(GetHandleId((P8I))),((4317)),(2))call UnitRemoveAbility(P8I,1093814582)call UnitRemoveAbility(P8I,1093814581)call UnitRemoveAbility(P8I,1093814583)call UnitRemoveAbility(P8I,1093814584)call UnitRemoveAbility(P8I,1110459987)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IK6 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal integer SUI=GetUnitAbilityLevel(P7I,1093812820)local unit LastTarget=(LoadUnitHandle(LY,(GetHandleId(P7I)),(741)))local integer NPI=(LoadInteger(LY,(GetHandleId(P8I)),(742)))local integer idif((LoadInteger(LY,(GetHandleId((P8I))),((4317))))==1)==true thencall SaveInteger(LY,(GetHandleId(P8I)),(742),(0))call SaveReal(LY,(GetHandleId(P8I)),(743),(((TimerGetElapsed(M)))*1.0))elseif(LoadReal(LY,(GetHandleId(P8I)),(743)))+10<(TimerGetElapsed(M))thenset NPI=1elseset NPI=NPI+1endifif IsUnitType(P8I,UNIT_TYPE_HERO)==true or IsUnitIllusion(P8I)==true thencall UKI(GetOwningPlayer(P7I),I2S(NPI)+"!",2,P8I,0.026,50,0,255,216)endifcall SaveInteger(LY,(GetHandleId(P8I)),(742),(NPI))call SaveReal(LY,(GetHandleId(P8I)),(743),(((TimerGetElapsed(M)))*1.0))if NPI==4 thencall SaveInteger(LY,(GetHandleId(P8I)),(742),(0))call SaveInteger(LY,(GetHandleId((P8I))),((4317)),(1))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.5+0.5*SUI,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function IJ6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))if SUI==1 thenset id=1093814582elseif SUI==2 thenset id=1093814581elseif SUI==3 thenset id=1093814583elseif SUI==4 thenset id=1093814584endifcall IA1(P8I,id)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),id,false)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FarseerMissile_Purple_2.mdx",P8I,"chest"))endifendifset t=nullendfunctionfunction IL6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call IK6(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction IM6 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,1.2,false)call TriggerAddCondition(t,Condition(function IL6))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(2),(P7I))set P8I=nullset P7I=nullset t=nullendfunctionfunction IN6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetAttacker()==P7I and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(P7I))thenif((LoadInteger(LY,(GetHandleId((P7I))),((4315))))==1)==false thencall SCI(P7I,4315,0.3)call IM6()endifendifset t=nullset P7I=nullreturn falseendfunctionfunction IS6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function IN6))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction IT6 takes nothing returns booleanif GetLearnedSkill()==1093812820 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093812820)==1 thencall IS6()endifreturn falseendfunctionfunction Register_Amp takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function IT6))set t=nullendfunctionfunction IR6 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal integer SUI=GetUnitAbilityLevel(P7I,1093812805)local real PAI=40+20*SUI+1.6*GetHeroInt(P7I,true)set JJI=truecall P6I(P7I,P8I,1,PAI)set JJI=falseset P7I=nullset P8I=nullendfunctionfunction IP6 takes nothing returns nothinglocal trigger t=IJ1(GetTriggerUnit(),GetSpellTargetUnit(),1747993681,"IR6",500,false)local integer S5I=GetHandleId(t)set t=nullendfunctionfunction IQ6 takes nothing returns booleanif GetSpellAbilityId()==1093812805 and NNI(GetSpellTargetUnit())==false thencall IP6()endifreturn falseendfunctionfunction PY1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function IQ6))set t=nullendfunctionfunction IU6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real dif GetTriggerEventId()==EVENT_UNIT_DAMAGED thenelsecall UnitRemoveAbility(P8I,1093814360)call UnitRemoveAbility(P8I,1093814576)call UnitRemoveAbility(P8I,1093814361)call UnitRemoveAbility(P8I,1093814362)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset P8I=nullset t=nullreturn falseendfunctionfunction O06 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093814350)local real M5I=2+SUIlocal integer id=1093814360if SUI==1 thenset id=1093814360elseif SUI==2 thenset id=1093814576elseif SUI==3 thenset id=1093814361elseif SUI==4 thenset id=1093814362endifcall IA1(P8I,id)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),id,false)call TriggerRegisterTimerEvent(t,M5I,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function IU6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set P7I=nullset P8I=nullset t=nullendfunctionfunction OI6 takes nothing returns booleanif GetSpellAbilityId()==1093814350 and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true and NNI(GetSpellTargetUnit())==false thencall O06()endifreturn falseendfunctionfunction PJ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OI6))set t=nullendfunctionfunction O16 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=GKlocal unit P8I=HKlocal real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local integer SUI=GetUnitAbilityLevel(P7I,1093814612)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,x,y,0)call UnitAddAbility(I01,1093814613)call SetUnitAbilityLevel(I01,1093814613,SUI)call IssueImmediateOrder(I01,"thunderclap")set P7I=nullset P8I=nullset I01=nullendfunctionfunction OO6 takes unit P7I,group g returns unitlocal unit O26=nulllocal real d=99999local unit OF5=FirstOfGroup(g)call GroupRemoveUnit(g,OF5)loopexitwhen OF5==nullif QLI(P7I,OF5)<d thenset d=QLI(P7I,OF5)set O26=OF5endifset OF5=FirstOfGroup(g)call GroupRemoveUnit(g,OF5)endloopreturn O26endfunctionfunction O36 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=nulllocal group g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),1600+25,Condition(function D11))set P8I=OO6(P7I,g)call NSI(g)if P8I!=null thencall IJ1(P7I,P8I,1747993910,"O16",800,false)endifset g=nullset P8I=nullset P7I=nullendfunctionfunction O46 takes nothing returns booleanif GetSpellAbilityId()==1093814612 thencall O36()endifreturn falseendfunctionfunction PW1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O46))set t=nullendfunctionfunction O56 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer XT5=(LoadInteger(LY,(S5I),(422)))local integer XR5=(LoadInteger(LY,(S5I),(423)))local integer HJ4=(LoadInteger(LY,(S5I),(424)))call SetHeroAgi(P8I,GetHeroAgi(P8I,false)+XT5,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)+XR5,true)call SetHeroInt(P8I,GetHeroInt(P8I,false)+HJ4,true)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P8I=nullreturn falseendfunctionfunction O66 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093813835)local trigger tlocal integer S5Ilocal integer KBOlocal integer XT5local integer XR5local integer HJ4local real JC3if IsUnitType(P8I,UNIT_TYPE_HERO)==true thenset KBO=SEI(P8I)set JC3=0.15if KBO==2 thenset XT5=R2I(JC3*GetHeroAgi(P8I,false))-1set XR5=0set HJ4=0elseif KBO==3 thenset XT5=0set XR5=R2I(JC3*GetHeroStr(P8I,false))-1set HJ4=0elseif KBO==1 thenset XT5=0set XR5=0set HJ4=R2I(JC3*GetHeroInt(P8I,false))-1endifcall SetHeroAgi(P8I,GetHeroAgi(P8I,false)-XT5,true)call SetHeroStr(P8I,GetHeroStr(P8I,false)-XR5,true)call SetHeroInt(P8I,GetHeroInt(P8I,false)-HJ4,true)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,7,false)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function O56))call SaveInteger(LY,(S5I),(422),(XT5))call SaveInteger(LY,(S5I),(424),(HJ4))call SaveInteger(LY,(S5I),(423),(XR5))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullendifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",P8I,"chest"))call P6I(P7I,P8I,JLI,50+50*SUI)set P7I=nullset P8I=nullendfunctionfunction O76 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),x,y)*bj_DEGTORADset x=GetUnitX(P7I)set y=GetUnitY(P7I)if UPI(x,y,JKI)>0 thenset JLI=3elseset JLI=1endifcall GroupEnumUnitsInRange(g,x,y,JKI+25,Condition(function C51))call ForGroup(g,function O66)call NSI(g)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\WhirlingDeath_01.mdx",P7I,"origin"))set P7I=nullset g=nullendfunctionfunction O86 takes nothing returns booleanif GetSpellAbilityId()==1093813835 thencall O76()endifreturn falseendfunctionfunction PK1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function O86))set t=nullendfunctionfunction O96 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093813555)call P6I(P7I,P8I,3,60+40*SUI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",P8I,"origin"))endfunctionfunction OA6 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false thencall GroupAddUnit(XK,GetEnumUnit())call O96(GK,GetEnumUnit())endifendfunctionfunction OB6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer CV3=(LoadInteger(LY,(S5I),(18)))local integer NPI=GetTriggerEvalCount(t)local unit CW3local group CX3=(LoadGroupHandle(LY,(S5I),(16)))local group glocal boolean UL1=(LoadBoolean(LY,(S5I),(727)))local boolean OC6=(LoadBoolean(LY,(S5I),(740)))if BG1(SFI)thenset OC6=truecall SaveBoolean(LY,(S5I),(740),(OC6))endifif UL1==false thenset CW3=(LoadUnitHandle(LY,(S5I),(700+CV3+1-NPI)))call RemoveUnit(CW3)elseset CW3=(LoadUnitHandle(LY,(S5I),(700+NPI)))if OC6==false thencall SetUnitX(SFI,GetUnitX(CW3))call SetUnitY(SFI,GetUnitY(CW3))endifcall RemoveUnit(CW3)set g=NTI()set GK=SFIset XK=CX3call GroupEnumUnitsInRange(g,GetUnitX(SFI),GetUnitY(SFI),250,Condition(function CD1))call ForGroup(g,function OA6)call NSI(g)endifif NPI==(CV3)thencall UPI(GetUnitX(SFI),GetUnitY(SFI),90)call NSI(CX3)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset SFI=nullset CW3=nullset CX3=nullset g=nullreturn falseendfunctionfunction OD6 takes nothing returns nothingif RJI(GetEnumDestructable())and IsDestructableDeadBJ(GetEnumDestructable())==false thenset JMI=JMI+1endifendfunctionfunction OE6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real RM2=(LoadReal(LY,(S5I),(13)))local integer MKO=(LoadInteger(LY,(S5I),(12)))local integer NPI=GetTriggerEvalCount(t)local real x=(LoadReal(LY,(S5I),(6)))+NPI*50*Cos(RM2*bj_DEGTORAD)local real y=(LoadReal(LY,(S5I),(7)))+NPI*50*Sin(RM2*bj_DEGTORAD)local boolean CK3=(LoadBoolean(LY,(S5I),(15)))local unit CL3local trigger CM3=(LoadTriggerHandle(LY,(S5I),(11)))local integer CN3=GetHandleId(CM3)local integer ID=1966092625local real CY3=250local rect rlocal real d=90set r=Rect(x-d,y-d,x+d,y+d)set JMI=0call EnumDestructablesInRect(r,Condition(function N1I),function OD6)if JMI>0 or NPI==MKO or NPI==(MKO-1)or NPI==(MKO-2)thenset ID=1966092624endifset CL3=CreateUnit(GetOwningPlayer(SFI),ID,x,y,RM2)call SaveUnitHandle(LY,(CN3),(700+NPI),(CL3))if JMI>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(CM3,0.5/MKO,true)call TriggerAddCondition(CM3,Condition(function OB6))call SaveInteger(LY,(CN3),(18),(NPI))call SaveBoolean(LY,(CN3),(727),(true))call SaveUnitHandle(LY,(CN3),(14),(SFI))call SaveGroupHandle(LY,(CN3),(16),(NTI()))call SaveReal(LY,(CN3),(6),((x)*1.0))call SaveReal(LY,(CN3),(7),((y)*1.0))call SaveBoolean(LY,(CN3),(740),(false))elseif NPI>MKO thencall FlushChildHashtable(LY,(S5I))call S0I(t)call TriggerRegisterTimerEvent(CM3,0.5/MKO,true)call TriggerAddCondition(CM3,Condition(function OB6))call SaveInteger(LY,(CN3),(18),(NPI))call SaveBoolean(LY,(CN3),(727),(false))call SaveUnitHandle(LY,(CN3),(14),(SFI))call SaveGroupHandle(LY,(CN3),(16),(NTI()))call SaveBoolean(LY,(CN3),(740),(false))endifset t=nullset SFI=nullset CL3=nullset CM3=nullreturn falseendfunctionfunction OF6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real RM2=UEI(GetUnitX(SFI),GetUnitY(SFI),GetLocationX(l),GetLocationY(l))local integer SUI=GetUnitAbilityLevel(SFI,1093813555)local integer CT3local integer MKOlocal trigger CR3=CreateTrigger()set CT3=600+200*SUIset MKO=CT3/50call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveInteger(LY,(S5I),(12),(MKO))call SaveTriggerHandle(LY,(S5I),(11),(CR3))call SaveReal(LY,(S5I),(6),((GetUnitX(SFI))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(SFI))*1.0))call TriggerRegisterTimerEvent(t,0.5/MKO,true)call TriggerAddCondition(t,Condition(function OE6))call RemoveLocation(l)set t=nullset SFI=nullset l=nullendfunctionfunction OG6 takes nothing returns booleanif GetSpellAbilityId()==1093813555 thencall OF6()endifreturn falseendfunctionfunction PL1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OG6))set t=nullendfunctionfunction OH6 takes unit P7I returns nothinglocal integer NPI=(LoadInteger(LY,(GetHandleId(P7I)),(728)))local integer SUI=GetUnitAbilityLevel(P7I,1093813556)local integer i=1set NPI=IMinBJ(NPI,4*SUI)loopexitwhen i>20if NPI==i thencall IA1(P7I,JNI[i])call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),JNI[i],false)elsecall UnitRemoveAbility(P7I,JNI[i])endifset i=i+1endloopendfunctionfunction OZ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(GetHandleId(P7I)),(728)))-1call SaveInteger(LY,(GetHandleId(P7I)),(728),(NPI))call OH6(P7I)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction OV6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local integer NPI=(LoadInteger(LY,(GetHandleId(P7I)),(728)))+1if IsUnitEnemy(GetAttacker(),GetOwningPlayer(P7I))==true thencall SaveInteger(LY,(GetHandleId(P7I)),(728),(NPI))call OH6(P7I)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,16,false)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function OZ6))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifset t=nullset P7I=nullreturn falseendfunctionfunction OW6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function OV6))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction OX6 takes nothing returns booleanif GetLearnedSkill()==1093813556 and GetUnitAbilityLevel(GetTriggerUnit(),1093813556)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall OW6()endifreturn falseendfunctionfunction PM1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function OX6))set t=nullset JNI[1]=1093813319set JNI[2]=1093813318set JNI[3]=1093813324set JNI[4]=1093813325set JNI[5]=1093813322set JNI[6]=1093813321set JNI[7]=1093813326set JNI[8]=1093813327set JNI[9]=1093813320set JNI[10]=1093813333set JNI[11]=1093813328set JNI[12]=1093813329set JNI[13]=1093813330set JNI[14]=1093813331set JNI[15]=1093813332set JNI[16]=1093813323set JNI[17]=1093816148set JNI[18]=1093816147set JNI[19]=1093816149set JNI[20]=1093816150endfunctionfunction OY6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)call UnitRemoveAbility(P7I,1093813848)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction OJ6 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer Z43=R2I(100*GetUnitState(P8I,UNIT_STATE_LIFE)/GetUnitState(P8I,UNIT_STATE_MAX_LIFE))local integer SUI=QAI(Q9I(R2I(100-Z43)/5,20),1)call UnitAddAbility(I01,1093813334)call SetUnitAbilityLevel(I01,1093813334,SUI)call IssueTargetOrder(I01,"slow",P8I)set I01=nullendfunctionfunction OK6 takes nothing returns nothingif Q2==false and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4349))))==1)==false thencall SCI(GetEnumUnit(),4348,0.49)call P6I(JPI,GetEnumUnit(),3,(25+25*JQI)*0.5)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))call OJ6(JPI,GetEnumUnit())endifendfunctionfunction OL6 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),JRI)==false thencall GroupAddUnit(JRI,GetEnumUnit())call P6I(JPI,GetEnumUnit(),3,60+40*JQI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))call OJ6(JPI,GetEnumUnit())endifendfunctionfunction OM6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real xlocal real ylocal real alocal integer ON6=(LoadInteger(LY,(S5I),(33)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))local real OS6if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093813848 thencall SaveInteger(LY,(S5I),(33),(2))call GroupClear(PR2)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813848,false)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function OY6))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifelseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==-1 thencall BP1(P7I)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093813557 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813557,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813848,false)call UnitRemoveAbility(P7I,1093813848)call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)call KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif ON6==0 thenset a=UEI(GetUnitX(IG1),GetUnitY(IG1),QJI,QKI)*bj_DEGTORADset x=GetUnitX(IG1)+18*Cos(a)set y=GetUnitY(IG1)+18*Sin(a)call UPI(x,y,175)if QNI(x,y,QJI,QKI)<40 thenset x=QJIset y=QKIendifcall SetUnitX(IG1,x)call SetUnitY(IG1,y)set GK=P7Iset JPI=P7Iset JQI=GetUnitAbilityLevel(P7I,1093813557)set JRI=PR2set g=NTI()call GroupEnumUnitsInRange(g,x,y,JSI+25,Condition(function CA1))call ForGroup(g,function OL6)call NSI(g)if x==QJI and y==QKI thencall SaveInteger(LY,(S5I),(33),(1))call GroupClear(PR2)endifelseif ON6==1 thenset NPI=NPI+1if NPI==25 thenset x=GetUnitX(IG1)set y=GetUnitY(IG1)call UPI(x,y,175)set NPI=0set GK=P7Iset JPI=P7Iset JQI=GetUnitAbilityLevel(P7I,1093813557)set g=NTI()call GroupEnumUnitsInRange(g,x,y,JTI+25,Condition(function CA1))call ForGroup(g,function OK6)call NSI(g)set OS6=(15+5*JQI)/2if GetUnitState(P7I,UNIT_STATE_MANA)<OS6 or QLI(P7I,IG1)>2000 thencall SaveInteger(LY,(S5I),(33),(2))call GroupClear(PR2)call UnitRemoveAbility(P7I,1093813848)call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)elsecall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)-OS6)endifendifcall SaveInteger(LY,(S5I),(34),(NPI))elseif ON6==2 thenset a=UEI(GetUnitX(IG1),GetUnitY(IG1),GetUnitX(P7I),GetUnitY(P7I))*bj_DEGTORADset x=GetUnitX(IG1)+16*Cos(a)set y=GetUnitY(IG1)+16*Sin(a)call UPI(x,y,175)call SetUnitX(IG1,x)call SetUnitY(IG1,y)set GK=P7Iset JPI=P7Iset JQI=GetUnitAbilityLevel(P7I,1093813557)set JRI=PR2set g=NTI()call GroupEnumUnitsInRange(g,x,y,JSI+25,Condition(function CA1))call ForGroup(g,function OL6)call NSI(g)if QNI(x,y,GetUnitX(P7I),GetUnitY(P7I))<40 thencall BP1(P7I)call KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093813557 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813557,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813848,false)endifendifset t=nullset P7I=nullset IG1=nullset PR2=nullset g=nullreturn falseendfunctionfunction OT6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),x,y)*bj_DEGTORADlocal unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993683,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OM6))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveInteger(LY,(S5I),(33),(0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call BT1(P7I)call IA1(P7I,1093813848)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813557,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813848,true)set P7I=nullset t=nullset IG1=nullendfunctionfunction OR6 takes nothing returns booleanif GetSpellAbilityId()==1093813557 thencall OT6()endifreturn falseendfunctionfunction PN1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function OR6))call Q1I(1093813334)set t=nullendfunctionfunction OP6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)call UnitRemoveAbility(P7I,1093813558)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction OQ6 takes unit P7I,unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local integer Z43=R2I(100*GetUnitState(P8I,UNIT_STATE_LIFE)/GetUnitState(P8I,UNIT_STATE_MAX_LIFE))local integer SUI=QAI(Q9I(R2I(100-Z43)/5,20),1)call UnitAddAbility(I01,1093813334)call SetUnitAbilityLevel(I01,1093813334,SUI)call IssueTargetOrder(I01,"slow",P8I)set I01=nullendfunctionfunction OU6 takes nothing returns nothingif Q2==false and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((4348))))==1)==false thencall SCI(GetEnumUnit(),4349,0.49)call P6I(K1I,GetEnumUnit(),3,(25+25*KOI)*0.5)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))call OQ6(K1I,GetEnumUnit())endifendfunctionfunction A06 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),KII)==false thencall GroupAddUnit(KII,GetEnumUnit())call P6I(K1I,GetEnumUnit(),3,60+40*KOI)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))call OQ6(K1I,GetEnumUnit())endifendfunctionfunction AI6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real xlocal real ylocal real alocal integer ON6=(LoadInteger(LY,(S5I),(33)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group glocal integer NPI=(LoadInteger(LY,(S5I),(34)))local real OS6if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093813558 thencall SaveInteger(LY,(S5I),(33),(2))call GroupClear(PR2)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813558,false)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function OP6))call SaveUnitHandle(LY,(S5I),(2),(P7I))endifelseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==-1 thencall BP1(P7I)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093818703 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093818703,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813558,false)call UnitRemoveAbility(P7I,1093813558)call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)call KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)elseif ON6==0 thenset a=UEI(GetUnitX(IG1),GetUnitY(IG1),QJI,QKI)*bj_DEGTORADset x=GetUnitX(IG1)+18*Cos(a)set y=GetUnitY(IG1)+18*Sin(a)call UPI(x,y,175)if QNI(x,y,QJI,QKI)<40 thenset x=QJIset y=QKIendifcall SetUnitX(IG1,x)call SetUnitY(IG1,y)set GK=P7Iset K1I=P7Iset KOI=GetUnitAbilityLevel(P7I,1093818703)set KII=PR2set g=NTI()call GroupEnumUnitsInRange(g,x,y,JUI+25,Condition(function CA1))call ForGroup(g,function A06)call NSI(g)if x==QJI and y==QKI thencall SaveInteger(LY,(S5I),(33),(1))call GroupClear(PR2)endifelseif ON6==1 thenset NPI=NPI+1if NPI==25 thenset x=GetUnitX(IG1)set y=GetUnitY(IG1)call UPI(x,y,175)set NPI=0set GK=P7Iset K1I=P7Iset KOI=GetUnitAbilityLevel(P7I,1093818703)set g=NTI()call GroupEnumUnitsInRange(g,x,y,K0I+25,Condition(function CA1))call ForGroup(g,function OU6)call NSI(g)set OS6=(15+5*KOI)/2if GetUnitState(P7I,UNIT_STATE_MANA)<OS6 or QLI(P7I,IG1)>2000 thencall SaveInteger(LY,(S5I),(33),(2))call GroupClear(PR2)call UnitRemoveAbility(P7I,1093813558)call UnitRemoveAbility(P7I,1114663271)call UnitRemoveAbility(P7I,1111845217)elsecall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)-OS6)endifendifcall SaveInteger(LY,(S5I),(34),(NPI))elseif ON6==2 thenset a=UEI(GetUnitX(IG1),GetUnitY(IG1),GetUnitX(P7I),GetUnitY(P7I))*bj_DEGTORADset x=GetUnitX(IG1)+16*Cos(a)set y=GetUnitY(IG1)+16*Sin(a)call UPI(x,y,175)call SetUnitX(IG1,x)call SetUnitY(IG1,y)set GK=P7Iset K1I=P7Iset KOI=GetUnitAbilityLevel(P7I,1093818703)set KII=PR2set g=NTI()call GroupEnumUnitsInRange(g,x,y,JUI+25,Condition(function CA1))call ForGroup(g,function A06)call NSI(g)if QNI(x,y,GetUnitX(P7I),GetUnitY(P7I))<40 thencall BP1(P7I)call KillUnit(IG1)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)if(LoadInteger(LY,(GetHandleId(P7I)),(704)))==0 or(LoadInteger(LY,(GetHandleId(P7I)),(704)))==1093818703 thencall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093818703,true)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813558,false)endifendifset t=nullset P7I=nullset IG1=nullset PR2=nullset g=nullreturn falseendfunctionfunction A16 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),x,y)*bj_DEGTORADlocal unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993683,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AI6))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveInteger(LY,(S5I),(33),(0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call BT1(P7I)call IA1(P7I,1093813558)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093818703,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P7I),1093813558,true)set P7I=nullset t=nullset IG1=nullendfunctionfunction AO6 takes nothing returns booleanif GetSpellAbilityId()==1093818703 thencall A16()endifreturn falseendfunctionfunction PS1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AO6))call Q1I(1093813334)set t=nullendfunctionfunction A26 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetTriggerUnit()==P7I and GetLearnedSkill()==1093813557 thencall SetUnitAbilityLevel(P7I,1093818703,GetUnitAbilityLevel(P7I,1093813557))endifset t=nullset P7I=nullreturn falseendfunctionfunction XAO takes nothing returns nothinglocal unit P7I=GKlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call IA1(P7I,1093818703)call SetUnitAbilityLevel(P7I,1093818703,GetUnitAbilityLevel(P7I,1093813557))call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function A26))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction Trap_RemoveBonus takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if((LoadInteger(LY,(GetHandleId(P7I)),(754)))==(LoadInteger(LY,(S5I),(754))))thencall G21((P7I),(0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction A36 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thenset K3I=K3I+60elseset K3I=K3I+20endifcall UnitRemoveAbility(GetEnumUnit(),1093815365)call UnitRemoveAbility(GetEnumUnit(),1110460209)endfunctionfunction A46 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thenset K3I=K3I+60elseset K3I=K3I+20endifendfunctionfunction A56 takes nothing returns nothingcall DD1(K4I,GetEnumUnit(),0.5+K5I*0.5)call P6I(K4I,GetEnumUnit(),1,K3I)endfunctionfunction A66 takes nothing returns booleanreturn GetUnitAbilityLevel(GetFilterUnit(),1110460209)>0endfunctionfunction A76 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local group g=NTI()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)set K4I=P7Iset K5I=GetUnitAbilityLevel(P7I,1093815353)set K3I=0call GroupEnumUnitsInRange(g,0,0,9999,Condition(function A66))call ForGroup(g,function A36)call ForGroup(g,function A56)call NSI(g)set g=nullset P7I=nullendfunctionfunction A86 takes nothing returns booleanif GetSpellAbilityId()==1093815353 thencall A76()endifreturn falseendfunctionfunction A96 takes string UWI,unit P8I,unit SFI returns nothinglocal texttag tt=CreateTextTag()call SetTextTagText(tt,UWI,0.033)call SetTextTagPosUnit(tt,P8I,64)call SetTextTagColor(tt,0,75,255,255)call SetTextTagVelocity(tt,0,0.0355)call SetTextTagFadepoint(tt,0.15)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,1.0)if IsUnitAlly(SFI,GetLocalPlayer())or P0I(GetLocalPlayer())thencall SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifset tt=nullendfunctionfunction AA6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real Z7O=(LoadReal(LY,(GetHandleId(P8I)),(753)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or Z7O<(TimerGetElapsed(M))thencall UnitRemoveAbility(P8I,1093815365)call UnitRemoveAbility(P8I,1110460209)call SaveReal(LY,(GetHandleId(P8I)),(753),((0)*1.0))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullreturn falseendfunctionfunction AB6 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal group g=NTI()call SaveReal(LY,(GetHandleId(P8I)),(753),(((TimerGetElapsed(M))+K2I)*1.0))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.25,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function AA6))call SaveUnitHandle(LY,(S5I),(17),(P8I))call IA1(P8I,1093815365)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815365,false)set K4I=P7Iset K5I=GetUnitAbilityLevel(P7I,1093815353)set K3I=0call GroupEnumUnitsInRange(g,0,0,9999,Condition(function A66))call ForGroup(g,function A46)call NSI(g)call A96(I2S(K3I),P8I,P7I)set t=nullendfunctionfunction AC6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetEventDamageSource()==P7I and GetEventDamage()>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)if BJ1(P8I)==false thencall AB6(P7I,P8I)endifendifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AD6 takes nothing returns nothinglocal unit P7I=GetAttacker()local unit P8I=GetTriggerUnit()local trigger tlocal integer S5Iif((LoadInteger(LY,(GetHandleId((P7I))),((4325))))==1)==false thencall SCI(P7I,4325,0.2)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function AC6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))endifset P7I=nullset P8I=nullendfunctionfunction AE6 takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1093815353)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))thencall AD6()endifreturn falseendfunctionfunction PQ1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function A86))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function AE6))set t=nullendfunctionfunction AF6 takes nothing returns nothinglocal integer S5I=GetHandleId(GetTriggeringTrigger())local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit AG6=GKlocal unit P8I=HKlocal integer SUI=GetUnitAbilityLevel(P7I,1093815361)if RKI(P8I)==false thencall P6I(P7I,P8I,1,20+80*SUI)call AX1(P8I,1093815627,1,4,1110460212)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815627,false)call UnitMakeAbilityPermanent(P8I,true,1093815626)endifset P7I=nullset P8I=nullset AG6=nullendfunctionfunction AH6 takes nothing returns nothinglocal unit P7I=K6Ilocal unit P8I=GetEnumUnit()local trigger t=IJ1(K7I,P8I,1747993925,"AF6",600,false)local integer S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))set P7I=nullset P8I=nullset t=nullendfunctionfunction AZ6 takes unit P7I,unit P8I returns nothinglocal integer SUI=GetUnitAbilityLevel(P7I,1093815361)local group g=NTI()set GK=P7Iset K6I=P7Iset K7I=P8Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),500+25,Condition(function CA1))call GroupRemoveUnit(g,P8I)call ForGroup(g,function AH6)call NSI(g)set P7I=nullset P8I=nullset g=nullendfunctionfunction AV6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local real x=GetUnitX(IG1)local real y=GetUnitY(IG1)local real QJI=GetUnitX(P8I)local real QKI=GetUnitY(P8I)local real AW6=UTI(QJI,QKI,x,y)local integer NPI=GetTriggerEvalCount(t)local real IZ1=UEI(x,y,QJI,QKI)local real IV1local real IW1local real IH1=AW6/((K8I/.02)-NPI)if IH1<K9I*0.02 thenset IH1=K9I*0.02endifset IV1=x+IH1*Cos(IZ1*bj_DEGTORAD)set IW1=y+IH1*Sin(IZ1*bj_DEGTORAD)call SetUnitX(IG1,IV1)call SetUnitY(IG1,IW1)call SetUnitFacing(IG1,IZ1)if UTI(QJI,QKI,IV1,IW1)<=IH1 thencall KillUnit(IG1)call AZ6(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullset IG1=nullreturn falseendfunctionfunction AX6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993930,GetUnitX(P7I),GetUnitY(P7I),0)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function AV6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(45),(IG1))set P7I=nullset P8I=nullset IG1=nullset t=nullendfunctionfunction AY6 takes nothing returns booleanif GetSpellAbilityId()==1093815361 and NNI(GetSpellTargetUnit())==false thencall AX6()endifreturn falseendfunctionfunction PP1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AY6))set t=nullendfunctionfunction AJ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815362)call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+0.1*(20+GetUnitState(P8I,UNIT_STATE_MAX_LIFE)*(0.02+0.01*SUI)))if GetTriggerEvalCount(t)>39 or(GetTriggerEvalCount(t)==1 and IsUnitHidden(P8I))thencall UnitRemoveAbility(P8I,1093815364)call DestroyEffect((LoadEffectHandle(LY,(S5I),(609))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(610))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(611))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(612))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(613))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(614))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(615))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(616))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(617))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AK6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger tlocal integer S5Ilocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093815367)if IssueTargetOrder(I01,"thunderbolt",P8I)==true thenset t=CreateTrigger()set S5I=GetHandleId(t)call IA1(P8I,1093815364)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function AJ6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(609),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"hand right")))call SaveEffectHandle(LY,(S5I),(610),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"hand left")))call SaveEffectHandle(LY,(S5I),(611),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"foot right")))call SaveEffectHandle(LY,(S5I),(612),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"foot left")))call SaveEffectHandle(LY,(S5I),(613),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"foot right mount rear")))call SaveEffectHandle(LY,(S5I),(614),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"foot left mount rear")))call SaveEffectHandle(LY,(S5I),(615),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"head")))call SaveEffectHandle(LY,(S5I),(616),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"chest")))call SaveEffectHandle(LY,(S5I),(617),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",P8I,"weapon")))endifset P7I=nullset P8I=nullset t=nullendfunctionfunction AL6 takes nothing returns booleanif GetSpellAbilityId()==1093815362 thencall AK6()endifreturn falseendfunctionfunction PT1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AL6))set t=nullendfunctionfunction AM6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()call DisableTrigger(KBI)call UnitWakeUp(P8I)call IssueTargetOrder(P8I,"attack",KCI)call EnableTrigger(KBI)set P8I=nullendfunctionfunction AN6 takes nothing returns nothingcall SCI(GetEnumUnit(),4328,0.75)endfunctionfunction AS6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if IsUnitInGroup(P8I,KAI)==false thencall GroupAddUnit(KAI,P8I)call TriggerRegisterUnitEvent(KBI,P8I,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerRegisterUnitEvent(KBI,P8I,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(KBI,P8I,EVENT_UNIT_ISSUED_TARGET_ORDER)call SaveInteger(LY,(GetHandleId((P8I))),((4328)),(1))endifset P8I=nullendfunctionfunction AT6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local group PR2=(LoadGroupHandle(LY,(S5I),(22)))local group gif GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set KAI=PR2set KBI=tset g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),350+25,Condition(function CA1))call GroupRemoveUnit(g,P8I)call ForGroup(g,function AS6)call NSI(g)if NPI==(2.25+0.25*SUI)*20 or IC1(P8I)thencall ForGroup(PR2,function AN6)call NSI(PR2)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset KBI=tset KCI=P8Icall ForGroup(PR2,function AM6)if ModuloInteger(NPI,20)==0 or NPI==0 thenendifendifelseif UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=851973 and FSI==false thencall DisableTrigger(t)call ClearSelectionForPlayer(GetOwningPlayer(GetTriggerUnit()))call IssueTargetOrder(GetTriggerUnit(),"attack",P8I)call EnableTrigger(t)endifendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AR6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093687856)local unit P8I=GetSpellTargetUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093815882)call SetUnitAbilityLevel(I01,1093815882,SUI)call IssueTargetOrder(I01,"thunderbolt",P8I)set KDI=P7Icall TriggerRegisterTimerEvent(t,0.05,true)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\WintersCurse.mdx",P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffect("war3mapImported\\WintersCurseAoE.mdx",GetUnitX(P8I),GetUnitY(P8I))))call TriggerAddCondition(t,Condition(function AT6))set P7I=nullset P8I=nullset t=nullendfunctionfunction AP6 takes nothing returns booleanif GetSpellAbilityId()==1093687856 and NNI(GetSpellTargetUnit())==false thencall AR6()endifreturn falseendfunctionfunction PR1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function AP6))set t=nullendfunctionfunction AQ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815859)call P6I(P7I,P8I,3,(0.032+0.002*SUI)*GetUnitState(P8I,UNIT_STATE_MAX_LIFE))if(TimerGetElapsed(M))>=(LoadReal(LY,(GetHandleId(P7I)),(782)))thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction AU6 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Icall SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)*0.8)if(LoadReal(LY,(GetHandleId(P7I)),(782)))>(TimerGetElapsed(M))thencall SaveReal(LY,(GetHandleId(P7I)),(782),(((TimerGetElapsed(M))+KEI)*1.0))elseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function AQ6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",P8I,"chest")))call SaveReal(LY,(GetHandleId(P7I)),(782),(((TimerGetElapsed(M))+KEI)*1.0))endifset t=nullendfunctionfunction B06 takes nothing returns booleanlocal real dlocal real Z7Olocal integer NPIlocal unit P7Ilocal unit P8Iif GetUnitAbilityLevel(GetTriggerUnit(),1110460215)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093815859)>0 and(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()thenset P7I=GetEventDamageSource()set P8I=GetTriggerUnit()set NPI=(LoadInteger(LY,(GetHandleId(P7I)),(780)))set Z7O=(LoadReal(LY,(GetHandleId(P7I)),(781)))if Z7O+KEI<(TimerGetElapsed(M))thenset NPI=1set Z7O=(TimerGetElapsed(M))call SaveInteger(LY,(GetHandleId(P7I)),(780),(NPI))call SaveReal(LY,(GetHandleId(P7I)),(781),((Z7O)*1.0))elseset NPI=NPI+1set Z7O=(TimerGetElapsed(M))call SaveInteger(LY,(GetHandleId(P7I)),(780),(NPI))call SaveReal(LY,(GetHandleId(P7I)),(781),((Z7O)*1.0))endifif NPI==4 thenset NPI=0call SaveInteger(LY,(GetHandleId(P7I)),(780),(NPI))call AU6(P7I,P8I)endifcall FlushChildHashtable(LY,(GetHandleId(GetTriggeringTrigger())))call S0I(GetTriggeringTrigger())endifreturn falseendfunctionfunction BI6 takes nothing returns nothinglocal trigger tlocal unit P8Ilocal unit P7Iif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenset P8I=GetSpellTargetUnit()set P7I=GetTriggerUnit()elseset P8I=GetTriggerUnit()set P7I=GetAttacker()endifif IsUnitIllusion(P7I)==false thenset t=CreateTrigger()if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thencall SaveBoolean(LY,(GetHandleId(t)),(264),(true))elsecall SaveBoolean(LY,(GetHandleId(t)),(264),(false))endifcall SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function B06))endifset t=nullset P8I=nullset P7I=nullendfunctionfunction B16 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetUnitAbilityLevel(GetAttacker(),1093815859)>0 and(LoadBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(14)))thencall BI6()endifelseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER thenif(GetIssuedOrderId()==OrderId("poisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(true))elseif(GetIssuedOrderId()==OrderId("unpoisonarrows"))thencall SaveBoolean(LY,(GetHandleId(GetTriggeringTrigger())),(263),(false))endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815859 thencall BI6()endifreturn falseendfunctionfunction BO6 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)call TriggerAddCondition(t,Condition(function B16))call SaveUnitHandle(LY,(GetHandleId(t)),(14),(GetTriggerUnit()))set t=nullendfunctionfunction B26 takes nothing returns booleanif GetLearnedSkill()==1093815859 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093815859)==1 thencall BO6()endifreturn falseendfunctionfunction PU1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function B26))set t=nullendfunctionfunction B36 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall KillUnit(I01)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullset I01=nullreturn falseendifif IC1(P7I)==false thencall SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))elseif IsUnitAlly(I01,BO[0])==true thencall SetUnitX(I01,QS)call SetUnitY(I01,US)elsecall SetUnitX(I01,O50)call SetUnitY(I01,O60)endifendifset t=nullset P7I=nullset I01=nullreturn falseendfunctionfunction B46 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if IC1(P8I)==false thencall P6I(P7I,P8I,7,GetUnitState(P8I,UNIT_STATE_LIFE)*0.06)endifif GetTriggerEvalCount(t)==5 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction B56 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal integer SUIlocal integer B66local integer B76if((LoadInteger(LY,(GetHandleId((P8I))),((4329))))==1)==false and GetUnitTypeId(P8I)!=1848651852 thencall SCI(P8I,4329,KFI)set SUI=GetUnitAbilityLevel(P7I,1093815877)if SUI==1 thenset B66=1093815874set B76=1093815873elseif SUI==2 thenset B66=1093815862set B76=1093815864elseif SUI==3 thenset B66=1093815875set B76=1093815863elseif SUI==4 thenset B66=1093815876set B76=1093815865endifcall AX1(P8I,B66,1,5,1110460225)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),B66,false)call UnitMakeAbilityPermanent(P8I,true,B76)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function B46))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl",P8I,"chest")))endifendfunctionfunction B86 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetEventDamageSource()==P7I thencall DisableTrigger(t)call B56(P7I,P8I)call FlushChildHashtable(LY,(S5I))call S0I(t)endifelsecall FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction B96 takes nothing returns nothinglocal trigger t=CreateTrigger()local unit P8I=GetTriggerUnit()local unit P7I=GetAttacker()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function B86))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P8I=nullset P7I=nullendfunctionfunction BA6 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED thenif GetAttacker()==(LoadUnitHandle(LY,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false thenif GetUnitTypeId(GetAttacker())==1311788354 or GetUnitTypeId(GetAttacker())==1311788355 or GetUnitTypeId(GetAttacker())==1311788367 or GetUnitTypeId(GetAttacker())==1311788353 thencall B96()endifendifelsecall B36()endifreturn falseendfunctionfunction BB6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429337,GetUnitX(P7I),GetUnitY(P7I),0)if IsUnitIllusion(P7I)==false thencall UMI(t,EVENT_PLAYER_UNIT_ATTACKED)elsecall TriggerRegisterDeathEvent(t,P7I)endifcall TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function BA6))call SaveUnitHandle(LY,(GetHandleId(t)),(2),(P7I))call SaveUnitHandle(LY,(GetHandleId(t)),(19),(I01))set P7I=nullset I01=nullset t=nullendfunctionfunction BC6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullreturn falseendfunctionfunction BD6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function BC6))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set P7I=nullset t=nullendfunctionfunction BE6 takes nothing returns booleanif GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL thenif GetLearnedSkill()==1093815877 and GetUnitAbilityLevel(GetTriggerUnit(),1093815877)==1 thencall BB6()endifelseif GetSpellAbilityId()==1093815877 thenif GetUnitTypeId(GetTriggerUnit())!=1311788343 thencall UPI(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),150)if IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)thencall BD6()endifendifendifendifreturn falseendfunctionfunction Q01 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BE6))set t=nullendfunctionfunction BF6 takes nothing returns nothingcall DD1(KGI,GetEnumUnit(),1.5)call P6I(KGI,GetEnumUnit(),2,50+50*KHI)endfunctionfunction BG6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real a=(LoadReal(LY,(S5I),(137)))local real QJI=(LoadReal(LY,(S5I),(47)))local real QKI=(LoadReal(LY,(S5I),(48)))local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093813812)set x=PTI(x+32*Cos(a))set y=PUI(y+32*Sin(a))if QNI(x,y,QJI,QKI)<40 thenset x=QJIset y=QKIendifcall SetUnitX(P7I,x)call SetUnitY(P7I,y)call SetUnitFacing(P7I,a*bj_RADTODEG)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,125+25,Condition(function CA1))if FirstOfGroup(g)!=null or(x==QJI and y==QKI)or GetTriggerEvalCount(t)>200 or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall DestroyEffect(AddSpecialEffect("war3mapImported\\BlackDragonMissile.mdx",x,y))call GroupEnumUnitsInRange(g,x,y,300+25,Condition(function CA1))set KHI=SUIset KGI=P7Iif GetTriggerEventId()!=EVENT_WIDGET_DEATH thencall ForGroup(g,function BF6)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)endifcall NSI(g)set t=nullset P7I=nullset g=nullreturn falseendfunctionfunction BH6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local real a=UEI(x,y,QJI,QKI)*bj_DEGTORADlocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterDeathEvent(t,P7I)call TriggerAddCondition(t,Condition(function BG6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(47),((QJI)*1.0))call SaveReal(LY,(S5I),(48),((QKI)*1.0))set P7I=nullset t=nullendfunctionfunction BZ6 takes nothing returns booleanif GetSpellAbilityId()==1093813812 thencall BH6()endifreturn falseendfunctionfunction Register_SonicBoom takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BZ6))set t=nullendfunctionfunction BV6 takes nothing returns nothinglocal unit P7I=KZIlocal unit P8I=GetEnumUnit()call AH1(P8I,1093813811,1,10)call P6I(P7I,P8I,2,50*KVI+2*GetHeroAgi(P7I,true))set P7I=nullset P8I=nullendfunctionfunction BW6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real C54=QCI((TimerGetElapsed(M))-(LoadReal(LY,(GetHandleId(P7I)),(358))),5.0)local integer SUI=GetUnitAbilityLevel(P7I,1093813573)local real PAI=(40+80*SUI)*(C54)local group g=NTI()local real d=C54*600local real a=(LoadReal(LY,(GetHandleId(P7I)),(736)))local real x=GetUnitX(P7I)+d*Cos(a)local real y=GetUnitY(P7I)+d*Sin(a)set GK=P7Icall GroupEnumUnitsInRange(g,x,y,325,Condition(function CA1))set KVI=SUIset KZI=P7Icall ForGroup(g,function BV6)call NSI(g)call U7I("effects\\BasicWaterFlash.mdx",x,y,1)set P7I=nullset g=nullendfunctionfunction BX6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))call SetUnitTimeScale(SFI,1)call FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerEventId()!=EVENT_UNIT_DEATH thencall PJI(SFI)endifset t=nullset SFI=nullreturn falseendfunctionfunction BY6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()local location l=GetSpellTargetLoc()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=UEI(GetUnitX(SFI),GetUnitY(SFI),x,y)*bj_DEGTORADlocal real Q4I=RMaxBJ(QNI(GetUnitX(SFI),GetUnitY(SFI),x,y)/600,0.32)call RemoveLocation(l)call SaveReal(LY,(GetHandleId(SFI)),(356),((x)*1.0))call SaveReal(LY,(GetHandleId(SFI)),(357),((y)*1.0))call SaveReal(LY,(GetHandleId(SFI)),(736),((a)*1.0))call SaveReal(LY,(GetHandleId(SFI)),(358),(((TimerGetElapsed(M)))*1.0))call SetUnitTimeScale(SFI,0.75)call SaveUnitHandle(LY,(S5I),(14),(SFI))call TriggerRegisterTimerEvent(t,Q4I-0.01,false)call TriggerRegisterUnitEvent(t,SFI,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function BX6))set t=nullset SFI=nullendfunctionfunction BJ6 takes nothing returns booleanif GetSpellAbilityId()==1093813573 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(false))call BY6()elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(true))elseif(LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(360)))==true thencall BW6()endifendifreturn falseendfunctionfunction Register_WindBlast takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BJ6))set t=nullendfunctionfunction BK6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))if GetUnitAbilityLevel(P7I,1110456374)==0 and GetUnitAbilityLevel(P7I,1110456375)==0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P7I,1093813810)call UnitRemoveAbility(P7I,1110459959)endifset t=nullset P7I=nullreturn falseendfunctionfunction BL6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P8I=GetSpellTargetUnit()call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093813810,false)call IA1(P8I,1093813810)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerAddCondition(t,Condition(function BK6))call SaveUnitHandle(LY,(S5I),(2),(P8I))set P7I=nullset t=nullendfunctionfunction BM6 takes nothing returns booleanif GetSpellAbilityId()==1093813808 thencall BL6()endifreturn falseendfunctionfunction Register_WindBarrier takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BM6))set t=nullendfunctionfunction BN6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093813813)local integer idlocal integer E11call FlushChildHashtable(LY,(S5I))call S0I(t)if IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thenset E11=1110459960if SUI==1 thenset id=1093813831elseif SUI==2 thenset id=1093813830elseif SUI==3 thenset id=1093813832endifcall SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+100+50*SUI)elseset E11=1110459961if SUI==1 thenset id=1093813828elseif SUI==2 thenset id=1093813827elseif SUI==3 thenset id=1093813829endifcall P6I(P7I,P8I,1,100+50*SUI)endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),id,false)call AX1(P8I,id,1,4,E11)set t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction BS6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetEnumUnit()local unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call EO1(P8I)call DU1(P8I,0,0)call UnitAddAbility(I01,1093813833)call IssueTargetOrder(I01,"cyclone",P8I)call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function BN6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullset P7I=nullset P8I=nullset I01=nullendfunctionfunction BT6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local group g=NTI()call I41(GetOwningPlayer(P7I),4,QJI,QKI,300)call GroupEnumUnitsInRange(g,QJI,QKI,400+25,Condition(function CO1))call ForGroup(g,function BS6)call NSI(g)set P7I=nullset g=nullendfunctionfunction BR6 takes nothing returns booleanif GetSpellAbilityId()==1093813813 thencall BT6()endifreturn falseendfunctionfunction Register_PrevailingWinds takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function BR6))set t=nullendfunctionfunction BP6 takes nothing returns nothingcall UOI("war3mapImported\\FortunesEndTarget.mdx",GetEnumUnit(),"origin",3)call IssueTargetOrder(KXI,"purge",GetEnumUnit())if KJI!=null and GetUnitAbilityLevel(GetEnumUnit(),1093817396)>0 thencall TriggerEvaluate(KJI)endifcall P6I(KWI,GetEnumUnit(),1,75*KYI)endfunctionfunction BQ6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=(LoadUnitHandle(LY,(GetHandleId(P7I)),(796)))local real C54=QCI((TimerGetElapsed(M))-(LoadReal(LY,(GetHandleId(P7I)),(358))),3)local integer SUI=GetUnitAbilityLevel(P7I,1093816660)local integer BU6=R2I(2.0*C54)local unit I01=CreateUnit(GetOwningPlayer(P7I),1697656901,GetUnitX(P7I),GetUnitY(P7I),GetUnitFacing(P7I))local unit C06local group gif P8I!=null thenset C06=CreateUnit(GetOwningPlayer(P7I),1865429082,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(C06,1112820806,0.5)call UnitAddAbility(I01,1093817394)call SetUnitAbilityLevel(I01,1093817394,BU6)set GK=P7Iset KWI=P7Iset KXI=I01set KYI=SUIset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),215+25,Condition(function CA1))call ForGroup(g,function BP6)call NSI(g)endifset P7I=nullset P8I=nullset I01=nullset C06=nullset g=nullendfunctionfunction CI6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_WIDGET_DEATH thencall SaveReal(LY,(GetHandleId(SFI)),(356),((GetUnitX(P8I))*1.0))call SaveReal(LY,(GetHandleId(SFI)),(357),((GetUnitY(P8I))*1.0))endifcall FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset SFI=nullreturn falseendfunctionfunction C16 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit SFI=GetTriggerUnit()call SaveReal(LY,(GetHandleId(SFI)),(358),(((TimerGetElapsed(M)))*1.0))call SaveUnitHandle(LY,(GetHandleId(SFI)),(796),(GetSpellTargetUnit()))call DestroyEffect(AddSpecialEffect("war3mapImported\\CleanseTargetArea.mdx",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit())))call SaveUnitHandle(LY,(S5I),(14),(SFI))call SaveUnitHandle(LY,(S5I),(17),(GetSpellTargetUnit()))call TriggerRegisterTimerEvent(t,10,false)call TriggerRegisterDeathEvent(t,GetSpellTargetUnit())call TriggerAddCondition(t,Condition(function CI6))set t=nullset SFI=nullendfunctionfunction CO6 takes nothing returns booleanif GetSpellAbilityId()==1093816660 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(false))call C16()elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif NNI(GetSpellTargetUnit())==false thencall SaveBoolean(LY,(GetHandleId(GetTriggerUnit())),(360),(true))endifelseif(LoadBoolean(LY,(GetHandleId(GetTriggerUnit())),(360)))==true thencall BQ6()endifendifreturn falseendfunctionfunction QF1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CO6))set t=nullendfunctionfunction C26 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall DisableTrigger(t)call P6I(GetEventDamageSource(),P8I,3,0.5*GetEventDamage())call EnableTrigger(t)endifif GetTriggerEventId()!=EVENT_UNIT_DAMAGED or IC1(P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call FlushChildHashtable(LY,(S5I))call S0I(t)call BP1(P8I)call UnitRemoveAbility(P8I,1093817396)set KJI=nullendifset t=nullset P8I=nullreturn falseendfunctionfunction C36 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093817397)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)set KJI=tcall BT1(P8I)call IA1(P8I,1093817396)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093817396,false)call TriggerRegisterTimerEvent(t,2+SUI,false)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function C26))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("war3mapImported\\FatesEdict.mdx",P8I,"origin")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",P8I,"overhead")))set P7I=nullset P8I=nullset t=nullendfunctionfunction C46 takes nothing returns booleanif GetSpellAbilityId()==1093817397 thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or NNI(GetSpellTargetUnit())==false thencall C36()endifendifreturn falseendfunctionfunction QE1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C46))set t=nullendfunctionfunction C56 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093817159)local integer NPI=(LoadInteger(LY,(S5I),(34)))if GetTriggerEventId()==EVENT_WIDGET_DEATH or NPI>9 thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif GetSpellAbilityId()==1093817394 and GetSpellTargetUnit()==P8I thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifelseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SetUnitState(P8I,UNIT_STATE_LIFE,GetUnitState(P8I,UNIT_STATE_LIFE)+11*SUI)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction C66 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093817159)local real PAI=SUI*90local real IS5=0.75call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,1,true)call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C56))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\DarkMending.mdx",P8I,"origin")))if IsUnitType(P8I,UNIT_TYPE_HERO)==false thenset IS5=1.0endifif GetUnitState(P8I,UNIT_STATE_LIFE)<=PAI*IS5 and IsUnitAlly(P8I,GetOwningPlayer(P7I))==true thenset PAI=GetUnitState(P8I,UNIT_STATE_LIFE)/0.75-10endifcall P6I(P7I,P8I,1,PAI)set t=nullset P7I=nullset P8I=nullendfunctionfunction C76 takes nothing returns booleanif GetSpellAbilityId()==1093817159 thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or NNI(GetSpellTargetUnit())==false thencall C66()endifendifreturn falseendfunctionfunction QG1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function C76))set t=nullendfunctionfunction C86 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local integer KO2=(LoadInteger(LY,(S5I),(25)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local integer i=0local real C96=(LoadReal(LY,(S5I),(697)))local real CA6=(LoadReal(LY,(S5I),(811)))local real KMO=GetUnitState(P8I,UNIT_STATE_LIFE)local real CB6=GetUnitState(P8I,UNIT_STATE_MAX_LIFE)local real CC6=(LoadReal(LY,(S5I),(808)))local real CD6local real PAIif KO2>(SUI+6)*50 or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall DisableTrigger(t)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call UnitRemoveAbility(P8I,1093817392)call UnitRemoveAbility(P8I,1093817178)if GetTriggerEventId()!=EVENT_WIDGET_DEATH thenset CC6=CC6*2loopexitwhen i>NPIset i=i+1set KMO=GetUnitState(P8I,UNIT_STATE_LIFE)set CD6=RMinBJ(CB6-KMO,CC6)call SetUnitState(P8I,UNIT_STATE_LIFE,KMO+CD6)set CC6=CC6-CD6set PAI=(LoadReal(LY,(S5I),(20000+i)))if(LoadUnitHandle(LY,(S5I),(22000+i)))==P7I or((LoadInteger(LY,(GetHandleId((P8I))),((2485))))==1)thenif GetUnitState(P8I,UNIT_STATE_LIFE)<=PAI+2 thenset PAI=GetUnitState(P8I,UNIT_STATE_LIFE)-2endifendifcall P6I((LoadUnitHandle(LY,(S5I),(22000+i))),P8I,6,PAI)endloopset KMO=GetUnitState(P8I,UNIT_STATE_LIFE)set CD6=RMinBJ(CB6-KMO,CC6)call SetUnitState(P8I,UNIT_STATE_LIFE,KMO+CD6)set CC6=CC6-CD6endifcall FlushChildHashtable(LY,(S5I))call S0I(t)elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and RSI(GetEventDamage())thenset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))call SaveUnitHandle(LY,(S5I),(22000+NPI),(GetEventDamageSource()))call SaveReal(LY,(S5I),(20000+NPI),((GetEventDamage())*1.0))call QGI(P8I,GetEventDamage())elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_WIDGET_DEATH thenset KO2=KO2+1call SaveInteger(LY,(S5I),(25),(KO2))if CB6!=CA6 thenset CA6=CB6set C96=KMOcall SaveReal(LY,(S5I),(697),((C96)*1.0))call SaveReal(LY,(S5I),(811),((CA6)*1.0))endifif KMO>C96 thenif((LoadInteger(LY,(GetHandleId((P8I))),((4298))))==1)==false thenset CC6=CC6+KMO-C96call SaveReal(LY,(S5I),(808),((CC6)*1.0))elsecall SetUnitState(P8I,UNIT_STATE_LIFE,KMO)endifendifcall SetUnitState(P8I,UNIT_STATE_LIFE,C96)endifset t=nullset P8I=nullset P7I=nullreturn falseendfunctionfunction CE6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer SUI=GetUnitAbilityLevel(P7I,1093817414)call UnitRemoveAbility(P8I,1110456665)call IA1(P8I,1093817392)call IA1(P8I,1093817178)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function C86))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(34),(0))call SaveInteger(LY,(S5I),(25),(0))call SaveInteger(LY,(S5I),(5),(SUI))call SaveReal(LY,(S5I),(808),((0)*1.0))call SaveReal(LY,(S5I),(697),((GetUnitState(P8I,UNIT_STATE_LIFE))*1.0))call SaveReal(LY,(S5I),(811),((GetUnitState(P8I,UNIT_STATE_MAX_LIFE))*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\FalsePromise.mdx",P8I,"chest")))call EO1(P8I)call DU1(P8I,0,0)set P7I=nullset P8I=nullset t=nullendfunctionfunction CF6 takes nothing returns booleanif GetSpellAbilityId()==1093817414 thencall CE6()endifreturn falseendfunctionfunction QH1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CF6))set t=nullendfunctionfunction CG6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local integer SUI=(LoadInteger(LY,(S5I),(5)))local real xlocal real ylocal real aif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(IG1)elseset a=UEI(GetUnitX(IG1),GetUnitY(IG1),GetUnitX(P8I),GetUnitY(P8I))set x=GetUnitX(IG1)+20*Cos(a*bj_DEGTORAD)set y=GetUnitY(IG1)+20*Sin(a*bj_DEGTORAD)call SetUnitX(IG1,x)call SetUnitY(IG1,y)call SetUnitFacing(IG1,a)if QLI(IG1,P8I)<30 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call P6I(IG1,P8I,1,100+50*SUI)call KillUnit(IG1)call SetUnitAnimationByIndex(IG1,3)endifendifset t=nullset P8I=nullset IG1=nullreturn falseendfunctionfunction CH6 takes integer SUI,unit IG1,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitAnimationByIndex(IG1,2)call SetUnitVertexColor(IG1,255,255,255,150)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function CG6))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SetUnitAnimationByIndex(IG1,2)set t=nullendfunctionfunction CZ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))local group glocal unit P8Iif GetTriggerEvalCount(t)>KKI/0.05 thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(IG1)elseset GK=IG1set g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(IG1),GetUnitY(IG1),375+25,Condition(function CE1))set P8I=AU1(g,GetUnitX(IG1),GetUnitY(IG1))call NSI(g)if P8I!=null thencall FlushChildHashtable(LY,(S5I))call S0I(t)call CH6(SUI,IG1,P8I)endifset g=nullset P8I=nullendifset t=nullset IG1=nullreturn falseendfunctionfunction CV6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local integer SUI=(LoadInteger(LY,(S5I),(5)))local unit IG1=(LoadUnitHandle(LY,(S5I),(45)))call FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerAddCondition(t,Condition(function CZ6))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(45),(IG1))call SetUnitAnimationByIndex(IG1,1)set t=nullset IG1=nullreturn falseendfunctionfunction CW6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit IG1=CreateUnit(GetOwningPlayer(P7I),1747993927,x,y,270)local integer SUI=GetUnitAbilityLevel(P7I,1093815372)call SetUnitAnimationByIndex(IG1,0)call TriggerRegisterTimerEvent(t,3,false)call TriggerAddCondition(t,Condition(function CV6))call SaveInteger(LY,(S5I),(5),(SUI))call SaveUnitHandle(LY,(S5I),(45),(IG1))set P7I=nullset IG1=nullset t=nullendfunctionfunction CX6 takes nothing returns booleanif GetSpellAbilityId()==1093815372 thencall CW6()endifreturn falseendfunctionfunction QI1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CX6))set t=nullendfunctionfunction CY6 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif GetUnitAbilityLevel(GetEnumUnit(),1093815609)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815609)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815617)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815617)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815374)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815374)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815608)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815608)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815888)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815888)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815891)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815891)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815890)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815890)endifif GetUnitAbilityLevel(GetEnumUnit(),1093815889)>0 thencall UnitRemoveAbility(GetEnumUnit(),1093815889)endifendfunctionfunction CJ6 takes nothing returns nothingif BJ1(GetEnumUnit())thenreturnendifif KLI==1 thenset KMI=1093815609elseif KLI==2 thenset KMI=1093815617elseif KLI==3 thenset KMI=1093815374elseif KLI==4 thenset KMI=1093815608endifif GetUnitAbilityLevel(GetEnumUnit(),KMI)==0 thencall IA1(GetEnumUnit(),KMI)call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),KMI,false)call UnitMakeAbilityPermanent(GetEnumUnit(),true,1094935923)if KMI==1093815609 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815604)elseif KMI==1093815617 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815605)elseif KMI==1093815374 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815606)elseif KMI==1093815608 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815607)elseif KMI==1093815888 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815885)elseif KMI==1093815891 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815884)elseif KMI==1093815890 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815886)elseif KMI==1093815889 thencall UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815887)endifendifendfunctionfunction CK6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local real LVO=(LoadReal(LY,(S5I),(442)))local integer SUI=GetUnitAbilityLevel(P7I,1093815373)local group RG3=(LoadGroupHandle(LY,(S5I),(340)))local group g=NTI()local group g1=NTI()local group g2=NTI()set KLI=SUIif(TimerGetElapsed(M))>LVO thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call ForGroup(RG3,function CY6)call NSI(RG3)call NSI(g)call NSI(g1)call NSI(g2)return falseendifset GK=P7Icall GroupEnumUnitsInRange(g1,x,y,275+25,Condition(function CU1))call GroupEnumUnitsInRange(g2,x,y,275+144,Condition(function CX1))call GroupAddGroup(g1,g)call GroupAddGroup(g2,g)call NSI(g1)call NSI(g2)call GroupRemoveGroup(g,RG3)call ForGroup(RG3,function CY6)call ForGroup(g,function CJ6)call SaveGroupHandle(LY,(S5I),(340),(g))call NSI(RG3)set t=nullset P7I=nullset RG3=nullset g=nullreturn falseendfunctionfunction CL6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real QJI=GetSpellTargetX()local real QKI=GetSpellTargetY()local integer ilocal integer SUI=GetUnitAbilityLevel(P7I,1093815373)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function CK6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(340),(NTI()))call SaveReal(LY,(S5I),(6),((QJI)*1.0))call SaveReal(LY,(S5I),(7),((QKI)*1.0))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+3+0.5*SUI)*1.0))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffect("war3mapImported\\MagneticField04.mdl",QJI,QKI)))set i=0loopexitwhen i>5call SetPlayerAbilityAvailable(BO[i],1093815609,false)call SetPlayerAbilityAvailable(CO[i],1093815609,false)call SetPlayerAbilityAvailable(BO[i],1093815617,false)call SetPlayerAbilityAvailable(CO[i],1093815617,false)call SetPlayerAbilityAvailable(BO[i],1093815617,false)call SetPlayerAbilityAvailable(CO[i],1093815374,false)call SetPlayerAbilityAvailable(BO[i],1093815608,false)call SetPlayerAbilityAvailable(CO[i],1093815608,false)set i=i+1endloopset P7I=nullset t=nullendfunctionfunction CM6 takes nothing returns booleanif GetSpellAbilityId()==1093815373 thencall CL6()endifreturn falseendfunctionfunction Q11 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CM6))set t=nullendfunctionfunction CN6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815601)local integer OO1=(LoadInteger(LY,(S5I),(758)))local integer NPI=(LoadInteger(LY,(S5I),(34)))local group gif GetTriggerEventId()==EVENT_WIDGET_DEATH or NPI>120 or RKI(P8I)thencall UnitRemoveAbility(P8I,1093815383)call UnitRemoveAbility(P8I,1093815385)call UnitRemoveAbility(P8I,1110460210)call UnitRemoveAbility(P8I,1110460211)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)elseset NPI=NPI+1call SaveInteger(LY,(S5I),(34),(NPI))set GK=P7Iset g=NTI()call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),225+25,Condition(function CA1))call GroupRemoveUnit(g,P8I)if FirstOfGroup(g)==null thenif OO1==1093815383 thenif GetUnitAbilityLevel(P8I,1093815383)==0 thencall IA1(P8I,1093815383)call UnitMakeAbilityPermanent(P8I,true,1093815381)call UnitMakeAbilityPermanent(P8I,true,1093815621)endifelseif GetUnitAbilityLevel(P8I,1093815385)==0 thencall IA1(P8I,1093815385)call UnitMakeAbilityPermanent(P8I,true,1093815380)call UnitMakeAbilityPermanent(P8I,true,1093815621)endifendifif ModuloInteger(NPI,10)==0 thencall P6I(P7I,P8I,1,SUI*15*0.5)endifelseif OO1==1093815383 thenif GetUnitAbilityLevel(P8I,1093815383)>0 thencall UnitRemoveAbility(P8I,1093815383)call UnitRemoveAbility(P8I,1110460210)endifelseif GetUnitAbilityLevel(P8I,1093815385)>0 thencall UnitRemoveAbility(P8I,1093815385)call UnitRemoveAbility(P8I,1110460211)endifendifendifcall NSI(g)set g=nullendifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction CS6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local integer OO1=1093815383if GetUnitTypeId(P7I)==1311788365 thenset OO1=1093815385endifcall SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815383,false)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093815385,false)call TriggerRegisterTimerEvent(t,0.05,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function CN6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(758),(OO1))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\Flux3.mdx",P8I,"origin")))call TriggerEvaluate(t)set P7I=nullset P8I=nullset t=nullendfunctionfunction CT6 takes nothing returns booleanif GetSpellAbilityId()==1093815601 and NNI(GetSpellTargetUnit())==false thencall CS6()endifreturn falseendfunctionfunction QO1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function CT6))set t=nullendfunctionfunction CR6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit CP6=(LoadUnitHandle(LY,(S5I),(17)))call FlushChildHashtable(LY,(S5I))call S0I(t)call FlushChildHashtable(LY,(GetHandleId(CP6)))call RemoveUnit(CP6)set t=nullset CP6=nullreturn falseendfunctionfunction CQ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit CP6=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call FlushChildHashtable(LY,(GetHandleId(CP6)))call ShowUnit(CP6,false)set t=nullset CP6=nullreturn falseendfunctionfunction CU6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit CP6=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093815600)if GetTriggerEvalCount(t)==200 or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(CP6)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",GetUnitX(CP6),GetUnitX(CP6)))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(CP6))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function CQ6))set t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,3,false)call TriggerAddCondition(t,Condition(function CR6))call SaveUnitHandle(LY,(S5I),(17),(CP6))elsecall SuspendHeroXP(CP6,true)call UnitModifySkillPoints(CP6,-25)endifset t=nullset P7I=nullset CP6=nullreturn falseendfunctionfunction D06 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit CP6=CreateUnit(GetOwningPlayer(P7I),1311788365,GetUnitX(P7I),GetUnitY(P7I),0)local integer SUI=GetUnitAbilityLevel(P7I,1093815600)local integer i=0local item BA1local integer DI6=1227895373call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",CP6,"chest"))if TII(GetOwningPlayer(CP6))==false thenset DI6=1227903043endifcall SelectUnitAddForPlayer(CP6,GetOwningPlayer(P7I))call DisableTrigger(LY0)loopexitwhen i>5if UnitItemInSlot(P7I,i)!=null and GetItemTypeId(UnitItemInSlot(P7I,i))!=FR0[VL0]and GetItemTypeId(UnitItemInSlot(P7I,i))!=FR0[WH0]and GetItemTypeId(UnitItemInSlot(P7I,i))!=FR0[ZA0]and GetItemTypeId(UnitItemInSlot(P7I,i))!=FR0[ZB0]and GetItemTypeId(UnitItemInSlot(P7I,i))!=FR0[ZZ0]thenset BA1=CreateItem(GetItemTypeId(UnitItemInSlot(P7I,i)),0,0)if GetItemCharges(UnitItemInSlot(P7I,i))>0 thencall SetItemCharges(BA1,GetItemCharges(UnitItemInSlot(P7I,i)))endifcall UnitAddItem(CP6,BA1)call SetItemPlayer(BA1,GetOwningPlayer(CP6),false)if GetItemTypeId(BA1)==FR0[W30]or GetItemTypeId(BA1)==FR0[W40]or GetItemTypeId(BA1)==FR0[GZ0]thencall SetItemDropOnDeath(BA1,false)endifelsecall UnitAddItem(CP6,CreateItem(DI6,0,0))endifset i=i+1endloopcall EnableTrigger(LY0)call SetHeroLevel(CP6,GetHeroLevel(P7I),false)set i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1096904043)call SelectHeroSkill(CP6,1096904043)set i=i+1endloopset i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1093815372)call SelectHeroSkill(CP6,1093815372)set i=i+1endloopset i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1093815373)call SelectHeroSkill(CP6,1093815373)set i=i+1endloopset i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1093815601)call SelectHeroSkill(CP6,1093815601)set i=i+1endloopset i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1093812788)call SelectHeroSkill(CP6,1093812788)set i=i+1endloopset i=1loopexitwhen i>GetUnitAbilityLevel(P7I,1093815600)call SelectHeroSkill(CP6,1093815600)set i=i+1endloopcall UnitRemoveAbility(CP6,1093815600)call UnitModifySkillPoints(CP6,-25)call SuspendHeroXP(CP6,true)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,CP6)call TriggerAddCondition(t,Condition(function CU6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(CP6))call SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)*(1-(0.45-0.15*SUI)))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)*(1-(0.45-0.15*SUI)))call SetUnitState(CP6,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE))call SetUnitState(CP6,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA))set P7I=nullset CP6=nullset t=nullendfunctionfunction D16 takes nothing returns booleanif GetSpellAbilityId()==1093815600 thencall D06()endifreturn falseendfunctionfunction Q21 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function D16))set t=nullendfunctionfunction DO6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group g=NTI()local integer SUI=GetUnitAbilityLevel(P7I,1093686851)set GK=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),400+25,Condition(function DO1))if FirstOfGroup(g)==null thenif GetUnitAbilityLevel(P7I,1093815896)!=SUI thencall IA1(P7I,1093815896)call SetUnitAbilityLevel(P7I,1093815896,SUI)endifelseif GetUnitAbilityLevel(P7I,1093815896)>0 thencall UnitRemoveAbility(P7I,1093815896)endifendifcall NSI(g)set P7I=nullset t=nullset g=nullreturn falseendfunctionfunction D26 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function DO6))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction D36 takes nothing returns booleanif GetLearnedSkill()==1093686851 and GetUnitAbilityLevel(GetTriggerUnit(),1093686851)==1 thencall D26()endifreturn falseendfunctionfunction Q61 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function D36))set t=nullendfunctionfunction D46 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local integer SUI=GetUnitAbilityLevel(P7I,1093816114)local integer JJ3=GetHeroAgi(P7I,true)local real D56=JJ3*(0.12+0.06*SUI)local integer O93=R2I(D56/2.0+0.5)local integer D66=(LoadInteger(LY,(S5I),(34)))local real LVO=(LoadReal(LY,(S5I),(442)))if LVO<(TimerGetElapsed(M))thenset D66=2call SaveInteger(LY,(S5I),(34),(D66))call UnitRemoveAbility(I01,1093816115)endifif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093816114 thenset D66=1call SaveInteger(LY,(S5I),(34),(D66))call SaveReal(LY,(S5I),(442),(((TimerGetElapsed(M))+30)*1.0))call UnitRemoveAbility(I01,1093815897)call UnitRemoveAbility(I01,1093816115)endifif IC1(P7I)==true thencall UnitRemoveAbility(I01,1093815897)call UnitRemoveAbility(I01,1093816115)elseif GetUnitAbilityLevel(I01,1093815897)==0 thencall IA1(I01,1093815897)if D66==1 thencall IA1(I01,1093816115)elseendifendifcall SetUnitAbilityLevel(I01,1093815897,O93)call SetUnitAbilityLevel(I01,1093816115,O93)call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))endifset P7I=nullset t=nullreturn falseendfunctionfunction D76 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit I01=CreateUnit(GetOwningPlayer(P7I),1697657174,0,0,0)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function D46))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveInteger(LY,(S5I),(34),(2))call IA1(I01,1093815897)set t=nullset P7I=nullendfunctionfunction D86 takes nothing returns booleanif GetLearnedSkill()==1093816114 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093816114)==1 thencall D76()endifreturn falseendfunctionfunction Q41 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(t,Condition(function D86))call Q1I(1093815897)call Q1I(1093816115)set t=nullendfunctionfunction D96 takes unit P7I,unit P8I,integer SUI returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call IA1(I01,1093818183)call SetUnitAbilityLevel(I01,1093818183,SUI)call IssueTargetOrder(I01,"drunkenhaze",P8I)set I01=nullendfunctionfunction DA6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real RM2=(LoadReal(LY,(S5I),(13)))local real d=(LoadReal(LY,(S5I),(138)))local integer SUI=GetUnitAbilityLevel(P7I,1093818182)local real DC1=(0.5+0.1*SUI)/(0.02)local real RS2=d/DC1local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local integer NPI=GetTriggerEvalCount(t)if NPI>DC1 or GetTriggerEventId()==EVENT_UNIT_DEATH thencall UPI(GetUnitX(P8I),GetUnitY(P8I),100)call FlushChildHashtable(LY,(S5I))call S0I(t)elseset x=PTI(x+RS2*Cos(RM2))set y=PUI(y+RS2*Sin(RM2))call SetUnitX(P8I,x)call SetUnitY(P8I,y)call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction DB6 takes unit I01,unit P8I,unit P7I,real x,real y returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real RM2=Atan2(GetUnitY(P8I)-GetUnitY(I01),GetUnitX(P8I)-GetUnitX(I01))local real IT3=QNI(x,y,GetUnitX(P8I),GetUnitY(P8I))local real d=RMaxBJ(1,350*(1-IT3/900))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(13),((RM2)*1.0))call SaveReal(LY,(S5I),(138),((d)*1.0))call SaveReal(LY,(S5I),(6),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P8I))*1.0))call D96(P7I,P8I,GetUnitAbilityLevel(P7I,1093818182))call TriggerRegisterTimerEvent(t,0.02,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function DA6))set t=nullendfunctionfunction DC6 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),XK)==false and RKI(GetEnumUnit())==false thencall GroupAddUnit(XK,GetEnumUnit())call DB6(GK,GetEnumUnit(),KNI,KSI,KTI)endifendfunctionfunction DD6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real a=(LoadReal(LY,(S5I),(137)))local real x1=(LoadReal(LY,(S5I),(64)))local real y1=(LoadReal(LY,(S5I),(65)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local group g=(LoadGroupHandle(LY,(S5I),(22)))local real x=GetUnitX(I01)local real y=GetUnitY(I01)local group g2if QNI(x,y,x2,y2)<100 thenset x=x2set y=y2elseset x=x+40*Cos(a)set y=y+40*Sin(a)endifcall SetUnitX(I01,PTI(x))call SetUnitY(I01,PUI(y))set g2=NTI()set GK=I01set KNI=P7Iset KSI=x1set KTI=y1set XK=gcall GroupEnumUnitsInRange(g2,x,y,250+25,Condition(function CA1))call ForGroup(g2,function DC6)call NSI(g2)if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 thenset g2=NTI()set GK=I01set KNI=P7Iset KSI=x1set KTI=y1set XK=gcall GroupEnumUnitsInRange(g2,x,y,250+25,Condition(function CA1))call ForGroup(g2,function DC6)call NSI(g2)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call NSI(g)endifset t=nullset I01=nullset g=nullset g2=nullreturn falseendfunctionfunction DE6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local location l=GetSpellTargetLoc()local unit P7I=GetTriggerUnit()local real x=GetLocationX(l)local real y=GetLocationY(l)local real a=Atan2(y-GetUnitY(P7I),x-GetUnitX(P7I))local unit I01=CreateUnit(GetOwningPlayer(P7I),1848659529,GetUnitX(P7I),GetUnitY(P7I),a*bj_RADTODEG)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function DD6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveReal(LY,(S5I),(64),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(65),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(66),((GetUnitX(P7I)+900*Cos(a))*1.0))call SaveReal(LY,(S5I),(67),((GetUnitY(P7I)+900*Sin(a))*1.0))call SaveGroupHandle(LY,(S5I),(22),(NTI()))call RemoveLocation(l)set t=nullset l=nullset P7I=nullendfunctionfunction DF6 takes nothing returns booleanif GetSpellAbilityId()==1093818182 thencall DE6()endifreturn falseendfunctionfunction Q51 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function DF6))set t=nullendfunctionfunction BoulderSmash_FindClosestMagnetizedTarget takes nothing returns nothinglocal real d=QLI(GetEnumUnit(),LWI)if d<AK thenset AK=dset LFI=GetEnumUnit()endifendfunctionfunction DG6 takes nothing returns booleanreturn IC1(GetFilterUnit())==false and IsUnitEnemy(KQI,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((809))))==1)endfunctionfunction DH6 takes unit P8I returns nothinglocal unit I01=CreateUnit(GetOwningPlayer(P8I),1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093817415)call SetUnitAbilityLevel(I01,1093817415,KUI)call IssueTargetOrder(I01,"soulburn",P8I)set I01=nullendfunctionfunction DZ6 takes nothing returns nothingcall DH6(GetEnumUnit())endfunctionfunction DV6 takes unit P8I returns nothinglocal group g=NTI()if((LoadInteger(LY,(GetHandleId((P8I))),((809))))==1)==true thencall GroupEnumUnitsInRange(g,0,0,99999,Condition(function DG6))endifcall GroupAddUnit(g,P8I)call ForGroup(g,function DZ6)call NSI(g)set g=nullendfunctionfunction DW6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if GetUnitTypeId(P8I)!=1865429336 thencall SetUnitPathing(P8I,true)endifcall SaveInteger(LY,(GetHandleId((P8I))),((4336)),(2))set P8I=nullendfunctionfunction DX6 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),KPI)==false thencall GroupAddUnit(KPI,GetEnumUnit())call DV6(GetEnumUnit())if L1I==1 thencall P6I(KQI,GetEnumUnit(),1,75*KUI-25)endifendifendfunctionfunction DY6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()local real a=(LoadReal(LY,(GetHandleId(P8I)),(801)))local real d=(LoadReal(LY,(GetHandleId(P8I)),(802)))local real x=L0I+d*Cos(a)local real y=LII+d*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))if GetUnitTypeId(P8I)==1865429336 or GetUnitTypeId(P8I)==1865429552 thenset L1I=1call SetUnitPosition(P8I,x,y)call SetUnitX(P8I,x)call SetUnitY(P8I,y)elsecall SetUnitX(P8I,x)call SetUnitY(P8I,y)call UPI(x,y,100)endifset P8I=nullendfunctionfunction DJ6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()if IC1(P8I)==true or((LoadInteger(LY,(GetHandleId((P8I))),((4306))))==1)==true or GetUnitAbilityLevel(P8I,1110456406)>0 or((LoadInteger(LY,(GetHandleId((P8I))),((4335))))==1)==true thencall GroupRemoveUnit(KPI,P8I)call SaveInteger(LY,(GetHandleId((P8I))),((4336)),(2))if GetUnitTypeId(P8I)!=1865429336 thencall SetUnitPathing(P8I,true)endifendifset P8I=nullendfunctionfunction DK6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group DL6=(LoadGroupHandle(LY,(S5I),(803)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real a=bj_DEGTORAD*UEI(II3,I13,QJI,QKI)local real xlocal real ylocal boolean DM6=falselocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group gset L1I=0set KPI=DL6call ForGroup(DL6,function DJ6)if GetTriggerEvalCount(t)>200 or FirstOfGroup(DL6)==null thenset DM6=trueelseset x=II3+KRI*0.03*Cos(a)set y=I13+KRI*0.03*Sin(a)if QNI(x,y,QJI,QKI)<30 thenset x=QJIset y=QKIset DM6=trueendifset x=PTI(x)set y=PUI(y)set KPI=DL6set L0I=xset LII=ycall ForGroup(DL6,function DY6)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))set g=NTI()set GK=P7Iset KPI=PR2set KQI=P7Iset KUI=GetUnitAbilityLevel(P7I,1093816649)call GroupEnumUnitsInRange(g,x,y,180+25,Condition(function CA1))call ForGroup(g,function DX6)call NSI(g)set g=nullendifif DM6 thencall ForGroup(DL6,function DW6)call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)call NSI(PR2)call NSI(DL6)endifset P7I=nullset t=nullset PR2=nullset DL6=nullreturn falseendfunctionfunction MagneticGrip_PullableTargetsFilter takes nothing returns booleanreturn((GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429552)or(IsUnitEnemy(KQI,GetOwningPlayer(GetFilterUnit()))==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))and IC1(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4336))))==1)==falseendfunctionfunction DN6 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1865429336endfunctionfunction DS6 takes nothing returns nothinglocal unit P8I=GetEnumUnit()call SetUnitPathing(P8I,false)call SaveInteger(LY,(GetHandleId((P8I))),((4336)),(1))call SaveReal(LY,(GetHandleId(P8I)),(801),((bj_DEGTORAD*UEI(L0I,LII,GetUnitX(P8I),GetUnitY(P8I)))*1.0))call SaveReal(LY,(GetHandleId(P8I)),(802),((QNI(L0I,LII,GetUnitX(P8I),GetUnitY(P8I)))*1.0))set P8I=nullendfunctionfunction DT6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger tlocal integer S5Ilocal real QJI=GetUnitX(GetSpellTargetUnit())local real QKI=GetUnitY(GetSpellTargetUnit())local real x=GetUnitX(P7I)local real y=GetUnitY(P7I)local real a=UEI(x,y,QJI,QKI)local unit P8I=GetSpellTargetUnit()local group gif P8I==null thenset g=NTI()call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),240+25,Condition(function DN6))if FirstOfGroup(g)==null thencall NSI(g)set P7I=nullset g=nullreturnendifset P8I=FirstOfGroup(g)call NSI(g)endifset g=NTI()call GroupAddUnit(g,P8I)set QJI=GetUnitX(P8I)set QKI=GetUnitY(P8I)set a=UEI(x,y,QJI,QKI)set t=CreateTrigger()set S5I=GetHandleId(t)set L0I=QJIset LII=QKIcall ForGroup(g,function DS6)set x=x+100*Cos(a*bj_DEGTORAD)set y=y+100*Sin(a*bj_DEGTORAD)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerAddCondition(t,Condition(function DK6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(23),((QJI)*1.0))call SaveReal(LY,(S5I),(24),((QKI)*1.0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveGroupHandle(LY,(S5I),(803),(g))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\MagneticGripTarget.mdx",P8I,"chest")))set P7I=nullset t=nullset g=nullendfunctionfunction DR6 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local group gif P8I==null thenset g=NTI()call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),240+25,Condition(function DN6))if FirstOfGroup(g)==null thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659509))endifcall NSI(g)endifset g=nullset P8I=nullendfunctionfunction DP6 takes nothing returns booleanif GetSpellAbilityId()==1093816649 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST thencall DR6()elsecall DT6()endifendifreturn falseendfunctionfunction Q91 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function DP6))set t=nullendfunctionfunction DQ6 takes integer i returns booleanreturn L7I[0]==i or L7I[1]==i or L7I[2]==i or L7I[3]==i or L7I[4]==i or L7I[5]==i or L7I[6]==iendfunctionfunction DU6 takes nothing returns booleanreturn IC1(GetFilterUnit())==false and IsUnitEnemy(L3I,GetOwningPlayer(GetFilterUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((809))))==1)endfunctionfunction E06 takes nothing returns nothingcall AX1((GetEnumUnit()),1093816654,1,2,1110460235)endfunctionfunction EI6 takes unit P8I returns nothinglocal group g=NTI()if((LoadInteger(LY,(GetHandleId((P8I))),((809))))==1)==true thencall GroupEnumUnitsInRange(g,0,0,99999,Condition(function DU6))endifcall GroupAddUnit(g,P8I)call ForGroup(g,function E06)call NSI(g)set g=nullendfunctionfunction RollingBoulder_FindClosestMagnetizedTarget takes nothing returns nothinglocal real d=QLI(GetEnumUnit(),LBI)if d<AK thenset AK=dset L4I=GetEnumUnit()endifendfunctionfunction E16 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),L5I)==false thencall GroupAddUnit(L5I,GetEnumUnit())if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true thenset L8I=trueset L4I=GetEnumUnit()if((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((809))))==1)thenset LBI=GetEnumUnit()endifif LAI==1 thencall P6I(L3I,GetEnumUnit(),1,L9I)call EI6(GetEnumUnit())elsecall P6I(L3I,GetEnumUnit(),1,L9I)endifelseif LAI==1 thencall P6I(L3I,GetEnumUnit(),1,L9I)elsecall P6I(L3I,GetEnumUnit(),1,L9I)endifendifendifendfunctionfunction EO6 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429552endfunctionfunction E26 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group glocal unit I01=(LoadUnitHandle(LY,(S5I),(19)))local real H71=(LoadReal(LY,(S5I),(6)))local real H81=(LoadReal(LY,(S5I),(7)))local real IO3=GetUnitX(P7I)local real I23=GetUnitY(P7I)local real d=QNI(H71,H81,IO3,I23)local real xlocal real ylocal real a=(LoadReal(LY,(S5I),(137)))local real r=L2Ilocal integer E36=(LoadInteger(LY,(S5I),(34)))local real E63=(LoadReal(LY,(S5I),(138)))local boolean E46=falselocal unit E56=(LoadUnitHandle(LY,(S5I),(810)))set L8I=falsecall SetUnitTimeScale(P7I,3)call SetUnitFacing(P7I,a)call SetUnitAnimationByIndex(P7I,0)if GetTriggerEvalCount(t)>30 thenif E36==0 thenset g=NTI()call GroupEnumUnitsInRange(g,IO3,I23,150+25,Condition(function EO6))if FirstOfGroup(g)!=null thenif(GetUnitTypeId((FirstOfGroup(g)))==1865429552)==false thencall KillUnit(FirstOfGroup(g))endifset E36=1call SaveInteger(LY,(S5I),(34),(E36))endifcall NSI(g)endifif E36==1 thenset r=r*2endifif E56!=null thenset a=UDI(P7I,E56)call SaveReal(LY,(S5I),(137),((a)*1.0))endifset x=H71+0.02*r*Cos(a*bj_DEGTORAD)set y=H81+0.02*r*Sin(a*bj_DEGTORAD)call SetUnitX(P7I,PTI(x))call SetUnitY(P7I,PUI(y))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SetUnitX(I01,GetUnitX(P7I))call SetUnitY(I01,GetUnitY(P7I))call UPI(GetUnitX(P7I),GetUnitY(P7I),100)set d=QNI(H71,H81,GetUnitX(P7I),GetUnitY(P7I))set E63=E63+dcall SaveReal(LY,(S5I),(138),((E63)*1.0))set g=NTI()set GK=P7Iset L3I=P7Iset L5I=PR2set L6I=1set L4I=nullset L9I=100set LAI=E36set LBI=nullcall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),150+25,Condition(function CA1))call ForGroup(g,function E16)call NSI(g)if LBI!=null thenset g=NTI()set L4I=nullset AK=9999call GroupEnumUnitsInRange(g,GetUnitX(LBI),GetUnitY(LBI),600+25,Condition(function DU6))call NSI(g)if L4I==null thenset E46=trueset L4I=LBIelseset E56=L4Icall SaveUnitHandle(LY,(S5I),(810),(E56))endifendifelsecall SetUnitX(P7I,H71)call SetUnitY(P7I,H81)if BG1(P7I)thenset E46=trueendifendifif BG1(P7I)or GetTriggerEventId()==EVENT_WIDGET_DEATH or E46 or(E56==null and(GetTriggerEvalCount(t)>130 or L8I or(E36==0 and E63>800)or(E36==1 and E63>1600)))thencall KillUnit(I01)call NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitAddAbility(P7I,1093816658)call UnitRemoveAbility(P7I,1093816658)call SetUnitTimeScale(P7I,1)if L8I==true thenset x=GetUnitX(L4I)+50*Cos(a*bj_DEGTORAD)set y=GetUnitY(L4I)+50*Sin(a*bj_DEGTORAD)call SetUnitX(P7I,PTI(x))call SetUnitY(P7I,PUI(y))call IssueTargetOrder(P7I,"attack",L4I)endifendifset P7I=nullset t=nullset g=nullset PR2=nullreturn falseendfunctionfunction E66 takes unit P7I,unit E76 returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit I01=CreateUnit(GetOwningPlayer(P7I),1865429328,GetUnitX(P7I),GetUnitY(P7I),0)local real a=UEI(GetUnitX(P7I),GetUnitY(P7I),GetSpellTargetX(),GetSpellTargetY())call UnitAddAbility(P7I,1093816657)call UnitRemoveAbility(P7I,1093816657)call SetUnitTimeScale(P7I,3)call TriggerRegisterDeathEvent(t,P7I)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function E26))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveUnitHandle(LY,(S5I),(19),(I01))call SaveReal(LY,(S5I),(6),((GetUnitX(P7I))*1.0))call SaveReal(LY,(S5I),(7),((GetUnitY(P7I))*1.0))call SaveReal(LY,(S5I),(137),((a)*1.0))call SaveInteger(LY,(S5I),(34),(0))call SaveReal(LY,(S5I),(138),((0)*1.0))call SaveUnitHandle(LY,(S5I),(810),(null))if E76!=null and GetUnitTypeId(E76)==1865429336 thencall KillUnit(E76)endifset t=nullendfunctionfunction E86 takes nothing returns booleanreturn((GetUnitTypeId(GetFilterUnit())==1865429336 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(L3I))or(GetUnitTypeId((GetFilterUnit()))==1865429552))and IC1(GetFilterUnit())==falseendfunctionfunction RollingBoulder_Loop takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local group gif GetUnitTypeId(P7I)==1311788373 and IC1(P7I)==false thenset g=NTI()set L3I=P7Icall GroupEnumUnitsInRange(g,GetUnitX(P7I),GetUnitY(P7I),150+25,Condition(function E86))if FirstOfGroup(g)!=null thenendifcall NSI(g)set g=nullendifset P7I=nullset t=nullreturn falseendfunctionfunction E96 takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())==1311788373 and IsUnitIllusion(GetFilterUnit())==falseendfunctionfunction EA6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real GW1=(LoadReal(LY,(S5I),(442)))local integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(800)))local group gif P7I==null thenset g=NTI()call GroupEnumUnitsInRange(g,0,0,99999,Condition(function E96))set P7I=FirstOfGroup(g)call NSI(g)set g=nullif P7I!=null thencall SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveInteger(LY,(GetHandleId(P7I)),(800),(6))call IA1(P7I,L7I[6])endifendifif GetTriggerEventId()==EVENT_UNIT_SPELL_CAST thenif(DQ6(GetSpellAbilityId()))and JGO<=0 thencall PJI(P7I)endifelseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif DQ6(GetSpellAbilityId())or GetSpellAbilityId()==1093817418 thenif GetSpellAbilityId()==1093817418 thencall E66(P7I,null)endifendifelseif JGO<6 thenset GW1=GW1-0.2call SaveReal(LY,(S5I),(442),((GW1)*1.0))if GW1<=0.thencall UnitRemoveAbility(P7I,L7I[JGO])set JGO=JGO+1call IA1(P7I,L7I[JGO])call SaveInteger(LY,(GetHandleId(P7I)),(800),(JGO))call SaveReal(LY,(S5I),(442),((LOI)*1.0))endifendifset P7I=nullset t=nullreturn falseendfunctionfunction EB6 takes unit P7I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.2,true)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_CAST)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EA6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(442),((LOI)*1.0))call SaveInteger(LY,(GetHandleId(P7I)),(800),(6))call IA1(P7I,L7I[6])set t=nullendfunctionfunction QD1 takes nothing returns nothingcall EB6(GK)endfunctionfunction EC6 takes unit ED6 returns nothinglocal unit P7I=K1[GetPlayerId(GetOwningPlayer(ED6))]local integer S5I=GetHandleId(P7I)local integer EE6=(LoadInteger(LY,(S5I),(279)))local integer i=1local integer x=1local unit E76loopexitwhen i>EE6set E76=(LoadUnitHandle(LY,(S5I),(1400+i)))if IC1(E76)==false thencall SaveUnitHandle(LY,(S5I),(1400+x),(E76))set x=x+1endifset i=i+1endloopset EE6=EE6-1call SaveInteger(LY,(S5I),(279),(EE6))set E76=nullset P7I=nullendfunctionfunction EF6 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1865429336 thencall EC6(GetTriggerUnit())endifreturn falseendfunctionfunction EG6 takes nothing returns nothinglocal unit E76local unit P7I=GetTriggerUnit()local integer S5I=GetHandleId(P7I)local integer EE6=(LoadInteger(LY,(S5I),(279)))local unit EH6=(LoadUnitHandle(LY,(S5I),(1400+1)))local real xlocal real ylocal integer JGO=(LoadInteger(LY,(GetHandleId(P7I)),(800)))if JGO>0 thenif GetSpellTargetUnit()==null thenset x=GetSpellTargetX()set y=GetSpellTargetY()elseset x=GetUnitX(GetSpellTargetUnit())set y=GetUnitY(GetSpellTargetUnit())endifcall UnitRemoveAbility(P7I,L7I[JGO])set JGO=IMaxBJ(0,JGO-1)call IA1(P7I,L7I[JGO])call SaveInteger(LY,(GetHandleId(P7I)),(800),(JGO))set E76=CreateUnit(GetOwningPlayer(P7I),1865429336,x,y,0)call UnitApplyTimedLife(E76,1112820806,120)call SetUnitPathing(E76,false)set EE6=EE6+1call SaveUnitHandle(LY,(S5I),(1400+EE6),(E76))call SaveInteger(LY,(S5I),(279),(EE6))if(EE6>6)thencall KillUnit(EH6)endifendifset E76=nullset P7I=nullset EH6=nullendfunctionfunction EZ6 takes nothing returns booleanif DQ6(GetSpellAbilityId())thencall EG6()endifreturn falseendfunctionfunction QA1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EZ6))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function EF6))set L7I[0]=1093873992set L7I[1]=1093873994set L7I[2]=1093873991set L7I[3]=1093817416set L7I[4]=1093873996set L7I[5]=1093873993set L7I[6]=1093873995set t=nullendfunctionfunction BoulderSmash_FindRock takes nothing returns booleanif IsUnitInGroup(GetFilterUnit(),LDI)==false and(GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429552)and GetFilterUnit()!=LFI thencall GroupAddUnit(LDI,GetFilterUnit())set LZI=LZI+1if GetUnitTypeId(GetFilterUnit())==1865429336 thencall KillUnit(GetFilterUnit())endifendifreturn falseendfunctionfunction EV6 takes nothing returns nothingif IsUnitInGroup(GetEnumUnit(),LDI)==false thencall GroupAddUnit(LDI,GetEnumUnit())call P6I(LEI,GetEnumUnit(),1,LHI)if LVI==1 thencall DD1(LEI,GetEnumUnit(),0.25+0.5*LGI)endifif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true and((LoadInteger(LY,(GetHandleId((GetEnumUnit()))),((809))))==1)thenset LWI=GetEnumUnit()endifendifendfunctionfunction EW6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real QJI=(LoadReal(LY,(S5I),(6)))local real QKI=(LoadReal(LY,(S5I),(7)))local real alocal real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local real xlocal real ylocal boolean DM6=falselocal group PR2=(LoadGroupHandle(LY,(S5I),(187)))local group glocal integer RockBonusCount=(LoadInteger(LY,(S5I),(34)))local integer HeroSTR=GetHeroStr(P7I,true)local unit E56=(LoadUnitHandle(LY,(S5I),(810)))if E56!=null thenset QJI=GetUnitX(E56)set QKI=GetUnitY(E56)endifset a=bj_DEGTORAD*UEI(GetUnitX(P8I),GetUnitY(P8I),QJI,QKI)set x=II3+(LCI)*0.03*Cos(a)set y=I13+(LCI)*0.03*Sin(a)if QNI(x,y,QJI,QKI)<(5+(LCI)*0.03)thenset x=QJIset y=QKIset DM6=trueendifset x=PTI(x)set y=PUI(y)set LDI=PR2set LEI=P7Iset LGI=GetUnitAbilityLevel(P7I,1093817685)set LHI=125set LWI=nullif((LoadInteger(LY,(GetHandleId((P8I))),((4306))))==1)==true or GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(P8I,1110456406)>0 or((LoadInteger(LY,(GetHandleId((P8I))),((4336))))==1)==true or(E56==null and GetTriggerEvalCount(t)>200)thenset DM6=trueelsecall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))if GetUnitTypeId(P8I)==1865429336 or GetUnitTypeId(P8I)==1865429552 thenset LVI=1call SetUnitPosition(P8I,x,y)call SetUnitX(P8I,PTI(x))call SetUnitY(P8I,PUI(y))elseset LVI=0call SetUnitX(P8I,PTI(x))call SetUnitY(P8I,PUI(y))endifcall UPI(x,y,150)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))set g=NTI()set GK=P7Icall GroupEnumUnitsInRange(g,x,y,200+25,Condition(function CA1))call GroupRemoveUnit(g,P8I)call ForGroup(g,function EV6)call NSI(g)if LWI!=null and LVI==1 thenset g=NTI()set LFI=nullset AK=9999call GroupEnumUnitsInRange(g,GetUnitX(LWI),GetUnitY(LWI),600+25,Condition(function DG6))call NSI(g)if LFI!=null thenset E56=LFIcall SaveUnitHandle(LY,(S5I),(810),(E56))set DM6=falseendifendifset g=nullendifif DM6 thenif GetUnitTypeId(P8I)!=1865429336 thencall SetUnitPathing(P8I,true)endifcall FlushChildHashtable(LY,(S5I))call S0I(t)call NSI(PR2)call SaveInteger(LY,(GetHandleId((P8I))),((4335)),(2))if GetTriggerEventId()!=EVENT_UNIT_DEATH thenif IsPlayerAlly(GetOwningPlayer(P7I),GetOwningPlayer(P8I))==false thencall P6I(LEI,P8I,1,LHI)endifendifendifset P8I=nullset t=nullset PR2=nullset P7I=nullreturn falseendfunctionfunction EX6 takes nothing returns booleanif GetUnitTypeId(GetFilterUnit())==1865429336 thenreturn trueendifreturn falseendfunctionfunction EY6 takes nothing returns nothinglocal unit P8I=GetSpellTargetUnit()local unit P7I=GetTriggerUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093817685)local trigger tlocal integer S5Ilocal real alocal real xlocal real ylocal integer i=-1local boolean K3O=falselocal real d=400+100*SUIlocal group gif P8I==null thenset g=NTI()call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),180+25,Condition(function EX6))set P8I=FirstOfGroup(g)call NSI(g)set g=nullset a=GetUnitFacing(P7I)elseset a=UDI(P7I,P8I)endifif P8I==null thenreturnendifset t=CreateTrigger()set S5I=GetHandleId(t)if P7I==P8I thenset a=GetUnitFacing(P7I)endifif GetUnitTypeId(P8I)==1865429336 or GetUnitTypeId(P8I)==1865429552 thenset d=2000endifloopexitwhen K3O or i==23set i=i+1set x=PTI(GetUnitX(P8I)+(d-i*25)*Cos(a*bj_DEGTORAD))set y=PUI(GetUnitY(P8I)+(d-i*25)*Sin(a*bj_DEGTORAD))if(IsPointInRegion(LN,((x)*1.0),((y)*1.0)))==false thenset K3O=trueendifendloopcall SetUnitPathing(P8I,false)call TriggerRegisterTimerEvent(t,0.03,true)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function EW6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))call SaveReal(LY,(S5I),(23),((GetUnitX(P8I))*1.0))call SaveReal(LY,(S5I),(24),((GetUnitY(P8I))*1.0))call SaveInteger(LY,(S5I),(34),(0))call SaveGroupHandle(LY,(S5I),(187),(NTI()))call SaveUnitHandle(LY,(S5I),(810),(null))call SaveInteger(LY,(GetHandleId((P8I))),((4335)),(1))set P8I=nullset P7I=nullset t=nullendfunctionfunction EJ6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local group gif GetUnitTypeId(P8I)==1848651852 thencall PJI(P7I)call PZI(GetOwningPlayer(P7I),GetObjectName(1848658745))elseif P8I==null thenset g=NTI()call GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),180+25,Condition(function EX6))if FirstOfGroup(g)==null thencall PJI(P7I)call PZI(GetOwningPlayer(P7I),GetObjectName(1848658745))endifcall NSI(g)set g=nullendifset P7I=nullset P8I=nullendfunctionfunction EK6 takes nothing returns booleanif GetSpellAbilityId()==1093817685 thenif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT thenif IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==false or NNI(GetSpellTargetUnit())==false thencall EY6()endifelsecall EJ6()endifendifreturn falseendfunctionfunction QB1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function EK6))set t=nullendfunctionfunction EL6 takes nothing returns nothingcall P6I(LXI,GetEnumUnit(),1,LYI)endfunctionfunction EM6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group glocal boolean EN6=falseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thenif DQ6(GetSpellAbilityId())and GetSpellTargetUnit()==I01 thenset EN6=trueendifendifif EN6==true or GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT thenset g=NTI()call SetUnitX(P8I,GetUnitX(I01))call SetUnitY(P8I,GetUnitY(I01))call KillUnit(I01)call SetUnitInvulnerable(P8I,false)call PauseUnit(P8I,false)call ShowUnit(P8I,true)call ClearSelectionForPlayer(GetOwningPlayer(P8I))call SelectUnitAddForPlayer(P8I,GetOwningPlayer(P8I))call FlushChildHashtable(LY,(S5I))call S0I(t)set GK=P7Iset LXI=P7Iset LYI=300call GroupEnumUnitsInRange(g,GetUnitX(P8I),GetUnitY(P8I),300+25,Condition(function CA1))call ForGroup(g,function EL6)call NSI(g)endifset g=nullset t=nullset P7I=nullset P8I=nullset I01=nullreturn falseendfunctionfunction ES6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093817145)local trigger tlocal integer S5Ilocal unit I01=CreateUnit(GetOwningPlayer(P7I),1865429552,GetUnitX(P8I),GetUnitY(P8I),0)local integer JGO=(LoadInteger(LY,(GetHandleId(GetTriggerUnit())),(800)))if(IsUnitEnemy(P8I,GetOwningPlayer(P7I)))==false or NNI(GetSpellTargetUnit())==false thenset t=CreateTrigger()set S5I=GetHandleId(t)call SelectUnitRemoveForPlayer(P8I,GetOwningPlayer(P8I))call SetUnitInvulnerable(P8I,true)call PauseUnit(P8I,true)call ShowUnit(P8I,false)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(19),(I01))call TriggerRegisterTimerEvent(t,3,false)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function EM6))endifset I01=CreateUnit(GetOwningPlayer(P8I),1865429553,GetUnitX(P8I),GetUnitY(P8I),0)call UnitApplyTimedLife(I01,1112820806,3)set P7I=nullset P8I=nullset I01=nullset t=nullendfunctionfunction ET6 takes nothing returns booleanif GetSpellAbilityId()==1093817145 thencall ES6()endifreturn falseendfunctionfunction ER6 takes nothing returns nothingif IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(LoadBoolean(LY,(GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))),(139)))and GetSpellTargetUnit()!=GetTriggerUnit()thencall PJI(GetTriggerUnit())call PZI(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))endifendfunctionfunction EP6 takes nothing returns booleanif GetSpellAbilityId()==1093817145 thencall ER6()endifreturn falseendfunctionfunction QC1 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ET6))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function EP6))set t=nullendfunctionfunction XCO takes nothing returns nothingcall IA1(GK,1093817145)endfunctionfunction EQ6 takes nothing returns nothingset LKI=GetEnumUnit()call ExecuteFunc("EU6")endfunctionfunction F06 takes nothing returns booleanreturn IC1(GetFilterUnit())==false and(GetUnitTypeId(GetFilterUnit())==1865429336 or GetUnitTypeId(GetFilterUnit())==1865429552)and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4335))))==1)==false and((LoadInteger(LY,(GetHandleId((GetFilterUnit()))),((4340))))==1)==falseendfunctionfunction FI6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local group g=NTI()local integer NPI=GetTriggerEvalCount(t)local integer SUI=GetUnitAbilityLevel(P7I,1093817417)local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(807)))if ModuloInteger(NPI,5)==0 thencall P6I(P7I,P8I,1,(25+25*SUI)/2)endifset LJI=P7Iset GK=P7Icall GroupEnumUnitsInRange(g,x,y,400+25,Condition(function F06))call ForGroup(g,function EQ6)call NSI(g)if(TimerGetElapsed(M))>LVO or IC1(P8I)thencall SaveInteger(LY,(GetHandleId((P8I))),((809)),(2))call DestroyEffect((LoadEffectHandle(LY,(S5I),(32))))call FlushChildHashtable(LY,(S5I))call S0I(t)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction F16 takes unit P7I,unit P8I returns nothinglocal trigger tlocal integer S5Ilocal real LVO=(LoadReal(LY,(GetHandleId(P8I)),(807)))call SaveReal(LY,(GetHandleId(P8I)),(807),(((TimerGetElapsed(M))+6)*1.0))if LVO<(TimerGetElapsed(M))thencall SaveInteger(LY,(GetHandleId((P8I))),((809)),(1))set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveEffectHandle(LY,(S5I),(32),(AddSpecialEffectTarget("war3mapImported\\MagnetizeTargetOverhead.mdx",P8I,"origin")))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function FI6))endifset t=nullendfunctionfunction FO6 takes nothing returns nothingcall F16(LJI,GetEnumUnit())endfunctionfunction F26 takes unit P7I,unit P8I returns nothinglocal group g=NTI()local real x=GetUnitX(P8I)local real y=GetUnitY(P8I)local real V83=300if GetUnitTypeId(P8I)==1865429336 thencall DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherMissile\\DemolisherMissile.mdx",GetUnitX(P8I),GetUnitY(P8I)))call UnitApplyTimedLife(P8I,1112820806,8)call SaveInteger(LY,(GetHandleId((P8I))),((4340)),(1))call SetUnitVertexColor(P8I,0,0,0,100)set V83=600elsecall DestroyEffect(AddSpecialEffect("war3mapImported\\MagnetizeCastAoE.mdx",GetUnitX(P8I),GetUnitY(P8I)))endifset GK=P7Iset LJI=P7Iset LKI=P8Icall GroupEnumUnitsInRange(g,x,y,V83+25,Condition(function CA1))call ForGroup(g,function FO6)call NSI(g)set P7I=nullset g=nullendfunctionfunction EU6 takes nothing returns nothingcall F26(LJI,LKI)endfunctionfunction F36 takes nothing returns booleanif GetSpellAbilityId()==1093817417 thencall F26(GetTriggerUnit(),GetTriggerUnit())endifreturn falseendfunctionfunction Q81 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function F36))set t=nullendfunctionfunction F46 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetUnitAnimationByIndex(P7I,8)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction F56 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SetUnitAnimationByIndex(P7I,7)call TriggerRegisterTimerEvent(t,2.5,false)call TriggerAddCondition(t,Condition(function F46))call SaveUnitHandle(LY,(S5I),(2),(P7I))set t=nullset P7I=nullendfunctionfunction F66 takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1311788373 or GetUnitTypeId(GetTriggerUnit())==1311788375 thencall F56()endifreturn falseendfunctionfunction Q71 takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function F66))set t=nullendfunctionfunction F76 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local real LVO=(LoadReal(LY,(GetHandleId(P8I)),(804)))if LVO>(TimerGetElapsed(M))or GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093817168)endifset t=nullset P8I=nullreturn falseendfunctionfunction F86 takes unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call SaveReal(LY,(GetHandleId(P8I)),(804),(((TimerGetElapsed(M))+10)*1.0))call SaveUnitHandle(LY,(S5I),(17),(P8I))call TriggerRegisterTimerEvent(t,0.1,true)call TriggerRegisterDeathEvent(t,P8I)call TriggerAddCondition(t,Condition(function F76))call IA1(P8I,1093817168)call SetPlayerAbilityAvailable(GetOwningPlayer(P8I),1093817168,false)set t=nullendfunctionfunction F96 takes nothing returns nothingif IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetEnumUnit())==true thenset LMI=truecall F86(GetEnumUnit())endifcall P6I(LLI,GetEnumUnit(),1,75*LNI)endfunctionfunction FA6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+200)call FlushChildHashtable(LY,(S5I))call S0I(t)set t=nullset P7I=nullreturn falseendfunctionfunction FB6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local real x=(LoadReal(LY,(S5I),(6)))local real y=(LoadReal(LY,(S5I),(7)))local group g=NTI()set LNI=GetUnitAbilityLevel(P7I,1093817167)set GK=P7Iset LLI=P7Iset LMI=falsecall GroupEnumUnitsInRange(g,x,y,175+25,Condition(function CA1))call ForGroup(g,function F96)call NSI(g)call U7I("effects\\BasicWaterFlash.mdx",x,y,1)call FlushChildHashtable(LY,(S5I))call S0I(t)if LMI thenset t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call TriggerRegisterTimerEvent(t,0,false)call TriggerAddCondition(t,Condition(function FA6))endifset g=nullset t=nullset P7I=nullreturn falseendfunctionfunction FC6 takes nothing returns nothinglocal unit P7I=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local integer SUI=GetUnitAbilityLevel(P7I,1093817167)local trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.6,false)call TriggerAddCondition(t,Condition(function FB6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveReal(LY,(S5I),(6),((x)*1.0))call SaveReal(LY,(S5I),(7),((y)*1.0))set P7I=nullset t=nullendfunctionfunction FD6 takes nothing returns booleanif GetSpellAbilityId()==1093817167 thencall FC6()endifreturn falseendfunctionfunction Register_Pop takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FD6))set t=nullendfunctionfunction FE6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=(LoadInteger(LY,(S5I),(5)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thenif GetOwningPlayer(GetEventDamageSource())==GetOwningPlayer(P7I)or GetOwningPlayer(GetEventDamageSource())==GetOwningPlayer(P8I)thencall DisableTrigger(t)call P6I(P7I,P8I,3,GetEventDamage()*(0.6+0.1*SUI))call QGI(P7I,GetEventDamage()*(0.6+0.1*SUI))call EnableTrigger(t)endifendifif GetTriggerEventId()!=EVENT_UNIT_DAMAGED or IC1(P8I)thencall DestroyEffect((LoadEffectHandle(LY,(S5I),(175))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(176))))call DestroyEffect((LoadEffectHandle(LY,(S5I),(177))))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitRemoveAbility(P8I,1093817160)call UnitRemoveAbility(P8I,1110460241)endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction FF6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local integer SUI=GetUnitAbilityLevel(P7I,1093817161)call IA1(P8I,1093817160)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,P7I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,3.5+0.5*SUI,false)call TriggerAddCondition(t,Condition(function FE6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveInteger(LY,(S5I),(5),(SUI))call SaveEffectHandle(LY,(S5I),(175),(AddSpecialEffectTarget("effects\\PoisonHands.mdx",P8I,"overhead")))call SaveEffectHandle(LY,(S5I),(176),(AddSpecialEffectTarget("effects\\PoisonHands.mdx",P8I,"hand,left")))call SaveEffectHandle(LY,(S5I),(177),(AddSpecialEffectTarget("effects\\PoisonHands.mdx",P8I,"hand,right")))set t=nullset P7I=nullset P8I=nullendfunctionfunction FG6 takes nothing returns booleanif GetSpellAbilityId()==1093817161 thencall FF6()endifreturn falseendfunctionfunction Register_SealedFate takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FG6))set t=nullendfunctionfunction FH6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IYO=(LoadUnitHandle(LY,(S5I),(335)))if GetTriggerEventId()==EVENT_UNIT_DAMAGED thencall SetUnitState(P8I,UNIT_STATE_LIFE,RMaxBJ(1,GetUnitState(P8I,UNIT_STATE_LIFE)-GetEventDamage()))elseif GetTriggerEventId()==EVENT_WIDGET_DEATH thencall FlushChildHashtable(LY,(S5I))call S0I(t)if GetTriggerUnit()==P8I thencall KillUnit(IYO)endifelsecall IssueTargetOrderById(IYO,851986,P8I)endifset t=nullset P7I=nullset P8I=nullset IYO=nullreturn falseendfunctionfunction FZ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local unit IYO=GetSummonedUnit()local unit I01if GetUnitAbilityLevel(IYO,1110460239)>0 thencall FlushChildHashtable(LY,(S5I))call S0I(t)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))call SaveUnitHandle(LY,(S5I),(335),(IYO))call TriggerRegisterDeathEvent(t,IYO)call TriggerRegisterDeathEvent(t,P8I)call TriggerRegisterUnitEvent(t,IYO,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function FH6))set I01=CreateUnit(GetOwningPlayer(IYO),1697656901,GetUnitX(IYO),GetUnitY(IYO),0)call UnitAddAbility(I01,1093816917)call SetUnitAbilityLevel(I01,1093816917,GetUnitAbilityLevel(P7I,1093816663))call IssueTargetOrder(I01,"banish",IYO)call UnitShareVision(IYO,GetOwningPlayer(P7I),true)call IssueTargetOrderById(IYO,851986,P8I)endifset t=nullset P7I=nullset P8I=nullset IYO=nullset I01=nullreturn falseendfunctionfunction FV6 takes nothing returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local unit P7I=GetTriggerUnit()local unit P8I=GetSpellTargetUnit()local unit I01local player pcall UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function FZ6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))if IsUnitAlly(P8I,BO[0])==true thenset p=BO[0]elseset p=CO[0]endifset I01=CreateUnit(p,1697656901,GetUnitX(P8I),GetUnitY(P8I),0)call UnitAddAbility(I01,1093816916)call SetUnitAbilityLevel(I01,1093816916,GetUnitAbilityLevel(P7I,1093816663))call IssueTargetOrderById(I01,852274,P8I)set t=nullset P7I=nullset P8I=nullendfunctionfunction FW6 takes nothing returns booleanif GetSpellAbilityId()==1093816663 thencall FV6()endifreturn falseendfunctionfunction Register_SoulFragment takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FW6))set t=nullendfunctionfunction FX6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))local unit P8I=(LoadUnitHandle(LY,(S5I),(17)))local integer SUI=GetUnitAbilityLevel(P7I,1093817169)if GetTriggerEventId()!=EVENT_UNIT_DAMAGED thencall FlushChildHashtable(LY,(S5I))call S0I(t)elsecall SetUnitState(P7I,UNIT_STATE_LIFE,GetUnitState(P7I,UNIT_STATE_LIFE)+GetEventDamage()*(0.25+0.25*SUI))call SetUnitState(P7I,UNIT_STATE_MANA,GetUnitState(P7I,UNIT_STATE_MANA)+GetEventDamage()*(0.25*SUI))endifset t=nullset P7I=nullset P8I=nullreturn falseendfunctionfunction FY6 takes unit P7I,unit P8I returns nothinglocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)call TriggerRegisterUnitEvent(t,P8I,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function FX6))call SaveUnitHandle(LY,(S5I),(2),(P7I))call SaveUnitHandle(LY,(S5I),(17),(P8I))set t=nullendfunctionfunction FJ6 takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit P7I=(LoadUnitHandle(LY,(S5I),(2)))call FlushChildHashtable(LY,(S5I))call S0I(t)call UnitAddAbility(P7I,1093817176)call UnitRemoveAbility(P7I,1093817176)set P7I=nullset t=nullreturn falseendfunctionfunction FK6 takes nothing returns nothingif RKI(GetEnumUnit())==false thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",GetEnumUnit(),"overhead"))call SetUnitOwner(LRI,GetOwningPlayer(GetEnumUnit()),false)call IssueTargetOrder(LRI,"banish",GetEnumUnit())call FY6(LPI,GetEnumUnit())endifendfunctionfunction RiftWalk_Move takes nothing returns booleanlocal trigger t=GetTriggeringTrigger()local integer S5I=GetHandleId(t)local unit SFI=(LoadUnitHandle(LY,(S5I),(14)))local real x2=(LoadReal(LY,(S5I),(66)))local real y2=(LoadReal(LY,(S5I),(67)))local real a=(LoadReal(LY,(S5I),(137)))local integer NPI=GetTriggerEvalCount(t)local real x=GetUnitX(SFI)local real y=GetUnitY(SFI)local real II3=(LoadReal(LY,(S5I),(23)))local real I13=(LoadReal(LY,(S5I),(24)))local unit I01=(LoadUnitHandle(LY,(S5I),(19)))local group g=NTI()local group PR2=(LoadGroupHandle(LY,(S5I),(187)))local integer SUI=GetUnitAbilityLevel(SFI,1093817169)if QNI(x,y,x2,y2)<=LSI thenset x=x2set y=y2elseset x=PTI(II3+65*Cos(a*bj_DEGTORAD))set y=PUI(I13+65*Sin(a*bj_DEGTORAD))endifset GK=SFIset LTI=PR2set LRI=I01set LPI=SFIcall GroupEnumUnitsInRange(g,x,y,200+25,Condition(function CA1))call ForGroup(g,function FK6)call NSI(g)call SaveReal(LY,(S5I),(23),((x)*1.0))call SaveReal(LY,(S5I),(24),((y)*1.0))call SetUnitX(SFI,x)call SetUnitY(SFI,y)if(x==x2 and y==y2)or NPI>40 thencall NSI(PR2)call FlushChildHashtable(LY,(S5I))call S0I(t)call KillUnit(I01)call UnitAddAbility(SFI,1093817175)call UnitRemoveAbility(SFI,1093817175)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(SFI))call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function FJ6))call SetUnitAnimation(SFI,"stand")call SetUnitPathing(SFI,true)call SetUnitInvulnerable(SFI,false)if GetUnitTypeId(SFI)==1160786520 thencall SetUnitVertexColor(SFI,255,255,255,255)elsecall SetUnitVertexColor(SFI,255,255,255,255)endifcall SaveInteger(LY,(GetHandleId((SFI))),((4261)),(2))endifset t=nullset SFI=nullset I01=nullreturn falseendfunctionfunction FL6 takes nothing returns nothinglocal unit SFI=GetTriggerUnit()local location llocal trigger t=CreateTrigger()local integer S5I=GetHandleId(t)local real x1=GetUnitX(SFI)local real y1=GetUnitY(SFI)local real x2local real y2local real alocal unit I01=CreateUnit(GetOwningPlayer(SFI),1697656901,x1,y1,0)local group g=NTI()if GetSpellTargetUnit()==null thenset l=GetSpellTargetLoc()elseset l=GetUnitLoc(GetSpellTargetUnit())endifset x2=GetLocationX(l)set y2=GetLocationY(l)set a=UEI(x1,y1,x2,y2)call RemoveLocation(l)call IA1(I01,1093817174)call SetUnitAbilityLevel(I01,1093817174,GetUnitAbilityLevel(SFI,1093817169))set LRI=I01set LPI=SFIcall GroupEnumUnitsInRange(g,x2,y2,200+25,Condition(function C51))call ForGroup(g,function FK6)call NSI(g)set g=nullcall UnitAddAbility(SFI,1093817175)call UnitRemoveAbility(SFI,1093817175)set t=CreateTrigger()set S5I=GetHandleId(t)call SaveUnitHandle(LY,(S5I),(2),(SFI))call TriggerRegisterTimerEvent(t,4,false)call TriggerAddCondition(t,Condition(function FJ6))set SFI=nullset l=nullset t=nullset I01=nullendfunctionfunction FM6 takes nothing returns booleanif GetSpellAbilityId()==1093817169 thencall FL6()endifreturn falseendfunctionfunction Register_RiftWalk takes nothing returns nothinglocal trigger t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function FM6))set t=nullendfunctionfunction InitCustomTeams takes nothing returns nothingcall SetPlayerTeam(Player(1),0)call SetPlayerTeam(Player(2),0)call SetPlayerTeam(Player(3),0)call SetPlayerTeam(Player(4),0)call SetPlayerTeam(Player(5),0)call SetPlayerTeam(Player(7),1)call SetPlayerTeam(Player(8),1)call SetPlayerTeam(Player(9),1)call SetPlayerTeam(Player(10),1)call SetPlayerTeam(Player(11),1)endfunctionfunction main takes nothing returns nothinglocal weathereffect welocal integer ilocal player plocal unit ulocal integer MSIlocal trigger tlocal real lifelocal integer MLIlocal integer MMIlocal version vlocal integer MGIlocal real HE1local real HF1local real HG1local real HH1local real HZ1local real HV1local real HW1local real HX1local real HY1local real HJ1local real HK1local real HL1local real HM1local real HN1local real HS1local real HT1local real HR1local real HP1local real HQ1local real HU1local integer Z01local player T4Ilocal real ZH1local real ZZ1local real ZV1local real ZW1local real ZX1local real ZY1local real ZJ1local real ZK1local real ZL1local real ZM1local real ZN1local real ZS1local real ZT1local real ZR1local real ZP1local real ZQ1local real ZU1local real V01local real VI1local real V11local real VO1local real V21local real V31local real V41local location BFOlocal region S5Olocal real dlocal integer S5Icall SetCameraBounds(-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-7936.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),-7552.0+GetCameraMargin(CAMERA_MARGIN_LEFT),7424.0-GetCameraMargin(CAMERA_MARGIN_TOP),7552.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7936.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")call SetWaterBaseColor(0,0,255,255)call NewSoundEnvironment("Default")call SetAmbientDaySound("FelwoodDay")call SetAmbientNightSound("FelwoodNight")call SetMapMusic("Music",true,0)set BC=CreateSound("Abilities\\Spells\\Human\\Avatar\\Avatar.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(BC,"Avatar")call SetSoundDuration(BC,3199)set CC=CreateSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(CC,"BlinkTarget")call SetSoundDuration(CC,1466)call SetSoundPitch(CC,1.6)set DC=CreateSound("Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav",true,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(DC,"BlizzardLoop")call SetSoundDuration(DC,4000)set EC=CreateSound("Buildings\\Undead\\TempleOfTheDamned\\TempleOfTheDamnedWhat.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(EC,"TempleOfTheDamnedWhat")call SetSoundDuration(EC,3518)call SetSoundDistanceCutoff(EC,2000.0)set FC=CreateSound("Abilities\\Spells\\Human\\Flare\\FlareTarget2.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(FC,"Flare2")call SetSoundDuration(FC,1344)call SetSoundDistanceCutoff(FC,2000.0)set GC=CreateSound("Sounds\\Dominating.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(GC,1802)call SetSoundChannel(GC,0)call SetSoundVolume(GC,127)call SetSoundPitch(GC,1.0)set HC=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(HC,2012)call SetSoundChannel(HC,0)call SetSoundVolume(HC,127)call SetSoundPitch(HC,1.0)set ZC=CreateSound("Sounds\\firstblood.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(ZC,1567)call SetSoundChannel(ZC,0)call SetSoundVolume(ZC,127)call SetSoundPitch(ZC,1.0)set VC=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(VC,"GoblinSapperPissed")call SetSoundDuration(VC,1515)call SetSoundChannel(VC,0)set WC=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav",false,false,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(WC,"GoblinSapperYesAttack")call SetSoundDuration(WC,813)call SetSoundChannel(WC,0)set XC=CreateSound("Sounds\\GodLike.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(XC,1828)call SetSoundChannel(XC,0)call SetSoundVolume(XC,127)call SetSoundPitch(XC,1.0)set YC=CreateSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav",false,true,true,10,10,"HeroAcksEAX")call SetSoundParamsFromLabel(YC,"HeroBladeMasterPissed")call SetSoundDuration(YC,2235)set JC=CreateSound("Sounds\\HolyShit.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(JC,2325)call SetSoundChannel(JC,0)call SetSoundVolume(JC,127)call SetSoundPitch(JC,1.0)set NC=CreateSound("Buildings\\NightElf\\MoonWell\\MoonWellWhat1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(NC,"MoonWellWhat")call SetSoundDuration(NC,2972)call SetSoundDistances(NC,600.0,10000.0)call SetSoundDistanceCutoff(NC,2000.0)set TC=CreateSound("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaos.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(TC,"MarkOfChaos")call SetSoundDuration(TC,4000)set RC=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(RC,2377)call SetSoundChannel(RC,0)call SetSoundVolume(RC,127)call SetSoundPitch(RC,1.0)set PC=CreateSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(PC,"DeathNightElfBuildingCancel")call SetSoundDuration(PC,3675)set QC=CreateSound("Sounds\\MegaKill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(QC,2612)call SetSoundChannel(QC,0)call SetSoundVolume(QC,127)call SetSoundPitch(QC,1.0)set UC=CreateSound("Abilities\\Spells\\NightElf\\ShadowMeld\\ShadowMeld1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(UC,"ShadowMeld")call SetSoundDuration(UC,941)set OD=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(OD,3344)call SetSoundChannel(OD,0)call SetSoundVolume(OD,127)call SetSoundPitch(OD,1.0)set ED=CreateSound("Units\\Creeps\\Ogre\\OgrePissed1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(ED,"OgrePissed")call SetSoundDuration(ED,3309)set JD=CreateSound("Sounds\\Ownage.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(JD,2586)call SetSoundChannel(JD,0)call SetSoundVolume(JD,127)call SetSoundPitch(JD,1.0)set KD=CreateSound("Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav",false,true,true,10,10,"HeroAcksEAX")call SetSoundParamsFromLabel(KD,"PandarenBrewmasterPissed")call SetSoundDuration(KD,2316)set LD=CreateSound("Abilities\\Spells\\Human\\Polymorph\\PolymorphDone.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(LD,"PolymorphDone")call SetSoundDuration(LD,1498)set MD=CreateSound("Buildings\\Naga\\TempleofTides\\TempleOfTidesWhat1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(MD,"TempleOfTidesWhat")call SetSoundDuration(MD,3483)call SetSoundDistanceCutoff(MD,2000.0)set ND=CreateSound("Buildings\\Undead\\TombOfRelics\\TombOfRelicsWhat1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(ND,"TombOfRelicsWhat")call SetSoundDuration(ND,3065)call SetSoundDistanceCutoff(ND,2000.0)set TD=CreateSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(TD,"Disenchant")call SetSoundDuration(TD,2043)set PD=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,10,10,"")call SetSoundParamsFromLabel(PD,"Rescue")call SetSoundDuration(PD,3796)set QD=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(QD,"Sleep")call SetSoundDuration(QD,3203)set UD=CreateSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav",false,true,true,10,10,"MissilesEAX")call SetSoundParamsFromLabel(UD,"DevourMagicLaunch")call SetSoundDuration(UD,1225)set IE=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,10,10,"MissilesEAX")call SetSoundParamsFromLabel(IE,"BlackArrowHit")call SetSoundDuration(IE,1776)call SetSoundVolume(IE,50)set OE=CreateSound("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",false,false,false,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(OE,"HornOfCenariusSound")call SetSoundDuration(OE,12121)call SetSoundVolume(OE,115)set AE=CreateSound("Sounds\\triple_kill.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(AE,1907)call SetSoundChannel(AE,0)call SetSoundVolume(AE,127)call SetSoundPitch(AE,1.0)set EE=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(EE,2038)call SetSoundChannel(EE,0)call SetSoundVolume(EE,127)call SetSoundPitch(EE,1.0)set FE=CreateSound("Abilities\\Spells\\Human\\DivineShield\\PaladinDivineShieldDeath1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(FE,"DivineShieldDeath")call SetSoundDuration(FE,1043)call SetSoundDistanceCutoff(FE,1500.0)set GE=CreateSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(GE,"SoulGem")call SetSoundDuration(GE,4474)set HE=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,10,10,"DefaultEAXON")call SetSoundDuration(HE,2612)call SetSoundChannel(HE,0)call SetSoundVolume(HE,127)call SetSoundPitch(HE,1.0)set ZE=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack4.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(ZE,"GoblinSapperYesAttack")call SetSoundDuration(ZE,1091)call SetSoundChannel(ZE,0)set VE=CreateSound("Abilities\\Spells\\NightElf\\shadowstrike\\ShadowStrikeBirth1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(VE,"ShadowStrikeBirth")call SetSoundDuration(VE,2194)call SetSoundPitch(VE,1.2)set WE=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,10,10,"MissilesEAX")call SetSoundParamsFromLabel(WE,"BlackArrowHit")call SetSoundDuration(WE,1776)call SetSoundPitch(WE,1.6)set XE=CreateSound("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissileLaunch1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(XE,"CorrosiveBreathMissileLaunch")call SetSoundDuration(XE,1301)call SetSoundPitch(XE,1.2)set YE=CreateSound("Sound\\Interface\\Warning\\NightElf\\SentinelAllyHeroDies1.wav",false,false,false,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(YE,"AllyHeroDiesNightElf")call SetSoundDuration(YE,1963)call SetSoundVolume(YE,127)set JE=CreateSound("Sound\\Interface\\Warning\\Undead\\NecromancerAllyHeroDies1.wav",false,false,false,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(JE,"AllyHeroDiesUndead")call SetSoundDuration(JE,1933)call SetSoundVolume(JE,127)set KE=CreateSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav",false,false,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(KE,"ReviveHuman")call SetSoundDuration(KE,3196)call SetSoundChannel(KE,8)set LE=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,10,10,"")call SetSoundParamsFromLabel(LE,"SecretFound")call SetSoundDuration(LE,2525)set ME=CreateSound("Sounds\\UltraKill.mp3",false,false,false,10,10,"")call SetSoundDuration(ME,1958)call SetSoundChannel(ME,0)call SetSoundVolume(ME,127)call SetSoundPitch(ME,1.0)set NE=CreateSound("Sounds\\Rampage.mp3",false,false,false,10,10,"")call SetSoundDuration(NE,1195)call SetSoundChannel(NE,0)call SetSoundVolume(NE,127)call SetSoundPitch(NE,1.0)set SE=CreateSound("Buildings\\NightElf\\AltarOfElders\\AltarOfEldersWhat1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(SE,"AltarOfEldersWhat")call SetSoundDuration(SE,3496)set TE=CreateSound("Units\\Orc\\AncestralGuardian\\AncestralGuardianAttack1.wav",false,true,true,10,10,"CombatSoundsEAX")call SetSoundParamsFromLabel(TE,"AncestralGuardianAttack1")call SetSoundDuration(TE,1181)set RE=CreateSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(RE,"Feedback")call SetSoundDuration(RE,1222)set PE=CreateSound("Units\\Undead\\Abomination\\AbominationPissed5.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(PE,"AbominationPissed")call SetSoundDuration(PE,1735)set QE=CreateSound("Units\\Undead\\Abomination\\AbominationDeath1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(QE,"AbominationDeath")call SetSoundDuration(QE,2455)set UE=CreateSound("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(UE,"ArtilleryExplodeDeath")call SetSoundDuration(UE,1486)set IF=CreateSound("Units\\Undead\\CryptFiend\\CryptFiendPissed2.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(IF,"CryptFiendPissed")call SetSoundDuration(IF,3541)set OF=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(OF,"BansheeDeath")call SetSoundDuration(OF,2380)set AF=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(AF,"FlameStrikeTarget")call SetSoundDuration(AF,1927)set BF=CreateSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav",false,false,false,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(BF,"VolcanoLoop")call SetSoundDuration(BF,7616)set CF=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,false,false,10,10,"SpellsEAX")call SetSoundParamsFromLabel(CF,"ThunderClap")call SetSoundDuration(CF,3451)set DF=CreateSound("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImage.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(DF,"MirrorImage")call SetSoundDuration(DF,1756)set EF=CreateSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav",true,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(EF,"CloudOfFogLoop")call SetSoundDuration(EF,2038)call SetSoundPitch(EF,0.9)set FF=CreateSound("Units\\Human\\Gyrocopter\\GyrocopterPissed1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(FF,"GyrocopterPissed")call SetSoundDuration(FF,3913)set WF=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,10,10,"")call SetSoundParamsFromLabel(WF,"SecretFound")call SetSoundDuration(WF,2525)set XF=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,10,10,"")call SetSoundParamsFromLabel(XF,"Hint")call SetSoundDuration(XF,2006)set YF=CreateSound("war3mapImported\\pl_impact_stun.mp3",false,true,true,10,10,"SpellsEAX")call SetSoundDuration(YF,1340)call SetSoundChannel(YF,11)call SetSoundVolume(YF,127)call SetSoundPitch(YF,1.0)call SetSoundDistances(YF,600.0,10000.0)call SetSoundDistanceCutoff(YF,2000.0)call SetSoundConeAngles(YF,0.0,0.0,127)call SetSoundConeOrientation(YF,0.0,0.0,0.0)set JF=CreateSound("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",true,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(JF,"HumanFireLarge")call SetSoundDuration(JF,3471)set KF=CreateSound("Units\\Human\\Phoenix\\PhoenixEggWhat1.wav",false,false,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(KF,"PhoenixEggWhat")call SetSoundDuration(KF,1579)call SetSoundChannel(KF,0)set LF=CreateSound("Abilities\\Spells\\NightElf\\BattleRoar\\BattleRoar.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(LF,"BattleRoar")call SetSoundDuration(LF,1991)set MF=CreateSound("Buildings\\Undead\\Ziggurat\\ZigguratUpgrade.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(MF,"ZigguratUpgradeWhat")call SetSoundDuration(MF,4203)call SetSoundDistances(MF,600.0,10000.0)call SetSoundDistanceCutoff(MF,3000.0)set NF=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(NF,"SpellStealMissileLaunch")call SetSoundDuration(NF,1541)set SF=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealTarget.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(SF,"SpellStealTarget")call SetSoundDuration(SF,984)set TF=CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(TF,"AcolyteMining")call SetSoundDuration(TF,4233)call SetSoundChannel(TF,0)set RF=CreateSound("Abilities\\Weapons\\AvengerMissile\\DestroyerMissile.wav",false,true,true,10,10,"MissilesEAX")call SetSoundParamsFromLabel(RF,"DestroyerMissileLaunch")call SetSoundDuration(RF,817)set PF=CreateSound("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouch.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(PF,"SpiritTouch")call SetSoundDuration(PF,2043)call SetSoundChannel(PF,11)set QF=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(QF,"FlameStrikeTarget")call SetSoundDuration(QF,1927)set UF=CreateSound("Units\\Orc\\SentryWard\\SentryWard.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(UF,"SentryWardBirth")call SetSoundDuration(UF,1499)set IG=CreateSound("Buildings\\Orc\\TaurenTotem\\TaurenTotemWhat1.wav",false,true,true,10,10,"DefaultEAXON")call SetSoundParamsFromLabel(IG,"TaurenTotemWhat")call SetSoundDuration(IG,3785)set OG=CreateSound("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissileLaunch3.wav",false,true,true,10,10,"MissilesEAX")call SetSoundParamsFromLabel(OG,"GargoyleMissileLaunch")call SetSoundDuration(OG,919)set AG=CreateSound("Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(AG,"ReceiveGold")call SetSoundDuration(AG,589)set BG=CreateSound("Abilities\\Spells\\Human\\InnerFire\\InnerFireBirth.wav",false,true,true,10,10,"SpellsEAX")call SetSoundParamsFromLabel(BG,"InnerFire")call SetSoundDuration(BG,2096)set L3=Rect(6176.0,3136.0,6400.0,3392.0)set M3=Rect(3616.0,3584.0,3872.0,3872.0)set N3=Rect(2304.0,5280.0,2752.0,5728.0)set S3=Rect(6176.0,5952.0,6624.0,6240.0)set T3=Rect(-4224.0,-6848.0,-3968.0,-6592.0)set R3=Rect(-6304.0,-4384.0,-6080.0,-4224.0)set P3=Rect(-4928.0,-5760.0,-4736.0,-5536.0)set Q3=Rect(6048.0,3424.0,6304.0,3776.0)set U3=Rect(4128.0,3776.0,4352.0,4032.0)set I4=Rect(2752.0,5408.0,3040.0,5632.0)set O4=Rect(-7040.0,-6912.0,-6688.0,-6656.0)set A4=Rect(-3648.0,-6880.0,-3424.0,-6688.0)set B4=Rect(-6336.0,-4224.0,-5984.0,-3904.0)set C4=Rect(-4896.0,-5504.0,-4608.0,-5184.0)set D4=Rect(2912.0,-2944.0,3104.0,-2720.0)set E4=Rect(5696.0,5504.0,7296.0,7392.0)set F4=Rect(-7680.0,-8032.0,-6176.0,-6240.0)set G4=Rect(-2464.0,1536.0,-2240.0,1760.0)set H4=Rect(4512.0,-1120.0,4768.0,-832.0)set Z4=Rect(-3328.0,-416.0,-3104.0,-96.0)set V4=Rect(1440.0,-4096.0,1728.0,-3872.0)set W4=Rect(-4576.0,3328.0,-4448.0,3488.0)set X4=Rect(-3264.0,4192.0,-2912.0,4320.0)set Y4=Rect(2848.0,-5088.0,3072.0,-4928.0)set J4=Rect(-1824.0,2240.0,-1472.0,2464.0)set K4=Rect(3008.0,-3776.0,3136.0,-3648.0)set L4=Rect(1184.0,2976.0,1280.0,3104.0)set M4=Rect(-512.0,-3648.0,-320.0,-3520.0)set N4=Rect(-7104.0,6656.0,-6848.0,6912.0)set S4=Rect(-7104.0,6656.0,-6880.0,6880.0)set T4=Rect(-5952.0,-6432.0,-5248.0,-5728.0)set R4=Rect(5088.0,7488.0,5792.0,8192.0)set P4=Rect(4032.0,-2432.0,4320.0,-2144.0)set Q4=Rect(3904.0,-1408.0,4960.0,-640.0)set U4=Rect(-3552.0,-768.0,-2528.0,320.0)set I5=Rect(1056.0,-5216.0,2368.0,-3744.0)set O5=Rect(-5120.0,3008.0,-3648.0,4320.0)set A5=Rect(-3456.0,3808.0,-2656.0,4864.0)set B5=Rect(2272.0,-6080.0,3776.0,-4928.0)set C5=Rect(-1888.0,2208.0,-992.0,3040.0)set D5=Rect(416.0,2624.0,1632.0,3648.0)set E5=Rect(2592.0,-4800.0,3744.0,-3328.0)set F5=Rect(-1024.0,-3808.0,192.0,-2752.0)set G5=Rect(-7936.0,-7776.0,-5920.0,-5760.0)set H5=Rect(5504.0,5184.0,7744.0,7136.0)set Z5=Rect(-800.0,3072.0,64.0,4032.0)set V5=Rect(-384.0,3392.0,-192.0,3520.0)set W5=Rect(-1728.0,-5056.0,-768.0,-3840.0)set X5=Rect(-1152.0,-4704.0,-960.0,-4480.0)set Y5=Rect(-480.0,-800.0,-256.0,-512.0)set J5=Rect(3648.0,-2528.0,4384.0,-2208.0)set K5=Rect(7264.0,-5504.0,7488.0,-5280.0)set L5=Rect(-8160.0,6848.0,-7968.0,7040.0)set M5=Rect(3744.0,-2464.0,4416.0,-1984.0)set N5=Rect(3456.0,-2624.0,4416.0,-2112.0)set S5=Rect(3584.0,-2560.0,4192.0,-2336.0)set T5=Rect(4096.0,-2528.0,4192.0,-2144.0)set R5=Rect(3968.0,-2624.0,4096.0,-1920.0)set P5=Rect(3936.0,-2528.0,4192.0,-2240.0)set Q5=Rect(3968.0,-2624.0,4032.0,-2048.0)set U5=Rect(3872.0,-2592.0,4480.0,-2240.0)set I6=Rect(3936.0,-2528.0,4448.0,-1984.0)set O6=Rect(-8160.0,-8192.0,-3712.0,-4352.0)set A6=Rect(-8192.0,-4960.0,-4640.0,-3552.0)set B6=Rect(-4000.0,-7744.0,-3072.0,-5152.0)set C6=Rect(2304.0,4064.0,8032.0,7776.0)set D6=Rect(4640.0,1952.0,8000.0,4384.0)set E6=Rect(3136.0,2816.0,5216.0,4960.0)set F6=Rect(-7968.0,5216.0,-7456.0,5920.0)set G6=Rect(-8064.0,2880.0,-7648.0,4512.0)set H6=Rect(-3296.0,3712.0,-2688.0,3968.0)set Z6=Rect(-2400.0,2016.0,-1952.0,2624.0)set V6=Rect(-2016.0,1600.0,-1216.0,2048.0)set W6=Rect(-2144.0,2528.0,-1888.0,2944.0)set X6=Rect(-1280.0,1728.0,-736.0,2176.0)set Y6=Rect(-1696.0,-768.0,-1376.0,-448.0)set J6=Rect(-576.0,0.0,-352.0,256.0)set K6=Rect(3872.0,-1984.0,4448.0,-1504.0)set L6=Rect(3456.0,-2048.0,4064.0,-1664.0)set M6=Rect(4992.0,-3072.0,5664.0,-2784.0)set N6=Rect(4896.0,-3744.0,5280.0,-3456.0)set S6=Rect(7488.0,-3520.0,8192.0,-2336.0)set T6=Rect(6656.0,-3328.0,7808.0,-2656.0)set R6=Rect(7104.0,-8192.0,8192.0,-5920.0)set P6=Rect(5952.0,-8192.0,7200.0,-7712.0)set Q6=Rect(7168.0,-6240.0,8128.0,-5184.0)set U6=Rect(5824.0,-8032.0,6400.0,-7776.0)set I7=Rect(6976.0,-6560.0,7488.0,-5920.0)set O7=Rect(-5856.0,2944.0,-5600.0,3200.0)set A7=Rect(6784.0,-7776.0,7264.0,-7456.0)set B7=Rect(-8128.0,-8192.0,5536.0,-7744.0)set C7=Rect(2368.0,-7904.0,2688.0,-7584.0)set D7=Rect(-1664.0,-7808.0,-1344.0,-7552.0)set E7=Rect(-2944.0,-8192.0,-1664.0,-7680.0)set F7=Rect(-4000.0,-8192.0,-3168.0,-7616.0)set G7=Rect(-5760.0,-8000.0,-5184.0,-7584.0)set H7=Rect(-3296.0,3744.0,-3104.0,3872.0)set Z7=Rect(-8192.0,-8192.0,-6720.0,-7744.0)set V7=Rect(-8192.0,-6432.0,-7456.0,-4928.0)set W7=Rect(-8192.0,-8128.0,-7904.0,8160.0)set X7=Rect(-7744.0,3936.0,-7328.0,5600.0)set Y7=Rect(-7680.0,1984.0,-6560.0,2816.0)set J7=Rect(-7776.0,1696.0,-6944.0,2176.0)set K7=Rect(-8032.0,-3040.0,-7680.0,-2720.0)set L7=Rect(-7904.0,-2656.0,-7552.0,-2336.0)set M7=Rect(-3936.0,-2720.0,-3584.0,-2400.0)set N7=Rect(-3168.0,-1952.0,-2912.0,-1696.0)set S7=Rect(-4128.0,-1632.0,-3776.0,-1152.0)set T7=Rect(-4992.0,-1792.0,-3968.0,-1440.0)set R7=Rect(-5536.0,-1664.0,-4832.0,-1280.0)set P7=Rect(-2304.0,3872.0,-2048.0,4096.0)set Q7=Rect(-5664.0,-1440.0,-5344.0,0.0)set U7=Rect(-5824.0,-1504.0,-5472.0,-544.0)set I8=Rect(-5216.0,-1216.0,-4480.0,-384.0)set O8=Rect(-5632.0,448.0,-5152.0,1856.0)set A8=Rect(-5856.0,1440.0,-5248.0,2592.0)set B8=Rect(-5408.0,1888.0,-4928.0,2368.0)set C8=Rect(-5056.0,1664.0,-4064.0,2144.0)set D8=Rect(-4320.0,1344.0,-3808.0,1952.0)set E8=Rect(-4224.0,1440.0,-3200.0,2016.0)set F8=Rect(-2112.0,3424.0,-1856.0,3744.0)set G8=Rect(-2400.0,640.0,-2208.0,896.0)set H8=Rect(-3392.0,640.0,-3200.0,896.0)set Z8=Rect(-3744.0,-1024.0,-3232.0,384.0)set V8=Rect(-2016.0,-5504.0,-1664.0,-4768.0)set W8=Rect(-1760.0,-5248.0,-1312.0,-4800.0)set X8=Rect(896.0,-3328.0,1088.0,-3072.0)set Y8=Rect(2368.0,-3808.0,2688.0,-3360.0)set J8=Rect(1952.0,-3744.0,2208.0,-3456.0)set K8=Rect(-768.0,-1344.0,-480.0,-1024.0)set L8=Rect(1152.0,-6560.0,1376.0,-6272.0)set M8=Rect(1216.0,-6368.0,1504.0,-6176.0)set N8=Rect(-1376.0,-6784.0,-1184.0,-6528.0)set S8=Rect(7616.0,-6528.0,8192.0,8160.0)set T8=Rect(7072.0,-2304.0,7264.0,-2048.0)set R8=Rect(-7872.0,7872.0,8192.0,8192.0)set P8=Rect(1792.0,7776.0,2112.0,8192.0)set Q8=Rect(-2656.0,0.0,-2496.0,256.0)set U8=Rect(-768.0,7232.0,-416.0,7424.0)set I9=Rect(-7968.0,5472.0,-7648.0,5792.0)set O9=Rect(1120.0,7904.0,1312.0,8160.0)set A9=Rect(736.0,4480.0,1120.0,4800.0)set B9=Rect(2208.0,4928.0,2400.0,5152.0)set C9=Rect(576.0,4384.0,1120.0,4928.0)set D9=Rect(2560.0,4160.0,2784.0,4576.0)set E9=Rect(-5984.0,-3776.0,-5504.0,-3232.0)set F9=Rect(576.0,4256.0,1024.0,4672.0)set G9=Rect(544.0,4352.0,992.0,4768.0)set H9=Rect(704.0,2496.0,1376.0,2784.0)set Z9=Rect(-2240.0,1792.0,-1856.0,2240.0)set V9=Rect(-1472.0,1472.0,-992.0,1728.0)set W9=Rect(2368.0,-3200.0,2656.0,-2880.0)set X9=Rect(2624.0,-3584.0,2816.0,-2848.0)set Y9=Rect(2464.0,-3392.0,2656.0,-3136.0)set J9=Rect(2784.0,-3232.0,2976.0,-2976.0)set K9=Rect(2784.0,-3424.0,2976.0,-3168.0)set L9=Rect(7328.0,7808.0,8192.0,8192.0)set M9=Rect(1984.0,7584.0,3296.0,8192.0)set N9=Rect(2240.0,7392.0,2560.0,8192.0)set S9=Rect(-1888.0,416.0,-1696.0,576.0)set T9=Rect(7776.0,2720.0,8192.0,3648.0)set R9=Rect(5280.0,640.0,5664.0,1184.0)set P9=Rect(-3104.0,2720.0,-2624.0,3232.0)set Q9=Rect(7584.0,-7072.0,7776.0,-6880.0)set Y8=Rect(2816.0,-3488.0,3008.0,-3232.0)set J8=Rect(1568.0,-2976.0,1760.0,-2656.0)set W9=Rect(2368.0,-3264.0,2656.0,-2944.0)set X9=Rect(2624.0,-3648.0,2816.0,-2912.0)set Y9=Rect(2464.0,-3456.0,2656.0,-3200.0)set B7=Rect(-8192.0,-8128.0,5472.0,-7648.0)set U9=Rect(-8192.0,-3712.0,-7008.0,-2144.0)set IA=Rect(-3360.0,-8192.0,-1472.0,-7648.0)set OA=Rect(-2528.0,-7840.0,-1696.0,-7488.0)set BA=Rect(-2336.0,-7584.0,-1600.0,-7456.0)set CA=Rect(-8192.0,2016.0,-6816.0,2880.0)set DA=Rect(6880.0,-3328.0,8000.0,-2624.0)set EA=Rect(-7520.0,-7040.0,-7360.0,-6912.0)set FA=Rect(-7520.0,-6912.0,-7360.0,-6784.0)set GA=Rect(-7520.0,-6656.0,-7360.0,-6528.0)set HA=Rect(-7520.0,-6528.0,-7360.0,-6400.0)set ZA=Rect(-7520.0,-6784.0,-7360.0,-6656.0)set VA=Rect(6944.0,6208.0,7104.0,6336.0)set WA=Rect(6944.0,6080.0,7104.0,6208.0)set XA=Rect(6944.0,5952.0,7104.0,6080.0)set YA=Rect(6944.0,5824.0,7104.0,5952.0)set JA=Rect(6944.0,5696.0,7104.0,5824.0)set KA=Rect(3904.0,2976.0,4160.0,3264.0)set LA=Rect(2336.0,5952.0,2592.0,6240.0)set MA=Rect(6304.0,1984.0,6560.0,2272.0)set NA=Rect(-3328.0,-6912.0,-3072.0,-6624.0)set SA=Rect(-4384.0,-4800.0,-4128.0,-4512.0)set TA=Rect(-6432.0,-3840.0,-6176.0,-3552.0)set RA=Rect(-7584.0,6176.0,-6304.0,7552.0)set PA=Rect(3616.0,-2656.0,3968.0,-2080.0)set QA=Rect(4000.0,-2592.0,4416.0,-2016.0)set UA=Rect(-1088.0,5376.0,768.0,6624.0)set IB=Rect(1600.0,1024.0,3456.0,2432.0)set OB=Rect(5504.0,-1056.0,7200.0,512.0)set AB=Rect(-6944.0,-1792.0,-5248.0,-224.0)set BB=Rect(-1536.0,-7424.0,640.0,-6048.0)set CB=Rect(-3328.0,-7200.0,-2464.0,-6368.0)set DB=Rect(-4288.0,-4544.0,-3424.0,-3712.0)set EB=Rect(-6784.0,-3616.0,-5920.0,-2784.0)set FB=Rect(1472.0,5440.0,2336.0,6272.0)set GB=Rect(2656.0,2336.0,3520.0,3168.0)set HB=Rect(5984.0,1152.0,6848.0,1984.0)set ZB=Rect(-4128.0,-3712.0,-2496.0,-2272.0)set VB=Rect(-8192.0,-8128.0,-5120.0,-5536.0)set WB=Rect(4608.0,4352.0,8192.0,8192.0)set XB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)set YB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)set JB=Rect(-8096.0,-7104.0,-8064.0,-7072.0)set E9=Rect(6208.0,7488.0,8192.0,8192.0)set KB=Rect(-2784.0,1280.0,-1952.0,2048.0)set LB=Rect(2528.0,-3168.0,3360.0,-2464.0)set MB=Rect(-3936.0,4480.0,-3136.0,5120.0)set SB=Rect(3680.0,-6016.0,4416.0,-5376.0)set TB=Rect(3424.0,-352.0,4224.0,320.0)set RB=Rect(-4608.0,-448.0,-3872.0,192.0)set PB=Rect(3456.0,-2624.0,4384.0,-2112.0)set QB=Rect(608.0,4320.0,1120.0,4768.0)set IC=Rect(-3840.0,1440.0,-3328.0,1888.0)set OC=Rect(2400.0,-3360.0,2912.0,-2912.0)set AC=Rect(-1888.0,-5280.0,-1376.0,-4832.0)set p=Player(15)set WY=CreateUnit(p,1966092378,7360.0,-4416.0,270.000)call SetUnitColor(WY,ConvertPlayerColor(12))set VY=CreateUnit(p,1966092378,-7296.0,4224.0,270.000)call SetUnitColor(VY,ConvertPlayerColor(12))set NZ=CreateUnit(p,1848657231,-7168.0,6464.0,270.000)call SetUnitColor(NZ,ConvertPlayerColor(0))set TZ=CreateUnit(p,1848652102,-7424.0,-6976.0,270.000)set LZ=CreateUnit(p,1848657231,-7360.0,6464.0,270.000)call SetUnitColor(LZ,ConvertPlayerColor(0))set RZ=CreateUnit(p,1848652102,-7424.0,-6592.0,270.000)set PZ=CreateUnit(p,1848652102,-7424.0,-6464.0,270.000)set VX=CreateUnit(p,1848657231,-7360.0,6784.0,270.000)call SetUnitColor(VX,ConvertPlayerColor(0))set HX=CreateUnit(p,1848657231,-6848.0,6784.0,270.000)call SetUnitColor(HX,ConvertPlayerColor(0))set QZ=CreateUnit(p,1848652102,-7424.0,-6720.0,270.000)set UZ=CreateUnit(p,1848652102,-7424.0,-6848.0,270.000)set IV=CreateUnit(p,1852206952,-7296.0,-7200.0,270.000)set u=CreateUnit(p,1967339316,3200.0,-64.0,270.000)set IZ=CreateUnit(p,1848657231,-6848.0,6464.0,270.000)call SetUnitColor(IZ,ConvertPlayerColor(0))set BX=CreateUnit(p,1848652102,7040.0,6272.0,270.000)set CX=CreateUnit(p,1848652102,7040.0,5888.0,270.000)set DX=CreateUnit(p,1848652102,7040.0,5760.0,270.000)set EX=CreateUnit(p,1848652102,7040.0,6016.0,270.000)set AX=CreateUnit(p,1848652102,7040.0,6144.0,270.000)set GX=CreateUnit(p,1852073580,6784.0,6368.0,270.000)set EZ=CreateUnit(p,1848657231,-7360.0,7104.0,270.000)call SetUnitColor(EZ,ConvertPlayerColor(0))set ZX=CreateUnit(p,1848657231,-7168.0,7104.0,270.000)call SetUnitColor(ZX,ConvertPlayerColor(0))set u=CreateUnit(p,1967339316,-4544.0,1152.0,270.000)set MZ=CreateUnit(p,1848657231,-7168.0,6784.0,270.000)call SetUnitColor(MZ,ConvertPlayerColor(0))set HY=CreateUnit(p,1848657231,-6848.0,7104.0,270.000)call SetUnitColor(HY,ConvertPlayerColor(0))set KZ=CreateUnit(p,1966092592,-7296.0,4416.0,270.000)call SetUnitColor(KZ,ConvertPlayerColor(12))set XY=CreateUnit(p,1966092592,7360.0,-4224.0,270.000)call SetUnitColor(XY,ConvertPlayerColor(12))set JY=CreateUnit(p,1848657231,-6656.0,7104.0,270.000)call SetUnitColor(JY,ConvertPlayerColor(0))set KY=CreateUnit(p,1848657231,-6656.0,6464.0,270.000)call SetUnitColor(KY,ConvertPlayerColor(0))set YY=CreateUnit(p,1848657231,-6656.0,6784.0,270.000)call SetUnitColor(YY,ConvertPlayerColor(0))set p=Player(0)set OV=CreateUnit(p,1849897784,-7264.0,-6944.0,270.000)call SetUnitColor(OV,ConvertPlayerColor(12))set AV=CreateUnit(p,1848652107,-7264.0,-6752.0,270.000)call SetUnitColor(AV,ConvertPlayerColor(12))set DV=CreateUnit(p,1848651833,-6624.0,-6560.0,270.000)call SetUnitColor(DV,ConvertPlayerColor(12))set VZ=CreateUnit(p,1848651864,-7136.0,-6496.0,270.000)call SetUnitColor(VZ,ConvertPlayerColor(1))set HZ=CreateUnit(p,1848651862,-6880.0,-6496.0,270.000)call SetUnitColor(HZ,ConvertPlayerColor(12))set FZ=CreateUnit(p,1848651863,-7264.0,-6560.0,270.000)call SetUnitColor(FZ,ConvertPlayerColor(12))set AZ=CreateUnit(p,1848651826,-6752.0,-6496.0,270.000)call SetUnitColor(AZ,ConvertPlayerColor(12))set HW=CreateUnit(p,1697657397,-6624.0,-7200.0,270.000)set CV=CreateUnit(p,1749236021,-6944.0,-7200.0,270.000)call SetUnitColor(CV,ConvertPlayerColor(0))set UH=CreateUnit(p,1702129516,-5632.0,-6144.0,270.000)set VV=CreateUnit(p,1697656915,-4448.0,-4960.0,270.000)set XV=CreateUnit(p,1697656915,-5280.0,-6112.0,270.000)set VW=CreateUnit(p,1701080930,-6400.0,-5696.0,270.000)set WV=CreateUnit(p,1697656915,-6368.0,-4256.0,270.000)set YV=CreateUnit(p,1697656915,-5600.0,-5728.0,270.000)set JV=CreateUnit(p,1700884333,-6080.0,-4480.0,270.000)set KV=CreateUnit(p,1700884325,-6656.0,-4480.0,270.000)set MV=CreateUnit(p,1700884333,-4416.0,-5312.0,270.000)set TV=CreateUnit(p,1700884325,-4864.0,-4992.0,270.000)set NV=CreateUnit(p,1697656915,-3744.0,-6816.0,270.000)set LV=CreateUnit(p,1700884333,-4032.0,-7040.0,270.000)set SV=CreateUnit(p,1700884325,-4032.0,-6528.0,270.000)set UV=CreateUnit(p,1701670775,-5792.0,-5408.0,270.000)set QV=CreateUnit(p,1701670775,-6624.0,-5088.0,270.000)set PV=CreateUnit(p,1701670775,-5088.0,-5536.0,270.000)set IW=CreateUnit(p,1701670775,-5344.0,-3936.0,270.000)set OW=CreateUnit(p,1701670775,-5088.0,-4576.0,270.000)set AW=CreateUnit(p,1701670775,-3936.0,-5344.0,270.000)set BW=CreateUnit(p,1701670775,-4512.0,-7072.0,270.000)set CW=CreateUnit(p,1701670775,-4896.0,-6240.0,270.000)set DW=CreateUnit(p,1701670775,-3808.0,-5856.0,270.000)set EW=CreateUnit(p,1701670775,-5472.0,-4704.0,270.000)set FW=CreateUnit(p,1701670775,-4512.0,-5856.0,270.000)set GW=CreateUnit(p,1700884343,-4544.0,-6528.0,270.000)set ZV=CreateUnit(p,1697656915,-6112.0,-1248.0,270.000)set BV=CreateUnit(p,1700884343,-6080.0,-5120.0,270.000)set HV=CreateUnit(p,1697656915,-6112.0,1568.0,270.000)set GV=CreateUnit(p,1697656915,-1504.0,-1824.0,270.000)set FV=CreateUnit(p,1697656915,-544.0,-6688.0,270.000)set EV=CreateUnit(p,1697656915,4960.0,-6752.0,270.000)set WZ=CreateUnit(p,1697656915,-3488.0,-3296.0,270.000)set ZW=CreateUnit(p,1701080930,-5248.0,-6848.0,270.000)set ZY=CreateUnit(p,1848657989,-7008.0,-6496.0,270.000)call SetUnitColor(ZY,ConvertPlayerColor(12))set p=Player(6)set MW=CreateUnit(p,1848651826,5984.0,6112.0,270.000)call SetUnitColor(MW,ConvertPlayerColor(12))set SW=CreateUnit(p,1848651863,6048.0,6624.0,270.000)call SetUnitColor(SW,ConvertPlayerColor(12))set TW=CreateUnit(p,1848651862,5984.0,6240.0,270.000)call SetUnitColor(TW,ConvertPlayerColor(12))set RW=CreateUnit(p,1848651864,5984.0,6496.0,270.000)call SetUnitColor(RW,ConvertPlayerColor(1))set OX=CreateUnit(p,1849897784,6560.0,6624.0,270.000)call SetUnitColor(OX,ConvertPlayerColor(12))set IX=CreateUnit(p,1848652107,6368.0,6624.0,270.000)call SetUnitColor(IX,ConvertPlayerColor(12))set WX=CreateUnit(p,1970496880,4352.0,3584.0,270.000)set QW=CreateUnit(p,1848651833,6048.0,5984.0,270.000)call SetUnitColor(QW,ConvertPlayerColor(12))set UW=CreateUnit(p,1849897781,6816.0,5984.0,270.000)call SetUnitColor(UW,ConvertPlayerColor(12))set PW=CreateUnit(p,1966092369,6816.0,5664.0,270.000)set YZ=CreateUnit(p,1966092365,6240.0,-2080.0,270.000)set XZ=CreateUnit(p,1966092356,6304.0,-96.0,270.000)set RX=CreateUnit(p,1970956647,4384.0,4256.0,270.000)set KX=CreateUnit(p,1970172012,5184.0,4864.0,270.000)set LX=CreateUnit(p,1970564964,3904.0,3904.0,270.000)set MX=CreateUnit(p,1966092365,1056.0,-96.0,270.000)set NX=CreateUnit(p,1966092356,2528.0,1824.0,270.000)set SX=CreateUnit(p,1966092366,3936.0,3488.0,270.000)set TX=CreateUnit(p,1966092372,4832.0,4832.0,270.000)set XX=CreateUnit(p,1966092372,5152.0,4512.0,270.000)set PX=CreateUnit(p,1970956647,3168.0,4064.0,270.000)set QX=CreateUnit(p,1970956647,5728.0,4000.0,270.000)set LW=CreateUnit(p,1966092366,2976.0,5792.0,270.000)set KW=CreateUnit(p,1970496880,3392.0,5504.0,270.000)set JW=CreateUnit(p,1970564964,3392.0,6080.0,270.000)set YW=CreateUnit(p,1970956647,4128.0,6240.0,270.000)set XW=CreateUnit(p,1970495856,3968.0,5888.0,270.000)set UX=CreateUnit(p,1969385326,4992.0,5952.0,270.000)set IY=CreateUnit(p,1970956647,2656.0,4704.0,270.000)set OY=CreateUnit(p,1970956647,5536.0,2464.0,270.000)set AY=CreateUnit(p,1970956647,4064.0,5280.0,270.000)set BY=CreateUnit(p,1970956647,3488.0,4832.0,270.000)set CY=CreateUnit(p,1970495856,6400.0,3584.0,270.000)set DY=CreateUnit(p,1970564964,6080.0,2944.0,270.000)set EY=CreateUnit(p,1970496880,6656.0,2880.0,270.000)set FY=CreateUnit(p,1966092366,6368.0,2528.0,270.000)set GY=CreateUnit(p,1970956647,5024.0,3744.0,270.000)set WW=CreateUnit(p,1970956647,6880.0,3936.0,270.000)set JX=CreateUnit(p,1969385326,6464.0,4608.0,270.000)set YX=CreateUnit(p,1970956647,4640.0,2848.0,270.000)set GZ=CreateUnit(p,1966092365,-4704.0,5920.0,270.000)set SZ=CreateUnit(p,1966092356,32.0,5920.0,270.000)set JZ=CreateUnit(p,1848657989,5984.0,6368.0,270.000)call SetUnitColor(JZ,ConvertPlayerColor(12))set p=Player(15)set BZ=CreateUnit(p,1697656900,-6005.1,5458.6,212.150)set ZZ=CreateUnit(p,1697656898,-561.7,-651.7,325.600)set DZ=CreateUnit(p,1697656897,5901.5,-6198.9,64.000)set CZ=CreateUnit(p,1697656888,-5467.9,-5891.1,307.304)set OZ=CreateUnit(p,1697656881,4901.8,4536.6,212.110)call ConfigureNeutralVictim()set M2I=Filter(function MJI)set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)set filterEnumDestructablesInCircleBJ=Filter(function MBI)set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)set MLI=0loopexitwhen MLI==16set bj_FORCE_PLAYER[MLI]=CreateForce()call ForceAddPlayer(bj_FORCE_PLAYER[MLI],Player(MLI))set MLI=MLI+1endloopset bj_FORCE_ALL_PLAYERS=CreateForce()call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)set bj_cineModePriorSpeed=GetGameSpeed()set bj_cineModePriorFogSetting=IsFogEnabled()set bj_cineModePriorMaskSetting=IsFogMaskEnabled()set MLI=0loopexitwhen MLI>=bj_MAX_QUEUED_TRIGGERSset bj_queuedExecTriggers[MLI]=nullset bj_queuedExecUseConds[MLI]=falseset MLI=MLI+1endloopset bj_isSinglePlayer=falseset MMI=0set MLI=0loopexitwhen MLI>=12if(GetPlayerController(Player(MLI))==MAP_CONTROL_USER and GetPlayerSlotState(Player(MLI))==PLAYER_SLOT_STATE_PLAYING)thenset MMI=MMI+1endifset MLI=MLI+1endloopset bj_isSinglePlayer=(MMI==1)set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,10000,10000)set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,10000,10000)set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,10000,10000)set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,10000,10000)set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,10000,10000)set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,10000,10000)set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,10000,10000)set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,10000,10000)set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,10000,10000)call DelayedSuspendDecayCreate()set v=VersionGet()if(v==VERSION_REIGN_OF_CHAOS)thenset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0elseset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1endifcall InitQueuedTriggers()call InitRescuableBehaviorBJ()call InitDNCSounds()call InitMapRects()call InitSummonableCaps()set MGI=0loopset bj_stockAllowedPermanent[MGI]=falseset bj_stockAllowedCharged[MGI]=falseset bj_stockAllowedArtifact[MGI]=falseset MGI=MGI+1exitwhen MGI>10endloopcall SetAllItemTypeSlots(11)call SetAllUnitTypeSlots(11)set bj_stockUpdateTimer=CreateTimer()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function MXI)set bj_stockItemPurchased=CreateTrigger()call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player(15),EVENT_PLAYER_UNIT_SELL_ITEM,null)call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)call DetectGameStarted()set i=0set i=0loopexitwhen(i>16)set T[i]=0set P[i]=0set Q[i]=0set V0[i]=0set i=i+1endloopset i=0loopexitwhen(i>100)set R[i]=falseset H1[i]=0set Z1[i]=0set V1[i]=0set W1[i]=0set Y1[i]=0set J1[i]=0set VO[i]=0set i=i+1endloopset i=0loopexitwhen(i>4)set I0[i]=0set i=i+1endloopset i=0loopexitwhen(i>2)set A0[i]=falseset W0[i]=0set T1[i]=0set i=i+1endloopset i=0loopexitwhen(i>12)set C0[i]=""set E0[i]=CreateTimer()set i=i+1endloopset i=0loopexitwhen(i>13)set D0[i]=falseset F0[i]=CreateTimer()set S0[i]=falseset IO[i]=0set F3[i]=falseset i=i+1endloopset i=0loopexitwhen(i>1)set G0[i]=0set M2[i]=""set S2[i]=falseset T2[i]=0set E3[i]=falseset i=i+1endloopset T0=150set EI=trueset FI=trueset GI=trueset HI=trueset ZI=trueset VI=trueset WI=trueset XI=trueset YI=trueset JI=trueset KI=trueset LI=trueset NI=3set SI=1set X1=80set i=0loopexitwhen(i>17)set K1[i]=nullset i=i+1endloopset i=0loopexitwhen(i>40)set R1[i]=0set P1[i]=0set Q1[i]=0set i=i+1endloopset OO=CreateForce()set AO=CreateForce()set B2=CreateGroup()set X2=CreateTimer()set P2=CreateForce()set U2=0.00set O3=trueset A3=trueset i=0loopexitwhen(i>14)set C3[i]=falseset i=i+1endloopset i=0loopexitwhen(i>15)set K3[i]="Here"set i=i+1endloopcall NOI()call NQI()set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15,true)call TriggerAddCondition(t,Condition(function S1I))set t=nullset HJ[0]=falseset HJ[1]=falseset HJ[2]=falseset HJ[3]=falseset HJ[4]=falseset HJ[5]=falseset HJ[6]=falseset HJ[7]=falseset HJ[8]=falseset HJ[9]=falseset HJ[10]=falseset HJ[11]=falseset HJ[12]=falseset HJ[13]=falseset HJ[14]=falseset HJ[15]=falseset HJ[16]=falseset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function B11))set t=nullset YN=CreateRegion()call RegionAddRect(YN,G5)set KN=CreateRegion()call RegionAddRect(KN,H5)set XN=CreateRegion()call RegionAddRect(XN,O6)call RegionAddRect(XN,A6)call RegionAddRect(XN,B6)set JN=CreateRegion()call RegionAddRect(JN,C6)call RegionAddRect(JN,D6)call RegionAddRect(JN,E6)set LN=CreateRegion()call RegionAddRect(LN,F6)call RegionAddRect(LN,G6)call RegionAddRect(LN,H6)call RegionAddRect(LN,Z6)call RegionAddRect(LN,V6)call RegionAddRect(LN,W6)call RegionAddRect(LN,X6)call RegionAddRect(LN,Y6)call RegionAddRect(LN,J6)call RegionAddRect(LN,K6)call RegionAddRect(LN,L6)call RegionAddRect(LN,M6)call RegionAddRect(LN,N6)call RegionAddRect(LN,S6)call RegionAddRect(LN,T6)call RegionAddRect(LN,R6)call RegionAddRect(LN,P6)call RegionAddRect(LN,Q6)call RegionAddRect(LN,U6)call RegionAddRect(LN,I7)call RegionAddRect(LN,O7)call RegionAddRect(LN,A7)call RegionAddRect(LN,B7)call RegionAddRect(LN,C7)call RegionAddRect(LN,D7)call RegionAddRect(LN,E7)call RegionAddRect(LN,F7)call RegionAddRect(LN,G7)call RegionAddRect(LN,H7)call RegionAddRect(LN,Z7)call RegionAddRect(LN,V7)call RegionAddRect(LN,W7)call RegionAddRect(LN,X7)call RegionAddRect(LN,Y7)call RegionAddRect(LN,J7)call RegionAddRect(LN,K7)call RegionAddRect(LN,L7)call RegionAddRect(LN,M7)call RegionAddRect(LN,N7)call RegionAddRect(LN,S7)call RegionAddRect(LN,T7)call RegionAddRect(LN,R7)call RegionAddRect(LN,P7)call RegionAddRect(LN,Q7)call RegionAddRect(LN,U7)call RegionAddRect(LN,I8)call RegionAddRect(LN,O8)call RegionAddRect(LN,A8)call RegionAddRect(LN,B8)call RegionAddRect(LN,C8)call RegionAddRect(LN,D8)call RegionAddRect(LN,E8)call RegionAddRect(LN,F8)call RegionAddRect(LN,G8)call RegionAddRect(LN,H8)call RegionAddRect(LN,Z8)call RegionAddRect(LN,V8)call RegionAddRect(LN,W8)call RegionAddRect(LN,X8)call RegionAddRect(LN,Y8)call RegionAddRect(LN,J8)call RegionAddRect(LN,K8)call RegionAddRect(LN,L8)call RegionAddRect(LN,M8)call RegionAddRect(LN,N8)call RegionAddRect(LN,S8)call RegionAddRect(LN,T8)call RegionAddRect(LN,R8)call RegionAddRect(LN,P8)call RegionAddRect(LN,Q8)call RegionAddRect(LN,U8)call RegionAddRect(LN,I9)call RegionAddRect(LN,O9)call RegionAddRect(LN,A9)call RegionAddRect(LN,B9)call RegionAddRect(LN,C9)call RegionAddRect(LN,D9)call RegionAddRect(LN,E9)call RegionAddRect(LN,F9)call RegionAddRect(LN,G9)call RegionAddRect(LN,H9)call RegionAddRect(LN,Z9)call RegionAddRect(LN,V9)call RegionAddRect(LN,W9)call RegionAddRect(LN,X9)call RegionAddRect(LN,Y9)call RegionAddRect(LN,J9)call RegionAddRect(LN,K9)call RegionAddRect(LN,L9)call RegionAddRect(LN,M9)call RegionAddRect(LN,N9)call RegionAddRect(LN,S9)call RegionAddRect(LN,T9)call RegionAddRect(LN,R9)call RegionAddRect(LN,P9)set MN=CreateRegion()call RegionAddRect(MN,QB)call RegionAddRect(MN,IC)call RegionAddRect(MN,OC)call RegionAddRect(MN,AC)call EI1(1110455898)call EI1(1112560453)call EI1(1110455889)call EI1(1112757326)call EI1(1112044643)call EI1(1110458957)call EI1(1110458962)call EI1(1110459185)call EI1(1111844210)call EI1(1110454869)call EI1(1110456133)call EI1(1110459206)call EI1(1110455885)call EI1(1110456142)call EI1(1110456403)call EI1(1110454353)call EI1(1110456114)call EI1(1112891758)call EI1(1110456629)call EI1(1110456371)call EI1(1110454870)call EI1(1110454617)call EI1(1112432994)call EI1(1110456402)call EI1(1110455862)call EI1(1110455113)call EI1(1110455859)call EI1(1113943649)call EI1(1113943655)call EI1(1110455107)call EI1(1110454348)call EI1(1112040289)call EI1(1113813860)call EI1(1110456121)call EI1(1110458961)call EI1(1110458937)call EI1(1114665575)call EI1(1110456397)call EI1(1110454855)call EI1(1110454616)call EI1(1110454596)call EI1(1110456626)call EI1(1110458705)call EI1(1111847784)call EI1(1110454583)call EI1(1110458693)call EI1(1110458692)call EI1(1110456399)call EI1(1114010223)call EI1(1110454839)call EI1(1110454840)call EI1(1110455624)call EI1(1110458963)call EI1(1113813609)call EI1(1110458950)call EI1(1110458949)call EI1(1110456624)call EI1(1110454328)call EI1(1110455362)call EI1(1110454854)call EI1(1112896368)call EI1(1114993524)call EI1(1110459203)call EI1(1111716457)call EI1(1110455114)call EI1(1111847784)call EI1(1110458705)call EI1(1113943649)call EI1(1113943655)call EI1(1110456120)call EI1(1113875828)call EI1(1110454356)call EI1(1114860655)call EI1(1112433768)call EI1(1110459192)call EI1(1110456399)call EI1(1110456150)call EI1(1110456149)call EI1(1110454616)call EI1(1112437609)call EI1(1110455089)call EI1(1112437615)call EI1(1110454352)call EI1(1110454861)call EI1(1093749828)call EI1(1110459204)call EI1(1093749313)call EI1(1110455347)call EI1(1112436833)call EI1(1110454606)call EI1(1112105826)call EI1(1110455377)call EI1(1110454339)call EI1(1110456651)call EI1(1110455091)call EI1(1110456390)call EI1(1110456389)call EI1(1114664809)call EI1(1110458701)call EI1(1112437348)call EI1(1110454344)call EI1(1112500344)call EI1(1110455110)call EI1(1110454862)call EI1(1110459703)call EI1(1110455876)call EI1(1110458958)call EI1(1110456657)call EI1(1110459465)call EI1(1110458946)call EI1(1110456650)call EI1(1110458694)call EI1(1110456386)call EI1(1110456113)call EI1(1110456398)call EI1(1110454857)call EI1(1110456401)call EI1(1110459186)call EI1(1110455891)call EI1(1110454867)call EI1(1110454871)call EI1(1110455633)call EI1(1110454852)call EI1(1110458969)call EI1(1110454864)call EI1(1110455622)call EI1(1110459728)call EI1(1110459730)call EI1(1110459732)call EI1(1110459982)call EI1(1110459993)call EI1(1110459988)call EI1(1110459994)call EI1(1110460208)call EI1(1110460244)call EI1(1110459957)call EI1(1093752627)call EI1(1110459471)call EI1(1110454869)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E51))set t=nullcall FlushGameCache(InitGameCache("dr.x"))set OS=InitGameCache("dr.x")set BS[0]=1093744454set BS[1]=1093744455set BS[2]=1093744456set BS[3]=1093744451set BS[4]=1093744452set BS[5]=1093744453set BS[6]=1093744458set BS[7]=1093744457set BS[8]=1093744460set CS[0]=1093818457set CS[1]=1093818456set CS[2]=1093818455set CS[3]=1093818454set CS[4]=1093818674set CS[5]=1093818672set CS[6]=1093818673set CS[7]=1093818458set CS[8]=1093818675set DS[0]=1093751109set DS[1]=1093751110set DS[2]=1093751113set DS[3]=1093751115set DS[4]=1093751114set DS[5]=1093751112set DS[6]=1093751119set DS[7]=1093751118set DS[8]=1093751117set DS[9]=1093751111set DS[10]=1093751121set ES[0]=1093748555set ES[1]=1093748556set ES[2]=1093748554set ES[3]=1093748560set ES[4]=1093748557set ES[5]=1093748558set ES[6]=1093748559set ES[7]=1093748553set ES[8]=1093748561set FS[0]=1093747533set FS[1]=1093747531set FS[2]=1093747526set FS[3]=1093747529set FS[4]=1093747527set FS[5]=1093747528set HS=CreateTrigger()call TriggerAddCondition(HS,Condition(function GL1))set ZS[0]=1747990855set WS[0]=50set ZS[1]=1747990868set WS[1]=100set ZS[2]=1747990854set WS[2]=150set ZS[3]=1747990856set WS[3]=200set ZS[4]=1747990853set WS[4]=250set ZS[5]=1747990852set WS[5]=300set ZS[6]=1747990851set WS[6]=350set ZS[7]=1747990850set WS[7]=400set ZS[8]=1747990841set WS[8]=450set ZS[9]=1747990849set WS[9]=500set ZS[10]=1747990858set WS[10]=550set ZS[11]=1747990859set WS[11]=600set ZS[12]=1747990860set WS[12]=650set ZS[13]=1747990861set WS[13]=700set ZS[14]=1747990862set WS[14]=750set ZS[15]=1747990863set WS[15]=800set ZS[16]=1747990864set WS[16]=850set ZS[17]=1747990865set WS[17]=900set ZS[18]=1747990866set WS[18]=950set ZS[19]=1747990867set WS[19]=1000set ZS[20]=1747990857set WS[20]=1050set ZS[21]=1747990874set WS[21]=1100set ZS[22]=1747990872set WS[22]=1150set ZS[23]=1747992881set WS[23]=1200set ZS[24]=1747992882set WS[24]=1250set ZS[25]=1747992886set WS[25]=1300set ZS[26]=1747992883set WS[26]=1350set ZS[27]=1747992884set WS[27]=1400set ZS[28]=1747990873set WS[28]=1450set ZS[29]=1747990870set WS[29]=1500set ZS[30]=1747992880set WS[30]=1550set ZS[31]=1747990869set WS[31]=1600set ZS[32]=1747992902set WS[32]=1650set ZS[33]=1747992900set WS[33]=1700set ZS[34]=1747992901set WS[34]=1750set ZS[35]=1747992899set WS[35]=1800set ZS[36]=1747992898set WS[36]=1850set ZS[37]=1747992897set WS[37]=1900set ZS[38]=1747992889set WS[38]=1950set ZS[39]=1747992903set WS[39]=2000set ZS[40]=1747992887set WS[40]=2050set ZS[41]=1747992911set WS[41]=2100set ZS[42]=1747992921set WS[42]=2150set ZS[43]=1747992904set WS[43]=2200set ZS[44]=1747992905set WS[44]=2250set ZS[45]=1747992906set WS[45]=2300set ZS[46]=1747992912set WS[46]=2350set ZS[47]=1747992913set WS[47]=2400set ZS[48]=1747992907set WS[48]=2450set ZS[49]=1747992914set WS[49]=2500set ZS[50]=1747992908set WS[50]=2550set ZS[51]=1747992915set WS[51]=2600set ZS[52]=1747990871set WS[52]=2650set ZS[53]=1747992909set WS[53]=2700set ZS[54]=1747992888set WS[54]=2750set ZS[55]=1747992916set WS[55]=2800set ZS[56]=1747992917set WS[56]=2850set ZS[57]=1747992910set WS[57]=2900set ZS[58]=1747992918set WS[58]=2950set ZS[59]=1747992919set WS[59]=3000set VS[0]=ZS[GV1(1)]set VS[1]=ZS[GV1(1)]set VS[2]=ZS[GV1(1)]set VS[3]=ZS[GV1(1)]set VS[4]=ZS[GV1(1)]set VS[5]=ZS[GV1(1)]set VS[6]=ZS[GV1(1)]set VS[7]=ZS[GV1(1)]set VS[8]=ZS[GV1(1)]set VS[9]=ZS[GV1(1)]set VS[10]=ZS[GV1(1)]set VS[11]=ZS[GV1(1)]set VS[12]=ZS[GV1(1)]set VS[13]=ZS[GV1(1)]set VS[14]=ZS[GV1(1)]set XS[0]=falseset XS[1]=falseset XS[2]=falseset XS[3]=falseset XS[4]=falseset XS[5]=falseset XS[6]=falseset XS[7]=falseset XS[8]=falseset XS[9]=falseset XS[10]=falseset XS[11]=falseset XS[12]=falseset XS[13]=falseset XS[14]=falseset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function H01))set t=nullset LY=InitHashtable()set M=CreateTimer()set MS=Rect(-7040,-7680,7040,7168)call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.00)call SuspendTimeOfDay(false)call SetTimeOfDayScale(0.5)call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")call SetCreepCampFilterState(true)set D3="Normal Mode"call TimerStart(M,99999.00,false,null)set V3=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)set Z3=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)set KS=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)set LS=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)set BO[0]=Player(0)set BO[1]=Player(1)set BO[2]=Player(2)set BO[3]=Player(3)set BO[4]=Player(4)set BO[5]=Player(5)set CO[0]=Player(6)set CO[1]=Player(7)set CO[2]=Player(8)set CO[3]=Player(9)set CO[4]=Player(10)set CO[5]=Player(11)set DO=Player(12)set EO=Player(15)call SetUnitPathing(CZ,false)call SetUnitPathing(DZ,false)call SetUnitPathing(ZZ,false)call SetUnitPathing(BZ,false)call SetUnitPathing(OZ,false)call BK1(OZ,true)call BK1(BZ,true)call BK1(ZZ,true)call BK1(DZ,true)call BK1(CZ,true)set U0=GetUnitLoc(OZ)set II=GetUnitLoc(CZ)set BI=GetUnitLoc(ZZ)set CI=GetUnitLoc(BZ)set DI=GetUnitLoc(DZ)set I2=1093678663set O2[1]=IIset O2[2]=CIset O2[3]=BIset O2[4]=DIset O2[5]=U0set TI=GetRectCenter(M3)set RI=GetRectCenter(N3)set PI=GetRectCenter(L3)set QI=GetRectCenter(U3)set I1=GetRectCenter(I4)set UI=GetRectCenter(Q3)set O1=GetRectCenter(C4)set B1=GetRectCenter(B4)set A1=GetRectCenter(A4)set C1=GetRectCenter(P3)set E1=GetRectCenter(R3)set D1=GetRectCenter(T3)set F1=GetRectCenter(G4)set G1=GetRectCenter(D4)set J2=trueset QS=GetUnitX(IV)set US=GetUnitY(IV)set IT=GetUnitX(CV)set OT=GetUnitY(CV)set AT=GetUnitX(AV)set BT=GetUnitY(AV)set CT=GetUnitX(OV)set DT=GetUnitY(OV)set ET=GetUnitX(HW)set FT=GetUnitY(HW)set GT=GetUnitX(HZ)set HT=GetUnitY(HZ)set ZT=GetUnitX(FZ)set VT=GetUnitY(FZ)set WT=GetUnitX(AZ)set XT=GetUnitY(AZ)set YT=GetUnitX(VZ)set JT=GetUnitY(VZ)set KT=GetUnitX(DV)set LT=GetUnitY(DV)set KT=GetUnitX(DV)set LT=GetUnitY(DV)set MT=GetUnitX(ZY)set ST=GetUnitY(ZY)set RT=GetUnitX(UH)set PT=GetUnitY(UH)set QT=GetUnitX(HV)set UT=GetUnitY(HV)set IR=GetUnitX(GV)set OR=GetUnitY(GV)set BR=GetUnitX(EV)set CR=GetUnitY(EV)set DR=GetUnitX(ZV)set GR=GetUnitY(ZV)set HR=GetUnitX(WZ)set ZR=GetUnitY(WZ)set WR=GetUnitX(FV)set XR=GetUnitY(FV)set YR=GetUnitX(WV)set JR=GetUnitY(WV)set KR=GetUnitX(VV)set LR=GetUnitY(VV)set SR=GetUnitX(NV)set RR=GetUnitY(NV)set PR=GetUnitX(YV)set QR=GetUnitY(YV)set UR=GetUnitX(XV)set IP=GetUnitY(XV)set OP=GetUnitX(JV)set BP=GetUnitY(JV)set DP=GetUnitX(MV)set EP=GetUnitY(MV)set FP=GetUnitX(LV)set GP=GetUnitY(LV)set ZP=GetUnitX(KV)set VP=GetUnitY(KV)set WP=GetUnitX(TV)set YP=GetUnitY(TV)set JP=GetUnitX(SV)set KP=GetUnitY(SV)set LP=GetUnitX(UV)set MP=GetUnitY(UV)set TP=GetUnitX(QV)set RP=GetUnitY(QV)set PP=GetUnitX(IW)set QP=GetUnitY(IW)set UP=GetUnitX(OW)set IQ=GetUnitY(OW)set OQ=GetUnitX(AW)set AQ=GetUnitY(AW)set BQ=GetUnitX(PV)set CQ=GetUnitY(PV)set DQ=GetUnitX(CW)set EQ=GetUnitY(CW)set FQ=GetUnitX(DW)set GQ=GetUnitY(DW)set HQ=GetUnitX(BW)set ZQ=GetUnitY(BW)set VQ=GetUnitX(EW)set WQ=GetUnitY(EW)set XQ=GetUnitX(FW)set YQ=GetUnitY(FW)set JQ=GetUnitX(BV)set KQ=GetUnitY(BV)set LQ=GetUnitX(GW)set MQ=GetUnitY(GW)set NQ=GetUnitX(VW)set SQ=GetUnitY(VW)set TQ=GetUnitX(ZW)set RQ=GetUnitY(ZW)call RemoveUnit(WV)call RemoveUnit(KV)call RemoveUnit(JV)call RemoveUnit(VV)call RemoveUnit(TV)call RemoveUnit(MV)call RemoveUnit(NV)call RemoveUnit(SV)call RemoveUnit(LV)call RemoveUnit(BV)call RemoveUnit(GW)call RemoveUnit(UH)call RemoveUnit(YV)call RemoveUnit(XV)call RemoveUnit(UV)call RemoveUnit(QV)call RemoveUnit(IW)call RemoveUnit(OW)call RemoveUnit(AW)call RemoveUnit(PV)call RemoveUnit(CW)call RemoveUnit(DW)call RemoveUnit(BW)call RemoveUnit(EW)call RemoveUnit(FW)call RemoveUnit(DV)call RemoveUnit(ZY)call RemoveUnit(VZ)call RemoveUnit(AZ)call RemoveUnit(FZ)call RemoveUnit(HZ)call RemoveUnit(AV)call RemoveUnit(OV)call RemoveUnit(IV)call RemoveUnit(CV)call RemoveUnit(HW)call RemoveUnit(HV)call RemoveUnit(GV)call RemoveUnit(EV)call RemoveUnit(ZV)call RemoveUnit(WZ)call RemoveUnit(FV)call RemoveUnit(VW)call RemoveUnit(ZW)set PQ=CreateUnit(BO[0],1852206952,QS,US,270)set QQ=CreateUnit(EO,1749236021,IT,OT,270)set UQ=CreateUnit(EO,1848652107,AT,BT,270)set I00=CreateUnit(EO,1849897784,CT,DT,270)set II0=CreateUnit(EO,1697657397,ET,FT,270)set I10=CreateUnit(EO,1848651862,GT,HT,270)set IO0=CreateUnit(EO,1848651863,ZT,VT,270)set I20=CreateUnit(EO,1848651826,WT,XT,270)set I30=CreateUnit(EO,1848651864,YT,JT,270)set I40=CreateUnit(EO,1848651833,KT,LT,270)set I50=CreateUnit(EO,1848657989,MT,ST,270)set I60=CreateUnit(BO[0],1702129516,RT,PT,270)set I70=CreateUnit(BO[0],1697656914,QT,UT,90)set I80=CreateUnit(BO[0],1697656914,IR,OR,45)set I90=CreateUnit(BO[0],1697656914,BR,CR,0)set IA0=CreateUnit(BO[0],1697657137,DR,GR,90)set IB0=CreateUnit(BO[0],1697657137,HR,ZR,45)set IC0=CreateUnit(BO[0],1697657137,WR,XR,0)set ID0=CreateUnit(BO[0],1697656915,YR,JR,90)set IE0=CreateUnit(BO[0],1697656915,KR,LR,45)set IF0=CreateUnit(BO[0],1697656915,SR,RR,0)set IG0=CreateUnit(BO[0],1697657145,PR,QR,45)set IH0=CreateUnit(BO[0],1697657145,UR,IP,45)set IZ0=CreateUnit(BO[0],1700884333,OP,BP,90)set IV0=CreateUnit(BO[0],1700884333,DP,EP,45)set IW0=CreateUnit(BO[0],1700884333,FP,GP,0)set IX0=CreateUnit(BO[0],1700884325,ZP,VP,90)set IY0=CreateUnit(BO[0],1700884325,WP,YP,45)set IJ0=CreateUnit(BO[0],1700884325,JP,KP,0)set IK0=CreateUnit(BO[0],1701670775,LP,MP,270)set IL0=CreateUnit(BO[0],1701670775,TP,RP,270)set IM0=CreateUnit(BO[0],1701670775,PP,QP,270)set IN0=CreateUnit(BO[0],1701670775,UP,IQ,270)set IS0=CreateUnit(BO[0],1701670775,OQ,AQ,270)set IT0=CreateUnit(BO[0],1701670775,BQ,CQ,270)set IR0=CreateUnit(BO[0],1701670775,DQ,EQ,270)set IP0=CreateUnit(BO[0],1701670775,FQ,GQ,270)set IQ0=CreateUnit(BO[0],1701670775,HQ,ZQ,270)set IU0=CreateUnit(BO[0],1701670775,VQ,WQ,270)set O00=CreateUnit(BO[0],1701670775,XQ,YQ,270)set OI0=CreateUnit(BO[0],1700884343,JQ,KQ,270)set O10=CreateUnit(BO[0],1700884343,LQ,MQ,270)set OO0=CreateUnit(BO[0],1701080930,NQ,SQ,270)set O20=CreateUnit(BO[0],1701080930,TQ,RQ,270)call SetPlayerAbilityAvailable(EO,1098018609,false)call SetUnitColor(QQ,TS)call SetUnitColor(II0,TS)call SetUnitColor(I00,PS)call SetUnitColor(UQ,PS)call SetUnitColor(I10,PS)call SetUnitColor(IO0,PS)call SetUnitColor(I20,PS)call SetUnitColor(I30,PS)call SetUnitColor(I40,PS)call BK1(I70,true)call BK1(I80,true)call BK1(I90,true)call BK1(IA0,true)call BK1(IB0,true)call BK1(IC0,true)call BK1(ID0,true)call BK1(IE0,true)call BK1(IF0,true)call BK1(IG0,true)call BK1(IH0,true)call BK1(I60,true)call BK1(IZ0,true)call BK1(IV0,true)call BK1(IW0,true)call BK1(IX0,true)call BK1(IY0,true)call BK1(IJ0,true)call BK1(OI0,true)call BK1(O10,true)call BK1(OO0,true)call BK1(O20,true)call BK1(IK0,true)call BK1(IL0,true)call BK1(IM0,true)call BK1(IN0,true)call BK1(IS0,true)call BK1(IT0,true)call BK1(IR0,true)call BK1(IP0,true)call BK1(IQ0,true)call BK1(IU0,true)call BK1(O00,true)call AddUnitToStock(II0,1747989059,0,0)set O50=GetUnitX(GX)set O60=GetUnitY(GX)set O70=GetUnitX(UW)set O80=GetUnitY(UW)set O90=GetUnitX(IX)set OA0=GetUnitY(IX)set OB0=GetUnitX(OX)set OC0=GetUnitY(OX)set OD0=GetUnitX(PW)set OE0=GetUnitY(PW)set OF0=GetUnitX(TW)set OG0=GetUnitY(TW)set OH0=GetUnitX(SW)set OZ0=GetUnitY(SW)set OV0=GetUnitX(MW)set OW0=GetUnitY(MW)set OX0=GetUnitX(RW)set OY0=GetUnitY(RW)set OJ0=GetUnitX(QW)set OK0=GetUnitY(QW)set OL0=GetUnitX(JZ)set OM0=GetUnitY(JZ)set ON0=GetUnitX(KX)set OS0=GetUnitY(KX)set OT0=GetUnitX(GZ)set OR0=GetUnitY(GZ)set OP0=GetUnitX(MX)set OQ0=GetUnitY(MX)set OU0=GetUnitX(YZ)set A00=GetUnitY(YZ)set AI0=GetUnitX(SZ)set A10=GetUnitY(SZ)set AO0=GetUnitX(NX)set A20=GetUnitY(NX)set A30=GetUnitX(XZ)set A40=GetUnitY(XZ)set A50=GetUnitX(LW)set A60=GetUnitY(LW)set A70=GetUnitX(SX)set A80=GetUnitY(SX)set A90=GetUnitX(FY)set AA0=GetUnitY(FY)set AB0=GetUnitX(TX)set AC0=GetUnitY(TX)set AD0=GetUnitX(XX)set AE0=GetUnitY(XX)set AF0=GetUnitX(KW)set AG0=GetUnitY(KW)set AH0=GetUnitX(WX)set AZ0=GetUnitY(WX)set AV0=GetUnitX(EY)set AW0=GetUnitY(EY)set AX0=GetUnitX(JW)set AY0=GetUnitY(JW)set AJ0=GetUnitX(LX)set AK0=GetUnitY(LX)set AL0=GetUnitX(DY)set AM0=GetUnitY(DY)set AN0=GetUnitX(IY)set AS0=GetUnitY(IY)set AT0=GetUnitX(PX)set AR0=GetUnitY(PX)set AP0=GetUnitX(BY)set AQ0=GetUnitY(BY)set AU0=GetUnitX(YW)set B00=GetUnitY(YW)set BI0=GetUnitX(AY)set B10=GetUnitY(AY)set BO0=GetUnitX(RX)set B20=GetUnitY(RX)set B30=GetUnitX(QX)set B40=GetUnitY(QX)set B50=GetUnitX(OY)set B60=GetUnitY(OY)set B70=GetUnitX(GY)set B80=GetUnitY(GY)set B90=GetUnitX(WW)set BA0=GetUnitY(WW)set BB0=GetUnitX(YX)set BC0=GetUnitY(YX)set BD0=GetUnitX(XW)set BE0=GetUnitY(XW)set BF0=GetUnitX(CY)set BG0=GetUnitY(CY)set BH0=GetUnitX(UX)set BZ0=GetUnitY(UX)set BV0=GetUnitX(JX)set BW0=GetUnitY(JX)call RemoveUnit(IY)call RemoveUnit(PX)call RemoveUnit(BY)call RemoveUnit(YW)call RemoveUnit(AY)call RemoveUnit(RX)call RemoveUnit(QX)call RemoveUnit(OY)call RemoveUnit(GY)call RemoveUnit(WW)call RemoveUnit(YX)call RemoveUnit(GZ)call RemoveUnit(SZ)call RemoveUnit(LW)call RemoveUnit(MX)call RemoveUnit(NX)call RemoveUnit(SX)call RemoveUnit(YZ)call RemoveUnit(XZ)call RemoveUnit(FY)call RemoveUnit(TX)call RemoveUnit(XX)call RemoveUnit(KW)call RemoveUnit(WX)call RemoveUnit(EY)call RemoveUnit(JW)call RemoveUnit(LX)call RemoveUnit(DY)call RemoveUnit(XW)call RemoveUnit(CY)call RemoveUnit(UX)call RemoveUnit(JX)call RemoveUnit(KX)call RemoveUnit(TW)call RemoveUnit(SW)call RemoveUnit(MW)call RemoveUnit(RW)call RemoveUnit(QW)call RemoveUnit(JZ)call RemoveUnit(OX)call RemoveUnit(IX)call RemoveUnit(GX)call RemoveUnit(UW)call RemoveUnit(PW)set BX0=CreateUnit(CO[0],1852073580,O50,O60,270)set BY0=CreateUnit(EO,1849897781,O70,O80,270)set BJ0=CreateUnit(EO,1848652107,O90,OA0,270)set BK0=CreateUnit(EO,1849897784,OB0,OC0,270)set BL0=CreateUnit(EO,1966092369,OD0,OE0,270)set BM0=CreateUnit(EO,1848651862,OF0,OG0,0)set BN0=CreateUnit(EO,1848651863,OH0,OZ0,0)set BS0=CreateUnit(EO,1848651826,OV0,OW0,0)set BT0=CreateUnit(EO,1848651864,OX0,OY0,0)set BR0=CreateUnit(EO,1848651833,OJ0,OK0,0)set BP0=CreateUnit(EO,1848657989,OL0,OM0,0)set BQ0=CreateUnit(CO[0],1970172012,ON0,OS0,220)set BU0=CreateUnit(CO[0],1966092365,OT0,OR0,270)set C00=CreateUnit(CO[0],1966092365,OP0,OQ0,270)set CI0=CreateUnit(CO[0],1966092365,OU0,A00,270)set C10=CreateUnit(CO[0],1966092356,AI0,A10,270)set CO0=CreateUnit(CO[0],1966092356,AO0,A20,270)set C20=CreateUnit(CO[0],1966092356,A30,A40,270)set C30=CreateUnit(CO[0],1966092366,A50,A60,270)set C40=CreateUnit(CO[0],1966092366,A70,A80,270)set C50=CreateUnit(CO[0],1966092366,A90,AA0,270)set C60=CreateUnit(CO[0],1966092372,AB0,AC0,270)set C70=CreateUnit(CO[0],1966092372,AD0,AE0,270)set C80=CreateUnit(CO[0],1970496880,AF0,AG0,270)set C90=CreateUnit(CO[0],1970496880,AH0,AZ0,270)set CA0=CreateUnit(CO[0],1970496880,AV0,AW0,270)set CB0=CreateUnit(CO[0],1970564964,AX0,AY0,270)set CC0=CreateUnit(CO[0],1970564964,AJ0,AK0,270)set CD0=CreateUnit(CO[0],1970564964,AL0,AM0,270)set CE0=CreateUnit(CO[0],1970956647,AN0,AS0,270)set CF0=CreateUnit(CO[0],1970956647,AT0,AR0,270)set CG0=CreateUnit(CO[0],1970956647,AP0,AQ0,270)set CH0=CreateUnit(CO[0],1970956647,AU0,B00,270)set CZ0=CreateUnit(CO[0],1970956647,BI0,B10,270)set CV0=CreateUnit(CO[0],1970956647,BO0,B20,270)set CW0=CreateUnit(CO[0],1970956647,B30,B40,270)set CX0=CreateUnit(CO[0],1970956647,B50,B60,270)set CY0=CreateUnit(CO[0],1970956647,B70,B80,270)set CJ0=CreateUnit(CO[0],1970956647,B90,BA0,270)set CK0=CreateUnit(CO[0],1970956647,BB0,BC0,270)set CL0=CreateUnit(CO[0],1970495856,BD0,BE0,270)set CM0=CreateUnit(CO[0],1970495856,BF0,BG0,270)set CN0=CreateUnit(CO[0],1969385326,BH0,BZ0,270)set CS0=CreateUnit(CO[0],1969385326,BV0,BW0,270)call SetUnitColor(BY0,O30)call SetUnitColor(BK0,O40)call SetUnitColor(BJ0,O40)call SetUnitColor(BM0,O40)call SetUnitColor(BN0,O40)call SetUnitColor(BS0,O40)call SetUnitColor(BT0,O40)call SetUnitColor(BR0,O40)call BK1(BU0,true)call BK1(C00,true)call BK1(CI0,true)call BK1(C10,true)call BK1(CO0,true)call BK1(C20,true)call BK1(C30,true)call BK1(C40,true)call BK1(C50,true)call BK1(C60,true)call BK1(C70,true)call BK1(BQ0,true)call BK1(C80,true)call BK1(C90,true)call BK1(CA0,true)call BK1(CB0,true)call BK1(CC0,true)call BK1(CD0,true)call BK1(CL0,true)call BK1(CM0,true)call BK1(CN0,true)call BK1(CS0,true)call BK1(CE0,true)call BK1(CF0,true)call BK1(CG0,true)call BK1(CH0,true)call BK1(CZ0,true)call BK1(CV0,true)call BK1(CW0,true)call BK1(CX0,true)call BK1(CY0,true)call BK1(CJ0,true)call BK1(CK0,true)call AddUnitToStock(BL0,1747989059,0,0)set HE1=GetUnitX(TZ)set HF1=GetUnitY(TZ)set HG1=GetUnitX(UZ)set HH1=GetUnitY(UZ)set HZ1=GetUnitX(QZ)set HV1=GetUnitY(QZ)set HW1=GetUnitX(RZ)set HX1=GetUnitY(RZ)set HY1=GetUnitX(PZ)set HJ1=GetUnitY(PZ)set HK1=GetUnitX(BX)set HL1=GetUnitY(BX)set HM1=GetUnitX(AX)set HN1=GetUnitY(AX)set HS1=GetUnitX(EX)set HT1=GetUnitY(EX)set HR1=GetUnitX(CX)set HP1=GetUnitY(CX)set HQ1=GetUnitX(DX)set HU1=GetUnitY(DX)set Z01=25call RemoveUnit(TZ)call RemoveUnit(UZ)call RemoveUnit(QZ)call RemoveUnit(RZ)call RemoveUnit(PZ)call RemoveUnit(BX)call RemoveUnit(AX)call RemoveUnit(EX)call RemoveUnit(CX)call RemoveUnit(DX)set CT0=CreateUnit(Player(1),1852010352,HE1,HF1,270)call UnitAddAbility(CT0,1093743665)call ClearSelectionForPlayer(Player(1))call SelectUnitAddForPlayer(CT0,Player(1))if GetLocalPlayer()==Player(1)thencall SetUnitVertexColor(CT0,255,255,255,255)elsecall SetUnitVertexColor(CT0,255,255,255,Z01)endifset CR0=CreateUnit(Player(2),1852010352,HG1,HH1,270)call UnitAddAbility(CR0,1093743665)call ClearSelectionForPlayer(Player(2))call SelectUnitAddForPlayer(CR0,Player(2))if GetLocalPlayer()==Player(2)thencall SetUnitVertexColor(CR0,255,255,255,255)elsecall SetUnitVertexColor(CR0,255,255,255,Z01)endifset CP0=CreateUnit(Player(3),1852010352,HZ1,HV1,270)call UnitAddAbility(CP0,1093743665)call ClearSelectionForPlayer(Player(3))call SelectUnitAddForPlayer(CP0,Player(3))if GetLocalPlayer()==Player(3)thencall SetUnitVertexColor(CP0,255,255,255,255)elsecall SetUnitVertexColor(CP0,255,255,255,Z01)endifset CQ0=CreateUnit(Player(4),1852010352,HW1,HX1,270)call UnitAddAbility(CQ0,1093743665)call ClearSelectionForPlayer(Player(4))call SelectUnitAddForPlayer(CQ0,Player(4))if GetLocalPlayer()==Player(4)thencall SetUnitVertexColor(CQ0,255,255,255,255)elsecall SetUnitVertexColor(CQ0,255,255,255,Z01)endifset CU0=CreateUnit(Player(5),1852010352,HY1,HJ1,270)call UnitAddAbility(CU0,1093743665)call ClearSelectionForPlayer(Player(5))call SelectUnitAddForPlayer(CU0,Player(5))if GetLocalPlayer()==Player(5)thencall SetUnitVertexColor(CU0,255,255,255,255)elsecall SetUnitVertexColor(CU0,255,255,255,Z01)endifset D00=CreateUnit(Player(7),1852010352,HK1,HL1,270)call UnitAddAbility(D00,1093752649)call ClearSelectionForPlayer(Player(7))call SelectUnitAddForPlayer(D00,Player(7))if GetLocalPlayer()==Player(7)thencall SetUnitVertexColor(D00,255,255,255,255)elsecall SetUnitVertexColor(D00,255,255,255,Z01)endifset DI0=CreateUnit(Player(8),1852010352,HM1,HN1,270)call UnitAddAbility(DI0,1093752649)call ClearSelectionForPlayer(Player(8))call SelectUnitAddForPlayer(DI0,Player(8))if GetLocalPlayer()==Player(8)thencall SetUnitVertexColor(DI0,255,255,255,255)elsecall SetUnitVertexColor(DI0,255,255,255,Z01)endifset D10=CreateUnit(Player(9),1852010352,HS1,HT1,270)call UnitAddAbility(D10,1093752649)call ClearSelectionForPlayer(Player(9))call SelectUnitAddForPlayer(D10,Player(9))if GetLocalPlayer()==Player(9)thencall SetUnitVertexColor(D10,255,255,255,255)elsecall SetUnitVertexColor(D10,255,255,255,Z01)endifset DO0=CreateUnit(Player(10),1852010352,HR1,HP1,270)call UnitAddAbility(DO0,1093752649)call ClearSelectionForPlayer(Player(10))call SelectUnitAddForPlayer(DO0,Player(10))if GetLocalPlayer()==Player(10)thencall SetUnitVertexColor(DO0,255,255,255,255)elsecall SetUnitVertexColor(DO0,255,255,255,Z01)endifset D20=CreateUnit(Player(11),1852010352,HQ1,HU1,270)call UnitAddAbility(D20,1093752649)call ClearSelectionForPlayer(Player(11))call SelectUnitAddForPlayer(D20,Player(11))if GetLocalPlayer()==Player(11)thencall SetUnitVertexColor(D20,255,255,255,255)elsecall SetUnitVertexColor(D20,255,255,255,Z01)endifset D30[1]=CT0set D30[2]=CR0set D30[3]=CP0set D30[4]=CQ0set D30[5]=CU0set D30[7]=D00set D30[8]=DI0set D30[9]=D10set D30[10]=DO0set D30[11]=D20set D40[1]=GetUnitX(CT0)set D40[2]=GetUnitX(CR0)set D40[3]=GetUnitX(CP0)set D40[4]=GetUnitX(CQ0)set D40[5]=GetUnitX(CU0)set D40[7]=GetUnitX(D00)set D40[8]=GetUnitX(DI0)set D40[9]=GetUnitX(D10)set D40[10]=GetUnitX(DO0)set D40[11]=GetUnitX(D20)set D50[1]=GetUnitY(CT0)set D50[2]=GetUnitY(CR0)set D50[3]=GetUnitY(CP0)set D50[4]=GetUnitY(CQ0)set D50[5]=GetUnitY(CU0)set D50[7]=GetUnitY(D00)set D50[8]=GetUnitY(DI0)set D50[9]=GetUnitY(D10)set D50[10]=GetUnitY(DO0)set D50[11]=GetUnitY(D20)call Z91()call ZE1()call SNI(1702061422,"stand 4")call SNI(1697656918,"stand 4")call SNI(1701081721,"spell")call SNI(1697656919,"spell")call SNI(1969711215,"stand victory")call SNI(1966092337,"stand victory")call SNI(1970169187,"stand channel")call SNI(1966092338,"stand channel")call SYI(1848651853,0.4,1848651853)call SYI(1697657426,0.5,1697657426)call SYI(1697657428,1.2,1697657428)call SYI(1697657427,0.5,1697657427)call SYI(1697657648,0.5,1697657648)call SYI(1848659027,1,1848659027)set t=CreateTrigger()set T4I=Player(15)set ZH1=GetUnitX(VX)set ZZ1=GetUnitY(VX)set ZV1=GetUnitX(MZ)set ZW1=GetUnitY(MZ)set ZX1=GetUnitX(HX)set ZY1=GetUnitY(HX)set ZJ1=GetUnitX(YY)set ZK1=GetUnitY(YY)set ZL1=GetUnitX(LZ)set ZM1=GetUnitY(LZ)set ZN1=GetUnitX(NZ)set ZS1=GetUnitY(NZ)set ZT1=GetUnitX(IZ)set ZR1=GetUnitY(IZ)set ZP1=GetUnitX(KY)set ZQ1=GetUnitY(KY)set ZU1=GetUnitX(EZ)set V01=GetUnitY(EZ)set VI1=GetUnitX(ZX)set V11=GetUnitY(ZX)set VO1=GetUnitX(HY)set V21=GetUnitY(HY)set V31=GetUnitX(JY)set V41=GetUnitY(JY)call RemoveUnit(VX)call RemoveUnit(NZ)call RemoveUnit(MZ)call RemoveUnit(LZ)call RemoveUnit(HX)call RemoveUnit(IZ)call RemoveUnit(EZ)call RemoveUnit(ZX)call RemoveUnit(HY)call RemoveUnit(YY)call RemoveUnit(KY)call RemoveUnit(JY)set EI0=CreateUnit(T4I,1848651832,ZL1,ZM1,270)set E10=CreateUnit(T4I,1848657738,ZN1,ZS1,270)set EO0=CreateUnit(T4I,1848652100,ZT1,ZR1,270)set E20=CreateUnit(T4I,1848659016,ZP1,ZQ1,270)set E30=CreateUnit(T4I,1848652110,ZH1,ZZ1,270)set E40=CreateUnit(T4I,1848651831,ZV1,ZW1,270)set E50=CreateUnit(T4I,1848651829,ZX1,ZY1,270)set E60=CreateUnit(T4I,1848659017,ZJ1,ZK1,270)set E70=CreateUnit(T4I,1848652098,ZU1,V01,270)set E80=CreateUnit(T4I,1848652112,VI1,V11,270)set E90=CreateUnit(T4I,1848657739,VO1,V21,270)set EA0=CreateUnit(T4I,1848659018,V31,V41,270)call SetUnitColor(EI0,ConvertPlayerColor(1))call SetUnitColor(E10,ConvertPlayerColor(1))call SetUnitColor(EO0,ConvertPlayerColor(9))call SetUnitColor(E20,ConvertPlayerColor(9))call SetUnitColor(E30,ConvertPlayerColor(6))call SetUnitColor(E40,ConvertPlayerColor(6))call SetUnitColor(E50,ConvertPlayerColor(10))call SetUnitColor(E60,ConvertPlayerColor(10))call SetUnitColor(E70,ConvertPlayerColor(0))call SetUnitColor(E80,ConvertPlayerColor(0))call SetUnitColor(E90,ConvertPlayerColor(11))call SetUnitColor(EA0,ConvertPlayerColor(11))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function VB1))set CG=CreateTrigger()call TriggerRegisterTimerEventSingle(CG,0.01)call TriggerAddAction(CG,function VD1)set t=CreateTrigger()call TriggerRegisterPlayerEventLeave(t,BO[1])call TriggerRegisterPlayerEventLeave(t,BO[2])call TriggerRegisterPlayerEventLeave(t,BO[3])call TriggerRegisterPlayerEventLeave(t,BO[4])call TriggerRegisterPlayerEventLeave(t,BO[5])call TriggerRegisterPlayerEventLeave(t,CO[1])call TriggerRegisterPlayerEventLeave(t,CO[2])call TriggerRegisterPlayerEventLeave(t,CO[3])call TriggerRegisterPlayerEventLeave(t,CO[4])call TriggerRegisterPlayerEventLeave(t,CO[5])call TriggerAddAction(t,function VJ1)if C2 thencall VG1()set t=CreateTrigger()if IsPlayerObserver(D60)thencall TriggerRegisterPlayerEventLeave(t,D60)endifif IsPlayerObserver(D70)thencall TriggerRegisterPlayerEventLeave(t,D70)endifcall TriggerAddAction(t,function VH1)endifset EF0[0]=falseset EF0[1]=falseset EF0[2]=falseset EF0[3]=falseset EF0[4]=falseset EF0[5]=falseset EF0[6]=falseset EF0[7]=falseset EF0[8]=falseset EF0[9]=falseset EF0[10]=falseset EF0[11]=falseset EF0[12]=falseset EF0[13]=falseset EF0[14]=falseset EF0[15]=falseset t=CreateTrigger()call UMI(t,EVENT_PLAYER_HERO_REVIVE_FINISH)call TriggerAddAction(t,function WD1)set t=CreateTrigger()call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)call TriggerAddCondition(t,Condition(function QX1))call TriggerAddAction(t,function QP1)set DN=tset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerAddAction(t,function UO1)call TriggerAddCondition(t,Condition(function U11))set EV0=tset EW0=CreateTrigger()call TriggerRegisterTimerEvent(EW0,0.6,true)call TriggerAddCondition(EW0,Condition(function U31))call DisableTrigger(EW0)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,.5,true)call TriggerAddAction(t,function U51)set EX0=tcall BW1(0,0,false)call U81()set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,true)call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerAddCondition(t,Condition(function UD1))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.1,true)call TriggerAddCondition(t,Condition(function UB1))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PAWN_ITEM)call TriggerAddCondition(t,Condition(function UA1))set t=nullcall Q1I(1093809990)call Q1I(1093810008)call Q1I(1093809992)call Q1I(1093817913)call Q1I(1093810006)call Q1I(1093809991)call Q1I(1093809993)call Q1I(1093809995)call Q1I(1093809994)set DG=CreateTrigger()call TriggerRegisterPlayerUnitEvent(DG,BO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ULI))call TriggerRegisterPlayerUnitEvent(DG,CO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function ULI))call TriggerRegisterPlayerUnitEvent(DG,DO,EVENT_PLAYER_UNIT_DEATH,Condition(function ULI))call TriggerAddAction(DG,function UP1)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function I7O))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function O3O))call TriggerAddAction(t,function OPO)set EG=tset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ARO))set t=nullcall AXO(1853060204,62)call AXO(1853060200,119)call AXO(1848652342,88)call AXO(1852077175,119)call AXO(1701212014,30)call AXO(1848651828,300)call AXO(1848652088,300)call AXO(1848652099,300)call AXO(1848652103,300)call AXO(1865429076,20)call AXO(1865429077,25)call AXO(1865429078,30)call AXO(1865429079,35)call AXO(1848651848,200)call AXO(1848651847,300)call AXO(1848651851,400)call AXO(1848651850,200)call AXO(1848651841,300)call AXO(1848651830,400)call AXO(1848657461,0)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function AUO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function B1O))set t=nullset FL0=CreateTrigger()call TriggerAddCondition(FL0,Condition(function B8O))set FG=CreateTrigger()call TriggerRegisterPlayerUnitEvent(FG,DO,EVENT_PLAYER_UNIT_DEATH,Condition(function N1I))call TriggerAddCondition(FG,Condition(function BDO))call TriggerAddAction(FG,function BGO)set t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,BO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[0],EVENT_PLAYER_UNIT_DEATH,Condition(function N1I))call TriggerAddCondition(t,Condition(function BLO))set t=nullset t=CreateTrigger()call TriggerAddCondition(t,Condition(function C3O))call TriggerRegisterTimerEvent(t,6,false)set t=nullset GO0=GO0+1set FT0[GO0]=1227900486set FR0[GO0]=1227900487set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp"set GI0[GO0]=0set FU0[GO0]=500set GO0=GO0+1set FT0[GO0]=1227895377set FR0[GO0]=1227895375set FP0[GO0]=1747988785set FQ0[GO0]=1227894849set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp"set GI0[GO0]=0set FU0[GO0]=450set G40=GO0set GO0=GO0+1set FT0[GO0]=1227895379set FR0[GO0]=1227895376set FP0[GO0]=1747988786set FQ0[GO0]=1227899713set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"set GI0[GO0]=0set FU0[GO0]=500set G50=GO0set GO0=GO0+1set FT0[GO0]=1227895374set FR0[GO0]=1227895378set FP0[GO0]=1747988787set FQ0[GO0]=1227899731set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"set GI0[GO0]=0set FU0[GO0]=450set G60=GO0set GO0=GO0+1set FT0[GO0]=1227895384set FR0[GO0]=1227895385set FP0[GO0]=1747988789set FQ0[GO0]=1227899956set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNCirclet.blp"set GI0[GO0]=0set FU0[GO0]=165set G70=GO0set GO0=GO0+1set FT0[GO0]=1227895386set FR0[GO0]=1227895859set FP0[GO0]=1747988790set FQ0[GO0]=1227899734set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"set GI0[GO0]=0set FU0[GO0]=450set G80=GO0set GO0=GO0+1set FT0[GO0]=1227895600set FR0[GO0]=1227895860set FP0[GO0]=1747988791set FQ0[GO0]=1227899954set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_03.blp"set GI0[GO0]=0set FU0[GO0]=1000set G90=GO0set GO0=GO0+1set FT0[GO0]=1227895601set FR0[GO0]=1227895861set FP0[GO0]=1747988792set FQ0[GO0]=1227899957set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"set GI0[GO0]=0set FU0[GO0]=450set GA0=GO0set GO0=GO0+1set FT0[GO0]=1227895602set FR0[GO0]=1227895862set FP0[GO0]=1747988793set FQ0[GO0]=1227899738set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"set GI0[GO0]=0set FU0[GO0]=1200set GB0=GO0set GO0=GO0+1set FT0[GO0]=1227895603set FR0[GO0]=1227895863set FP0[GO0]=1747988801set FQ0[GO0]=1227899959set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_12.blp"set GI0[GO0]=0set FU0[GO0]=550set GC0=GO0set GO0=GO0+1set FT0[GO0]=1227895604set FR0[GO0]=1227895864set FP0[GO0]=1747988802set FQ0[GO0]=1227899736set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_19.blp"set GI0[GO0]=0set FU0[GO0]=1400set GD0=GO0set GO0=GO0+1set FT0[GO0]=1227895605set FR0[GO0]=1227895865set FP0[GO0]=1747988803set FQ0[GO0]=1227899721set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNFrostMourne.blp"set GI0[GO0]=0set FU0[GO0]=2400set GE0=GO0set GO0=GO0+1set FT0[GO0]=1227895606set FR0[GO0]=1227895873set FP0[GO0]=1747988804set FQ0[GO0]=1227899720set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Bow_06.blp"set GI0[GO0]=0set FU0[GO0]=3300set GF0=GO0set GO0=GO0+1set FT0[GO0]=1227895607set FR0[GO0]=1227895874set FP0[GO0]=1747988805set FQ0[GO0]=1227899730set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"set GI0[GO0]=0set FU0[GO0]=1000set GG0=GO0set GO0=GO0+1set FT0[GO0]=1227895608set FR0[GO0]=1227895875set FP0[GO0]=1747988806set FQ0[GO0]=1227899722set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower.blp"set GI0[GO0]=0set FU0[GO0]=150set GH0=GO0set GO0=GO0+1set FT0[GO0]=1227895609set FR0[GO0]=1227895876set FP0[GO0]=1747988807set FQ0[GO0]=1227899975set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"set GI0[GO0]=0set FU0[GO0]=900set GZ0=GO0set GO0=GO0+1set FT0[GO0]=1227902291set FR0[GO0]=1227902290set FP0[GO0]=0set FQ0[GO0]=1227902292set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"set GI0[GO0]=0set FU0[GO0]=900set GV0=GO0set GO0=GO0+1set FT0[GO0]=1227895618set FR0[GO0]=1227895877set FP0[GO0]=1747988808set FQ0[GO0]=1227899969set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"set GI0[GO0]=0set FU0[GO0]=950set GW0=GO0set GO0=GO0+1set FT0[GO0]=1227895619set FR0[GO0]=1227895878set FP0[GO0]=1747988809set FQ0[GO0]=1227899729set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPeriapt1.blp"set GI0[GO0]=0set FU0[GO0]=2000set GX0=GO0set GO0=GO0+1set FT0[GO0]=1227895620set FR0[GO0]=1227895879set FP0[GO0]=1747988810set FQ0[GO0]=1227899733set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNNatureTouchGrow.blp"set GI0[GO0]=0set FU0[GO0]=50set GY0=GO0set GO0=GO0+1set FT0[GO0]=1227895621set FR0[GO0]=1227895880set FP0[GO0]=1747988811set FQ0[GO0]=1227899703set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"set GI0[GO0]=12set FU0[GO0]=2250set GJ0=GO0set GO0=GO0+1set FT0[GO0]=1227895621set FR0[GO0]=1227895881set FP0[GO0]=1747988811set FQ0[GO0]=1227899976set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"set GI0[GO0]=0set FU0[GO0]=2250set GK0=GO0set GO0=GO0+1set FT0[GO0]=1227895622set FR0[GO0]=1227895882set FP0[GO0]=1747988812set FQ0[GO0]=1227899725set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence.blp"set GI0[GO0]=0set FU0[GO0]=150set GL0=GO0set GO0=GO0+1set FT0[GO0]=1227895623set FR0[GO0]=1227895883set FP0[GO0]=1747988813set FQ0[GO0]=1227899716set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"set GI0[GO0]=0set FU0[GO0]=900set GM0=GO0set GO0=GO0+1set FT0[GO0]=1227895624set FR0[GO0]=1227895884set FP0[GO0]=1747988814set FQ0[GO0]=1227899719set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerMasterTraining.blp"set GI0[GO0]=0set FU0[GO0]=3200set GN0=GO0set GO0=GO0+1set FT0[GO0]=1227895625set FR0[GO0]=1227895885set FP0[GO0]=1747988815set FQ0[GO0]=1227899952set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHammer.blp"set GI0[GO0]=0set FU0[GO0]=1600set GS0=GO0set GO0=GO0+1set FT0[GO0]=1227895626set FR0[GO0]=1227895886set FP0[GO0]=1747988816set FQ0[GO0]=1227899726set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStaffOfNegation.blp"set GI0[GO0]=0set FU0[GO0]=2700set GT0=GO0set GO0=GO0+1set FT0[GO0]=1227895627set FR0[GO0]=1227895887set FP0[GO0]=1747988817set FQ0[GO0]=1227899960set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerAdeptTraining.tga"set GI0[GO0]=0set FU0[GO0]=1000set GR0=GO0set GO0=GO0+1set FT0[GO0]=1227895628set FR0[GO0]=1227895888set FP0[GO0]=1747988818set FQ0[GO0]=1227899717set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"set GI0[GO0]=0set FU0[GO0]=550set GP0=GO0set GO0=GO0+1set FT0[GO0]=1227895629set FR0[GO0]=1227895889set FP0[GO0]=1747988819set FQ0[GO0]=1227899970set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate13.blp"set GI0[GO0]=0set FU0[GO0]=1400set GQ0=GO0set GO0=GO0+1set FT0[GO0]=1227895630set FR0[GO0]=1227895890set FP0[GO0]=1747988820set FQ0[GO0]=1227899724set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUsedSoulGem.blp"set GI0[GO0]=0set FU0[GO0]=1200set GU0=GO0set GO0=GO0+1set FT0[GO0]=1227895632set FR0[GO0]=1227895891set FP0[GO0]=1747988821set FQ0[GO0]=1227899737set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"set GI0[GO0]=0set FU0[GO0]=900set H00=GO0set GO0=GO0+1set FT0[GO0]=1227895633set FR0[GO0]=1227895892set FP0[GO0]=1747988822set FQ0[GO0]=1227899977set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"set GI0[GO0]=0set FU0[GO0]=875set HI0=GO0set GO0=GO0+1set FT0[GO0]=1227895634set FR0[GO0]=1227895893set FP0[GO0]=1747988823set FQ0[GO0]=1227899735set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingPurple.blp"set GI0[GO0]=0set FU0[GO0]=200set H10=GO0set GO0=GO0+1set FT0[GO0]=1227895635set FR0[GO0]=1227895894set FP0[GO0]=1747988824set FQ0[GO0]=1227899978set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"set GI0[GO0]=0set FU0[GO0]=350set HO0=GO0set GO0=GO0+1set FT0[GO0]=1227895636set FR0[GO0]=1227895895set FP0[GO0]=1747988825set FQ0[GO0]=1227899728set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"set GI0[GO0]=0set FU0[GO0]=450set H20=GO0set GO0=GO0+1set FT0[GO0]=1227895637set FR0[GO0]=1227895896set FP0[GO0]=1747988826set FQ0[GO0]=1227899715set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStaffOfTeleportation.blp"set GI0[GO0]=0set FU0[GO0]=3800set H30=GO0set GO0=GO0+1set FT0[GO0]=1227895638set FR0[GO0]=1227895897set FP0[GO0]=1747989040set FQ0[GO0]=1227899701set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"set GI0[GO0]=0set FU0[GO0]=150set H40=GO0set GO0=GO0+1set FT0[GO0]=1227895639set FR0[GO0]=1227895898set FP0[GO0]=1747989041set FQ0[GO0]=1227899979set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"set GI0[GO0]=0set FU0[GO0]=325set H50=GO0set GO0=GO0+1set FT0[GO0]=1227895640set FR0[GO0]=1227896112set FP0[GO0]=1747989042set FQ0[GO0]=1227899953set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWandOfCyclone.blp"set GI0[GO0]=0set FU0[GO0]=1000set H60=GO0set GO0=GO0+1set FT0[GO0]=1227895617set FR0[GO0]=1227896113set FP0[GO0]=1747989043set FQ0[GO0]=1227899961set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"set GI0[GO0]=0set FU0[GO0]=250set H70=GO0set GO0=GO0+1set FT0[GO0]=1227901762set FR0[GO0]=1227901761set FP0[GO0]=0set FQ0[GO0]=1227901763set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"set GI0[GO0]=0set FU0[GO0]=250set H80=GO0set GO0=GO0+1set FT0[GO0]=1227895641set FR0[GO0]=1227896114set FP0[GO0]=1747989044set FQ0[GO0]=1227899705set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"set GI0[GO0]=0set FU0[GO0]=2100set H90=GO0set GO0=GO0+1set FT0[GO0]=1227895642set FR0[GO0]=1227896115set FP0[GO0]=1747989045set FQ0[GO0]=1227899723set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSoulGem.blp"set GI0[GO0]=0set FU0[GO0]=1100set HA0=GO0set GO0=GO0+1set FT0[GO0]=1227895856set FR0[GO0]=1227896116set FP0[GO0]=1747989046set FQ0[GO0]=1227899980set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp"set GI0[GO0]=0set FU0[GO0]=875set HB0=GO0set GO0=GO0+1set FT0[GO0]=1227895857set FR0[GO0]=1227896117set FP0[GO0]=1747989047set FQ0[GO0]=1227899958set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelRanged.blp"set GI0[GO0]=0set FU0[GO0]=1500set HC0=GO0set GO0=GO0+1set FT0[GO0]=1227894860set FR0[GO0]=1227899222set FP0[GO0]=1747989058set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"set GI0[GO0]=0set FU0[GO0]=700set HD0=GO0set GO0=GO0+1set FT0[GO0]=1227896133set FR0[GO0]=1227899213set FP0[GO0]=0set FQ0[GO0]=1227899982set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"set GI0[GO0]=0set FU0[GO0]=700set HE0=GO0set GO0=GO0+1set FT0[GO0]=1227899221set FR0[GO0]=1227899214set FP0[GO0]=0set FQ0[GO0]=1227899983set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle1.blp"set GI0[GO0]=0set FU0[GO0]=700set HF0=GO0set GO0=GO0+1set FT0[GO0]=1227899219set FR0[GO0]=1227899215set FP0[GO0]=0set FQ0[GO0]=1227899984set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle2.blp"set GI0[GO0]=0set FU0[GO0]=700set HG0=GO0set GO0=GO0+1set FT0[GO0]=1227899220set FR0[GO0]=1227899216set FP0[GO0]=0set FQ0[GO0]=1227899985set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle3.blp"set GI0[GO0]=0set FU0[GO0]=700set HH0=GO0set GO0=GO0+1set FT0[GO0]=1227900759set FR0[GO0]=1227900761set FP0[GO0]=0set FQ0[GO0]=1227900979set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_Illusion.blp"set GI0[GO0]=0set FU0[GO0]=700set HY0=GO0set GO0=GO0+1set FT0[GO0]=1227900978set FR0[GO0]=1227900760set FP0[GO0]=0set FQ0[GO0]=1227899986set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_Regeneration.blp"set GI0[GO0]=0set FU0[GO0]=700set HX0=GO0set GO0=GO0+1set FT0[GO0]=1227900758set FR0[GO0]=1227900977set FP0[GO0]=0set FQ0[GO0]=1227900980set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_Haste.blp"set GI0[GO0]=0set FU0[GO0]=700set HW0=GO0set GO0=GO0+1set FT0[GO0]=1227903556set FR0[GO0]=1227903557set FP0[GO0]=0set FQ0[GO0]=1227903558set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_Illusion.blp"set GI0[GO0]=0set FU0[GO0]=700set HJ0=GO0set GO0=GO0+1set FT0[GO0]=1227899218set FR0[GO0]=1227900976set FP0[GO0]=0set FQ0[GO0]=1227900982set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_DoubleDamage.blp"set GI0[GO0]=0set FU0[GO0]=700set HV0=GO0set GO0=GO0+1set FT0[GO0]=1227899217set FR0[GO0]=1227900762set FP0[GO0]=0set FQ0[GO0]=1227900981set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBottle_Invisibility.blp"set GI0[GO0]=0set FU0[GO0]=700set HZ0=GO0set GO0=GO0+1set FT0[GO0]=1227900740set FR0[GO0]=1227900739set FP0[GO0]=1747990324set FQ0[GO0]=1227900741set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"set GI0[GO0]=17set FU0[GO0]=200set HK0=GO0set GO0=GO0+1set FT0[GO0]=1227900995set FR0[GO0]=1227900994set FP0[GO0]=0set FQ0[GO0]=1227900993set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"set GI0[GO0]=17set FU0[GO0]=500set X10=GO0set GO0=GO0+1set FT0[GO0]=1227901012set FR0[GO0]=1227901010set FP0[GO0]=1747990359set FQ0[GO0]=1227901014set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"set GI0[GO0]=5set FU0[GO0]=225set HL0=GO0set GO0=GO0+1set FT0[GO0]=1227901013set FR0[GO0]=1227901008set FP0[GO0]=0set FQ0[GO0]=1227901015set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"set GI0[GO0]=5set FU0[GO0]=225set HM0=GO0set GO0=GO0+1set FT0[GO0]=1227902516set FR0[GO0]=1227902515set FP0[GO0]=0set FQ0[GO0]=1227902517set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"set GI0[GO0]=30set FU0[GO0]=775set HT0=GO0set GO0=GO0+1set FT0[GO0]=1227902519set FR0[GO0]=1227902518set FP0[GO0]=0set FQ0[GO0]=1227902520set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"set GI0[GO0]=30set FU0[GO0]=775set HR0=GO0set GO0=GO0+1set FT0[GO0]=1227901495set FR0[GO0]=1227901494set FP0[GO0]=1747990579set FQ0[GO0]=1227901496set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"set GI0[GO0]=0set FU0[GO0]=1800set HN0=GO0set GO0=GO0+1set FT0[GO0]=1227901514set FR0[GO0]=1227901513set FP0[GO0]=1747990583set FQ0[GO0]=1227901515set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGreenStaff.blp"set GI0[GO0]=30set FU0[GO0]=1600set X50=GO0set GO0=GO0+1set FT0[GO0]=1227903033set FR0[GO0]=1227903042set FP0[GO0]=1747993929set FQ0[GO0]=1227903041set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"set GI0[GO0]=0set FU0[GO0]=1400set XE0=GO0set GO0=GO0+1set FT0[GO0]=1227903054set FR0[GO0]=1227903053set FP0[GO0]=0set FQ0[GO0]=1227903055set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"set GI0[GO0]=10set FU0[GO0]=2150set XF0=GO0set GO0=GO0+1set FT0[GO0]=1227903301set FR0[GO0]=1227903302set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStone.blp"set GI0[GO0]=10set FU0[GO0]=0set XG0=GO0set GO0=GO0+1set FT0[GO0]=1227903303set FR0[GO0]=1227903304set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNThunderLizardEgg.blp"set GI0[GO0]=10set FU0[GO0]=0set XH0=GO0set GO0=GO0+1set FT0[GO0]=1227902273set FR0[GO0]=1227902265set FP0[GO0]=1747993421set FQ0[GO0]=1227902274set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"set GI0[GO0]=0set FU0[GO0]=275set G20=GO0set GO0=GO0+1set FT0[GO0]=1227902276set FR0[GO0]=1227902277set FP0[GO0]=0set FQ0[GO0]=1227902275set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"set GI0[GO0]=0set FU0[GO0]=275set G30=GO0set GO0=GO0+1set FT0[GO0]=1227896119set FR0[GO0]=1227896131set FP0[GO0]=1747989057set FQ0[GO0]=1227903288set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp"set GI0[GO0]=0set FU0[GO0]=125set Z80=GO0set GO0=GO0+1set FT0[GO0]=1227903287set FR0[GO0]=1227903286set FP0[GO0]=0set FQ0[GO0]=1227903289set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp"set GI0[GO0]=0set FU0[GO0]=0set Z90=GO0set GO0=GO0+1set FT0[GO0]=1227895858set FR0[GO0]=1227896132set FP0[GO0]=1747989048set FQ0[GO0]=1227903065set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNLesserClarityPotion.blp"set GI0[GO0]=0set FU0[GO0]=50set Z50=GO0set GO0=GO0+1set FT0[GO0]=1227901007set FR0[GO0]=1227901006set FP0[GO0]=1747990358set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNVialFull.blp"set GI0[GO0]=0set FU0[GO0]=200set Z60=GO0set GO0=GO0+1set FT0[GO0]=1227896118set FR0[GO0]=1227896134set FP0[GO0]=1747989049set FQ0[GO0]=1227903066set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHealingSalve.blp"set GI0[GO0]=0set FU0[GO0]=110set Z70=GO0set GO0=GO0+1set FT0[GO0]=1227896120set FR0[GO0]=1227896135set FP0[GO0]=1747989059set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp"set GI0[GO0]=0set FU0[GO0]=150set ZA0=GO0set GO0=GO0+1set FT0[GO0]=1227896121set FR0[GO0]=1227896136set FP0[GO0]=1747989060set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBlueSentryWard.blp"set GI0[GO0]=0set FU0[GO0]=200set ZB0=GO0set GO0=GO0+1set FT0[GO0]=1227896129set FR0[GO0]=1227896137set FP0[GO0]=1747989061set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"set GI0[GO0]=0set FU0[GO0]=100set ZC0=GO0set GO0=GO0+1set FT0[GO0]=1227896130set FR0[GO0]=1227896138set FP0[GO0]=1747989062set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNCritterChicken.blp"set GI0[GO0]=0set FU0[GO0]=120set ZD0=GO0set GO0=GO0+1set FT0[GO0]=1227899440set FR0[GO0]=1227899441set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNCheese.blp"set GI0[GO0]=0set FU0[GO0]=1000set ZE0=GO0set GO0=GO0+1set FT0[GO0]=1227900743set FR0[GO0]=1227900742set FP0[GO0]=1747990325set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPotionOfDivinity.blp"set GI0[GO0]=30set FU0[GO0]=160set ZF0=GO0set GO0=GO0+1set FT0[GO0]=1227900745set FR0[GO0]=1227900744set FP0[GO0]=1747990326set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDustOfAppearance.blp"set GI0[GO0]=60set FU0[GO0]=180set ZG0=GO0set GO0=GO0+1set FT0[GO0]=1227901780set FR0[GO0]=1227901779set FP0[GO0]=1747993145set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWandOfManaSteal.blp"set GI0[GO0]=0set FU0[GO0]=600set ZH0=GO0set GO0=GO0+1set FT0[GO0]=1227902534set FR0[GO0]=1227902535set FP0[GO0]=1747993651set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSmokePotion.blp"set GI0[GO0]=90set FU0[GO0]=100set ZZ0=GO0set GO0=GO0+1set FT0[GO0]=1227896369set FR0[GO0]=1227896370set FP0[GO0]=0set FQ0[GO0]=1227895114set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbOfFire.blp"set GI0[GO0]=0set FU0[GO0]=1750set ZV0=GO0set GO0=GO0+1set FT0[GO0]=1227896372set FR0[GO0]=1227896371set FP0[GO0]=0set FQ0[GO0]=1227895115set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_17.blp"set GI0[GO0]=0set FU0[GO0]=600set ZW0=GO0set GO0=GO0+1set FT0[GO0]=1227896373set FR0[GO0]=1227896374set FP0[GO0]=0set FQ0[GO0]=1227895116set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNThoriumArmor.blp"set GI0[GO0]=25set FU0[GO0]=800set ZX0=GO0set GO0=GO0+1set FT0[GO0]=1227896376set FR0[GO0]=1227896375set FP0[GO0]=0set FQ0[GO0]=1227895117set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"set GI0[GO0]=0set FU0[GO0]=525set ZY0=GO0set GO0=GO0+1set FT0[GO0]=1227896377set FR0[GO0]=1227896385set FP0[GO0]=0set FQ0[GO0]=1227899702set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"set GI0[GO0]=0set FU0[GO0]=525set ZJ0=GO0set GO0=GO0+1set FT0[GO0]=1227896387set FR0[GO0]=1227896386set FP0[GO0]=0set FQ0[GO0]=1227895120set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAbility_Rogue_Sprint.blp"set GI0[GO0]=50set FU0[GO0]=2450set ZK0=GO0set GO0=GO0+1set FT0[GO0]=1227895631set FR0[GO0]=1227895380set FP0[GO0]=0set FQ0[GO0]=1227895122set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegGreen.blp"set GI0[GO0]=0set FU0[GO0]=1400set ZL0=GO0set GO0=GO0+1set FT0[GO0]=1227895381set FR0[GO0]=1227896153set FP0[GO0]=0set FQ0[GO0]=1227895121set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWirtsLeg.blp"set GI0[GO0]=0set FU0[GO0]=1400set ZM0=GO0set GO0=GO0+1set FT0[GO0]=1227896368set FR0[GO0]=1227896154set FP0[GO0]=0set FQ0[GO0]=1227895123set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegBlue.blp"set GI0[GO0]=0set FU0[GO0]=1400set ZN0=GO0set GO0=GO0+1set FT0[GO0]=1227896389set FR0[GO0]=1227896388set FP0[GO0]=0set FQ0[GO0]=1227895124set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"set GI0[GO0]=100set FU0[GO0]=2050set ZS0=GO0set GO0=GO0+1set FT0[GO0]=1227902543set FR0[GO0]=1227902542set FP0[GO0]=0set FQ0[GO0]=1227902544set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"set GI0[GO0]=100set FU0[GO0]=2050set ZT0=GO0set GO0=GO0+1set FT0[GO0]=1227896391set FR0[GO0]=1227896390set FP0[GO0]=0set FQ0[GO0]=1227895125set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Mace_10.blp"set GI0[GO0]=0set FU0[GO0]=1675set ZR0=GO0set GO0=GO0+1set FT0[GO0]=1227896393set FR0[GO0]=1227896392set FP0[GO0]=0set FQ0[GO0]=1227895126set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp"set GI0[GO0]=0set FU0[GO0]=525set ZP0=GO0set GO0=GO0+1set FT0[GO0]=1227896395set FR0[GO0]=1227896394set FP0[GO0]=0set FQ0[GO0]=1227895127set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"set GI0[GO0]=0set FU0[GO0]=485set ZQ0=GO0set GO0=GO0+1set FT0[GO0]=1227896397set FR0[GO0]=1227896396set FP0[GO0]=0set FQ0[GO0]=1227895128set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNTalisman.tga"set GI0[GO0]=0set FU0[GO0]=470set ZU0=GO0set GO0=GO0+1set FT0[GO0]=1227896902set FR0[GO0]=1227896903set FP0[GO0]=0set FQ0[GO0]=1227895129set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_10.blp"set GI0[GO0]=0set FU0[GO0]=2050set V00=GO0set GO0=GO0+1set FT0[GO0]=1227896905set FR0[GO0]=1227896904set FP0[GO0]=0set FQ0[GO0]=1227895130set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNJapaneseSword.BLP"set GI0[GO0]=0set FU0[GO0]=2050set VI0=GO0set GO0=GO0+1set FT0[GO0]=1227896906set FR0[GO0]=1227896907set FP0[GO0]=0set FQ0[GO0]=1227895344set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"set GI0[GO0]=0set FU0[GO0]=2950set V10=GO0set GO0=GO0+1set FT0[GO0]=1227896909set FR0[GO0]=1227896908set FP0[GO0]=0set FQ0[GO0]=1227899704set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"set GI0[GO0]=0set FU0[GO0]=2950set VO0=GO0set GO0=GO0+1set FT0[GO0]=1227896910set FR0[GO0]=1227896911set FP0[GO0]=0set FQ0[GO0]=1227895345set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate06.blp"set GI0[GO0]=17set FU0[GO0]=2200set V20=GO0set GO0=GO0+1set FT0[GO0]=1227896913set FR0[GO0]=1227896912set FP0[GO0]=0set FQ0[GO0]=1227895346set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStormHammer.blp"set GI0[GO0]=0set FU0[GO0]=2800set V30=GO0set GO0=GO0+1set FT0[GO0]=1227896915set FR0[GO0]=1227896914set FP0[GO0]=0set FQ0[GO0]=1227895347set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"set GI0[GO0]=12set FU0[GO0]=3150set V40=GO0set GO0=GO0+1set FT0[GO0]=1227901506set FR0[GO0]=1227901497set FP0[GO0]=0set FQ0[GO0]=1227901508set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"set GI0[GO0]=12set FU0[GO0]=3850set V50=GO0set GO0=GO0+1set FT0[GO0]=1227900247set FR0[GO0]=1227900246set FP0[GO0]=0set FQ0[GO0]=1227900248set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"set GI0[GO0]=0set FU0[GO0]=0set V60=GO0set GO0=GO0+1set FT0[GO0]=1227901507set FR0[GO0]=1227901505set FP0[GO0]=0set FQ0[GO0]=1227901509set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"set GI0[GO0]=0set FU0[GO0]=0set V70=GO0set GO0=GO0+1set FT0[GO0]=1227896917set FR0[GO0]=1227896916set FP0[GO0]=0set FQ0[GO0]=1227895348set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"set GI0[GO0]=60set FU0[GO0]=1850set V80=GO0set GO0=GO0+1set FT0[GO0]=1227896919set FR0[GO0]=1227896918set FP0[GO0]=0set FQ0[GO0]=1227899727set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"set GI0[GO0]=0set FU0[GO0]=1850set V90=GO0set GO0=GO0+1set FT0[GO0]=1227896920set FR0[GO0]=1227896921set FP0[GO0]=0set FQ0[GO0]=1227895349set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHelmOfValor.blp"set GI0[GO0]=22set FU0[GO0]=1800set VA0=GO0set GO0=GO0+1set FT0[GO0]=1227897136set FR0[GO0]=1227896922set FP0[GO0]=0set FQ0[GO0]=1227895350set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStaffofpurification.blp"set GI0[GO0]=23set FU0[GO0]=2850set VB0=GO0set GO0=GO0+1set FT0[GO0]=1227897138set FR0[GO0]=1227897137set FP0[GO0]=0set FQ0[GO0]=1227895351set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPhilosophersStone.blp"set GI0[GO0]=0set FU0[GO0]=3300set VC0=GO0set GO0=GO0+1set FT0[GO0]=1227897140set FR0[GO0]=1227897139set FP0[GO0]=0set FQ0[GO0]=1227895352set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSpellShieldAmulet.blp"set GI0[GO0]=45set FU0[GO0]=2300set VD0=GO0set GO0=GO0+1set FT0[GO0]=1227897142set FR0[GO0]=1227897141set FP0[GO0]=0set FQ0[GO0]=1227895353set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSpell_Holy_BlessingOfStrength.blp"set GI0[GO0]=0set FU0[GO0]=4100set VE0=GO0set GO0=GO0+1set FT0[GO0]=1227897144set FR0[GO0]=1227897143set FP0[GO0]=0set FQ0[GO0]=1227895361set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAbility_Gouge.blp"set GI0[GO0]=0set FU0[GO0]=4100set VF0=GO0set GO0=GO0+1set FT0[GO0]=1227897153set FR0[GO0]=1227897145set FP0[GO0]=0set FQ0[GO0]=1227895362set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_06.blp"set GI0[GO0]=0set FU0[GO0]=4350set VG0=GO0set GO0=GO0+1set FT0[GO0]=1227897154set FR0[GO0]=1227897155set FP0[GO0]=0set FQ0[GO0]=1227895363set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp"set GI0[GO0]=0set FU0[GO0]=2150set VH0=GO0set GO0=GO0+1set FT0[GO0]=1227900722set FR0[GO0]=1227900506set FP0[GO0]=0set FQ0[GO0]=1227900728set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=80set FU0[GO0]=3975set VZ0=GO0set GO0=GO0+1set FT0[GO0]=1227900726set FR0[GO0]=1227900720set FP0[GO0]=0set FQ0[GO0]=1227900729set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=75set FU0[GO0]=3975set VV0=GO0set GO0=GO0+1set FT0[GO0]=1227897157set FR0[GO0]=1227900505set FP0[GO0]=0set FQ0[GO0]=1227900727set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=70set FU0[GO0]=3975set VW0=GO0set GO0=GO0+1set FT0[GO0]=1227900725set FR0[GO0]=1227900499set FP0[GO0]=0set FQ0[GO0]=1227895364set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=65set FU0[GO0]=3975set VX0=GO0set GO0=GO0+1set FT0[GO0]=1227900723set FR0[GO0]=1227897156set FP0[GO0]=0set FQ0[GO0]=1227900738set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=60set FU0[GO0]=3975set VY0=GO0set GO0=GO0+1set FT0[GO0]=1227900724set FR0[GO0]=1227900721set FP0[GO0]=0set FQ0[GO0]=1227900737set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=55set FU0[GO0]=3975set VJ0=GO0set GO0=GO0+1set FT0[GO0]=1227903030set FR0[GO0]=1227903032set FP0[GO0]=0set FQ0[GO0]=1227903031set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"set GI0[GO0]=50set FU0[GO0]=3975set VK0=GO0set GO0=GO0+1set FT0[GO0]=1227899224set FR0[GO0]=1227899223set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNArcaniteArmor.blp"set GI0[GO0]=0set FU0[GO0]=0set VL0=GO0set GO0=GO0+1set FT0[GO0]=1227897159set FR0[GO0]=1227897158set FP0[GO0]=0set FQ0[GO0]=1227895365set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"set GI0[GO0]=35set FU0[GO0]=4950set VM0=GO0set GO0=GO0+1set FT0[GO0]=1227902294set FR0[GO0]=1227902293set FP0[GO0]=0set FQ0[GO0]=1227902295set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"set GI0[GO0]=50set FU0[GO0]=4950set VN0=GO0set GO0=GO0+1set FT0[GO0]=1227897161set FR0[GO0]=1227897160set FP0[GO0]=0set FQ0[GO0]=1227895366set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNLothars.BLP"set GI0[GO0]=22set FU0[GO0]=2800set VS0=GO0set GO0=GO0+1set FT0[GO0]=1227897163set FR0[GO0]=1227897165set FP0[GO0]=0set FQ0[GO0]=1227895111set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"set GI0[GO0]=40set FU0[GO0]=2720set VT0=GO0set GO0=GO0+1set FT0[GO0]=1227897162set FR0[GO0]=1227897168set FP0[GO0]=0set FQ0[GO0]=1227895367set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"set GI0[GO0]=36set FU0[GO0]=3970set VR0=GO0set GO0=GO0+1set FT0[GO0]=1227897169set FR0[GO0]=1227897166set FP0[GO0]=0set FQ0[GO0]=1227899971set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"set GI0[GO0]=32set FU0[GO0]=5220set VP0=GO0set GO0=GO0+1set FT0[GO0]=1227897171set FR0[GO0]=1227897167set FP0[GO0]=0set FQ0[GO0]=1227899972set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"set GI0[GO0]=28set FU0[GO0]=6470set VQ0=GO0set GO0=GO0+1set FT0[GO0]=1227897170set FR0[GO0]=1227897164set FP0[GO0]=0set FQ0[GO0]=1227899955set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"set GI0[GO0]=24set FU0[GO0]=7720set VU0=GO0set GO0=GO0+1set FT0[GO0]=1227897173set FR0[GO0]=1227897172set FP0[GO0]=0set FQ0[GO0]=1227895368set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNNecromancerAdept.blp"set GI0[GO0]=95set FU0[GO0]=2700set W00=GO0set GO0=GO0+1set FT0[GO0]=1227897174set FR0[GO0]=1227897176set FP0[GO0]=0set FQ0[GO0]=1227895369set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBookOfTheDead.blp"set GI0[GO0]=95set FU0[GO0]=3950set WI0=GO0set GO0=GO0+1set FT0[GO0]=1227897175set FR0[GO0]=1227897177set FP0[GO0]=0set FQ0[GO0]=1227895370set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp"set GI0[GO0]=95set FU0[GO0]=5200set W10=GO0set GO0=GO0+1set FT0[GO0]=1227899184set FR0[GO0]=1227897178set FP0[GO0]=0set FQ0[GO0]=1227899471set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"set GI0[GO0]=0set FU0[GO0]=5175set WO0=GO0set GO0=GO0+1set FT0[GO0]=1227901003set FR0[GO0]=1227901002set FP0[GO0]=0set FQ0[GO0]=1227901004set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"set GI0[GO0]=0set FU0[GO0]=5175set W20=GO0set GO0=GO0+1set FT0[GO0]=1227899186set FR0[GO0]=1227899185set FP0[GO0]=0set FQ0[GO0]=1227899472set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"set GI0[GO0]=0set FU0[GO0]=7800set W30=GO0set GO0=GO0+1set FT0[GO0]=1227902025set FR0[GO0]=1227902026set FP0[GO0]=0set FQ0[GO0]=1227902027set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"set GI0[GO0]=0set FU0[GO0]=7800set W40=GO0set GO0=GO0+1set FT0[GO0]=1227899188set FR0[GO0]=1227899187set FP0[GO0]=0set FQ0[GO0]=1227899473set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Crossbow_10.blp"set GI0[GO0]=0set FU0[GO0]=5550set W50=GO0set GO0=GO0+1set FT0[GO0]=1227899190set FR0[GO0]=1227899189set FP0[GO0]=0set FQ0[GO0]=1227899474set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"set GI0[GO0]=0set FU0[GO0]=5400set W60=GO0set GO0=GO0+1set FT0[GO0]=1227901752set FR0[GO0]=1227901751set FP0[GO0]=0set FQ0[GO0]=1227901753set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"set GI0[GO0]=0set FU0[GO0]=5400set W70=GO0set GO0=GO0+1set FT0[GO0]=1227899191set FR0[GO0]=1227899192set FP0[GO0]=0set FQ0[GO0]=1227899475set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"set GI0[GO0]=0set FU0[GO0]=5150set W80=GO0set GO0=GO0+1set FT0[GO0]=1227901777set FR0[GO0]=1227901776set FP0[GO0]=0set FQ0[GO0]=1227901778set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"set GI0[GO0]=0set FU0[GO0]=5150set W90=GO0set GO0=GO0+1set FT0[GO0]=1227899201set FR0[GO0]=1227899193set FP0[GO0]=0set FQ0[GO0]=1227899476set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"set GI0[GO0]=0set FU0[GO0]=5500set WA0=GO0set GO0=GO0+1set FT0[GO0]=1227899201set FR0[GO0]=1227901772set FQ0[GO0]=1227901773set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"set GI0[GO0]=0set FU0[GO0]=5500set WB0=GO0set GO0=GO0+1set FT0[GO0]=1227899203set FR0[GO0]=1227899202set FP0[GO0]=0set FQ0[GO0]=1227899477set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHornOfDoom.blp"set GI0[GO0]=35set FU0[GO0]=6150set WC0=GO0set GO0=GO0+1set FT0[GO0]=1227899204set FR0[GO0]=1227899205set FP0[GO0]=0set FQ0[GO0]=1227899478set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"set GI0[GO0]=0set FU0[GO0]=5675set WD0=GO0set GO0=GO0+1set FT0[GO0]=1227899207set FR0[GO0]=1227899206set FP0[GO0]=0set FQ0[GO0]=1227899732set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"set GI0[GO0]=0set FU0[GO0]=5675set WE0=GO0set GO0=GO0+1set FT0[GO0]=1227899208set FR0[GO0]=1227899209set FP0[GO0]=0set FQ0[GO0]=1227899479set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp"set GI0[GO0]=0set FU0[GO0]=6000set WF0=GO0set GO0=GO0+1set FT0[GO0]=1227903559set FR0[GO0]=1227903560set FP0[GO0]=0set FQ0[GO0]=1227903561set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp"set GI0[GO0]=0set FU0[GO0]=6000set WG0=GO0set GO0=GO0+1set FT0[GO0]=1227899448set FR0[GO0]=1227899225set FP0[GO0]=0set FQ0[GO0]=1227894850set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set FU0[GO0]=4200set JD0=GO0set GO0=GO0+1set FT0[GO0]=1227899211set FR0[GO0]=1227899210set FP0[GO0]=0set FQ0[GO0]=1227899480set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHeartOfSearinox.blp"set GI0[GO0]=210set FU0[GO0]=5225set WH0=GO0set GO0=GO0+1set FT0[GO0]=1227896651set FR0[GO0]=1227899212set FP0[GO0]=0set FQ0[GO0]=1227899481set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_09.blp"set GI0[GO0]=35set FU0[GO0]=5675set WZ0=GO0set GO0=GO0+1set FT0[GO0]=1227899458set FR0[GO0]=1227899457set FP0[GO0]=0set FQ0[GO0]=1227899482set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"set GI0[GO0]=0set FU0[GO0]=2275set WV0=GO0set GO0=GO0+1set FT0[GO0]=1227902021set FR0[GO0]=1227902019set FP0[GO0]=0set FQ0[GO0]=1227902020set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"set GI0[GO0]=0set FU0[GO0]=2275set WW0=GO0set GO0=GO0+1set FT0[GO0]=1227899459set FR0[GO0]=1227899460set FP0[GO0]=0set FQ0[GO0]=1227894851set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNArcaneRing.blp"set GI0[GO0]=33set FU0[GO0]=1700set WX0=GO0set GO0=GO0+1set FT0[GO0]=1227899462set FR0[GO0]=1227899461set FQ0[GO0]=1227899696set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNThunderMallet.blp"set GI0[GO0]=35set FU0[GO0]=5700set WY0=GO0set GO0=GO0+1set FT0[GO0]=1227895092set FR0[GO0]=1227895108set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRavenForm.blp"set GI0[GO0]=0set FU0[GO0]=370set WJ0=GO0set GO0=GO0+1set FT0[GO0]=1227899464set FR0[GO0]=1227899463set FP0[GO0]=0set FQ0[GO0]=1227899697set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNCloakOfFlames.blp"set GI0[GO0]=0set FU0[GO0]=2075set WK0=GO0set GO0=GO0+1set FT0[GO0]=1227899465set FR0[GO0]=1227899466set FP0[GO0]=0set FQ0[GO0]=1227899698set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_14.blp"set GI0[GO0]=0set FU0[GO0]=5250set WL0=GO0set GO0=GO0+1set FT0[GO0]=1227899468set FR0[GO0]=1227899467set FP0[GO0]=0set FQ0[GO0]=1227899699set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Gem_Bloodstone_02.blp"set GI0[GO0]=70set FU0[GO0]=5075set WM0=GO0set GO0=GO0+1set FT0[GO0]=1227903320set FR0[GO0]=1227903321set FP0[GO0]=0set FQ0[GO0]=1227903322set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNCrimsonGuard.blp"set GI0[GO0]=70set FU0[GO0]=5075set Z40=GO0set GO0=GO0+1set FT0[GO0]=1227899470set FR0[GO0]=1227899469set FP0[GO0]=0set FQ0[GO0]=1227899700set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHoodOfCunning.blp"set GI0[GO0]=0set FU0[GO0]=2125set WN0=GO0set GO0=GO0+1set FT0[GO0]=1227894867set FR0[GO0]=1227894861set FP0[GO0]=0set FQ0[GO0]=1227895107set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"set GI0[GO0]=0set FU0[GO0]=2400set WS0=GO0set GO0=GO0+1set FT0[GO0]=1227894868set FR0[GO0]=1227894865set FP0[GO0]=0set FQ0[GO0]=1227895109set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"set GI0[GO0]=0set FU0[GO0]=2400set WT0=GO0set GO0=GO0+1set FT0[GO0]=1227894870set FR0[GO0]=1227894862set FP0[GO0]=0set FQ0[GO0]=1227895110set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"set GI0[GO0]=0set FU0[GO0]=2400set WR0=GO0set GO0=GO0+1set FT0[GO0]=1227894871set FR0[GO0]=1227894866set FP0[GO0]=0set FQ0[GO0]=1227899973set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"set GI0[GO0]=0set FU0[GO0]=2400set WP0=GO0set GO0=GO0+1set FT0[GO0]=1227894872set FR0[GO0]=1227894874set FP0[GO0]=0set FQ0[GO0]=1227899718set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"set GI0[GO0]=30set FU0[GO0]=5060set WQ0=GO0set GO0=GO0+1set FT0[GO0]=1227894873set FR0[GO0]=1227895088set FP0[GO0]=0set FQ0[GO0]=1227899974set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"set GI0[GO0]=0set FU0[GO0]=5060set WU0=GO0set GO0=GO0+1set FT0[GO0]=1227895091set FR0[GO0]=1227895090set FP0[GO0]=0set FQ0[GO0]=1227899714set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSilence.blp"set GI0[GO0]=18set FU0[GO0]=4125set X00=GO0set GO0=GO0+1set FT0[GO0]=1227900747set FR0[GO0]=1227900746set FP0[GO0]=0set FQ0[GO0]=1227900748set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPhaseBoots.blp"set GI0[GO0]=8set FU0[GO0]=1350set XI0=GO0set GO0=GO0+1set FT0[GO0]=1227900999set FR0[GO0]=1227901001set FP0[GO0]=0set FQ0[GO0]=1227901000set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNForceStaff.blp"set GI0[GO0]=20set FU0[GO0]=2250set XO0=GO0set GO0=GO0+1set FT0[GO0]=1227901232set FR0[GO0]=1227901750set FP0[GO0]=0set FQ0[GO0]=1227901234set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPipeOfInsight.blp"set GI0[GO0]=25set FU0[GO0]=3525set X20=GO0set FU0[GO0]=1960set GO0=GO0+1set FT0[GO0]=1227901511set FR0[GO0]=1227901510set FP0[GO0]=0set FQ0[GO0]=1227901512set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"set GI0[GO0]=12set FU0[GO0]=550set X30=GO0set GO0=GO0+1set FT0[GO0]=1227901764set FR0[GO0]=1227901766set FP0[GO0]=0set FQ0[GO0]=1227901765set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"set GI0[GO0]=12set FU0[GO0]=550set X40=GO0set GO0=GO0+1set FT0[GO0]=1227901784set FR0[GO0]=1227901785set FP0[GO0]=0set FQ0[GO0]=1227901786set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"set GI0[GO0]=8set FU0[GO0]=875set X60=GO0set GO0=GO0+1set FT0[GO0]=1227902023set FR0[GO0]=1227902022set FP0[GO0]=0set FQ0[GO0]=1227902024set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"set GI0[GO0]=0set FU0[GO0]=875set X70=GO0set GO0=GO0+1set FT0[GO0]=1227902032set FR0[GO0]=1227902028set FP0[GO0]=0set FQ0[GO0]=1227902033set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSoulRing.blp"set GI0[GO0]=30set FU0[GO0]=800set X80=GO0set GO0=GO0+1set FT0[GO0]=1227902034set FR0[GO0]=1227902036set FP0[GO0]=0set FQ0[GO0]=1227902035set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGhostBlade.blp"set GI0[GO0]=30set FU0[GO0]=4900set HS0=GO0set GO0=GO0+1set FT0[GO0]=1227902282set FR0[GO0]=1227902281set FP0[GO0]=0set FQ0[GO0]=1227902283set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNArcaneBoots.blp"set GI0[GO0]=45set FU0[GO0]=1450set X90=GO0set GO0=GO0+1set FT0[GO0]=1227902513set FR0[GO0]=1227902512set FP0[GO0]=0set FQ0[GO0]=1227902514set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNMedalionOfCourage.blp"set GI0[GO0]=7set FU0[GO0]=1200set XA0=GO0set GO0=GO0+1set FT0[GO0]=1227902532set FR0[GO0]=1227902533set FP0[GO0]=0set FQ0[GO0]=1227902531set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"set GI0[GO0]=30set FU0[GO0]=1850set HP0=GO0set GO0=GO0+1set FT0[GO0]=1227902540set FR0[GO0]=1227902539set FP0[GO0]=0set FQ0[GO0]=1227902541set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"set GI0[GO0]=0set FU0[GO0]=0set HQ0=GO0set GO0=GO0+1set FT0[GO0]=1227902770set FR0[GO0]=1227902771set FP0[GO0]=0set FQ0[GO0]=1227902772set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"set GI0[GO0]=30set FU0[GO0]=2670set XB0=GO0set GO0=GO0+1set FT0[GO0]=1227902787set FR0[GO0]=1227902789set FP0[GO0]=0set FQ0[GO0]=1227902788set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"set GI0[GO0]=30set FU0[GO0]=5475set HU0=GO0set GO0=GO0+1set FT0[GO0]=1227902790set FR0[GO0]=1227902791set FP0[GO0]=0set FQ0[GO0]=1227902792set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"set GI0[GO0]=60set FU0[GO0]=1000set Z00=GO0set GO0=GO0+1set FT0[GO0]=1227902794set FR0[GO0]=1227902793set FP0[GO0]=0set FQ0[GO0]=1227902795set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"set GI0[GO0]=60set FU0[GO0]=1000set ZI0=GO0set GO0=GO0+1set FT0[GO0]=1227902797set FR0[GO0]=1227902796set FP0[GO0]=0set FQ0[GO0]=1227902798set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctorMaster.blp"set GI0[GO0]=10set FU0[GO0]=3100set Z10=GO0set GO0=GO0+1set FT0[GO0]=1227902800set FR0[GO0]=1227902799set FP0[GO0]=0set FQ0[GO0]=1227902801set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"set GI0[GO0]=20set FU0[GO0]=4200set ZO0=GO0set GO0=GO0+1set FT0[GO0]=1227902805set FR0[GO0]=1227902806set FP0[GO0]=0set FQ0[GO0]=1227902807set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHalberd.blp"set GI0[GO0]=30set FU0[GO0]=3850set XC0=GO0set GO0=GO0+1set FT0[GO0]=1227902809set FR0[GO0]=1227902808set FP0[GO0]=0set FQ0[GO0]=1227902810set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAnnihilator.blp"set GI0[GO0]=60set FU0[GO0]=6750set XD0=GO0set GO0=GO0+1set FT0[GO0]=1227903024set FR0[GO0]=1227903025set FP0[GO0]=0set FQ0[GO0]=1227903026set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"set GI0[GO0]=0set FU0[GO0]=1010set Z20=GO0set GO0=GO0+1set FT0[GO0]=1227903027set FR0[GO0]=1227903028set FP0[GO0]=0set FQ0[GO0]=1227903029set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"set GI0[GO0]=0set FU0[GO0]=1010set Z30=GO0set GO0=GO0+1set FT0[GO0]=1227903305set FR0[GO0]=1227903306set FP0[GO0]=0set FQ0[GO0]=1227903307set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"set GI0[GO0]=0set FU0[GO0]=100000set XZ0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989063set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747990582set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896140set FR0[GO0]=1227896146set FP0[GO0]=1747989064set FQ0[GO0]=1227899987set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=200set XV0=GO0set GO0=GO0+1set FT0[GO0]=1227896141set FR0[GO0]=1227896147set FP0[GO0]=1747989065set FQ0[GO0]=1227899988set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=200set XW0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989066set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896143set FR0[GO0]=1227896148set FP0[GO0]=1747989067set FQ0[GO0]=1227899989set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=2000set XX0=GO0set GO0=GO0+1set FP0[GO0]=1747988788set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=0set XY0=GO0set GO0=GO0+1set FT0[GO0]=1227896144set FR0[GO0]=1227896149set FP0[GO0]=1747989068set FQ0[GO0]=1227899991set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1550set XJ0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989069set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896139set FR0[GO0]=1227896150set FP0[GO0]=1747989070set FQ0[GO0]=1227899992set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=210set XK0=GO0set GO0=GO0+1set FT0[GO0]=1227896142set FR0[GO0]=1227896151set FP0[GO0]=1747989071set FQ0[GO0]=1227899993set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=170set XL0=GO0set GO0=GO0+1set FT0[GO0]=1227896145set FR0[GO0]=1227896152set FP0[GO0]=1747989072set FQ0[GO0]=1227899994set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=155set XM0=GO0set GO0=GO0+1set FT0[GO0]=1227896398set FR0[GO0]=1227896399set FP0[GO0]=1747989073set FQ0[GO0]=1227900208set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=600set XN0=GO0set GO0=GO0+1set FT0[GO0]=1227896401set FR0[GO0]=1227896400set FP0[GO0]=1747989074set FQ0[GO0]=1227900209set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=600set XS0=GO0set GO0=GO0+1set FT0[GO0]=1227896402set FR0[GO0]=1227896403set FP0[GO0]=1747989075set FQ0[GO0]=1227900210set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1000set XT0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989076set G00[GO0]=""set GI0[GO0]=0set FU0[GO0]=500set GO0=GO0+1set FT0[GO0]=1227896407set FR0[GO0]=1227896406set FP0[GO0]=1747989077set FQ0[GO0]=1227900212set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=700set XR0=GO0set GO0=GO0+1set FT0[GO0]=1227896408set FR0[GO0]=1227896409set FP0[GO0]=1747989078set FQ0[GO0]=1227900213set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=700set XP0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989079set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896624set FR0[GO0]=1227896410set FP0[GO0]=1747989080set FQ0[GO0]=1227900214set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=900set XQ0=GO0set GO0=GO0+1set FT0[GO0]=1227896625set FR0[GO0]=1227896626set FP0[GO0]=1747989081set FQ0[GO0]=1227900215set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=650set XU0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989082set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896628set FR0[GO0]=1227896627set FP0[GO0]=1747989296set FQ0[GO0]=1227900216set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=900set Y00=GO0set GO0=GO0+1set FP0[GO0]=1747989297set G00[GO0]=""set GI0[GO0]=0set FU0[GO0]=500set YI0=GO0set GO0=GO0+1set FT0[GO0]=1227896630set FR0[GO0]=1227896662set FP0[GO0]=1747989298set FQ0[GO0]=1227900225set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=900set Y10=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989299set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896631set FR0[GO0]=1227896663set FP0[GO0]=1747989300set FQ0[GO0]=1227900226set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=500set YO0=GO0set GO0=GO0+1set FT0[GO0]=1227896632set FR0[GO0]=1227896664set FP0[GO0]=1747989301set FQ0[GO0]=1227900227set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1375set Y20=GO0set GO0=GO0+1set FT0[GO0]=1227896633set FR0[GO0]=1227896665set FP0[GO0]=1747989302set FQ0[GO0]=1227900228set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=800set Y30=GO0set GO0=GO0+1set FT0[GO0]=1227896641set FR0[GO0]=1227896666set FP0[GO0]=0set FQ0[GO0]=1227900229set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1000set Y40=GO0set GO0=GO0+1set FT0[GO0]=1227896642set FR0[GO0]=1227896880set FP0[GO0]=1747989304set FQ0[GO0]=1227900230set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1250set Y50=GO0set GO0=GO0+1set FT0[GO0]=1227896643set FR0[GO0]=1227896881set FP0[GO0]=1747989305set FQ0[GO0]=1227900231set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1250set Y60=GO0set GO0=GO0+1set FT0[GO0]=1227896644set FR0[GO0]=1227896882set FP0[GO0]=1747989313set FQ0[GO0]=1227900232set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1325set Y70=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989315set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896645set FR0[GO0]=1227896883set FP0[GO0]=1747989316set FQ0[GO0]=1227900233set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1200set Y80=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989317set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896647set FR0[GO0]=1227896646set FP0[GO0]=1747989318set FQ0[GO0]=1227900234set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1350set Y90=GO0set GO0=GO0+1set FT0[GO0]=1227896648set FR0[GO0]=1227896884set FP0[GO0]=1747989319set FQ0[GO0]=1227900235set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1200set YA0=GO0set GO0=GO0+1set FT0[GO0]=1227896655set FR0[GO0]=1227896885set FP0[GO0]=1747989320set FQ0[GO0]=1227900236set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1100set YB0=GO0set GO0=GO0+1set FP0[GO0]=1747989321set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=480set YC0=GO0set GO0=GO0+1set FP0[GO0]=1747989322set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1800set YD0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989323set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1760set YK0=GO0set GO0=GO0+1set FT0[GO0]=1227896650set FR0[GO0]=1227896888set FP0[GO0]=1747989324set FQ0[GO0]=1227900239set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1800set YE0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989325set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989326set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896653set FR0[GO0]=1227896889set FP0[GO0]=1747989327set FQ0[GO0]=1227900240set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=840set YF0=GO0set GO0=GO0+1set FT0[GO0]=1227896656set FR0[GO0]=1227896897set FP0[GO0]=1747989329set FQ0[GO0]=1227900241set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=220set YG0=GO0set GO0=GO0+1set FT0[GO0]=1227896657set FR0[GO0]=1227896898set FP0[GO0]=1747989330set FQ0[GO0]=1227900242set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=300set YH0=GO0set GO0=GO0+1set FT0[GO0]=1227896658set FR0[GO0]=1227896899set FP0[GO0]=1747989331set FQ0[GO0]=1227900243set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1300set YZ0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747989333set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227896659set FR0[GO0]=1227896900set FP0[GO0]=1747989334set FQ0[GO0]=1227900244set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=500set YV0=GO0set GO0=GO0+1set FT0[GO0]=1227896660set FR0[GO0]=1227896901set FP0[GO0]=1747989335set FQ0[GO0]=1227900245set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=600set YW0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747990329set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=1227900984set FR0[GO0]=1227900983set FP0[GO0]=1747990355set FQ0[GO0]=1227900985set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=150set YX0=GO0set GO0=GO0+1set FT0[GO0]=1227900996set FR0[GO0]=1227900998set FP0[GO0]=1747990356set FQ0[GO0]=1227900997set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=900set YY0=GO0set GO0=GO0+1set FT0[GO0]=1227903314set FR0[GO0]=1227903315set FP0[GO0]=1747989332set FQ0[GO0]=1227903316set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=800set J10=GO0set GO0=GO0+1set FT0[GO0]=1227903317set FR0[GO0]=1227903318set FP0[GO0]=1747993941set FQ0[GO0]=1227903319set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=825set JO0=GO0set GO0=GO0+1set FT0[GO0]=1227903044set FR0[GO0]=1227903045set FP0[GO0]=0set FQ0[GO0]=1227903046set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=300set JI0=GO0set GO0=GO0+1set FT0[GO0]=1227901016set FR0[GO0]=1227901018set FP0[GO0]=1747990360set FQ0[GO0]=1227901017set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=800set YJ0=GO0set GO0=GO0+1set FT0[GO0]=1227896652set FR0[GO0]=1227901774set FP0[GO0]=1747989328set FQ0[GO0]=1227901775set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=900set YL0=GO0set GO0=GO0+1set FT0[GO0]=1227901783set FR0[GO0]=1227901782set FP0[GO0]=1747993153set FQ0[GO0]=1227901781set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=250set YM0=GO0set GO0=GO0+1set FT0[GO0]=1227902029set FR0[GO0]=1227902030set FP0[GO0]=1747993169set FQ0[GO0]=1227902031set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=125set YN0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=0set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=480set YS0=GO0set GO0=GO0+1set FT0[GO0]=1227902521set FR0[GO0]=1227902529set FP0[GO0]=1747993649set FQ0[GO0]=1227902530set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=875set YT0=GO0set GO0=GO0+1set FT0[GO0]=1227902536set FR0[GO0]=1227902537set FP0[GO0]=1747993433set FQ0[GO0]=1227902538set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=325set YR0=GO0set GO0=GO0+1set FT0[GO0]=1227902773set FR0[GO0]=1227902774set FP0[GO0]=1747993668set FQ0[GO0]=1227902775set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=1270set YP0=GO0set GO0=GO0+1set FT0[GO0]=1227902786set FR0[GO0]=1227902785set FP0[GO0]=1747989336set FQ0[GO0]=1227902777set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"set GI0[GO0]=0set FU0[GO0]=775set YQ0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747993684set G00[GO0]=""set GI0[GO0]=0set YU0=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747993685set G00[GO0]=""set GI0[GO0]=0set J00=GO0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747993913set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747993921set G00[GO0]=""set GI0[GO0]=0set GO0=GO0+1set FT0[GO0]=0set FR0[GO0]=0set FP0[GO0]=1747993923set G00[GO0]=""set GI0[GO0]=0set MT0=CreateRegion()call RegionAddRect(MT0,VB)call RegionAddRect(MT0,WB)set t=CreateTrigger()call TriggerAddCondition(t,Condition(function CBO))set J20=tset t=nullset JC0=JC0+1set J50[JC0]=HI0set J60[JC0]=HB0set JB0[JC0]=ZV0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=GY0set J70[JC0]=XV0set JB0[JC0]=ZW0set JC0=JC0+1set J50[JC0]=GC0set J60[JC0]=GY0set J70[JC0]=XW0set JB0[JC0]=ZX0set JC0=JC0+1set J50[JC0]=H10set J60[JC0]=H50set JB0[JC0]=ZY0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=XX0set JB0[JC0]=ZK0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=G60set J70[JC0]=G50set JB0[JC0]=ZL0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=G80set J70[JC0]=G50set JB0[JC0]=ZM0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=H20set J70[JC0]=G50set JB0[JC0]=ZN0set JC0=JC0+1set J50[JC0]=G50set J60[JC0]=XJ0set JB0[JC0]=ZS0set JC0=JC0+1set J50[JC0]=H00set J60[JC0]=H20set J70[JC0]=H50set JB0[JC0]=ZR0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=GH0set J70[JC0]=XK0set JB0[JC0]=ZP0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=H40set J70[JC0]=XL0set JB0[JC0]=ZQ0set JC0=JC0+1set J50[JC0]=G70set J60[JC0]=GL0set J70[JC0]=XM0set JB0[JC0]=ZU0set JC0=JC0+1set J50[JC0]=G90set J60[JC0]=G60set J70[JC0]=XN0set JB0[JC0]=V00set JC0=JC0+1set J50[JC0]=GR0set J60[JC0]=G80set J70[JC0]=XS0set JB0[JC0]=VI0set JC0=JC0+1set J50[JC0]=HC0set J60[JC0]=G80set J70[JC0]=XT0set JB0[JC0]=V10set JC0=JC0+1set J50[JC0]=GB0set J60[JC0]=GC0set J70[JC0]=H20set JB0[JC0]=V20set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=G50set J70[JC0]=XR0set JB0[JC0]=V30set JC0=JC0+1set J50[JC0]=G90set J60[JC0]=G90set J70[JC0]=H20set J80[JC0]=XP0set JB0[JC0]=V40set JC0=JC0+1set J50[JC0]=V40set J60[JC0]=XP0set JB0[JC0]=V50set JC0=JC0+1set J50[JC0]=V60set J60[JC0]=XP0set JB0[JC0]=V50set JC0=JC0+1set J50[JC0]=GW0set J60[JC0]=GM0set JB0[JC0]=V80set JC0=JC0+1set J50[JC0]=GM0set J60[JC0]=XQ0set JB0[JC0]=VA0set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=H60set J70[JC0]=HB0set J80[JC0]=XU0set JB0[JC0]=VB0set JC0=JC0+1set J50[JC0]=GU0set J60[JC0]=GG0set J70[JC0]=HA0set JB0[JC0]=VC0set JC0=JC0+1set J50[JC0]=ZW0set J60[JC0]=ZX0set J70[JC0]=Y00set JB0[JC0]=VD0set JC0=JC0+1set J50[JC0]=VI0set J60[JC0]=V00set JB0[JC0]=VE0set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=GS0set J70[JC0]=Y10set JB0[JC0]=VF0set JC0=JC0+1set J50[JC0]=ZV0set J60[JC0]=GB0set J70[JC0]=GD0set JB0[JC0]=VG0set JC0=JC0+1set J50[JC0]=GA0set J60[JC0]=GB0set J70[JC0]=YO0set JB0[JC0]=VH0set JC0=JC0+1set J50[JC0]=GS0set J60[JC0]=GR0set J70[JC0]=Y20set JB0[JC0]=VZ0set JC0=JC0+1set J50[JC0]=V00set J60[JC0]=H90set J70[JC0]=Y30set JB0[JC0]=VN0set JC0=JC0+1set J50[JC0]=GD0set J60[JC0]=XE0set JB0[JC0]=VS0set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=ZU0set J70[JC0]=Y50set JB0[JC0]=VT0set JC0=JC0+1set J50[JC0]=VT0set J60[JC0]=Y50set JB0[JC0]=VR0set JC0=JC0+1set J50[JC0]=VR0set J60[JC0]=Y50set JB0[JC0]=VP0set JC0=JC0+1set J50[JC0]=VP0set J60[JC0]=Y50set JB0[JC0]=VQ0set JC0=JC0+1set J50[JC0]=VQ0set J60[JC0]=Y50set JB0[JC0]=VU0set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=G80set J70[JC0]=Y60set JB0[JC0]=W00set JC0=JC0+1set J50[JC0]=W00set J60[JC0]=Y60set JB0[JC0]=WI0set JC0=JC0+1set J50[JC0]=WI0set J60[JC0]=Y60set JB0[JC0]=W10set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=ZV0set J70[JC0]=Y70set JB0[JC0]=WO0set JC0=JC0+1set J50[JC0]=GE0set J60[JC0]=H30set JB0[JC0]=W30set JC0=JC0+1set J50[JC0]=VH0set J60[JC0]=GE0set J70[JC0]=Y80set JB0[JC0]=W50set JC0=JC0+1set J50[JC0]=GE0set J60[JC0]=HC0set J70[JC0]=HC0set JB0[JC0]=W60set JC0=JC0+1set J50[JC0]=H30set J60[JC0]=Y90set JB0[JC0]=W80set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=HA0set J70[JC0]=YA0set JB0[JC0]=WA0set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=V80set J70[JC0]=YB0set JB0[JC0]=WC0set JC0=JC0+1set J50[JC0]=GN0set J60[JC0]=V90set J70[JC0]=YB0set JB0[JC0]=WC0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=H90set J70[JC0]=GU0set J80[JC0]=G20set JB0[JC0]=WD0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=H90set J70[JC0]=GU0set J80[JC0]=G30set JB0[JC0]=WD0set JC0=JC0+1set J50[JC0]=GF0set J60[JC0]=H00set J70[JC0]=HN0set JB0[JC0]=WF0set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=GC0set J70[JC0]=YR0set JB0[JC0]=XA0set JC0=JC0+1set J50[JC0]=GU0set J60[JC0]=GR0set J70[JC0]=G90set J80[JC0]=H60set JB0[JC0]=JD0set JC0=JC0+1set J50[JC0]=ZV0set J60[JC0]=ZR0set J70[JC0]=YE0set JB0[JC0]=WH0set JC0=JC0+1set J50[JC0]=H90set J60[JC0]=GT0set J70[JC0]=HB0set JB0[JC0]=WZ0set JC0=JC0+1set J50[JC0]=HA0set J60[JC0]=HI0set J70[JC0]=H70set JB0[JC0]=WV0set JC0=JC0+1set J50[JC0]=HA0set J60[JC0]=HI0set J70[JC0]=H80set JB0[JC0]=WV0set JC0=JC0+1set J50[JC0]=GG0set J60[JC0]=H10set J70[JC0]=YF0set JB0[JC0]=WX0set JC0=JC0+1set J50[JC0]=GX0set J60[JC0]=V30set J70[JC0]=YL0set JB0[JC0]=WY0set JC0=JC0+1set J50[JC0]=ZD0set J70[JC0]=YG0set JB0[JC0]=WJ0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=ZY0set J70[JC0]=GM0set J80[JC0]=YH0set JB0[JC0]=WK0set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=ZJ0set J70[JC0]=GM0set J80[JC0]=YH0set JB0[JC0]=WK0set JC0=JC0+1set J50[JC0]=GX0set J60[JC0]=GQ0set J70[JC0]=GC0set J80[JC0]=YZ0set JB0[JC0]=WL0set JC0=JC0+1set J50[JC0]=VC0set J60[JC0]=X80set J70[JC0]=J10set JB0[JC0]=WM0set JC0=JC0+1set J50[JC0]=WV0set J60[JC0]=ZX0set J70[JC0]=JO0set JB0[JC0]=Z40set JC0=JC0+1set J50[JC0]=WW0set J60[JC0]=ZX0set J70[JC0]=JO0set JB0[JC0]=Z40set JC0=JC0+1set J50[JC0]=HO0set J60[JC0]=HO0set J70[JC0]=HI0set J80[JC0]=GP0set JB0[JC0]=WN0set JC0=JC0+1set J50[JC0]=G50set J60[JC0]=GW0set J70[JC0]=GA0set J80[JC0]=YV0set JB0[JC0]=WP0set JC0=JC0+1set J50[JC0]=GT0set J60[JC0]=GQ0set J70[JC0]=YW0set JB0[JC0]=WQ0set JC0=JC0+1set J50[JC0]=ZR0set J60[JC0]=ZR0set J70[JC0]=YQ0set JB0[JC0]=X00set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=GA0set J70[JC0]=GA0set JB0[JC0]=XI0set JC0=JC0+1set J50[JC0]=HK0set J60[JC0]=GY0set J70[JC0]=GY0set J80[JC0]=GY0set J90[JC0]=YX0set JB0[JC0]=X10set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=HO0set J70[JC0]=YY0set JB0[JC0]=XO0set JC0=JC0+1set J50[JC0]=WN0set J60[JC0]=ZW0set J70[JC0]=YJ0set JB0[JC0]=X20set JC0=JC0+1set J50[JC0]=H70set J60[JC0]=H40set J70[JC0]=H40set JB0[JC0]=X30set JC0=JC0+1set J50[JC0]=H80set J60[JC0]=H40set J70[JC0]=H40set JB0[JC0]=X30set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=GH0set J70[JC0]=GH0set J80[JC0]=YM0set JB0[JC0]=X60set JC0=JC0+1set J50[JC0]=H50set J60[JC0]=HO0set J70[JC0]=YN0set JB0[JC0]=X80set JC0=JC0+1set J50[JC0]=GF0set J60[JC0]=X50set JB0[JC0]=HS0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=GG0set JB0[JC0]=X90set JC0=JC0+1set J50[JC0]=H20set J60[JC0]=ZP0set J70[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=HP0set J60[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=HQ0set J60[JC0]=YT0set JB0[JC0]=HP0set JC0=JC0+1set J50[JC0]=GW0set J60[JC0]=ZU0set J70[JC0]=YP0set JB0[JC0]=XB0set JC0=JC0+1set J50[JC0]=G40set J60[JC0]=H10set J70[JC0]=HO0set JB0[JC0]=Z00set JC0=JC0+1set J50[JC0]=H60set J60[JC0]=H60set J70[JC0]=HA0set JB0[JC0]=Z10set JC0=JC0+1set J50[JC0]=VI0set J60[JC0]=HN0set JB0[JC0]=XC0set JC0=JC0+1set J50[JC0]=V10set J60[JC0]=H30set JB0[JC0]=XD0set JC0=JC0+1set J50[JC0]=ZQ0set J60[JC0]=ZY0set JB0[JC0]=Z20set JC0=JC0+1set J50[JC0]=ZQ0set J60[JC0]=ZJ0set JB0[JC0]=Z30set JC0=JC0+1set J50[JC0]=XG0set J60[JC0]=XG0set J70[JC0]=XG0set J80[JC0]=XG0set J90[JC0]=XG0set JA0[JC0]=XG0set JB0[JC0]=XH0set GO0=GO0+1set FT0[GO0]=1227899226set FR0[GO0]=1227895089set FP0[GO0]=0set FQ0[GO0]=1227900249set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JE0=GO0set GO0=GO0+1set FT0[GO0]=1227894854set FR0[GO0]=1227894852set FP0[GO0]=0set FQ0[GO0]=1227900250set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JF0=GO0set GO0=GO0+1set FT0[GO0]=1227903545set FR0[GO0]=1227903553set FP0[GO0]=0set FQ0[GO0]=1227903554set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L60=GO0set GO0=GO0+1set FT0[GO0]=1227903542set FR0[GO0]=1227903543set FP0[GO0]=0set FQ0[GO0]=1227903544set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L50=GO0set GO0=GO0+1set FT0[GO0]=1227895096set FR0[GO0]=1227894841set FP0[GO0]=0set FQ0[GO0]=1227900464set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JG0=GO0set GO0=GO0+1set FT0[GO0]=1227895097set FR0[GO0]=1227894837set FP0[GO0]=0set FQ0[GO0]=1227900470set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JH0=GO0set GO0=GO0+1set FT0[GO0]=1227895105set FR0[GO0]=1227894855set FP0[GO0]=0set FQ0[GO0]=1227900465set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JZ0=GO0set GO0=GO0+1set FT0[GO0]=1227895106set FR0[GO0]=1227894836set FP0[GO0]=0set FQ0[GO0]=1227900466set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JV0=GO0set GO0=GO0+1set FT0[GO0]=1227903539set FR0[GO0]=1227903540set FP0[GO0]=0set FQ0[GO0]=1227903541set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L40=GO0set GO0=GO0+1set FT0[GO0]=1227895112set FR0[GO0]=1227894835set FP0[GO0]=0set FQ0[GO0]=1227900467set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JW0=GO0set GO0=GO0+1set FT0[GO0]=1227895113set FR0[GO0]=1227894834set FP0[GO0]=0set FQ0[GO0]=1227900469set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JX0=GO0set GO0=GO0+1set FT0[GO0]=1227895371set FR0[GO0]=1227894833set FP0[GO0]=0set FQ0[GO0]=1227900468set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JY0=GO0set GO0=GO0+1set FT0[GO0]=1227895372set FR0[GO0]=1227894857set FP0[GO0]=0set FQ0[GO0]=1227900485set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JJ0=GO0set GO0=GO0+1set FT0[GO0]=1227903537set FR0[GO0]=1227903536set FP0[GO0]=0set FQ0[GO0]=1227903538set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JK0=GO0set GO0=GO0+1set FT0[GO0]=1227899442set FR0[GO0]=1227894856set FP0[GO0]=0set FQ0[GO0]=1227900473set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JM0=GO0set GO0=GO0+1set FT0[GO0]=1227899443set FR0[GO0]=1227894864set FP0[GO0]=0set FQ0[GO0]=1227900481set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JN0=GO0set GO0=GO0+1set FT0[GO0]=1227899444set FR0[GO0]=1227894869set FP0[GO0]=0set FQ0[GO0]=1227900471set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JS0=GO0set GO0=GO0+1set FT0[GO0]=1227899447set FR0[GO0]=1227894832set FP0[GO0]=0set FQ0[GO0]=1227900484set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JT0=GO0set GO0=GO0+1set FT0[GO0]=1227899446set FR0[GO0]=1227895094set FP0[GO0]=0set FQ0[GO0]=1227900483set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JR0=GO0set GO0=GO0+1set FT0[GO0]=1227899445set FR0[GO0]=1227895095set FP0[GO0]=0set FQ0[GO0]=1227900482set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JP0=GO0set GO0=GO0+1set FT0[GO0]=1227899449set FR0[GO0]=1227894863set FP0[GO0]=0set FQ0[GO0]=1227900472set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JQ0=GO0set GO0=GO0+1set FT0[GO0]=1227901493set FR0[GO0]=1227901268set FP0[GO0]=0set FQ0[GO0]=1227901258set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JU0=GO0set GO0=GO0+1set FT0[GO0]=1227901270set FR0[GO0]=1227901269set FP0[GO0]=0set FQ0[GO0]=1227901241set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K00=GO0set GO0=GO0+1set FT0[GO0]=1227901271set FR0[GO0]=1227901267set FP0[GO0]=0set FQ0[GO0]=1227901257set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KI0=GO0set GO0=GO0+1set FT0[GO0]=1227901272set FR0[GO0]=1227901266set FP0[GO0]=0set FQ0[GO0]=1227901249set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K10=GO0set GO0=GO0+1set FT0[GO0]=1227901273set FR0[GO0]=1227901265set FP0[GO0]=0set FQ0[GO0]=1227901256set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KO0=GO0set GO0=GO0+1set FT0[GO0]=1227901274set FR0[GO0]=1227901259set FP0[GO0]=0set FQ0[GO0]=1227901255set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K20=GO0set GO0=GO0+1set FT0[GO0]=1227901488set FR0[GO0]=1227901260set FP0[GO0]=0set FQ0[GO0]=1227901254set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K30=GO0set GO0=GO0+1set FT0[GO0]=1227901489set FR0[GO0]=1227901261set FP0[GO0]=0set FQ0[GO0]=1227901253set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K40=GO0set GO0=GO0+1set FT0[GO0]=1227901490set FR0[GO0]=1227901264set FP0[GO0]=0set FQ0[GO0]=1227901252set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K50=GO0set GO0=GO0+1set FT0[GO0]=1227901491set FR0[GO0]=1227901263set FP0[GO0]=0set FQ0[GO0]=1227901251set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K60=GO0set GO0=GO0+1set FT0[GO0]=1227901492set FR0[GO0]=1227901262set FP0[GO0]=0set FQ0[GO0]=1227901250set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K70=GO0set GO0=GO0+1set FT0[GO0]=1227901238set FR0[GO0]=1227901239set FP0[GO0]=0set FQ0[GO0]=1227901240set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K80=GO0set GO0=GO0+1set FT0[GO0]=1227901530set FR0[GO0]=1227901523set FP0[GO0]=0set FQ0[GO0]=1227901522set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set K90=GO0set GO0=GO0+1set FT0[GO0]=1227901744set FR0[GO0]=1227901524set FP0[GO0]=0set FQ0[GO0]=1227901516set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KA0=GO0set GO0=GO0+1set FT0[GO0]=1227901745set FR0[GO0]=1227901525set FP0[GO0]=0set FQ0[GO0]=1227901517set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KB0=GO0set GO0=GO0+1set FT0[GO0]=1227901746set FR0[GO0]=1227901527set FP0[GO0]=0set FQ0[GO0]=1227901518set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KC0=GO0set GO0=GO0+1set FT0[GO0]=1227901747set FR0[GO0]=1227901526set FP0[GO0]=0set FQ0[GO0]=1227901521set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KD0=GO0set GO0=GO0+1set FT0[GO0]=1227901748set FR0[GO0]=1227901529set FP0[GO0]=0set FQ0[GO0]=1227901520set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KE0=GO0set GO0=GO0+1set FT0[GO0]=1227901749set FR0[GO0]=1227901528set FP0[GO0]=0set FQ0[GO0]=1227901519set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KF0=GO0set GO0=GO0+1set FT0[GO0]=1227901769set FR0[GO0]=1227901768set FP0[GO0]=0set FQ0[GO0]=1227901770set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KG0=GO0set GO0=GO0+1set FT0[GO0]=1227902004set FR0[GO0]=1227902005set FP0[GO0]=0set FQ0[GO0]=1227902008set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set JL0=GO0set GO0=GO0+1set FT0[GO0]=1227902003set FR0[GO0]=1227902000set FP0[GO0]=0set FQ0[GO0]=1227902009set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KH0=GO0set GO0=GO0+1set FT0[GO0]=1227902002set FR0[GO0]=1227902007set FP0[GO0]=0set FQ0[GO0]=1227902017set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KZ0=GO0set GO0=GO0+1set FT0[GO0]=1227902037set FR0[GO0]=1227902038set FP0[GO0]=0set FQ0[GO0]=1227902039set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KV0=GO0set GO0=GO0+1set FT0[GO0]=1227902257set FR0[GO0]=1227902256set FP0[GO0]=0set FQ0[GO0]=1227902258set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KW0=GO0set GO0=GO0+1set FT0[GO0]=1227902261set FR0[GO0]=1227902260set FP0[GO0]=0set FQ0[GO0]=1227902259set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KX0=GO0set GO0=GO0+1set FT0[GO0]=1227902262set FR0[GO0]=1227902263set FP0[GO0]=0set FQ0[GO0]=1227902264set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KY0=GO0set GO0=GO0+1set FT0[GO0]=1227902278set FR0[GO0]=1227902279set FP0[GO0]=0set FQ0[GO0]=1227902280set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KJ0=GO0set GO0=GO0+1set FT0[GO0]=1227902285set FR0[GO0]=1227902284set FP0[GO0]=0set FQ0[GO0]=1227902286set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KK0=GO0set GO0=GO0+1set FT0[GO0]=1227902287set FR0[GO0]=1227902288set FP0[GO0]=0set FQ0[GO0]=1227902289set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KL0=GO0set GO0=GO0+1set FT0[GO0]=1227902545set FR0[GO0]=1227902546set FP0[GO0]=0set FQ0[GO0]=1227902547set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KM0=GO0set GO0=GO0+1set FT0[GO0]=1227902548set FR0[GO0]=1227902549set FP0[GO0]=0set FQ0[GO0]=1227902550set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KN0=GO0set GO0=GO0+1set FT0[GO0]=1227902551set FR0[GO0]=1227902552set FP0[GO0]=0set FQ0[GO0]=1227902553set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KS0=GO0set GO0=GO0+1set FT0[GO0]=1227902554set FR0[GO0]=1227902768set FP0[GO0]=0set FQ0[GO0]=1227902769set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KT0=GO0set GO0=GO0+1set FT0[GO0]=1227902802set FR0[GO0]=1227902803set FP0[GO0]=0set FQ0[GO0]=1227902804set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KR0=GO0set GO0=GO0+1set FT0[GO0]=1227903047set FR0[GO0]=1227903048set FP0[GO0]=0set FQ0[GO0]=1227903049set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KP0=GO0set GO0=GO0+1set FT0[GO0]=1227903050set FR0[GO0]=1227903051set FP0[GO0]=0set FQ0[GO0]=1227903052set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KQ0=GO0set GO0=GO0+1set FT0[GO0]=1227903056set FR0[GO0]=1227903057set FP0[GO0]=0set FQ0[GO0]=1227903058set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set KU0=GO0set GO0=GO0+1set FT0[GO0]=1227903059set FR0[GO0]=1227903060set FP0[GO0]=0set FQ0[GO0]=1227903061set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L00=GO0set GO0=GO0+1set FT0[GO0]=1227903062set FR0[GO0]=1227903063set FP0[GO0]=0set FQ0[GO0]=1227903064set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set LI0=GO0set GO0=GO0+1set FT0[GO0]=1227903280set FR0[GO0]=1227903282set FP0[GO0]=0set FQ0[GO0]=1227903284set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set LO0=GO0set GO0=GO0+1set FT0[GO0]=1227903281set FR0[GO0]=1227903283set FP0[GO0]=0set FQ0[GO0]=1227903285set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L10=GO0set GO0=GO0+1set FT0[GO0]=1227903308set FR0[GO0]=1227903309set FP0[GO0]=0set FQ0[GO0]=1227903310set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L20=GO0set GO0=GO0+1set FT0[GO0]=1227903311set FR0[GO0]=1227903312set FP0[GO0]=0set FQ0[GO0]=1227903313set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L30=GO0set GO0=GO0+1set FT0[GO0]=1227903562set FR0[GO0]=1227903563set FP0[GO0]=0set FQ0[GO0]=1227903564set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L70=GO0set GO0=GO0+1set FT0[GO0]=1227903565set FR0[GO0]=1227903566set FP0[GO0]=0set FQ0[GO0]=1227903567set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"set GI0[GO0]=60set L80=GO0set GO0=GO0+1set FT0[GO0]=1227895617set FR0[GO0]=1227896113set FP0[GO0]=1747990603set FQ0[GO0]=1227899961set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"set GI0[GO0]=0set G10[GO0]=H70set GO0=GO0+1set FT0[GO0]=1227895641set FR0[GO0]=1227896114set FP0[GO0]=1747990616set FQ0[GO0]=1227899705set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"set GI0[GO0]=0set G10[GO0]=H90set GO0=GO0+1set FT0[GO0]=1227895379set FR0[GO0]=1227895376set FP0[GO0]=1747990611set FQ0[GO0]=1227899713set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"set GI0[GO0]=0set G10[GO0]=G50set GO0=GO0+1set FT0[GO0]=1227895374set FR0[GO0]=1227895378set FP0[GO0]=1747990608set FQ0[GO0]=1227899731set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"set GI0[GO0]=0set G10[GO0]=G60set GO0=GO0+1set FT0[GO0]=1227895386set FR0[GO0]=1227895859set FP0[GO0]=1747990609set FQ0[GO0]=1227899734set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"set GI0[GO0]=0set G10[GO0]=G80set GO0=GO0+1set FT0[GO0]=1227895601set FR0[GO0]=1227895861set FP0[GO0]=1747990612set FQ0[GO0]=1227899957set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"set GI0[GO0]=0set G10[GO0]=GA0set GO0=GO0+1set FT0[GO0]=1227895618set FR0[GO0]=1227895877set FP0[GO0]=1747990606set FQ0[GO0]=1227899969set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"set GI0[GO0]=0set G10[GO0]=GW0set GO0=GO0+1set FT0[GO0]=1227895621set FR0[GO0]=1227895880set FP0[GO0]=1747990615set FQ0[GO0]=1227899703set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"set GI0[GO0]=18set G10[GO0]=GJ0set GO0=GO0+1set FT0[GO0]=1227895623set FR0[GO0]=1227895883set FP0[GO0]=1747990607set FQ0[GO0]=1227899716set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"set GI0[GO0]=0set G10[GO0]=GM0set GO0=GO0+1set FT0[GO0]=1227895632set FR0[GO0]=1227895891set FP0[GO0]=1747990613set FQ0[GO0]=1227899737set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"set GI0[GO0]=0set G10[GO0]=H00set GO0=GO0+1set FT0[GO0]=1227895633set FR0[GO0]=1227895892set FP0[GO0]=1747990599set FQ0[GO0]=1227899977set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"set GI0[GO0]=0set G10[GO0]=HI0set GO0=GO0+1set FT0[GO0]=1227895635set FR0[GO0]=1227895894set FP0[GO0]=1747990604set FQ0[GO0]=1227899978set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"set GI0[GO0]=0set G10[GO0]=HO0set GO0=GO0+1set FT0[GO0]=1227895636set FR0[GO0]=1227895895set FP0[GO0]=1747990610set FQ0[GO0]=1227899728set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"set GI0[GO0]=0set G10[GO0]=H20set GO0=GO0+1set FT0[GO0]=1227895638set FR0[GO0]=1227895897set FP0[GO0]=1747990597set FQ0[GO0]=1227899701set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"set GI0[GO0]=0set G10[GO0]=H40set GO0=GO0+1set FT0[GO0]=1227895639set FR0[GO0]=1227895898set FP0[GO0]=1747990602set FQ0[GO0]=1227899979set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"set GI0[GO0]=0set G10[GO0]=H50set GO0=GO0+1set FT0[GO0]=1227900740set FR0[GO0]=1227900739set FP0[GO0]=1747990601set FQ0[GO0]=1227900741set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"set GI0[GO0]=0set G10[GO0]=HK0set GO0=GO0+1set FT0[GO0]=1227901012set FR0[GO0]=1227901010set FP0[GO0]=1747990598set FQ0[GO0]=1227901015set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"set GI0[GO0]=0set G10[GO0]=HL0set GO0=GO0+1set FT0[GO0]=1227901495set FR0[GO0]=1227901494set FP0[GO0]=1747990614set FQ0[GO0]=1227901496set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"set GI0[GO0]=0set G10[GO0]=HN0set GO0=GO0+1set FT0[GO0]=1227895628set FR0[GO0]=1227895888set FP0[GO0]=1747990605set FQ0[GO0]=1227899717set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"set GI0[GO0]=0set G10[GO0]=GP0set GO0=GO0+1set FT0[GO0]=1227896129set FR0[GO0]=1227896137set FP0[GO0]=1747990600set FQ0[GO0]=0set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"set GI0[GO0]=0set G10[GO0]=ZC0set GO0=GO0+1set FT0[GO0]=1227895607set FR0[GO0]=1227895874set FP0[GO0]=1747990835set FQ0[GO0]=1227899730set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"set GI0[GO0]=0set G10[GO0]=GG0set GO0=GO0+1set FT0[GO0]=1227895377set FR0[GO0]=1227895375set FP0[GO0]=1747993167set FQ0[GO0]=1227894849set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"set GI0[GO0]=0set G10[GO0]=G40set GO0=GO0+1set GO0=GO0+1set FT0[GO0]=1227895602set FR0[GO0]=1227895862set FP0[GO0]=1747993942set FQ0[GO0]=1227899738set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"set GI0[GO0]=0set G10[GO0]=GB0set GO0=GO0+1set FT0[GO0]=1227902273set FR0[GO0]=1227902265set FP0[GO0]=1747993422set FQ0[GO0]=1227902274set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"set GI0[GO0]=0set G10[GO0]=G20set GO0=GO0+1set FT0[GO0]=1227895603set FR0[GO0]=1227895863set FP0[GO0]=1747993648set FQ0[GO0]=1227899959set G00[GO0]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"set GI0[GO0]=0set G10[GO0]=GC0set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELL)call TriggerAddCondition(t,Condition(function ENO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_PAWN_ITEM)call TriggerAddCondition(t,Condition(function FYO))set LY0=tset t=nullset t=CreateTrigger()call TriggerAddCondition(t,Condition(function FKO))call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_PAWN_ITEM)call TriggerAddCondition(t,Condition(function G5O))set MO0=tset t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(t,Condition(function G9O))set M20=tset t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function G7O))set t=nullset t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function GGO))set t=nullset t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call USI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function GWO))set M60=tset t=nullset t=CreateTrigger()set t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function GNO)call TriggerAddCondition(t,Condition(function GJO))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function GPO))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddAction(t,function H3O)call TriggerAddCondition(t,Condition(function HIO))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.33,true)call TriggerAddCondition(t,Condition(function HTO))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.75,true)call TriggerAddCondition(t,Condition(function Z0O))set t=nullcall SetPlayerAbilityAvailable(BO[1],1093744436,false)call SetPlayerAbilityAvailable(BO[2],1093744436,false)call SetPlayerAbilityAvailable(BO[3],1093744436,false)call SetPlayerAbilityAvailable(BO[4],1093744436,false)call SetPlayerAbilityAvailable(BO[5],1093744436,false)call SetPlayerAbilityAvailable(CO[1],1093744436,false)call SetPlayerAbilityAvailable(CO[2],1093744436,false)call SetPlayerAbilityAvailable(CO[3],1093744436,false)call SetPlayerAbilityAvailable(CO[4],1093744436,false)call SetPlayerAbilityAvailable(CO[5],1093744436,false)set t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ZNO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function ZRO))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function ZTO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(t,Condition(function ZUO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function V4O))set MG0[0]=1093817936set MG0[1]=1093817937set MG0[2]=1093817938set MG0[3]=1093817939set MG0[4]=1093817940set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function V9O))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.5,true)call TriggerAddCondition(t,Condition(function VWO))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VJO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function VNO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function X8O))set t=nullcall L2O()call SetAltMinimapIcon("war3mapImported\\black.blp")set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(t,Condition(function LNO))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function LJO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function NAO))call SetPlayerAbilityAvailable(BO[1],1093752406,false)call SetPlayerAbilityAvailable(BO[2],1093752406,false)call SetPlayerAbilityAvailable(BO[3],1093752406,false)call SetPlayerAbilityAvailable(BO[4],1093752406,false)call SetPlayerAbilityAvailable(BO[5],1093752406,false)call SetPlayerAbilityAvailable(CO[1],1093752406,false)call SetPlayerAbilityAvailable(CO[2],1093752406,false)call SetPlayerAbilityAvailable(CO[3],1093752406,false)call SetPlayerAbilityAvailable(CO[4],1093752406,false)call SetPlayerAbilityAvailable(CO[5],1093752406,false)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(t,Condition(function NNO))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function NRO)call TriggerAddCondition(t,Condition(function NTO))set BFO=GetRectCenter(P4)set N0=CreateUnitAtLoc(Player(12),1848651852,BFO,bj_UNIT_FACING)call SetUnitAcquireRange(N0,150)call B5O(N0)call RemoveLocation(BFO)call UnitAddItem(N0,CreateItem(FR0[VL0],0,0))call UnitAddAbility(N0,1093743666)set BFO=GetRectCenter(H4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(Z4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(V4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(W4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(X4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(Y4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(J4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(K4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(L4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(M4)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(V5)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set BFO=GetRectCenter(X5)call RemoveUnit(CreateUnitAtLoc(DO,1966092337,BFO,0))call RemoveLocation(BFO)set t=CreateTrigger()call TriggerRegisterUnitInRange(t,DZ,300,Condition(function ULI))call TriggerRegisterUnitInRange(t,ZZ,300,Condition(function ULI))call TriggerRegisterUnitInRange(t,BZ,300,Condition(function ULI))call TriggerAddCondition(t,Condition(function NUO))set t=nullset GG=CreateTrigger()call TriggerAddAction(GG,function SIO)set HG=CreateTrigger()call TriggerAddAction(HG,function SOO)set t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,C4)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,P3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,SA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function S3O))set t=nullset S5O=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,U3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,M3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,KA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function S6O))set t=nullset S5O=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,B4)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,R3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,TA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function S8O))set t=nullset S5O=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,I4)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,N3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,LA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function SAO))set t=nullset S5O=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,T3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,A4)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,NA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function SCO))set t=nullset S5O=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,Q3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,L3)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))set S5O=CreateRegion()call RegionAddRect(S5O,MA)call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function SEO))set t=nullset S5O=nullset ZG=CreateTrigger()call TriggerAddAction(ZG,function SPO)set VG=CreateTrigger()call TriggerRegisterUnitEvent(VG,IX0,EVENT_UNIT_DEATH)call TriggerAddAction(VG,function T0O)set WG=CreateTrigger()call TriggerRegisterUnitEvent(WG,IY0,EVENT_UNIT_DEATH)call TriggerAddAction(WG,function T1O)set XG=CreateTrigger()call TriggerRegisterUnitEvent(XG,IJ0,EVENT_UNIT_DEATH)call TriggerAddAction(XG,function T2O)set YG=CreateTrigger()call TriggerRegisterUnitEvent(YG,IZ0,EVENT_UNIT_DEATH)call TriggerAddAction(YG,function T4O)set JG=CreateTrigger()call TriggerRegisterUnitEvent(JG,IV0,EVENT_UNIT_DEATH)call TriggerAddAction(JG,function T6O)set KG=CreateTrigger()call TriggerRegisterUnitEvent(KG,IW0,EVENT_UNIT_DEATH)call TriggerAddAction(KG,function T8O)set LG=CreateTrigger()call TriggerRegisterUnitEvent(LG,CB0,EVENT_UNIT_DEATH)call TriggerAddAction(LG,function TAO)set MG=CreateTrigger()call TriggerRegisterUnitEvent(MG,CC0,EVENT_UNIT_DEATH)call TriggerAddAction(MG,function TCO)set NG=CreateTrigger()call TriggerRegisterUnitEvent(NG,CD0,EVENT_UNIT_DEATH)call TriggerAddAction(NG,function TEO)set SG=CreateTrigger()call TriggerRegisterUnitEvent(SG,C80,EVENT_UNIT_DEATH)call TriggerAddAction(SG,function TGO)set TG=CreateTrigger()call TriggerRegisterUnitEvent(TG,C90,EVENT_UNIT_DEATH)call TriggerAddAction(TG,function TZO)set RG=CreateTrigger()call TriggerRegisterUnitEvent(RG,CA0,EVENT_UNIT_DEATH)call TriggerAddAction(RG,function TWO)set t=CreateTrigger()call TriggerRegisterUnitEvent(t,I60,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function TYO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,BQ0,EVENT_UNIT_DAMAGED)call TriggerAddCondition(t,Condition(function TKO))set t=nullset PG=CreateTrigger()call UMI(PG,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(PG,Condition(function TMO))call TriggerAddAction(PG,function TNO)set QG=CreateTrigger()call UMI(QG,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(QG,Condition(function TTO))call TriggerAddAction(QG,function TRO)set UG=CreateTrigger()call TriggerAddAction(UG,function TQO)set IH=CreateTrigger()call TriggerRegisterTimerEventSingle(IH,75.00)call TriggerAddAction(IH,function R0O)set OH=CreateTrigger()call TriggerAddCondition(OH,Condition(function P3O))set BH=CreateTrigger()call TriggerAddAction(BH,function P5O)set CH=CreateTrigger()call TriggerAddAction(CH,function PAO)set DH=CreateTrigger()call UMI(DH,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(DH,Condition(function PCO))call TriggerAddAction(DH,function PDO)set EH=CreateTrigger()call UMI(EH,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(EH,Condition(function PFO))call TriggerAddAction(EH,function PGO)set FH=CreateTrigger()call TriggerRegisterTimerEventPeriodic(FH,1.00)call TriggerAddAction(FH,function PXO)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SELECTED)call TriggerAddCondition(t,Condition(function UVO))set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DESELECTED)call TriggerAddCondition(t,Condition(function UZO))set t=nullif GetRandomInt(0,10)<11 thenset t=CreateTrigger()set d=GetRandomReal(60,90)call TriggerRegisterTimerEvent(t,d,false)set t=nullendifset t=CreateTrigger()call TriggerRegisterUnitEvent(t,IA0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IA0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I62))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IB0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IB0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I72))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IC0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IC0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I82))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,ID0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,ID0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I92))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IE0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IE0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IA2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IF0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IF0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IB2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IG0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IG0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IC2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IH0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IH0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function ID2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IZ0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IZ0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IE2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IV0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IV0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IF2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IW0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IW0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IG2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IX0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IX0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IH2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IY0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IY0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IZ2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,IJ0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,IJ0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IV2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,I60,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,I60,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IW2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C10,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C10,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UNO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,CO0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,CO0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function USO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C20,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C20,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UTO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C30,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C30,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function URO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C40,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C40,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UPO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C50,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C50,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UQO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C60,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C60,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function UUO))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C70,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C70,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I02))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C80,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C80,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function II2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,C90,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,C90,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I12))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,CA0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,CA0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function IO2))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,CB0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,CB0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I22))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,CC0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,CC0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I32))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,CD0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,CD0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I42))set t=CreateTrigger()call TriggerRegisterUnitEvent(t,BQ0,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(t,BQ0,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function I52))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function UKO))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,5,true)call TriggerAddCondition(t,Condition(function IR2))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,4,true)call TriggerAddCondition(t,Condition(function O22))set t=nullset TR0=NTI()set t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,bj_mapInitialPlayableArea)call TriggerRegisterEnterRegion(t,S5O,Condition(function N1I))call TriggerAddCondition(t,Condition(function O72))set t=nullset S5O=nullset t=CreateTrigger()call TriggerAddCondition(t,Condition(function O92))call TriggerRegisterTimerEvent(t,5,true)set t=nullcall DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_VISIBLE,-4550,1250,300,true,true))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,-4550,1250,300,true,true))call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_VISIBLE,3200,1,300,true,true))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,3200,1,300,true,true))call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))call DestroyFogModifier(CreateFogModifierRadius(BO[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))call DestroyFogModifier(CreateFogModifierRadius(CO[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))call DestroyFogModifier(CreateFogModifierRect(BO[0],FOG_OF_WAR_VISIBLE,MS,true,true))call DestroyFogModifier(CreateFogModifierRect(CO[0],FOG_OF_WAR_VISIBLE,MS,true,true))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,3.5,true)call TriggerAddCondition(t,Condition(function OX2))set t=nullset RK=CreateTrigger()call TriggerRegisterUnitEvent(RK,BQ0,EVENT_UNIT_DEATH)call TriggerAddAction(RK,function OR2)set PK=CreateTrigger()call TriggerRegisterUnitEvent(PK,I60,EVENT_UNIT_DEATH)call TriggerAddAction(PK,function OS2)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(t,Condition(function A02))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(t,Condition(function A12))set t=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(t,function A22)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function A62))set t=nullset R50=CreateTrigger()call TriggerAddAction(R50,function AB2)set t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,DO,EVENT_PLAYER_UNIT_ATTACKED,Condition(function N1I))call TriggerAddCondition(t,Condition(function AD2))set t=nullset R60=CreateRegion()call RegionAddRect(R60,M5)call RegionAddRect(R60,N5)call RegionAddRect(R60,S5)call RegionAddRect(R60,T5)call RegionAddRect(R60,R5)call RegionAddRect(R60,P5)call RegionAddRect(R60,Q5)call RegionAddRect(R60,U5)call RegionAddRect(R60,I6)set GH=CreateTrigger()call TriggerRegisterEnterRectSimple(GH,bj_mapInitialPlayableArea)call TriggerAddCondition(GH,Condition(function AF2))call TriggerAddAction(GH,function AG2)set HH=CreateTrigger()call UMI(HH,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(HH,Condition(function AZ2))call TriggerAddAction(HH,function AJ2)set ZH=CreateTrigger()call UMI(ZH,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(ZH,Condition(function AL2))call TriggerAddAction(ZH,function AS2)if(bj_isSinglePlayer and AR2())thencall BK2()endifset t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,WO,"-wtf",true)call TriggerAddAction(t,function BT2)call TriggerAddCondition(t,Condition(function BM2))set t=CreateTrigger()call TriggerRegisterPlayerUnitEvent(t,BO[1],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,BO[2],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,BO[3],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,BO[4],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,BO[5],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[1],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[2],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[3],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[4],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerRegisterPlayerUnitEvent(t,CO[5],EVENT_PLAYER_HERO_LEVEL,Condition(function N1I))call TriggerAddCondition(t,Condition(function BQ2))set t=nullset t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,WO,"-test",true)call TriggerAddCondition(t,Condition(function CI2))set t=nullset t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,GetWorldBounds())call TriggerRegisterEnterRegion(t,S5O,Condition(function ULI))call TriggerAddCondition(t,Condition(function CJ2))set t=nullset S5O=nullset t=CreateTrigger()call TriggerRegisterUnitInRange(t,DZ,300,Condition(function ULI))call TriggerRegisterUnitInRange(t,ZZ,300,Condition(function ULI))call TriggerRegisterUnitInRange(t,BZ,300,Condition(function ULI))call TriggerAddCondition(t,Condition(function CL2))set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function CT2)set t=nullset t=CreateTrigger()call TriggerRegisterTimerEvent(t,2,false)call TriggerAddCondition(t,Condition(function DO2))set t=nullset QK=CreateRegion()call RegionAddRect(QK,F4)call RegionAddRect(QK,E4)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,25,false)call TriggerAddAction(t,function D92)set t=nullset t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,BO[1],"-",false)call TriggerRegisterPlayerChatEvent(t,BO[2],"-",false)call TriggerRegisterPlayerChatEvent(t,BO[3],"-",false)call TriggerRegisterPlayerChatEvent(t,BO[4],"-",false)call TriggerRegisterPlayerChatEvent(t,BO[5],"-",false)call TriggerRegisterPlayerChatEvent(t,CO[1],"-",false)call TriggerRegisterPlayerChatEvent(t,CO[2],"-",false)call TriggerRegisterPlayerChatEvent(t,CO[3],"-",false)call TriggerRegisterPlayerChatEvent(t,CO[4],"-",false)call TriggerRegisterPlayerChatEvent(t,CO[5],"-",false)call TriggerAddAction(t,function DB2)set t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(t,Condition(function GQ2))call TriggerAddAction(t,function H12)set VM[0]=falseset VM[1]=falseset VM[2]=falseset VM[3]=falseset VM[4]=falseset VM[5]=falseset VM[6]=falseset VM[7]=falseset VM[8]=falseset VM[9]=falseset VM[10]=falseset VM[11]=falseset VM[12]=falseset VM[13]=falseset VM[14]=falseset VM[15]=falseset VM[16]=falseset RV0[0]=falseset RV0[1]=falseset RV0[2]=falseset RV0[3]=falseset RV0[4]=falseset RV0[5]=falseset RV0[6]=falseset RV0[7]=falseset RV0[8]=falseset RV0[9]=falseset RV0[10]=falseset RV0[11]=falseset RV0[12]=falseset RV0[13]=falseset RV0[14]=falseset RV0[15]=falseset RV0[16]=falseset RW0[0]=trueset RW0[1]=trueset RW0[2]=trueset RW0[3]=trueset RW0[4]=trueset RW0[5]=trueset RW0[6]=trueset RW0[7]=trueset RW0[8]=trueset RW0[9]=trueset RW0[10]=trueset RW0[11]=trueset RW0[12]=trueset RW0[13]=trueset RW0[14]=trueset RW0[15]=trueset RW0[16]=trueset RX0[0]=falseset RX0[1]=falseset RX0[2]=falseset RX0[3]=falseset RX0[4]=falseset RX0[5]=falseset RX0[6]=falseset RX0[7]=falseset RX0[8]=falseset RX0[9]=falseset RX0[10]=falseset RX0[11]=falseset RX0[12]=falseset RX0[13]=falseset RX0[14]=falseset RX0[15]=falseset RX0[16]=falseset RL0[0]=falseset RL0[1]=falseset RL0[2]=falseset RL0[3]=falseset RL0[4]=falseset RL0[5]=falseset RL0[6]=falseset RL0[7]=falseset RL0[8]=falseset RL0[9]=falseset RL0[10]=falseset RL0[11]=falseset RL0[12]=falseset RL0[13]=falseset RL0[14]=falseset RL0[15]=falseset RL0[16]=falseset RL0[GetPlayerId(BO[1])]=trueset RL0[GetPlayerId(BO[2])]=trueset RL0[GetPlayerId(BO[3])]=trueset RL0[GetPlayerId(BO[4])]=trueset RL0[GetPlayerId(BO[5])]=trueset RL0[GetPlayerId(CO[1])]=trueset RL0[GetPlayerId(CO[2])]=trueset RL0[GetPlayerId(CO[3])]=trueset RL0[GetPlayerId(CO[4])]=trueset RL0[GetPlayerId(CO[5])]=truecall HM2()set GM[0]=trueset GM[1]=trueset GM[2]=trueset GM[3]=trueset GM[4]=trueset GM[5]=trueset GM[6]=trueset GM[7]=trueset GM[8]=trueset GM[9]=trueset GM[10]=trueset GM[11]=trueset GM[12]=trueset GM[13]=trueset GM[14]=trueset GM[15]=trueset RP0[0]=falseset RP0[1]=falseset RP0[2]=falseset RP0[3]=falseset RP0[4]=falseset RP0[5]=falseset RP0[6]=falseset RP0[7]=falseset RP0[8]=falseset RP0[9]=falseset RP0[10]=falseset RP0[11]=falseset RP0[12]=falseset RP0[13]=falseset RP0[14]=falseset HM[GetPlayerId(BO[1])]=falseset HM[GetPlayerId(BO[2])]=falseset HM[GetPlayerId(BO[3])]=falseset HM[GetPlayerId(BO[4])]=falseset HM[GetPlayerId(BO[5])]=falseset HM[GetPlayerId(CO[1])]=falseset HM[GetPlayerId(CO[2])]=falseset HM[GetPlayerId(CO[3])]=falseset HM[GetPlayerId(CO[4])]=falseset HM[GetPlayerId(CO[5])]=falseset RQ0[GetPlayerId(BO[1])]=falseset RQ0[GetPlayerId(BO[2])]=falseset RQ0[GetPlayerId(BO[3])]=falseset RQ0[GetPlayerId(BO[4])]=falseset RQ0[GetPlayerId(BO[5])]=falseset RQ0[GetPlayerId(CO[1])]=falseset RQ0[GetPlayerId(CO[2])]=falseset RQ0[GetPlayerId(CO[3])]=falseset RQ0[GetPlayerId(CO[4])]=falseset RQ0[GetPlayerId(CO[5])]=falseset t=CreateTrigger()call USI(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)call USI(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call USI(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(t,Condition(function Z72))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,5,true)call TriggerAddCondition(t,Condition(function Z62))set P00[GetPlayerId(BO[1])]=falseset P00[GetPlayerId(BO[2])]=falseset P00[GetPlayerId(BO[3])]=falseset P00[GetPlayerId(BO[4])]=falseset P00[GetPlayerId(BO[5])]=falseset P00[GetPlayerId(CO[1])]=falseset P00[GetPlayerId(CO[2])]=falseset P00[GetPlayerId(CO[3])]=falseset P00[GetPlayerId(CO[4])]=falseset P00[GetPlayerId(CO[5])]=falseset t=nullset WM[GetPlayerId(BO[1])]=falseset WM[GetPlayerId(BO[2])]=falseset WM[GetPlayerId(BO[3])]=falseset WM[GetPlayerId(BO[4])]=falseset WM[GetPlayerId(BO[5])]=falseset WM[GetPlayerId(CO[1])]=falseset WM[GetPlayerId(CO[2])]=falseset WM[GetPlayerId(CO[3])]=falseset WM[GetPlayerId(CO[4])]=falseset WM[GetPlayerId(CO[5])]=falseset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function ZG2))set P20[0]=falseset P20[1]=falseset P20[2]=falseset P20[3]=falseset P20[4]=falseset P20[5]=falseset P20[6]=falseset P20[7]=falseset P20[8]=falseset P20[9]=falseset P20[10]=falseset P20[11]=falseset P20[12]=falseset P20[13]=falseset P20[14]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed6.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed7.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Human\\Rifleman\\RiflemanPissed8.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav"set P70[P80]=falseset P80=P80+1set P60[P80]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\Ogre\\OgrePissed1.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\Ogre\\OgrePissed2.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\Ogre\\OgrePissed3.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\Ogre\\OgrePissed4.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\Ogre\\OgrePissed5.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed2.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed3.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed4.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed5.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed6.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed7.wav"set P70[P80]=falseset P60[P80]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav"set P70[P80]=falseset P60[P80]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed2.wav"set P70[P80]=falseset P60[P80]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed3.wav"set P70[P80]=falseset P60[P80]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed4.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed2.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed3.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed4.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed5.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed6.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed7.wav"set P70[P80]=falseset P60[P80]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed8.wav"set P70[P80]=falseset PB0[0]=falseset PB0[1]=falseset PB0[2]=falseset PB0[3]=falseset PB0[4]=falseset PB0[5]=falseset PB0[6]=falseset PB0[7]=falseset PB0[8]=falseset PB0[9]=falseset PB0[10]=falseset PB0[11]=falseset PB0[12]=falseset PB0[13]=falseset t=CreateTrigger()set S5I=GetHandleId(t)call TriggerRegisterTimerEvent(t,0.02,true)call TriggerAddCondition(t,Condition(function VP2))call SaveReal(LY,(S5I),(149),((0)*1.0))call SaveReal(LY,(S5I),(150),((0)*1.0))call SaveReal(LY,(S5I),(151),((160)*1.0))set LL[0]=falseset LL[1]=falseset LL[2]=falseset LL[3]=falseset LL[4]=falseset LL[5]=falseset LL[6]=falseset LL[7]=falseset LL[8]=falseset LL[9]=falseset LL[10]=falseset LL[11]=falseset LL[12]=falseset t=nullset t=CreateTrigger()call TriggerAddAction(t,function XX2)call TriggerAddCondition(t,Condition(function WI2))set PF0=tset t=CreateTrigger()call TriggerRegisterTimerEvent(t,0.01,false)call TriggerAddCondition(t,Condition(function XY2))set t=nullif C2 thenset t=CreateTrigger()call TriggerRegisterTimerEvent(t,1,true)call TriggerAddCondition(t,Condition(function S62))endifset t=nullset VH=CreateTrigger()call TriggerRegisterTimerExpireEvent(VH,E0[1])call TriggerAddAction(VH,function TD2)set WH=CreateTrigger()call TriggerRegisterTimerExpireEvent(WH,E0[2])call TriggerAddAction(WH,function TF2)set XH=CreateTrigger()call TriggerRegisterTimerExpireEvent(XH,E0[3])call TriggerAddAction(XH,function TH2)set YH=CreateTrigger()call TriggerRegisterTimerExpireEvent(YH,E0[4])call TriggerAddAction(YH,function TV2)set JH=CreateTrigger()call TriggerRegisterTimerExpireEvent(JH,E0[5])call TriggerAddAction(JH,function TX2)set KH=CreateTrigger()call TriggerRegisterTimerExpireEvent(KH,E0[7])call TriggerAddAction(KH,function TJ2)set LH=CreateTrigger()call TriggerRegisterTimerExpireEvent(LH,E0[8])call TriggerAddAction(LH,function TL2)set MH=CreateTrigger()call TriggerRegisterTimerExpireEvent(MH,E0[9])call TriggerAddAction(MH,function TN2)set NH=CreateTrigger()call TriggerRegisterTimerExpireEvent(NH,E0[10])call TriggerAddAction(NH,function TT2)set TH=CreateTrigger()call TriggerRegisterTimerExpireEvent(TH,E0[11])call TriggerAddAction(TH,function TP2)set t=CreateTrigger()call TriggerRegisterTimerEvent(t,14,false)call TriggerAddCondition(t,Condition(function RI2))set t=CreateTrigger()call TriggerRegisterTimerEvent(t,15,false)call TriggerAddCondition(t,Condition(function R02))set RH=CreateTrigger()call TriggerRegisterTimerEventSingle(RH,65.00)call TriggerAddAction(RH,function RO2)set PH=CreateTrigger()call TriggerRegisterTimerEventSingle(PH,90.00)call TriggerAddAction(PH,function R32)set QH=CreateTrigger()call TriggerRegisterTimerEventSingle(QH,120.00)call TriggerAddAction(QH,function R52)set t=CreateTrigger()set S5O=CreateRegion()call RegionAddRect(S5O,GetWorldBounds())call TriggerRegisterEnterRegion(t,S5O,Condition(function N1I))call TriggerAddCondition(t,Condition(function K14))set HLI[1]=1093686867set HLI[2]=1093686859set HLI[3]=1093686865set HLI[4]=1093687372set HLI[5]=1093686861set HLI[6]=1093686862set HLI[7]=1093686863set HLI[8]=1093686864set HLI[9]=1093686855set HLI[10]=1093686874set t=nullset S5O=nullset t=CreateTrigger()call UMI(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function E44))call TriggerAddAction(t,function E54)endfunctionfunction config takes nothing returns nothingcall SetMapName("TRIGSTR_50000")call SetMapDescription("TRIGSTR_50001")call SetPlayers(10)call SetTeams(10)call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)call DefineStartLocation(0,-6990.0,6840.0)call DefineStartLocation(1,-6990.0,6840.0)call DefineStartLocation(2,-6990.0,6840.0)call DefineStartLocation(3,-6990.0,6840.0)call DefineStartLocation(4,-6990.0,6840.0)call DefineStartLocation(5,-6990.0,6840.0)call DefineStartLocation(6,-6990.0,6840.0)call DefineStartLocation(7,-6990.0,6840.0)call DefineStartLocation(8,-6990.0,6840.0)call DefineStartLocation(9,-6990.0,6840.0)call SetPlayerStartLocation(Player(1),0)call ForcePlayerStartLocation(Player(1),0)call SetPlayerColor(Player(1),ConvertPlayerColor(1))call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(1),false)call SetPlayerController(Player(1),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(2),1)call ForcePlayerStartLocation(Player(2),1)call SetPlayerColor(Player(2),ConvertPlayerColor(2))call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(2),false)call SetPlayerController(Player(2),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(3),2)call ForcePlayerStartLocation(Player(3),2)call SetPlayerColor(Player(3),ConvertPlayerColor(3))call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(3),false)call SetPlayerController(Player(3),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(4),3)call ForcePlayerStartLocation(Player(4),3)call SetPlayerColor(Player(4),ConvertPlayerColor(4))call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(4),false)call SetPlayerController(Player(4),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(5),4)call ForcePlayerStartLocation(Player(5),4)call SetPlayerColor(Player(5),ConvertPlayerColor(5))call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(5),false)call SetPlayerController(Player(5),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(7),5)call ForcePlayerStartLocation(Player(7),5)call SetPlayerColor(Player(7),ConvertPlayerColor(7))call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(7),false)call SetPlayerController(Player(7),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(8),6)call ForcePlayerStartLocation(Player(8),6)call SetPlayerColor(Player(8),ConvertPlayerColor(8))call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(8),false)call SetPlayerController(Player(8),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(9),7)call ForcePlayerStartLocation(Player(9),7)call SetPlayerColor(Player(9),ConvertPlayerColor(9))call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(9),false)call SetPlayerController(Player(9),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(10),8)call ForcePlayerStartLocation(Player(10),8)call SetPlayerColor(Player(10),ConvertPlayerColor(10))call SetPlayerRacePreference(Player(10),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(10),false)call SetPlayerController(Player(10),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(11),9)call ForcePlayerStartLocation(Player(11),9)call SetPlayerColor(Player(11),ConvertPlayerColor(11))call SetPlayerRacePreference(Player(11),RACE_PREF_UNDEAD)call SetPlayerRaceSelectable(Player(11),false)call SetPlayerController(Player(11),MAP_CONTROL_USER)call InitCustomTeams()call SetPlayerAlliance(Player(15),Player(1),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(2),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(3),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(4),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(5),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(7),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(8),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(9),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(10),ConvertAllianceType(6),true)call SetPlayerAlliance(Player(15),Player(11),ConvertAllianceType(6),true)call SetStartLocPrioCount(0,9)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,9)call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(2,9)call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,9)call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,9)call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,9)call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,9)call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,9)call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,9)call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,7,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(9,9)call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,7,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,8,8,MAP_LOC_PRIO_HIGH)endfunction